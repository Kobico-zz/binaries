!function(e){var t={};function i(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=366)}({366:function(e,t){!function(){void 0===window.gigya.accounts.plugins&&(window.gigya.accounts.plugins={}),window.gigya.accounts.plugins.screenSet={instances:{},showScreenSet:function(e){t.createInstance(e)},switchScreen:function(e){var t=e.isPopup?"":e.containerID,i=window.gigya.accounts.plugins.screenSet.instances[e.screenSet+"_"+t];i&&i.switchScreen(e.screen)},hideScreenSet:function(e){var t=e.isPopup?"":e.containerID,i=window.gigya.accounts.plugins.screenSet.instances[e.screenSet+"_"+t];i&&i.hide("canceled",null,!0)},_injectCSS:function(e){e||(e={}),window.gigya.global.addCSS(t.defaultCss,e.cssPrefix),(window.gigya.localInfo.isIE7||window.gigya.localInfo.isIE8||window.gigya.localInfo.isIE&&window.gigya.localInfo.quirksMode)&&window.gigya.global.addCSS(".gigya-layout-cell {overflow:hidden;margin-left:-1px!important;}"),t.addedCSS=!0}};var e=window.gigya.accounts.plugins.screenSet,t={oErrorAttributes:{206001:{name:"data-on-pending-registration-screen",requiresFinalize:!0},403043:{name:"data-on-existing-login-identifier-screen"},206002:{name:"data-on-pending-verification-screen",resetFinalizeNeededState:!0},206003:{name:"data-on-missing-loginid-screen"},403100:{name:"data-on-pending-password-change-screen",requiresFinalize:!0},403101:{name:"data-on-pending-tfa-verification-screen",requiresFinalize:!0},403102:{name:"data-on-pending-tfa-registration-screen",requiresFinalize:!0},403110:{name:"data-on-pending-recent-login-screen"}},oFormsActions:{"gigya-login-form":{submit:window.gigya.accounts.login,defaultSubmitParams:{include:"profile,data,emails"},specialFields:{loginID:1,password:1,captchaText:1,captchaToken:1}},"gigya-reset-password-form":{submit:window.gigya.accounts.resetPassword,specialFields:{loginID:1,newPassword:1,email:1,secretAnswer:1,email:1},profileObjectName:"securityFields",resetFinalizeNeededState:!0},"gigya-register-form":{neededData:{initRegistration:{params:{},cache:!1},getPolicies:{params:{sections:"passwordComplexity"}},getSchema:{params:{}}},prepopulateFrom:["getAccountInfo","getAccountInfo.profile","getAccountInfo.loginIDs"],submit:window.gigya.accounts.register,defaultSubmitParams:{include:"profile,data,emails,loginIDs"},specialFields:{username:1,email:1,password:1,secretQuestion:1,secretAnswer:1,captchaText:1,captchaToken:1},profileObjectName:"profile",dataObjectName:"data"},"gigya-link-accounts-form":{submit:window.gigya.accounts.linkAccounts,defaultSubmitParams:{include:"profile,data"},specialFields:{loginID:1,password:1}},"gigya-profile-form":{neededData:{getSchema:{params:{}},getAccountInfo:{params:{include:"loginIDs,emails,profile,data"}}},prepopulateFrom:["getAccountInfo","getAccountInfo.profile","getAccountInfo.loginIDs"],specialFields:{username:1,oldPassword:1,password:1,newPassword:1,passwordRetype:1,secretQuestion:1,secretAnswer:1,addLoginEmails:1,removeLoginEmails:1},submit:window.gigya.accounts.setAccountInfo,profileObjectName:"profile",dataObjectName:"data"},"gigya-resend-verification-code-form":{neededData:{getAccountInfo:{params:{include:"emails"}}},submit:window.gigya.accounts.resendVerificationCode,specialFields:{email:1}}},isHidden:function(e){for(;e&&e.parentNode;){if("hidden"==e.style.visibility||-1!=e.className.indexOf("gigya-error-display")&&-1==e.className.indexOf("gigya-error-display-active")||"none"==e.style.display)return!0;e=e.parentNode}return!1},isFieldInHiddenContainer:function(e){for(var t=e;t;){if(window.gigya.utils.DOM.isElementClass(t,"gigya-container")&&!window.gigya.utils.DOM.isElementClass(t,"gigya-container-enabled"))return!0;t=t.parentElement}return!1},containerConditions:{sets:{rendering:{"data-domains":function(e){for(var t=e.split(","),i=0;i<t.length;i++)if(window.gigya.pluginUtils.domain.isInDomain(t[i]))return!0;return!1},"data-apikeys":function(e){var t=e.split(",");return-1!=window.gigya.utils.array.indexOf(t,window.gigya.thisScript.APIKey)},"data-prob":function(e,t){return t._screenSet._random<=parseFloat(e)},"data-after-date":function(e){var t=new Date(e);return(new Date).getTime()>t.getTime()},"data-before-date":function(e){var t=new Date(e);return(new Date).getTime()<=t.getTime()},"data-display-cap":function(e,i){var a=t.containerConditions.getHistoryFromSettings(i);return!!a&&(e>a.displayCount&&(a.wasUpdated||(a.displayCount++,t.containerConditions.saveHistoryInSettings(a,i),a.wasUpdated=!0),!0))},"data-display-freq":function(e,i){var a=t.containerConditions.getHistoryFromSettings(i);if(!a)return!1;var n=(new Date).getTime(),r=(n-a.lastDisplay)/1e3;return(-1==a.lastDisplay||e<r)&&(a.wasUpdated||(a.lastDisplay=n,t.containerConditions.saveHistoryInSettings(a,i),a.wasUpdated=!0),!0)},"data-empty-fields":function(e,t){var i,a=t._el.getElementsByTagName("*");if("*"==e){i=[];for(var n=0;n<a.length;n++){var r=a[n].attributes["data-gigya-name"];r&&i.push(r.value)}}else i=e.split(",");for(n=0;n<i.length;n++){var s=window.gigya.utils.DOM.getElementsByAttribute(t._el,"*","name",i[n]);if(s&&s.length>0&&!s[0].value)return!0}return!1}},validation:{"data-condition":function(e,t){var i={};if(t._screenSet._apiData.getAccountInfo&&(i=window.gigya.utils.object.extractProperties(t._screenSet._apiData.getAccountInfo,{},"profile|data")),i.profile||(i.profile={}),i.data||(i.data={}),t._form){var a=t._form.getFlatFormData();for(var n in a){for(var r=i,s=n.split(".");s.length>1;){var o=s.splice(0,1);void 0===r[o]&&(r[o]={}),r=r[o]}r[s[0]]=a[n]}}return new Function("value","data","profile","return eval(value);")(e,i.data,i.profile)}}},testContainer:function(e,t){for(var i=e._el.getElementsByTagName("*"),a=0;a<i.length;a++){var n=i[a].attributes["data-gigya-name"];if(n&&n.value)if(e._screenSet.isRequiredField(n.value)&&!i[a].value)return!0}for(a=0;a<e._el.attributes.length;a++){var r=e._el.attributes[a],s=t[r.name];if(s&&r.value&&!s(r.value,e))return!1}return!0},getHistoryNeededContainers:function(e){if(e){for(var t=[],i=window.gigya.utils.DOM.getElementsByClass(e,"gigya-container"),a=0;a<i.length;a++){var n=i[a],r=n.getAttribute("name");n&&r&&(n.attributes["data-display-cap"]||n.attributes["data-display-freq"])&&t.push(r)}return t}},getHistoryFromSettings:function(e){if(e._screenSet._apiData.getUserSettings&&!(e._screenSet._apiData.getUserSettings.errorCode>0)){var t=e._screenSet._apiData.getUserSettings.settings;if(t){var i=e._el.attributes.name.value;if(i){var a={};return t[i]&&(a=t[i]),a.displayCount||(a.displayCount=0),a.lastDisplay||(a.lastDisplay=-1),a}}}},saveHistoryInSettings:function(e,t){if(t._screenSet._apiData.getUserSettings&&!(t._screenSet._apiData.getUserSettings.errorCode>0)){var i=t._screenSet._apiData.getUserSettings.settings;if(i){var a=t._el.attributes.name.value;i[a]=e;var n={};n[a]={},window.gigya.utils.object.extractProperties(e,n[a],"displayCount|lastDisplay"),window.gigya.socialize.setUserSettings({group:"gigya_container_history-"+t._screenSet._ID,regToken:t._screenSet._lastSubmittedFormResponse?t._screenSet._lastSubmittedFormResponse.regToken:null,settings:n,disableLocalSettings:!0})}}}},errorCodes:{MISSING_REQUIRED:400027,VALIDATION_ERROR:400009,UNIQUE_IDENTIFIER_EXISTS:400003},alwaysRequiredFields:{secretAnswer:1,secretQuestion:1,loginID:1,username:1,password:1,oldPassword:1,newPassword:1},_originalElements:{},GigyaParam:function(e,t,i){return null==t&&(t=e.replace("_","")),null==i&&(i=t),{name:e,autoFillName:t,paramName:i}},oFieldNameData:{},getPasswordStrengthData:function(e){e||(e="");var t={lower:e.match(/[a-z]/g),upper:e.match(/[A-Z]/g),digits:e.match(/\d/g),specialChars:e.match(/[^\dA-Za-z]/g)};for(var i in t)t[i]&&t[i].length&&(t[i]=t[i].length),t[i]||(t[i]=0);return t.length=e.length,t.charGroups=(t.lower>0)+(t.upper>0)+(t.digits>0)+(t.specialChars>0),t},isPasswordStrengthValid:function(e,t,i){if(e&&t&&i)return i.regex?new RegExp(i.regex).test(e):!(t.lower<i.minLowercase||t.upper<i.minUppercase||t.digits<i.minDigit||t.specialChars<i.minSpecialChars||t.charGroups<i.minCharGroups||t.length<i.minLength)},attachFileUpload:function(e,t,i){if(!(a=e.divUploadForm)){var a=document.createElement("div");e.id=t+"__"+(new Date).getTime(),a.style.position="absolute",a.style.overflow="hidden",a.style.fontSize="50px",a.style.cursor="pointer",a.style.opacity="0",a.style.filter="alpha(opacity=0)"}a.style.zIndex=window.gigya.utils.DOM.getNextZIndex();var n=window.gigya.global.getPos(e),r=window.setInterval(function(){e&&e.parentNode?0!=e.offsetHeight&&(a.style.left=n.x,a.style.top=n.y,a.style.height=e.offsetHeight+"px",a.style.width=e.offsetWidth+"px",clearInterval(r)):clearInterval(r)},500);a.innerHTML='<form enctype="multipart/form-data" method="post" class="gigya-photo-upload-form" target="'+t+'" action="'+i+'"><input type="file" accept="image/*" name="_profilePhoto" style="font-size:500px;direction:rtl;height:100%;cursor:pointer;'+(window.gigya.localInfo.isIE?"width:1000px":"")+'" /></form>',e.divUploadForm||window.gigya.utils.DOM.appendToBody(a);var s=a.firstChild.elements._profilePhoto;window.gigya.utils.DOM.addEventListener(s,"change",function(){var e=document.getElementById(t+"_path");e&&(e.innerHTML=s.value.split("\\").pop()),s.form.uploading=!0,document.getElementById(t).setAttribute("uploading","1"),s.form.submit()}),e.divUploadForm=a;var o=this;return e._fileUploadInterval=window.setInterval(function(){o.onFileUploadInterval(e,a)},500),a.firstChild},checkSchema:function(e,t){},onFileUploadInterval:function(e,t){if(document.getElementById(e.id)){var i=window.gigya.global.getPos(e);parseInt(t.style.left)!=i.x&&(t.style.left=i.x+"px"),parseInt(t.style.top)!=i.y&&(t.style.top=i.y+"px")}else{try{t.parentNode.removeChild(t)}catch(e){}window.clearInterval(e._fileUploadInterval),e._fileUploadInterval=null}},dimContainer:function(e){if(!e.elDim){var t=document.createElement("div");t.style.width=e.offsetWidth+"px",t.style.height=e.offsetHeight+"px",t.className="gigya-screen-dimmer";var i=window.gigya.global.getPos(e);t.style.top=i.y+"px",t.style.left=i.x+"px",t.style.zIndex=window.gigya.utils.DOM.getNextZIndex(),e.elDim=t,window.gigya.utils.DOM.appendToBody(t);var a=document.createElement("div");a.style.width=e.offsetWidth+"px",a.style.height=e.offsetHeight+"px",a.className="gigya-screen-loader",a.style.top=i.y+"px",a.style.left=i.x+"px",a.style.zIndex=window.gigya.utils.DOM.getNextZIndex(),e.elProgress=a,window.gigya.utils.DOM.appendToBody(a)}},undimContainer:function(e){e&&(e.elDim&&(e.elDim.parentNode.removeChild(e.elDim),e.elDim=null),e.elProgress&&(e.elProgress.parentNode.removeChild(e.elProgress),e.elProgress=null))},getFirstGigyaClass:function(e){if(e)for(var t=e.className.split(" "),i=0;i<t.length;i++)if(t[i]&&0==t[i].indexOf("gigya-"))return t[i]},instances_size:0,screenSet:function(e){this._p=e,this._elid=e.containerID,this.lang=this._p.lang},form:function(e,i){this._screenSet=e,this._elForm=i,this._gigyaClassName=t.getFirstGigyaClass(this._elForm),this._ID=i.id||t.getFirstGigyaClass(i),this._screenSet._formsInstances[this._ID]=this,this._elForm.setAttribute("data-gigya-id",this._ID),this._actions=t.oFormsActions[this._gigyaClassName]||{},this._hasPasswordField=window.gigya.utils.DOM.getElementsByAttribute(this._elForm,"*","name","password").length>0,this._actions.resetFinalizeNeededState&&(this._screenSet.finalizeRegistration=!1)},widget:function(e,t){this._el=t,this._screenSet=e,this._elForm=this._screenSet.getElementForm(this._el),"gigya-container"==this._el.className&&this._screenSet._containerInstances.push(this),this._elForm&&(this._form=this._screenSet._formsInstances[this._elForm.className])},createInstance:function(i){document.getElementById(i.containerID).innerHTML="";var a=new t.screenSet(i),n=i.isPopup?"":i.containerID;e.instances[i.screenSet+"_"+n]=a,t.instances_size++,a.init()},createDefaultTemplates:function(){var e={_map:{},get:function(e){return this._map[e]},set:function(e,t){this._map[e]=t instanceof Array?t.join(""):t}};return e.set("passwordStrength-strengthMeter",['<div class="gigya-passwordStrength-text"><span class="gigya-passwordStrength-text">$TEXT(\'password_strength_colon\')</span><span class="gigya-passwordStrength-text gigya-passwordStrength-scoreText">${scoreText}</span></div>','<div class="gigya-passwordStrength-bar"><div class="${barIndicatorClass}"></div></div>']),e.set("passwordStrength-minimumRequirements",['<div class="gigya-passwordStrength-text-requirements">$requirements</div>']),e.set("captcha",['<div id="${recaptchaContainerID}"></div>']),e.set("screenSet-dialog",['<div class="gigya-screen-dialog-inner">','<div class="gigya-screen-dialog-top">','<div class="gigya-screen-dialog-caption" id="${innerContainerID}_caption"></div>','<div class="gigya-screen-dialog-close" id="${innerContainerID}_close"></div>',"</div>",'<div id="${innerContainerID}"></div>',"</div>"]),e.set("screenSet",['<h1 class="gigya-screen-caption" id="${innerContainerID}_caption"></h1>','<div id="${innerContainerID}"></div>']),e.set("photoUpload",['<div class="gigya-photo-upload-image" id="${photoElementID}"></div>',"<div>",'<div class="gigya-photo-upload-button">$choose_file</div>','<div class="gigya-photo-upload-path" id="${pathContainerID}">$no_file_chosen</div>','<div class="gigya-photo-upload-text">$tip</div>',"</div>"]),e},defaultCss:[".gigya-reset *, div.gigya-reset, .gigya-reset span, .gigya-reset a:hover, .gigya-reset a:visited, .gigya-reset a:link, .gigya-reset a:active{","border:none; padding:0px;margin:0px;color:inherit;text-decoration:none;width:auto;float:none;-moz-border-radius:0;border-radius:0;","font-family:arial;font-size:12px;color:#333333;background:none;text-align:left;}",".gigya-screen .gigya-error-msg {color:#DD4B39; font-size:11px;}",".gigya-screen input.gigya-error, .gigya-screen input.gigya-error {border-color:#DD4B39}","div.gigya-password-strength {}","span.gigya-passwordStrength-text {font-weight:bold;}","div.gigya-passwordStrength-text-requirements {width: 100%;margin-top: 8px}","span.gigya-passwordStrength-scoreText {font-weight:normal;margin-left:3px;}","div.gigya-passwordStrength-bar {width: 90%; height: 5px; background-color:#F3F3F3;margin-top: 8px}","div.gigya-passwordStrength-bar-too_weak {width: 5%; height: 5px; background-color:#DE321D;}","div.gigya-passwordStrength-bar-weak {width: 25%; height: 5px; background-color:#DE321D;}","div.gigya-passwordStrength-bar-fair {width: 50%; height: 5px; background-color:#4995E0;}","div.gigya-passwordStrength-bar-strong {width: 75%; height: 5px; background-color:#76C261;}","div.gigya-passwordStrength-bar-very_strong {width: 100%; height: 5px; background-color:#76C261;}","div.gigya-calculate-size div.gigya-captcha {min-width: 318px; min-height: 129px;_width:318px;_height:129px;}","div.gigya-social-login {min-width: 110px; min-height:120px; _width: 110px; _height: 120px;}","div.gigya-tfa {min-width: 325px; min-height:200px; _width: 325px; _height: 200px;}","div.gigya-container { display:none; }","div.gigya-container-enabled { display:block; }","div.gigya-loginID-availability {line-height:18px; background-repeat:no-repeat; background-position: left center}","div.gigya-loginID-availability-available {padding-left:17px; background-image: url('"+window.gigya._.getCdnResource()+"/gs/i/accounts/ok.png'); color: #4FA373}","div.gigya-loginID-availability-not-available {padding-left:16px; background-image: url('"+window.gigya._.getCdnResource()+"/gs/i/accounts/error.png'); color: #DD4B39}","div.gigya-loginID-availability-progress {padding-left: 20px; background-image: url('"+window.gigya._.getCdnResource()+"/gs/i/accounts/smallLoader.gif'); color: #666666}","div.gigya-profile-photo {border-radius: 3px;min-width: 64px; min-height:64px; _width: 64px; _height: 64px;}","div.gigya-screen-dimmer {position:absolute;opacity:0.5; filter: 'alpha(opacity=50)';background-color:#FFFFFF}","div.gigya-screen-loader {position:absolute; background:transparent url('"+window.gigya._.getCdnResource()+"/gs/i/accounts/bigLoader.gif') no-repeat center center;}","div.gigya-screen-dialog {position:absolute; display:inline-block;top:25px;left:25px;border: 8px solid #CCCCCC; border-radius:8px;background-color:#FFFFFF}","div.gigya-screen-dialog-content {overflow:auto;padding:25px;}","div.gigya-screen-dialog-caption {float:left; font-weight:bold;font-size:16px;font-family:arial;}","div.gigya-screen-dialog-close {line-height:33px;height:33px;width:20px;float:right;background-image: url('"+window.gigya._.getCdnResource()+"/gs/i/accounts/close_dialog.png');cursor:pointer;background-position:right;background-repeat:no-repeat}","div.gigya-screen-dialog-inner {border: 1px solid #AAAAAA}","div.gigya-screen-dialog-top {overflow:hidden;zoom:1;background-color: #F3F3F3;line-height:33px;padding: 0 10px 0 11px;}","div.gigya-screen-dialog-mobile {position:absolute;display:inline-block;top:0;left:0;background-color:#FFFFFF}","div.gigya-screen-dialog-mobile div.gigya-composite-control-captcha-widget { padding:0; }","div.gigya-secret-question {display:none;}","div.gigya-photo-upload {height:63px;width: 300px; *display:inline; zoom:1; }","div.gigya-photo-upload-button {display:inline-block;*display:inline; zoom:1; margin: 0 8px 8px 0;font-weight:normal;\tborder: 1px solid #CECECE;cursor:pointer;padding: 0 12px;color: #333333;","font-weight:bold;border-radius:4px;line-height:28px;",'background: #F2F2F2; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFFFFF", endColorstr="#F2F2F2");',"background: -webkit-gradient(linear, left top, left bottom, from(#FFFFFF), to(#F2F2F2));","background: -moz-linear-gradient(top,  #FFFFFF,  #F2F2F2);}","div.gigya-photo-upload-button:hover {",'background: #FFFFFF; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#F2F2F2", endColorstr="#FFFFFF");',"background: -webkit-gradient(linear, left top, left bottom, from(#F2F2F2), to(#FFFFFF));","background: -moz-linear-gradient(top,  #F2F2F2,  #FFFFFF)}","}","div.gigya-photo-upload-text {font-size:11px;color:#666666}","div.gigya-photo-upload-image {border-radius: 6px;background-position:center center; background-repeat: no-repeat; width: 64px; height:64px; background-color:#F2F2F2;float:left;margin-right:8px;}","div.gigya-photo-upload-path {white-space:nowrap;width:107px;vertical-align:middle;text-overflow:ellipsis;overflow:hidden;padding-right:10px;background-position: right;background-repeat:no-repeat;display:inline-block;*display:inline; zoom:1; padding-right: 20px;}","h1.gigya-screen-caption {border-bottom: 1px solid #dbdbdb;font-size: 16px;font-weight: bold;color: #333;padding-bottom: 5px;margin-bottom: 45px;}","*.gigya-error-display {display:none}","*.gigya-error-display-active {display:block}"]};t.oFieldNameData={loginID:t.GigyaParam("loginID","username","loginID"),passwordRetype:t.GigyaParam("passwordRetype",null,!1)},t.warn=function(e,t){console&&console.warn&&console.warn("Gigya Screenset ("+e+") - "+t)},t.widget.prototype={_el:null,_elForm:null,_screenSet:null,_form:null,getWidgetParams:function(){for(var e={},t=this._el.childNodes,i=0;i<t.length;i++)if("param"==t[i].nodeName.toLowerCase()){var a=t[i];e[a.name]=a.value}return e},parse:function(){var e=this;if(this._el){var i=this._screenSet._apiData?this._screenSet._apiData:{},a=this._screenSet._elid,n=t.getFirstGigyaClass(this._el);if(n){var r=!0;switch(n){case"gigya-secret-question":r=!1;for(var s=this._el.getElementsByTagName("*"),o=0;o<s.length;o++)s[o].setAttribute("data-allow-empty","1");break;case"gigya-password-strength":if(window.gigya.localInfo.isMobile)return;if(!(C=this._elForm.elements.newPassword||this._elForm.elements.password))return;C[0]&&(C=C[0]);var l=this._el.style.display;this._el.style.display="none";var g=function(){var i,a={TEXT:function(t,i,a){return e._screenSet.getText(t,i,a)}},n=e._el.getAttribute("data-display-mode"),r=!1,s=!1,o=t.getPasswordStrengthData(C.value),g=e._screenSet._apiData.getPolicies?e._screenSet._apiData.getPolicies.passwordComplexity:null;switch(g||(g={}),n){case"policy":i=e._screenSet.templates.get("passwordStrength-minimumRequirements"),r=!0;break;case"meter":i=e._screenSet.templates.get("passwordStrength-strengthMeter"),s=!0;break;case"combined":default:i=e._screenSet.templates.get("passwordStrength-strengthMeter")+e._screenSet.templates.get("passwordStrength-minimumRequirements"),r=s=!0}if(s){var c=0,u="too_weak";t.isPasswordStrengthValid(C.value,o,g)&&(u="weak",o.length>4&&(c+=40),o.length>5&&(c+=21),o.length>7&&(c+=18),o.charGroups>1&&(c+=21),o.charGroups>2&&(c+=17),o.charGroups>3&&(c+=23),c>60&&(u="fair"),c>80&&(u="strong"),c>100&&(u="very_strong")),a.score=c,a.scoreText=e._screenSet.getText(u),a.barIndicatorClass="gigya-passwordStrength-bar-"+u}if(r){for(var p=[],h=["minLength","minCharGroups"],m=0;m<h.length;m++){var _=h[m];if(g[_]){var f="";switch(_){case"minLength":f="num_characters_total";break;case"minCharGroups":f="num_of_the_following_groups"}if(f){var y=e._screenSet.getText(f,"%num",g[_]);y&&p.push(y)}}}if(a.requirements="",p.length>0){var w=p.pop();a.requirements=e._screenSet.getText("password_must_contain_at_least")+" "+(p.length>0?p.join(", ")+" "+e._screenSet.getText("and")+" "+w:w)}}var v=window.gigya.utils.templates.fill(i,a);e._el.getAttribute("data-on-focus-bubble")?document.getElementById(d+"_content").innerHTML=v:(e._el.innerHTML=v,e._el.style.display=l)};if(window.gigya.utils.DOM.addEventListener(C,"keyup",g),e._el.getAttribute("data-on-focus-bubble")){var d=a+"_bubble";document.getElementById(d)||(window.gigya.utils.DOM.addEventListener(C,"focus",function(){e._el.style.display="";var t=e._el.offsetWidth||250;e._el.style.display="none",window.gigya.global.putGMBalloonNextTo(C,'<div id="'+d+'_content"></div>',null,t,null,!0,d,!0),document.getElementById(d+"_content").className=e._el.className,document.getElementById(d).className=e._el.className,g()}),window.gigya.utils.DOM.addEventListener(C,"blur",function(){window.gigya.global.removeGMBalloon()}))}break;case"gigya-captcha":var c,u,p=window.gigya.utils.object.merge([{theme:"white"},e.getWidgetParams()]);switch(p.theme){case"clean":c=600,u=108;break;case"blackglass":case"red":case"white":default:c=318,u=129}"custom"!=p.theme&&(this._el.style.width=c+"px",this._el.style.height=u+"px"),this._el.name="captchaText",this._el.setAttribute("data-gigya-name","captchaText"),window.gigya.utils.script.load("//www.google.com/recaptcha/api/js/recaptcha_ajax.js",null,function(){if("undefined"!=typeof Recaptcha){var t=e._screenSet.templates.get("captcha"),i=p.custom_theme_widget;i||(i=a+"_recaptcha"+(new Date).getTime(),e._el.innerHTML=window.gigya.utils.templates.fill(t,{recaptchaContainerID:i}),window.gigya.localInfo.isMobile&&(e._el.style.display="none")),delete Recaptcha.theme,Recaptcha.create("6LdXT9MSAAAAALFVL3NUYbCEiJfiSTgflJUdrflP",i,p)}},!0);break;case"gigya-photo-upload":var h=a+"_uploadIframe"+(new Date).getTime(),m=h+"_photo",_=e._screenSet.templates.get("photoUpload"),f=h+"_path",y="url('"+window.gigya._.getCdnResource("/gs/i/accounts/avatar_64.png")+"')",w=window.gigya.utils.templates.fill(_,{pathContainerID:f,photoElementID:m,choose_file:this._screenSet.getText("choose_file"),no_file_chosen:this._screenSet.getText("no_file_chosen"),tip:this._screenSet.getText("maximum_size_of_3mb.")+" JPG, GIF, PNG."});this._el.innerHTML=w+'<iframe id="'+h+'" name="'+h+'" style="display:none" onerror="this.setAttribute(\'uploading\',0)" onload="this.setAttribute(\'uploading\',0)"></iframe>';var v=window.gigya.utils.object.extractProperties(this._screenSet._p,{},"APIKey|cid|oauth_token|login_token|source|sourceData|regToken");v.authMode=v.oauth_token?"token":"cookie",window.gigya._.apiAdapters.web&&(v.login_token=window.gigya._.apiAdapters.web.tokenStore.get(v.APIKey)),v.APIKey||(v.APIKey=window.gigya.thisScript.APIKey);var S=function(){var t=document.getElementById(f);t&&(t.style.backgroundImage="");var i=window.gigya.utils.object.clone(v);i.type="thumbnail",i.context=(new Date).getTime();var a=new Image;a.src=window.gigya.utils.stringUtils.format("{0}://accounts.{1}/accounts.getProfilePhoto?{2}",i.login_token?"https":window.gigya.localInfo.protocol,e._screenSet._p.apiDomain,window.gigya.utils.keyValue.serialize(i)),a.onload=function(){var t=document.getElementById(m);t&&(t.style.backgroundImage="url('"+a.src+"')");for(var i=window.gigya.utils.DOM.getElementsByClass(e._screenSet._elContainer,"gigya-profile-photo"),n=0;n<i.length;n++){var r=i[n].childNodes;r&&r.length>0&&"IMG"==r[0].nodeName&&(r[0].src=a.src)}},a.onerror=function(){var e=document.getElementById(m);e&&(e.style.backgroundImage=y)}},b=document.getElementById(h);if(b){window.gigya.utils.DOM.addEventListener(b,"load",function(){S()}),window.gigya.utils.DOM.addEventListener(b,"error",function(){});var D=document.getElementById(m);D&&(D.style.backgroundImage=y)}S();var I=window.gigya.utils.stringUtils.format("https://accounts.{0}/accounts.uploadProfilePhoto?publish=true&{1}",this._screenSet._p.apiDomain,window.gigya.utils.keyValue.serialize(v)),F=t.attachFileUpload(this._el,h,I);if(F){var E=F.elements._profilePhoto;window.gigya.utils.DOM.addEventListener(E,"change",function(){document.getElementById(f).style.backgroundImage="url('"+window.gigya._.getCdnResource("/gs/i/accounts/smallLoader.gif")+"')"})}break;case"gigya-loginID-availability":var C;e=this;if(!(C=this._elForm.elements[this._el.getAttribute("data-bound-to")]||this._elForm.elements.username||this._elForm.elements.email))return;e._el.innerHTML="";l=this._el.style.display;this._el.style.display="none";var x=function(){C.value!=e._el.getAttribute("data-lastvalue")&&(e._el.setAttribute("data-lastvalue",C.value),C&&0!=C.value.split(" ").join("").length?(e._el.style.display=l,e._el.innerHTML=e._screenSet.getText("checking"),window.gigya.utils.DOM.addClassToElement(e._el,"gigya-loginID-availability-progress"),window.gigya.accounts.isAvailableLoginID({loginID:C.value,callback:function(t){window.gigya.utils.DOM.removeClassFromElement(e._el,"gigya-loginID-availability-progress"),window.gigya.utils.DOM.removeClassFromElement(e._el,"gigya-loginID-availability-not-available"),window.gigya.utils.DOM.removeClassFromElement(e._el,"gigya-loginID-availability-available"),C.removeAttribute("data-taken"),0!=t.errorCode?e._el.innerHTML="":t.isAvailable?(e._el.innerHTML=e._screenSet.getText("available"),window.gigya.utils.DOM.addClassToElement(e._el,"gigya-loginID-availability-available"),e._screenSet.onInputChange(C)):(e._el.innerHTML=e._screenSet.getText("not_available"),window.gigya.utils.DOM.addClassToElement(e._el,"gigya-loginID-availability-not-available"),C.setAttribute("data-taken","1"))}})):e._el.innerHTML="")};window.gigya.utils.DOM.addEventListener(C,"keyup",function(){e._el.updateTimeout&&window.clearTimeout(e._el.updateTimeout),e._el.updateTimeout=window.setTimeout(x,1e3)}),window.gigya.utils.DOM.addEventListener(C,"change",x);break;case"gigya-social-login":var A=this.getWidgetParams(),M=a+"_"+(new Date).getTime();this._el.innerHTML='<div id="'+M+'"></div>';var T=function(t){e._screenSet.onScreenResponse(t.response)};window.gigya.socialize.showLoginUI(this._screenSet._p,A,{containerID:M,accountsSocialLogin:!0,onLogin:T,onError:T,finalizeRegistration:!0,dontHandleScreenSet:!0,include:"profile,data,emails",regSource:this._screenSet._p.regSource||location.href.split("?")[0].split("#")[0]});break;case"gigya-profile-photo":_=e._screenSet.templates.get("userPhoto");var k=i.getAccountInfo&&i.getAccountInfo.profile&&i.getAccountInfo.profile.thumbnailURL?i.getAccountInfo.profile.thumbnailURL:"";this._el.innerHTML=k?'<img src="'+k+'" />':"";break;case"gigya-required-display":this._el.style.display="none";var N=this._el.getAttribute("data-bound-to");this._screenSet.isRequiredField(N)&&(this._el.style.display="");break;case"gigya-tfa":e=this,A=this.getWidgetParams();var R=a+"_"+(new Date).getTime();this._el.innerHTML='<div id="'+R+'"></div>',this._screenSet.dimScreen(),window.gigya.accounts.showTfaUI(this._screenSet._p,A,{dontHandleScreenSet:!1,regToken:this._screenSet._lastSubmittedFormResponse?this._screenSet._lastSubmittedFormResponse.regToken:null,containerID:R,cssPrefix:"#"+a,onDone:function(t){e._screenSet.dimScreen(),e._screenSet.onScreenResponse(t.response,e)},onLoad:function(){e._screenSet.undimScreen()}});break;case"gigya-container":r=!1;var O=t.containerConditions.testContainer(this,t.containerConditions.sets.rendering);if(this.condStatus=O,this.originalCondStatus=O,O){O=t.containerConditions.testContainer(this,t.containerConditions.sets.validation),this.condStatus=this.originalCondStatus&&O,O&&window.gigya.utils.DOM.addClassToElement(this._el,"gigya-container-enabled");var L=this._screenSet._elContainer.getElementsByTagName("*");for(o=0;o<L.length;o++){var P=L[o].nodeName.toLowerCase();"select"!=P&&"input"!=P&&"textarea"!=P||window.gigya.utils.DOM.addEventListener(L[o],"change",function(i){var a=t.containerConditions.testContainer(e,t.containerConditions.sets.validation);e.condStatus=e.originalCondStatus&&a,e.condStatus?window.gigya.utils.DOM.addClassToElement(e._el,"gigya-container-enabled"):window.gigya.utils.DOM.removeClassFromElement(e._el,"gigya-container-enabled")})}}break;default:r=!1}r&&window.gigya.utils.DOM.addClassToElement(this._el,"gigya-reset")}}}},t.form.prototype={_gigyaClassName:null,_ID:null,_screenSet:null,_elForm:null,_actions:null,init:function(){this.parse()},getFlatFormData:function(e){for(var i={},a=this._elForm.elements,n=0;n<a.length;n++){var r=a[n],s=r.getAttribute("data-gigya-name"),o=r.nodeName.toLowerCase();if("input"==o&&"submit"!=r.type||"select"==o||"textarea"==o){if(null==s)continue;if(e&&t.isFieldInHiddenContainer(r))continue;var l=r.value;if("checkbox"==r.type&&(l=r.checked),null==l)continue;if("radio"==r.type&&!r.checked)continue;i[s]=l}}var g=window.gigya.utils.DOM.getElementsByClass(this._elForm,"gigya-captcha")[0];if(g&&"object"==typeof Recaptcha){g.style.display="";var d=Recaptcha.get_response(),c=Recaptcha.get_challenge();d&&c&&(i.captchaText=d,i.captchaToken=c)}return i},getParamsForFormData:function(e){this._elForm.elements;var i={};for(var a in e){var n=e[a];""==String(n)&&(n=null);var r=t.oFieldNameData[a],s=a;if(r&&(s=r.paramName),s){var o=a.split(".")[0];this._actions.specialFields&&this._actions.specialFields[s]?i[s]=n:this._actions.dataObjectName&&o==this._actions.dataObjectName?window.gigya.utils.object.setPropertyBySerializedName(i,a,n):this._actions.profileObjectName&&(o!=this._actions.profileObjectName&&(a=this._actions.profileObjectName+"."+a),window.gigya.utils.object.setPropertyBySerializedName(i,a,n))}}return i},prepopulate:function(e){if(e)for(var t=this._elForm.elements,i=0;i<t.length;i++){var a=t[i],n=a.getAttribute("data-gigya-name")||a.name,r=window.gigya.utils.object.getPropertyBySerializedName(e,n);n&&r&&("checkbox"==a.type?a.checked=1==r:"radio"==a.type?a.checked=r==a.value:a.value=r)}},checkAutoSkip:function(){if("true"==this._elForm.getAttribute("data-auto-skip")&&this.validate()){for(var e=!0,i=0;i<this._screenSet._containerInstances.length;i++){var a=this._screenSet._containerInstances[i],n=a._el.getAttribute("data-empty-fields");a._elForm==this._elForm&&n&&(e=!t.containerConditions.sets.rendering["data-empty-fields"](n,a))}e&&this.onAfterSubmit({errorCode:0,autoSkip:!0})}},submit:function(){if(this.validate()){var e=this.getFlatFormData(!0),t=window.gigya.utils.object.clone(e);if(t.password&&delete t.password,0==window.gigya.events.dispatchForWidget({eventName:"beforeSubmit",screen:this._screenSet._currentScreenID,form:this._ID,profile:this._screenSet._apiData.getAccountInfo?this._screenSet._apiData.getAccountInfo.profile:{},data:this._screenSet._apiData.getAccountInfo?this._screenSet._apiData.getAccountInfo.data:{},formData:t},this._screenSet._p))return;var i=this.getParamsForFormData(e);if("gigya-register-form"==this._gigyaClassName){var a=this._elForm.getAttribute("data-on-success-screen");this._screenSet.doesScreenHaveForms(a)?this._screenSet._finalizeRegistrationNeeded=!0:i.finalizeRegistration=!0}var n=this;if(!n._actions.submit)return;this._screenSet._p.regSource||(this._screenSet._p.regSource=document.location.href.split("?")[0].split("#")[0]);var r=window.gigya.utils.DOM.getElementsByAttribute(this._elForm,"*","name","remember");r&&r.length>0&&(this._screenSet._extraEventData.rememberMe=r[0].checked);var s=this._screenSet._extraEventData.rememberMe,o=function(){n._actions.submit(n._screenSet._p,i,{dontHandleScreenSet:!0,callback:function(e){return n.onAfterSubmit(e)},remember:s,sessionExpiration:s&&n._screenSet._p.rememberSessionExpiration?n._screenSet._p.rememberSessionExpiration:n._screenSet._p.sessionExpiration},n._actions.defaultSubmitParams)};this._screenSet.dimScreen();var l=window.gigya.utils.DOM.getElementsByClass(this._elForm,"gigya-photo-upload");if(l.length>0){var g=l[0].getElementsByTagName("iframe")[0];if("1"==g.getAttribute("uploading"))return void window.gigya.utils.DOM.addEventListener(g,"load",o)}o()}},validate:function(){var e=!0,t=[],i=window.gigya.utils.array.clone(this._elForm.elements),a=window.gigya.utils.DOM.getElementsByClass(this._elForm,"gigya-captcha");a.length>0&&i.push(a[0]);for(var n=0;n<i.length;n++){var r=i[n],s=this._screenSet.getValidationError(r,!1),o=this._screenSet.getValidationError(r,!0);s&&(e=!1,t.push({field:r,errorCode:s}),this._screenSet.showFieldError(r,o,!0))}return this.showErrors(t,!1),e},hasFlag:function(e,t){if(e&&t){for(var i=t.split(","),a=0;a<i.length;a++)if(-1!=window.gigya.utils.array.indexOf(e,i[a]))return!0;return!1}},showErrors:function(e,i){for(var a=window.gigya.utils.DOM.getElementsByAttribute(this._screenSet._elContainer,"*","data-bound-to",this._ID),n=!1,r=0;r<a.length;r++){var s=a[r],o=s.getAttribute("data-scope")||"bound-object-error";if(o=o.toLowerCase(),i||"first-error"==o||"any-error"==o||"all-errors"==o){for(var l,g=!1,d=[],c=0;c<e.length;c++){var u=[],p=[];if(s.getAttribute("data-error-codes")&&(u=s.getAttribute("data-error-codes").split(",")),s.getAttribute("data-error-flags")&&(p=s.getAttribute("data-error-flags").split(",")),0===u.length&&0===p.length||-1!=window.gigya.utils.array.indexOf(u,e[c].errorCode)||this.hasFlag(p,e[c].errorFlags)){g=!0;var h=e[c].errorMessage;h||(h=this._screenSet.getErrorMessage(e[c].errorCode,!1,e[c].field)),h&&d.push(h)}}if(g){if(window.gigya.utils.DOM.isElementClass(s,"gigya-error-display")&&(n=!0,window.gigya.utils.DOM.addClassToElement(a[r],"gigya-error-display-active")),window.gigya.utils.DOM.isElementClass(s,"gigya-error-msg"))n=!0,l="first-error"==o||i?d[0]:"<ul><li>"+d.join("</li><li>")+"</li></ul",a[r].innerHTML=l}else window.gigya.utils.DOM.isElementClass(s,"gigya-error-display")&&window.gigya.utils.DOM.removeClassFromElement(a[r],"gigya-error-display-active"),window.gigya.utils.DOM.isElementClass(s,"gigya-error-msg")&&(a[r].innerHTML="")}}!n&&i&&e.length>0&&t.warn(this._screenSet._ID,'Missing error-msg or error-display for "'+this._ID+'" form error')},onAfterSubmit:function(e){this._screenSet.undimScreen(),this._screenSet.onScreenResponse(e,this)},parse:function(){var e=this;if(window.gigya.utils.DOM.addEventListener(this._elForm,"submit",function(t){e.submit(),t.preventDefault?t.preventDefault():window.event&&(window.event.returnValue=!1)}),this._actions.prepopulateFrom)for(var t=0;t<this._actions.prepopulateFrom.length;t++)this.prepopulate(window.gigya.utils.object.getPropertyBySerializedName(this._screenSet._apiData,this._actions.prepopulateFrom[t]));"gigya-resend-verification-form"==this._gigyaClassName&&this._screenSet._apiData.getAccountInfo&&this._screenSet._apiData.getAccountInfo.emails&&this.prepopulate({email:this._screenSet._apiData.getAccountInfo.emails.unverified[this._screenSet._apiData.getAccountInfo.emails.unverified.length-1]}),"gigya-link-accounts-form"==this._gigyaClassName&&this._screenSet._lastSubmittedFormResponse&&this._screenSet._lastSubmittedFormResponse.loginID&&this.prepopulate({loginID:this._screenSet._lastSubmittedFormResponse.loginID}),this.showErrors([],!0),this.showErrors([],!1)},getInstanceRefString:function(){return"gigya.accounts.plugins.screenSet.instances['"+encodeURIComponent(this._screenSet._p.screenSet+"_"+this._screenSet._p.containerID)+"']._formsInstances['"+encodeURIComponent(this._ID)+"']"}},t.screenSet.prototype={_ID:null,_elScreenSet:null,_elContainer:null,_p:null,_currentScreenID:null,_apiData:null,_oNeededData:null,_nextScreenElement:null,_lastSubmittedFormResponse:null,_finalizeRegistrationNeeded:!1,_isDialog:!1,_elCaption:null,_formsInstances:null,_lastSubmittedFormID:null,_extraEventData:null,_originalElements:null,_isRemote:!1,_random:null,_containerHistory:null,_startScreen:null,_containerInstances:null,_backHandler:null,init:function(){this.templates=t.createDefaultTemplates(),!this._p.cssPrefix&&t.addedCSS||e._injectCSS(this._p),this._formsInstances={},this._extraEventData={},this._containerInstances=[],t._originalElements[this._p.screenSet]||(t._originalElements[this._p.screenSet]={}),this._originalElements=t._originalElements[this._p.screenSet],this._apiData={};var i=window.gigya.localInfo.isMobile&&this._p.mobileScreenSet?this._p.mobileScreenSet:this._p.screenSet;if(this._elScreenSet=document.getElementById(i),this._isDialog=this._p.isPopup,this._random=Math.random(),this._ID=i,window.gigya.events.dispatchForWidget({eventName:"load"},this._p),this._elScreenSet)this.start();else{var a=this,n=document.getElementById("__gigyaScreenSet_"+i),r=n?window.gigya.utils.DOM.getElementsByClass(n,"gigya-screen-set"):[];a._isRemote=!0,n&&r.length>0?(this._elScreenSet=r[0],a.start()):((n=document.createElement("div")).id="__gigyaScreenSet_"+i,n.style.display="none",window.gigya.utils.DOM.appendToBody(n),window.gigya.accounts.getScreenSets(this._p,{include:"html,css",screenSetIDs:i,callback:function(e){if(0==e.errorCode&&e.screenSets&&e.screenSets.length>0&&e.screenSets[0].html){var t=e.screenSets[0];n.innerHTML=t.html,t.css&&window.gigya.global.addCSS(t.css),a._elScreenSet=n.getElementsByTagName("div")[0],a.start()}else window.gigya.events.dispatchErrorFromResponse(a._p,e)}}))}},start:function(){var e=this;if(window.gigya.socialize.addEventHandlers({listenerType:"component"},{onLogin:function(){e._finalizeRegistrationNeeded=!1}}),this._elContainer=this.getContainer(),this._elContainer){if(this._startScreen=this._p.startScreen||this._elScreenSet.getAttribute("data-start-screen"),!this._startScreen){var t=this._elScreenSet.getElementsByTagName("div");t.length>0&&(this._startScreen=t[0].getAttribute("data-original-id")||t[0].id)}this.prepareElements(),window.gigya.localInfo.isMobile&&window.scrollTo(0,0),this._p.initialResponse?this.onScreenResponse(this._p.initialResponse):this.switchScreen(this._startScreen)}},hide:function(e,t,i){this.undimScreen();var a=document.getElementById(this._p.containerID);a&&(this._p.isPopup?a.parentNode.removeChild(a):i&&(a.innerHTML=""));var n=document.getElementById("gigya_ifr_"+this._p.containerID);null!=n&&n.parentNode.removeChild(n);var r={eventName:"hide",reason:e};t&&t.user&&(r.user=t.user),window.gigya.events.dispatchForWidget(r,this._p)},getContainer:function(){var e=this,t=this._p.containerID,i=document.getElementById(t);if(i){var a;if(this._isDialog)if(window.gigya.localInfo.isMobile){e=this;window.gigya.utils.DOM.addDialogBackListener(function(){e.hide("canceled")}),a="screenSet",i.className="gigya-screen-dialog-mobile",document.body.scrollHeight>window.gigya.utils.viewport.getInnerSize().h&&(i.style.minHeight=document.body.scrollHeight+"px")}else a="screenSet-dialog",i.className="gigya-screen-dialog";else a="screenSet";var n=t+"_content";i.innerHTML=window.gigya.utils.templates.fill(this.templates.get(a),{innerContainerID:n}),this._elCaption=document.getElementById(n+"_caption");var r=document.getElementById(n+"_close");return r&&window.gigya.utils.DOM.addEventListener(r,"click",function(){e.hide("canceled")}),document.getElementById(n)}},prepareElements:function(){for(var e=this._elScreenSet.getElementsByTagName("*"),t=0;t<e.length;t++){var i=e[t];if(i.getAttribute("data-original-id")||i.getAttribute("dummy")||!i.id&&"input"!=i.nodeName.toLowerCase()||(i.setAttribute("data-original-id",i.id),"text"!=i.type&&"password"!=i.type||i.setAttribute("data-original-value",i.value),i.id="__gig_input_"+(i.id?i.id:(new Date).getTime()+"_"+t),i.setAttribute("data-screenset-element-id",i.id)),"form"==i.nodeName.toLowerCase()&&i.getAttribute("data-on-success-screen")){var a=i.getAttribute("data-on-success-screen"),n=this.chooseNextScreen(a);i.setAttribute("data-original-success-screen",a),i.setAttribute("data-on-success-screen",n)}}},getExtraProfileFields:function(e,i){for(var a=e.elements,n=[],r={},s=0;s<a.length;s++){var o=a[s];if(o.name&&0!=o.name.indexOf("data.")){var l=o.name.replace("profile.","").split(".")[0];r[l]||t.oFormsActions["gigya-profile-form"].specialFields[l]||(r[l]=1,i&&this._apiData.getAccountInfo&&this._apiData.getAccountInfo.profile&&this._apiData.getAccountInfo.profile[l]||n.push(l))}}return n.join(",")},isRequiredField:function(e){var i=!1,a=e.split(".")[0],n="data"==a?"dataSchema":"profileSchema";"data"!=a&&"profile"!=a||(e=e.replace(a+".",""));i=!1;if(t.alwaysRequiredFields[e]||"email"==e)i=!0;else if(this._apiData.getSchema&&this._apiData.getSchema[n]&&this._apiData.getSchema[n].fields){var r=this._apiData.getSchema[n].fields[e];r&&r.required&&(i=!0)}return i},getText:function(e,t,i){return window.gigya.pluginUtils.lang.getLocalizedText("gigya.services.accounts.plugins.screenSet.js",e,this._p.lang,t,i)},getScreenElement:function(e){return e?window.gigya.utils.DOM.getElementsByAttribute(this._elScreenSet,"*","data-original-id",e)[0]:null},getElementForm:function(e){for(;null!=e;){if("form"==e.nodeName.toLowerCase())return e;e=e.parentNode}},updateAccountInfo:function(e){var t=this;window.gigya.accounts.getAccountInfo(this._p,{include:"profile,data",callback:function(i){t.onAccountInfo(i),e(i)}})},onAccountInfo:function(e){var t=e;e.accountInfo&&(t=e.accountInfo),this._apiData.getAccountInfo||(this._apiData.getAccountInfo={}),t.profile&&(this._apiData.getAccountInfo.profile=t.profile),t.data&&(this._apiData.getAccountInfo.data=t.data),t.emails&&(this._apiData.getAccountInfo.emails=t.emails),t.loginIDs&&(this._apiData.getAccountInfo.loginIDs=t.loginIDs)},onApiData:function(e,t){this._apiData[e.operation.replace("/accounts.","")]=e,e.regToken&&(this._p.regToken=e.regToken);var i=!0;for(var a in this._oNeededData)if(!this._apiData[a]){i=!1;break}i&&this.onScreenData()},chooseNextScreen:function(e){if(e){var t=e.split(",");if(1===t.length)return t[0].split(":")[0];if(t.length>1){for(var i=0,a=0;a<t.length;a++){var n=1;(s=t[a].split(":")).length>1&&(n=parseInt(s[1])),i+=n}var r=this._random*i;i=0;for(a=0;a<t.length;a++){var s;n=1;if((s=t[a].split(":")).length>1&&(n=parseInt(s[1])),(i+=n)>=r)return s[0]}}}},doesScreenHaveForms:function(e){var t=this.getScreenElement(e);if(t){var i=t.getElementsByTagName("form"),a=window.gigya.utils.DOM.getElementsByClass(t,"gigya-tfa").length>0;if(i.length>0||a)return!0}return!1},switchScreen:function(e,i,a){var n=this;if("_finish"==e)return this.endFlow(),!0;var r=this.getScreenElement(e);if(!r)return t.warn(this._ID,'Missing screen "'+e+'"'),this._currentScreenID||this.hide(),!1;if(this._finalizeRegistrationNeeded&&!this.doesScreenHaveForms(e))return this.endFlow(i,a,!0),!0;this._nextScreenElement=r,this._currentScreenID||this.setNextScreenSize();for(var s=!1,o=r.getElementsByTagName("form"),l="",g=0;g<o.length;g++)l+=l?",":""+this.getExtraProfileFields(o[g],!0);for(g=0;g<o.length;g++){var d=t.getFirstGigyaClass(o[g]),c=window.gigya.utils.object.clone(t.oFormsActions[d]),u=t.containerConditions.getHistoryNeededContainers(o[g]);if(u&&u.length>0&&(c||(c={}),c.neededData||(c.neededData={}),c.neededData.getUserSettings={params:{group:"gigya_container_history-"+this._ID,regToken:i?i.regToken:null,disableLocalSettings:!0},cache:!1}),c&&c.neededData)for(var p in this._oNeededData=c.neededData,this._oNeededData){var h=this._oNeededData[p].params;if(window.gigya.utils.validation.isExplicitFalse(this._oNeededData[p].cache)&&delete this._apiData[p],!this._apiData||!this._apiData[p]||"getAccountInfo"==p&&""!=l){this._apiData&&this._apiData[p]&&delete this._apiData[p],this.dimScreen(),s=!0;var m={callback:function(e,t){return n.onApiData(e,t)}};"getAccountInfo"==p&&l&&(m.extraProfileFields=l);var _=window.gigya.accounts[p];_||(_=window.gigya.socialize[p]),_(this._p,h,m)}}}return s||this.onScreenData(),!0},onScreenData:function(){var e=this._nextScreenElement.getAttribute("data-original-id"),t=window.gigya.events.dispatchForWidget({eventName:"beforeScreenLoad",currentScreen:this._currentScreenID,form:this._lastSubmittedFormID,response:window.gigya.utils.object.clone(this._lastSubmittedFormResponse),profile:this._apiData.getAccountInfo?this._apiData.getAccountInfo.profile:{},data:this._apiData.getAccountInfo?this._apiData.getAccountInfo.data:{},nextScreen:e},this._p);if(this.undimScreen(),0!=t){if(this._elCaption){var i=this._nextScreenElement.getAttribute("data-caption");i||(i=this._elScreenSet.getAttribute("data-caption")),i?this._elCaption.style.display="":(i="&nbsp;",this._isDialog||(this._elCaption.style.display="none")),this._elCaption.innerHTML=i}this.setNextScreenSize(),this._elContainer.innerHTML="",this._containerInstances=[],this._formsInstances={};var a=document.createElement("div");a.className=this._nextScreenElement.className,this._nextScreenElement.getAttribute("style")&&a.setAttribute("style",this._nextScreenElement.getAttribute("style")),a.id=this._nextScreenElement.getAttribute("data-original-id")||this._nextScreenElement.id,a.innerHTML=this._nextScreenElement.innerHTML,this._elContainer.appendChild(a);var n=this._nextScreenElement.getAttribute("data-on-existing-login-identifier-screen")||"",r=this._nextScreenElement.getAttribute("data-on-pending-registration-screen")||"",s=this._nextScreenElement.getAttribute("data-on-pending-verification-screen")||"",o=this._nextScreenElement.getAttribute("data-on-missing-loginid-screen")||"",l=this._nextScreenElement.getAttribute("data-on-pending-password-change")||"";this._elContainer.setAttribute("data-on-existing-login-identifier-screen",n),this._elContainer.setAttribute("data-on-pending-registration-screen",r),this._elContainer.setAttribute("data-on-pending-verification-screen",s),this._elContainer.setAttribute("data-on-missing-loginid-screen",o),this._elContainer.setAttribute("data-on-pending-password-change",l),this.parseElements(),this.checkAutoSkip(),this._currentScreenID=e,this._elContainer.style.display="",window.gigya.events.dispatchForWidget({eventName:"afterScreenLoad",currentScreen:this._currentScreenID,form:this._lastSubmittedFormID,response:window.gigya.utils.object.clone(this._lastSubmittedFormResponse),profile:this._apiData.getAccountInfo?this._apiData.getAccountInfo.profile:{},data:this._apiData.getAccountInfo?this._apiData.getAccountInfo.data:{}},this._p)}},checkAutoSkip:function(){for(var e in this._formsInstances)this._formsInstances[e].checkAutoSkip()},setNextScreenSize:function(){this._elContainer.style.display="";var e=this._nextScreenElement.getAttribute("data-width")||this._elScreenSet.getAttribute("data-width")||this._p.width,t=this._nextScreenElement.getAttribute("data-height")||this._elScreenSet.getAttribute("data-height")||this._p.height;if(!e||!t){var i=document.createElement("div");i.className=this._nextScreenElement.className+" gigya-calculate-size",i.setAttribute("style",this._nextScreenElement.getAttribute("style")),i.innerHTML=this._nextScreenElement.innerHTML,i.id=this._nextScreenElement.getAttribute("data-original-id")||this._nextScreenElement.id,i.style.position="absolute",i.style.zoom="1",i.style.left="10px",i.style.top="-1000px",window.gigya.utils.DOM.setSize(i,e,t),window.gigya.localInfo.isIE&&window.gigya.localInfo.quirksMode&&window.gigya.utils.DOM.addClassToElement(i,"gigya-screen-dialog-content"),window.gigya.utils.DOM.appendToBody(i);var a=window.gigya.global.getBordersAndPaddings(i);e||(e=i.offsetWidth+Math.ceil(a.w)+30),t||(t=i.offsetHeight+1),i.parentNode.removeChild(i)}if(e&&(this._isDialog||null==this._elScreenSet.getAttribute("data-responsive")?window.gigya.utils.DOM.setSize(this._elContainer,e):(this._elContainer.style.maxWidth=""+((""+e).indexOf("%")>0?e:e+"px"),this._elContainer.style._width=this._elContainer.style.maxWidth)),this._isDialog&&!window.gigya.localInfo.isMobile){t&&(this._elContainer.style._height=t+"px",this._elContainer.style.minHeight=t+"px"),window.gigya.utils.DOM.addClassToElement(this._elContainer,"gigya-screen-dialog-content");var n=document.getElementById(this._p.containerID);(window.gigya.localInfo.isIE7||window.gigya.localInfo.isIE8||window.gigya.localInfo.isIE&&window.gigya.localInfo.quirksMode)&&(window.gigya.utils.DOM.getElementsByClass(n,"gigya-screen-dialog-top")[0].style.width=this._elContainer.offsetWidth+"px");var r=window.gigya.utils.viewport.getMiddleCenter(),s=n.offsetWidth;this._elContainer.style.height=t+"px";var o=o=n.offsetHeight;this._elContainer.style.height="auto";var l=r.top-Math.floor(o/2),g=r.left-Math.round(s/2);l<10&&(l=10),g<10&&(g=10),n.style.top=l+"px",n.style.left=g+"px"}},parseElements:function(){for(var e=this._elContainer.getElementsByTagName("*"),t=0;t<e.length;t++){var i=e[t],a=i.getAttribute("data-original-id");switch(null!=a&&(i.id=a),i.nodeName.toLowerCase()){case"select":case"input":case"textarea":this.parseInput(i);default:this.parseSwitchScreen(i)}}var n=this._elContainer.getElementsByTagName("form");for(t=0;t<n.length;t++)this.parseForm(n[t]);for(t=0;t<e.length;t++)this.parseWidget(e[t])},parseForm:function(e){new t.form(this,e).init()},parseWidget:function(e){new t.widget(this,e).parse()},parseSwitchScreen:function(e){var t=this,i=e.getAttribute("data-switch-screen");null!=i&&("a"==e.nodeName.toLowerCase()&&e.setAttribute("href","javascript:void(0)"),window.gigya.utils.DOM.addEventListener(e,"click",function(e){t.switchScreen(i),e.preventDefault?e.preventDefault():window.event&&(window.event.returnValue=!1)}))},parseInput:function(e){if(e){var i=this,a=e.getAttribute("dummy"),n=e.getAttribute("data-screenset-element-id");if(!this._isRemote&&(a||"input"==e.nodeName.toLowerCase()))if(this._originalElements[n]||this.getOriginalElement(e)){var r=e.getAttribute("data-original-id");null!=r&&(e.id=r)}a||e.setAttribute("data-gigya-name",e.name);var s=t.oFieldNameData[e.getAttribute("data-gigya-name")];s&&e.setAttribute("name",s.autoFillName),window.gigya.utils.DOM.addEventListener(e,"change",function(){i.onInputChange(e)}),this.onInputChange(e,!0)}},getOriginalElement:function(e){return document.getElementById(e.getAttribute("data-screenset-element-id"))},onInputChange:function(e,t){var i=this.getElementForm(e);if(i){var a;e.value;if("checkbox"==e.type&&e.checked,1!=t&&(a=this.getValidationError(e,!0),window.gigya.events.dispatchForWidget({eventName:"fieldChanged",screen:this._currentScreenID,form:i.getAttribute("data-gigya-id"),field:e.getAttribute("data-gigya-name"),isValid:!a,errMsg:a,value:e.value},this._p)),"password"==e.getAttribute("data-gigya-name")||"newPassword"==e.getAttribute("data-gigya-name"))for(var n=window.gigya.utils.DOM.getElementsByAttribute(i,"*","name","passwordRetype"),r=0;r<n.length;r++)n[r].value="";this.showFieldError(e,a,!0)}},showFieldError:function(e,t,i){var a=this.getElementForm(e),n=this.getErrorMessage(t,i,e),r=!0;if(i)for(var s=window.gigya.utils.DOM.getElementsByAttribute(a,"*","data-bound-to",e.getAttribute("data-gigya-name")),o=0;o<s.length;o++){var l=s[o],g=[];l.getAttribute("data-error-codes")&&(r=0===(g=l.getAttribute("data-error-codes").split(",")).length||-1!==window.gigya.utils.array.indexOf(g,t)),n&&r?(window.gigya.utils.DOM.isElementClass(l,"gigya-error-display")&&window.gigya.utils.DOM.addClassToElement(l,"gigya-error-display-active"),window.gigya.utils.DOM.isElementClass(l,"gigya-error-msg")&&(l.innerHTML=n)):n||(window.gigya.utils.DOM.isElementClass(l,"gigya-error-display")&&window.gigya.utils.DOM.removeClassFromElement(l,"gigya-error-display-active"),window.gigya.utils.DOM.isElementClass(l,"gigya-error-msg")&&(l.innerHTML=""))}n&&r?(window.gigya.utils.DOM.addClassToElement(e,"gigya-error"),"data.terms"==e.name&&(e.parentNode.style.border="1px solid #DD4B39")):n||(window.gigya.utils.DOM.removeClassFromElement(e,"gigya-error"),"data.terms"==e.name&&(e.parentNode.style.border=""))},getValidationError:function(e,i){if(!t.isFieldInHiddenContainer(e)){if(e.getAttribute("data-required")&&!e.value)return t.errorCodes.MISSING_REQUIRED;if(e.name){var a,n=this.getElementForm(e),r=e.value,s=null==r||""==r.split(" ").join("");if("email"!=e.name||s||window.gigya.pluginUtils.validation.isEmailValid(e.value)||(a=t.errorCodes.VALIDATION_ERROR),"passwordRetype"==e.name){var o=window.gigya.utils.DOM.getElementsByAttribute(n,"*","name","newPassword");0==o.length&&(o=window.gigya.utils.DOM.getElementsByAttribute(n,"*","name","password")),o.length>0&&""!=o[0].value&&o[0].value!=r&&(a=t.errorCodes.VALIDATION_ERROR)}if("1"==e.getAttribute("data-taken")&&(a=t.errorCodes.UNIQUE_IDENTIFIER_EXISTS),window.gigya.utils.DOM.isElementClass(n,"gigya-register-form")||window.gigya.utils.DOM.isElementClass(n,"gigya-profile-form")||window.gigya.utils.DOM.isElementClass(n,"gigya-auth-info-form")){var l=e.name,g=l.split(".")[0],c="data"==g?"dataSchema":"profileSchema";if("data"!=g&&"profile"!=g||(l=l.replace(g+".","")),this._apiData.getSchema&&this._apiData.getSchema[c]&&this._apiData.getSchema[c].fields){var u=this._apiData.getSchema[c].fields[l];if(u){if("terms"==l&&u.required&&0==e.checked&&(a=t.errorCodes.MISSING_REQUIRED),u.required&&""==r.split(" ").join("")&&(a=t.errorCodes.MISSING_REQUIRED),u.type&&!s)switch(u.type){case"integer":case"long":isNaN(parseInt(r))&&(a=t.errorCodes.VALIDATION_ERROR);break;case"float":isNaN(parseFloat(r))&&(a=t.errorCodes.VALIDATION_ERROR);break;case"boolean":null==e.checked&&(a=t.errorCodes.VALIDATION_ERROR);break;case"date":isNaN(d.getTime())&&(a=t.errorCodes.VALIDATION_ERROR)}if(u.format){var p=u.format.match(/(.*?)\(\'(.*?)\'\)$/);if(p){var h=p[1],m=p[2];if(h&&m)if("regex"==h)new RegExp(m).test(r)||i&&(a=t.errorCodes.VALIDATION_ERROR)}}}}if(this._apiData.getPolicies&&this._apiData.getPolicies.passwordComplexity&&"password"==e.name){var _=this._apiData.getPolicies.passwordComplexity;_||(_={});var f=t.getPasswordStrengthData(r);t.isPasswordStrengthValid(e.value,f,_)||(a=t.errorCodes.VALIDATION_ERROR)}}return s&&!e.getAttribute("data-allow-empty")&&t.alwaysRequiredFields[e.name]&&(a=t.errorCodes.MISSING_REQUIRED),window.gigya.utils.DOM.isElementClass(e,"gigya-captcha")&&!t.isHidden(e)&&"object"==typeof Recaptcha&&""==Recaptcha.get_response().split(" ").join("")&&(a=t.errorCodes.MISSING_REQUIRED),a}}},getErrorMessage:function(e,i,a){if(!e||0==e)return"";var n=a.getAttribute("data-gigya-name"),r=a.getAttribute("data-display-name");if(!r)switch(a.name){case"loginID":r="username";break;case"secretQuestion":r="secret question";break;case"secretAnswer":r="secret answer"}if(r||(r=a.name.split(".").pop()),window.gigya.utils.DOM.isElementClass(a,"gigya-captcha"))return e!=t.errorCodes.MISSING_REQUIRED&&"object"==typeof Recaptcha&&Recaptcha.reload(),this.getText("the_characters_you_entered_didn't_match_the_word_verification._please_try_again");switch(e){case t.errorCodes.MISSING_REQUIRED:return i?this.getText("this_field_is_required"):this.getText("please_enter_fieldname","%fieldname",r);case t.errorCodes.UNIQUE_IDENTIFIER_EXISTS:if("username"==n)return this.getText("username_already_exists");if("email"==n)return this.getText("email_already_exists");break;case t.errorCodes.VALIDATION_ERROR:default:return"password"==n?this.getText("password_does_not_meet_complexity_requirements"):"passwordRetype"==n?this.getText("passwords_do_not_match"):this.getText("invalid_fieldname","%fieldname",r)}},dimScreen:function(){t.dimContainer(this._elContainer)},undimScreen:function(){t.undimContainer(this._elContainer)},onScreenResponse:function(e,i,a){var n=this;i||(i={}),this._lastSubmittedFormID=i._ID,this._lastSubmittedFormResponse=e;var r=i._elForm?i._elForm.getAttribute("data-on-success-screen"):null;if(e.autoSkip&&i._elForm&&i._elForm.getAttribute("data-on-auto-skip-screen")&&(r=i._elForm.getAttribute("data-on-auto-skip-screen")),e.regToken&&(this._p.regToken=e.regToken),this.onAccountInfo(e),a||this._lastSubmittedFormID&&(r||!this.endFlowIsPending())){var s=function(e){window.gigya.events.dispatchForWidget({eventName:"afterSubmit",screen:n._currentScreenID,form:n._lastSubmittedFormID,profile:n._apiData.getAccountInfo&&n._apiData.getAccountInfo.profile?n._apiData.getAccountInfo.profile:{},data:n._apiData.getAccountInfo&&n._apiData.getAccountInfo.data?n._apiData.getAccountInfo.data:{},response:window.gigya.utils.object.clone(n._lastSubmittedFormResponse)},n._p)};"/accounts.setAccountInfo"!=e.operation||e.profile&&e.data?s():this.updateAccountInfo(s)}if(0==e.errorCode)"/accounts.register"==e.operation&&this._apiData.initRegistration&&delete this._apiData.initRegistration,r&&r!=this._currentScreenID?this.switchScreen(r,e,i):r||(n._p.remember=n._extraEventData.rememberMe,this.endFlow(e,i));else{if(this.handleErrorAttribute(e,i))return;if(e.secretQuestion)for(var o=window.gigya.utils.DOM.getElementsByClass(this._elContainer,"gigya-secret-question"),l=0;l<o.length;l++){for(var g=o[l],d=window.gigya.utils.DOM.getElementsByAttribute(g,"*","name","secretQuestion"),c=0;c<d.length;c++)d[c].innerHTML=e.secretQuestion;d=window.gigya.utils.DOM.getElementsByAttribute(g,"*","name","secretAnswer");for(c=0;c<d.length;c++)d[c].removeAttribute("data-allow-empty");g.style.display="inline"}else{switch(e.errorCode){case 403041:e.errorMessage=this.getText("account_is_disabled");break;case 403044:e.errorMessage=this.getText("sorry_we_are_not_able_to_process_your_registration");break;case 403042:e.errorMessage=this.getText("invalid_login_or_password");break;case 403047:e.errorMessage=this.getText("there_is_no_user_with_that_username_or_email");break;case 400009:case 400006:e.errorMessage=this.getText("there_are_errors_in_your_form_please_try_again")}var u;switch(e.errorDetailsCode){case 100001:u=this.getText("old_password_cannot_be_the_same_as_new_password");break;case 100002:u=this.getText("wrong_password")}if(window.gigya.events.dispatchErrorFromResponse(this._p,e,{screen:this._currentScreenID,form:this._lastSubmittedFormID,response:window.gigya.utils.object.clone(this._lastSubmittedFormResponse)}),!this._currentScreenID)return void this.hide();if(0!=e.errorCode&&"object"==typeof Recaptcha&&Recaptcha.reload(),i.showErrors){var p={errorCode:e.errorCode,errorMessage:u||e.errorMessage,errorFlags:e.errorFlags},h=[],m=e.validationErrors;if(m&&m.length>0)for(l=0;l<m.length;l++){var _=m[l].fieldName,f=_.split(".")[0],y=window.gigya.utils.DOM.getElementsByAttribute(i._elForm,"*","data-gigya-name",_);if(0==y.length&&"profile"==f&&(y=window.gigya.utils.DOM.getElementsByAttribute(i._elForm,"*","data-gigya-name",_.replace("profile.",""))),y.length>0){var w=y[0];0==h.length&&w.focus();var v=window.gigya.utils.object.clone(m[l]);v.field=w,h.push(v),this.showFieldError(w,m[l].errorCode,!0)}else m[l].errorCode!=t.errorCodes.MISSING_REQUIRED&&m[l].errorCode!=t.errorCodes.VALIDATION_ERROR||("captchaaText"==_?t.warn(this._ID,"Captcha is required but captcha widget is missing from the submitted form"):t.warn(this._ID,_+" is mandatory/invalid but its field is missing from the submitted form"))}h.push(p),i.showErrors([p],!0),i.showErrors(h,!1)}}}},handleErrorAttribute:function(e,i){var a,n=t.oErrorAttributes[e.errorCode],r=n?n.name:null;return r&&(a=this._elContainer.getAttribute(r)||this._elScreenSet.getAttribute(r)),a?(n.requiresFinalize?this._finalizeRegistrationNeeded=!0:n.resetFinalizeNeededState&&(this._finalizeRegistrationNeeded=!1),this.switchScreen(a,e,i)):(r&&t.warn(this._ID,"Missing attribute "+r),!1)},endFlowIsPending:function(){return this._finalizeRegistrationNeeded&&this._p.regToken},endFlow:function(e,t,i){var a=this;this.endFlowIsPending()?window.gigya.accounts.finalizeRegistration(this._p,{include:"profile,data,emails",dontHandleScreenSet:!0,callback:function(e){0==e.errorCode&&(a._p.regToken=null,a._finalizeRegistrationNeeded=!1,a._apiData={}),a.onScreenResponse(e,t,!0)}}):i||this.hide("finished",e)},getInstanceRefString:function(){return"gigya.accounts.plugins.screenSet.instances['"+encodeURIComponent(this._p.screenSet+"_"+this._p.containerID)+"']"}}}()}});