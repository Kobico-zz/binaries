!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=231)}({0:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"__extends",function(){return o}),i.d(t,"__assign",function(){return r}),i.d(t,"__rest",function(){return a}),i.d(t,"__decorate",function(){return s}),i.d(t,"__param",function(){return c}),i.d(t,"__metadata",function(){return u}),i.d(t,"__awaiter",function(){return g}),i.d(t,"__generator",function(){return d}),i.d(t,"__exportStar",function(){return l}),i.d(t,"__values",function(){return f}),i.d(t,"__read",function(){return p}),i.d(t,"__spread",function(){return w}),i.d(t,"__spreadArrays",function(){return h}),i.d(t,"__await",function(){return m}),i.d(t,"__asyncGenerator",function(){return y}),i.d(t,"__asyncDelegator",function(){return v}),i.d(t,"__asyncValues",function(){return _}),i.d(t,"__makeTemplateObject",function(){return b}),i.d(t,"__importStar",function(){return I}),i.d(t,"__importDefault",function(){return S});var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function o(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var r=function(){return(r=e||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}function s(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a}function c(e,t){return function(i,n){t(i,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function g(e,t,i,n){return new(i||(i=gigya.Promise))(function(o,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(a,s)}c((n=n.apply(e,t||[])).next())})}function d(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}function l(e,t){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}function p(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,o,r=i.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return a}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function h(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<i;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function y(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=i.apply(e,t||[]),r=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){o[e]&&(n[e]=function(t){return new gigya.Promise(function(i,n){r.push([e,t,i,n])>1||s(e,t)})})}function s(e,t){try{(i=o[e](t)).value instanceof m?gigya.Promise.resolve(i.value.v).then(c,u):g(r[0][2],i)}catch(e){g(r[0][3],e)}var i}function c(e){s("next",e)}function u(e){s("throw",e)}function g(e,t){e(t),r.shift(),r.length&&s(r[0][0],r[0][1])}}function v(e){var t,i;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(i=!i)?{value:m(e[n](t)),done:"return"===n}:o?o(t):t}:o}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=f(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(t){return new gigya.Promise(function(n,o){(function(e,t,i,n){gigya.Promise.resolve(n).then(function(t){e({value:t,done:i})},t)})(n,o,(t=e[i](t)).done,t.value)})}}}function b(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}}.call(this,i(0).__assign)},1:function(e,t,i){var n,o;Object.defineProperty(t,"__esModule",{value:!0});var r=i(16),a=navigator.userAgent.toLowerCase();t.localInfo={baseDomain:"",isBrowserSupportsFilesAPI:"function"==typeof FileReader||"object"==typeof FileReader,initTime:new Date,version:0,pageDomain:document.location.hostname,protocol:"http:"==document.location.protocol?"http":"https",userAgent:a,isWin:-1!=a.indexOf("win"),isIE:-1!=a.indexOf("msie")||-1!=a.indexOf("mozilla")&&-1!=a.indexOf("trident"),isIE6:-1!=a.indexOf("msie 6."),isIE7:-1!=a.indexOf("msie 7."),isIE8:-1!=a.indexOf("msie 8."),isIE9:-1!=a.indexOf("msie 9."),isIE10:-1!=a.indexOf("msie 10."),isIE11:-1!=a.indexOf("mozilla")&&-1!=a.indexOf("trident/7.0"),isEdge:-1!=a.indexOf("edge"),isIOS:-1!=a.indexOf("iphone")||-1!=a.indexOf("ipad")||-1!=a.indexOf("ipod"),isSafari534:-1!=a.indexOf("safari/534"),isWeChat:-1!=a.indexOf("micromessenger"),iosVersion:-1!=a.indexOf("applewebkit")&&-1!=a.indexOf("version/")?parseInt(a.split("version/")[1].split(" ")[0]):0,isAndroid:-1!=a.indexOf("android"),isAndroidBrowser:function(e){if(-1===e.indexOf("mozilla/5.0"))return!1;if(-1===e.indexOf("android 4"))return!1;if(-1===e.indexOf("applewebkit"))return!1;if(-1!==e.indexOf("windows phone"))return!1;var t=/chrome\/(\d+)/.exec(e);return!t||parseInt(t[1])<20}(a),currentBrowser:"",androidVersion:-1!=a.indexOf("android")?parseFloat(a.slice(a.indexOf("android")+8)):0,isChrome:-1!=a.indexOf("chrome")&&-1==a.indexOf("edge"),isGoogleBot:-1!=a.indexOf("googlebot"),isFF:-1!=a.indexOf("firefox"),isOpera:-1!=a.indexOf("opera"),isSafari:navigator.appVersion&&-1!=navigator.appVersion.toLowerCase().indexOf("safari")&&-1==navigator.appVersion.toLowerCase().indexOf("chrome")&&-1==a.indexOf("android"),isIOSWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),isIOSChrome:-1!=a.indexOf("crios"),isMAC:navigator.appVersion&&-1!=navigator.appVersion.toLowerCase().indexOf("mac"),isWindowsPhone:-1!=a.indexOf("windows phone"),isFacebookBrowser:-1!=a.indexOf("fban")||-1!=a.indexOf("fbav"),supportsPostMessage:null!=window.postMessage&&(-1==a.indexOf("msie")||-1!=a.indexOf("iemobile")),supportsLocalStorage:!1,supportsSessionStorage:!1,supportsFlash:function(){var e=!1;try{if(navigator.mimeTypes&&null!=navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)e=!0;else new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(e=!0)}catch(e){}return e}(),quirksMode:"BackCompat"==document.compatMode&&-1!=a.indexOf("msie"),backCompat:"BackCompat"==document.compatMode,isMobile:function(){var e=["iphone","ipod","android","midp","240x320","blackberry","netfront","nokia","panasonic","portalmmm","sharp","sie-","sonyericsson","symbian","windows ce","benq","mda","mot-","opera mini","philips","pocket pc","sagem","samsung","htc"];for(var t in e)if(-1!=a.indexOf(e[t]))return!0;return!1}(),isMobileApp:function(){if(!document.getElementsByTagName)return!1;for(var e=document.getElementsByTagName("meta"),t=0;t<e.length;t++)if("viewport"==e[t].getAttribute("name")){var i=e[t].getAttribute("content");if(i&&-1!==i.indexOf("width=device-width"))return!0}return!1}(),isNativeMobileApp:!1,isTouch:function(){if("ontouchstart"in window)return!0;if("onmsgesturechange"in window)try{return new ActiveXObject("htmlfile"),!1}catch(e){return!0}return!1}(),isOnLine:function(){return navigator.onLine},messagingMethod:0};var s=function(e){try{var t=window[e];if(!t)return!1;var i="_gig_localStorage_test",n="just checking for localStorage";t.setItem(i,n);var o=t.getItem(i)===n;return t.removeItem(i),o}catch(e){return!1}};t.localInfo.supportsLocalStorage=s("localStorage"),t.localInfo.supportsSessionStorage=s("sessionStorage"),t.localInfo.isIE11&&!window.indexedDB&&(t.localInfo.supportsPostMessage=!1),t.localInfo.isMAC=t.localInfo.isMAC&&!t.localInfo.isIOS;var c=t.localInfo.isWin?"windows":t.localInfo.isWindowsPhone?"winphone":t.localInfo.isIOS?"ios-v"+t.localInfo.iosVersion:t.localInfo.isMAC?"mac":t.localInfo.isAndroid?"android":"";c&&(c+=" ");var u,g=t.localInfo.isChrome?"chrome":t.localInfo.isFF?"firefox":t.localInfo.isSafari?"safari":t.localInfo.isEdge?"edge":t.localInfo.isIE11?"ie11":t.localInfo.isIE10?"ie10":t.localInfo.isIE9?"ie9":t.localInfo.isIE8?"ie8":"";t.localInfo.currentBrowser=c+g,(null===(o=null===(n=window.gigya.partnerSettings)||void 0===n?void 0:n.baseDomains)||void 0===o?void 0:o.length)?u=window.gigya.partnerSettings.baseDomains:(window.self===window.top&&window.gigya.logger.warn("gigya: missing base domains for site"),u=[document.location.hostname]),t.localInfo.baseDomain=r.getBaseDomain(u)},10:function(e,t){function i(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}Object.defineProperty(t,"__esModule",{value:!0}),t.trim=function(e){return e.replace(/^\s*(\S*(.*\S)?)\s*$/,"$1")},t.format=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var n=0;n<arguments.length-1;n++)null!=arguments[n+1]&&(e=e.split("{"+n+"}").join(arguments[n+1]));return e},t.capitalize=function(e){return e.substring(0,1).toUpperCase()+e.substring(1)},t.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},t.escapeRegExp=i,t.replaceAll=function(e,t,n){return t?e.replace(new RegExp(i(t),"g"),n):e},t.mergeCommaSeparatedValues=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");var i=e.concat(",",t).split(",");return window.gigya.utils.array.getUniqueValues(i).filter(function(e){return e}).join(",")}},11:function(e,t){function i(e,t){for(var i=0;i<e.length;++i)t(e[i],i,e)}function n(e,t){for(var i=0;i<e.length;++i)if(t(e[i],i,e))return!0;return!1}function o(e,t){var i=-1;return n(e,function(e,n,o){return!!t(e,n,o)&&(i=n,!0)}),i}Object.defineProperty(t,"__esModule",{value:!0}),t.indexOf=function(e,t){for(var i=0;i<e.length;i++)if(e[i]==t)return i;return-1},t.clone=function(e){for(var t=[],i=0;i<e.length;i++)t[i]=e[i];return t},t.removeByValue=function(e,t){if(e)for(var i=e.length-1;i>=0;i--)e[i]==t&&e.splice(i,1)},t.removeByProperty=function(e,t,i){if(e)for(var n=e.length-1;n>=0;n--)e[n][t]==i&&e.splice(n,1)},t.getArrayFromString=function(e,t,i){return e&&"string"==typeof e?(i&&(e=e.toLowerCase()),(e=e.replace(/[ ]/g,"").replace(/,,/g,","))?e.split(t):[]):[]},t.intersect=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null==e)return[];for(var n=[],o=arguments.length,r=0,a=e.length;r<a;r++){var s=e[r];if(-1==this.indexOf(n,s)){for(var c=1;c<o;c++){var u=arguments[c];if(null==u||-1==this.indexOf(u,s))break}c===o&&n.push(s)}}return n},t.lastIndexOf=function(e,t,i){void 0===i&&(i=0);for(var n=e.length;--n>=i;)if(e[n]===t)return n;return-1},t.forEach=i,t.forEachProp=function(e,t){for(var i in e)e.hasOwnProperty(i)&&t(e[i],i,e)},t.some=n,t.every=function(e,t){for(var i=0;i<e.length;++i)if(!t(e[i],i,e))return!1;return!0},t.everyProp=function(e,t){for(var i in e)if(e.hasOwnProperty(i)&&!t(e[i],i,e))return!1;return!0},t.map=function(e,t){var n=new Array;return i(e,function(e,i,o){return n.push(t(e,i,o))}),n},t.firstIndex=o,t.first=function(e,t){return e[o(e,t)]},t.getAllEnumValues=function(e){var t=[];for(var i in e)"number"==typeof e[i]&&t.push(e[i]);return t},t.getUniqueValues=function(e){for(var t=0;t<e.length;++t)for(var i=t+1;i<e.length;i++)e[t]===e[i]&&e.splice(i,1);return e}},12:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n,o=i(7),r=i(1),a=i(11),s=i(4),c=i(6),u=i(8),g={};function d(e){return e.replace(/^http(s?):\/\/cdn(s?)[0-9]*.gigya.com\//,"http$1://cdn$2.gigya.com/")}function l(e,t,i,n,c,u){var l;if(void 0===c&&(c=5e3),0===e.indexOf("//")&&(e=r.localInfo.protocol+":"+e),n){var f=d(e);if(g[f])return void(g[f].loaded?(window.gigya.logger.debug("script was already loaded:",{src:e}),i&&i()):(g[f].onLoad.push(i),g[f].onError.push(t)));l=g[f]={loaded:!1,onLoad:[i],onError:[t]},u&&u.length>0&&a.forEach(u,function(e){g[e]=l})}else l={loaded:!1,onLoad:[i],onError:[t]};var p=function(){var t=document.createElement("script");t.async=!0,t.type="text/javascript",t.charset="UTF-8";var i=!1,n=function(){if(!i){if(l.onLoad&&l.onLoad.length)for(var e=0;e<l.onLoad.length;e++)"function"==typeof l.onLoad[e]&&l.onLoad[e]();l.loaded=!0,l.onError=l.onLoad=null,i=!0,!0===c&&(c=0),!1!==c&&setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},c)}};t.onload=n,t.onreadystatechange=function(){"loaded"===this.readyState&&n()},t.onerror=function(){for(var t=0;t<l.onError.length;t++)"function"==typeof l.onError[t]&&l.onError[t]();delete g[e]};var a=document.getElementsByTagName("head");a&&a.length>0&&a[0].appendChild(t);var s=function(){var i,n,r=new RegExp("^https?://cdns?.*"+window.gigya.defaultApiDomain).test(e)?(i=e,(n=o.Uri.parse(i)).addToSearch({version:window.gigya.build.version}),n.toString()):e;t.src=r};r.localInfo.iosVersion>=6?s():setTimeout(s,1)};r.localInfo.isIE?s.invokeOnPageLoad(p):p()}t.isLoaded=function(e){var t=d(e);return Boolean(g[t]&&g[t].loaded)},t.load=l,function(e){e[e.script=0]="script",e[e.image=1]="image",e[e.iframe=2]="iframe"}(n=t.ResourceTypes||(t.ResourceTypes={})),t.triggerResource=function(e,t,i,o){switch(void 0===i&&(i=n.image),void 0===o&&(o=5e3),i){case n.script:l(e,t,t,!1,o);break;case n.image:!function(e,t){var i=new Image,n=!1;i.onload=i.onerror=function(){n||(n=!0,t())},i.src=e}(e,t);break;case n.iframe:!function(e,t,i){void 0===i&&(i=5e3);var n=document.createElement("iframe");n.style.width="30px",n.style.height="10px",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",!0===i&&(i=0);var o=function(e){var n;!(n=e&&e.srcElement?e.srcElement:e&&e.target?e.target:this).loaded&&n.parentNode&&(n.loaded=!0,t(),!1!==i&&window.setTimeout(function(){try{document.body.removeChild(n)}catch(e){}},i))};c.addEventListener(n,"load",o),c.addEventListener(n,"error",o),n.onload=function(e){o(e)},n.onerror=o,n.src=e,c.appendToBody(n)}(e,t,o);break;default:throw new Error("Unsupported resource type")}},t.loadService=function(e,t,i){var n=u.getCdnResource()+"/js/gigya.services."+e+".js";l(n,function(){"object"==typeof console&&console.error&&(console.error("error loading gigya service "+e+" from url: "+n),t&&t())},i,!0)}},121:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(49),r=function(){function e(e,t,i,n,r,a){var s=this;void 0===t&&(t=6e4),void 0===i&&(i=o.generateId),void 0===n&&(n=o.createIframe),void 0===r&&(r=function(){return new gigya.Promise(function(e){document.body?e(document.body):document.addEventListener("DOMContentLoaded",function(){return e(document.body)})})}),void 0===a&&(a=window),this.url=e,this.timeout=t,this._idCreator=i,this._iframeCreator=n,this.getIframeHost=r,this._win=a,this._pendingReqs=[],this._mutationObservers=[],this.onResponse=function(e){var t=window.gigya.utils.JSON.parse(e.data);t&&s._pendingReqs[t.id]&&s.validateOrigin(e.origin)&&(s._pendingReqs[t.id](t),delete s._pendingReqs[t.id])}}return Object.defineProperty(e.prototype,"isInit",{get:function(){return Boolean(this._iframe)},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e=this;return this.isInit?gigya.Promise.reject("proxy already initialized"):new gigya.Promise(function(t,i){e._iframe=e._iframeCreator(),e._iframe.src=e.url,e.getIframeHost().then(function(n){e._iframeHost=n,e._iframeHost.appendChild(e._iframe),window.gigya.logger.isEnabled&&e.startObservingIFrameRemoval();var o=e._win.setTimeout(function(){return i("proxy init timeout")},e.timeout),r=function(n){if(e.validateOrigin(n.origin)){var a=JSON.parse(n.data);if(a.signal)switch(e._win.clearTimeout(o),e._win.removeEventListener("message",r,!0),a.signal){case"listening":e._win.addEventListener("message",e.onResponse,!0),t(a.res);break;case"error":case"stop":i(a.res);break;default:i("unsupported response")}}};e._win.addEventListener("message",r,!0)})})},e.prototype.validateOrigin=function(e){return o.validateOrigin(this._iframe.src,e)},e.prototype.postToIFrame=function(e){var t=this.registerMessage(e),i="object"==typeof e?JSON.stringify(e):e;return this._iframe.contentWindow.postMessage(i,this._iframe.src),t},e.prototype.registerMessage=function(e,t){var i=this;return void 0===t&&(t=this.timeout),new gigya.Promise(function(n,o){var r=i._win.setTimeout(function(){o("proxy request timeout")},t);i._pendingReqs[e.id]=function(e){i._win.clearTimeout(r),"error"===e.signal?o(e.res):n(e.res)}})},e.prototype.sendRequest=function(e,t){return this.postToIFrame({id:this._idCreator(),methodName:e,params:t})},e.prototype.stop=function(e){return void 0===e&&(e=!1),n.__awaiter(this,void 0,void 0,function(){var t,i;return n.__generator(this,function(n){switch(n.label){case 0:if(this.isInit)return[3,1];throw"proxy is not active";case 1:t=void 0,n.label=2;case 2:return n.trys.push([2,4,5,6]),[4,this.postToIFrame({id:this._idCreator(),signal:"stop"})];case 3:return[2,n.sent()];case 4:throw i=n.sent(),t=i,i;case 5:return t&&!e||(this._mutationObservers&&this._mutationObservers.length&&this.stopObservingIFrameRemoval(),this._win.removeEventListener("message",this.onResponse,!0),this._iframeHost.removeChild(this._iframe),delete this._iframe),[7];case 6:return[2]}})})},e.prototype.wrapWith=function(e){var t;if("function"==typeof e)t=o.getAllClassMethodsNames(e);else if(e instanceof Array)t=e;else{if("object"!=typeof e)throw"unsupported type for wrapper";t=Object.keys(e)}return this.proxyFromKeys(t)},e.prototype.proxyFromKeys=function(e){var t=this,i={};return e.forEach(function(e){return i[e]=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return t.sendRequest(e,i)}}),i},e.prototype.startObservingIFrameRemoval=function(){for(var e=this._iframe;e.parentElement;)this.addMutationObserver(e),e=e.parentElement},e.prototype.stopObservingIFrameRemoval=function(){this._mutationObservers.forEach(function(e){e&&e.disconnect&&e.disconnect()}),this._mutationObservers=[]},e.prototype.addMutationObserver=function(e){var t=this,i=new MutationObserver(function(i){for(var n=0,o=i;n<o.length;n++){var r=o[n];if("childList"==r.type&&r.removedNodes.length)for(var a=0;a<r.removedNodes.length;a++)if(r.removedNodes.item(a)===e)return window.gigya.logger.warn("### Gigya's service proxy has been unexpectedly detached from the DOM. This may cause unexpected behavior including a complete loss of service. ###"),void t.stopObservingIFrameRemoval()}});i.observe(e.parentElement,{childList:!0,subtree:!1}),this._mutationObservers.push(i)},e}();t.ServiceProxy=r},122:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(e){function t(t,i,n,o){void 0===o&&(o={});var r=e.call(this,window.gigya.defaultApiDomain,t,i,o)||this;return r.methodName=t,r.params=i,r.callback=n,r.settings=o,r}return n.__extends(t,e),t.prototype.sendAction=function(e){window.gigya.utils.object.add(this.params,this.getAuthParams()),window.gigya._.apiAdapters.web.apiService.sendRequest(this.json()).then(this.callback).catch(function(e){return console.error(e)})},t.prototype.json=function(){return{methodName:this.methodName,params:this.params,settings:this.settings}},t}(i(80).BaseRequest);t.ApiRequest=o},123:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=function(e){function t(t,i,n,o,r,a){void 0===a&&(a={});var s=e.call(this,i,n,o,a)||this;return s.id=t,s.baseUrl=i,s.methodName=n,s.params=o,s.callback=r,s.settings=a,s.windowName=s.methodName.replace(/\./g,"_").replace(/\//g,"")+"_"+(new Date).getTime(),s.requestID=s.windowName+(new Date).getTime(),s}return n.__extends(t,e),t.prototype.beforeRequest=function(){},t.prototype.afterResponse=function(e){e.dontClose&&"false"!==e.dontClose||window.gigya.utils.win.close(this.windowName),this.callback(e)},t.prototype.getAuthFlow=function(){return window.gigya.localInfo.isWindowsPhone||window.gigya.localInfo.isFacebookBrowser?"redirect":this.params.authFlow?this.params.authFlow:"popup"},t.prototype.getStateString=function(){var e=window.gigya.utils.xd._flashListenerID;(window.gigya.thisScript.globalConf.legacyCrossSiteMethod&&"localstorage"!==window.gigya.thisScript.globalConf.legacyCrossSiteMethod.toLowerCase()||window.gigya.localInfo.isIE&&window.navigator.msDoNotTrack)&&(e=window.gigya.thisScript.globalConf.legacyCrossSiteMethod+":"+window.gigya.utils.xd._flashListenerID);var t=this.getAuthFlow(),i={domain:document.location.href.split("?")[0].split("#")[0],id:this.requestID,lid:e,messaging:window.gigya.localInfo.messagingMethod};return window.gigya.localInfo.isIE11&&window.indexedDB&&(i.messaging=window.gigya._.MessagingMethod.LocalStorageListener),window.gigya.localInfo.isAndroid&&this.params.provider&&"line"==this.params.provider.toLowerCase()&&(i.messaging=window.gigya._.MessagingMethod.LocalStorageListener),"redirect"===t&&(i.sourceURL=window.top.document.location.href,this.params.redirectURL?(i.redirectURL=window.gigya.utils.URL.addParamsToURL(this.params.redirectURL,{gig_events:window.gigya.events.global.getEventsForOperation(this.methodName)}),this.params.redirectMethod&&(i.redirectMethod=this.params.redirectMethod),i.addUserInfo=!0):i.sourceURL=window.gigya.utils.URL.addParamsToURL(i.sourceURL,{gig_events:window.gigya.events.global.getEventsForOperation(this.methodName)})),this.params.provider&&"facebook"==this.params.provider.toLowerCase()&&(i.invite=this.params.invite),window.gigya.utils.keyValue.serialize(i)},t.prototype.getServerParamsString=function(){var e={};for(var t in this.params)0!==t.indexOf("x_")&&null!=this.params[t]&&(e["x_"+t]=this.params[t],delete e[t]);e.x_APIKey&&(e.client_id=e.x_APIKey,delete e.x_APIKey),e.x_oauth_token&&(e.oauth_token=e.x_oauth_token,delete e.x_oauth_token),e.redirect_uri="/GS/AfterLogin.aspx",e.response_type=this.params.authCodeOnly?"code":"server_token",e.x_sdk="js_"+window.gigya.build.version;var i=window.gigya.utils.cookie.get("_gigRefUid_"+this.params.APIKey);i&&(e.x_refUID=i),e.state=this.getStateString(),window.gigya.utils.object.add(e,this.getAuthParams());var n=window.gigya._.apiAdapter.getGmidTicket();return n&&(e.gmidTicket=n),delete e.redirectURL,this.sentLoginToken=e.login_token,window.gigya.utils.keyValue.serialize(e)},t.prototype.sendAction=function(){var e=this;this.beforeRequest();var t,i=this.getServerParamsString();this.params.provider&&(t=window.gigya.socialize._getProviderByName(this.params.provider));var n={menubar:0,resizable:1,scrollbars:1,width:t?t.width:void 0,height:t?t.height:void 0};this.params.enablePopupLocation?(n.location=1,n.toolbar=1):n.toolbar=0;var o=this.methodName.split("."),r=this.params.originalMethodName||o[o.length-1];window.gigya.reports.report(r,this.params.APIKey,this.params.cid,this.params.source,this.params.sourceData,{sn:t?t.toString():null});var a=this.getUrl()+"?"+i;"redirect"===this.getAuthFlow()?window.top.document.location.href=a:(window.gigya.utils.xd.addMessageListener(this.requestID,this.params,!0,function(t){e.afterResponse(t)}),window.gigya.utils.win.open(a,this.windowName,n))},t}(i(80).BaseRequest);t.OauthRequest=o},14:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(1);function o(){return n.localInfo.baseDomain||""}function r(e,t){return void 0===e&&(e=n.localInfo.pageDomain),void 0===t&&(t=o()),t.length>0&&e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length?t:e}function a(e){e=e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1").replace(/^[ \t]+|[ \t]+$/g,"");var t=new RegExp("(?:^|;)\\s?"+e+"=(.*?)(?:;|$)"),i=document.cookie.match(t);return i&&unescape(i[1])}function s(e,t,i,o,s){var c,u=n.localInfo.pageDomain;null==o&&(o=r()),c=null==i||""===i||isNaN(i)?31536e6:0==i?null:1e3*i;var g=new Date;g.setTime(g.getTime()+c);var d=e+"="+escape(t)+(s?"":"; path=/")+(null==c?"":"; expires="+g.toUTCString())+(o&&""!=o&&-1!=o.indexOf(".")?"; domain="+o:"");document.cookie=d,c&&!(c>0)||a(e)||(d=e+"="+escape(t)+(s?"":"; path=/")+(null==c?"":"; expires="+g.toUTCString())+(u&&""!=u&&-1!=u.indexOf(".")?"; domain="+u:""),document.cookie=d)}function c(){return 31536e3}t._getBaseDomain=o,t.getDefaultDomain=r,t.get=a,t.set=s,t.remove=function(e){var t=n.localInfo.pageDomain,i=o();i.length>0&&t.length>=i.length&&t.lastIndexOf(i)===t.length-i.length&&(s(e,"",-1,i),s(e,"",-1,i,!0)),s(e,"",-1,n.localInfo.pageDomain),s(e,"",-1,n.localInfo.pageDomain,!0),s(e,"",-1,""),s(e,"",-1,"",!0)},t.getInfiniteExpirationTimeInSeconds=c,t.canSaveCookie=function(e){void 0===e&&(e=document);var t=new Date((new Date).getTime()+1e3);try{return e.cookie="gig3pctest=true;expires="+t.toGMTString(),-1!==e.cookie.indexOf("gig3pctest")}catch(e){return!1}}},16:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(7),o=i(10),r=i(1),a=["socialize","accounts","fidm","gm","comments","gcs","ids","ds","gscounters"];function s(e,t,i){void 0===t&&(t=window.gigya.dataCenter),void 0===i&&(i=window.gigya.defaultApiDomain);var n=t+"."+i;return e?e+"."+n:n}function c(e,t,i,n){return void 0===e&&(e=window.gigya.partnerSettings&&window.gigya.partnerSettings.customAPIDomainPrefix),void 0===t&&(t=r.localInfo.baseDomain),void 0===i&&(i=window.gigya.dataCenter),void 0===n&&(n=window.gigya.defaultApiDomain),e&&t&&t!==n?e+"."+t:s(void 0,i,n)}t.apiDomainFactory=function(e,t){void 0===e&&(e=c()),void 0===t&&(t=window.gigya.defaultApiDomain);var i=n.Uri.parse(e).isIn(n.Uri.parse(t));return function(t){if(t&&i){var n=t.split(".")[0];return-1==a.indexOf(n)&&(window.gigya.logger.error("trying to send request to an invalid domain"),n=a[0]),n+"."+e}return e}},t.getGigyaDomain=s,t.getBaseDomain=function(e,t,i){if(void 0===e&&(e=window.gigya.partnerSettings.baseDomains),void 0===t&&(t=location.hostname),void 0===i&&(i=["gigya.com","gigya-api.cn",window.gigya.defaultApiDomain]),!t)return"";"string"==typeof e&&(e=e.split(","));var r=n.Uri.parse(t);i&&(e=e.concat(i));for(var a=0,s=e;a<s.length;a++){var c=s[a],u=o.replaceAll(c,"*",""),g=n.Uri.parse(u);if(g&&r.isIn(g))return g.isForSubDomains()?r.domain:g.domain}return r.domain},t.resolveApiDomain=c},18:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(3),r=i(1),a=i(12),s=i(14),c=function(){function e(){}return e.getName=function(){return"AbstractAdapter"},e.prototype.setObject=function(e,t){this.setItem(e,o.serialize(t))},e.prototype.getObject=function(e,t){return o.deserialize(this.getItem(e),t)},e.prototype.isPersistent=function(){return!0},e}();t.AbstractLocalStorageAdapter=c;var u=function(e){function t(){var t=e.call(this)||this;return t.isLoaded=!1,t}return n.__extends(t,e),t.prototype.isReady=function(){return this.isLoaded},t.prototype.waitForService=function(e){var t=this;this.isReady()?e():setTimeout(function(){return t.waitForService(e)},50)},t}(c);t.AbstractAsyncLocalStorageAdapter=u;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getItem=function(e){return this.storage[e]},t.prototype.setItem=function(e,t,i){try{this.storage[e]=t}catch(e){}},t.prototype.removeItem=function(e){this.storage.removeItem(e)},t}(c),d=function(e){function t(){var t=e.call(this)||this;return t.storage=window.localStorage,t}return n.__extends(t,e),t.getName=function(){return"LocalStorageAdapter"},t.isAvailable=function(){return r.localInfo.supportsLocalStorage},t}(g),l=function(e){function t(){var t=e.call(this)||this;return t.storage=window.sessionStorage,t}return n.__extends(t,e),t.getName=function(){return"SessionStorageAdapter"},t.isAvailable=function(){return r.localInfo.supportsSessionStorage},t}(g),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.isAvailable=function(){return r.localInfo.isFF&&window.globalStorage},t.getName=function(){return"FirefoxStorageAdapter"},t.prototype.getItem=function(e){return window.globalStorage[location.hostname][e]},t.prototype.setItem=function(e,t,i){try{window.globalStorage[location.hostname][e]=t}catch(e){}},t.prototype.removeItem=function(e){delete window.globalStorage[location.hostname][e]},t}(c),p=function(e){function t(){var t=e.call(this)||this;return t.loadSwfStore(function(e){t.isLoaded=!0}),t}return n.__extends(t,e),t.isAvailable=function(){return r.localInfo.supportsFlash&&(r.localInfo.isIE||r.localInfo.isEdge)},t.getName=function(){return"FlashAsyncStorageAdapter"},t.prototype.loadSwfStore=function(e){var t=this;window.SwfStore?this.initializeSwfStore(function(){return t.loadSwfStore(e)}):a.load("https://cdns.gigya.com/gs/js/swfstore.min.js",function(){console.log("Failed to load Gigya SwfStore."),e(!1)},function(){t.initializeSwfStore(e)},!0)},t.prototype.initializeSwfStore=function(e){this.swfStore=new SwfStore({namespace:"gigSSO",swf_url:"https://cdns.gigya.com/gs/swf/swfstore.swf",onready:function(){e(!0)},onerror:function(){console.log("Failed to initialize Gigya SwfStore."),e(!1)}})},t.prototype.getItem=function(e){return this.swfStore.get(e)},t.prototype.setItem=function(e,t,i){this.swfStore.set(e,t)},t.prototype.removeItem=function(e){this.swfStore.clear(e)},t}(u),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.isAvailable=function(){return s.canSaveCookie()},t.getName=function(){return"CookieStorageAdapter"},t.prototype.getItem=function(e){return s.get(e)},t.prototype.setItem=function(e,t,i,n){s.set(e,t,i,n)},t.prototype.removeItem=function(e){s.remove(e)},t}(c);t.CookieStorageAdapter=w;var h=function(e){function t(){var t=e.call(this)||this;return t.memory={},t}return n.__extends(t,e),t.isAvailable=function(){return!0},t.getName=function(){return"MemoryStorageAdapter"},t.prototype.getItem=function(e){return this.memory[e]},t.prototype.setItem=function(e,t,i){this.memory[e]=t},t.prototype.removeItem=function(e){delete this.memory[e]},t.prototype.isPersistent=function(){return!1},t}(c);function m(e){var i=e.getName()||e.name;return t.instances[i]||(t.instances[i]=new e),t.instances[i]}function y(e){for(var i,n=0,o=t.adapters;n<o.length;n++){var r=o[n];if(r.isAvailable()){if(r.prototype instanceof u&&!e)continue;i=m(r);break}}return i||(i=m(h)),e&&(i instanceof u?i.waitForService(function(){e(i)}):e(i)),i}t.MemoryStorageAdapter=h,t.adapters=[d,l,f,p,w,h],t.instances={},t.initializeAdapter=m,t.waitForService=y;var v=y();t.getItem=function(e){return v.getItem(e)},t.setItem=function(e,t,i){return v.setItem(e,t,i)},t.removeItem=function(e){return v.removeItem(e)},t.setObject=function(e,t){return v.setObject(e,t)},t.getObject=function(e,t){return v.getObject(e,t)}},19:function(e,t){function i(){var e=0,t=0;return"number"==typeof window.pageYOffset?(t=window.pageYOffset,e=window.pageXOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(t=document.body.scrollTop,e=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(t=document.documentElement.scrollTop,e=document.documentElement.scrollLeft),{left:e,top:t}}function n(){var e,t,i=document.documentElement,n=document.body;return window.innerHeight?(e=window.innerHeight,t=window.innerWidth):(0==(e=i.clientHeight)&&(e=n.clientHeight),0==(t=i.clientWidth)&&(t=n.clientWidth)),{w:t,h:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getScroll=i,t.getFullSize=function(){var e=document.documentElement,t=document.body,i=e.clientHeight;0==i&&(i=t.clientHeight);var n=e.clientWidth;return 0==n&&(n=t.clientWidth),{w:n,h:i}},t.getOrientation=function(){var e=parseInt(window.orientation||"0");return e<0&&(e+=360),e},t.getInnerSize=n,t.getMiddleCenter=function(){var e=i(),t=n();return{top:e.top+Math.floor(t.h/2),left:e.left+Math.floor(t.w/2)}},t.isRectHorizontallyVisible=function(e){var t=i(),o=n();return e.left>=t.left&&e.right<=t.left+o.w},t.isRectFullyVisible=function(e){var t=i(),o=n();return e.top>=t.top&&e.bottom<=t.top+o.h&&e.left>=t.left&&e.right<=t.left+o.w},t.scrollIntoView=function(e){e&&e.scrollIntoView&&e.scrollIntoView()}},231:function(e,t,i){(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=i(58),o=i(78),r=i(121),a=i(49),s=i(59),c=i(35),u=i(232),g=i(79),d=i(122),l=i(80),f=i(233),p=i(123),w=i(61),h=i(60),m=i(234);window.gigya.services||(window.gigya.services={}),window.gigya.services.proxy||(window.gigya.services.proxy={}),window.gigya.services.proxy.utils||(window.gigya.services.proxy.utils={}),window.gigya._||(window.gigya._={}),window.gigya._.apiAdapters||(window.gigya._.apiAdapters={}),window.gigya._.apiAdapters.web||(window.gigya._.apiAdapters.web={}),window.gigya._.apiAdapters.web.sso||(window.gigya._.apiAdapters.web.sso={}),window.gigya._.apiAdapters.web.tokenStore||(window.gigya._.apiAdapters.web.tokenStore={}),e(window.gigya.services.proxy,n,o,r),e(window.gigya.services.proxy.utils,a),e(window.gigya.services,s,c,u),e(window.gigya,g),e(window.gigya._.apiAdapters.web,d,l,f,p,m),e(window.gigya._.apiAdapters.web.sso,w),e(window.gigya._.apiAdapters.web.tokenStore,h),window.gigya.setGroupContext=window.gigya._.apiAdapters.web.setGroupContext,window.gigya.setSSOToken=window.gigya._.apiAdapters.web.setSSOToken,window.gigya.syncGroupGltExp=window.gigya._.apiAdapters.web.syncGroupGltExp,window.gigya.setAccountResidency=window.gigya._.apiAdapters.web.setAccountResidency}).call(this,i(0).__assign)},232:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},233:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(60),r=i(61),a=["us1","eu1","au1","ru1","cn1","il1"];t.setAccountResidency=function(e){if(e&&-1==a.indexOf(e.toLowerCase()))return window.gigya.logger.warn("invalid residency",{dataCenter:e});window.gigya.globalAccount.dataCenter=e},t.setGroupContext=function(e){r.setGroupContextCookie({groupContext:e})},t.setSSOToken=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.__awaiter(this,void 0,void 0,function(){var t,i;return n.__generator(this,function(n){return t=window.gigya.utils.object.merge([window.gigya.thisScript.globalConf,e]),i=t.redirectURL||document.location.href,window.gigya.utils.HTTP.redirect(i,[{}],"GET","_top"),[2]})})},t.syncGroupGltExp=function(e){return void 0===e&&(e=o.getGltexpCookie()),window.gigya.partnerSettings.ssoKey?new gigya.Promise(function(t){return r.setLoginTokenExp({loginTokenExp:e,callback:t},!1)}).then(function(t){var i=t.gltexp&&t.gltexp!==e;return i&&o.setGltexp(t.gltexp),{hasChanged:i,oldExpiration:window.gigya.utils.gltexp.getMillis(e),newExpiration:window.gigya.utils.gltexp.getMillis(t.gltexp||e)}}):gigya.Promise.resolve()}},234:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(60),r=i(61),a=i(122),s=i(123),c=i(121),u=i(59),g=i(18);window.gigya.isGigya||(window.gigya.isGigya=!0),t.webAdapterName="Web",t.newApiAdapter=function(e){return new d(e,new g.CookieStorageAdapter)};var d=function(){function e(e,i){this.adapterSettings=e,this._storage=i,this.name=t.webAdapterName}return e.prototype.getStorage=function(){return this._storage},e.prototype.init=function(e,t){return void 0===t&&(t=0),n.__awaiter(this,void 0,void 0,function(){var i,a,s,c,u,g,d,l,f=this;return n.__generator(this,function(n){switch(n.label){case 0:i="gig_bootstrap_"+window.gigya.thisScript.APIKey,n.label=1;case 1:return n.trys.push([1,4,,7]),a=window.gigya.partnerSettings.customAPIDomainPrefix||"ver2",s=this.getStorage().getItem(i)===a,window.gigya.logger.info("has bootstrapped: "+s),c=window.gigya.logger.group("create api service"),u=window.gigya._.apiAdapters.web,g=this,[4,this.createApiService(s)];case 2:return u.apiService=g._apiService=n.sent(),c.end(),[4,this._apiService.bootstrap()];case 3:return(d=n.sent()).ticketInfo?this.setGmidTicket(d.ticketInfo):s||this.getStorage().setItem(i,a),window.gigya.utils.functions.createAlias("gigya.auth.loginToken.get",o.get),window.gigya.partnerSettings.ssoKey&&window.gigya.canary&&window.gigya.canary.config.probability&&this.syncCanaryWithSSO(),this.isSessionValid(void 0,function(t){if(t&&window.gigya.services.accountService.verifyLogin().then(function(e){e||window.gigya.events.global.dispatch({eventName:"logout,accounts.logout"})}),f.checkReturnFromURL(),window.gigya.logger.info("user is "+(t?"":"not ")+"logged-in"),window.gigya.partnerSettings.ssoKey){window.gigya.logger.info("sso group sync - "+window.gigya.partnerSettings.ssoKey);var i=function(t){o.setFromSsoResponse(t),e()};if(t){var n=o.get();r.checkTokenRenew({loginToken:n,callback:i})}else r.getGroupToken({callback:i})}else e()}),[3,7];case 4:return l=n.sent(),t>0?[4,this.init(e,t-1)]:[3,6];case 5:return[2,n.sent()];case 6:return window.gigya.logger.error("error bootstrapping sdk",{type:"bootstrap failed",scope:"WebAdapter.init",error:l}),window.gigya.logger.debug("removing bootstrap indication"),this.getStorage().removeItem(i),window.gigya.events.dispatchErrorFromResponse({eventName:"init"},{status:"FAIL_TO_BOOTSTRAP",statusMessage:"Web SDK failed to bootstrap",errorCode:500026,errorMessage:"Web SDK failed to bootstrap: "+(l.message||l)}),e(),[3,7];case 7:return[2]}})})},e.prototype.syncCanaryWithSSO=function(){var e=this,t=this.getStorage().getItem(window.gigya.canary.config.cookiesNames.isCanary),i=this.getStorage().getItem(window.gigya.canary.config.cookiesNames.version);r.syncCanaryIndication({isCanary:t,canaryVersion:i,callback:function(n){n&&0===n.errorCode&&(n.isCanary&&n.isCanary!==t&&e.getStorage().setItem(window.gigya.canary.config.cookiesNames.isCanary,n.isCanary),n.canaryVersion&&n.canaryVersion!==i&&e.getStorage().setItem(window.gigya.canary.config.cookiesNames.version,n.canaryVersion))}})},e.prototype.createApiService=function(e){return n.__awaiter(this,void 0,void 0,function(){var t,i,o,r,a,s,g,d;return n.__generator(this,function(n){switch(n.label){case 0:return t=window.gigya.thisScript.globalConf.storageDomainOverride||"cdns."+window.gigya.dataCenter+"."+window.gigya.defaultApiDomain,i=window.gigya.thisScript.protocol,o=window.gigya.logger.configKey+"="+encodeURIComponent(JSON.stringify(window.gigya.logger.getConfig())),r=i+"://"+t+"/gs/webSdk/Api.aspx?apiKey="+encodeURIComponent(window.gigya.thisScript.APIKey)+"&version="+window.gigya.build.version+"#origin="+document.location.href+"&"+o,window.gigya.logger.info("opening api frame"),a=new c.ServiceProxy(r),window.gigya.logger.info("creating api service"),[4,a.init()];case 1:return s=n.sent(),window.gigya.partnerSettings.plugins.apiDomain=s.apiDomain,window.gigya._.getApiDomain=window.gigya._.apiDomainFactory(s.apiDomain,window.gigya.defaultApiDomain),g=window.gigya._.Uri.parse(s.apiDomain),window.gigya.logger.info("api domain is: "+g),window.gigya.logger.info("api domain is "+(s.isGroupApiDomain?"":"not ")+"group domain"),d="false"===window.gigya.thisScript.URLParams.bootstrap,g.isBaseOf(r)&&!d?(window.gigya.logger.info("api domain is gigya's so keep working with frame"),[2,a.wrapWith(u.ApiService)]):(window.gigya.logger.info("closing api frame"),a.stop(!0),d?e=!0:s.hasGroupApiDomainChanged&&(e=!1),window.gigya.logger.info("create and work with api service from top frame"),[2,new u.ApiService(window.gigya.thisScript.APIKey,e,{originDomain:location.href,isGroupApiDomain:s.isGroupApiDomain,getApiDomain:window.gigya._.getApiDomain,isApiDomainFirstParty:!0,hasGroupApiDomainChanged:!1})])}})})},e.prototype.isSessionValid=function(e,t){void 0===e&&(e={}),o.setFromGAC(e,function(){if(t){var i=null!=o.get(e.APIKey)||null!=e.oauth_token;t(i)}})},e.prototype.registerForNamespaceEvents=function(e){},e.prototype.onPluginEvent=function(e){},e.prototype.onJSLog=function(e,t){},e.prototype.sendRequest=function(e,t,i,n){var o=this;void 0===n&&(n={}),this.beforeRequest(e,t,n);var r=new a.ApiRequest(e,t,function(e){!function(e,t){o.afterResponse(r,e,function(){"function"==typeof t&&t(window.gigya.utils.object.clone(e,!0))})}(e,i)},n);r.send(),window.gigya._.logoutMethods[e]&&window.gigya._.logoutBehaviour.logoutBeforeServerResponse&&this.clearSession(t)},e.prototype.clearSession=function(e,t){o.remove(e.APIKey),t&&t()},e.prototype.setGltexpFromSSO=function(e){return void 0===e&&(e=window.gigya.thisScript.APIKey),window.gigya.partnerSettings.ssoKey&&!o.isValidGltExp()?new gigya.Promise(function(e){r.getLoginTokenExp({callback:function(t){var i=!1;t&&0==t.errorCode&&t.gltexp&&o.isValidGltExp(t.gltexp)&&(o.setGltexp(t.gltexp),i=!0),e(i)}})}):gigya.Promise.resolve(!1)},e.prototype.sendOauthRequest=function(e,t,i,n){var o=this;this.beforeRequest(e,t,n);var r="https://"+window.gigya._.getApiDomain("socialize"),a=new s.OauthRequest("",r,e,t,function(e){o.afterResponse(a,e,function(e){"0"!=e.errorCode?i(e):o._apiService.bootstrap().then(function(t){o.setGmidTicket(t.ticketInfo),i(e)})})},n);a.send()},e.prototype.beforeRequest=function(e,t,i){void 0===i&&(i={}),(i.clearSession||i.clearSessionCondition&&i.clearSessionCondition(t))&&(window.gigya.logger.info("clearing session before request for "+e),o.remove(t.APIKey))},e.prototype.afterResponse=function(e,t,i){return n.__awaiter(this,void 0,void 0,function(){var o=this;return n.__generator(this,function(n){switch(n.label){case 0:return"Missing cookie"!=t.errorDetails?[3,2]:(window.gigya.logger.info("missing cookie error - forcing bootstrap"),[4,this._apiService.bootstrap(!0)]);case 1:return n.sent(),window.gigya.logger.info("resending request"),e.send(),[2];case 2:this.handleTokenResponse(e,t,function(){o.logoutSsoIfNeeded(e,t,function(){i(t)})}),n.label=3;case 3:return[2]}})})},e.prototype.onSDKEvent=function(e){},e.prototype.getTokenParam=function(e,t){return o.getTokenParam(e,t)},e.prototype.checkReturnFromURL=function(){var e=window.gigya.utils.URL.getParamsFromURL(document.location.href);e.gig_events&&0==e.errorCode&&null!=o.get()&&(window.gigya.logger.info("returned from redirection with error code"),r.setGroupTokenFromResponse(o.get(),e.expires_in,function(t){var i=e.gig_events.split(",");-1!==window.gigya.utils.array.indexOf(i,"accounts.login")?window.gigya.accounts.getAccountInfo({extraProfileFields:"samlData",include:window.gigya.utils.stringUtils.mergeCommaSeparatedValues("profile,data,userinfo",window.gigya.thisScript.globalConf.include),callback:function(e){var t={errorCode:0,eventName:"accounts.login"};if(window.gigya.utils.object.extractProperties(e,t,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data|id_token"),window.gigya.events.global.dispatchWhenHandlerAdded(t),-1!==window.gigya.utils.array.indexOf(i,"socialize.login")){var n=window.gigya._.addUserInfoToEvent(e,{errorCode:0,eventName:"socialize.login"},!0);window.gigya.events.global.dispatchWhenHandlerAdded(n)}}}):window.gigya.socialize.getUserInfo({signIDs:!0,extraFields:"samlData",callback:function(e){for(var t=0;t<i.length;t++){var n=window.gigya._.addUserInfoToEvent(e,{errorCode:0,eventName:i[t]},!0);window.gigya.events.global.dispatchWhenHandlerAdded(n)}}})}))},e.prototype.setNewLoginTokenFromResponse=function(e,t,i){return n.__awaiter(this,void 0,void 0,function(){var a,s,c;return n.__generator(this,function(n){switch(n.label){case 0:return(a=t.sessionInfo?t.sessionInfo.login_token:t.login_token)?this.isFakeToken(a)?(window.gigya.logger.info("fake login token returned (no gmid) - forcing bootstrap"),[4,this._apiService.bootstrap(!0)]):[3,2]:[3,3];case 1:return n.sent(),window.gigya.logger.info("resending the login request"),e.send(),[2];case 2:return s=null!=t.sessionInfo?t.sessionInfo.expires_in:t.expires_in,c=e.params.sessionExpiration,(!s||0==s)&&c<0&&(s=window.gigya.utils.cookie.getInfiniteExpirationTimeInSeconds()),o.set(e.params.APIKey,a,s,c),this.getStorage().removeItem("gltexp_"+e.params.APIKey),window.gigya.reports.trackAddressBarShares(),r.setGroupTokenFromResponse(a,s,i),[3,4];case 3:i(),n.label=4;case 4:return[2]}})})},e.prototype.isFakeToken=function(e){return"ffs"==e.split(".")[1]},e.prototype.onInvalidTokenResponse=function(e,t){var i=this;e.paramsLoginToken?t():r.getGroupToken({callback:function(n){n&&n.login_token&&n.login_token.split("|")[0]!==e.sentLoginToken&&!e.paramsLoginToken?i._apiService.bootstrap().then(function(t){o.setFromSsoResponse(n,e.params.APIKey),e.params.login_token=void 0,e.send()},function(e){}):(o.remove(e.params.APIKey),e.settings.requiresSession()?t():(delete e.params.login_token,delete e.sentLoginToken,e.send(t)))}})},e.prototype.handleTokenResponse=function(e,t,i){var n=this;if(403030==(t=window.gigya.utils.object.clone(t)).errorCode){if(this.shouldWaitForService(e,t))return}else 409012==t.errorCode&&(this._gmidTicket=null,window.gigya.utils.localStorage.removeItem("_gig_gmidt"));e.sentLoginToken&&window.gigya._.logoutMethods[e.methodName]&&0==t.errorCode&&t.logoutActiveSession&&this.clearSession(e.params),window.gigya.partnerSettings.ssoKey&&e.sentLoginToken&&0==t.errorCode&&e.params.loginTokenExp&&r.setLoginTokenExp({loginTokenExp:e.params.loginTokenExp}),this.setNewLoginTokenFromResponse(e,t,function(){e.sentLoginToken&&403005==t.errorCode?n.onInvalidTokenResponse(e,i):i()})},e.prototype.logoutSsoIfNeeded=function(e,t,i){var n=this;window.gigya.partnerSettings.ssoKey&&window.gigya._.logoutMethods[e.methodName]&&0==t.errorCode&&t.logoutActiveSession&&document.location.href!=window.gigya.partnerSettings.ssoLogoutUrl?r.logout({callback:function(o){var r;void 0!==e.params.sustainLogoutURLs&&(r=!e.params.sustainLogoutURLs),n.loadLogoutUrls(o.logoutURLs,i,{UID:t.UID,UIDSignature:t.UIDSignature,signatureTimestamp:t.signatureTimestamp},r)}}):i()},e.prototype.loadLogoutUrls=function(e,t,i,n){for(var o=0,r=e?e.split(","):[],a=function(){++o>r.length&&t()},s=0;s<r.length;s++)if(r[s]){var c=window.gigya.utils.URL.addParamsToURL(r[s],i);this.loadLogoutUrl(c,a,n)}else a();a()},e.prototype.loadLogoutUrl=function(e,t,i){void 0===i&&(i=5e3);var n=document.createElement("iframe");n.src=e,n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px";var o=!1,r=function(){o=!0,!1!==i&&n.parentElement.removeChild(n),t()};window.setTimeout(function(){o||r()},i),n.onload=function(){r()},window.gigya.utils.DOM.appendToBody(n)},e.prototype.shouldWaitForService=function(e,t){return!!e.params.retryPossible&&(e.params.retryPossible=!1,window.gigya.external.facebook.runWhenLoaded(function(){e.send()}),!0)},e.prototype.getGmidTicket=function(){return this._gmidTicket&&this.refreshGmidTicket(),this._gmidTicket},e.prototype.refreshGmidTicket=function(){var e=this;this._apiService.getGmidTicket(!0).then(function(t){return e.setGmidTicket(t)})},e.prototype.setGmidTicket=function(e){var t=this;if(e&&e.gmidTicket){window.gigya.logger.info("set gmidTicket (set auto-refresh)"),this._gmidTicket=e.gmidTicket;var i=this.calculateGmidTicketNextRun(e.expirationTime);setTimeout(function(){return t.refreshGmidTicket()},i)}else window.gigya.logger.info("clean gmidTicket"),delete this._gmidTicket},e.prototype.calculateGmidTicketNextRun=function(e){return new Date(e).getTime()-(new Date).getTime()},e}();t.WebAdapter=d},3:function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:!0});var LocalInfo_1=__webpack_require__(1);function serialize(e,t,i,n,o){if(void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===n&&(n=0),void 0===o&&(o=20),LocalInfo_1.localInfo.isIE8){if(n||(n=0),n>o)return"[Too deep]";var r="",a="",s="";if(i){s="\t",a="\n";for(var c=0;c<n+1;c++)r+=s}var u=typeof e;if("function"==u)return u.toString();if("object"!=u||null===e)return"string"==u&&(e='"'+e.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'"'),String(e);var g,d,l=[],f=e&&e.constructor==Array;if(f)for(c=0;c<e.length;c++)u=typeof(d=e[c]),null==d||"undefined"==u?d="":"string"==u?d='"'+d.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'"':"function"==u?d=t?"Function":"":d.parentNode&&d.innerHTML?d="HTMLElement":d.constructor==Date?d="":"object"==u&&null!==d&&(d=serialize(d,t,i,n+1)),""!=String(d)&&l.push(r+s+String(d));else for(g in e)u=typeof(d=e[g]),null==d||"undefined"==u?d=String(d):"string"==u?d='"'+d.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'"':"function"==u?d=t?"Function":"":d.parentNode&&d.innerHTML?d="HTMLElement":d.constructor==Date?d="":"object"==u&&null!==d&&(d=a+serialize(d,t,i,n+1)),""!=String(d)&&l.push(r+s+'"'+g.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'":'+String(d));return a+r+(f?"[":"{")+a+l.join(","+a)+a+r+(f?"]":"}")}return window.JSON.stringify(e)}function deserialize(json,defaultValue,scope){if(!json||!json.replace(/^\s+|\s+$/g,""))return defaultValue||{};try{var keys=[],values=[];if(scope)for(var key in scope)keys.push(key),values.push(scope[key]);var fn=eval("(function("+keys.join(",")+") { return "+json.trim()+"; })");return fn.apply(void 0,values)}catch(e){return console.warn("Error deserializing JavaScript",e),defaultValue||{}}}function parse(e,t){if(LocalInfo_1.localInfo.isIE8)return deserialize(e,t);try{return window.JSON.parse(e)}catch(e){return t||{}}}exports.serialize=serialize,exports.deserialize=deserialize,exports.parse=parse},35:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o="apiDomain",r=function(){function e(e,t,i){void 0===e&&(e=window.gigya.partnerSettings.ssoKey),void 0===t&&(t=window.gigya.utils.localStorage.initializeAdapter(window.gigya.utils.localStorage.CookieStorageAdapter)),void 0===i&&(i=n.localInfo.pageDomain),this._ssoKey=e,this._storage=t,this._pageDomain=i,this._cookieName=o+"_"+this._ssoKey}return e.prototype.get=function(){return this._ssoKey?this._storage.getItem(this._cookieName):void 0},e.prototype.set=function(e){this._ssoKey&&(window.gigya.logger.info("setting as group api domain for "+this._ssoKey),this._storage.removeItem(this._cookieName),this._storage.setItem(this._cookieName,e,void 0,this._pageDomain))},e}();t.GroupApiDomainService=r},4:function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:!0});var DOMUtils=__webpack_require__(6),cdn_1=__webpack_require__(8),LocalInfo_1=__webpack_require__(1);function callFunction(name,arParams){var fn=eval(name),arParts=name.split(".");arParts.splice(arParts.length-1,1);var scope=eval(arParts.join("."));fn.apply(scope,arParams)}function invokeOnPageLoad(e,t){if(!document.readyState&&document.body||"complete"===document.readyState||!t&&"interactive"===document.readyState&&document.body)e();else{var i=!1,n=function(){i||(i=!0,e())};window.setTimeout(n,2e4),DOMUtils.addEventListener(window,"load",n),DOMUtils.addEventListener(document,"DOMContentLoaded",n)}}function createAlias(e,t){for(var i=e.split("."),n=window,o=0;o<i.length-1;o++){var r=i[o];n[r]||(n[r]={}),n=n[r]}n[i[i.length-1]]=t}function debounce(e,t){var i=void 0;return function(){void 0!==i&&clearTimeout(i),i=setTimeout(function(){i=void 0,e()},t)}}function addSrcToIFrameIfNeeded(e,t){void 0===t&&(t=cdn_1.getCdnResource("/")),(LocalInfo_1.localInfo.isIOSWebView||LocalInfo_1.localInfo.isIOS&&LocalInfo_1.localInfo.isWeChat)&&e.setAttribute("src",t)}exports.callFunction=callFunction,exports.invokeOnPageLoad=invokeOnPageLoad,exports.createAlias=createAlias,exports.debounce=debounce,exports.addSrcToIFrameIfNeeded=addSrcToIFrameIfNeeded},49:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getParentUrl=function(e,t){return void 0===e&&(e=window),void 0===t&&(t=document),e.location!=e.parent.location?t.referrer:t.location.href},t.getBodyElement=function(e){return void 0===e&&(e=document),new gigya.Promise(function(t){e.body?t(e.body):e.addEventListener("DOMContentLoaded",function(){return t(e.body)})})},t.validateOrigin=function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())},t.createIframe=function(e){void 0===e&&(e=document);var t=e.createElement("iframe");return t.style.position="absolute",t.style.height="0px",t.style.width="0px",t.style.display="none",t};var i=1;t.generateId=function(){return String(i++)},t.getAllClassMethodsNames=function(e){var t=[],i=function(e){return!!e.prototype}(e)?e.prototype:e;do{try{var n=Object.getOwnPropertyNames(i).map(function(e){return e.toString()}).sort().filter(function(e,n,o){return"function"==typeof i[e]&&"constructor"!==e&&(0==n||e!==o[n-1])&&-1===t.indexOf(e)});t=t.concat(n)}catch(e){for(var o=Object.getOwnPropertyNames(i).map(function(e){return e.toString()}).sort(),r=(n=[],0);r<o.length;r++){var a=o[r];"function"!=typeof i[a]||"constructor"===a||0!=r&&a===o[r-1]||-1!==t.indexOf(a)||n.push(a)}t=t.concat(n)}}while((i=Object.getPrototypeOf(i))&&Object.getPrototypeOf(i));return t}},58:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isSignalRequest=function(e){return Boolean(e.signal)}},59:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(35);t.TokenKeys={GMID:"gig_gmid",UCID:"gig_ucid",GMID_TICKET:"gmidTicket",GMID_TICKET_EXPIRATION_TIME:"gmidTicketExpiration"};var r=function(){function e(e,t,i,n,r,a){void 0===n&&(n=new o.GroupApiDomainService),void 0===r&&(r=window.gigya.JsonpRequest),this._apiKey=e,this._hasGmid=t,this._domainResolver=i,this._groupApiDomainService=n,this._requestClass=r,a&&(this._storage=a)}return e.prototype.getApiDomain=function(e){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){return[2,this._domainResolver.getApiDomain(e)]})})},e.prototype.bootstrap=function(e){return void 0===e&&(e=!1),n.__awaiter(this,void 0,void 0,function(){var t,i,o,r;return n.__generator(this,function(n){switch(n.label){case 0:return t=window.gigya.logger.group("bootstrap api service"),this._storage?[3,2]:(window.gigya.logger.debug("init storage"),i=this,[4,new gigya.Promise(function(e){window.gigya.utils.localStorage.waitForService(function(t){e(t)})})]);case 1:i._storage=n.sent(),n.label=2;case 2:return!this._hasGmid||e?[3,3]:(window.gigya.logger.info("already has gmid"),[3,7]);case 3:return window.gigya.logger.info(this._hasGmid?"forcing bootstrap":"no gmid set"),this.canSaveGmidAsCookie()?(window.gigya.logger.info("save gmid as cookie"),[4,this.sendRequest({methodName:"accounts.webSdkBootstrap",params:{apiKey:this._apiKey}})]):[3,5];case 4:if(0!=(o=n.sent()).errorCode)throw window.gigya.logger.error("error bootstrapping sdk",{type:"bootstrap failed",scope:"ApiService.bootstrap",res:o}),"error bootstrapping sdk\n"+JSON.stringify(o,null,4);return[3,7];case 5:return window.gigya.logger.info("save gmid in storage"),[4,this.setupWithStorage()];case 6:n.sent(),this._useStorage=!0,n.label=7;case 7:return this._useStorage?[4,this.getGmidTicket()]:[3,9];case 8:return r=n.sent(),[3,10];case 9:this.cleanStorage(),n.label=10;case 10:return t.end(),[2,{ticketInfo:r}]}})})},e.prototype.setGroupApiDomain=function(e){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){return window.gigya._.getBaseDomain(window.gigya.partnerSettings.baseDomains,this._domainResolver.originDomain,["gigya.com","gigya-api.cn",window.gigya.defaultApiDomain])===window.gigya.defaultApiDomain&&this._groupApiDomainService.set(e),[2]})})},e.prototype.canSaveGmidAsCookie=function(){return this._domainResolver.isApiDomainFirstParty||window.gigya.utils.cookie.canSaveCookie()},e.prototype.sendRequest=function(e){var i=this;return new gigya.Promise(function(n,o){if(!e){var r="ApiService: request data must has methodName and params";return window.gigya.logger.error(r),o(r)}var a=e.methodName,s=window.gigya.utils.object.clone(e.params,!0,!0);s.pageURL=i._domainResolver.originDomain,i._useStorage&&(s.gmid=i._storage.getItem(t.TokenKeys.GMID),s.ucid=i._storage.getItem(t.TokenKeys.UCID)),i.getApiDomain(a).then(function(t){new i._requestClass("https://"+t,a,s,function(e){var t=window.gigya.utils.JSON.serialize(e);window.gigya.utils.JSON.deserialize(t,void 0)||(e={errorCode:400004,errorMessage:"Invalid parameter format.\nOne of the parameters of this request has been set with a value which is not in the expected format."}),n(e)},e.settings).send()})})},e.prototype.setupWithStorage=function(){return n.__awaiter(this,void 0,void 0,function(){var e,i,o,r;return n.__generator(this,function(n){switch(n.label){case 0:return e=Boolean(this._storage.getItem(t.TokenKeys.GMID)),i=parseInt(this._storage.getItem(t.TokenKeys.GMID_TICKET_EXPIRATION_TIME)),e?[3,2]:(window.gigya.logger.info("getting gmid by endpoint"),[4,this.getIds()]);case 1:if(!(o=n.sent()).gcid||!o.ucid)throw"ApiService getIDs: the request to the endpoint failed";return window.gigya.logger.info("setting gmid in storage"),this._storage.setItem(t.TokenKeys.GMID,o.gcid),this._storage.setItem(t.TokenKeys.UCID,o.ucid),r=this.createTicketResponse(o.gmidTicket),this.updateGmidTicket(r),[3,3];case 2:window.gigya.utils.validation.isLaterThanNow(i)?window.gigya.logger.info("already has gmid in storage"):this.refreshGmidTicketFromServer(),n.label=3;case 3:return[2]}})})},e.prototype.getGmidTicket=function(e){return void 0===e&&(e=!1),n.__awaiter(this,void 0,void 0,function(){var i,o;return n.__generator(this,function(n){switch(n.label){case 0:return(i=this._storage.getItem(t.TokenKeys.GMID_TICKET))||e?[3,1]:[2,void 0];case 1:return o=parseInt(this._storage.getItem(t.TokenKeys.GMID_TICKET_EXPIRATION_TIME)),!e&&i&&window.gigya.utils.validation.isLaterThanNow(o)?[2,{gmidTicket:i,expirationTime:parseInt(this._storage.getItem(t.TokenKeys.GMID_TICKET_EXPIRATION_TIME))}]:[3,2];case 2:return this.deleteGmidTicket(),[4,this.refreshGmidTicketFromServer()];case 3:return[2,n.sent()]}})})},e.prototype.refreshGmidTicketFromServer=function(){return n.__awaiter(this,void 0,void 0,function(){var e;return n.__generator(this,function(i){switch(i.label){case 0:return window.gigya.logger.info("refreshing gmid ticket"),[4,this.createGmidTicket(this._storage.getItem(t.TokenKeys.GMID))];case 1:return(e=i.sent())&&e.gmidTicket&&this.updateGmidTicket(e),[2,e]}})})},e.prototype.updateGmidTicket=function(e){window.gigya.logger.info("updating gmid ticket",e),this._storage.setItem(t.TokenKeys.GMID_TICKET,e.gmidTicket),this._storage.setItem(t.TokenKeys.GMID_TICKET_EXPIRATION_TIME,String(e.expirationTime))},e.prototype.deleteGmidTicket=function(){this._storage.removeItem(t.TokenKeys.GMID_TICKET),this._storage.removeItem(t.TokenKeys.GMID_TICKET_EXPIRATION_TIME)},e.prototype.cleanStorage=function(){this._storage.removeItem(t.TokenKeys.GMID),this._storage.removeItem(t.TokenKeys.UCID),this.deleteGmidTicket()},e.prototype.getIds=function(){return this.sendRequest({methodName:"socialize.getIDs",params:{APIKey:this._apiKey,includeTicket:!0}})},e.prototype.createGmidTicket=function(e,t){var i=this;void 0===t&&(t=window.gigya.partnerSettings.gmidTicketExpiration||3600);var n={apiKey:this._apiKey,expires:t};return e&&(n.gmid=e),this.sendRequest({methodName:"socialize.getGmidTicket",params:n}).then(function(e){if(e&&e.gmidTicket)return i.createTicketResponse(e.gmidTicket);window.gigya.logger.error("Failed to establish gmidTicket",{response:JSON.stringify(e),method:"socialize.getGmidTicket"}),i.deleteGmidTicket()})},e.prototype.createTicketResponse=function(e){var t=new Date;return t.setHours(t.getHours()+1),{gmidTicket:e,expirationTime:t.getTime()}},e}();t.ApiService=r},6:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(19),r=i(4);t._popupContainers=[],t._pseudoContainers=[];var a=999999999,s=null;function c(){return++a}function u(e,t,i){e&&i&&(e.addEventListener?e.addEventListener(t,i,!0):e.attachEvent("on"+t,i))}function g(e,t,i){i&&(e.removeEventListener?e.removeEventListener(t,i,!0):e.detachEvent("on"+t,i))}function d(){s&&(g(window,"hashchange",s),s=null,window.location.hash=window.location.hash.replace("|gigyaMobileDialog",""))}function l(e,t){void 0===t&&(t=window.document),t.body&&(t.body.insertBefore&&t.body.firstChild?t.body.insertBefore(e,t.body.firstChild):t.body.appendChild(e))}function f(e){var t=[];return"string"==typeof e.className&&(t=e.className.split(" ")),t}function p(e,t){if(!e)return!1;if(!t)return!0;if(!e.className)return!1;for(var i=!1,n=f(e),o=0;o<n.length;o++)if(n[o]===t){i=!0;break}return i}t.getNextZIndex=c,t.getGigyaScriptElement=function(e){for(var t,i=document.getElementsByTagName("script"),n=/\/\/cdn(s)?\.(ru1\.)?gigya.com/,o=i.length-1;o>=0;o--){var r=i[o],a=r.src.toLowerCase();if(""!==a&&(n.test(a)||a.indexOf("?apikey=")>-1)&&(0===e.length||e.some(function(e){return a.indexOf(e)>-1}))){t=r;break}}return t},t.dispatch=function(e,t){var i;try{i=new Event(t)}catch(e){(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,{})}e.dispatchEvent(i)},t.addButtonSubmitListener=function(e,t,i,n){void 0===i&&(i="click"),e&&(e.setAttribute("role","button"),"-1"!=e.getAttribute("tabindex")&&e.setAttribute("tabindex","0"),u(e,i,function(e){return t(e)}),u(e,"keydown",function(e){13==(e.which||e.keyCode)&&(e.preventDefault(),t(e))}))},t.addEventListener=u,t.removeEventListener=g,t.disableDefaultEventHandling=function(e){e.preventDefault?e.preventDefault():window.event&&(window.event.returnValue=!1)},t.addDialogBackListener=function(e){d(),s=function(t){t&&t.newURL&&-1==t.newURL.indexOf("|gigyaMobileDialog")&&(e(t),d())},window.setTimeout(function(){-1==window.location.hash.indexOf("|gigyaMobileDialog")&&(window.location.hash=window.location.hash+"|gigyaMobileDialog"),u(window,"hashchange",s)},50)},t._removeDialogBackListener=d,t.appendToBody=l,t.removeElement=function(e){e&&e.parentElement&&e.parentElement.removeChild(e)},t.isChildOf=function(e,t){for(var i=e.parentNode;i;){if(t==i)return!0;i=i.parentNode}return!1},t.isVisible=function(e){for(;e;){var t=getComputedStyle(e);if("none"===t.display||"hidden"===t.visibility)return!1;e=e.parentElement}return!0},t.getCenteredDivID=function(e){return"gig_"+n.localInfo.initTime.getTime().toString()+"_"+e},t.createElementWithAttributes=function(e,t){var i=document.createElement(e);if(t)for(var n in t)i[n]=t[n];return i},t.createTopLevelDiv=function(e){var t=document.createElement("div");return null!=t.style.zIndex&&(t.style.zIndex=""+c()),t.innerHTML="",e&&(t.id=e),document.body&&(document.body.insertBefore&&document.body.firstChild?document.body.insertBefore(t,document.body.firstChild):document.body.appendChild&&document.body.appendChild(t)),t},t.hideByID=function(e){var t=document.getElementById(e);t&&(t.style.display="none")},t.showByID=function(e){var t=document.getElementById(e);t&&(t.style.display=n.localInfo.isIE6?"TD"==t.tagName?"table-cell":"TR"==t.tagName?"":"TABLE"==t.tagName?"":"block":"")},t.clearByID=function(e){try{var t=document.getElementById(e);null!=t&&(t.innerHTML="")}catch(e){}},t.getHTMLSize=function(e,t){var i=document.createElement("div");i.style.position="absolute",i.style.left="-1000px",i.innerHTML=e,t.appendChild(i);var n=i.offsetWidth,o=i.offsetHeight;return i.parentNode.removeChild(i),{w:n,h:o}},t.getElementsByClass=function(e,t,i){if(!e)return[];var n=[];i&&p(e,t)&&n.push(e);for(var o=e.getElementsByTagName("*"),r=0;r<o.length;r++)p(o[r],t)&&n.push(o[r]);return n||[]},t.getElementsByAttribute=function(e,t,i,n){for(var o=[],r=e.getElementsByTagName(t),a=0;a<r.length;a++)r[a].getAttribute(i)==n&&o.push(r[a]);return o},t.getElementPosition=function(e){if(!e)return{left:0,top:0,bottom:0,right:0};var t=e.getBoundingClientRect(),i=o.getScroll(),n=t.left+i.left,r=t.top+i.top;return{left:n,top:r,right:n+t.width,bottom:r+t.height}},t.addClassToElement=function(e,t){if(e){var i=e.className?f(e):[],n=i.length,o=t.split(" ");for(var r in o){var a=!1;if(!o[r])break;for(var s in i)if(i[s]===o[r]){a=!0;break}a||i.push(o[r])}i.length!==n&&(e.className=i.join(" "))}},t.removeClassFromElement=function(e,t,i){if(void 0===i&&(i=!1),e){for(var n=f(e),o=n.length-1;o>=0;o--)(n[o]===t||i&&-1!==n[o].indexOf(t))&&n.splice(o,1);e.className=n.join(" ")}},t.getClassNames=f,t.isElementClass=p,t.cancelEvent=function(e){e&&("cancelable"in e?e.preventDefault():e.returnValue=!1)},t.createElement=function(e,t){var i=document.createElement("div");return t=t||"",i.innerHTML="<"+e+' name="'+t+'" id="'+t+'"></'+e+">",i.firstChild},t.setSize=function(e,t,i,n){if(null!=e&&null!=e.style){if(t){var r=(t=""+t).indexOf("%")>0;if(!isNaN(t)||r){var a=""+(r?t:t+"px");e.style.width!=a&&(e.style.width=a)}}if(i){var s=(i=""+i).indexOf("%")>0;if(!isNaN(t)||s){var u=""+(s?i:i+"px");e.style.height!==u&&(e.style.height=u)}}if(n&&t&&i){(null==e.style.zIndex||n)&&(e.style.zIndex=""+c());var g=o.getInnerSize(),d=o.getScroll(),l=d.top,f=d.left;e.style.top=Math.max(0,l+Math.floor((g.h-i)/2))+"px",e.style.left=Math.max(0,f+Math.floor((g.w-t)/2))+"px",e.style.visibility=""}}},t.createHiddenIframe=function(e){var t=document.createElement("iframe");return t.src=e,t.style.width="30px",t.style.height="10px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",document.body?l(t):r.invokeOnPageLoad(function(){l(t)}),t},t.attributeEncode=function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},t.manipulateAttributes=function(e,t,i,n){void 0===n&&(n=function(){return!0}),e.forEach(function(e){e.attributes&&Array.prototype.slice.call(e.attributes).forEach(function(e){n(e)&&(e.value=e.value.replace(t,i))})})},t.textNodesUnder=function(e){for(var t,i=[],n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);t=n.nextNode();)i.push(t);return i},t.isHTMLBooleanAttribute=function(e){return["autocomplete","autofocus","checked","disabled","hidden","readonly","required","selected"].indexOf(e)>-1},t.isBelongToGigyaFieldset=function e(t){return!(!t||t instanceof HTMLFormElement)&&(!!p(t.parentElement,"gigya-fieldset")||e(t.parentElement))}},60:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n,o=i(0),r=i(61),a={};function s(e){return void 0===e&&(e=window.gigya.thisScript.APIKey),window.gigya.utils.cookie.get("gltexp_"+e)}function c(e){return void 0===e&&(e=window.gigya.thisScript.APIKey),e?"glt_"+e:"_gig_lt"}function u(e){void 0===e&&(e=window.gigya.thisScript.APIKey);var t=window.gigya.utils.cookie.get(c(e));return t?t.split("|")[0]:null}function g(e,t,i,o){window.gigya.utils.localStorage.removeItem("gigyaSettings"),window.gigya.logger.info("setting a new login token"),e||(e=window.gigya.thisScript.APIKey),e?(window.gigya.utils.cookie.set("glt_"+e,t,i),window.gigya.utils.cookie.remove("gac_"+e)):window.gigya.utils.cookie.set("_gig_lt",t,i),n=o}function d(e){var t=this;void 0===e&&(e={}),window.gigya.utils.queue.hold("verifyLogin","API"),window.gigya.accounts.verifyLogin({ignoreApiQueue:!0,suppressLoginEvent:!0,include:window.gigya.utils.stringUtils.mergeCommaSeparatedValues("profile,data",window.gigya.thisScript.globalConf.include),extraProfileFields:"samlData",callback:function(i){window.gigya.utils.queue.release("verifyLogin","API"),0==i.errorCode&&(window.gigya._.apiAdapters.isSessionFromSso=!0);var n=i.source;window.gigya.events.global.dispatchWhenHandlerAdded({eventName:"socialize.login"},null,function(t,o){window.gigya.socialize.getUserInfo({signIDs:!0,extraFields:"samlData",callback:function(r){t||(t={}),t=window.gigya.utils.object.merge([t,e]),0==i.errorCode&&0==r.errorCode?((t=window.gigya._.addUserInfoToEvent(r,{eventName:"login"},!0)).source=n,t.newUser=!1,t.provider="site",t.loginMode="standard",t.user&&(t.user.errorCode=r.errorCode,t.user.callId=r.callId)):t.cancel=!0,o(t)}})}),window.gigya.events.global.dispatchWhenHandlerAdded({eventName:"accounts.login"},null,function(n,r){return o.__awaiter(t,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return n||(n={}),n=window.gigya.utils.object.merge([n,e]),0!=i.errorCode?[3,3]:(n.eventName="accounts.login",i.UID?[3,2]:[4,new gigya.Promise(function(e){return window.gigya.accounts.getAccountInfo({callback:e,include:window.gigya.utils.stringUtils.mergeCommaSeparatedValues("profile,data",window.gigya.thisScript.globalConf.include)})})]);case 1:i=t.sent(),t.label=2;case 2:return window.gigya.utils.object.extractProperties(i,n,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data|dataCenter|id_token"),[3,4];case 3:n.cancel=!0,t.label=4;case 4:return r(n),[2]}})})})}})}function l(e){void 0===e&&(e=window.gigya.thisScript.APIKey),window.gigya.partnerSettings.ssoKey&&(window.gigya.logger.info("removing group login token"),r.removeGroupToken()),u(e)&&window.gigya.logger.info("removing login token"),window.gigya.utils.cookie.remove("glt_"+e),window.gigya.utils.cookie.remove("_gig_lt"),window.gigya.utils.cookie.remove("gltexp_"+e)}function f(){var e=window.gigya.utils.cookie.getDefaultDomain();return window.gigya.utils.stringUtils.endsWith(e,window.gigya.defaultApiDomain)}t.activeNamespaces={},t.isValidGltExp=function(e){return void 0===e&&(e=s()),!e||window.gigya.utils.gltexp.isValid(e)},t.getGltexpCookie=s,t.setGltexp=function(e,t){void 0===t&&(t=window.gigya.thisScript.APIKey),e&&!f()&&(window.gigya.utils.cookie.remove("gltexp_"+t),window.gigya.utils.cookie.set("gltexp_"+t,e))},t.get=u,t.set=g,t.getCurrentSessionExpiration=function(){return n},t.setFromGAC=function(e,t){if(window.gigya.thisScript.APIKey){var i=window.gigya.utils.cookie.get("gac_"+window.gigya.thisScript.APIKey);if(i&&!e.neverTryGAC){if('"'===i.charAt(0)&&'"'===i.charAt(i.length-1)&&(i=i.substring(1,i.length-1)),a[i])return void t();a[i]=!0,window.gigya.socialize.updateRefUID(),window.gigya.socialize.notifyLogin({ignoreApiQueue:!0,neverTryGAC:!0,authCode:i,APIKey:window.gigya.thisScript.APIKey,client_id:window.gigya.thisScript.APIKey},{callback:function(){window.gigya.utils.cookie.remove("gac_"+window.gigya.thisScript.APIKey),t(),window.gigya.socialize.refreshUI({neverTryGAC:!0})}})}else t()}else t()},t.setFromSsoResponse=function(e,t){if(void 0===t&&(t=window.gigya.thisScript.APIKey),e)switch(e.errorCode){case 403005:window.gigya.logger.info("no group session found"),l(t);break;case 403025:window.gigya.logger.info("existing group session was revoked"),l(t),window.gigya.events.global.dispatchWhenHandlerAdded({eventName:"accounts.logout"}),window.gigya.events.global.dispatchWhenHandlerAdded({eventName:"logout"});break;case 403032:case 0:if(!e.login_token)return;window.gigya.logger.info("new session from group");var i=void 0,n=void 0;if(e.groupContext&&(n=JSON.parse(e.groupContext)),!f()){i=e.gltexp?window.gigya.utils.cookie.getInfiniteExpirationTimeInSeconds():e.expires_in,g(t,e.login_token,i);var o="gltexp_"+t;e.gltexp&&!window.gigya.utils.cookie.get(o)&&window.gigya.utils.cookie.set(o,e.gltexp)}d({expires_in:i,groupContext:n});break;default:throw window.gigya.logger.error("sso: unsupported response"),"gigya: unsupported response from sso"}},t.dispatchLoginEvent=d,t.remove=l,t.getTokenParam=function(e,t){var i=window.gigya.utils.cookie.get(c(e));if(i){var n=i.split("|");return n.length>1?window.gigya.utils.keyValue.deserialize(n[1])[t]:null}}},61:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=0;function n(e,n){if(window.gigya.partnerSettings.ssoKey){var o,r,a;o=n?window.gigya.utils.object.clone(n):{};var s=function(e){window.gigya.logger.debug("cleaning sso iframe"),r.parentNode.removeChild(r),clearTimeout(a),e&&(e.errorCode&&"string"==typeof e.errorCode&&(e.errorCode=Number(e.errorCode)),e.expires_in&&"string"==typeof e.expires_in&&(e.expires_in=Number(e.expires_in))),n&&n.callback&&n.callback(e)};o.m=e,o.d=window.gigya.localInfo.protocol+"://"+document.location.hostname,document.location.port&&(o.d+=":"+document.location.port),o.callbackID="gig_sso_cb"+(new Date).getTime()+"_"+i++,o.sAPIKey=window.gigya.thisScript.APIKey,o[window.gigya.logger.configKey]=JSON.stringify(window.gigya.logger.getConfig());var c=window.gigya.utils.keyValue.serialize(o),u=function(i){void 0===i&&(i=0),window.gigya.utils.xd.addMessageListener(o.callbackID,{},!1,s,window.gigya._.MessagingMethod.PostMessage),r=function(e){var t=document.createElement("iframe");window.gigya.localInfo.isIOS||window.gigya.localInfo.isIOSChrome||window.gigya.localInfo.isAndroid?(t.style.width="0px",t.style.height="0px",t.style.display="none"):(t.style.width="30px",t.style.height="10px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px");return t.id="gig_sso_"+e,window.gigya.utils.functions.addSrcToIFrameIfNeeded(t),t}(o.callbackID);var n=function(){a=setTimeout(function(){i<=0?window.gigya.logger.error("SSO Communication Timeout",{IE11PrivateMode:window.gigya.localInfo.isIE11&&!window.indexedDB,mode:e}):(window.gigya.utils.xd.removeMessageListener(o.callbackID),window.gigya.utils.DOM.removeElement(r),u(i-1))},t._requestTimeout);var s=window.gigya.utils.keyValue.serialize({APIKey:window.gigya.partnerSettings.ssoKey,ssoSegment:window.gigya.partnerSettings.ssoSegment||"",version:window.gigya.build.version,build:window.gigya.build.number||-1});r.src=window.gigya.thisScript.protocol+"://"+(window.gigya.thisScript.globalConf.storageDomainOverride||window.gigya._.getGigyaDomain("cdns"))+"/gs/sso.htm?"+s+"#"+c,window.gigya.utils.DOM.removeEventListener(r,"load",n)};window.gigya.utils.DOM.addEventListener(r,"load",n),window.gigya.logger.debug("opening sso iframe",o),document.body?window.gigya.utils.DOM.appendToBody(r):window.gigya.utils.functions.invokeOnPageLoad(function(){return window.gigya.utils.DOM.appendToBody(r)})};u(3)}else n&&n.callback&&n.callback({})}function o(e){e.gltexp||(e.gltexp=window.gigya.utils.cookie.get("gltexp_"+window.gigya.thisScript.APIKey)),n("setToken",e)}t._requestTimeout=3e3,t._request=n,t.getGroupToken=function(e){window.gigya.logger.info("trying to get sso group login token"),n("getToken",{callback:function(i){t._storedLoginTokenExp=i.gltexp,e&&e.callback&&e.callback(i)}})},t.setGroupTokenFromResponse=function(e,t,i){var n;if(0===(t="string"==typeof t&&t?Number(t):t))n=0;else{var r=void 0;r=t?1e3*Number(t):47304e7,n=Date.now()+r}o({lt:e,expiration:n,callback:i})},t.setGroupToken=o,t.logout=function(e){n("logout",e)},t.removeGroupToken=function(e){n("removeToken",e)},t.setLoginTokenExp=function(e,i){void 0===i&&(i=!0),i&&t._storedLoginTokenExp&&e.loginTokenExp===t._storedLoginTokenExp?e.callback&&e.callback({gltexp:t._storedLoginTokenExp}):(t._storedLoginTokenExp=e.loginTokenExp,n("setLoginTokenExp",e))},t.getLoginTokenExp=function(e){n("getLoginTokenExp",e)},t.checkTokenRenew=function(e){window.gigya.logger.info("verifying login token with sso group"),n("checkTokenRenew",e)},t.syncCanaryIndication=function(e){n("syncCanaryIndication",e)},t.setGroupContextCookie=function(e){n("setGroupContext",e)}},7:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(10),r=function(){function e(e,t){void 0===t&&(t=!0),this._anchor=document.createElement("a");var i="http:"==document.location.protocol?"http":"https";t&&-1===e.indexOf("://")&&"/"!==e.charAt(0)&&(e=i+"://"+e),this._anchor.href=e}return Object.defineProperty(e.prototype,"domain",{get:function(){return this._anchor.hostname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._anchor.pathname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"href",{get:function(){return this._anchor.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this._anchor.search.slice(1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this._anchor.hash.slice(1)},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this._anchor.href},e.prototype.addToSearch=function(e){for(var t in e){var i=e[t];if(("boolean"==typeof i||"number"==typeof i||"string"==typeof i)&&"eventName"!=t){var n=this._anchor.search?"&":"";this._anchor.search+=""+n+t+"="+encodeURIComponent(e[t])}}return this},e.prototype.fetch=function(e){return void 0===e&&(e=0),n.__awaiter(this,void 0,void 0,function(){var t,i;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,5,,8]),window.fetch?[4,this.browserFetch()]:[3,2];case 1:return t=n.sent(),[3,4];case 2:return[4,this.xhr()];case 3:t=n.sent(),n.label=4;case 4:return[2,t];case 5:if(i=n.sent(),e<=0)throw new Error("fetch failed: "+i);return[4,this.delay(1)];case 6:return n.sent(),[4,this.fetch(e-1)];case 7:return[2,n.sent()];case 8:return[2]}})})},e.prototype.isBaseOf=function(t){return e.parse(t).isIn(this)},e.prototype.isIn=function(t){return"string"==typeof t&&(t=e.parse(t)),(this.domain==t.domain||this.isSubDomainOf(t))&&(!t.path||0==this.path.indexOf(t.path))},e.prototype.isForSubDomains=function(){return 0==this.domain.indexOf(".")},e.prototype.isSubDomainOf=function(e){var t="";return e.isForSubDomains()||(t="."),t+=e.domain,o.endsWith(this.domain,t)},e.parse=function(t,i){if(void 0===i&&(i=!0),t)return new e(t,i)},e.prototype.browserFetch=function(){return n.__awaiter(this,void 0,void 0,function(){var e,t;return n.__generator(this,function(i){switch(i.label){case 0:return e=this.toString(),[4,window.fetch(e)];case 1:if(!(t=i.sent()).ok)throw new Error("fetch failed");return[2,t.json()]}})})},e.prototype.xhr=function(){var e=this.toString();return new gigya.Promise(function(t,i){var n=new XMLHttpRequest;n.open("GET",e),n.send(),n.onerror=i,n.onload=function(){if(4!==n.readyState||200!==n.status)return i("xhr failed - "+n.status+" - "+n.statusText);try{var e=JSON.parse(n.responseText);return t(e)}catch(e){return i(e)}}})},e.prototype.delay=function(e){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){return[2,new gigya.Promise(function(t){return setTimeout(t,e)})]})})},e}();t.Uri=r},78:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(49),r=i(58),a=function(){function e(e,t,i,a,s){var c=this;void 0===t&&(t=o.getParentUrl()),void 0===i&&(i=o.getAllClassMethodsNames(e)),void 0===a&&(a=window.parent),void 0===s&&(s=window),this._service=e,this.origin=t,this._allowedMethods=i,this._target=a,this._win=s,this.stopCancellers=[],this._listening=!1,this.onRequest=function(e){return n.__awaiter(c,void 0,void 0,function(){var t,i;return n.__generator(this,function(n){switch(n.label){case 0:if(!o.validateOrigin(this.origin,e.origin))return[3,7];t=JSON.parse(e.data),n.label=1;case 1:return n.trys.push([1,6,,7]),r.isSignalRequest(t)?[4,this.handleSignalRequest(t)]:[3,3];case 2:return n.sent(),[3,5];case 3:return[4,this.handleProxyRequest(t)];case 4:n.sent(),n.label=5;case 5:return[3,7];case 6:return i=n.sent(),this.postError({res:i.message||i,id:t.id}),[3,7];case 7:return[2]}})})}}return Object.defineProperty(e.prototype,"isListening",{get:function(){return this._listening},enumerable:!0,configurable:!0}),e.prototype.listen=function(e){var t=this;this.isListening||this._win.setTimeout(function(){t._win.addEventListener("message",t.onRequest,!0),t.postMessage({id:void 0,signal:"listening",res:e}),t._listening=!0},1)},e.prototype.stopListen=function(){this.isListening&&(this._win.removeEventListener("message",this.onRequest,!0),this._listening=!1)},e.prototype.handleSignalRequest=function(e){return n.__awaiter(this,void 0,void 0,function(){var t,i,o;return n.__generator(this,function(n){switch(n.label){case 0:switch(e.signal){case"stop":return[3,1]}return[3,7];case 1:return[4,this.getCancelResult()];case 2:return t=n.sent(),i=void 0,t?[3,5]:(this.stopListen(),o=void 0,this.onStop&&(o=this.onStop()).then?[4,o]:[3,4]);case 3:o=n.sent(),n.label=4;case 4:return i={id:e.id,signal:"stop",res:o},[3,6];case 5:i={id:e.id,signal:"error",res:t},n.label=6;case 6:return this.postMessage(i),[3,8];case 7:return[3,8];case 8:return[2]}})})},e.prototype.getCancelResult=function(){return n.__awaiter(this,void 0,void 0,function(){var e,t,i,o;return n.__generator(this,function(n){switch(n.label){case 0:e=0,t=this.stopCancellers,n.label=1;case 1:return e<t.length?(i=t[e],(o=i()).then?[4,o]:[3,3]):[3,5];case 2:o=n.sent(),n.label=3;case 3:if(o)return[2,o];n.label=4;case 4:return e++,[3,1];case 5:return[2,void 0]}})})},e.prototype.handleProxyRequest=function(e){return n.__awaiter(this,void 0,void 0,function(){var t;return n.__generator(this,function(i){switch(i.label){case 0:return this.validateRequest(e),[4,this.forwardToService(e)];case 1:return t=i.sent(),this.postMessage({id:e.id,res:t}),[2]}})})},e.prototype.validateRequest=function(e){if(!e.id||!e.methodName||this._allowedMethods.indexOf(e.methodName)<0)throw"proxy request in invalid format"},e.prototype.forwardToService=function(e){return n.__awaiter(this,void 0,void 0,function(){var t,i;return n.__generator(this,function(n){switch(n.label){case 0:return t=this._service[e.methodName],(i=t.apply(this._service,e.params))&&i.then?[4,i]:[3,2];case 1:i=n.sent(),n.label=2;case 2:return[2,i]}})})},e.prototype.postMessage=function(e){var t="object"==typeof e?JSON.stringify(e):e;this._target.postMessage(t,this.origin)},e.prototype.postError=function(e){e.signal="error",this.postMessage(e)},e}();t.ProxyListener=a},79:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(1);function o(e,t){if(!t&&e&&(t=e.context),t){var i=r[t];i&&i.handleResponse(e)}}t.callback=o;var r={},a="gigyaRequestForms_"+Date.now(),s=function(){function e(e,t,i,n,o,r){var a=this;void 0===o&&(o={}),void 0===r&&(r=function(e,t,i){var n=i.jsSdkRequestId;if(n)return n;if(i.disableCache||window.gigya.localInfo.isSafari||window.gigya.localInfo.isIE10&&e.indexOf("accounts.getAccountInfo")>-1)return"R"+(new Date).getTime()+"_"+Math.random();var o=window.gigya.utils.object.clone(t);for(var r in o)o.hasOwnProperty(r)&&(0!==r.indexOf("fb_")&&"source"!==r&&"sourceData"!==r||delete o[r]);return"R"+window.gigya.utils.object.getMurmurHash(Math.random().toString()+e+window.gigya.utils.object.getHash(o))}(t,i,o)),this.baseDomain=e,this.method=t,this.params=i,this.callback=n,this.settings=o,this.id=r,this.getUrl=function(){return a.baseDomain+"/"+a.method},this.ifrName="gigyaPostIframe_"+(new Date).getTime(),this.retry=0}return e.prototype.send=function(e){var t=this;if(!this.inProgress){r[this.id]=this,this.inProgress=!0,this.addDefaultParams();var i=window.gigya.utils.keyValue.serialize(this.params);if(e||!this.settings.cacheTimeout){var s=0;if(window.gigya.localInfo.isIE&&(s=2048),window.gigya._.Uri.parse(this.getUrl()).href.toLowerCase()===this.getUrl().toLowerCase()){var c=this.getUrl()+"?"+i;!n.localInfo.isOnLine()||c.length+s<=4096&&!this.settings.forcePost?window.gigya.utils.script.load(c,function(){o({context:t.id,errorCode:500026,errorMessage:"Network_error"})}):window.gigya.utils.functions.invokeOnPageLoad(function(){var e=document.getElementById(a);null==e&&((e=document.createElement("span")).id=a,e.style.display="none",window.gigya.utils.DOM.appendToBody(e));var i=t.getPostContainer();e.appendChild(i)})}else window.gigya.logger.warn("Aborting Request for "+this.method+". Path manipulation detected.")}else{var u=this.getCacheKey();window.gigya.utils.sessionCache.get(u,this.settings.cacheTimeout,function(e){e?(delete t.settings.cacheTimeout,o(e,t.id)):(t.inProgress=!1,t.send(!0))})}}},e.prototype.handleResponse=function(e){var t=this;if(this.settings.cacheTimeout&&window.gigya.utils.sessionCache.set(this.getCacheKey(),0==e.errorCode?e:null),null!=this.retryTimerID&&window.clearTimeout(this.retryTimerID),this.inProgress=!1,100001==e.errorCode){var i=this.getDataPendingTimeout(this.retry++);if(i>0)return void window.setTimeout(function(){t.send()},i)}else this.dispose(),this.callback(e)},e.prototype.addDefaultParams=function(){this.params.format="jsonp",this.params.callback="gigya.callback",this.params.context=this.id},e.prototype.getCacheKey=function(){return this.method+"_"+window.gigya.utils.keyValue.serialize(this.params)},e.prototype.createParamFormElements=function(){var e=document.createDocumentFragment();for(var t in this.params){var i=window.gigya.utils.DOM.createElementWithAttributes("textarea",{name:t,value:"object"==typeof this.params[t]?window.gigya.utils.URL.URLEncode(window.gigya.utils.JSON.serialize(this.params[t])):this.params[t]});e.appendChild(i)}return e},e.prototype.getPostContainer=function(){var e,t=this;if(!this.postContainerElem){e=document.createElement("span");var i,n=this.ifrName+"form",o=this.id,r=window.gigya.utils.DOM.createElementWithAttributes("form",{acceptCharset:"UTF-8",id:n,method:"post",action:this.getUrl()+"?context="+this.id+"&&saveResponseID="+this.id,target:this.ifrName}),a=window.gigya.utils.DOM.createElementWithAttributes("input",{type:"hidden",name:"utf8",value:"&#x2713;"}),s=window.gigya.utils.DOM.createElementWithAttributes("input",{type:"submit"});r.appendChild(this.createParamFormElements()),r.appendChild(a),r.appendChild(s),e.appendChild(r);var c=window.gigya.utils.DOM.createElement("iframe",this.ifrName);c.setAttribute("id",this.ifrName),window.gigya.utils.functions.addSrcToIFrameIfNeeded(c),window.gigya.utils.DOM.addEventListener(c,"load",function(){i?t.getSavedFormResponse(o):(window.setTimeout(function(){var e=document.getElementById(n);e&&e.submit()},10),i=!0)}),e.appendChild(c),this.postContainerElem=e}return e},e.prototype.getSavedFormResponse=function(t){var i=this;new e(this.baseDomain,"socialize.getSavedResponse",{APIKey:this.params.APIKey,saveResponseID:this.id,ucid:this.params.ucid,noAuth:!0,sdk:"js_"+window.gigya.build.version},function(e){i.handleResponse(e)},void 0,t).send()},e.prototype.getDataPendingTimeout=function(e){return e<=4?500:e<=8?1e3:e<=21?2e3:e<=39?5e3:-1},e.prototype.dispose=function(){delete r[this.id],this.postContainerElem&&window.gigya.utils.DOM.removeElement(this.postContainerElem),delete this.postContainerElem},e}();t.JsonpRequest=s},8:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=0;function n(e){var n=window.gigya.thisScript?window.gigya.thisScript.baseDomain:"",o=window.gigya.thisScript.protocol;if(!n||/cdns?\.gigya\.com$/.test(n)){var r=t.CDN_HOSTS[o];r.length<=i&&(i=0),n=r[i++]}return e&&0!==e.indexOf("/")&&(e="/"+e),o+"://"+n+(e||"")}t.CDN_HOSTS={http:["cdn.gigya.com","cdn1.gigya.com","cdn2.gigya.com","cdn3.gigya.com"],https:["cdns.gigya.com","cdns1.gigya.com","cdns2.gigya.com","cdns3.gigya.com"]},t.getCdnResource=n,t.getImgCdnResource=function(){return n("/gs/i/")}},80:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(60),o=5,r=function(){function e(e,t,i,n,r){void 0===n&&(n={}),void 0===r&&(r=o),this.baseUrl=e,this.methodName=t,this.params=i,this.settings=n,this._maxTries=r,this._tries=0,this.params.sdk="js_"+window.gigya.build.version}return e.prototype.getUrl=function(){return this.baseUrl+"/"+this.methodName},e.prototype.send=function(e){this._tries++,this._tries<=this._maxTries?this.sendAction():e&&e()},e.prototype.getAuthParams=function(){var e={};if(this.params.oauth_token)this.params.authMode="token";else if(!this.params.noAuth&&!this.params.regToken){var t=n.get(this.params.APIKey);if(t){this.sentLoginToken=t;var i=n.getGltexpCookie(this.params.APIKey);null!=i&&(e.loginTokenExp=i),e.login_token=t}e.authMode="cookie"}return delete this.params.noAuth,window.gigya.localInfo.isAndroidBrowser&&(delete this.params.login_token,delete this.params.loginTokenExp,delete this.params.authMode),e},e}();t.BaseRequest=r}});