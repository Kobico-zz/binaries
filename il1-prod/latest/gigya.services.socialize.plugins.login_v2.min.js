!function(i){var t={};function e(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return i[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=i,e.c=t,e.d=function(i,t,n){e.o(i,t)||Object.defineProperty(i,t,{enumerable:!0,get:n})},e.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.t=function(i,t){if(1&t&&(i=e(i)),8&t)return i;if(4&t&&"object"==typeof i&&i&&i.__esModule)return i;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var r in i)e.d(n,r,function(t){return i[t]}.bind(null,r));return n},e.n=function(i){var t=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(t,"a",t),t},e.o=function(i,t){return Object.prototype.hasOwnProperty.call(i,t)},e.p="",e(e.s=238)}({0:function(i,t,e){"use strict";e.r(t),function(i){e.d(t,"__extends",function(){return r}),e.d(t,"__assign",function(){return o}),e.d(t,"__rest",function(){return a}),e.d(t,"__decorate",function(){return s}),e.d(t,"__param",function(){return l}),e.d(t,"__metadata",function(){return g}),e.d(t,"__awaiter",function(){return d}),e.d(t,"__generator",function(){return u}),e.d(t,"__exportStar",function(){return p}),e.d(t,"__values",function(){return h}),e.d(t,"__read",function(){return c}),e.d(t,"__spread",function(){return m}),e.d(t,"__spreadArrays",function(){return f}),e.d(t,"__await",function(){return y}),e.d(t,"__asyncGenerator",function(){return w}),e.d(t,"__asyncDelegator",function(){return v}),e.d(t,"__asyncValues",function(){return b}),e.d(t,"__makeTemplateObject",function(){return C}),e.d(t,"__importStar",function(){return _}),e.d(t,"__importDefault",function(){return x});var n=function(i,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])})(i,t)};function r(i,t){function e(){this.constructor=i}n(i,t),i.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var o=function(){return(o=i||function(i){for(var t,e=1,n=arguments.length;e<n;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r]);return i}).apply(this,arguments)};function a(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]])}return e}function s(i,t,e,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,t,e,n);else for(var s=i.length-1;s>=0;s--)(r=i[s])&&(a=(o<3?r(a):o>3?r(t,e,a):r(t,e))||a);return o>3&&a&&Object.defineProperty(t,e,a),a}function l(i,t){return function(e,n){t(e,n,i)}}function g(i,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(i,t)}function d(i,t,e,n){return new(e||(e=gigya.Promise))(function(r,o){function a(i){try{l(n.next(i))}catch(i){o(i)}}function s(i){try{l(n.throw(i))}catch(i){o(i)}}function l(i){i.done?r(i.value):new e(function(t){t(i.value)}).then(a,s)}l((n=n.apply(i,t||[])).next())})}function u(i,t){var e,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(i,a)}catch(i){o=[6,i],n=0}finally{e=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function p(i,t){for(var e in i)t.hasOwnProperty(e)||(t[e]=i[e])}function h(i){var t="function"==typeof Symbol&&i[Symbol.iterator],e=0;return t?t.call(i):{next:function(){return i&&e>=i.length&&(i=void 0),{value:i&&i[e++],done:!i}}}}function c(i,t){var e="function"==typeof Symbol&&i[Symbol.iterator];if(!e)return i;var n,r,o=e.call(i),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(i){r={error:i}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return a}function m(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(c(arguments[t]));return i}function f(){for(var i=0,t=0,e=arguments.length;t<e;t++)i+=arguments[t].length;var n=Array(i),r=0;for(t=0;t<e;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)n[r]=o[a];return n}function y(i){return this instanceof y?(this.v=i,this):new y(i)}function w(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e.apply(i,t||[]),o=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(i){r[i]&&(n[i]=function(t){return new gigya.Promise(function(e,n){o.push([i,t,e,n])>1||s(i,t)})})}function s(i,t){try{(e=r[i](t)).value instanceof y?gigya.Promise.resolve(e.value.v).then(l,g):d(o[0][2],e)}catch(i){d(o[0][3],i)}var e}function l(i){s("next",i)}function g(i){s("throw",i)}function d(i,t){i(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function v(i){var t,e;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,r){t[n]=i[n]?function(t){return(e=!e)?{value:y(i[n](t)),done:"return"===n}:r?r(t):t}:r}}function b(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=i[Symbol.asyncIterator];return e?e.call(i):(i=h(i),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(e){t[e]=i[e]&&function(t){return new gigya.Promise(function(n,r){(function(i,t,e,n){gigya.Promise.resolve(n).then(function(t){i({value:t,done:e})},t)})(n,r,(t=i[e](t)).done,t.value)})}}}function C(i,t){return Object.defineProperty?Object.defineProperty(i,"raw",{value:t}):i.raw=t,i}function _(i){if(i&&i.__esModule)return i;var t={};if(null!=i)for(var e in i)Object.hasOwnProperty.call(i,e)&&(t[e]=i[e]);return t.default=i,t}function x(i){return i&&i.__esModule?i:{default:i}}}.call(this,e(0).__assign)},124:function(i,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonStyles={fulllogocolored:{ratio:2.6,base:"FullLogoColored/",ext:".png",noConnected:!0,minSize:15,maxSize:65},fulllogo:{ratio:2.6,base:"FullLogo/",ext:".png",noConnected:!0,minSize:15,maxSize:65},signinwith:{ratio:7.05,base:"SignInWith/",ext:".png",noLastLogin:!0,noConnected:!0,minSize:20,maxSize:60},standard:{ratio:1,base:"",ext:".png",minSize:15,maxSize:65}}},125:function(i,t,e){Object.defineProperty(t,"__esModule",{value:!0});var n=e(82),r=function(){function i(i,t){this.plugin=i,this.gridSize=t,this.template=i.getTemplates().footer,this.element=this.plugin.createElementFromHTMLString(this.template)}return i.prototype.getHtmlElement=function(){var i,t,e=this,n=new Array,r=this.plugin.getTemplates().footerDivider;if(this.plugin.showEdit&&(t=window.gigya.utils.templates.fill(this.plugin.getTemplates().footerEdit,{edit:this.plugin.getText("edit")}),n.length?i+=r+t:i=t,n.unshift(i)),this.plugin.showTerms&&(t=window.gigya.utils.templates.fill(this.plugin.getTemplates().footerTerms,{terms:this.plugin.getText("terms")}),n.length?i+=r+t:i=t,n.unshift(i)),n.length){var o="";if(window.gigya.utils.array.some(n,function(i){return i="<span>"+i+"</span>",window.gigya.utils.DOM.getHTMLSize(i,e.plugin.uiContainer).w<=e.gridSize.totalWidthIncludingPager&&(o=i,!0)}),o){var a=this.plugin.createElementFromHTMLString(o);if(this.element.appendChild(a),this.plugin.showEdit){var s=window.gigya.utils.DOM.getElementsByClass(a,"gigya-login-footer-edit-link")[0];window.gigya.utils.DOM.addEventListener(s,"click",function(){var i=window.gigya.utils.object.cloneParamsForPlugin(e.plugin.params);delete i.containerID,delete i.width,delete i.height,window.gigya.socialize.showEditConnectionsUI(i)})}}}return this.element},i.prototype.setShowWhatsThis=function(i){if(this.plugin.params.showWhatsThis&&-1==navigator.userAgent.toLowerCase().indexOf("iphone")){var t;this.plugin.getContainerDimensions();this.plugin.params.whatsThisText&&(t=this.plugin.params.whatsThisText),t||(t=this.plugin.pluginMode===n.PluginMode.Login?this.plugin.getText("you_can_use_your_account_from_one_of_these_services_to_sign_into_the_site"):this.plugin.getText("add_more_connections_to_your_account"));var e=window.gigya.utils.templates.fill(this.plugin.getTemplates().footerBrandWhatIsThis,{whatsthistext:window.gigya.utils.sanitize.sanitizeHTML(t)}),r=this.plugin.createElementFromHTMLString(e);this.plugin.uiContainer.appendChild(r);window.gigya.global._GetElementPos(this.plugin.uiContainer);r.style.zIndex=window.gigya.utils.DOM.getNextZIndex().toString(),window.gigya.utils.DOM.addEventListener(i,"mouseover",function(){r.style.visibility="visible"}),window.gigya.utils.DOM.addEventListener(i,"mouseout",function(){r.style.visibility="hidden"})}},i}();t.FooterContainer=r},126:function(i,t){function e(i){return{getStyleClass:function(){return"gigya-login-providers-arrow-marker-"+i},getStyleName:function(t){return i}}}Object.defineProperty(t,"__esModule",{value:!0}),t.PagingButtonStyles={arrows:e("arrows"),newArrows:e("newArrows"),floating:e("floating"),auto:{getStyleClass:function(i){var e=t.PagingButtonStyles.auto.getStyleName(i);return t.PagingButtonStyles[e].getStyleClass(i)},getStyleName:function(i){return i.isMobileUI&&(!i.lastPolledWidth||i.lastPolledWidth<500)?"floating":"newArrows"}}}},127:function(i,t,e){Object.defineProperty(t,"__esModule",{value:!0});var n=e(0),r=e(81),o=e(82),a=e(128),s=function(i){function t(t,e){var n=i.call(this)||this;return n.plugin=t,n.gridSize=e,n.ElementsSelector={main:"gigya-login-providers",container:"gigya-login-providers-container",arrowLeft:"gigya-login-providers-arrow-left",arrowRight:"gigya-login-providers-arrow-right",providersContainer:"gigya-login-providers-list-container",connectedProviderClass:"gigya-provider-connected",providerNameAttr:"data-gigya-provider"},n.template=n.plugin.getTemplates().login,n}return n.__extends(t,i),t.prototype.getHtmlElement=function(){this._mainElement=this.plugin.createElementFromHTMLString(this.template),this._containerElement=this.getChildByCssClass(this._mainElement,this.ElementsSelector.container),this._providersContainer=this.getChildByCssClass(this._containerElement,this.ElementsSelector.providersContainer),this._loginContainers=this.createContainers(),this._containerElement.style.width="100%",this._providersContainer.style.width=this.gridSize.width+"px";for(var i=0;i<this._loginContainers.length;i++)this._providersContainer.appendChild(this._loginContainers[i]);return this.setPaging(this._loginContainers.length),this.attachEvents(),this._mainElement},t.prototype.setPaging=function(i){var t=i>1;if(this._leftArrow=this.getChildByCssClass(this._containerElement,this.ElementsSelector.arrowLeft),this._rightArrow=this.getChildByCssClass(this._containerElement,this.ElementsSelector.arrowRight),t){window.gigya.utils.DOM.addClassToElement(this._leftArrow,"gigya-login-providers-arrow-disabled"),"floating"==this.plugin.pagingButtonStyle.getStyleName(this.plugin)&&window.gigya.utils.DOM.addClassToElement(this._leftArrow,"gigya-login-providers-arrow-marker-floating-disabled");var e=this.plugin.pagingButtonStyle.getStyleClass(this.plugin);window.gigya.utils.DOM.addClassToElement(this._leftArrow,e),window.gigya.utils.DOM.addClassToElement(this._rightArrow,e);var n=a.Utils.createElementFromHTMLString(window.gigya.utils.templates.fill(this.plugin.getTemplates().arrow,{tabindex:this.plugin.params.tabIndex||"-1",label:""})),r=a.Utils.createElementFromHTMLString(window.gigya.utils.templates.fill(this.plugin.getTemplates().arrow,{tabindex:this.plugin.params.tabIndex||"-1",label:""}));this._leftArrow.appendChild(n),this._rightArrow.appendChild(r),this.setNavigationArrowState(o.NavigationDirection.Prev,!0)}else window.gigya.utils.DOM.addClassToElement(this._leftArrow,"no-arrows"),window.gigya.utils.DOM.addClassToElement(this._rightArrow,"no-arrows"),this._containerElement.style.width=this._providersContainer.style.width;this._loginContainers[0]&&this._loginContainers[0].setAttribute("class","gigya-active")},t.prototype.expandInContainerAfterRender=function(){var i=Math.ceil((this._containerElement.offsetWidth-this._providersContainer.offsetWidth)/2);i<0&&(i=0);var t=i+"px";this._leftArrow.style.width=this._rightArrow.style.width=t,this._leftArrow.style.maxWidth=this._rightArrow.style.maxWidth=t,this._mainElement.style.height=Math.max(this._containerElement.offsetHeight,this.plugin.buttonHeight+2*this.plugin.pluginConfig.rowSpacing)+"px"},t.prototype.createContainers=function(){for(var i=[],t=this.getProvidersGroups(this.gridSize),e=0;e<t.length;e++){for(var n=this.getProvidersCells(t[e]),r=this.getGroupProvidersRows(n,this.gridSize.rows,this.gridSize.columns),o=this.createElemnetBlock("div",{class:"gigya-login-providers-list"}),a=document.createElement("div"),s=0;s<r.length;s++){for(var l=this.createElemnetBlock("div",{class:"gigya-login-provider-row"}),g=0;g<r[s].length;g++){var d=r[s][g];l.appendChild(d),l.style.height=d.style.height,r[s][r[s].length-1].style["margin-right"]="0"}o.appendChild(l)}a.appendChild(o),i.push(a)}return i},t.prototype.attachEvents=function(){var i=this;if(this._loginContainers.length>1){var t=this.getChildByCssClass(this._containerElement,this.ElementsSelector.arrowLeft),e=this.getChildByCssClass(this._containerElement,this.ElementsSelector.arrowRight);window.gigya.utils.DOM.addEventListener(e,"click",function(t){i.changeNavigationState(o.NavigationDirection.Next),window.gigya.utils.DOM.disableDefaultEventHandling(t)}),window.gigya.utils.DOM.addEventListener(t,"click",function(t){i.changeNavigationState(o.NavigationDirection.Prev),window.gigya.utils.DOM.disableDefaultEventHandling(t)})}for(var n=window.gigya.utils.DOM.getElementsByClass(this.getChildByCssClass(this._containerElement,this.ElementsSelector.providersContainer),"gigya-login-provider"),r=0;r<n.length;r++){var a=n[r],s=a.getAttribute(this.ElementsSelector.providerNameAttr),l=window.gigya._.providers.getProviderByName(s,this.plugin.providers),g=this.plugin.getIdentityInfoForProvider(l);this.isConnectionCompleted(g)?window.gigya.utils.DOM.addClassToElement(a.querySelector("button.tabbing-button"),this.ElementsSelector.connectedProviderClass):window.gigya.utils.DOM.addEventListener(a,"click",function(t){i.plugin.onProviderClickHandler(t)})}},t.prototype.getProvidersCells=function(i){for(var t=[],e=0;e<i.length;e++){var n=i[e],r=this.plugin.getIdentityInfoForProvider(n),o=this.getProviderImage(n,r),a=this.createElemnetBlock("span",{"data-gigya-provider":n.name,style:["width:",this.plugin.buttonWidth,"px;","height:",this.plugin.buttonHeight,"px;","margin-right:",this.plugin.pluginConfig.rowSpacing,"px;"].join(""),class:"gigya-login-provider",gigid:n.name}),s=this.plugin.createElementFromHTMLString(o);s.setAttribute("tabindex",this.plugin.params.tabIndex||"-1"),this.plugin.showTooltips&&s.setAttribute("title",n.displayName),a.appendChild(s),t.push(a)}return t},t.prototype.getProviderImage=function(i,t){var e=window.devicePixelRatio>1,n=i.buttonData,r=(i.imgName?i.imgName:i.name)+"-";if(e&&"linkedin"==i.name&&this.plugin.params.buttonSize>=15&&this.plugin.params.buttonSize<=25){var a=i.name+"_"+2*this.plugin.params.buttonSize+(i.name==this.plugin.lastLoginProvider?"_LastLogin":"")+".png",s=this.plugin.imageBase+"/"+this.plugin.stylePreset.base+"/"+a;return window.gigya.utils.templates.fill(this.plugin.getTemplates().providerImage,{buttonWidth:this.plugin.buttonWidth,buttonHeight:this.plugin.buttonHeight,imageUrl:s})}if(!(i.isCustomProvider&&n&&n.iconURL))return this.isConnectionCompleted(t)?r+="connected_":this.plugin.lastLoginIndication!=o.LastLoginIndecation.border||i.name!=this.plugin.lastLoginProvider||this.plugin.stylePreset.noLastLogin||(r+="lastlogin_"),this.plugin.spriteRenderer.loginIcons.getHTML(r,!1,this.plugin.stylePreset.dontUseSprites,void 0,i.displayName);var l=n.iconURL;if(this.isConnectionCompleted(t))n.connectedIconURL&&(l=n.connectedIconURL);else{var g=i.name||"",d=this.plugin.lastLoginProvider||"";g.toLowerCase()==d.toLowerCase()&&(l=n.lastLoginIconURL)}return l?window.gigya.utils.templates.fill(this.plugin.getTemplates().providerImage,{buttonWidth:this.plugin.buttonWidth,buttonHeight:this.plugin.buttonHeight,imageUrl:l}):""},t.prototype.isConnectionCompleted=function(i){return this.plugin.pluginMode===o.PluginMode.AddConnection&&i.isConnected&&i.hasAllRequiredPermissions&&!this.plugin.stylePreset.noConnected},t.prototype.getGroupProvidersRows=function(i,t,e){for(var n=[],r=0;r<t;r++){for(var o=[],a=0;a<e;a++){var s=r*e+a;if(s>=i.length)break;o.push(i[s])}n.push(o)}for(r=0;r<n.length;r++){var l=n[r].length;l>0&&window.gigya.utils.DOM.addClassToElement(n[r][l-1],"gigya-login-provider-last")}return n},t.prototype.getProvidersGroups=function(i){var t=i.rows*i.columns,e=0===this.plugin.providers.length?0:this.plugin.providers.length/t;if(!isFinite(e))throw new Error("error: infinite loop.");for(var n=[],r=0;r<e;r++){for(var o=[],a=0;a<t;a++){var s=r*t+a;if(s>=this.plugin.providers.length)break;o.push(this.plugin.providers[s])}n.push(o)}return n},t.prototype.createElemnetBlock=function(i,t,e){var n=document.createElement(i);for(var r in t)n.setAttribute(r,t[r]);return n},t.prototype.changeNavigationState=function(i){var t=i==o.NavigationDirection.Next?1:-1,e=window.gigya.utils.array.firstIndex(this._loginContainers,function(i){return window.gigya.utils.DOM.isElementClass(i,"gigya-active")})+t,n=window.gigya.utils.array.first(this._loginContainers,function(i){return window.gigya.utils.DOM.isElementClass(i,"gigya-active")}),r=this._loginContainers[e];if(r){window.gigya.utils.DOM.removeClassFromElement(n,"gigya-active"),window.gigya.utils.DOM.addClassToElement(r,"gigya-active");var a=!this._loginContainers[e+1],s=!this._loginContainers[e-1];this.setNavigationArrowState(o.NavigationDirection.Next,a),this.setNavigationArrowState(o.NavigationDirection.Prev,s),r.querySelector("button").focus()}},t.prototype.setNavigationArrowState=function(i,t){var e=i==o.NavigationDirection.Next?"right":"left",n=window.gigya.utils.DOM.getElementsByClass(this._containerElement,"gigya-login-providers-arrow-"+e)[0],r=n.querySelector(".gigya-login-providers-arrow-marker");t?(r.setAttribute("disabled","disabled"),window.gigya.utils.DOM.addClassToElement(n,"gigya-login-providers-arrow-disabled"),"floating"==this.plugin.pagingButtonStyle.getStyleName(this.plugin)&&window.gigya.utils.DOM.addClassToElement(n,"gigya-login-providers-arrow-marker-floating-disabled")):(r.removeAttribute("disabled"),window.gigya.utils.DOM.removeClassFromElement(n,"gigya-login-providers-arrow-disabled"),"floating"==this.plugin.pagingButtonStyle.getStyleName(this.plugin)&&window.gigya.utils.DOM.removeClassFromElement(n,"gigya-login-providers-arrow-marker-floating-disabled"))},t}(r.ContainerBase);t.LoginContainer=s},128:function(i,t){Object.defineProperty(t,"__esModule",{value:!0});var e=function(){function i(){}return i.createElementFromHTMLString=function(i){var t=document.createElement("span");return t.innerHTML=i,t.childNodes[0]},i}();t.Utils=e},129:function(i,t,e){Object.defineProperty(t,"__esModule",{value:!0});var n=e(0),r=function(i){function t(t){var e=i.call(this)||this;e.plugin=t,e.ElementsSelector={container:"gigya-login-welcome-container",user:"gigya-login-welcome-user",provider:"gigya-login-welcome-provider",signinlink:"gigya-login-welcome-signin-link",greeting:"gigya-login-welcome-greeting"};var n=e.plugin.getTemplates().welcome;return e.element=e.plugin.createElementFromHTMLString(n),e}return n.__extends(t,i),t.prototype.getHtmlElement=function(){var i=this.getWelcomeButtonSized();return this.setGreetingElement(),this.setSignInUsingAnotherAccount(),this.setProviderCellElement(i.imageSize,i.buttonSize),this.element},t.prototype.getWelcomeButtonSized=function(){var i=this.plugin.params.lastLoginButtonSize?this.plugin.params.lastLoginButtonSize:this.plugin.pluginConfig.defaultlastLoginButtonSize;i=parseInt(i.toString());var t=5*Math.floor(i/5);return t<25&&(t=20),t>35&&(t=40),{buttonSize:i,imageSize:t}},t.prototype.setProviderCellElement=function(i,t){var e=this,n=this.getChildByCssClass(this.element,this.ElementsSelector.provider),r=this.plugin.stylePreset,o='<img data-gigya-provider="'+this.plugin.lastLoginProviderObject.name+'" alt="'+this.plugin.lastLoginProviderObject.displayName+'" height="'+t+'" width="'+Math.ceil(this.plugin.params.lastLoginButtonSize*r.ratio)+'" src="'+this.plugin.imageBase+"/SignInWith/"+this.plugin.lastLoginProviderObject.name+"_"+i+'.png" aria-hidden="true">',a=this.plugin.createElemnetBlock("div",{"data-gigya-provider":this.plugin.lastLoginProviderObject.name,style:["width:",Math.ceil(i*this.plugin.stylePreset.ratio),"px;","height:",i,"px;"].join(""),class:"gigya-login-provider",title:this.plugin.lastLoginProviderObject.name,role:"button","aria-label":this.plugin.lastLoginProviderObject.name,tabindex:0});a.innerHTML=o,n.appendChild(a);var s=window.gigya.utils.DOM.getHTMLSize(this.element.innerHTML,this.plugin.uiContainer).h,l=this.plugin.params.heightNum-(s+(this.plugin.isFooterEnabled?this.plugin.pluginConfig.footerHeight:0)+(this.plugin.isHeaderEnabled?this.plugin.pluginConfig.headerHeight:0)),g=Math.ceil(l/2),d=Math.floor(l/2);a.style.marginBottom=g+"px",a.style.marginTop=d+"px",window.gigya.utils.DOM.addEventListener(a,"click",function(i){e.plugin.onProviderClickHandler(i)}),window.gigya.utils.DOM.addEventListener(a,"keydown",function(i){var t=i.keyCode||i.which;32!=t&&13!=t||e.plugin.onProviderClickHandler(i)})},t.prototype.setGreetingElement=function(){var i=this,t=this.getChildByCssClass(this.element,this.ElementsSelector.user),e=window.gigya.utils.sanitize.sanitizeHTML(this.plugin.getLastLoginName()),n=window.gigya.utils.templates.fill(this.plugin.getTemplates().welcomeGreeting,{welcomeBack:this.plugin.getText("welcome_back_user","%user",e)}),r=window.gigya.utils.templates.fill(this.plugin.getTemplates().welcomeBubble,{notYou:this.plugin.getText("not_you","%user",e)});t.innerHTML=n;var o=this.plugin.createElementFromHTMLString(r);this.getChildByCssClass(this.element,this.ElementsSelector.greeting).appendChild(o);var a=this.plugin.getContainerDimensions(),s=window.gigya.utils.DOM.getHTMLSize(t.innerHTML,this.plugin.uiContainer),l=window.gigya.utils.DOM.getHTMLSize(o.outerHTML,this.plugin.uiContainer);s.w>a.w&&(s.w-l.w<a.w?o.style.display="none":t.innerHTML=window.gigya.utils.templates.fill(this.plugin.getTemplates().welcomeGreeting,{welcomeBack:this.plugin.getText("welcome_back_user","%user","")}));for(var g=this.getChildByCssClass(this.element,"gigya-login-welcome-bubble"),d=[this.getChildByCssClass(this.element,this.ElementsSelector.signinlink),g],u=0;u<d.length;u++)window.gigya.utils.DOM.addEventListener(d[u],"click",function(){i.onNotYouClickHandler()});window.gigya.utils.DOM.addEventListener(g,"keydown",function(t){var e=t.keyCode||t.which;32!=e&&13!=e||(t.preventDefault(),t.stopPropagation(),i.onNotYouClickHandler())})},t.prototype.setSignInUsingAnotherAccount=function(){var i=this.getChildByCssClass(this.element,this.ElementsSelector.signinlink),t=window.gigya.utils.templates.fill(this.plugin.getTemplates().welcomeSignInLink,{singInUsingDifferentNetwork:this.plugin.getText("sign_in_using_a_different_network")});i.innerHTML=t},t.prototype.onNotYouClickHandler=function(){window.gigya.utils.cookie.remove("_gig_llp"),window.gigya.utils.cookie.remove("_gig_llu"),window.gigya.thisScript.globalConf.alwaysForceAuthentication=!0,this.plugin.showWelcome=!1,this.plugin.render();var i=this.plugin.container.querySelector(".gigya-login-providers-list button");i&&i.focus()},t}(e(81).ContainerBase);t.WelcomeContainer=r},238:function(i,t,e){(function(i){Object.defineProperty(t,"__esModule",{value:!0});var n=e(124),r=e(81),o=e(125),a=e(239),s=e(240),l=e(257),g=e(127),d=e(82),u=e(126),p=e(128),h=e(129);window.gigya._||(window.gigya._={}),window.gigya._.plugins||(window.gigya._.plugins={}),window.gigya._.plugins.login_v2||(window.gigya._.plugins.login_v2={}),window.gigya._.plugins.resources||(window.gigya._.plugins.resources={}),window.gigya._.plugins.resources.html||(window.gigya._.plugins.resources.html={}),window.gigya._.plugins.resources.html.login_v2||(window.gigya._.plugins.resources.html.login_v2={}),window.gigya._.plugins.resources.css||(window.gigya._.plugins.resources.css={}),window.gigya._.plugins.resources.css.login_v2||(window.gigya._.plugins.resources.css.login_v2={}),i(window.gigya._.plugins.login_v2,n,r,o,a,g,d,u,p,h),i(window.gigya._.plugins.resources.html.login_v2,s),i(window.gigya._.plugins.resources.css.login_v2,l),window.gigya._.UI.attachPlugin(d.LoginPlugin,"socialize",d.LoginPlugin.pluginName,"showLoginUI_v2"),window.gigya._.UI.attachPlugin(d.LoginPlugin,"socialize",d.LoginPlugin.pluginName,"showAddConnectionsUI_v2")}).call(this,e(0).__assign)},239:function(i,t){Object.defineProperty(t,"__esModule",{value:!0})},240:function(i,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.arrow=e(241),t.footer=e(242),t.footerBrandLong=e(243),t.footerBrandShort=e(244),t.footerBrandWhatIsThis=e(245),t.footerDivider=e(246),t.footerEdit=e(247),t.footerTerms=e(248),t.header=e(249),t.login=e(250),t.providerImage=e(251),t.uiContainer=e(252),t.welcome=e(253),t.welcomeBubble=e(254),t.welcomeGreeting=e(255),t.welcomeSignInLink=e(256)},241:function(i,t){i.exports='<div class="gigya-wrapper-login-providers-arrow-marker">\r\n    <button type="button"\r\n            tabindex="${tabindex}"\r\n            class="tabbing-button gigya-login-providers-arrow-marker"\r\n            aria-label="${label}">\r\n    </button>\r\n</div>\r\n'},242:function(i,t){i.exports='<div class="gigya-login-footer"></div>'},243:function(i,t){i.exports='<a class="gigya-login-footer-social-by" href="https://www.gigya.com" target="_blank">${socialBy} <img alt="Gigya" class="gigya-logo" src="${logoUrl}" /></a>\r\n'},244:function(i,t){i.exports='<a class="gigya-login-footer-social-by" href="https://www.gigya.com" target="_blank"><img alt="Gigya" class="gigya-logo" src="${logoUrl}" /></a>\r\n'},245:function(i,t){i.exports='<table cellpadding="0" cellspacing="0" class="gigya-login-footer-whatsthis" role="presentation">\r\n    <tbody>\r\n        <tr>\r\n            <td style="vertical-align: middle; text-align: center"><span>$whatsthistext</span></td>\r\n        </tr>\r\n    </tbody>\r\n</table>\r\n'},246:function(i,t){i.exports='<span class="gigya-login-footer-divider">|</span>'},247:function(i,t){i.exports='<span class="gigya-login-footer-edit-link">$edit</span>\r\n'},248:function(i,t){i.exports='<a class="gigya-login-footer-terms" target="_blank" href="https://www.gigya.com/terms-of-service/">$terms</a>\r\n'},249:function(i,t){i.exports='<div class="gigya-login-header">${headerText}</div>\r\n'},25:function(i,t){var e;Object.defineProperty(t,"__esModule",{value:!0}),function(i){i[i._undefined=0]="_undefined",i[i.none=1]="none",i[i.legacy=2]="legacy",i[i.modern=3]="modern"}(e=t.PluginStyle||(t.PluginStyle={})),t.getPluginStyleClass=function(i){return"gigya-style-"+e[i]}},250:function(i,t){i.exports='<div class="gigya-login-providers">\r\n    <table class="gigya-login-providers-container" role="presentation">\r\n        <tr>\r\n            <td class="gigya-login-providers-arrow-left"></td>\r\n            <td class="gigya-login-providers-list-container"></td>\r\n            <td class="gigya-login-providers-arrow-right"></td>\r\n        </tr>\r\n    </table>\r\n</div>'},251:function(i,t){i.exports='<img style="width:${buttonWidth}px;height:${buttonHeight}px;" src="${imageUrl}" />\r\n'},252:function(i,t){i.exports='<div id="${containerID}_uiContainer"></div>'},253:function(i,t){i.exports='<div class="gigya-login-welcome-container">\r\n    <div class="gigya-login-welcome-user"></div>\r\n    <div class="gigya-login-welcome-provider"></div>\r\n    <div class="gigya-login-welcome-signin-link"></div>\r\n</div>\r\n'},254:function(i,t){i.exports='<div class="gigya-login-welcome-bubble" tabindex="0" role="button">\r\n    <div class="gigya-login-welcome-bubble-left"></div>\r\n    <div class="gigya-login-welcome-bubble-center">\r\n        <div class="gigya-login-welcome-bubble-text">$notYou</div>\r\n    </div>\r\n    <div class="gigya-login-welcome-bubble-right"></div>\r\n</div>\r\n'},255:function(i,t){i.exports='<div class="gigya-login-welcome-greeting">$welcomeBack</div>\r\n'},256:function(i,t){i.exports='<a class="gigya-link" href="javascript:void(0);">$singInUsingDifferentNetwork</a>\r\n'},257:function(i,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.ie8patch=e(258),t.iePatch=e(259),t.main=e(260)},258:function(i,t){i.exports="\r\n.gigya-login-providers-arrow-left,\r\n.gigya-login-providers-list-container,\r\n.gigya-login-providers-arrow-right {\r\n    display:inline;\r\n}\r\n\r\n.gigya-login-provider div {\r\n    display: -ms-inline-grid;\r\n}\r\n\r\n\r\ntable.gigya-login-providers-container {\r\n    top: 0px;\r\n}"},259:function(i,t){i.exports=".gigya-login-footer {\r\n    position: relative;\r\n    top: -9px;\r\n}\r\n"},260:function(i,t){i.exports="\r\n.gigya-link {\r\n    line-height: normal;\r\n    cursor: pointer;\r\n    font-family: arial;\r\n    font-size: 11px;\r\n    color: #0086f1;\r\n}\r\n\r\n.gigya-login {\r\n    margin: 10px;\r\n    overflow: auto;\r\n}\r\n\r\n\r\n.gigya-login-providers-container {\r\n    display: block;\r\n    margin: 0 auto;\r\n    background-color: transparent;\r\n    border-collapse: collapse;\r\n    white-space: nowrap;\r\n    border: none;\r\n    vertical-align: middle;\r\n\r\n    position:relative;\r\n    top: 50%;\r\n    transform: translateY(-50%);\r\n    -ms-transform: translateY(-50%);\r\n    -webkit-transform: translateY(-50%);\r\n    -moz-transform: translateY(-50%);\r\n\r\n    -webkit-touch-callout: none;\r\n    -webkit-user-select: none;\r\n    -khtml-user-select: none;\r\n    -moz-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n}\r\n.gigya-login-providers-container,\r\n.gigya-login-providers-container tr,\r\n.gigya-login-providers-container td,\r\n.gigya-login-providers-container th {\r\n    vertical-align: middle;\r\n}\r\n\r\n.gigya-login-providers-list {\r\n    display: none;\r\n}\r\n\r\n.gigya-active .gigya-login-providers-list {\r\n    display: block;\r\n}\r\n\r\n.gigya-login-provider-row {\r\n    display: block;\r\n    clear: both;\r\n    float: none;\r\n    margin: 0;\r\n    padding: 2.5px 0;\r\n    line-height:18px;\r\n}\r\n\r\n.gigya-login-provider {\r\n    cursor: pointer;\r\n    margin-right: 5px;\r\n}\r\n\r\n.gigya-login-provider div {\r\n    display: inline-block;\r\n}\r\n\r\n.gigya-login-provider-last {\r\n    margin-right: 0;\r\n}\r\n\r\n.gigya-login-provider img {\r\n    vertical-align: baseline;\r\n}\r\n\r\n.gigya-login-providers-container div,\r\n.gigya-login-providers-container span {\r\n    margin: 0;\r\n}\r\n\r\n.gigya-login-providers-list-container {\r\n    vertical-align: top;\r\n    text-align: center;\r\n    width: 100%;\r\n}\r\n\r\n.gigya-login-providers-list-container tbody,\r\n.gigya-login-providers-list-container tr {\r\n    width: 100%;\r\n}\r\n\r\n.gigya-login-providers-arrow-left,\r\n.gigya-login-providers-arrow-right {\r\n    vertical-align: middle;\r\n    cursor: pointer;\r\n    box-sizing: border-box;\r\n    -webkit-tap-highlight-color:transparent;\r\n}\r\n\r\n.gigya-login-providers-arrow-left button,\r\n.gigya-login-providers-arrow-right button {\r\n    cursor: inherit;\r\n}\r\n\r\n.gigya-login-providers-arrow-left.no-arrows,\r\n.gigya-login-providers-arrow-right.no-arrows {\r\n    display: none;\r\n}\r\n\r\n.gigya-login-providers-arrow-marker-floating-disabled {\r\n    visibility: hidden;\r\n}\r\n\r\n.gigya-login-providers-arrow-left div .gigya-login-providers-arrow-marker {\r\n    background-repeat: no-repeat;\r\n    float: right;\r\n    margin-right: 17px;\r\n}\r\n\r\n.gigya-login-providers-arrow-right div .gigya-login-providers-arrow-marker {\r\n    background-repeat: no-repeat;\r\n    float: left;\r\n    margin-left: 17px;\r\n}\r\n\r\n.gigya-login-providers-arrow-left.gigya-login-providers-arrow-marker-floating div .gigya-login-providers-arrow-marker {\r\n    height: 70px;\r\n    width: 42px;\r\n    padding: 0px;\r\n    margin: 0px;\r\n    position: relative;\r\n    float: left;\r\n    background-image: url('$scriptBase/paging/touch_button_left.png');\r\n}\r\n\r\n.gigya-login-providers-arrow-right.gigya-login-providers-arrow-marker-floating div .gigya-login-providers-arrow-marker {\r\n    background-repeat: no-repeat;\r\n    height: 70px;\r\n    width: 42px;\r\n    padding: 0px;\r\n    margin: 0px;\r\n    position: relative;\r\n    float: right;\r\n    background-image: url('$scriptBase/paging/touch_button_right.png');\r\n}\r\n\r\n.gigya-login-providers-arrow-left.gigya-login-providers-arrow-marker-arrows div .gigya-login-providers-arrow-marker {\r\n    height: 14px;\r\n    width: 8px;\r\n    background-image: url('$scriptBase/paging/navigation_arrow_left.png');\r\n    margin-right: 5px;\r\n}\r\n\r\n.gigya-login-providers-arrow-right.gigya-login-providers-arrow-marker-arrows div .gigya-login-providers-arrow-marker {\r\n    height: 14px;\r\n    width: 8px;\r\n    background-image: url('$scriptBase/paging/navigation_arrow_right.png');\r\n    margin-left: 5px;\r\n}\r\n\r\n.gigya-login-providers-arrow-left.gigya-login-providers-arrow-marker-arrows.gigya-login-providers-arrow-disabled div .gigya-login-providers-arrow-marker {\r\n    height: 14px;\r\n    width: 8px;\r\n    background-image: url('$scriptBase/paging/navigation_arrow_left_disabled.png');\r\n}\r\n\r\n.gigya-login-providers-arrow-right.gigya-login-providers-arrow-marker-arrows.gigya-login-providers-arrow-disabled div .gigya-login-providers-arrow-marker {\r\n    height: 14px;\r\n    width: 8px;\r\n    background-image: url('$scriptBase/paging/navigation_arrow_right_disabled.png');\r\n}\r\n\r\n.gigya-login-providers-arrow-left.gigya-login-providers-arrow-marker-newArrows div .gigya-login-providers-arrow-marker {\r\n    height: 14px;\r\n    width: 8px;\r\n    background-image: url('$scriptBase/paging/navigation_arrow_left.png');\r\n}\r\n\r\n.gigya-login-providers-arrow-right.gigya-login-providers-arrow-marker-newArrows div .gigya-login-providers-arrow-marker {\r\n    height: 14px;\r\n    width: 8px;\r\n    background-image: url('$scriptBase/paging/navigation_arrow_right.png');\r\n}\r\n\r\n.gigya-login-providers-arrow-right.gigya-login-providers-arrow-marker-newArrows.gigya-login-providers-arrow-disabled div .gigya-login-providers-arrow-marker {\r\n    height: 14px;\r\n    width: 8px;\r\n    background-image: url('$scriptBase/paging/navigation_arrow_right_disabled.png');\r\n}\r\n\r\n.gigya-login-providers-arrow-left.gigya-login-providers-arrow-marker-newArrows.gigya-login-providers-arrow-disabled div .gigya-login-providers-arrow-marker {\r\n    height: 14px;\r\n    width: 8px;\r\n    background-image: url('$scriptBase/paging/navigation_arrow_left_disabled.png');\r\n}\r\n\r\n.gigya-login-providers-arrow-left.gigya-login-providers-arrow-disabled,\r\n.gigya-login-providers-arrow-right.gigya-login-providers-arrow-disabled {\r\n    cursor: default;\r\n}\r\n\r\n.gigya-login-header {\r\n    display: block;\r\n    text-align: center;\r\n}\r\n\r\n.gigya-login-footer {\r\n    display: block;\r\n    clear: both;\r\n    height: 18px;\r\n    line-height: 18px;\r\n    overflow: hidden;\r\n    margin: 0 auto;\r\n    text-align: center;\r\n}\r\n\r\n\r\n.gigya-login-footer-terms {\r\n    line-height: normal;\r\n    cursor: pointer;\r\n    font-family: arial;\r\n    font-size: 11px;\r\n    color: #0086f1;\r\n    text-decoration: none;\r\n    font-weight: bold;\r\n}\r\n\r\n.gigya-login-providers {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.gigya-login-footer-social-by,\r\n.gigya-login-footer-social-by:hover,\r\n.gigya-login-footer-social-by:active {\r\n    text-decoration: none;\r\n    font-family: arial;\r\n    font-weight: bold;\r\n    font-size: 11px;\r\n    cursor: pointer;\r\n    color: #828282;\r\n}\r\n\r\n.gigya-login-footer-social-by img.gigya-logo {\r\n    width: 32px;\r\n    height: 9px;\r\n    border: none;\r\n}\r\n\r\n.gigya-login-footer-whatsthis {\r\n    width: 150px;\r\n    height: 50px;\r\n    background-color: #FFFFFF;\r\n    border: 1px solid #767676;\r\n    vertical-align: middle;\r\n    text-align: center;\r\n    visibility: hidden;\r\n    position: absolute;\r\n    padding: 10px;\r\n}\r\n\r\n.gigya-login-footer-whatsthis span {\r\n    line-height: normal;\r\n    font-family: arial;\r\n    font-size: 11px;\r\n    color: #262626;\r\n}\r\n\r\n.gigya-login-welcome-greeting {\r\n    line-height: normal;\r\n    font-family: arial;\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    color: #4C4C4C;\r\n    white-space: nowrap;\r\n    display: inline-block;\r\n}\r\n\r\n.gigya-login-welcome-bubble {\r\n    display: inline-block;\r\n    line-height: 16px;\r\n    margin-left: 5px;\r\n}\r\n\r\n.gigya-login-welcome-bubble-left,\r\n.gigya-login-welcome-bubble-right,\r\n.gigya-login-welcome-bubble-center {\r\n    display: inline-block;\r\n    height: 17px;\r\n    float: left;\r\n}\r\n\r\n.gigya-login-welcome-bubble-left {\r\n    background-image: url('$scriptBase/NotYou_Left.png');\r\n    width: 8px;\r\n}\r\n\r\n.gigya-login-welcome-bubble-right {\r\n    background-image: url('$scriptBase/NotYou_Right.png');\r\n    width: 4px;\r\n}\r\n\r\n.gigya-login-welcome-bubble-center {\r\n    background-image: url('$scriptBase/NotYou_Mid.png');\r\n    background-repeat: repeat-x;\r\n}\r\n\r\n.gigya-login-welcome-bubble-text {\r\n    cursor: pointer;\r\n    font-family: arial;\r\n    color: #0086f1;\r\n    font-size: 10px;\r\n    line-height: 17px;\r\n    font-weight: normal;\r\n}\r\n\r\n.gigya-login-welcome-signin-link {\r\n    white-space: nowrap;\r\n}\r\n\r\n.gigya-login-welcome-signin-link a:hover {\r\n    text-decoration: none;\r\n    color: #0086f1;\r\n}\r\n\r\n.gigya-login-footer-divider {\r\n    line-height: normal;\r\n    font-family: arial;\r\n    font-size: 11px;\r\n    color: #828282;\r\n    cursor: default;\r\n    padding: 0 5px;\r\n}\r\n\r\n.gigya-login-footer-edit-link {\r\n    line-height: normal;\r\n    cursor: pointer;\r\n    font-family: arial;\r\n    color: #0086f1;\r\n    text-decoration: none;\r\n    font-size: 11px;\r\n}\r\n\r\n.tabbing-button{\r\n    font-size: 0px;\r\n    border: none;\r\n    padding: 0;\r\n    background-color: transparent;\r\n    cursor: pointer;\r\n    display: inline-block;\r\n}\r\n.tabbing-button.gigya-provider-connected {\r\n    cursor: default;\r\n}\r\n.tabbing-button.gigya-provider-connected:focus {\r\n    outline: none;\r\n}\r\n"},81:function(i,t){Object.defineProperty(t,"__esModule",{value:!0});var e=function(){function i(){}return i.prototype.getChildByCssClass=function(i,t){var e=window.gigya.utils.DOM.getElementsByClass(i,t);return e.length?e[0]:null},i}();t.ContainerBase=e},82:function(i,t,e){Object.defineProperty(t,"__esModule",{value:!0});var n,r,o=e(0),a=e(126),s=e(124),l=e(25),g=e(127),d=e(129),u=e(125);!function(i){i[i.Next=0]="Next",i[i.Prev=1]="Prev"}(t.NavigationDirection||(t.NavigationDirection={})),function(i){i[i._undefined=0]="_undefined",i[i.none=1]="none",i[i.border=2]="border",i[i.welcome=3]="welcome"}(n=t.LastLoginIndecation||(t.LastLoginIndecation={})),function(i){i[i._undefined=0]="_undefined",i[i.Login=1]="Login",i[i.AddConnection=2]="AddConnection",i[i.LinkAccount=3]="LinkAccount"}(r=t.PluginMode||(t.PluginMode={})),function(i){i[i.Unknown=0]="Unknown",i[i.Login=1]="Login",i[i.Welcome=2]="Welcome",i[i.Footer=3]="Footer"}(t.RenderingMode||(t.RenderingMode={}));var p=function(i){function t(){var t=null!==i&&i.apply(this,arguments)||this;return t.pixelRatio=window.devicePixelRatio>1?2:1,t.imageBase=window.gigya._.getCdnResource("/gs/i/HTMLLogin"),t.showEdit=!1,t.showWelcome=!1,t.loginChangeEventHandler=function(){return t.render()},t.pluginConfig={arrowWidth:16,floatingArrowWidth:15,arrowHeight:14,defaultlastLoginButtonSize:30,defaultButtonSize:30,defaultButtonSizeOnPopup:35,headerHeight:18,footerHeight:18,rowSpacing:5},t.onUserStateChange=function(i){return t.userStateChanged(i)},t}return o.__extends(t,i),t.injectionInfo=function(i){return window.gigya.utils.object.merge([i,{name:"login_v2",jsName:"gigya.services.socialize.plugins.login_v2"}])},t.prototype.getConfig=function(){return window.gigya.utils.object.merge([{requiredParams:[],hasMobileUI:!1,allowModal:!0,supportsResponsive:!0,enableSizePolling:!0},t.InjectionInfoDefaultConfig[this.injectionInfo.methodName]])},t.prototype.init=function(i){var t=this;window.gigya.logger.info("login mode: "+this.params.UIMode),this.initParams(),this.initUiContainer(),this.registerToGlobalEvents();var e=window.gigya.utils.templates.fill(this.getCss().main,{scriptBase:this.imageBase});window.gigya._.plugins.utils.css.addCss(e,this.params.cssPrefix),window.gigya.localInfo.isIE&&(window.gigya.localInfo.isIE8||window.gigya.localInfo.quirksMode)&&window.gigya._.plugins.utils.css.addCss(this.getCss().ie8patch,this.params.cssPrefix),this.lastLoginProvider=this.getLastLogin(),this.facebookSuggestEnabled=this.params.autoDetectUserProviders&&"facebook"==this.params.autoDetectUserProviders.toLowerCase()&&(!this.lastLoginProvider||this.lastLoginIndication!=n.welcome);var r=function(e){t.initProviders(),t.initSpriteEngine(),t.user=e.user,t.render(),i()};this.params._callGetUserInfoOnInitialRender?this.getUserInfo(r):r({user:null})},t.prototype.initParams=function(){this.params._pluginCenterFix&&(this.pluginConfig.arrowWidth=25),this.pagingButtonStyle=a.PagingButtonStyles[this.params.pagingButtonStyle]||a.PagingButtonStyles.arrows,this.params.enabledProviders||(this.params.enabledProviders="*"),this.params.buttonsStyle||(this.params.buttonsStyle="standard"),this.showTooltips=!window.gigya.utils.validation.isExplicitFalse(this.params.showTooltips);var i=""+this.params.width;if(this.params.responsiveWidth=i.indexOf("%")>-1,this.params.widthNum=parseInt(i),this.params.heightNum=parseInt(""+this.params.height),!this.params.buttonSize&&this.params.UIConfig){this.params.UIConfig=this.params.UIConfig.toLowerCase();var t,e=this.parseXML(this.params.UIConfig);e&&(t=e.getElementsByTagName("snbuttons")[0]),this.params.buttonSize=t?parseInt(t.getAttribute("buttonsize")):this.params.isPopup?this.pluginConfig.defaultButtonSizeOnPopup:this.pluginConfig.defaultButtonSize}this.params.buttonSize||(this.params.buttonSize=30),this.params.buttonSize&&(this.params.buttonSize=parseInt(""+this.params.buttonSize)),this.params.showTermsLink=this.isTrue(this.params.showTermsLink),this.showTerms=this.params.showTermsLink&&"false"!==this.params.showTermsLink,this.isFooterEnabled=this.showTerms||"AddConnection"==this.params.UIMode,this.isHeaderEnabled=Boolean(this.params.headerText),this.params.lastLoginIndication||(this.params.lastLoginIndication="border"),this.lastLoginIndication=n[String(this.params.lastLoginIndication).toLowerCase()]||n.border,this.pluginMode=r[this.params.UIMode]||r.Login,this.stylePreset=s.ButtonStyles[String(this.params.buttonsStyle).toLowerCase()]||s.ButtonStyles.standard,this.buttonHeight=parseInt(String(this.params.buttonSize)),this.buttonWidth=Math.ceil(this.buttonHeight*this.stylePreset.ratio)},t.prototype.initUiContainer=function(){this.getPluginStyle()==l.PluginStyle.legacy&&this.isModal||(this.container.innerHTML=""),this.uiContainer=this.createElementFromHTMLString(window.gigya.utils.templates.fill(this.getTemplates().uiContainer,{containerID:this.params.containerID})),this.uiContainer.style.height=this.params.height+"px",this.uiContainer.style.width=this.params.widthNum+(this.params.responsiveWidth?"%":"px"),this.isModal&&(this.uiContainer.style.paddingTop="20px"),this.container.appendChild(this.uiContainer)},t.prototype.initProviders=function(){var i=this;if(this.pluginMode!==r.Login||this.params.requiredCapabilities||(this.params.requiredCapabilities="login"),this.pluginMode!==r.AddConnection||this.params.requiredCapabilities||(this.params.requiredCapabilities="friends"),this.providers=window.gigya.global.resolveProviders(this.params.enabledProviders,this.params.disabledProviders,this.params.requiredCapabilities),this.pluginMode===r.AddConnection&&this.lastLoginIndication==n.border)for(var t=0;t<this.providers.length;t++){var e=this.providers[t];if(this.providers[t].name==this.lastLoginProvider){this.providers.splice(t,1),this.providers.unshift(e);break}}if(this.pluginMode===r.Login&&this.lastLoginProvider&&this.lastLoginIndication==n.welcome)for(t=0;t<this.providers.length;t++)if(this.providers[t].name==this.lastLoginProvider){this.lastLoginProviderObject=this.providers[t],this.showWelcome=!0;break}var o=[];switch(this.pluginMode){case r.AddConnection:this.params.customButton?o=[this.params.customButton]:this.params.customButtons&&this.params.customButtons.length>0&&(o=[this.params.customButtons[0]]);break;default:o=this.params.customButtons||[],this.params.customButton&&o.push(this.params.customButton)}if(window.gigya.utils.array.forEach(o,function(t){t&&i.addCustomButton(t)}),0!=this.providers.length||this.facebookSuggestEnabled){var a=[];for(t=0;t<this.providers.length;t++){var s=this.getIdentityInfoForProvider(this.providers[t]);e=this.providers[t];s.isConnected&&a.push(e)}this.providers=a.concat(window.gigya.socialize.hideProvidersByName(this.providers,a.join(",")))}else this.dispatchErrorFromResponse({status:"ERR_NO_PROVIDERS",statusMessage:"No providers",errorCode:400100,errorMessage:"No providers"})},t.prototype.addCustomButton=function(i){var t,e,n,r=i.type?i.type.toLowerCase():"eventonly";switch(r){case"oidc":e=10001,n=i.opName;break;case"saml":e=4122,n=i.idpName;break;case"eventonly":e=4121,r="openID",n=String(this.providers.length);break;default:return void console.warn("gigya: invalid custom button type")}(t=window.gigya.utils.object.clone(window.gigya.socialize._getProviderByID(e))).imgName=r,t.displayName=i.providerName,t.buttonData=i,t.isCustomProvider=!0,n&&(t.name=r+"-"+n),i.providerName||(i.providerName=""),this.shouldAddCustomProvider(t)&&this.providers.splice(i.position&&i.position>1?i.position-1:0,0,t)},t.prototype.shouldAddCustomProvider=function(i){if(!i)return!1;var t=window.gigya.utils.array.getArrayFromString(this.params.enabledProviders,",",!0);switch(this.pluginMode){case r.LinkAccount:return i.name&&window.gigya.utils.array.some(t,function(t){return t.toLowerCase()===i.name.toLowerCase()});default:return!0}},t.prototype.initSpriteEngine=function(){for(var i=[],t=this.params.buttonSize,e=0;e<this.providers.length;e++)i.push(this.providers[e].toString().split("-")[0]);(void 0===t||isNaN(t))&&(t=this.params.isPopup?this.pluginConfig.defaultButtonSizeOnPopup:this.pluginConfig.defaultButtonSize);var n=5*Math.floor(t/5);n<this.stylePreset.minSize&&(n=this.stylePreset.minSize),n>this.stylePreset.maxSize&&(n=this.stylePreset.maxSize);var r=Math.round(t*this.stylePreset.ratio),o=t;this.spriteRenderer=window.gigya.global.getSpriteRenderers({loginIcons:{path:"/HTMLLogin/"+this.stylePreset.base+"["+i.join(",")+"]_[]"+n*this.pixelRatio+this.stylePreset.ext,w:r,h:o,pixelRatio:this.pixelRatio}})},t.prototype.resizePlugin=function(i,t){this.lastPolledWidth=t.width,this.render()},t.prototype.render=function(){var i;if(this.uiContainer.innerHTML="",this.isHeaderEnabled){var t=this.createElementFromHTMLString(window.gigya.utils.templates.fill(this.getTemplates().header,{headerText:this.params.headerText}));this.uiContainer.appendChild(t)}if(this.showWelcome){var e=new d.WelcomeContainer(this);this.uiContainer.appendChild(e.getHtmlElement())}else{i=i||this.getProvidersGridDimensions();var n=new g.LoginContainer(this,i),o=n.getHtmlElement();this.uiContainer.appendChild(o),n.expandInContainerAfterRender()}if(this.isFooterEnabled){i=i||this.getProvidersGridDimensions();var a=new u.FooterContainer(this,i);this.uiContainer.appendChild(a.getHtmlElement())}if(this.pluginMode===r.AddConnection&&this.params.showWhatsThis){var s=window.gigya.utils.DOM.getElementsByClass(this.uiContainer,"gigya-login-footer-whatsthis")[0],l=window.gigya.utils.DOM.getElementsByClass(this.uiContainer,"gigya-login-providers-container")[0],p=this.getContainerDimensions(),h=(.07*l.offsetHeight).toString();s.style.top=parseInt(h)+"%",s.style.left=(p.w-s.offsetWidth)/2+"px"}},t.prototype.userStateChanged=function(i){var t=this;i&&i.user?this.saveUserInfoAndRenderPlugin(i.user):this.getUserInfo(function(i){return t.saveUserInfoAndRenderPlugin(i.user)})},t.prototype.saveUserInfoAndRenderPlugin=function(i){this.user=i,this.showEdit=this.pluginMode===r.AddConnection&&this.user.isConnected&&!window.gigya.utils.validation.isExplicitFalse(this.params.showEditLink),this.render()},t.prototype.registerToGlobalEvents=function(){this.addGlobalEventHandlers({onLogin:this.onUserStateChange,onLogout:this.onUserStateChange,onConnectionAdded:this.onUserStateChange,onConnectionRemoved:this.onUserStateChange}),this.facebookSuggestEnabled&&this.addGlobalEventHandler("onFacebookLoaded",this.onUserStateChange)},t.prototype.dispose=function(){this.facebookSuggestEnabled&&this.removeGlobalEventHandler("onFacebookLoaded",this.onUserStateChange),this.removeGlobalEventHandlers({onLogin:this.onUserStateChange,onLogout:this.onUserStateChange,onConnectionAdded:this.onUserStateChange,onConnectionRemoved:this.onUserStateChange}),i.prototype.dispose.call(this)},t.prototype.onProviderClickHandler=function(i){for(var t=this,e=i.target||i.srcElement;e&&!e.getAttribute("data-gigya-provider");)e=e.parentNode;if(e){var n,o=e.getAttribute("data-gigya-provider");if(o){var a=window.gigya._.providers.getProviderByName(o,this.providers);a||(a=window.gigya._.providers.getProviderByName(o));var s={provider:o,callback:function(i){if(0!=i.errorCode)delete i.requestParams.getInfoResponse,delete i.requestParams.context,delete i.context,t.dispatchErrorFromResponse(i);else{t.params.isPopup&&window.gigya.socialize._closeComponent(t.params.rid,!0);var e=t.pluginMode===r.AddConnection&&"addConnection"==i.operation?"connectionAdded":"login",n=window.gigya._.addUserInfoToEvent(i,{provider:a,response:i},!0);t.dispatchPluginEvent(e,n)}}};if(4121==a.ID){var l=a.buttonData;s.openIDProviderName=l.provider,s.openIDProviderLogo=l.logoURL,s.openIDURL=l.openIDURL}if(4121!=a.ID||"openID"==a.buttonData.type)if(this.pluginMode===r.AddConnection)this.getIdentityInfoForProvider(a).isConnected?(s.callback=function(){t.dispatchPluginEvent("permissions",{provider:a}),t.render()},window.gigya.socialize.requestPermissions(this.params,this.params,s)):window.gigya.socialize.connect(this.params,this.params,s);else this.params.accountsSocialLogin?window.gigya.accounts.socialLogin(this.params,this.params,s):window.gigya.socialize.login(this.params,this.params,s)}a.buttonData&&(n={button:a.buttonData}),this.dispatchPluginEvent("buttonClicked",n)}i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation()},t.prototype.getContainerDimensions=function(){var i=this.params.widthNum;if(this.params.responsiveWidth){var t=this.uiContainer.offsetParent&&this.uiContainer.getBoundingClientRect&&this.uiContainer.getBoundingClientRect()||{};i=(t.width||t.right-t.left||this.uiContainer.offsetWidth)/100*this.params.widthNum}return{h:this.params.heightNum,w:i}},t.prototype.getProvidersGridDimensions=function(){var i=this._getProvidersGridDimensions(0);if(this.providers.length>i.rows*i.columns){var t="floating"===this.pagingButtonStyle.getStyleName(this);i=this._getProvidersGridDimensions(t?this.pluginConfig.floatingArrowWidth:this.pluginConfig.arrowWidth)}else if(this.providers.length){var e=Math.ceil(this.providers.length/i.columns);i.columns=Math.ceil(this.providers.length/e),i.rows=e}else i.columns=i.rows=0;return i},t.prototype._getProvidersGridDimensions=function(i){var t=this.params.buttonSize,e=Math.ceil(this.params.buttonSize*this.stylePreset.ratio),n=t,r=e,o=this.getContainerDimensionsWithoutPagerAndFooter(i,n),a=this.getColumnsAndRowsOfProvidersGrid(o.containerWidth,o.containerHeight,e,t,5,5),s=this.getWidthAndHeightOfProvidersGrid(o.containerHeight,a.columns,e,r,n,5,i);return{columns:a.columns,rows:a.rows,height:s.height,width:s.width,totalWidthIncludingPager:s.totalWidthIncludingPager,isPaged:!i}},t.prototype.getContainerDimensionsWithoutPagerAndFooter=function(i,t){var e=this.getContainerDimensions(),n=e.w-2*i,r=e.h>t?e.h:t;return this.isFooterEnabled&&(r-=this.pluginConfig.footerHeight),{containerWidth:n,containerHeight:r}},t.prototype.getColumnsAndRowsOfProvidersGrid=function(i,t,e,n,r,o){var a=Math.floor(i/(e+r)),s=a>this.providers.length?this.providers.length:a,l=Math.floor((t+o)/(n+o));return{columns:s=s>0?s:1,rows:l=l>0?l:1}},t.prototype.getWidthAndHeightOfProvidersGrid=function(i,t,e,n,r,o,a){var s=i,l=t*(e+o)-o;return{height:s=s>=r?s:r,width:l=l>=n?l:n,totalWidthIncludingPager:l+2*a}},t.prototype.getIdentityInfoForProvider=function(i){var t={name:"",isConnected:!1,hasAllRequiredPermissions:!0,requiredPermissions:[],identity:null};if(!i)return t;if(this.user&&this.user.identities)for(var e in this.user.identities){var n=this.user.identities[e];if(n.provider==i.name){t.name=i.name,t.identity=n,t.isConnected=!0;break}}if(t.identity&&t.identity.missingPermissions){var r=","+t.identity.missingPermissions.toLowerCase().replace(/ /g,"")+",",o=window.gigya.utils.object.extractProperty(this.params,i.name+"ExtraPermissions");o||(o=window.gigya.utils.object.extractProperty(this.params,"extraPermissions")),o||(o="");for(var a=(o=o.toLowerCase()).split(","),s=0;s<a.length;s++)r&&-1!=r.toLowerCase().indexOf(","+a[s]+",")&&(t.hasAllRequiredPermissions=!1,t.requiredPermissions.push(a[s]))}return t},t.prototype.createElementFromHTMLString=function(i){var t=document.createElement("span");return t.innerHTML=i,t.childNodes[0]},t.prototype.getUserInfo=function(i){var t=this;window.gigya.socialize.getUserInfo(this.params,{includeAllIdentities:!0,callback:function(e){0==e.errorCode?(t.user=e.user,t.showEdit=t.pluginMode===r.AddConnection&&t.user.isConnected&&!window.gigya.utils.validation.isExplicitFalse(t.params.showEditLink)):t.dispatchErrorFromResponse(e),i&&i(e)}})},t.prototype.getStyle=function(i){switch(i.toLowerCase()){case"fulllogocolored":return{ratio:2.6,base:"FullLogoColored/",ext:".png",noConnected:!0};case"fulllogo":return{ratio:2.6,base:"FullLogo/",ext:".png",noConnected:!0};case"signinwith":return{ratio:7.05,base:"SignInWith/",ext:".png",noLastLogin:!0,noConnected:!0,minSize:20};default:return{ratio:1,base:"",ext:".png"}}},t.prototype.getLastLogin=function(){return window.gigya._.apiAdapter.getStorage().getItem("_gig_llp")},t.prototype.getLastLoginName=function(){return window.gigya._.apiAdapter.getStorage().getItem("_gig_llu")},t.prototype.parseXML=function(i){var t;if(!i||"string"!=typeof i)return null;try{t=(new DOMParser).parseFromString(i,"text/xml")}catch(i){t=void 0}return t},t.prototype.isTrue=function(i,t){return void 0===t&&(t=""),null==i?t:i&&(1==i||"true"==i.toLowerCase())},t.prototype.createElemnetBlock=function(i,t,e){var n=document.createElement(i);for(var r in t)n.setAttribute(r,t[r]);return n},t.pluginName="login",t.InjectionInfoDefaultConfig={showAddConnectionsUI_v2:{defaultParams:{width:120,height:110,requiredCapabilities:"friends",pagingButtonStyle:"arrows",UIMode:r[r.AddConnection],_callGetUserInfoOnInitialRender:!0},defaultModalParams:{width:280,height:220,requiredCapabilities:"friends",pagingButtonStyle:"arrows",UIMode:r[r.AddConnection],captionTextKey:"connect_with_your_friends",_callGetUserInfoOnInitialRender:!0}},showLoginUI_v2:{defaultParams:{width:110,height:110,requiredCapabilities:"login",pagingButtonStyle:"arrows",UIMode:r[r.Login],_callGetUserInfoOnInitialRender:!0},defaultModalParams:{width:250,height:200,requiredCapabilities:"login",pagingButtonStyle:"arrows",UIMode:r[r.Login],captionTextKey:"login",_callGetUserInfoOnInitialRender:!0}}},t}(window.gigya._.plugins.BasePlugin);t.LoginPlugin=p}});