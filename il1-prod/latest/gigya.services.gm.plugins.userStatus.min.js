!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=371)}({371:function(e,t){void 0===window.gigya.services.gm.plugins&&(window.gigya.services.gm.plugins={}),function(){window.gigya.services.gm.plugins.userStatus={instances:{},showUserStatusUI:function(e,i,s){t.createInstance(e,i,s)}};var e=window.gigya.services.gm.plugins.userStatus,t={instances_size:0,userStatusPlugin:function(e,t,i){this._c=e,this._p=t,this._i=i,this._elid=t.containerID},createInstance:function(i,s,n){if(null!=document.getElementById(s.containerID)){var o=new t.userStatusPlugin(i,s,n);e.instances[s.containerID]=o,t.instances_size++,o.init()}},createDefaultTemplates:function(){var e={_map:{},get:function(e){return this._map[e]},set:function(e,t){this._map[e]=t instanceof Array?t.join(""):t}};return e.set("userStatusCanvas",['<div tabindex="0" class="gig-userStatus gig-userStatus-container" id="${id}_container"><div style="overflow: hidden">$userPhoto $nameAndPoints $badge</div></div>']),e.set("userPhoto",['<div class="gig-userStatus-userPhoto-container"><div class="gig-userStatus-userPhoto"><img alt="" id="${id}_userPhoto" src="$userPhotoURL" /></div><a id="${id}_settingsLink" class="gig-userStatus-settings">$TEXT("settings")</a></div>']),e.set("nameAndPoints",['<div class="gig-userStatus-nameAndPoints">','<div class="gig-userStatus-name">$name</div>','<a id="${id}_points" class="gig-userStatus-points">$TEXT("num_points","%num","<span class=\\"gig-userStatus-pointsValue\\">$points</span>")</a>','<div class="gig-userStatus-progress" title="$TEXT("level_progress")">','<div class="gig-userStatus-progress-fill" style="width:$percent%;"></div>','<div class="gig-userStatus-progress-percent">$percent%</div>',"</div>","</div>"]),e.set("badge",['<a class="gig-userStatus-badge-container" id="${id}_badge">','<img alt="" src="$badgeURL" id="${id}_badgeImg" class="gig-userStatus-badge" />','<div class="${textClassName}">$levelTitle</div>',"</a>"]),e.set("settingsDialog",['<div class="gig-userStatus gig-userStatus-settingsDialog">','<div class="gig-userStatus-settingsDialog-setting"><input type="checkbox" id="${id}_cbEnableNotifications" /><label for="${id}_cbEnableNotifications">$TEXT("show_on_page_achievement_notifications")</label></div>','<div class="gig-userStatus-settingsDialog-setting"><input type="checkbox" id="${id}_cbPublicProfile" /><label for="${id}_cbPublicProfile">$TEXT("show_my_profile_and_rankings_to_all_users")</label></div>','<div class="gig-userStatus-settingsDialog-setting" id="${id}_autoShare"><input type="checkbox" id="${id}_cbAutoShare" /><label for="${id}_cbAutoShare">$TEXT("auto_share_my_achievements_with_my_friends")</label></div>','<a tabindex="0" role="button" class="gig-userStatus-settingsDialog-saveButton" onclick="$onSaveSettings" onkeydown="if((event.which || event.keyCode) == 13) $onSaveSettings">$TEXT("save")</a>','<a tabindex="0" role="button" class="gig-userStatus-settingsDialog-cancelButton" onclick="$onCancel" onkeydown="if((event.which || event.keyCode) == 13) $onCancel">$TEXT("cancel")</a>','<span class="gig-userStatus-settingsDialog-notes" id="${id}_notes">$TEXT("it_can_take_a_few_minutes_for_privacy_settings_to_update")</span>',"</div>"]),e.set("shareButton",['<div class="gig-userStatus-levelInfo-shareButton" id="${id}_shareButton"></div>']),e.set("levelInfoDialog",['<div class="gig-userStatus gig-userStatus-levelInfo">','<div class="gig-userStatus-levelInfo-challengeTitle">$challengeTitle</div>','<div class="gig-userStatus-levelInfo-challengeDescription">$challengeDescription</div>',"$nextLevelInfo",'<div class="gig-userStatus-levelInfo-shareButton-container">${shareButton}</div>',"</div>"]),e.set("nextLevelInfo",['<table role="presentation" cellspacing="0" cellpadding="0" class="gig-userStatus-levelInfo-nextLevel"><tr>','<td class="gig-userStatus-levelInfo-nextLevel-text-container"><div class="gig-userStatus-levelInfo-nextLevel-text">',"$nextLevelText","</div></td>",'<td class="gig-userStatus-levelInfo-nextLevel-badge-container"><img alt="" class="gig-userStatus-levelInfo-nextLevel-badge" src="$nextLevelLockedBadgeURL" /></td>',"</tr></table>"]),e.set("pointsDialog",['<div class="gig-userStatus gig-userStatus-pointsDialog">','<div class="gig-pointsDialog-points">','<div class="gig-userStatus-pointsDialog-thisWeek">','<div class="gig-userStatus-pointsDialog-thisWeek-content">','$TEXT("this_week")','<div class="gig-userStatus-points">$TEXT("num_points","%num","<span class=\\"gig-userStatus-pointsValue\\">$points7Days</span>")</div>',"</div>","</div>",'<div class="gig-userStatus-pointsDialog-allTimes">','<div class="gig-userStatus-pointsDialog-allTimes-content">','$TEXT("all_time")','<div class="gig-userStatus-points">$TEXT("num_points","%num","<span class=\\"gig-userStatus-pointsValue\\">$pointsTotal</span>")</div>',"</div>","</div>","</div>","</div>"]),e},defaultCss:[".gig-userStatus *, div.gig-userStatus, .gig-userStatus span, .gig-userStatus a:hover, .gig-userStatus a:visited, .gig-userStatus a:link, .gig-userStatus a:active{","border:none; line-height:normal;padding:0px;margin:0px;color:inherit;text-decoration:none;width:auto;float:none;-moz-border-radius:0;border-radius:0;","font-family:arial;font-size:10px;color:#797979;background:none;text-align:left;}","div.gig-userStatus-container {padding: 10px 10px 3px 10px;border: 1px solid #e2e2e2;zoom:1}","div.gig-userStatus-userPhoto-container {float:left;overflow:hidden;padding-right:9px;text-align:center}","div.gig-userStatus-userPhoto {width: 65px; height:65px; overflow:hidden;border: 1px solid #E8E8E8;padding:2px;}","div.gig-userStatus-nameAndPoints {float:left;overflow:hidden;zoom:1;margin-top:12px;}","div.gig-userStatus-nameAndPoints-withProgress { margin-top:2px; }","a.gig-userStatus-badge-container, a:hover.gig-userStatus-badge-container {float:right; padding: 5px 0 0 0;cursor:pointer; text-align:center;width:60px;}","a:hover.gig-userStatus-badge-container div.gig-userStatus-levelTitle {text-decoration:underline}","a.gig-userStatus-settings, a:hover.gig-userStatus-settings {font-size: 10px; color: #797979; cursor:pointer;}","a:hover.gig-userStatus-settings {text-decoration:underline}","div.gig-userStatus-name {padding-bottom:3px;font-size: 14px; font-weight:bold; color: #313131;width:100px;}","a.gig-userStatus-points, a:hover.gig-userStatus-points, div.gig-userStatus-points {font-size: 12px; font-weight:bold; color: #0B81C1}","a.gig-userStatus-points {cursor:pointer}","div.gig-userStatus-progress { margin-top:5px;height:18px;width:130px;border:1px solid #D7D6D6;border-radius:2px; }","div.gig-userStatus-progress-fill { background-color:#E3E0E0;height:18px; }","div.gig-userStatus-progress-percent { margin-top:-18px;color:#646464;font-family:arial;font-size:12px;line-height:18px;text-align:center; }","a:hover.gig-userStatus-points {text-decoration:underline}","span.gig-userStatus-pointsValue {font-size: 20px; font-weight:bold; color: #0B81C1}","div.gig-userStatus-levelTitle {font-size: 12px; color: #313131; text-align:center;line-height:115%}","div.gig-userStatus-levelTitle-locked {font-weight:normal; color:#B0B0B0}","img.gig-userStatus-badge {width: 50px; height: 50px;padding-bottom:4px}","div.gig-userStatus-settingsDialog {padding-top: 13px;overflow:hidden;}","div.gig-userStatus-settingsDialog-setting {padding-bottom:5px;font-size:12px;color:#313131}","div.gig-userStatus-settingsDialog-setting-disabled {color:#B0B0B0}","div.gig-userStatus-settingsDialog-setting input {margin-right: 5px; float:left}","a.gig-userStatus-settingsDialog-saveButton,a:hover.gig-userStatus-settingsDialog-saveButton {position:relative;font-weight:bold;border-radius: 3px; color:#313131;cursor:pointer;margin-top:10px;","font-size: 12px;padding: 3px 10px; border: 1px solid #C5C7C7;float:right;display:table-cell; vertical-align:middle; text-align:center;","box-shadow:0 0 2px RGBA(0,0,0,0.15);-webkit-box-shadow:0 0 2px RGBA(0,0,0,0.15);-moz-box-shadow:0 0 2px RGBA(0,0,0,0.15);}",'a.gig-userStatus-settingsDialog-saveButton {background: #FFFFFF; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFFFFF", endColorstr="#EAEBEB");',"background: -webkit-gradient(linear, left top, left bottom, from(#FFFFFF), to(#EAEBEB));","background: -moz-linear-gradient(top,  #FFFFFF,  #EAEBEB)}","a:hover.gig-userStatus-settingsDialog-saveButton {",'background: #EAEBEB; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#EAEBEB", endColorstr="#FFFFFF");',"background: -webkit-gradient(linear, left top, left bottom, from(#EAEBEB), to(#FFFFFF));","background: -moz-linear-gradient(top,  #EAEBEB,  #FFFFFF)}","a.gig-userStatus-settingsDialog-cancelButton,a:hover.gig-userStatus-settingsDialog-cancelButton {position:relative;border-radius: 3px; color:#313131;cursor:pointer;margin-top:10px;margin-right:10px;","font-size: 12px;padding: 3px 10px; border: 1px solid #C5C7C7;float:right;display:table-cell; vertical-align:middle; text-align:center;","box-shadow:0 0 2px RGBA(0,0,0,0.15);-webkit-box-shadow:0 0 2px RGBA(0,0,0,0.15);-moz-box-shadow:0 0 2px RGBA(0,0,0,0.15);}",'a.gig-userStatus-settingsDialog-cancelButton {background: #FFFFFF; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFFFFF", endColorstr="#EAEBEB");',"background: -webkit-gradient(linear, left top, left bottom, from(#FFFFFF), to(#EAEBEB));","background: -moz-linear-gradient(top,  #FFFFFF,  #EAEBEB)}","a:hover.gig-userStatus-settingsDialog-cancelButton {",'background: #EAEBEB; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#EAEBEB", endColorstr="#FFFFFF");',"background: -webkit-gradient(linear, left top, left bottom, from(#EAEBEB), to(#FFFFFF));","background: -moz-linear-gradient(top,  #EAEBEB,  #FFFFFF)}","div.gig-userStatus-pointsDialog {padding-top: 7px;}","div.gig-pointsDialog-points {min-width:260px;overflow:hidden;display:block;zoom:1;}","div.gig-userStatus-pointsDialog-thisWeek, div.gig-userStatus-pointsDialog-allTimes{min-width:120px;background-color:#FFFFFF; border: 1px solid #E8E8E8;padding: 1px;}","div.gig-userStatus-pointsDialog-thisWeek {float:left;margin-right:4px;}","div.gig-userStatus-pointsDialog-allTimes {float:left}","div.gig-userStatus-pointsDialog-thisWeek-content, div.gig-userStatus-pointsDialog-allTimes-content {padding: 7px 15px;background-color:#F9F9F9;font-size:12px; font-weight:bold; color:#313131}","table.gig-userStatus-levelInfo-nextLevel {margin-bottom: 15px;width:100%}","div.gig-userStatus-levelInfo {padding: 12px 0 5px 0;}","div.gig-userStatus-levelInfo-nextLevel-text {margin-right: 10px;width:202px;}","div.gig-userStatus-levelInfo-nextLevel-text, span.gig-userStatus-levelInfo-nextLevel-text {font-size:12px; color:#313131;}","span.gig-userStatus-levelInfo-nextLevel-text-achievementsLeft {font-weight:bold;}","span.gig-userStatus-levelInfo-nextLevel-text-nextLevelTitle {font-weight:bold;}","img.gig-userStatus-levelInfo-nextLevel-badge{width:40px;height:40px;}","td.gig-userStatus-levelInfo-nextLevel-badge-container {vertical-align:top}","td.gig-userStatus-levelInfo-nextLevel-text-container {vertical-align:middle}","div.gig-userStatus-levelInfo-shareButton {margin-left:auto;cursor:pointer;width:70px;height: 18px;background-image:url('"+window.gigya._.getCdnResource("/gs/i/gm/shareButton.png")+"')}","div.gig-userStatus-levelInfo-shareButton-container {text-align:right;}","div.gig-userStatus-levelInfo-challengeDescription {font-size: 12px;color:#000;padding-bottom:15px;padding-right:5px;}","div.gig-userStatus-levelInfo-challengeTitle {font-weight:bold; font-size: 12px;color:#000}","span.gig-userStatus-settingsDialog-notes {font-size:9px;float:left;margin-top:7px;visibility:hidden;width:150px;}","div.gig-userStatus-levelInfo-nextLevel-text a.gig-userStatus-levelInfo-nextLevel-link { font-size:12px;color:#3e59ff;cursor:pointer;text-decoration:underline; }","div.gig-userStatus-levelInfo-nextLevel-text a.gig-userStatus-levelInfo-nextLevel-link * { color:#3e59ff;cursor:pointer;text-decoration:underline; }"]};window.gigya.localInfo.quirksMode&&t.defaultCss.push(["div.gig-userStatus-userPhoto {width: 71px; height:71px}"]),window.gigya.localInfo.backCompat&&t.defaultCss.push(["a:hover.gig-userStatus-points {text-decoration:none}"]),window.gigya.localInfo.isIE7&&t.defaultCss.push(["div.gig-userStatus-pointsDialog-thisWeek, div.gig-userStatus-pointsDialog-allTimes{width:120px}"]),t.userStatusPlugin.prototype={init:function(){this.templates=t.createDefaultTemplates(),!this._p.cssPrefix&&t.addedCSS||(window.gigya.global.addCSS(t.defaultCss,this._p.cssPrefix),t.addedCSS=!0),this.getChallenge();var e=this;window.gigya.services.socialize.getUserInfo(this._c,{includeAllIdentities:!0,group:"gmSettings",callback:function(t){e.afterGetInfo(t)}});var i=function(t){e.refresh(t)},s=function(){window.setTimeout(function(){e.getChallenge(!0)},3e3)};window.gigya.services.socialize.addEventHandlers({listenerType:"component"},{onLogout:i,onLogin:i}),window.gigya.events.addMap({defaultMethod:s,eventMap:[{events:"sendDone,reactionClicked,commentSubmitted,commentVoted,login,connectionAdded,actionNotified",args:[]}]}),window.gigya.socialize.addEventHandlers({listenerType:"component"},{onActionNotified:s})},getText:function(e,t,i){return window.gigya.pluginUtils.lang.getLocalizedText("gigya.services.gm.plugins.userStatus.js",e,this._p.lang,t,i)},getChallenge:function(e){var t=this;e||window.gigya.global.showLoader(document.getElementById(this._elid),"gig-userStatus gig-userStatus-container",this.getCanvasSize().h);var i=this._p.challenge;this._p.challenge||(i="_default"),window.gigya.services.gm.getChallengeStatus(this._c,{includeChallenges:i,details:"full",callback:function(e){t.afterGetChallenge(e)}})},refresh:function(e){e.user?this.user=e.user:document.getElementById(this._elid).innerHTML=""},afterGetInfo:function(e){e.errorCode>0&&(this.broadcastedError||(window.gigya.events.dispatchErrorFromResponse(this._p,e),this.broadcastedError=!0),document.getElementById(this._elid).innerHTML=""),this.gmSettings=e.settings,this.user=e.user,this.draw()},afterGetChallenge:function(e){if(e.errorCode>0)return this.broadcastedError||(window.gigya.events.dispatchErrorFromResponse(this._p,e),this.broadcastedError=!0),void(document.getElementById(this._elid).innerHTML="");e.achievements&&e.achievements.length>0?(this.challenge=e.achievements[0],this.challenge.textClassName="gig-userStatus-levelTitle",0==this.challenge.level&&(this.challenge.badgeURL=window.gigya.global.getPhotoURL(this.challenge.nextLevelLockedBadgeURL,window.gigya._.getCdnResource("/gs/i/gm/LockedBadge.png")),this.challenge.levelTitle=this.challenge.nextLevelTitle,this.challenge.levelDescription=this.challenge.nextLevelDescription,this.challenge.textClassName="gig-userStatus-levelTitle gig-userStatus-levelTitle-locked")):(window.gigya.events.dispatchErrorFromResponse(this._p,{errorCode:400096,errorMessage:"Not supported - Challenge doesn't exist",statusMessage:""}),this.challenge={empty:!0}),this.draw()},getCanvasSize:function(){var e={TEXT:window.gigya.utils.delegate.create(this,this.getText),id:this._elid,points:0,levelTitle:"W",name:"W",badgeURL:"",userPhotoURL:"",userPhoto:this.templates.get("userPhoto"),nameAndPoints:this.templates.get("nameAndPoints"),badge:this.templates.get("badge"),textClassName:"gig-userStatus-levelTitle"},t=this.templates.get("userStatusCanvas"),i=document.getElementById(this._elid);i.innerHTML=window.gigya.utils.templates.fill(t,e);window.gigya.global.getBordersAndPaddings(i);var s=i.offsetHeight,n=i.offsetWidth;return window.gigya.localInfo.quirksMode||(s-=window.gigya.global.getClassBordersAndPaddings("gig-userStatus-container").h),{w:n,h:s}},draw:function(){if(this.user&&this.challenge){var e=this.user;if(!this.user.isLoggedIn||this.challenge.empty)return void(document.getElementById(this._elid).innerHTML="");var t={TEXT:window.gigya.utils.delegate.create(this,this.getText),id:this._elid,points:this.challenge.pointsCurrent,levelTitle:this.challenge.levelTitle,name:e.nickname.toUpperCase(),badgeURL:window.gigya.global.getPhotoURL(this.challenge.badgeURL),userPhotoURL:window.gigya.global.getPhotoURL(e.thumbnailURL?e.thumbnailURL:e.photoURL),percent:this.getActionPercent(),userPhoto:this.templates.get("userPhoto"),nameAndPoints:this.templates.get("nameAndPoints"),badge:this.templates.get("badge"),textClassName:this.challenge.textClassName};t.userPhotoURL&&""!=t.userPhotoURL||(t.userPhotoURL=window.gigya._.getCdnResource("/gs/i/gm/User.png"));var i=this.templates.get("userStatusCanvas");if(document.getElementById(this._elid).innerHTML=window.gigya.utils.templates.fill(i,t),-1==t.percent||this._p.hideActions){var s=window.gigya.utils.DOM.getElementsByClass(document.getElementById(this._elid),"gig-userStatus-progress");s.length>0&&(s[0].style.display="none")}else{var n=window.gigya.utils.DOM.getElementsByClass(document.getElementById(this._elid),"gig-userStatus-nameAndPoints");n.length>0&&window.gigya.utils.DOM.addClassToElement(n[0],"gig-userStatus-nameAndPoints-withProgress")}if(void 0===this.challenge.pointsCurrent||this._p.hidePoints){var o=window.gigya.utils.DOM.getElementsByClass(document.getElementById(this._elid),"gig-userStatus-points");o.length>0&&(o[0].style.visibility="hidden")}var a=this,l=document.getElementById(this._elid+"_badge");l.setAttribute("tabindex","0"),l.setAttribute("role","presentation"),l.onfocus=function(){a.showLevelInfoBubble(l)};var g=document.getElementById(this._elid+"_points");g.setAttribute("tabindex","0"),g.setAttribute("role","presentation"),g.onfocus=function(){a.showPointsBubble(g)};var r=document.getElementById(this._elid+"_settingsLink");r.setAttribute("tabindex","0"),r.setAttribute("role","button"),r.onclick=function(){a.showSettingsBubble(r)},r.onkeydown=function(e){13==(e.which||e.keyCode)&&a.showSettingsBubble(r)};var d=document.getElementById(this._elid+"_userPhoto");window.gigya.global.scaleImageToContainer(d),this.firedLoadEvent||(this.firedLoadEvent=!0,window.gigya.events.dispatchForWidget({eventName:"load",containerID:this._p.containerID},this._p))}},getActionPercent:function(){var e=this.challenge.actionStatus;if(!e||0==e.length)return-1;for(var t=0,i=0,s=0;s<e.length;s++){var n=parseInt(e[s].required);t+=n,i+=Math.min(parseInt(e[s].completed),n)}return Math.round(i/t*100)},showPointsBubble:function(e){var t=window.gigya.utils.object.clone(this.challenge);t.id=this._elid+"_pointsBubble",t.TEXT=window.gigya.utils.delegate.create(this,this.getText);var i=window.gigya.utils.templates.fill(this.templates.get("pointsDialog"),t);window.gigya.global.putGMBalloonNextTo(e,i,this.getText("my_points"),null,null,null,this._elid+"_points")},showLevelInfoBubble:function(e){var t=window.gigya.utils.object.clone(this.challenge);t.TEXT=window.gigya.utils.delegate.create(this,this.getText),t.id=this._elid+"_detailsBubble",t.shareButton="",t.nextLevelInfo="",t.nextLevelText="",t.level>0&&(t.shareButton=window.gigya.utils.templates.fill(this.templates.get("shareButton"),t)),t.nextLevelLockedBadgeURL=window.gigya.global.getPhotoURL(t.nextLevelLockedBadgeURL,window.gigya._.getCdnResource("/gs/i/gm/LockedBadge.png")),t.nextLevelTitle&&t.actionStatus&&t.actionStatus.length>0?t.nextLevelActionURL&&(t.nextLevelInfo=this.templates.get("nextLevelInfo"),t.nextLevelText=('<a target="_blank" class="gig-userStatus-levelInfo-nextLevel-link" href="$nextLevelActionURL" alt="">'+this.getText("learn_how_to_unlock_the_leveltitle_badge")+"</a>").replace("%leveltitle",'<span class="gig-userStatus-levelInfo-nextLevel-text gig-userStatus-levelInfo-nextLevel-text-nextLevelTitle">$nextLevelTitle</span>')):t.nextLevelTitle&&void 0!==t.pointsStatus&&(t.nextLevelInfo=this.templates.get("nextLevelInfo"),t.requiredAchievement=this.getText(t.requiredAchievement)||t.requiredAchievement,t.nextLevelText=this.getText("num_more_achievement_to_unlock_leveltitle_level","%num",'<span class="gig-userStatus-levelInfo-nextLevel-text gig-userStatus-levelInfo-nextLevel-text-achievementsLeft">$achievementsToNextLevel</span>').replace("%achievement","$requiredAchievement").replace("%leveltitle",'<span class="gig-userStatus-levelInfo-nextLevel-text gig-userStatus-levelInfo-nextLevel-text-nextLevelTitle">$nextLevelTitle</span>'));var i=window.gigya.utils.templates.fill(this.templates.get("levelInfoDialog"),t);window.gigya.global.putGMBalloonNextTo(e,i,t.levelTitle,252,null,null,this._elid+"_levelInfo");var s=document.getElementById(t.id+"_badge"),n=this;s&&this.challenge.nextLevelActionURL&&(s.href=n.challenge.nextLevelActionURL);var o=document.getElementById(t.id+"_shareButton");o&&(o.onclick=function(){n.shareButtonClicked(),window.gigya.global.removeGMBalloon()})},shareButtonClicked:function(){var e=this.getUserAction(this.challenge,!0),t=this._p.shareParams?window.gigya.utils.object.clone(this._p.shareParams,!0,!0):{};t.userAction=e,t.containerID="",window.gigya.services.socialize.showShareUI(this._c,t)},getUserAction:function(e,t){var i=this._p.userAction;return t&&this._p.shareParams&&this._p.shareParams.userAction&&(i=this._p.shareParams.userAction),i?i=new window.gigya.services.socialize.UserAction(window.gigya.utils.object.clone(i,!0,!0)):((i=new window.gigya.services.socialize.UserAction).setTitle("$levelTitle"),i.setDescription("$challengeDescription"),i.addImage("$badgeURL")),i.linkBack||i.setLinkBack(document.location.href),window.gigya.global.fillUserActionTemplate(i,e)},showSettingsBubble:function(e){if(!document.getElementById(this._elid+"_settings")){var t={id:this._elid+"_settings",onSaveSettings:this.getInstanceRefString()+".saveSettings()",onCancel:this.getInstanceRefString()+".closeSettings()",TEXT:window.gigya.utils.delegate.create(this,this.getText)},i=window.gigya.utils.templates.fill(this.templates.get("settingsDialog"),t),s=document.createElement("div");s.innerHTML=window.gigya.global.getBalloonHTML(i,this.getText("privacy_settings"),280,null,null,null,null,this.getInstanceRefString()+".closeSettings()"),s.style.position="absolute",s.style.top="-1000px",s.style.zIndex=window.gigya.utils.DOM.getNextZIndex(),s.id=this._elid+"_settings";var n=document.getElementById(this._elid+"_settingsLink"),o=window.gigya.global._GetElementPos(n);window.gigya.utils.DOM.appendToBody(s);var a=o.top+n.offsetHeight+5,l=o.left;a<10&&(a=10),l<10&&(l=10);var g=document.documentElement,r=document.body,d=g.clientHeight;0==d&&(d=r.clientHeight);var u=g.clientWidth;0==u&&(u=r.clientWidth),window.innerHeight&&(d=window.innerHeight,u=window.innerWidth);var c=window.gigya.utils.viewport.getScroll(),h=c.top+d,p=c.left+u;a+s.offsetHeight>h&&(a=h-s.offsetHeight-10),l+s.offsetWidth>p&&(l=p-s.offsetWidth-10),s.style.top=a+"px",s.style.left=l+"px",window.gigya.localInfo.isIE&&window.gigya.global.addIframeShim(s);var v=document.getElementById(t.id+"_cbEnableNotifications"),f=document.getElementById(t.id+"_cbPublicProfile"),m=document.getElementById(t.id+"_cbAutoShare"),x=this.gmSettings,w=window.gigya.utils.localStorage.getObject("gmSettings");v.checked=!(w&&w.disableNotifications),f.checked=!(x&&x.privateProfile);var b=this;v.onclick=function(){v.checked?b.enableAutoShare():b.disableAutoShare()},v.checked?m.checked=x&&x.autoShare:this.disableAutoShare(),f.onclick=function(){b.showSettingsNotes()},s.tabIndex=-1,s.focus()}},showSettingsNotes:function(){var e=document.getElementById(this._elid+"_settings_notes");e&&(e.style.visibility="visible",window.setTimeout(function(){e.style.visibility="hidden"},3e3))},closeSettings:function(){var e=document.getElementById(this._elid+"_settings");e&&(window.gigya.global.removeIframeShim(e),e.parentNode.removeChild(e));var t=document.getElementById(this._elid+"_settingsLink");t&&t.focus()},disableAutoShare:function(){var e=document.getElementById(this._elid+"_settings_cbAutoShare"),t=document.getElementById(this._elid+"_settings_autoShare");e.disabled=!0,e.checked=!1,t.className="gig-userStatus-settingsDialog-setting gig-userStatus-settingsDialog-setting-disabled"},enableAutoShare:function(){var e=document.getElementById(this._elid+"_settings_cbAutoShare"),t=document.getElementById(this._elid+"_settings_autoShare");e.disabled=!1,t.className="gig-userStatus-settingsDialog-setting"},saveSettings:function(){var e=document.getElementById(this._elid+"_settings_cbEnableNotifications"),t=document.getElementById(this._elid+"_settings_cbPublicProfile"),i=document.getElementById(this._elid+"_settings_cbAutoShare"),s={privateProfile:!t.checked,autoShare:i.checked},n={group:"gmSettings",settings:s};window.gigya.services.socialize.setUserSettings(this._c,n);var o=window.gigya.utils.localStorage.getObject("gmSettings");o||(o={}),o.disableNotifications=!e.checked,window.gigya.utils.localStorage.setObject("gmSettings",o),this.gmSettings=s,this.closeSettings()},getInstanceRefString:function(){return"gigya.services.gm.plugins.userStatus.instances['"+encodeURIComponent(this._elid)+"']"}}}()}});