!function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=354)}({0:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"__extends",function(){return n}),i.d(t,"__assign",function(){return s}),i.d(t,"__rest",function(){return a}),i.d(t,"__decorate",function(){return g}),i.d(t,"__param",function(){return r}),i.d(t,"__metadata",function(){return l}),i.d(t,"__awaiter",function(){return m}),i.d(t,"__generator",function(){return d}),i.d(t,"__exportStar",function(){return c}),i.d(t,"__values",function(){return u}),i.d(t,"__read",function(){return p}),i.d(t,"__spread",function(){return h}),i.d(t,"__spreadArrays",function(){return b}),i.d(t,"__await",function(){return x}),i.d(t,"__asyncGenerator",function(){return f}),i.d(t,"__asyncDelegator",function(){return v}),i.d(t,"__asyncValues",function(){return y}),i.d(t,"__makeTemplateObject",function(){return w}),i.d(t,"__importStar",function(){return E}),i.d(t,"__importDefault",function(){return _});var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function n(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var s=function(){return(s=e||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function a(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]])}return i}function g(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var g=e.length-1;g>=0;g--)(n=e[g])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a}function r(e,t){return function(i,o){t(i,o,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function m(e,t,i,o){return new(i||(i=gigya.Promise))(function(n,s){function a(e){try{r(o.next(e))}catch(e){s(e)}}function g(e){try{r(o.throw(e))}catch(e){s(e)}}function r(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(a,g)}r((o=o.apply(e,t||[])).next())})}function d(e,t){var i,o,n,s,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function g(s){return function(g){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){a.label=s[1];break}if(6===s[0]&&a.label<n[1]){a.label=n[1],n=s;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(s);break}n[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,g])}}}function c(e,t){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}function u(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}function p(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var o,n,s=i.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function b(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var o=Array(e),n=0;for(t=0;t<i;t++)for(var s=arguments[t],a=0,g=s.length;a<g;a++,n++)o[n]=s[a];return o}function x(e){return this instanceof x?(this.v=e,this):new x(e)}function f(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,n=i.apply(e,t||[]),s=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(e){n[e]&&(o[e]=function(t){return new gigya.Promise(function(i,o){s.push([e,t,i,o])>1||g(e,t)})})}function g(e,t){try{(i=n[e](t)).value instanceof x?gigya.Promise.resolve(i.value.v).then(r,l):m(s[0][2],i)}catch(e){m(s[0][3],e)}var i}function r(e){g("next",e)}function l(e){g("throw",e)}function m(e,t){e(t),s.shift(),s.length&&g(s[0][0],s[0][1])}}function v(e){var t,i;return t={},o("next"),o("throw",function(e){throw e}),o("return"),t[Symbol.iterator]=function(){return this},t;function o(o,n){t[o]=e[o]?function(t){return(i=!i)?{value:x(e[o](t)),done:"return"===o}:n?n(t):t}:n}}function y(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=u(e),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(i){t[i]=e[i]&&function(t){return new gigya.Promise(function(o,n){(function(e,t,i,o){gigya.Promise.resolve(o).then(function(t){e({value:t,done:i})},t)})(o,n,(t=e[i](t)).done,t.value)})}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}}.call(this,i(0).__assign)},159:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(29),n=function(){function e(e,t,i){var o=this;this.composeBox=e,this.onResult=t;var n=null;this.selectedIndex=0,i&&(n=this.getUserPrefix(i)),this.fetchRelatedUsers(n),this.keydownDelegate=function(e){o.processKeyDown(e)},window.gigya.utils.DOM.addEventListener(e.uiElements.textArea,"keydown",this.keydownDelegate)}return e.prototype.fetchRelatedUsers=function(e){var t=this,i=this.composeBox.plugin.getComment(this.composeBox.data.parentID);window.gigya.comments.getRelatedUsers({usernamePrefix:e,categoryID:this.composeBox.plugin.params.categoryID,streamID:this.composeBox.plugin.params.streamID,parentCommentID:i?i.id:null,limit:10,cacheTimeout:3e4,callback:function(e){e.relatedUsers?(t.relatedUsers=e.relatedUsers,t.container?t.updateUsers():t.draw()):t.cancel()}})},e.prototype.draw=function(){var e=this,t=this.composeBox.uiElements.editor,i=document.createElement("div");i.innerHTML=window.gigya.utils.templates.fill(this.composeBox.plugin.templates.userTaggingBox,{title:this.composeBox.plugin.getText("tag_a_commenter")}),this.container=window.gigya.pluginUtils.DOM.addPopoverNearElement(t,i,"bottom",0,!this.composeBox.plugin.isRtl,!1,null,function(t,i){e.cancel(),t&&i&&o.Events.cancelEvent(t)},[this.composeBox.uiElements.textArea]),this.changeSelectedByIndex(0),this.updateUsers();var n=this.getElement("suggestions");window.gigya.utils.DOM.addEventListener(n,"mouseover",function(t){for(var i=t.target||t.srcElement;i&&!window.gigya.utils.DOM.isElementClass(i,"gig-usertagging-user");)i=i.parentElement;var o=e.getChildNodeIndex(n,i);e.changeSelectedByIndex(o)}),window.gigya.utils.DOM.addEventListener(n,"mousedown",function(t){window.gigya.utils.DOM.cancelEvent(t),e.confirmSelection()})},e.prototype.getChildNodeIndex=function(e,t){for(var i=0;i<e.childNodes.length;i++)if(e.childNodes[i]==t)return i;return-1},e.prototype.updateUsers=function(){if(0==this.relatedUsers.length)this.cancel();else{for(var e=!1,t=this.getElement("suggestions"),i=0,n=t.childElementCount,s=0;s<n;s++){var a={};i<this.relatedUsers.length&&(a=this.relatedUsers[i]);var g=t.childNodes[i];a.uid&&a.uid==g.getAttribute("data-gig-uid")?(a.uid==this.selectedUID&&(e=!0,this.selectedIndex=i),i++):t.removeChild(g)}for(s=i;s<this.relatedUsers.length;s++){var r=this.relatedUsers[s],l=document.createElement("li");window.gigya.utils.DOM.addClassToElement(l,"gig-usertagging-user"),r.uid&&l.setAttribute("data-gig-uid",r.uid),l.innerHTML=window.gigya.utils.templates.fill(this.composeBox.plugin.templates.userTaggingOption,{name:r.name,photoURL:window.gigya.global.getPhotoURL(r.photoURL,o.Images.getPhotoFullName("Avatar_empty",this.composeBox.plugin.pixelRatio))}),this.selectedUID&&r.uid==this.selectedUID&&(window.gigya.utils.DOM.addClassToElement(l,"gig-usertagging-selected"),this.selectedIndex=s,e=!0),t.appendChild(l);var m=l.getElementsByTagName("img");if(m&&m.length>0){var d=m[0];d.style.visibility="hidden",window.gigya.utils.DOM.addEventListener(d,"load",function(e){var t=e.target||e.srcElement;window.gigya.global.scaleImageToContainer(t,!0,function(){t.style.visibility=""})})}}e||this.changeSelectedByIndex(0)}},e.prototype.cancel=function(){this.container&&this.container.parentElement&&this.container.parentElement.removeChild(this.container),this.onResult&&this.onResult(null,null),window.gigya.utils.DOM.removeEventListener(this.composeBox.uiElements.textArea,"keydown",this.keydownDelegate)},e.prototype.getUserPrefix=function(e,t){if(void 0===t&&(t=e.lastIndexOf("@")),-1!=t){var i="";return e.length>1&&(i=e.substring(t+1)),i}},e.prototype.processTextChanged=function(e){var t=e.lastIndexOf("@");if(0===t||t>0&&" "==e.charAt(t-1)){var i=this.getUserPrefix(e,t);void 0!==i&&this.fetchRelatedUsers(i)}else this.cancel()},e.prototype.getElement=function(e){return window.gigya.utils.DOM.getElementsByClass(this.container,"gig-usertagging-"+e)[0]},e.prototype.changeSelectedByIndex=function(e){var t=this.getElement("suggestions"),i=this.relatedUsers.length;this.selectedUID="",this.selectedIndex>=0&&this.selectedIndex<i&&window.gigya.utils.DOM.removeClassFromElement(t.childNodes[this.selectedIndex],"gig-usertagging-selected"),e>=0&&e<i?(this.selectedUID=this.relatedUsers[e].uid,window.gigya.utils.DOM.addClassToElement(t.childNodes[e],"gig-usertagging-selected")):e<0?e=-1:e>=i&&(e=i),this.selectedIndex=parseInt(e)},e.prototype.confirmSelection=function(){if(this.onResult){var e=this.relatedUsers[this.selectedIndex],t=o.UserTagging.createTaggedUserElement(e.name,e.uid);this.onResult(e.uid,t)}this.container&&this.container.parentElement.removeChild(this.container),window.gigya.utils.DOM.removeEventListener(this.composeBox.uiElements.textArea,"keydown",this.keydownDelegate)},e.prototype.processKeyDown=function(t){if(-1!=e.taggingConfirmationKeys.indexOf(t.keyCode))this.relatedUsers&&this.selectedIndex<this.relatedUsers.length&&(window.gigya.utils.DOM.cancelEvent(t),this.confirmSelection());else if(-1!=e.taggingTerminatorKeys.indexOf(t.keyCode))window.gigya.utils.DOM.cancelEvent(t),this.cancel();else if(t.keyCode in e.verticalKeys){"up"==e.verticalKeys[t.keyCode]?this.changeSelectedByIndex(this.selectedIndex-1):this.changeSelectedByIndex(this.selectedIndex+1),window.gigya.utils.DOM.cancelEvent(t)}},e.taggingTerminatorKeys=[27],e.taggingConfirmationKeys=[9,13],e.verticalKeys={38:"up",40:"down"},e.horizontalKeys={37:"left",39:"right"},e}();t.UserTaggingBox=n},160:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(95),n=i(36),s=i(29),a=i(162),g=function(){function e(e,t,i,o,n,s,a,g){void 0===i&&(i=0),void 0===n&&(n=!1),void 0===s&&(s=!1),this.plugin=e,this.level=i,this.viaProvider=o,this.isTemp=n,this.isNew=s,this.error=a,this.info=g,this.replies=[],this.descendantsCount=0,this.reset(t),this.updateParents()}return e.prototype.updateParents=function(){var e=this.getParent();e&&e.data&&e.data.replies&&-1==window.gigya.utils.array.indexOf(e.data.replies,this.data)&&e.data.replies.push(this.data),e&&e.replies&&-1==window.gigya.utils.array.indexOf(e.replies,this)&&e.replies.push(this),e||-1!=window.gigya.utils.array.indexOf(this.plugin.comments,this)||this.plugin.comments.push(this)},e.prototype.updateDescendantsCountInParents=function(e){for(;e;)e.descendantsCount=(e.descendantsCount||0)+(this.isRemovedComment()||!this.data.status?0:1),e.updateRepliesCount(),this.plugin.setLinks(e.getContainer()),e=e.getParent()},e.prototype.setElementHtml=function(e,t){var i=this.getElement(e);i&&(i.innerHTML=t)},e.prototype.bindButtonSubmitElement=function(e,t){var i=this.getElement(e);i&&window.gigya.utils.DOM.addButtonSubmitListener(i,t.bind(this))},e.prototype.getElement=function(e){var t=window.gigya.utils.DOM.getElementsByClass(this.getContainer(),"gig-comment-"+e);return t.length>0?t[0]:null},e.prototype.dispose=function(){this.plugin.removeComment(this)},e.prototype.reset=function(t,i,o){if(delete this.plugin.commentInstances[this.id],this.id=t.ID,this.plugin.commentInstances[this.id]=this,this.data=t,isNaN(this.data.posVotes)&&(this.data.posVotes=0),isNaN(this.data.negVotes)&&(this.data.negVotes=0),t.sender.name&&"anonymous"==t.sender.name.toLowerCase()?t.sender.name=this.plugin.getText("anonymous"):!t.sender.name&&t.isModerator?t.sender.name=this.plugin.getText("moderator"):t.sender.name&&"guest"==t.sender.name.toLowerCase()&&(t.sender.name=this.plugin.getText("guest")),this.updateAll(),t.replies){this.descendantsCount=0;for(var n=0;n<t.replies.length;n++){var s=t.replies[n],a=this.plugin.getComment(s.ID);a?a.reset(s,i):a=new e(this.plugin,s,this.level+1,null,null,this.isNew||i)}this.updateRepliesCount()}this.updateDescendantsCountInParents(this.getParent())},e.prototype.removeChild=function(e){window.gigya.utils.array.removeByProperty(this.replies,"id",e),window.gigya.utils.array.removeByProperty(this.data.replies,"ID",e)},e.prototype.getUsername=function(){return this.data.sender.name||(this.data.isModerator?this.plugin.getText("moderator"):this.plugin.getText("guest"))},e.prototype.getContainer=function(){return this.container},e.prototype.getParent=function(){return this.plugin.getComment(this.data.parentID)},e.prototype.getText=function(e,t,i){return this.plugin.getText(e,t,i)},e.prototype.expand=function(){var e=this.getElement("repliesArrow"),t=this.getElement("replies");e&&t&&(window.gigya.utils.DOM.removeClassFromElement(t,"gig-comment-replies-collapsed"),window.gigya.utils.DOM.removeClassFromElement(e,"gig-comment-repliesArrow-collapsed")),this.updateReplies(!0)},e.prototype.collapse=function(){var e=this.getElement("repliesArrow"),t=this.getElement("replies");e&&t&&(window.setTimeout(function(){window.gigya.utils.DOM.addClassToElement(t,"gig-comment-replies-collapsed")},1),window.gigya.utils.DOM.addClassToElement(e,"gig-comment-repliesArrow-collapsed")),this.detachReplies(),t.innerHTML=""},e.prototype.isCollapse=function(){return this.container.getElementsByClassName("gig-comment-replies-collapsed").length>0},e.prototype.expandCollapse=function(){var e=this.getElement("replies");if(e)if(window.gigya.utils.DOM.isElementClass(e,"gig-comment-replies-collapsed")){this.expand();var t=e.querySelector(".gig-comment");t&&t.focus()}else this.collapse()},e.prototype.detachReplies=function(){for(var e=0;e<this.replies.length;e++){var t=this.replies[e];t.container=null,t.plugin.tempComposeBox&&t.plugin.tempComposeBox.close(),t.detachReplies()}},e.prototype.updateRepliesCount=function(){var e=this.getContainer();if(e){var t=this.getElement("repliesArrow"),i=this.getElement("repliesArrow-text"),o=this.descendantsCount||0;if(o>0){if(t&&(t.style.display=""),i){var s;s=1==o?this.plugin.textMode==n.TextMode.COMMENTS?"one_reply":"one_comment":this.plugin.textMode==n.TextMode.COMMENTS?"num_replies":"num_comments";var a=this.getText(s,"%num",o.toString());"fr"==this.plugin.params.lang&&0==o&&(a=(a=this.getText(this.plugin.textMode==n.TextMode.COMMENTS?"one_reply":"one_comment","%num",o.toString())).replace("1","0")),i.innerHTML=a}}else t&&(t.style.display="none");this.plugin.setLinks(e)}},e.prototype.markAsFlagged=function(){this.isFlagged=!0;var e=this.getElement("flag");e&&(window.gigya.utils.DOM.addClassToElement(e,"gig-comment-flag-submitted"),e.setAttribute("tabindex","-1"),e.setAttribute("aria-disabled","true")),this.plugin.state.flags||(this.plugin.state.flags={});var t=this.plugin.user.isGuest?"guest":this.plugin.user.UID;this.plugin.state.flags[t+"_"+this.id]=!0},e.prototype.getHtml=function(){return window.gigya.utils.templates.fill(this.plugin.templates.comment,{commentId:this.id,like:this.getText("like"),unlike:this.getText("unlike"),reply:this.plugin.textMode==n.TextMode.COMMENTS?this.getText("reply"):this.getText("comment"),delete:this.getText("delete"),share:this.getText("share"),edit:this.getText("edit"),edited:this.getText("edited").toLowerCase()})},e.prototype.getChildrenHtml=function(){for(var e=[],t=0;t<this.replies.length;t++)e.push(this.replies[t].getHtml());return e.join("")},e.prototype.isRemovedComment=function(){return!this.isPost&&-1!=["rejected","pending"].indexOf(this.data.status)||"deleted"===this.data.status},e.prototype.isPostPending=function(){return this.isPost&&this.data&&"pending"==this.data.status},e.prototype.updateCommentIDAttribute=function(){this.container.setAttribute("data-comment-id",this.data.ID),this.container.setAttribute("tabindex","0")},e.prototype.updateCommentUIDAttribute=function(){this.data.sender.UID&&this.container.setAttribute("data-gig-uid",this.data.sender.UID)},e.prototype.updateAll=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!0);var i=!1;if(!this.container||!this.container.parentNode){i=!0,e=!0;var o=this.getParent();if(!o&&this.data.parentID)return;var n=o?o.getElement("replies"):this.plugin.getElement("comments");if(!n)return;var s=document.createElement("div");if(s.setAttribute("class","gig-comment"),this.isNew&&(window.gigya.utils.DOM.addClassToElement(s,"gig-comment-newComment"),this.plugin.isMobileUI&&window.setTimeout(function(){window.gigya.utils.DOM.removeClassFromElement(s,"gig-comment-newComment"),this.updateCommentHighlightingBadgesBackgroundColorForNewComment(this.data.highlightGroups)},5e3)),s.setAttribute("data-level",this.level.toString()),this.data.tags)for(var a=0;a<this.data.tags.length;a++)s.setAttribute("data-tag-"+this.data.tags[a].replace(/[^A-Za-z0-9]/g,"_"),"1");s.innerHTML=this.getHtml(),(this.isTemp||this.isNew)&&n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s),this.container=s}e&&(this.container.innerHTML=this.getHtml()),this.isRemovedComment()&&!this.isTemp&&this.setRemovedCommentProp(),this.updateComment(e),this.updateVote(),this.updateRepliesCount(),this.updateMediaItem(),this.updateTitle(e),this.updateCommentIDAttribute(),this.updateCommentUIDAttribute(),t&&this.updateReplies(e),this.plugin.setLinks(this.getContainer()),(i||e)&&this.bindAll()},e.prototype.setRemovedCommentProp=function(){"pending"==this.data.status?this.data.commentText=this.plugin.textMode==n.TextMode.REVIEWS&&0==this.level?this.getText("this_review_is_awaiting_moderation"):this.getText("this_comment_is_awaiting_moderation"):this.data.commentText=this.plugin.textMode==n.TextMode.REVIEWS&&0==this.level?this.getText("this_review_has_been_deleted"):this.getText("this_comment_has_been_deleted"),this.data.mediaItems=null,this.data.taggedUsers=null,this.data.ratings=null,this.data.highlightGroups=null,window.gigya.utils.DOM.addClassToElement(this.getElement("self-data"),"gig-comment-data-removed"),window.gigya.utils.DOM.addClassToElement(this.getElement("photo"),"gig-comment-photo-removed"),window.gigya.utils.DOM.addClassToElement(this.getElement("title"),"gig-comment-title-removed"),this.data.replies&&0!==this.data.replies.length||this.dispose()},e.prototype.showRatings=function(){var e=this.getElement("rating-drop");window.gigya.utils.DOM.addClassToElement(e,"gig-comment-rating-drop-down");var t=0,i=document.createElement("div");i.style.zIndex=window.gigya.utils.DOM.getNextZIndex().toString(),window.gigya.utils.DOM.appendToBody(i),i.className="gig-comments-container gig-comment-rating-dimensions",i.id="gig_"+(new Date).getTime();var o=this.plugin.settings.ratingDims;if(o&&i&&this.data.ratings){for(var n=0;n<o.length;n++){var s=o[n];if("_overall"!=s.id&&this.data.ratings[s.id]){var a=document.createElement("div");a.innerHTML=this.plugin.templates.rating,a.className="gig-comment-rating",i.appendChild(a);var g=window.gigya.utils.DOM.getElementsByClass(a,"gig-comment-rating-title")[0];g&&(g.innerHTML=s.name+":"),t=Math.max(t,g.offsetWidth+2);var r=window.gigya.utils.DOM.getElementsByClass(a,"gig-comment-rating-value")[0];r&&(r.innerHTML="",this.updateStarsElement(r,s.id))}}window.gigya._.plugins.utils.css.addCss("#"+i.id+" *.gig-comment-rating-title { width:"+t+"px; }","");var l=window.gigya.utils.DOM.getElementPosition(e);i.style.top=l.top+e.offsetHeight+"px";var m=Math.max(5,l.left+(e.offsetWidth-i.offsetWidth)/2);i.style.left=m+"px";var d=l.left-m-11;window.gigya._.plugins.utils.css.addCss("#"+i.id+".gig-comment-rating-dimensions:before {margin-left: "+d+"px}","")}window.gigya.pluginUtils.DOM.removeElementOnDocClickOrEscape(i,function(t,i){window.gigya.utils.DOM.removeClassFromElement(e,"gig-comment-rating-drop-down"),i&&t.target==e&&(t.stopPropagation(),t.preventDefault())},null)},e.prototype.updateTitle=function(e){var t=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-comment-title")[0];if(t){if(e&&this.setElementHtml("title",this.plugin.templates.commentTitle),this.data.ratings&&this.data.ratings._overall||this.data.commentTitle&&!this.data.parentID){t.style.display="",this.setElementHtml("summary",this.data.commentTitle||"");var i=this.getElement("rating"),o=this.getElement("rating-drop");if(i)if(o&&(o.style.display="none"),i.innerHTML="",this.data.ratings&&this.data.ratings._overall){for(var n in i.style.display="",this.updateStarsElement(i,"_overall"),this.data.ratings)if("_overall"!=n){o&&(o.style.display="");break}}else i.style.display="none"}else t.style.display="none";var s=this.getElement("header-left");this.plugin.removeUserBadges(s);var a=this.getElement("username"),g=this.plugin.createUserHighlightingBadges(a,this.data.highlightGroups),r=this.getElement("self-data");g?window.gigya.utils.DOM.addClassToElement(r,"gig-comment-withBadges"):window.gigya.utils.DOM.removeClassFromElement(r,"gig-comment-withBadges")}},e.prototype.updateStarsElement=function(e,t){for(var i=this.data.ratings[t],o=0;o<5;o++){var n=document.createElement("div");window.gigya.utils.DOM.addClassToElement(n,"gig-comment-rating-star");var s="";o<Math.floor(i)?s="gig-comment-rating-star-full":o==i-.5&&(s="gig-comment-rating-star-half"),window.gigya.utils.DOM.addClassToElement(n,s),e.appendChild(n)}},e.prototype.updateMediaItem=function(){var e=this.getElement("mediaItem");if(e)if(this.data.mediaItems&&this.data.mediaItems.length>0){e.style.display="";var t=this.data.mediaItems[0];e.innerHTML="",this.plugin.buildMediaItemElement(e,t)}else e.style.display="none"},e.prototype.updateVote=function(){this.plugin.user||(this.data.vote="none");var e=this.getElement("vote-pos"),t=this.getElement("vote-neg"),i=this.getElement("vote-total"),o=this.getElement("likeLink"),n=this.plugin.settings.enableVoting,s=this.plugin.settings.allowNegativeVoting;e&&(e.style.display=n?"":"none"),t&&(t.style.display=n?"":"none"),i&&(i.style.display=n?"":"none");var a=this.getElement("footer-right");switch(a&&(this.plugin.settings.displayPosNegVotes?window.gigya.utils.DOM.removeClassFromElement(a,"gig-comment-vote-posneg"):window.gigya.utils.DOM.addClassToElement(a,"gig-comment-vote-posneg")),t&&(t.style.display=s?"":"none"),this.data.vote){case"pos":e&&window.gigya.utils.DOM.addClassToElement(e,"gig-comment-vote-pos-down"),t&&window.gigya.utils.DOM.removeClassFromElement(t,"gig-comment-vote-neg-down"),o&&(o.innerHTML=this.getText("unlike"));break;case"neg":e&&window.gigya.utils.DOM.removeClassFromElement(e,"gig-comment-vote-pos-down"),t&&window.gigya.utils.DOM.addClassToElement(t,"gig-comment-vote-neg-down");break;default:e&&window.gigya.utils.DOM.removeClassFromElement(e,"gig-comment-vote-pos-down"),t&&window.gigya.utils.DOM.removeClassFromElement(t,"gig-comment-vote-neg-down"),o&&(o.innerHTML=this.getText("like"))}if(i)if(!this.plugin.settings.displayPosNegVotes&&this.plugin.settings.allowNegativeVoting){var g=this.data.posVotes-this.data.negVotes,r=g.toString();g>0&&(r="+"+g),i.innerHTML=r,i.style.display=""}else i.style.display="none";e&&(this.plugin.settings.displayPosNegVotes||!this.plugin.settings.allowNegativeVoting?(e.innerHTML=this.data.posVotes.toString(),window.gigya.utils.DOM.addClassToElement(e,"gig-comment-vote-with-value")):(window.gigya.utils.DOM.removeClassFromElement(e,"gig-comment-vote-with-value"),e.innerHTML="")),t&&(this.plugin.settings.displayPosNegVotes?(t.innerHTML=this.data.negVotes.toString(),window.gigya.utils.DOM.addClassToElement(t,"gig-comment-vote-with-value")):(t.innerHTML="",window.gigya.utils.DOM.removeClassFromElement(t,"gig-comment-vote-with-value"))),a&&(this.isTemp?a.style.display="none":a.style.display="")},e.prototype.listenForCombination=function(e){if(e||(e=window.event),40==e.keyCode&&e.shiftKey){var t=window.gigya.utils.stringUtils.format('<div class="gig-comments-container">Stream ID: {0}<br />Comment ID: {1}</div>',this.plugin.params.streamID,this.id);window.gigya.global.putGMBalloonNextTo(this.getContainer(),t,"Comment Data",400,100),e.preventDefault&&e.preventDefault()}},e.prototype.mouseOver=function(){var e=this;this.plugin.isMobileUI||(this.keydownDelegate||(this.keydownDelegate=function(t){return e.listenForCombination(t)}),window.gigya.utils.DOM.isElementClass(this.container,"gig-comment-newComment")&&(window.gigya.utils.DOM.removeClassFromElement(this.container,"gig-comment-newComment"),this.updateCommentHighlightingBadgesBackgroundColorForNewComment(this.data.highlightGroups),this.plugin.newCommentsCount--,this.plugin.updateStrip()),window.gigya.utils.DOM.addEventListener(document,"keydown",this.keydownDelegate))},e.prototype.mouseOut=function(){try{window.gigya.utils.DOM.removeEventListener(document,"keydown",this.keydownDelegate)}catch(e){}},e.prototype.updateComment=function(e){this.updateStatus();var t=window.gigya.utils.sanitize.sanitizeHTML(window.gigya.global.wbr(this.getUsername(),20)).replace(/\$/g,"&#36;");this.setElementHtml("username",t),this.setElementHtml("time",this.getTimeString());var i=this.getElement("viaProvider");i&&(this.viaProvider?(i.innerHTML=this.getText("via_provider","%provider",this.viaProvider),window.gigya.utils.DOM.addClassToElement(i,"gig-comment-viaProvider-"+this.viaProvider.toLowerCase()),i.style.display=""):(i.innerHTML="",i.style.display="none"));var o=this.createCommentHighlightingBadges(this.data.highlightGroups),n=this.getElement("self-data");o?window.gigya.utils.DOM.addClassToElement(n,"gig-comment-withBadges"):window.gigya.utils.DOM.removeClassFromElement(n,"gig-comment-withBadges");var a=(this.data.commentText||"").replace(/\$/g,"&#36;");a=a.replace(/\n/g,"<br />"),this.plugin.settings.enableLinks&&(a=window.gigya._.plugins.utils.DOM.replaceLinksWithHTMLElements(a)),this.setElementHtml("body",a);var g=this.getElement("edited");g&&(this.plugin.settings.userEditComment&&this.data.edited?g.style.display="":g.style.display="none");var r=this.getElement("likeLink");r&&(this.plugin.settings.enableVoting&&!this.plugin.settings.allowNegativeVoting?r.style.display="":r.style.display="none");var l=this.getElement("editLink");l&&(this.plugin.settings.userEditComment&&this.data.sender.isSelf&&!this.plugin.settings.readOnly?l.style.display="":l.style.display="none");var m=this.getElement("deleteLink");m&&(this.plugin.settings.allowCommentDeletion&&this.data.sender.isSelf&&!this.plugin.user.isGuest?m.style.display="":m.style.display="none");var d=this.getElement("replyLink");if(d){!this.isTemp&&!this.viaProvider&&"pending"!=this.data.status&&this.level<this.plugin.settings.threadingDepth&&!this.plugin.settings.readOnly&&"disabled"!=this.plugin.settings.enableCommentBody&&"readOnly"!=this.plugin.streamInfo.status?d.style.display="":d.style.display="none";this.getElement("likeLink")}var c=this.getElement("shareLink");if(c&&(c.style.display=this.plugin.params.shareUserAction&&!this.plugin.params.hideShareButtons&&this.plugin.shareEnabled?"":"none"),this.plugin.setLinks(this.container),this.data.ratings){var u="",p=this.plugin.templates.rating;for(var h in this.data.ratings)u+=window.gigya.utils.templates.fill(p,{starClassName:"gig-comments-star",ratingID:h,value:this.data.ratings[h]});this.setElementHtml("ratings",u)}var b=this.data.sender.loginProvider,x=window.gigya.utils.templates.fill(this.plugin.templates.photo,{photoURL:window.gigya.global.getPhotoURL(this.data.sender.photoURL,s.Images.getPhotoFullName(this.data.isModerator?"mod_icon":"Avatar_empty",this.plugin.pixelRatio)),providerImage:b&&"site"!=b.toLowerCase()&&"customopenid"!=b.toLowerCase()?this.plugin.templates.providerImage:"",providerImageUrl:b?s.Images.getPhotoFullName("providers/"+this.data.sender.loginProvider+"User",this.plugin.pixelRatio):""}),f=this.getElement("photo");if(f&&""==f.innerHTML){f.style.visibility="hidden",f.innerHTML=x;var v=f.getElementsByTagName("img");if(v&&v.length>0){var y=v[0];window.gigya.utils.DOM.addEventListener(y,"load",function(){window.gigya.global.scaleImageToContainer(v[0],!0,function(){f.style.visibility=""})})}}var w=this.getElement("flag");if(w){var E=this.plugin.user.isGuest?"guest":this.plugin.user.UID;w.style.display=!this.plugin.settings.enableFlagging||window.gigya.localInfo.isTouch||this.isTemp?"none":"",this.plugin.state.flags&&this.plugin.state.flags[E+"_"+this.id]&&this.markAsFlagged()}},e.prototype.createCommentHighlightingBadges=function(e){var t=this.getElement("header-right"),i=this.plugin.getHighlightingBadges(e,["comment"]),o=i?i[0]:null,s=this.getElement("commentBadge"),a=this.getElement("content"),g=this.getElement("photo");return window.gigya.utils.DOM.removeClassFromElement(a,"gig-comment-badge-",!0),o?(s?(s.innerHTML="",window.gigya.utils.DOM.removeClassFromElement(s,"gig-badge-",!0),window.gigya.utils.DOM.removeClassFromElement(s,"gig-badge-border")):(s=document.createElement("div"),t.appendChild(s)),window.gigya.utils.DOM.addClassToElement(s,"gig-comment-commentBadge"),window.gigya.utils.DOM.addClassToElement(s,o.className),this.plugin.isMobileUI||(s.innerHTML=o.badgeText),n.BadgeFrameEnum[o.badgeFrame]===n.BadgeFrameEnum.rectangle&&window.gigya.utils.DOM.addClassToElement(s,"gig-badge-border"),window.gigya.utils.DOM.addClassToElement(a,"gig-comment-colored-background"),window.gigya.utils.DOM.isElementClass(this.container,"gig-comment-newComment")||window.gigya.utils.DOM.addClassToElement(a,o.commentClassName),!0):(window.gigya.utils.DOM.removeClassFromElement(g,"gig-comment-photo-badge"),window.gigya.utils.DOM.removeClassFromElement(a,"gig-comment-colored-background"),s&&(s.style.display="none"),!1)},e.prototype.updateCommentHighlightingBadgesBackgroundColorForNewComment=function(e){if(e){var t=this.plugin.getHighlightingBadges(e,["comment"])[0];if(t){var i=this.getElement("self-data");window.gigya.utils.DOM.addClassToElement(i,t.commentClassName)}}},e.prototype.clearError=function(){this.error=null},e.prototype.updateStatus=function(e){null!=e&&(this.error=e);var t=this.getElement("status");t&&(window.gigya.utils.DOM.removeClassFromElement(t,"gig-comment-status-info"),window.gigya.utils.DOM.removeClassFromElement(t,"gig-comment-status-error"),window.gigya.utils.DOM.removeClassFromElement(t,"gig-comment-status-pending"),window.gigya.utils.DOM.removeClassFromElement(t,"gig-comment-status-moderator-edited"),this.error?(window.gigya.utils.DOM.addClassToElement(t,"gig-comment-status-error"),t.innerHTML=this.error):this.info?(window.gigya.utils.DOM.addClassToElement(t,"gig-comment-status-info"),t.innerHTML=this.info):this.isPostPending()?(window.gigya.utils.DOM.addClassToElement(t,"gig-comment-status-info"),t.innerHTML=this.plugin.textMode==n.TextMode.REVIEWS&&0==this.level?this.getText("your_review_is_awaiting_moderation"):this.getText("your_comment_is_awaiting_moderation")):this.data.moderatorEdit?(window.gigya.utils.DOM.addClassToElement(t,"gig-comment-status-moderator-edited"),window.gigya.utils.DOM.addClassToElement(t,"gig-comment-status-info"),t.innerHTML=this.plugin.textMode==n.TextMode.REVIEWS&&0==this.level?this.getText("review_edited_by_a_moderator"):this.getText("comment_edited_by_a_moderator")):t.innerHTML="")},e.prototype.updateReplies=function(e){void 0===e&&(e=!1);for(var t=0;t<this.replies.length;t++)this.replies[t].updateAll(e)},e.prototype.getTimeString=function(){var e=(new Date).getTime();(new Date).setTime(this.data.timestamp);var t=(e-this.data.timestamp)/1e3/60/60;return 60*t<1?this.getText("less_than_a_minute_ago"):t<1?1==Math.round(60*t)?this.getText("one_minute_ago"):this.getText("num_minutes_ago","%num",Math.round(60*t).toString()):t<24?1==Math.round(t)?this.getText("one_hour_ago"):this.getText("num_hours_ago","%num",Math.round(t).toString()):1==Math.round(t/24)?this.getText("one_day_ago"):this.getText("num_days_ago","%num",Math.round(t/24).toString())},e.prototype.bindAll=function(){var e=this,t=this.getContainer();t&&(this.bindButtonSubmitElement("repliesArrow",this.expandCollapse),this.bindButtonSubmitElement("deleteLink",this.showDeleteDialog),this.bindButtonSubmitElement("replyLink",this.showReplyBox),this.bindButtonSubmitElement("likeLink",this.onVotePosClick),this.bindButtonSubmitElement("vote-pos",this.onVotePosClick),this.bindButtonSubmitElement("vote-neg",this.onVoteNegClick),this.bindButtonSubmitElement("shareLink",this.onShareClick),this.bindButtonSubmitElement("editLink",this.onEditClick),this.bindButtonSubmitElement("flag",this.showFlagDialog),this.bindButtonSubmitElement("rating-drop",this.showRatings),window.gigya.utils.DOM.addEventListener(this.getContainer(),"mouseover",function(){return e.mouseOver()}),window.gigya.utils.DOM.addEventListener(this.getContainer(),"mouseout",function(){return e.mouseOut()}),window.gigya.utils.DOM.enableSafeCopy(t))},e.prototype.onEditClick=function(e){var t=this,i=this.getElement("editbox");if(i){this.plugin.tempComposeBox&&(this.plugin.tempComposeBox.data.ID==this.id?this.plugin.tempComposeBox.focus():this.plugin.tempComposeBox.close());var o=this.getElement("self-data");o.style.display="none",i.style.display="block";var n=this.getElement("photo");n&&(n.style.display="none");var s=this.getElement("title"),g=s.style.display;s&&(s.style.display="none"),this.plugin.tempComposeBox=new a.EditCommentBox(this.plugin,i,this.data,function(){o.style.display="",i.style.display="none",n&&(n.style.display=""),s&&(s.style.display=g),t.plugin.tempComposeBox=null}),this.plugin.tempComposeBox.open()}},e.prototype.showReplyBox=function(){var e=this;if(this.plugin.tempComposeBox){if(this.plugin.tempComposeBox.data.parentID==this.id)return void this.plugin.tempComposeBox.focus();this.plugin.tempComposeBox.close()}this.composebox=new o.NewCommentBox(this.plugin,this.getElement("replybox"),this.data.ID,function(){e.composebox=null,e.plugin.tempComposeBox=null}),this.plugin.tempComposeBox=this.composebox,this.composebox.open()},e.prototype.onShareClick=function(e){var t=this;if(e.target==this.plugin.simpleShareSource)this.plugin.simpleShareSource=null;else{var i=this.getElement("shareLink");i.id||(i.id=this.id+"_lnkShare"),this.plugin.simpleShareSource=i;var o=this.getShareUserAction(this.level>0);if(o&&this.plugin.settings.enableDirectCommentLinking&&(o.linkBack=window.gigya._.plugins.utils.URL.addOrReplaceHashFragment(o.linkBack,"gig_comment_id",this.id)),this.data.mediaItems&&this.data.mediaItems.length>0){var n=this.data.mediaItems[0];"rich"!=n.type.toLowerCase()&&"video"!=n.type.toLowerCase()||o.setDescription(o.description+"\n"+n.url)}window.gigya.socialize.showShareUI(this.plugin.params,{containerID:null,width:null,height:null,operationMode:"simpleShare",snapToElementID:i.id,userAction:o,onClose:function(){t.plugin.simpleShareSource=null,i.focus()}})}},e.prototype.getShareUserAction=function(e){var t=this.plugin.params.shareUserAction;if(t)return(t=t.clone()).description&&t.setDescription(this.replacePlaceholders(t.description)),t.title&&t.setTitle(this.replacePlaceholders(t.title)),t},e.prototype.replacePlaceholders=function(e){return e.replace(/%username/gi,this.data.sender.name||this.plugin.getText("guest")).replace(/%pagetitle/gi,document.title).replace(/%rating/gi,this.data.ratings&&this.data.ratings._overall?this.data.ratings._overall.toString():"").replace(/%commenttext/gi,this.data.commentText).replace(/%commenttitle/gi,this.data.commentTitle)},e.prototype.setVote=function(e,t){var i=this;if(this.plugin.user&&this.plugin.user.isConnected){if(!this.voteInProgress){switch(this.voteInProgress=!0,window.gigya.comments.vote(this.plugin.params,{vote:e,commentID:this.id,callback:function(){i.voteInProgress=!1}}),e){case"pos":this.data.posVotes++;break;case"neg":this.data.negVotes++}switch(this.data.vote){case"pos":this.data.posVotes--;break;case"neg":this.data.negVotes--}this.data.vote=e,this.updateVote();var o={eventName:"commentVoted",categoryID:this.plugin.params.categoryID,streamID:this.plugin.params.streamID,comment:this.data,vote:e,mode:this.plugin.textMode};window.gigya.events.dispatchForWidget(o,this.plugin.params),(o=window.gigya.utils.object.clone(o)).eventName="commentVote",window.gigya.events.dispatchForWidget(o,this.plugin.params)}}else this.plugin.settings.useSiteLogin?this.plugin.mainComposeBox.onSiteLoginClick():this.plugin.mainComposeBox.onLoginClick(t,!1,function(){i.setVote(e,t)})},e.prototype.onVotePosClick=function(e){var t=e.target||e.srcElement;"pos"==this.data.vote?this.setVote("none",t):this.setVote("pos",t)},e.prototype.onVoteNegClick=function(e){var t=e.target||e.srcElement;"neg"==this.data.vote?this.setVote("none",t):this.setVote("neg",t)},e.prototype.showDeleteDialog=function(){var e=this;if(this.plugin.settings.allowCommentDeletion){var t=this.plugin.textMode==n.TextMode.REVIEWS&&0==this.level?this.getText("delete_review"):this.getText("delete_comment"),i=this.plugin.textMode==n.TextMode.REVIEWS&&0==this.level?this.getText("are_you_sure_you_want_to_permanently_delete_your_review_qm"):this.getText("are_you_sure_you_want_to_permanently_delete_your_comment_qm");this.plugin.showDialog(t,i,this.getText("yes"),function(){e.deleteComment()},this.getText("no"))}},e.prototype.showFlagDialog=function(){var e=this;if(this.plugin.settings.enableFlagging&&!this.isFlagged){var t=this.getElement("flag");window.gigya.utils.DOM.addClassToElement(t,"gig-comment-flag-visible");var i=this.plugin.textMode==n.TextMode.REVIEWS&&0==this.level?this.getText("report_review_to_site_owner"):this.getText("report_comment_to_site_owner"),o=this.plugin.textMode==n.TextMode.REVIEWS&&0==this.level?this.getText("are_you_sure_you_want_to_mark_this_review_as_inappropriate"):this.getText("are_you_sure_you_want_to_mark_this_comment_as_inappropriate"),s=this.plugin.textMode==n.TextMode.REVIEWS&&0==this.level?this.getText("yes_flag_this_review"):this.getText("yes_flag_this_comment");this.plugin.showDialog(i,o,s,function(){e.flag(),t.focus()},this.getText("cancel"),function(){window.gigya.utils.DOM.removeClassFromElement(t,"gig-comment-flag-visible"),t.focus()})}},e.prototype.flag=function(){window.gigya.comments.flagComment(this.plugin.params,{commentID:this.id}),this.markAsFlagged(),this.plugin.saveState()},e.prototype.deleteComment=function(){window.gigya.comments.deleteComment(this.plugin.params,{commentID:this.id});for(var e=this.getParent();e;)e.descendantsCount--,e.updateRepliesCount(),e=e.getParent();this.plugin.updateCount(),this.changeStatus("deleted"),"published"===this.data.previousStatus&&(this.plugin.streamInfo.commentCount--,this.data.isReply()||this.plugin.streamInfo.ratingCount--),this.updateAll(),this.plugin.updateCount()},e.prototype.changeStatus=function(e){this.data.previousStatus=this.data.status,this.data.status=e},e}();t.Comment=g},161:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(29),n=function(){function e(e,t,i,o){void 0===o&&(o={}),this.container=e,this.plugin=t,this.providers=i,this.userIdentities=o,this.selectedProviders={},this.shownProviders={},this.initUI(),this.loadSelected()}return e.prototype.getSelected=function(){var e=[];for(var t in this.selectedProviders)e.push(t);return e},e.prototype.isProviderConnected=function(e){return this.userIdentities&&null!=this.userIdentities[e]},e.prototype.initUI=function(){var e=this;this.container.innerHTML="";for(var t=[],i=[],n=0;n<this.providers.length;n++){var s=this.providers[n];this.isProviderConnected(s.name)?t.push(s):i.push(s)}this.providers=t.concat(i);var a=this.plugin.params.minShareOptions||(this.plugin.isMobileUI?1:2),g=Math.max(a,t.length);for(n=0;n<this.providers.length;n++){s=this.providers[n];if(!this.getProviderElement(s.name)){var r=this.isProviderConnected(s.name),l=document.createElement("div");l.className="gig-comments-share-provider",l.style.backgroundImage='url("'+o.Images.getPhotoFullName("shareToProviders/"+s.name+"_"+(r?"color":"grey"),this.plugin.pixelRatio)+'")',l.setAttribute("data-provider",s.name),l.innerHTML='<div class="gig-comments-share-provider-checkbox gig-comments-checkbox" data-provider="'+s.name+'"></div>',l.setAttribute("aria-label",s.displayName),window.gigya.utils.DOM.addButtonSubmitListener(l,function(t){return e.providerClick(t)}),this.container.appendChild(l),n<g&&this.showProvider(s.name)}}if(this.providers.length>g){var m=document.createElement("div");m.className="gig-comments-share-more",m.setAttribute("data-provider","more"),m.setAttribute("aria-label",this.plugin.getText("show_more")),this.container.appendChild(m),window.gigya.utils.DOM.addButtonSubmitListener(m,function(){e.showMore(m)})}},e.prototype.showProvider=function(e){this.shownProviders[e]=1;var t=this.getProviderElement(e);t&&window.gigya.utils.DOM.addClassToElement(t,"gig-comments-share-provider-shown")},e.prototype.check=function(e,t){if(this.isProviderConnected(e)){this.selectedProviders[e]=1;var i=this.getProviderElement(e),o=window.gigya.utils.DOM.getElementsByClass(i,"gig-comments-checkbox")[0];window.gigya.utils.DOM.addClassToElement(o,"gig-comments-checkbox-checked")}else t||this.connectProvider(e)},e.prototype.uncheck=function(e){delete this.selectedProviders[e];var t=this.getProviderElement(e),i=window.gigya.utils.DOM.getElementsByClass(t,"gig-comments-checkbox")[0];window.gigya.utils.DOM.removeClassFromElement(i,"gig-comments-checkbox-checked")},e.prototype.isProviderChecked=function(e){return null!=this.selectedProviders[e]},e.prototype.providerClick=function(e){var t=this,i=(e.target||e.srcElement).getAttribute("data-provider");this.plugin.user.isConnected?this.isProviderChecked(i)?this.uncheck(i):this.check(i):window.gigya.socialize.login(this.plugin.params,{provider:i,callback:function(e){0==e.errorCode&&e.user&&e.user.identities&&(t.userIdentities=e.user.identities,t.updateProviderIcon(i),t.check(i))}})},e.prototype.getProviderElement=function(e){return window.gigya.utils.DOM.getElementsByAttribute(this.container,"*","data-provider",e)[0]},e.prototype.showMore=function(e){var t=this,i=window.gigya.utils.DOM.getElementPosition(e),n=document.createElement("div");this.divMore=n,n.setAttribute("role","dialog"),n.setAttribute("tabindex","-1"),n.style.position="absolute",null!=n.style.zIndex&&(n.style.zIndex=window.gigya.utils.DOM.getNextZIndex().toString()),n.className="gig-comments-container gig-composebox-morebox",document.body.appendChild(n);var s=window.gigya.utils.viewport.getInnerSize(),a=Math.max(0,window.gigya.localInfo.quirksMode?i.left-2:i.left);a+n.offsetWidth>s.w-40&&(a=(s.w-n.offsetWidth)/2),n.style.left=a+"px",n.style.top=i.top+e.offsetHeight-2+(window.gigya.localInfo.quirksMode?-2:0)+"px",n.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.composeShareMoreBox,{more_share_destinations:this.plugin.getText("more_share_destinations")});var g=window.gigya.utils.DOM.getElementsByClass(n,"gig-composebox-morebox-providers")[0];if(g)for(var r=0;r<this.providers.length;r++){var l=this.providers[r];if(!this.shownProviders[this.providers[r].name]&&l){var m=document.createElement("li");m.style.backgroundImage='url("'+o.Images.getPhotoFullName("shareToProviders/"+l.name+"_color",this.plugin.pixelRatio)+'")',m.innerHTML=l.displayName,m.setAttribute("data-provider",l.name),m.setAttribute("role","button"),m.setAttribute("tabindex","0"),window.gigya.utils.DOM.addButtonSubmitListener(m,function(e){return t.moreProviderClick(e)}),g.appendChild(m)}}var d=window.gigya.utils.DOM.getElementsByClass(n,"gig-composebox-morebox-close")[0];window.gigya.utils.DOM.addButtonSubmitListener(d,function(){return t.closeMore(e)}),window.gigya.pluginUtils.DOM.removeElementOnDocClickOrEscape(n,function(t,i){i&&t.target==e&&o.Events.cancelEvent(t)},null),n.focus()},e.prototype.closeMore=function(e){this.divMore&&this.divMore.parentNode.removeChild(this.divMore),e&&e.focus()},e.prototype.moreProviderClick=function(e){var t=(e.target||e.srcElement).getAttribute("data-provider");this.isProviderConnected(t)||this.connectProvider(t),this.closeMore(),this.showProvider(t)},e.prototype.connectProvider=function(e){var t=this;window.gigya.socialize.addConnection(this.plugin.params,{provider:e,callback:function(i){0==i.errorCode&&i.user&&i.user.identities&&(t.userIdentities=i.user.identities,t.updateProviderIcon(e),t.check(e))}})},e.prototype.updateProviderIcon=function(e){var t=this.isProviderConnected(e),i=this.getProviderElement(e);i&&(i.style.backgroundImage='url("'+o.Images.getPhotoFullName("shareToProviders/"+e+"_"+(t?"color":"grey"),this.plugin.pixelRatio)+'")')},e.prototype.updateIcons=function(){for(var e in this.userIdentities=this.plugin.user.identities,this.shownProviders)this.updateProviderIcon(e);if(this.plugin.user.isConnected)this.loadSelected();else for(var e in this.shownProviders)this.uncheck(e)},e.prototype.saveSelected=function(){window.gigya.utils.cookie.set("_gig_comments_selected_providers",this.getSelected().join(","))},e.prototype.loadSelected=function(){var e=window.gigya.utils.cookie.get("_gig_comments_selected_providers"),t=e?e.split(","):[],i=this.plugin.settings.shareToSNCheckboxChecked&&null==e;for(var o in this.shownProviders)i||window.gigya.utils.array.indexOf(t,o)>-1?this.check(o,!0):this.uncheck(o)},e}();t.ComposeShare=n},162:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),n=i(93),s=i(29),a=i(36),g=function(e){function t(t,i,o,n){return e.call(this,t,i,o,n)||this}return o.__extends(t,e),t.prototype.render=function(){e.prototype.render.call(this),this.populateFromCommentData(),this.renderMediaItemIfNeeded(),this.updateUI(),this.activate()},t.prototype.renderMediaItemIfNeeded=function(){this.data.mediaItems&&0!==this.data.mediaItems.length&&(this.mediaItem=this.data.mediaItems[0],this.showMediaItemPreview(),this.updateMediaItem())},t.prototype.populateFromCommentData=function(){this.uiElements.summaryInput&&this.data.commentTitle&&(this.uiElements.summaryInput.value=this.data.commentTitle,this.uiElements.summaryInput.refreshPlaceholder()),this.uiElements.textArea&&void 0!==this.data.commentText&&(this.uiElements.textArea.innerHTML=this.data.commentText,s.UserTagging.replaceSpansWithUserTags(this.uiElements.textArea))},t.prototype.submitCallback=function(t){for(var i=[],o=t.comment.ID;o;){var n=this.plugin.getComment(o);i.push({comment:n,oldDescendantsCount:n.descendantsCount}),o=n.data.parentID}if(e.prototype.submitCallback.call(this,t),0==t.errorCode){var s=this.plugin.getComment(t.comment.ID);s.data.replies=this.data.replies;for(var a=0,g=i;a<g.length;a++){var r=g[a],l=r.comment,m=r.oldDescendantsCount;l.descendantsCount=m,l.updateRepliesCount()}"pending"===s.data.status&&(this.plugin.streamInfo.commentCount--,this.plugin.updateCount())}},t.prototype.updateUI=function(){this.plugin.user.isConnected?e.prototype.updateUI.call(this):this.close()},t.prototype.getSubmitText=function(){return this.getText("done")},t.prototype.submit=function(){var e=this,t={commentID:this.data.ID,commentText:"disabled"!=this.plugin.settings.enableCommentBody?this.data.commentText:null,commentTitle:"disabled"==this.plugin.settings.enableCommentTitles||this.data.isReply()?null:this.data.commentTitle,taggedUsers:this.plugin.settings.enableUserTagging?this.data.taggedUsers:null,ratings:this.plugin.textMode==a.TextMode.REVIEWS?this.data.ratings:null,callback:function(t){return e.submitCallback(t)}};this.plugin.settings.enableMediaItems&&(t.mediaItems=this.data.mediaItems.length>0?this.data.mediaItems[0].url:[]),window.gigya.comments.updateComment(this.plugin.params,t);var i=this.plugin.getComment(this.data.ID);i.data=this.data,i.data.edited=!0,i.info="",i.error="",i.isPost=!0,i.isPostPending()&&(i.info=this.plugin.textMode==a.TextMode.REVIEWS&&0==i.level?this.getText("your_edited_review_is_awaiting_moderation"):this.getText("your_edited_comment_is_awaiting_moderation")),this.close(),i.updateAll()},t.prototype.afterRender=function(){this.hideElement(this.uiElements.logoutLink),this.hideElement(this.uiElements.shareSection),this.hideElement(this.uiElements.postAnonymouslySection),this.hideElement(this.uiElements.loginBar),this.uiElements.logoutLink=null,this.uiElements.shareSection=null,this.uiElements.postAnonymouslySection=null,this.uiElements.loginBar=null},t.prototype.getTitle=function(){return this.getText("editing")+"..."},t}(n.BaseComposeBox);t.EditCommentBox=g},163:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTemplates={commentsPlugin:['<div class="gig-comments-composebox"></div>','<div class="gig-comments-header"></div>','<div class="gig-comments-updates"></div>','<div class="gig-comments-comments"></div>','<div class="gig-comments-more"></div>'].join(""),commentsPluginComposeBottom:['<div class="gig-comments-header"></div>','<div class="gig-comments-updates"></div>','<div class="gig-comments-comments"></div>','<div class="gig-comments-more"></div>','<div class="gig-comments-composebox"></div>'].join(""),header:['<div class="gig-comments-header-left">','<div class="gig-comments-count"></div>',"</div>",'<ul class="gig-comments-header-right gig-comments-linksContainer" role="presentation">','<li class="gig-comments-sort">$sort</li>','<li class="gig-comments-subscribe">$subscribe</li>','<li class="gig-comments-rss">$rss</li>',"</ul>"].join(""),updates:['<div class="gig-comments-updates-text"></div>','<div class="gig-comments-updates-link"></div>'].join(""),comment:['<div class="gig-comment-title"></div>','<div class="gig-comment-photo"></div>','<div class="gig-comment-data">','<div class="gig-comment-editbox"></div>','<div class="gig-comment-self-data">','<div class="gig-comment-content">','<div class="gig-comment-header">','<div class="gig-comment-header-right">','<div class="gig-comment-viaProvider"></div>','<span class="gig-comment-edited">($edited)</span>','<span class="gig-comment-time"></span>',"</div>",'<div class="gig-comment-header-left">','<span class="gig-comment-username"></span>',"</div>","</div>",'<div class="gig-comment-status"></div>','<div class="gig-comment-body"></div>','<div class="gig-comment-mediaItem"></div>',"</div>",'<div class="gig-comment-footer">','<div class="gig-comment-footer-left">','<ul class="gig-comments-linksContainer" role="presentation">','<li class="gig-comment-likeLink" aria-atomic="true" aria-live="polite" aria-relevant="text">$like</li>','<li class="gig-comment-replyLink">$reply</li>','<li class="gig-comment-editLink">$edit</li>','<li class="gig-comment-deleteLink">$delete</li>','<li class="gig-comment-shareLink">$share</li>','<li class="gig-comment-repliesArrow">','<div class="gig-comment-repliesArrow-text"></div>','<div class="gig-comment-repliesArrow-img"></div>',"</li>","</ul>",'<div class="gig-comment-flag"></div>',"</div>",'<div class="gig-comment-footer-right">','<div class="gig-comment-vote-total"></div>','<div class="gig-comment-vote-pos" title="$like" aria-label="$like"></div>','<div class="gig-comment-vote-neg" title="$unlike" aria-label="$unlike"></div>',"</div>","</div>","</div>",'<div class="gig-comment-replybox"></div>','<div class="gig-comment-replies"></div>',"</div>"].join(""),mediaItem:['<div class="gig-media-display">','<div class="gig-media-thumbnail"></div>','<div class="gig-media-overlay">','<div class="gig-media-cancel"></div>','<div class="gig-media-play"></div>',"</div>","</div>",'<div class="gig-media-caption">','<a href="$url" target="_blank" class="gig-media-caption-url" style="background-image:url($providerIcon);">$displayUrl</a>','<div class="gig-media-caption-text">$caption</div>',"</div>"].join(""),dialog:['<div class="gig-comments-dialog">','<div class="gig-comments-dialog-caption-container">','<div class="gig-comments-dialog-caption"></div>','<div class="gig-comments-dialog-close"></div>',"</div>",'<div class="gig-comments-dialog-body"></div>','<div class="gig-comments-dialog-buttons">','<div class="gig-comments-dialog-button gig-comments-dialog-button-ok"></div>','<div class="gig-comments-dialog-button gig-comments-dialog-button-cancel"></div>',"</div>","</div>"].join(""),emailTextboxDialogBody:['<div class="gig-comments-dialog-text">$text</div>','<div class="gig-comments-dialog-textbox-container">','<input type="textbox" class="gig-comments-dialog-textbox" value="$email" aria-label="$emailLabel" />',"</div>",'<div class="gig-comments-dialog-button gig-comments-dialog-textbox-button">$buttonText</div>','<div class="gig-comments-dialog-error" aria-role="alert" aria-atomic="true" aria-live="polite"></div>'].join(""),photo:['<img class="gig-comment-img" alt="" src="$photoURL" style="vertical-align:top" aria-hidden="true" />$providerImage'].join(""),providerImage:'<div class="gig-comment-providerLogo" aria-hidden="true"><img alt="" src="$providerImageUrl" style="vertical-align:top" /></div>',composebox:['<div class="gig-composebox-error" role="alert" aria-atomic="true" aria-live="polite"></div>','<div class="gig-composebox-header">','<div class="gig-composebox-login">','<div class="gig-composebox-social-login gig-comments-button">$login<div class="gig-composebox-login-icon"></div><div class="gig-composebox-login-drop-icon"></div></div>','<div class="gig-composebox-site-login">$login</div>','<div class="gig-composebox-or">$or</div>','<div class="gig-composebox-guest-login gig-comments-button">$guest</div>',"</div>",'<div class="gig-composebox-header-right">','<div class="gig-composebox-follow" aria-atomic="true" aria-live="polite"></div>','<div class="gig-composebox-close"></div>',"</div>",'<div class="gig-composebox-header-left">','<div class="gig-composebox-title"></div>','<div class="gig-composebox-logout">(<span>$logout</span>)</div>','<div class="gig-composebox-ratings"></div>',"</div>","</div>",'<div class="gig-composebox-photo"></div>','<div class="gig-composebox-data">','<div class="gig-composebox-summary"><input class="gig-composebox-summary-input" data-placeholder="$summary" aria-label="$summary" /></div>','<div class="gig-composebox-editor"></div>','<div class="gig-composebox-mediaItem"></div>','<div class="gig-composebox-footer">','<div class="gig-composebox-footer-right">','<div class="gig-composebox-postAnonymously">','<div class="gig-composebox-anon-checkbox gig-comments-checkbox"></div>','<div class="gig-composebox-anon-text">$postAnonymously</div>',"</div>",'<div class="gig-composebox-cancel gig-comments-button">$cancel</div>','<div class="gig-composebox-post gig-comments-button">$post</div>',"</div>",'<div class="gig-composebox-footer-left">','<div class="gig-composebox-share">','<div class="gig-composebox-share-text">$share</div>','<div class="gig-composebox-share-providers"></div>',"</div>","</div>","</div>","</div>"].join(""),editor:['<ul class="gig-composebox-sidebar">','<li class="gig-composebox-sidebar-button gig-composebox-sidebar-font" title="$fontAlt" aria-label="$fontAlt"></li>','<li class="gig-composebox-sidebar-button gig-composebox-sidebar-media" title="$mediaAlt" aria-label="$mediaAlt"></li>','<li class="gig-composebox-sidebar-button gig-composebox-sidebar-tag" title="$tagAlt" aria-label="$tagAlt"></li>',"</ul>",'<div class="gig-composebox-textarea" contenteditable="true" role="textarea" aria-multiline="true" data-placeholder="$write_a_comment" aria-label="$write_a_comment" aria-required="true"></div>',"<p></p>"].join(""),mediaItemPlayer:['<div class="gig-comments-mediaplayer-top">','<div class="gig-media-cancel"></div>',"</div>",'<div class="gig-comments-mediaplayer-content" style="height:${playerHeight}px;">$playerHTML</div>','<div class="gig-comments-mediaplayer-bottom">','<div class="gig-comments-mediaplayer-caption" style="background-image:url($providerIcon);">$caption</div>',"</div>"].join(""),guestbox:['<div class="gig-guestbox-fields">','<input type="text" class="gig-guestbox-nickname" data-placeholder="$nickname" aria-label="$nickname" />','<input type="text" class="gig-guestbox-email" data-placeholder="$email" aria-label="$email" />',"</div>",'<div class="gig-guestbox-text">${email_not_displayed_publicly}</div>','<div class="gig-guestbox-ok">$ok</div>','<div class="gig-guestbox-error"></div>'].join(""),sortbox:["<ul>",'<li data-sort="dateDesc">$most_recent</li>','<li data-sort="dateAsc">$oldest</li>','<li data-sort="votesDesc">$most_voted</li>','<li data-sort="ratingDesc">$ratings</li>',"</ul>"].join(""),fontbox:["<ul>",'<li class="gig-composebox-font-bold" data-command="bold"></li>','<li class="gig-composebox-font-italic" data-command="italic"></li>','<li class="gig-composebox-font-underline" data-command="underline"></li>','<li class="gig-composebox-font-bullets" data-command="bullets"></li>',"</ul>"].join(""),mediabox:['<div class="gig-mediabox-fields">','<input type="text" class="gig-mediabox-url" placeholder="${enter_url}" aria-label="${enter_url}" value="$url" />','<div class="gig-mediabox-ok">$ok</div>','<div class="gig-mediabox-text">${add_media_item}</div>',"</div>"].join(""),composeShareMoreBox:['<div class="gig-composebox-morebox-caption">','<div class="gig-composebox-morebox-title">$more_share_destinations</div>','<div class="gig-composebox-morebox-close"></div>',"</div>",'<ul class="gig-composebox-morebox-providers">',"</ul>"].join(""),userTaggingBox:['<div class="gig-comments-usertaggingbox gig-comments-container">','<div class="gig-usertagging-title">$title</div>','<ul class="gig-usertagging-suggestions">',"</ul > ","</div> "].join(""),userTaggingOption:['<img src="$photoURL" alt="" class="gig-usertagging-userimage" aria-hidden="true" /><span class="gig-usertagging-username">$name</span>'].join(""),rating:'<div class="gig-comment-rating-title"></div><div class="gig-comment-rating-value"></div>',composeboxRating:'<div class="gig-composebox-rating-title"></div><div class="gig-composebox-rating-value"></div>',commentTitle:['<div class="gig-comment-rating"></div>','<div class="gig-comment-rating-drop"></div>','<div class="gig-comment-summary"></div>'].join(""),myReview:['<div class="gig-selfreview-header">','<div class="gig-selfreview-header-left">','<div class="gig-composebox-photo"></div>','<div class="gig-selfreview-nameAndLogout">','<div class="gig-selfreview-yourReview">$your_review</div>','<div class="gig-composebox-name"></div>','<div class="gig-composebox-logout" aria-label="$logout">(<span>$logout</span>)</div>',"</div>",'<div class="gig-selfreview-ratings"></div>',"</div>",'<div class="gig-selfreview-header-right">','<div class="gig-composebox-follow"></div>',"</div>","</div>",'<div class="gig-selfreview-summary-container">','<span class="gig-selfreview-field-title">$summary</span><span class="gig-selfreview-summary"></span>',"</div>",'<div class="gig-selfreview-body-container">','<span class="gig-selfreview-field-title">$review</span><span class="gig-selfreview-body"></span>',"</div>"]}},164:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(29);t.defaultCss={reset:[".gig-comments-container *, *.gig-comments-container {","word-wrap:break-word;padding:0px;margin:0px;color:inherit;text-decoration:none;width:auto;float:none;","font-family:arial;color:#333333;position:static;text-align:left;vertical-align:baseline;-moz-box-sizing: content-box;-webkit-box-sizing: content-box;box-sizing: content-box;}"].join(""),resetRtl:".gig-comments-container *, *.gig-comments-container {direction:rtl;text-align:right;}",global:[".gig-comments-container input {outline:none}",".gig-comments-container .gig-composebox-summary-input { font-weight: bold; }",".gig-comments-container .gig-composebox-summary-input.gig-comments-placeholder { font-weight: bold; }",".gig-comments-container .gig-comments-placeholder {color: #999;opacity:1}",".gig-comments-container input:-moz-placeholder {color: #585858;opacity:1}",".gig-comments-container input::-moz-placeholder {color: #585858;opacity:1}",".gig-comments-container input::-webkit-input-placeholder  {color: #585858;opacity:1}",".gig-comments-container input:-moz-placeholder {color: #585858;opacity:1}","*.gig-comments-container u {text-decoration:underline}",".gig-comments-container li {margin:0;padding:0;list-style-type:none}",".gig-comments-container ul {margin:0;padding:0;}","*.gig-composebox-textarea ul, .gig-comment-body ul {padding-left:20px;}","*.gig-composebox-textarea li, .gig-comment-body li {list-style-type:disc}",".gig-comments-container * {}","*.gig-comments-container-progress {width:100%;height:38px;background-repeat:no-repeat;background-position:center center;background-image:url('"+o.Images.getPhotoFullName("progress_ani_gif",1,"gif")+"')}",".gig-comments-hires-icons *.gig-comments-container-progress {background-size:contain;background-image:url('"+o.Images.getPhotoFullName("progress_ani_gif",0,"gif")+"')}","*.gig-clearfix {clear:both}","*.gig-comments-header {overflow:hidden;border-bottom: 1px solid #EBEBEB; margin-bottom:8px;padding-bottom:8px; }","*.gig-comments-count {font-size:16px;font-weight:bold;}","*.gig-comments-header-right {float:right;}","*.gig-comments-header-left {float:left;}","*.gig-comments-linksContainer {display:inline-block;}","*.gig-comments-linksContainer li, *.gig-comments-linksContainer a, *.gig-comments-linksContainer li a:hover, *.gig-comments-linksContainer a:active, *.gig-comments-linksContainer a:visited, *.gig-comments-linksContainer a:link {color:#999999; cursor:pointer;display:inline-block;}","*.gig-comments-linksContainer li {margin-right:3px;}",'*.gig-comments-linksContainer li:after {content:" "; width:2px; height:2px; background-color:#999999; vertical-align:middle; margin-left:3px; display:inline-block;}','*.gig-comments-linksContainer *.gig-comments-link-lastVisible:after {content:"";margin:0;display:none;}',"*.gig-comments-linksContainer *.gig-comments-link-lastVisible {margin-right:0;}","*.gig-comment { width: 100%; outline: 0; }","*.gig-comment * {color:#999999; }","*.gig-comment .gig-comment-content {padding-left:6px;transition-property:background-color, padding;}","*.gig-comment-newComment .gig-comment-content {padding: 6px; background-color: #CEFAD3; border-radius:4px;}","*.gig-comment-summary {display:inline-block;font-size: 13px;font-weight:bold;vertical-align:top; color:#333333;font-size: 14px;}","*.gig-comment-photo {float:left;width: 37px; height:37px;}","*.gig-comment-providerLogo {text-align:right;}","*.gig-comment-providerLogo img {width:14px;height:14px;margin-top:-11px; margin-right:-3px;display:inline-block;}","*.gig-comment-data {padding-left:41px;}","*.gig-comment-header { overflow:hidden; margin-bottom:6px; }","*.gig-comment-header-right { float:right; }","*.gig-comment-time {font-size: 11px;display:inline-block;margin:2px 0 0 10px; float: right;}","*.gig-comment-username {font-weight:bold;color:#333333; margin-right:6px; display:inline-block; }","*.gig-comment-body, .gig-comment-body * {color:#585858; line-height:18px;}","*.gig-comment-footer, *.gig-comment-replies {padding-left: 6px}","*.gig-comment-replies {transition-property: max-height;overflow:hidden;}","*.gig-comment-replies-collapsed {display:none;}","*.gig-comment-footer {font-size:11px;overflow:hidden;border-bottom: 1px solid #EBEBEB;margin: 10px 0; padding-bottom:10px;}",'*.gig-comment[data-level="0"]:last-of-type *.gig-comment-footer:last-ch {border-bottom:none;}',"*.gig-comment-footer-left {float:left;}","*.gig-comment-footer li{cursor:pointer;}","*.gig-comment .gig-comment-replybox {display:none;background-color:#F6F6F6; padding:4px 6px;}","*.gig-comment .gig-comment-replybox-open {display:block; margin-bottom: 10px;}","*.gig-comment .gig-composebox-title, *.gig-comment .gig-composebox-title * {font-weight:normal; font-style:italic;color:#333333}","*.gig-comment *.gig-composebox-username {font-weight:bold;}","*.gig-comment-repliesArrow div {display:inline-block}","*.gig-comment-repliesArrow-img {margin: 0 1px 0 6px; width: 9px; height:9px; margin-right:3px;background-image: url('"+o.Images.getPhotoFullName("Reply_Arrow",1)+"');background-repeat:no-repeat;background-position:0px 3px;}",".gig-comments-hires-icons *.gig-comment-repliesArrow-img {background-size:contain; background-image: url('"+o.Images.getPhotoFullName("Reply_Arrow")+"');}","*.gig-comment-repliesArrow .gig-comment-repliesArrow-img {}","*.gig-comment-repliesArrow-collapsed .gig-comment-repliesArrow-img {-webkit-transform:rotate(270deg); transform:rotate(270deg);}","*.gig-comment-status {display:none;border-radius: 3px;color:#FFFFFF;padding:2px 8px; border-radius:3px;margin-bottom:6px;}","*.gig-comment-body a:link {color:#007ACF;text-decoration: underline;}","*.gig-comment-body a:visited {color:#61007d;text-decoration: underline;}","*.gig-comment-status-info {display:inline-block;background-color:#64B46F;}","*.gig-comment-status-error {display:inline-block;background-color:#D0605F;margin-bottom:6px;}","*.gig-comment-viaProvider {display:inline-block;font-style:italic;margin:0 12px;padding: 0 0 0 12px;background-repeat:no-repeat;background-position:left center;}","*.gig-comment-viaProvider-facebook {background-image: url('"+o.Images.getPhotoFullName("/providers/Facebook_9x9",1)+"');}",".gig-comments-hires-icons *.gig-comment-viaProvider-facebook {background-size:contain; background-image: url('"+o.Images.getPhotoFullName("/providers/Facebook_9x9")+"');}",".gig-comments-hires-icons *.gig-loginbox-provider {background-size:15px;}","img.gig-comment-img {border-radius:3px;}","*.gig-comment-footer-right {float:right;}","*.gig-comment-footer-right div {display:inline-block;height:17px;line-height:16px;vertical-align:bottom;}","*.gig-comment-vote-pos, *.gig-comment-vote-neg {cursor:pointer;background-repeat:no-repeat;background-position: 0 0;padding-left: 14px;}","*.gig-comment-vote-with-value {padding-left: 17px;}","*.gig-comment-vote-total {margin-right:5px;}","*.gig-comment-vote-pos {background-size:14px 14px;background-image: url('"+o.Images.getPhotoFullName("Thumbs_up",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-pos {background-image: url('"+o.Images.getPhotoFullName("Thumbs_up")+"')}","*.gig-comment-vote-pos-down {background-size:14px 14px;background-image: url('"+o.Images.getPhotoFullName("Thumbs_up_pressed",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-pos-down {background-image: url('"+o.Images.getPhotoFullName("Thumbs_up_pressed")+"')}","*.gig-comment-vote-neg {background-size:14px 14px;background-image: url('"+o.Images.getPhotoFullName("Thumbs_down",1)+"');margin-left:15px;position:relative; background-position: 0 3px; }",".gig-comments-hires-icons *.gig-comment-vote-neg {background-image: url('"+o.Images.getPhotoFullName("Thumbs_down")+"');}","*.gig-comment-vote-posneg *.gig-comment-vote-neg {margin-left:2px;}","*.gig-comment-vote-neg-down {background-size:14px 14px;background-image: url('"+o.Images.getPhotoFullName("Thumbs_down_pressed",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-neg-down {background-image: url('"+o.Images.getPhotoFullName("Thumbs_down_pressed")+"')}","*.gig-comment-flag {margin: 0 15px;vertical-align:top;display:inline-block;width: 14px; height: 14px; visibility:hidden; cursor:pointer;background-image: url('"+o.Images.getPhotoFullName("Flag_Icon",1)+"')}",".gig-comments-hires-icons *.gig-comment-flag {background-size:contain;background-image: url('"+o.Images.getPhotoFullName("Flag_Icon")+"')}","*.gig-comment-flag-submitted {cursor:default;visibility:visible;background-image: url('"+o.Images.getPhotoFullName("Flag_Icon_Submitted",1)+"')}",".gig-comments-hires-icons *.gig-comment-flag-submitted {background-size:contain;background-image: url('"+o.Images.getPhotoFullName("Flag_Icon_Submitted")+"')}","*.gig-comments-more {cursor:pointer;border-radius:3px; line-height: 38px;border: 1px solid #F7F6F6; background-color:#F9F9F9;text-align:center;}","*.gig-comments-more:hover {background-color: #E5E5E5}","*.gig-comments-more-progress {cursor:default;width:100%;height:38px;background-repeat:no-repeat;background-position:center center; background-image:url('"+o.Images.getPhotoFullName("progress_ani_gif",0,"gif")+"')}",".gig-comments-hires-icons *.gig-comments-more-progress {background-image:url('"+o.Images.getPhotoFullName("progress_ani_gif",0,"gif")+"')}","*.gig-comments-more-progress:hover {background-color:#F9F9F9;}","*.gig-comments-dialog {min-width: 367px;min-height:140px;border: 6px solid #858585; border-radius: 5px; background-color:#FFFFFF;}","*.gig-comments-dialog-close {background-image:url('"+o.Images.getPhotoFullName("close_icon",1)+"'); width:15px; height:15px; float:right; cursor:pointer;}",".gig-comments-hires-icons *.gig-comments-dialog-close {background-image:url('"+o.Images.getPhotoFullName("close_icon")+"'); background-size: contain;}","*.gig-comments-dialog-caption-container {overflow:hidden;background-color: #f3f3f3; padding: 5px 5px 5px 12px;overflow:auto;zoom:1;font-size: 14px;font-weight:bold;color: #4d4d4d;}","*.gig-comments-dialog-caption {display:inline-block;float:left;}","*.gig-comments-dialog-body{padding:24px 12px 12px 12px;}","*.gig-comments-dialog-buttons{margin-top:12px;text-align:right;margin: 20px;}","*.gig-comments-dialog-text {margin-bottom:10px;}","*.gig-comments-dialog-textbox-container {float:left}","*.gig-comments-dialog-textbox {width: 260px;color: #4D4D4D;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;padding:0 4px;background-color:white;border: 1px solid #C0C0C0;height:24px;box-shadow:inset 0 0 4px #DCDCDC; -moz-box-shadow:inset 0 0 4px #DCDCDC; -webkit-box-shadow:inset 0 0 4px #DCDCDC;}","*.gig-comments-dialog-subscribe-okIcon {background-image:url('"+o.Images.getPhotoFullName("ok_icon",1)+"');width:14px;height:14px;position:relative;top:2px;margin-right:2px;display:inline-block;}",".gig-comments-hires-icons *.gig-comments-dialog-subscribe-okIcon {background-image:url('"+o.Images.getPhotoFullName("ok_icon")+"');}","*.gig-comments-dialog-button {","line-height:22px;font-size:12px;margin-left:7px;font-weight:bold;min-width: 50px;","position:relative;border-radius: 3px; color:#4d4d4d;cursor:pointer;","font-size: 11px;padding: 0 5px; border: 1px solid #C5C7C7;display:inline-block;zoom:1;vertical-align:middle; text-align:center;","box-shadow:0 0 2px RGBA(0,0,0,0.15);-webkit-box-shadow:0 0 2px RGBA(0,0,0,0.15);-moz-box-shadow:0 0 2px RGBA(0,0,0,0.15);","gradient(#FFFFFF,#EAEBEB)}}","*.gig-comments-dialog-button:hover {","color:#b4b4b4;cursor:default;","gradient(#EBEBEB,#FFFFFF)}","*.gig-comments-dialog-error {color: #ce585a;font-size:11px;margin-top:5px;clear:both;}","*.gig-comments-dialog-textbox-button {}","*.gig-composebox {margin-bottom: 23px;}","*.gig-composebox-login {}","*.gig-composebox-login div {display:inline-block;line-height:30px;font-weight: bold; }","*.gig-composebox-or {margin: 0 10px;}","*.gig-composebox-social-login, *.gig-composebox-guest-login, *.gig-composebox-site-login {","border-radius: 3px;cursor:pointer;padding: 0 15px;font-size: 14px;box-shadow: inset 1px 1px #fff;border: solid 1px #e2e2e2;","gradient(#f5f5f5,#f1f1f0);","}","*.gig-composebox-social-login:hover, *.gig-composebox-guest-login:hover, *.gig-composebox-site-login:hover {gradient(#EFEFEF,#E1E1E1);}","*.gig-composebox-social-login {padding:0 9px;background-repeat:no-repeat;background-position:right center;gradient(#f5f5f5,#f1f1f0);}","*.gig-composebox-social-login:hover {gradient(#EFEFEF,#E1E1E1);}","*.gig-composebox-login-icon {background-position:center;display:inline-block;width: 36px; height:17px;margin:0 7px;vertical-align:middle;background-repeat:no-repeat;background-image: url('"+o.Images.getPhotoFullName("Login-icons-fb_tw",1)+"')}",".gig-comments-hires-icons *.gig-composebox-login-icon {background-size:contain;background-image: url('"+o.Images.getPhotoFullName("Login-icons-fb_tw")+"')}","*.gig-composebox-login-drop-icon {background-position:center;display:inline-block;width: 9px; height:17px;vertical-align:middle;background-repeat:no-repeat;background-image: url('"+o.Images.getPhotoFullName("Login_icons_arrow",1)+"')}",".gig-comments-hires-icons *.gig-composebox-login-drop-icon {background-size:contain;background-image: url('"+o.Images.getPhotoFullName("Login_icons_arrow")+"')}","*.gig-composebox-header { transition-property:max-height; overflow:hidden; margin-bottom:4px; }",".gig-composebox-open *.gig-composebox-header { margin-bottom:4px;}",".gig-comments-reviews .gig-composebox-header, .gig-comments-reviews .gig-composebox-open .gig-composebox-header {max-height:none;}","*.gig-composebox-header-left {float:left;}","*.gig-composebox-header-right {float:right;}","*.gig-composebox-header-right *, *.gig-composebox-header-left * {vertical-align:bottom;}","*.gig-composebox-title, *.gig-composebox-name {display:inline-block;font-size:14px;font-weight:bold;margin:0 5px 0 0;}","*.gig-composebox-logout {cursor:pointer;display:inline-block;font-size:11px; color: #999999;}","*.gig-composebox-logout span {font-size:12px; color:#0796c6}","*.gig-composebox-logout:hover span {text-decoration:underline}","*.gig-composebox-close {visibility:hidden;}","*.gig-comment-replybox *.gig-composebox-close {visibility:visible; display:inline-block; margin-left:5px; cursor:pointer; width: 15px; height: 15px; background-image:url('"+o.Images.getPhotoFullName("close_icon",1)+"'); background-position:center; background-repeat:no-repeat;}",".gig-comments-hires-icons *.gig-comment-replybox *.gig-composebox-close {background-image:url('"+o.Images.getPhotoFullName("close_icon")+"'); background-size: contain; }","*.gig-comment-replybox *.gig-composebox-close:hover { background-color: #ebebeb; }","*.gig-composebox-follow {font-size:13px;cursor:pointer;display:inline-block; color:#919191;padding-left: 12px;","background-repeat: no-repeat; background-position: left center;background-size: 8px 8px;background-image: url('"+o.Images.getPhotoFullName("Follow",1)+"')}",".gig-comments-hires-icons *.gig-composebox-follow {background-image: url('"+o.Images.getPhotoFullName("Follow")+"')}","*.gig-composebox-following {background-size: 8px 8px;background-image: url('"+o.Images.getPhotoFullName("Following",1)+"')}",".gig-comments-hires-icons *.gig-composebox-following {background-image: url('"+o.Images.getPhotoFullName("Following")+"')}","*.gig-composebox-following:hover {background-size: 8px 8px;background-image: url('"+o.Images.getPhotoFullName("Unfollow",1)+"')}",".gig-comments-hires-icons *.gig-composebox-following:hover {background-image: url('"+o.Images.getPhotoFullName("Unfollow")+"')}","*.gig-composebox-photo {float:left;width: 37px;height:37px}","*.gig-composebox-data {padding-left:47px;}","*.gig-comments-composebox *.gig-composebox-data {margin-bottom:20px;}","*.gig-composebox-footer {display:none;overflow:hidden;margin-top:4px;}",".gig-composebox-open *.gig-composebox-footer {display:block;}","*.gig-composebox-footer-left, *.gig-composebox-footer-right {padding: 2px 0;}","*.gig-composebox-footer-left {float:left;}","*.gig-composebox-footer-right {float:right;}","*.gig-composebox-cancel {cursor:pointer; padding: 0 18px; font-size: 14px; font-weight:bold; color: #484848; display:inline-block;","line-height: 28px; border-radius: 3px; background-color: #484848; box-shadow: 1px 1px rgba(255, 255, 255, 0.4) inset;","border: 1px solid #bfbfbf; gradient(#e2e2e2, #bfbfbf); margin-right: 6px;}","*.gig-composebox-cancel:hover {gradient(#e2e2e2, #bfbfbf);}","*.gig-composebox-post {cursor:pointer;padding: 0 18px; font-size: 14px; font-weight:bold; color: #FFFFFF; display:inline-block;","line-height: 28px; border-radius: 3px; background-color: #D8D8D8; box-shadow: 1px 1px rgba(255, 255, 255, 0.4) inset;","border: 1px solid #51AE48; gradient(#88cb82,#72c26d);}","*.gig-comments-button {cursor: -moz-user-select: none; -khtml-user-select: none; -webkit-user-select:none; -o-user-select:none; }","*.gig-composebox-post:hover {gradient(#7AB574,#68AF63);}","*.gig-composebox-postAnonymously {display:inline-block;}","*.gig-composebox-anon-text { vertical-align:middle;display:inline-block;font-family:arial;font-size:12px;color:#999999;padding:0 10px 0 5px;}","*.gig-composebox-anon-checkbox { vertical-align:middle;}","*.gig-composebox-summary {display:none;padding: 9px;}",".gig-composebox-open *.gig-composebox-summary {display:block;margin-bottom:5px;}","*.gig-composebox-summary input {width:100%;border:none;color:#585858;}","*.gig-composebox-editor {text-align: right;padding: 0 9px 9px 9px;}","*.gig-composebox-editor-with-sidebar {padding: 0 29px 9px 9px;}","*.gig-composebox-editor, *.gig-composebox-summary {","background-color: #FFFFFF; border: 1px solid #D5D5D5; ","border-radius: 3px;box-shadow: 0 0 5px rgba(0, 0, 0, 0.05) inset; border: solid 1px #d5d5d5;}","*.gig-composebox-textarea { line-height:18px;transition-property: min-height; text-align:left;cursor: text;min-height:17px;resize: none;border:none;margin-top:9px; outline:none}","*.gig-composebox-textarea, *.gig-composebox-textarea * {color:#585858;font-size: 14px;}","textarea.gig-composebox-textarea {overflow:hidden;width:100%;display:block;height:17px;}",".gig-composebox-open textarea.gig-composebox-textarea {height:65px;}",".gig-composebox-open *.gig-composebox-textarea {min-height:69px;}","*.gig-composebox-textarea, *.gig-composebox-textarea *, *.gig-composebox-summary input {font-size:12px;}","*.gig-composebox-textarea:empty:not(:focus):before {color:#999; content:attr(data-placeholder);}","ul.gig-composebox-sidebar {display:none;background-color:#FFFFFF;float:right;margin-right:-29px;}","ul.gig-composebox-sidebar {transition-property:opacity;opacity:0;}",".gig-composebox-open *.gig-composebox-sidebar {opacity:1;display:inline-block;}",".gig-comments-hires-icons *.gig-composebox-sidebar-button {background-size: 18px 18px; }","*.gig-composebox-sidebar-button {border-radius:0px;background-color: #f0f0f0; width: 29px;height:29px;display:block;background-color:#F7F3F7;}","*.gig-composebox-sidebar-button:last-child:nth-child(-n+2) { border-radius:0 0 0 3px; }","*.gig-composebox-sidebar-button:hover, *.gig-composebox-sidebar-button-down {background-color: #f1f1f1;box-shadow: inset 0 0 9px rgba(0,0,0,.26);}","*.gig-composebox-sidebar-font {cursor:pointer;width: 29px;height:29px;background-repeat:no-repeat;background-position:center; background-image: url('"+o.Images.getPhotoFullName("Rich_Text_up",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-font {background-image: url('"+o.Images.getPhotoFullName("Rich_Text_up")+"')}","*.gig-composebox-sidebar-font:hover, *.gig-composebox-sidebar-font.gig-composebox-sidebar-button-down {background-image: url('"+o.Images.getPhotoFullName("Rich_Text_hover",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-font:hover, .gig-comments-hires-icons *.gig-composebox-sidebar-font.gig-composebox-sidebar-button-down {background-image: url('"+o.Images.getPhotoFullName("Rich_Text_hover")+"')}","*.gig-composebox-sidebar-tag {cursor:pointer;width: 29px;height:29px;background-repeat:no-repeat;background-position:center; background-image: url('"+o.Images.getPhotoFullName("User_tagging_up",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-tag {background-image: url('"+o.Images.getPhotoFullName("User_tagging_up")+"')}","*.gig-composebox-sidebar-tag:hover, *.gig-composebox-sidebar-tag.gig-composebox-sidebar-button-down {background-image: url('"+o.Images.getPhotoFullName("User_tagging_hover",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-tag:hover, *.gig-composebox-sidebar-tag.gig-composebox-sidebar-button-down {background-image: url('"+o.Images.getPhotoFullName("User_tagging_hover",1)+"')}","*.gig-composebox-sidebar-media {cursor:pointer;width: 29px;height:29px;background-repeat:no-repeat;background-position:center; background-image: url('"+o.Images.getPhotoFullName("Media_up",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-media {background-image: url('"+o.Images.getPhotoFullName("Media_up")+"')}","*.gig-composebox-sidebar-media:hover, *.gig-composebox-sidebar-media.gig-composebox-sidebar-button-down {background-image: url('"+o.Images.getPhotoFullName("Media_hover",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-media:hover, .gig-comments-hires-icons *.gig-composebox-sidebar-media.gig-composebox-sidebar-button-down {background-image: url('"+o.Images.getPhotoFullName("Media_hover")+"')}","*.gig-composebox-field-error {border: 1px solid #F9888E;}","*.gig-composebox-error {border-radius:3px;color: #FFFFFF;text-align:center;line-height:22px;background:#F9888E;margin-bottom:7px;display:none;font-weight:bold;font-size:13px;}","*.gig-composebox-postAnonymously { cursor:pointer; vertical-align:top; padding-top:4px;}","*.gig-comments-checkbox { width: 10px;height: 10px; border:1px solid #C6C6C6;display:inline-block;\tborder-radius: 1px; background-color: #fff;box-shadow: 0 0 5px rgba(189, 189, 189, 0.25) inset}","*.gig-comments-checkbox-checked {background-image:url('"+o.Images.getPhotoFullName("shareToProviders/checkmark",1)+"'); background-position:center; background-repeat:no-repeat;}",".gig-comments-hires-icons *.gig-comments-checkbox-checked {background-size:contain; background-image:url('"+o.Images.getPhotoFullName("shareToProviders/checkmark")+"');}","*.gig-selfreview-header {overflow:hidden;}","*.gig-selfreview-header-left {float:left;}","*.gig-selfreview-header-right {float:right;}","*.gig-selfreview-summary-container, *.gig-selfreview-body-container {background-color:#EDEDED; margin: 5px 0;padding:6px 10px;border-radius:3px;}","*.gig-selfreview-field-title {font-weight:bold;margin:0 7px 0 0;}","*.gig-selfreview-nameAndLogout {padding: 0 0 0 47px;height:37px;}","*.gig-selfreview-yourReview {font-weight:bold;color:#919191;margin-bottom:3px;}","*.gig-selfreview-ratings {margin: 5px 0}","*.gig-selfreview-rating .gig-comment-rating-value {margin-left:2px; }","*.gig-selfreview-rating-_overall .gig-comment-rating-value {margin-left:0px; }","*.gig-selfreview-rating-_overall.gig-selfreview-rating {margin-bottom:5px;}","*.gig-comments-guestbox {transition-property: max-height;background-color:#FFFFFF;border: 1px solid #E2E2E2; border-radius: 0 3px 3px 3px; overflow:hidden;width:150px;font-size:10px;color:#919191;padding: 0 13px 0 13px}","*.gig-comments-guestbox input {width:150px;border-radius:3px; height:24px; line-height:22px;color:#919191;border:1px solid #C0C0C0;padding-left:2px;}","*.gig-guestbox-fields {margin: 16px 0 0px;}","*.gig-guestbox-nickname {margin: 0px 0 10px;}","*.gig-guestbox-text {font-size:10px;margin: 5px 0;}","*.gig-guestbox-ok {margin-bottom: 8px;float:right;display:inline-block;cursor:pointer;padding: 0 9px;font-weight: bold;color: #222121;text-shadow: 0 2px rgba(255, 255, 255, .4);","line-height: 22px;border-radius: 3px;background-color: #f2f2f2;box-shadow: 0 1px 3px rgba(0, 0, 0, .25), inset 0 0 2px rgba(255, 255, 255, .24);","border: solid 1px #c4c7cd; }","*.gig-guestbox-error {margin-left: 4px; display:inline-block;color:#e70707;font-size:10px;width:100px;float:left;margin-bottom: 8px;}","*.gig-comments-loginbox {transition-property: max-height;background-color:#FFFFFF;border: 1px solid #E2E2E2; border-radius: 0 0 3px 3px; overflow:hidden;min-width:115px;font-size:10px;color:#919191;}","*.gig-comments-loginbox-open {}","*.gig-loginbox-provider {background-repeat:no-repeat; background-position:left center; margin-left:9px; padding:8px 8px 8px 22px; cursor:pointer;border-bottom: 1px solid #EAEAEA}","*.gig-loginbox-provider:last-child {border-bottom:none;}","*.gig-loginbox-provider:hover {background-color:#F9F9F9}","*.gig-loginbox-provider[data-provider=more] { padding-left:0px }","*.gig-signinbox-provider {margin-left:8px; padding:8px 8px 8px 1px; cursor:default; border-bottom: 1px solid #EAEAEA}","*.gig-comments-usertaggingbox { width:290px; border-radius:3px; background-color:#FFF; border: solid 1px #d5d5d5; font-family:arial; }","*.gig-usertagging-title { color:#666666; background-color:#F4F4F4; font-size:10px; border-radius:2px; padding:7px; font-family:inherit; }","*.gig-usertagging-suggestions { list-style-type:none; margin:0; padding:0px; font-family:inherit; font-size:12px; }","*.gig-usertagging-suggestions li { cursor:pointer;padding-left:8px; border-top:solid 1px #eaeaea;height:18px;padding-top:4px;padding-bottom:4px;","}","*.gig-usertagging-suggestions li *.gig-usertagging-username { margin-left:8px;vertical-align:top;line-height:20px; }","*.gig-usertagging-suggestions li *.gig-usertagging-userimage { border-radius:3px;width:18px;height:18px; }","*.gig-usertagging-suggestions li.gig-usertagging-selected { background-color:#f9f9f9; }","*.gig-usertagging-tag { -webkit-appearance: none; border-radius:8px 9px 9px 8px / 8px 8px 10px 10px; background-color:#d5e4f2; border-style:none; padding:0px 4px 0px 4px;"," }","*.gig-composebox-share {vertical-align:top;overflow:hidden;background-color:#F4F4F4; border-radius:3px; padding-left:4px;}","*.gig-comment .gig-composebox-share {border: 1px solid #E8E8E8}","*.gig-composebox-share-text {line-height:26px;vertical-align:top;display:inline-block;color:#999999;}","*.gig-composebox-share-providers {display:inline-block;}","*.gig-comments-share-provider {display:none;height:18px;width:36px;background-position: 23px center;padding:4px 3px;background-repeat:no-repeat;cursor:pointer; border-right: 1px solid #FFFFFF;}",".gig-comments-hires-icons *.gig-comments-share-provider {background-size:16px 16px}","*.gig-comments-share-provider-shown {display:inline-block;}","*.gig-comments-share-more {cursor:pointer; vertical-align:top; padding:4px; display:inline-block; height:18px; width:16px; background-position:center; background-repeat:no-repeat; background-image: url('"+o.Images.getPhotoFullName("sharetoProviders/Share_More_providers",1)+"')}",".gig-comments-hires-icons *.gig-comments-share-more {background-size:8px 8px; background-image: url('"+o.Images.getPhotoFullName("sharetoProviders/Share_More_providers")+"')}","*.gig-comments-share-provider-checkbox { margin-top:3px; }","*.gig-composebox-morebox {width: 265px;border: 5px solid #858585; border-radius:3px;}","*.gig-composebox-morebox-caption {background-color:#F3F3F3;overflow:hidden;line-height: 15px;padding: 3px;}","*.gig-composebox-morebox-title {margin-left:3px;font-weight:bold; float:left;background-color:#F3F3F3;overflow:hidden;color:#4D4D4D;}","*.gig-composebox-morebox-close {float:right; background-image:url('"+o.Images.getPhotoFullName("close_icon",1)+"'); width:15px; height:15px; cursor:pointer; background-position:center; background-repeat:no-repeat;}",".gig-comments-hires-icons *.gig-composebox-morebox-close {background-image:url('"+o.Images.getPhotoFullName("close_icon")+"'); background-size:contain;}","*.gig-composebox-morebox *.gig-composebox-morebox-providers {padding: 0 6px; background-color:#FFFFFF;}","*.gig-composebox-morebox *.gig-composebox-morebox-providers li {padding-left: 18px; margin: 4px 0; width: 105px;display:inline-block;background-repeat:no-repeat;cursor:pointer;background-size: 14px;}","*.gig-comments-sortbox {margin-top:9px;border-radius: 3px;background-color: #fff;box-shadow: -1px 2px 1px rgba(35,31,32,.07);border: solid 1px #b0b0b0;padding: 3px 8px;display:inline-block;}",'*.gig-comments-sortbox:before {content:"";width: 13px;right: 12px;height:7px;display:inline-block;position:absolute;top:-7px;background-image:url(\''+o.Images.getPhotoFullName("Sort_dropdown_triangle",1)+"')}",".gig-comments-hires-icons *.gig-comments-sortbox:before {background-image:url('"+o.Images.getPhotoFullName("Sort_dropdown_triangle")+"')}","*.gig-comments-sortbox li {color:#999999;cursor:pointer; min-width: 80px; padding: 7px 5px; border-bottom: 1px solid #EAEAEA;}","*.gig-comments-sortbox li:last-child {border-bottom: none}","*.gig-comments-sortbox li:hover {color:#848484;background-color:#F4F4F4;}","*.gig-comments-sortbox-selected {font-weight:bold}","*.gig-comments-fontbox {padding-right: 8px;padding-top:7px;transition: opacity 0.25s; opacity:0; }",'*.gig-comments-fontbox ul:after {content:"";width: 8px;height:13px;display:inline-block;position:absolute;right:1px;top: 12px;background-image:url(\''+o.Images.getPhotoFullName("Sidebar_box_thub",1)+"')}",".gig-comments-hires-icons *.gig-comments-fontbox ul:after {background-image:url('"+o.Images.getPhotoFullName("Sidebar_box_thub")+"')}","*.gig-comments-fontbox ul {padding: 2px; width: 69px;background-color:#FFFFFF; border: 1px solid #B0B0B0; border-radius:2px;cursor:pointer;}","*.gig-comments-fontbox li {border: 1px none #EEEEEE;width: 33px;height:33px;display:inline-block;background-position:center;background-repeat:no-repeat}","*.gig-comments-fontbox *.gig-composebox-font-bold {border-right-style:solid;border-bottom-style:solid;background-image:url('"+o.Images.getPhotoFullName("Rich_Text_bold",1)+"')}",".gig-comments-hires-icons *.gig-comments-fontbox *.gig-composebox-font-bold {background-image:url('"+o.Images.getPhotoFullName("Rich_Text_bold")+"')}","*.gig-comments-fontbox *.gig-composebox-font-italic {border-bottom-style:solid;background-image:url('"+o.Images.getPhotoFullName("Rich_Text_italic",1)+"')}",".gig-comments-hires-icons *.gig-comments-fontbox *.gig-composebox-font-italic {background-image:url('"+o.Images.getPhotoFullName("Rich_Text_italic")+"')}","*.gig-comments-fontbox *.gig-composebox-font-underline {background-image:url('"+o.Images.getPhotoFullName("Rich_Text_underline",1)+"')}",".gig-comments-hires-icons *.gig-comments-fontbox *.gig-composebox-font-underline {background-image:url('"+o.Images.getPhotoFullName("Rich_Text_underline")+"')}","*.gig-comments-fontbox *.gig-composebox-font-bullets {border-left-style:solid;background-image:url('"+o.Images.getPhotoFullName("Rich_Text_align",1)+"')}",".gig-comments-hires-icons *.gig-comments-fontbox *.gig-composebox-font-bullets {background-image:url('"+o.Images.getPhotoFullName("Rich_Text_align")+"')}","*.gig-comments-mediabox { padding-right: 8px; transition: opacity 0.25s; opacity:0; "," }","*.gig-mediabox-fields {  padding:12px 6px 10px; width:382px; border: solid 1px #b0b0b0; border-radius: 2px; background-color: #fff; -webkit-box-shadow: -1px 2px 1px rgba(35,31,32,.07); -moz-box-shadow: -1px 2px 1px rgba(35, 31, 32, .07); box-shadow: -1px 2px 1px rgba(35, 31, 32, .07); }",'*.gig-mediabox-fields:after { content:""; width: 8px; height:13px; position:absolute; display:inline-block; right:1px; top:12px; background-image:url(\''+o.Images.getPhotoFullName("Sidebar_box_thub",1)+"')}",".gig-comments-hires-icons *.gig-mediabox-fields:after { background-image:url('"+o.Images.getPhotoFullName("Sidebar_box_thub")+"')}","*.gig-mediabox-url { vertical-align:top; padding-left:8px; margin-bottom:10px; margin-right:5px; width: 307px; height: 28px; border-radius: 3px; background-color: #fff; -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,.15); -moz-box-shadow: inset 0 0 5px rgba(0,0,0,.15); box-shadow: inset 0 0 5px rgba(0,0,0,.15); border: solid 1px #d5d5d5; }","*.gig-mediabox-url:empty:before {color:#585858; content:attr(data-placeholder);}","*.gig-mediabox-ok { vertical-align:top; cursor:pointer; text-align:center; display:inline-block; font-weight:bold; font-size:14px; color:#333333; line-height:28px; width: 57px; height: 28px; border-radius: 3px; background-color: #f2f2f1; box-shadow: inset 1px 1px #fff; -moz-box-shadow: inset 1px 1px #fff; -webkit-box-shadow: inset 1px 1px #fff; border: solid 1px #d5d5d5; gradient(#f5f5f5,#f1f1f0); }","*.gig-mediabox-ok:hover { gradient(#efefef, #e9e9e9); }","*.gig-mediabox-text { font-family:arial; font-size:12px; color:#666666; line-height:14px; }","*.gig-composebox-media-display { margin-bottom:12px; }","*.gig-media-caption { font-family:arial; font-size:12px; color:#666666; line-height:17px; margin:4px 12px 0px 1px; }","*.gig-media-caption-text { text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-wrap:normal; }","*.gig-media-caption-url { display:block; padding-left:23px; text-decoration:underline; word-wrap:normal; color:#0796c6; cursor:pointer; font-size:12px; text-overflow:ellipsis; white-space:","nowrap; overflow:hidden; vertical-align:text-top; background-repeat:no-repeat; background-position:left; background-size: contain;}","*.gig-media-thumbnail { height: 303px; }","*.gig-media-thumbnail-image { margin:auto; display:block; }","*.gig-media-overlay { position:relative;top:-303px;height:0px; }","*.gig-media-play { display:none; opacity:0.85; width: 75px; height: 45px; border-radius: 10px; background-color: #545454; background-image:url('"+o.Images.getPhotoFullName("media_play",1)+"'); ","background-position:center center; background-repeat:no-repeat; cursor:pointer; position:relative;","box-shadow: 0 -1px 3px rgba(0,0,0,.4), inset 0 1px rgba(255,255,255,.29); -moz-box-shadow: 0 -1px 3px rgba(0,0,0,.4), inset 0 1px rgba(255,255,255,.29); -webkit-box-shadow: 0 -1px 3px rgba(0,0,0,.4), inset 0 1px rgba(255,255,255,.29); }",".gig-comments-hires-icons *.gig-media-play { background-image:url('"+o.Images.getPhotoFullName("media_play")+"'); }","*.gig-media-play:hover { background-color:#666565; }","*.gig-media-cancel { cursor:pointer; margin-top:-18px; margin-right:0px; float:right; width: 13px; height: 13px; border-radius: 2px; background-color: #c9c6c6;","box-shadow: inset 0 0 9px rgba(0, 0, 0, .26); -moz - box-shadow: inset 0 0 9px rgba(0, 0, 0, .26); -webkit - box-shadow: inset 0 0 9px rgba(0, 0, 0, .26);","background-image:url('"+o.Images.getPhotoFullName("media_close_icon",1)+"'); background-position:center center; background-repeat:no-repeat; }",".gig-comments-hires-icons *.gig-media-cancel {background-image:url('"+o.Images.getPhotoFullName("media_close_icon")+"'); }","*.gig-media-cancel:hover { background-color: #ebebeb; }","*.gig-comment-mediaitem { margin-top:7px; }","*.gig-comment-content .gig-media-thumbnail-image { margin-left:0px; margin-right: 0px; }","*.gig-comment-content .gig-media-caption { margin:8px 12px 0px 0px; }","*.gig-composebox-media-preview { padding-left:4px; padding-right:4px; border-radius: 0px 0px 3px 3px; background-color: #fff; -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,.15); -moz-box-shadow: inset 0 0 5px rgba(0,0,0,.15); box-shadow: inset 0 0 5px rgba(0,0,0,.15);","border: solid 1px #d5d5d5; border-top:none; padding-top:23px; padding-bottom:5px; background-image:url('"+o.Images.getPhotoFullName("media_loader_gif",1,"gif")+"'); background-repeat:no-repeat; background-position:center center; }",".gig-comments-hires-icons *.gig-composebox-media-preview { background-image:url('"+o.Images.getPhotoFullName("media_loader_gif",0,"gif")+"');}","*.gig-composebox-editor-with-media { border-radius:3px 3px 0px 0px; }","*.gig-comments-mediaplayer-dimmer { top:0px;left:0px;height:100%;width:100%;transition:opacity 0.25s;position:fixed; filter: 'alpha(opacity=50)';background-color:black;}","*.gig-comments-mediaplayer { top:50%;left:50%;transition:opacity 0.25s;padding-left:18px;padding-right:18px; position:fixed;background-color:#ffffff;border-radius:3px; }","*.gig-comments-mediaplayer-top { height:14px;padding-top:3px;padding-bottom-2px;padding-right:3px; }","*.gig-comments-mediaplayer-top .gig-media-cancel { margin-right:-18px;padding-right:0px;margin-top:0px; }","*.gig-comments-mediaplayer-bottom { margin:5px 0px 5px 0px; background-color:#d5d6d6; border-radius:3px; }","*.gig-comments-mediaplayer-caption { background-size:contain; background-repeat:no-repeat; background-position:left;font-size:13px;font-family:arial; padding-left:23px;line-height:17px; }","*.gig-comments-updates {transition-property: opacity, height; height:0; opacity:0; visibility:hidden; border-radius:3px; background-color:#90D890;}","*.gig-comments-updates-visible {opacity:1; visibility:visible; height:25px; margin: 5px 0;}","*.gig-comments-updates-text {text-align:center; line-height: 25px; color:#FFFFFF; font-weight:bold;}","*.gig-comments-updates-link {cursor:pointer; font-size:12px; color: #FFFFFF;}","*.gig-comments-updates-full {text-align:right;}","*.gig-comments-updates-full .gig-comments-updates-link {display:inline-block; line-height: 25px;top: -25px; position:relative; margin-right: 11px;","padding-left:15px;background-repeat:no-repeat;background-position:left center; background-size:11px 11px; background-image: url('"+o.Images.getPhotoFullName("Pause_Stream",1)+"')}",".gig-comments-hires-icons *.gig-comments-updates-full .gig-comments-updates-link {background-image: url('"+o.Images.getPhotoFullName("Pause_Stream")+"')}","*.gig-comments-updates-full .gig-comments-updates-link:hover { background-size:11px 11px; background-image: url('"+o.Images.getPhotoFullName("Pause_Stream_hover",1)+"')}",".gig-comments-hires-icons *.gig-comments-updates-full .gig-comments-updates-link:hover { background-image: url('"+o.Images.getPhotoFullName("Pause_Stream_hover")+"')}","*.gig-comments-updates-full.gig-comments-updates-paused .gig-comments-updates-link {background-size:11px 11px; background-image: url('"+o.Images.getPhotoFullName("Resume_Stream",1)+"')}",".gig-comments-hires-icons *.gig-comments-updates-full.gig-comments-updates-paused .gig-comments-updates-link {background-image: url('"+o.Images.getPhotoFullName("Resume_Stream")+"')}","*.gig-comments-updates-full.gig-comments-updates-paused .gig-comments-updates-link:hover {background-size:11px 11px; background-image: url('"+o.Images.getPhotoFullName("Resume_Stream_hover",1)+"')}",".gig-comments-hires-icons *.gig-comments-updates-full.gig-comments-updates-paused .gig-comments-updates-link:hover {background-image: url('"+o.Images.getPhotoFullName("Resume_Stream_hover")+"')}","*.gig-comments-updates-countonly {text-align:center;}","*.gig-comments-updates-countonly .gig-comments-updates-text {display:inline-block}","*.gig-comments-updates-countonly .gig-comments-updates-link {display:inline-block; margin-left:5px; font-weight:bold; text-decoration:underline;}","*.gig-comments-updates-countonly .gig-comments-updates-link:hover {text-decoration:none;}","*.gig-comment-title * {vertical-align:bottom;display:inline-block;}","*.gig-comment-title {margin-bottom:8px;}","*.gig-comment-rating-drop {margin: 0 3px; cursor:pointer; width: 13px; height: 14px;0 7px 0 2px;vertical-align:bottom;background-repeat:no-repeat;background-image:url('"+o.Images.getPhotoFullName("Rating_Drop_Icon",1)+"')}",".gig-comments-hires-icons *.gig-comment-rating-drop {background-image:url('"+o.Images.getPhotoFullName("Rating_Drop_Icon",1)+"')}","*.gig-comment-rating-drop:hover, *.gig-comment-rating-drop-down {background-image:url('"+o.Images.getPhotoFullName("Rating_Drop_Icon_hover",1)+"')}",".gig-comments-hires-icons *.gig-comment-rating-drop:hover, *.gig-comment-rating-drop-down {background-image:url('"+o.Images.getPhotoFullName("Rating_Drop_Icon_hover",1)+"')}","*.gig-comment-rating-title, *.gig-comment-rating-value, *.gig-composebox-rating-title, *.gig-composebox-rating-value {display:inline-block;vertical-align:top;}","*.gig-comment-rating-title {margin:0 10px 0 0;vertical-align:bottom;min-width:53px;}","*.gig-composebox-rating-value {margin-left:3px; }","*.gig-composebox-rating-title {margin-right:10px;vertical-align:bottom;}","*.gig-comment-rating-star, *.gig-composebox-rating-star, *.gig-selfreview-rating-star {display:inline-block;vertical-align:bottom;background-repeat:no-repeat;padding-right:3px; width: 16px; height:16px;background-image:url('"+o.Images.getPhotoFullName("Star_gray_small",1)+"')}",".gig-comments-hires-icons *.gig-comment-rating-star, .gig-comments-hires-icons *.gig-composebox-rating-star, .gig-comments-hires-icons *.gig-selfreview-rating-star {background-size: contain;background-image:url('"+o.Images.getPhotoFullName("Star_gray_small")+"')}","*.gig-comment-rating-star-full, *.gig-composebox-rating-star-full, *.gig-selfreview-rating-star-full {background-image:url('"+o.Images.getPhotoFullName("Star_yellow_small",1)+"')}",".gig-comments-hires-icons *.gig-comment-rating-star-full, .gig-comments-hires-icons *.gig-composebox-rating-star-full, .gig-comments-hires-icons *.gig-selfreview-rating-star-full {background-size: contain;background-image:url('"+o.Images.getPhotoFullName("Star_yellow_small")+"')}","*.gig-comment-rating-dimensions {display:inline-block;margin-top:9px;position:absolute;padding: 10px;background-color:#FFFFFF;box-shadow: -1px 2px 1px rgba(35,31,32,.07);border: 1px solid #B0B0B0;border-radius:2px;white-space:nowrap}",'*.gig-comment-rating-dimensions:before {margin-left: -7px;content:"";width: 13px;height:7px;display:inline-block;position:absolute;top:-7px;background-image:url(\''+o.Images.getPhotoFullName("Sort_dropdown_triangle",1)+"')}",".gig-comments-hires-icons *.gig-comment-rating-dimensions:before {background-image:url('"+o.Images.getPhotoFullName("Sort_dropdown_triangle")+"')}","*.gig-composebox-rating-star {cursor:pointer;}","*.gig-composebox-ratings {margin-bottom:5px;}","*.gig-composebox-rating-_overall .gig-composebox-rating-value {margin-left:0 }","*.gig-composebox-rating-_overall {font-weight:bold;margin: 5px 0;}","*.gig-composebox-rating-_overall .gig-composebox-rating-star, *.gig-composebox-rating-_overall.gig-composebox-field-error:hover .gig-composebox-rating-star, *.gig-selfreview-rating-_overall .gig-selfreview-rating-star ","{padding-right: 4px; width: 21px; height: 20px; background-image: url('"+o.Images.getPhotoFullName("Star_gray_big",1)+"')}",".gig-comments-hires-icons *.gig-composebox-rating-_overall .gig-composebox-rating-star, .gig-comments-hires-icons *.gig-composebox-rating-_overall.gig-composebox-field-error:hover .gig-composebox-rating-star, .gig-comments-hires-icons *.gig-selfreview-rating-_overall .gig-selfreview-rating-star ","{background-size:contain;background-image: url('"+o.Images.getPhotoFullName("Star_gray_big")+"')}","*.gig-composebox-rating-_overall .gig-composebox-rating-star-full, *.gig-composebox-rating-_overall.gig-composebox-field-error:hover .gig-composebox-rating-star-full, *.gig-selfreview-rating-_overall .gig-selfreview-rating-star-full ","{background-image: url('"+o.Images.getPhotoFullName("Star_yellow_big",1)+"')}",".gig-comments-hires-icons *.gig-composebox-rating-_overall .gig-composebox-rating-star-full, .gig-comments-hires-icons *.gig-composebox-rating-_overall.gig-composebox-field-error:hover .gig-comments-hires-icons .gig-composebox-rating-star-full, .gig-comments-hires-icons *.gig-selfreview-rating-_overall .gig-selfreview-rating-star-full ","{background-size:contain;background-image: url('"+o.Images.getPhotoFullName("Star_yellow_big")+"')}","*.gig-composebox-rating-_overall.gig-composebox-field-error {border: none;}","*.gig-composebox-rating-_overall.gig-composebox-field-error .gig-composebox-rating-star {background-image:url('"+o.Images.getPhotoFullName("Star_red_big",1)+"')}",".gig-comments-hires-icons *.gig-composebox-rating-_overall.gig-composebox-field-error .gig-composebox-rating-star {background-image:url('"+o.Images.getPhotoFullName("Star_red_big")+"')}","*.gig-comment-colored-background {border-radius:4px; padding: 3px 6px 6px 6px;}","div.gig-comment-pinned-background {background-color: #fffcd2;}","*.gig-comment-withBadges *.gig-comment-header-right {text-align: right;}","*.gig-comment-withBadges *.gig-comment-username { margin-bottom:5px; }","*.gig-composebox-withBadges *.gig-composebox-logout  {display:block; }","*.gig-composebox-withBadges *.gig-composebox-header-right {  text-align:right; margin-bottom: 4px;}","*.gig-composebox-withBadges *.gig-composebox-title { position: relative; bottom: 7px; }","*.gig-comment-commentBadge { display: inline-block; font-size:11px; font-weight: bold; background-repeat: no-repeat; padding-right: 22px; background-position: right; height:17px; line-height: 17px;}","*.gig-comment-userBadge { margin-bottom: 5px; margin-right: 6px; display: inline-block; font-size:11px; font-weight: bold; line-height: 15px;}","*.gig-badge-border {border: 1px solid; border-radius: 2px; padding: 0px 5px;}","*.gig-comment .gig-comment-editbox {display:none;background-color:#F6F6F6; padding:4px 6px 4px 6px; margin-left:-41px;}","*.gig-comment .gig-comment-editbox .gig-composebox-ratings * {color:#585858;}","*.gig-comment .gig-comment-editbox-open {display:block; margin-bottom: 10px;}","*.gig-comment-editbox *.gig-composebox-close {display:inline-block; margin-left:5px; cursor:pointer; width: 15px; height: 15px; background-image:url('"+o.Images.getPhotoFullName("close_icon",1)+"'); background-position:center; background-repeat:no-repeat;}",".gig-comments-hires-icons *.gig-comment-editbox *.gig-composebox-close {background-image:url('"+o.Images.getPhotoFullName("close_icon")+"'); background-size: contain; }","*.gig-comment-editbox *.gig-composebox-close:hover { background-color: #ebebeb; }","*.gig-comment-edited {font-size: 11px; display:inline-block; margin:2px 0 0 5px; float:right; font-style:italic; color:#999999}","*.gig-comment-data-removed {margin-left: -41px;}","*.gig-comment-data-removed .gig-comment-content {padding-left: 0px;}","*.gig-comment-data-removed .gig-comment-body {color:#999999; font-size:12px; font-style:italic; line-height:16.5px;}","*.gig-comment-data-removed .gig-comment-footer {margin: 4px 0px 10px; padding-left: 0px;}","*.gig-comment-data-removed .gig-comment-footer .gig-comment-footer-left .gig-comment-flag {display: none;}","*.gig-comment-data-removed .gig-comment-footer-right, *.gig-comment-data-removed .gig-comment-header {display:none;}","*.gig-comment-data-removed .gig-comment-replyLink , *.gig-comment-data-removed .gig-comment-likeLink , *.gig-comment-data-removed .gig-comment-shareLink , *.gig-comment-data-removed .gig-comment-deleteLink , *.gig-comment-data-removed .gig-comment-editLink {display:none;}","*.gig-comment-data-removed .gig-comment-content {transition: none; -webkit-transition: none}","*.gig-comment-data-removed .gig-comment-content {transition: none; -webkit-transition: none}","*.gig-comment-title-removed {display:none;}","*.gig-comment-photo-removed {display:none;}"].join(""),rtl:["*.gig-comment-data {padding-left:0;padding-right:41px;}","*.gig-comment-footer-right, *.gig-comments-header-right, *.gig-composebox-footer-right, *.gig-composebox-header-right, *.gig-comment-header-right, *.gig-comments-dialog-close, *.gig-comments-dialog-button, *.gig-selfreview-header-right {float:left}","*.gig-comment-footer-left, *.gig-comments-header-left, *.gig-composebox-footer-left, *.gig-composebox-header-left, *.gig-comment-header-left,*.gig-comments-dialog-caption,*.gig-comments-dialog-textbox-container, *.gig-selfreview-header-left, *.gig-composebox-photo, *.gig-comment-photo {float:right}","*.gig-composebox-data {padding-left:0;padding-right: 47px;}","*.gig-loginbox-provider {padding: 8px 22px 8px 8px;background-position:right center; margin-right:8px;}","*.gig-composebox-editor-with-sidebar {padding: 0 9px 9px 29px;text-align:left;}","*.gig-composebox-textarea {text-align:right}","*.gig-comments-fontbox *.gig-composebox-font-bold {border-left-style:solid;border-right-style:none;}","*.gig-comments-fontbox *.gig-composebox-font-bullets {border-right-style:solid;border-left-style:none;}","*.gig-comments-share-provider-shown {background-position:6px;}","*.gig-comments-share-provider {border-right:none;border-left:1px solid #FFFFFF}","*.gig-comments-linksContainer li:after {margin-left:0;margin-right: 3px;}","*.gig-comments-linksContainer li {margin-right:0;margin-left: 3px;}","*.gig-composebox-follow {padding-right:12px;padding-left:0;background-position:right;}","*.gig-comment-footer, *.gig-comment-replies {padding-left: 0;padding-right: 6px;}","*.gig-comment-replybox *.gig-composebox-close {margin-left:0;margin-right:5px;}","*.gig-comment-editbox *.gig-composebox-close {margin-left:0;margin-right:5px;}","*.gig-comments-dialog-caption-container {padding: 5px 12px 5px 5px}","*.gig-composebox-title {margin-right:0;margin-left:5px;}","*.gig-comment .gig-comment-content {padding-left:0;padding-right:6px;}","*.gig-composebox-morebox *.gig-composebox-morebox-providers li {padding-left:0; padding-right: 18px; background-position:right;}","*.gig-comments-dialog-button {margin: 0 7px 0 0}","*.gig-comments-updates-full {text-align:left;}","*.gig-comments-updates-full .gig-comments-updates-link {margin: 0 0 0 11px;padding:0 15px 0 0; background-position:right center;}","*.gig-comments-updates-countonly .gig-comments-updates-link {margin-right:5px;}","*.gig-comments-fontbox {margin-left:8px;}","*.gig-comments-fontbox ul:after {left:-7px;right:auto;-webkit-transform:rotate(180deg);transform:rotate(180deg);}","ul.gig-composebox-sidebar {float:left;margin-left:-29px}","*.gig-composebox-textarea ul, .gig-comment-body ul {padding-right:20px;}","*.gig-selfreview-field-title {margin:0 0 0 7px;}","*.gig-selfreview-nameAndLogout {padding: 0 47px 0 0;}","*.gig-composebox-title, *.gig-composebox-name {margin:0 0 0 5px;}","*.gig-comment-rating-title {margin:0 0 0 10px; min-width:53px;}","*.gig-comment-providerLogo {text-align:left;}","*.gig-comment-providerLogo img {margin-left:-2px;margin-right:0;}","*.gig-comment-viaProvider {background-position:right center;padding: 0 12px 0 0;}","*.gig-usertagging-suggestions li { padding-right:8px; }","*.gig-usertagging-suggestions li *.gig-usertagging-username { margin-right:8px; }","*.gig-comment-content .gig-media-caption { margin:8px 0px 0px 12px; }","*.gig-media-caption-url { background-position:right; padding-right:23px; padding-left:0px; }","*.gig-comments-mediaplayer-caption { background-position:right;padding-right:23px;text-align:right; }","*.gig-mediabox-url { padding-right:8px; margin-left:5px;padding-left:0px;margin-right:0px; }","*.gig-comments-mediabox { padding-right:0px;padding-left:8px; }","*.gig-mediabox-fields:after { left:1px; right:auto; -webkit-transform:rotate(180deg);transform:rotate(180deg); }","*.gig-composebox-sidebar-button:last-child:nth-child(-n+2) { border-radius:0 0 3px 0; }","*.gig-composebox-sidebar-button { transform:scaleX(-1);-webkit-transform:scaleX(-1);-ms-transform:scaleX(-1); }","*.gig-comment-vote-neg {margin: 0 15px 0 0;}","*.gig-comment-repliesArrow-collapsed .gig-comment-repliesArrow-img {-webkit-transform:rotate(-270deg); transform:rotate(-270deg);}","*.gig-comment-time {margin:2px 10px 0 0;}","*.gig-composebox-cancel { margin-left: 6px; margin-right: 0px}","*.gig-comment-edited { margin:2px 5px 0 0; float: left;}","*.gig-comment .gig-comment-editbox {margin-left:0px;margin-right:-41px;}","*.gig-comment-footer-right * {direction:ltr;text-align:right;}","*.gig-comment-vote-posneg *.gig-comment-vote-neg {margin-left:0;margin-right:2px;}","*.gig-comment-vote-total {margin-right:0;margin-left:5px;}","*.gig-comment-data-removed {margin-right: -41px;}","*.gig-comment-userBadge { margin-right: 0px; margin-left: 6px;}","*.gig-comment-withBadges *.gig-comment-username { margin-right:0px; margin-left:6px; }","*.gig-comment-withBadges *.gig-comment-time { float:left; margin-right:6px;}"].join(""),mobile:[".gig-comments-container {padding: 0 10px; -moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}",".gig-comments-container * {transition: none;font-size:16px;-webkit-text-size-adjust:none;}","*.gig-comments-linksContainer li {padding: 0 3px 0 0;margin-right:3px;}","*.gig-comments-linksContainer li:after {margin-bottom:7px;margin-left:7px;}","*.gig-comment-time {font-size: 13px;}","*.gig-comment-footer * {font-size:15px}","*.gig-composebox-follow {font-size:16px; padding-left: 20px;}","*.gig-comments-share-provider {height:23px;background-position: 31px center;padding:4px 10px;width:39px;}","*.gig-comments-checkbox {width: 16px;height: 16px; }","*.gig-comments-checkbox-checked *.gig-comments-share-provider-checkbox {background-image:url('"+o.Images.getPhotoFullName("sharetoProviders/checkmark",1)+"')}",".gig-comments-hires-icons *.gig-comments-checkbox-checked *.gig-comments-share-provider-checkbox {background-image:url('"+o.Images.getPhotoFullName("sharetoProviders/checkmark")+"')}","*.gig-composebox-share-text {line-height:30px;}","*.gig-comments-share-more {height: 22px;}","*.gig-comment-data {padding: 0}","*.gig-comment-self-data {padding-left:41px;}","*.gig-comment-replies {padding-left: 15px}",".gig-composebox-open textarea.gig-composebox-textarea {height:45px;}","*.gig-comment-replybox *.gig-composebox-close { vertical-align:middle; }","*.gig-comment-editbox *.gig-composebox-close { vertical-align:middle; }",".gig-composebox-open *.gig-composebox-textarea {min-height:45px;}","*.gig-comments-dialog {width: auto;min-width:0;}","*.gig-comments-dialog-textbox-button {float:right;margin-top:10px;}","*.gig-comments-dialog-body {overflow:hidden}","*.gig-composebox-textarea, *.gig-composebox-textarea *, *.gig-composebox-summary input {font-size:18px;}","*.gig-comments-count {line-height:30px}","*.gig-comment-vote-pos, .gig-comment-vote-neg {padding-left:30px;}","*.gig-comment-vote-pos {background-size:27px 27px;background-image: url('"+o.Images.getPhotoFullName("mobile/Thumbs_up",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-pos {background-image: url('"+o.Images.getPhotoFullName("mobile/Thumbs_up")+"')}","*.gig-comment-vote-pos-down{background-size:27px 27px;background-image: url('"+o.Images.getPhotoFullName("mobile/Thumbs_up_pressed",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-pos-down{background-image: url('"+o.Images.getPhotoFullName("mobile/Thumbs_up_pressed")+"')}","*.gig-comment-vote-neg {background-size:27px 27px;background-image: url('"+o.Images.getPhotoFullName("mobile/Thumbs_down",1)+"');background-position:0 6px}",".gig-comments-hires-icons *.gig-comment-vote-neg {background-image: url('"+o.Images.getPhotoFullName("mobile/Thumbs_down")+"');}","*.gig-comment-vote-neg-down {background-size:27px 27px;background-image: url('"+o.Images.getPhotoFullName("mobile/Thumbs_down_pressed",1)+"');background-position:0 6px}",".gig-comments-hires-icons *.gig-comment-vote-neg-down {background-image: url('"+o.Images.getPhotoFullName("mobile/Thumbs_down_pressed")+"');}","*.gig-comment-footer-right div {height:31px;line-height:31px;}","*.gig-composebox-header-left *, *.gig-composebox-header-right *, *.gig-composebox-logout span {font-size:15px;}","*.gig-comment .gig-comment-replybox {margin-bottom:10px;}","*.gig-comment .gig-comment-editbox {margin-bottom:10px;}","*.gig-comment-flag {display:none}","*.gig-comment-rating, *.gig-comment-rating-drop {margin-bottom:3px;}","*.gig-comment-summary {margin-left:2px;}","*.gig-comments-container.gig-comment-rating-dimensions {padding: 10px;}","*.gig-composebox-rating, *.gig-selfreview-rating {padding: 3px 0; margin: 5px 0}","*.gig-composebox-rating-star, *.gig-selfreview-rating-star {padding-right:4px;width: 21px; height:20px;background-image:url('"+o.Images.getPhotoFullName("Star_gray_big",1)+"')}",".gig-comments-hires-icons *.gig-composebox-rating-star, .gig-comments-hires-icons *.gig-selfreview-rating-star {background-image:url('"+o.Images.getPhotoFullName("Star_gray_big")+"')}","*.gig-composebox-rating-star-full, *.gig-selfreview-rating-star-full {background-image:url('"+o.Images.getPhotoFullName("Star_yellow_big",1)+"')}",".gig-comments-hires-icons *.gig-composebox-rating-star-full, .gig-comments-hires-icons *.gig-selfreview-rating-star-full {background-image:url('"+o.Images.getPhotoFullName("Star_yellow_big")+"')}","*.gig-composebox-rating-value {margin:0;}","*.gig-selfreview-rating .gig-comment-rating-value {margin: 2px 5px}","ul.gig-comments-header-right {margin-left:10px}","*.gig-comments-count {line-height:normal}","*.gig-comment-footer-right {margin-left:10px;}","*.gig-comment-footer-left, *.gig-comments-header-left *, *.gig-comments-linksContainer {line-height:31px;}","*.gig-comments-linksContainer li:after {margin-bottom:10px;}","*.gig-comments-guestbox {width: 178px;}","*.gig-composebox-morebox {padding:0}","*.gig-comments-updates-visible {height:auto;min-height:50px;}","*.gig-comments-updates-full .gig-comments-updates-link {top:0}","*.gig-comment-body, .gig-comment-body * {line-height:20px;}","*.gig-composebox-withBadges *.gig-composebox-title { bottom: 5px; }","*.gig-comment .gig-comment-editbox {margin-left:0;}"].join(""),mobileRtl:["*.gig-comment-replies {padding-left:0;padding-right:15px;}","*.gig-comment-data {padding: 0}","*.gig-comment-self-data {padding-left:0;padding-right:41px;}","*.gig-comments-share-provider {background-position:11px;}","*.gig-comment .gig-comment-editbox {margin-right:0;}"].join(""),nonMobile:[".gig-comments-container *  {font-size:12px;transition: none 500ms cubic-bezier(0.785, 0.135, 0.15, 0.86); -webkit-transition: none 500ms cubic-bezier(0.785, 0.135, 0.15, 0.86)}","*.gig-comments-linksContainer li:hover, *.gig-comments-linksContainer a:hover {text-decoration:underline;text-decoration-skip:all}","*.gig-comment-vote-pos:hover {background-size:14px 14px;background-image: url('"+o.Images.getPhotoFullName("Thumbs_up_hover",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-pos:hover {background-image: url('"+o.Images.getPhotoFullName("Thumbs_up_hover")+"')}","*.gig-comment-vote-neg:hover {background-size:14px 14px;background-image: url('"+o.Images.getPhotoFullName("Thumbs_down_hover",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-neg:hover {background-image: url('"+o.Images.getPhotoFullName("Thumbs_down_hover")+"')}","*.gig-comment-footer li:hover, *.gig-comment-repliesArrow:hover div {text-decoration:underline}","*.gig-comment-self-data:hover *.gig-comment-flag, *.gig-comment-flag-visible {visibility:visible; }","*.gig-comment-vote-pos-down:hover {background-size:14px 14px;background-image: url('"+o.Images.getPhotoFullName("Thumbs_up_pressed",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-pos-down:hover {background-image: url('"+o.Images.getPhotoFullName("Thumbs_up_pressed")+"')}","*.gig-comment-vote-neg-down:hover {background-size:14px 14px;background-image: url('"+o.Images.getPhotoFullName("Thumbs_down_pressed",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-neg-down:hover {background-image: url('"+o.Images.getPhotoFullName("Thumbs_down_pressed")+"')}"].join("")}},29:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(94),n=function(){function e(){}return e.getSelection=function(e){if(window.getSelection&&document.createRange){e.normalize();var t=window.getSelection().getRangeAt(0),i=t.cloneRange();i.selectNodeContents(e),i.setEnd(t.startContainer,t.startOffset);var o=t.cloneRange();o.selectNodeContents(t.startContainer),o.setEnd(t.startContainer,t.startOffset);var n=i.toString(),s=o.toString();return{start:n.length,end:n.length+t.toString().length,text:n,childContainer:o.startContainer,childOffset:s.length,childText:s}}if(document.selection&&document.body.createTextRange){var a=document.selection.createRange(),g=document.body.createTextRange();g.moveToElementText(e),g.setEndPoint("EndToStart",a);var r=g.text.length;return{start:r,end:r+a.text.length,text:g.text,childContainer:t.endContainer,endInChildContainer:0,childText:t.toString()}}},e.restoreSelection=function(e,t){if(window.getSelection&&document.createRange){var i=0,o=document.createRange();o.setStart(e,0),o.collapse(!0);for(var n,s=[e],a=!1,g=!1;!g&&(n=s.pop());)if(3==n.nodeType){var r=i+n.length;!a&&t.start>=i&&t.start<=r&&(o.setStart(n,t.start-i),a=!0),a&&t.end>=i&&t.end<=r&&(o.setEnd(n,t.end-i),g=!0),i=r}else for(var l=n.childNodes.length;l--;)s.push(n.childNodes[l]);var m=window.getSelection();m.removeAllRanges(),m.addRange(o)}else if(document.selection&&document.body.createTextRange){var d=document.body.createTextRange();d.moveToElementText(e),d.collapse(!0),d.moveEnd("character",t.end),d.moveStart("character",t.start),d.select()}},e}();t.Selection=n;var s=function(){function e(){}return e.getPhotoFullName=function(t,i,n){return void 0===i&&(i=0),void 0===n&&(n="png"),o.imgBase+t+"_x"+(i>0?i:e.pixelRatio)+"."+n},e.pixelRatio=window.devicePixelRatio?Math.min(Math.ceil(window.devicePixelRatio),3):1,e}();t.Images=s;var a=function(){function e(){}return e.cancelEvent=function(e){e.stopPropagation&&e.stopPropagation()},e}();t.Events=a;var g=function(){function e(){}return e.createTaggedUserElement=function(e,t){var i=document.createElement("input");return i.type="button",i.value="@"+e,i.innerHTML=e,i.tabIndex=-1,window.gigya.utils.DOM.addClassToElement(i,"gig-usertagging-tag"),t&&i.setAttribute("data-gig-uid",t),i},e.replaceUserTagsWithSpans=function(e,t){for(var i=window.gigya.utils.DOM.getElementsByClass(e,"gig-usertagging-tag"),o=0;o<i.length;o++){var n=i[o],s=n.getAttribute("data-gig-uid");if(s){-1==window.gigya.utils.array.indexOf(t,s)&&t.push(s);var a=n.getAttribute("value");a||(a=n.innerHTML);var g=document.createElement("span");g.setAttribute("data-gig-uid",s),window.gigya.utils.DOM.addClassToElement(g,"gig-usertagging-tag"),a&&(g.innerHTML=a),n.parentElement.insertBefore(g,n),n.parentElement.removeChild(n)}}return e.innerHTML},e.replaceSpansWithUserTags=function(t){var i=window.gigya.utils.DOM.getElementsByClass(t,"gig-usertagging-tag");if(i)for(var o=0;o<i.length;o++){var n=i[o],s=n.getAttribute("data-gig-uid"),a=n.innerHTML.slice(1),g=e.createTaggedUserElement(a,s);n.parentElement.insertBefore(g,n),n.parentElement.removeChild(n)}},e}();t.UserTagging=g},354:function(e,t,i){(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=i(93),n=i(160),s=i(68),a=i(36),g=i(355),r=i(29),l=i(161),m=i(164),d=i(162),c=i(94),u=i(95),p=i(163),h=i(159);window.gigya.pluginTypes||(window.gigya.pluginTypes={}),window.gigya.pluginTypes.comments||(window.gigya.pluginTypes.comments={}),window.gigya.pluginTypes.comments.CommentsUtils||(window.gigya.pluginTypes.comments.CommentsUtils={}),e(window.gigya.pluginTypes.comments,o,n,s,a,g,l,m,d,c,u,p,h),e(window.gigya.pluginTypes.comments.CommentsUtils,r),window.gigya._.UI.attachPlugin(g.CommentsPlugin,"comments","comments2","showCommentsUI")}).call(this,i(0).__assign)},355:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(160),n=i(163),s=i(36),a=i(68),g=i(95),r=i(164),l=i(29),m=function(){function e(e,t){var i=this;this.params=e,this.refString=t,this.version=2,this.commentInstances={},this.templates=window.gigya.utils.object.clone(n.defaultTemplates,!1),this.settings={},this.state={flags:{}},this.streamInfo={},this.userCommentsData=[],this.userOptions={},this.userComments=[],this.newCommentsCount=0,this.userHighlightingGroups=[],this.autoPixelRatio=!1,this.pixelRatio=1,this.simpleShareSource=null,this.loadState(),this.shareEnabled=this.isSharePossible(),this.containerID=e.containerID,this.container=this.getContainer(),this.params.useHiResIcons&&(this.autoPixelRatio=!0,this.pixelRatio=0),this.params.templates?this.params.ctag&&(this.params.ctag+="_templates"):this.params.templates={},this.templates=window.gigya.utils.object.merge([this.templates,this.params.templates]),this.params.pinnedCommentID=window.gigya._.plugins.utils.URL.getHashParamValue(document.location.href,"gig_comment_id"),this.params.pinnedCommentID&&(this.pinnedCommentID=this.params.pinnedCommentID),this.textMode="ratingsOnly"==this.settings.mode||"reviews"==this.settings.mode?s.TextMode.REVIEWS:s.TextMode.COMMENTS;var o=this.params.deviceType?this.params.deviceType.toLowerCase():"desktop";this.isMobileUI="mobile"==o||"auto"==o&&window.gigya.localInfo.isMobile,this.setDefaults(),this.mainComposeBox=new g.NewCommentBox(this,this.getElement("composebox"),null),this.fetchAll(function(){if(i.initUI(),!window.gigya.utils.DOM.isVisible(i.container)){var e=new window.gigya._.Poller;e.addActions(function(){window.gigya.utils.DOM.isVisible(i.container)&&(e.stop(),i.updateAll())}),e.start(300)}i.updateAll(!0),window.gigya.events.dispatchForWidget({eventName:"load",version:i.version},i.params)});var a=function(e){e&&e.user?i.setUser(e.user):i.setUser({})};window.gigya.socialize.addEventHandlers({listenerType:"component"},{onLogin:a,onLogout:a,onConnectionAdded:a,onConnectionRemoved:a})}return e.prototype.getText=function(e,t,i){return this.params.customLang&&this.params.customLang[e]?this.params.customLang[e].replace(t,i):window.gigya.pluginUtils.lang.getLocalizedText("gigya.services.comments.plugins.comments2.js",e,this.params.lang,t,i)},e.prototype.loadState=function(){var e=window.gigya.utils.localStorage.getObject("gig-comments",void 0);e&&(this.state=e)},e.prototype.saveState=function(){window.gigya.utils.localStorage.setObject("gig-comments",this.state)},e.prototype.setDefaults=function(){this.params.streamID||(this.params.streamID=0);var e=this.getDefaultSort();e&&(this.params.sort=e)},e.prototype.setDefaultShareUserAction=function(){var e,t,i=new window.gigya.socialize.UserAction(this.params.shareUserAction);this.textMode==s.TextMode.REVIEWS?(t=this.getText("username_rated_pagetitle_as_rating_5")+"\n%pagetitle",e=this.getText("username_posted_a_review_on_pagetitle"),this.getText("username_commented_on_pagetitle")):(t="%commentText",e=this.getText("username_commented_on_pagetitle")),i.description||i.setDescription(t),i.title||i.setTitle(e),i.linkBack||i.setLinkBack(document.location.href),this.params.shareUserAction=i},e.prototype.getElement=function(e){var t=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-comments-"+e);return t.length>0?t[0]:null},e.prototype.initUI=function(){var e="",t=this.params.cssPrefix;if(t||!this.addedCss){var i=this.params.lang;this.isRtl="he"==i||"ar"==i,e+=r.defaultCss.reset,this.isRtl&&(e+=r.defaultCss.resetRtl);var o=window.gigya.pluginUtils.css.fixCss(r.defaultCss.global),n=window.gigya.pluginUtils.css.fixCss(r.defaultCss.rtl);e+=o,this.isRtl&&(e+=n),this.isMobileUI?(e+=r.defaultCss.mobile,this.isRtl&&(e+=r.defaultCss.mobileRtl)):e+=r.defaultCss.nonMobile,window.gigya.localInfo.isMobile&&window.gigya.localInfo.isSafari&&(e+=".gig-comments-container * {-webkit-text-size-adjust:none;}"),window.gigya._.plugins.utils.css.addCss(e,t),this.addedCss=!0}this.isMobileUI&&(this.container.style.width="100%"),this.container.className="gig-comments-container"+(this.textMode==s.TextMode.REVIEWS?" gig-comments-reviews":"")+(this.autoPixelRatio?" gig-comments-hires-icons":""),this.container.setAttribute("data-version","2");var a="bottom"!=this.settings.newCommentPosition||this.params.templates.commentsPluginComposeBottom?this.templates.commentsPlugin:this.templates.commentsPluginComposeBottom;this.container.innerHTML=a,this.mainComposeBox.container=this.getElement("composebox")},e.prototype.getContainer=function(){return document.getElementById(this.containerID)},e.prototype.fetchComments=function(e,t){var i=this;void 0===e&&(e=!1);var o={threaded:!0,categoryID:this.params.categoryID,streamID:this.params.streamID,includeSettings:!0,includeUserOptions:!0,includeUserHighlighting:!0,pinnedCommentID:this.params.pinnedCommentID,tags:this.params.filterTags,callback:function(e){i.getCommentsCallback(e),t&&t()}};this.pagingDisabled&&(o.threadLimit=0),this.nextPageStart?e||(o.start=this.nextPageStart):o.includeStreamInfo=!0,e&&this.streamInfo.lastCommentTimestamp&&(o.since=this.streamInfo.lastCommentTimestamp),window.gigya.comments.getComments(this.params,o)},e.prototype.reset=function(){this.comments=[],this.commentInstances={},this.streamInfo={},this.nextPageStart=null,delete this.params.start},e.prototype.removeUnpublishedComments=function(){for(var e in this.commentInstances){var t=this.commentInstances[e];t.isPost=!1,t.info=null,t.error=null,t.isRemovedComment()?t.updateAll():"published"!==t.data.status&&this.removeComment(t)}},e.prototype.isUserFollowing=function(){return this.userOptions&&"immediate"==this.userOptions.replyNotifications},e.prototype.setUserComments=function(e){if(e){var t=null!=this.getSelfReview();this.userCommentsData=e,this.userComments=[];for(var i=0;i<this.userCommentsData.length;i++){var n=this.commentInstances[this.userCommentsData[i].ID]||new o.Comment(this,this.userCommentsData[i]);this.userComments.push(n)}this.textMode==s.TextMode.REVIEWS&&t!=(null!=this.getSelfReview())&&this.updateUserReview()}},e.prototype.getCommentsCallback=function(e){var t=this;if(0!=e.errorCode)this.broadcastedError||(this.container&&!this.nextPageStart&&(this.container.innerHTML=""),window.gigya.events.dispatchErrorFromResponse(this.params,e),this.broadcastedError=!0);else{e.settings&&(this.settings=window.gigya.utils.object.merge([{},e.settings])),this.textMode="ratingsOnly"==this.settings.mode||"reviews"==this.settings.mode?s.TextMode.REVIEWS:s.TextMode.COMMENTS,this.setDefaultShareUserAction();var i=!e.requestParams.start&&!e.requestParams.since;if(i){this.comments=[];var o=this.getElement("comments");o&&(o.innerHTML="")}this.buildHighlightsCss();var n=null!=e.requestParams.since;if(this.addComments(a.CommentData.fromRawDataArray(e.comments),0,n,!1),this.setUserComments(a.CommentData.fromRawDataArray(e.userComments)),this.hasMore=e.hasMore,e.streamInfo&&(this.streamInfo=e.streamInfo,this.updateCount()),e.userOptions&&(this.userOptions=e.userOptions),null!=this.params.useSiteLogin&&(this.settings.useSiteLogin=window.gigya.utils.validation.isExplicitTrue(this.params.useSiteLogin)),!this.nextPageStart){var g=this.settings.refreshMode,r=1e3*this.settings.refreshInterval||0;r>0&&"off"!=g&&(this.refreshTimeout=window.setInterval(function(){t.checkForNewComments()},r))}if(e.requestParams.since||(this.nextPageStart=e.next),e.requestParams.userHighlightingGroups||(this.userHighlightingGroups=e.userHighlightingGroups),this.getMoreInProgress){this.getMoreInProgress=!1;var l=e.comments[0].ID;if(l){var m=this.container.querySelector('div.gig-comment[data-comment-id="'+l+'"]');m&&(m.focus(),window.gigya.utils.viewport.scrollIntoView(m))}}this.updateMore(i),this.updateCount()}},e.prototype.addComments=function(e,t,i,n,s,a){void 0===t&&(t=0);var g=[];i&&e.reverse();for(var r=0;r<e.length;r++){var l=e[r],m=this.commentInstances[l.ID];m?(m.error=s,m.info=a,m.reset(l,!0)):m=new o.Comment(this,l,t,null,n,i,s,a),g.push(m)}},e.prototype.createUserHighlightingBadges=function(e,t){if(!t)return!1;for(var i=this.getHighlightingBadges(t,["user","moderator"]),o=!1,n=!0,a=i.length-1;a>=0;a--){var g=i[a];if(g.showBadge){o=!0;var r=document.createElement("div");window.gigya.utils.DOM.addClassToElement(r,"gig-comment-userBadge"),window.gigya.utils.DOM.addClassToElement(r,g.className),r.innerHTML="Moderator"==g.badgeText?this.getText("moderator"):g.badgeText,s.BadgeFrameEnum[g.badgeFrame]===s.BadgeFrameEnum.rectangle&&window.gigya.utils.DOM.addClassToElement(r,"gig-badge-border"),e.parentNode.insertBefore(r,e.nextSibling)}n&&g.commenterNameColor&&""!==g.commenterNameColor&&(window.gigya.utils.DOM.addClassToElement(e,g.userClassName),n=!1)}return o},e.prototype.checkForNewComments=function(){var e=this;"off"==this.settings.refreshMode||this.isPaused||window.gigya.comments.getStreamInfo(this.params,{callback:function(t){if(t.streamInfo){var i=(e.textMode===s.TextMode.REVIEWS?t.streamInfo.ratingCount:t.streamInfo.commentCount)-(e.textMode===s.TextMode.REVIEWS?e.streamInfo.ratingCount:e.streamInfo.commentCount);e.updatedStreamInfo=t.streamInfo,(i>0||e.lastCommentTimestamp!==t.streamInfo.lastCommentTimestamp)&&(e.newCommentsCount=e.newCommentsCount+i,e.lastCommentTimestamp=t.streamInfo.lastCommentTimestamp,e.hasNewComments())}}})},e.prototype.hasNewComments=function(){var e=this.settings.refreshMode;"countOnly"==e?(this.updateStrip(),this.newCommentsCount=0):"full"==e&&this.fetchNewComments()},e.prototype.isSharePossible=function(){return 0==document.location.href.indexOf("http")&&(!window.__gigAPIAdapterSettings||"http://www.gigya.com/"!=document.location.href)},e.prototype.fetchNewComments=function(){this.streamInfo=this.updatedStreamInfo,this.updatedStreamInfo=null,this.fetchComments(!0),this.updateStrip()},e.prototype.updateStrip=function(e){var t=this,i=this.settings.refreshMode,o=this.getElement("updates");if(o){e&&(o.innerHTML=this.templates.updates);var n=window.gigya.utils.DOM.getElementsByClass(o,"gig-comments-updates-text")[0],a=window.gigya.utils.DOM.getElementsByClass(o,"gig-comments-updates-link")[0],g="",r="";window.gigya.utils.DOM.removeClassFromElement(o,"gig-comments-updates-countonly"),window.gigya.utils.DOM.removeClassFromElement(o,"gig-comments-updates-full"),"countOnly"==i?(this.newCommentsCount>0&&(g=this.textMode==s.TextMode.COMMENTS?1==this.newCommentsCount?this.getText("1_new_comment_was_recently_posted"):this.getText("num_new_comments_were_recently_posted","%num",this.newCommentsCount.toString()):1==this.newCommentsCount?this.getText("1_new_review_was_recently_posted"):this.getText("num_new_reviews_were_recently_posted","%num",this.newCommentsCount.toString()),r=this.getText("click_to_show")),e&&window.gigya.utils.DOM.addButtonSubmitListener(a,function(){t.fetchNewComments()}),window.gigya.utils.DOM.addClassToElement(o,"gig-comments-updates-countonly")):"full"==i&&(this.newCommentsCount>0&&(g=this.textMode==s.TextMode.COMMENTS?1==this.newCommentsCount?this.getText("1_new_comment_was_recently_posted"):this.getText("num_new_comments_were_recently_posted","%num",this.newCommentsCount.toString()):1==this.newCommentsCount?this.getText("1_new_review_was_recently_posted"):this.getText("num_new_reviews_were_recently_posted","%num",this.newCommentsCount.toString()),r=this.isPaused?this.getText("resume_stream"):this.getText("pause_stream"),this.isPaused?window.gigya.utils.DOM.addClassToElement(o,"gig-comments-updates-paused"):window.gigya.utils.DOM.removeClassFromElement(o,"gig-comments-updates-paused")),e&&window.gigya.utils.DOM.addButtonSubmitListener(a,function(){t.isPaused=!t.isPaused,t.updateStrip()}),window.gigya.utils.DOM.addClassToElement(o,"gig-comments-updates-full")),g||r?(n&&(n.innerHTML=g),a&&(a.innerHTML=r),window.gigya.utils.DOM.addClassToElement(o,"gig-comments-updates-visible")):window.gigya.utils.DOM.removeClassFromElement(o,"gig-comments-updates-visible")}},e.prototype.getComment=function(e){return this.commentInstances[e]},e.prototype.removeComment=function(e){for(var t=e.replies.concat(),i=0;i<t.length;i++)t[i].dispose();var o=e.getParent();o?o.removeChild(e.id):window.gigya.utils.array.removeByProperty(this.comments,"id",e.id),window.gigya.utils.array.removeByProperty(this.userComments,"id",e.id),window.gigya.utils.array.removeByProperty(this.userCommentsData,"ID",e.id);var n=e.getContainer();if(n&&n.parentNode.removeChild(n),delete this.commentInstances[e.id],"published"===e.data.status)for(this.streamInfo.commentCount--,o||this.streamInfo.ratingCount--;o;)o.descendantsCount--,o.updateRepliesCount(),o=o.getParent();this.updateCount(),this.textMode==s.TextMode.REVIEWS&&this.updateUserReview()},e.prototype.getUserInfo=function(e){var t=this;window.gigya.socialize.getUserInfo(this.params,{callback:function(i){0==i.errorCode?t.setUser(i.user,!0):window.gigya.events.dispatchErrorFromResponse(t.params,i),e&&e()}})},e.prototype.filterIdentities=function(e){if(!e||!e.identities)return e;var t=this.params.enabledProviders||"*",i=this.params.disabledProviders||"",o=0,n=window.gigya.socialize.getProvidersByName(t+",site");n=window.gigya.socialize.hideProvidersByName(n,i);for(var s={},a=0;a<n.length;a++){var g=n[a];e.identities[g.name]&&(o++,s[g.name]=e.identities[g.name])}return e.identities=s,e.loginProvider&&!e.identities[e.loginProvider]&&(delete e.loginProvider,delete e.nickname),0==o&&(e.isConnected=!1),e},e.prototype.setUser=function(e,t){var i=this;this.user=this.filterIdentities(e),t||(this.setUserComments([]),this.streamInfo.isUserSubscribed=!1,this.removeUnpublishedComments(),this.fetchUserVotes(),this.fetchSelfComments(),e.isConnected&&window.gigya.comments.getStreamInfo(this.params,{callback:function(e){e.streamInfo&&(i.streamInfo=e.streamInfo,i.updateHeaderLinks())}})),this.updateAll(!1)},e.prototype.fetchAll=function(e){var t=this,i=function(){if(t.user&&t.comments){if(e&&e(),t.hideProgress(),t.settings.repliesCollapsed)for(var i=0;i<t.comments.length;i++)t.comments[i].collapse();if(t.pinnedCommentID){var o=t,n=o.getComment(o.pinnedCommentID);window.setTimeout(function(){var e=n.data.threadID;""==e&&(e=n.id),o.getComment(e).isCollapse()&&o.getComment(e).expand(),o.scrollToPinnedComment(o.pinnedCommentID),o.setPinnedCommentColor(o.pinnedCommentID)},2)}}};this.fetchComments(!1,i),this.getUserInfo(i),this.showProgress()},e.prototype.scrollToPinnedComment=function(e){var t=document.querySelector('[data-comment-id="'+e+'"]');if(t){var i=t.offsetTop;window.scrollTo(0,i-12)}},e.prototype.setPinnedCommentColor=function(e){var t=document.querySelector('[data-comment-id="'+e+'"]');if(t){var i=t.getElementsByClassName("gig-comment-content")[0];window.gigya.utils.DOM.addClassToElement(i,"gig-comment-pinned-background"),window.gigya.utils.DOM.addClassToElement(i,"gig-comment-colored-background"),window.gigya.utils.DOM.removeClassFromElement(i,"gig-comment-badge-pick")}},e.prototype.getUsername=function(){return window.gigya.utils.sanitize.sanitizeHTML(this.user.nickname||this.user.firstName||(this.user.isGuest?this.getText("guest"):this.getText("anonymous")))},e.prototype.updateAll=function(e){void 0===e&&(e=!1),this.user&&this.comments&&(this.mainComposeBox&&(e?this.mainComposeBox.render():this.mainComposeBox.updateUI()),this.tempComposeBox&&(e?this.tempComposeBox.render():this.tempComposeBox.updateUI()),this.updateHeaderLinks(e),this.updateComments(e),e&&this.bindAll(),this.updateMore(e),this.updateStrip(e))},e.prototype.fetchUserVotes=function(){var e=this;window.gigya.comments.getUserVotes(this.params,{callback:function(t){for(var i in e.commentInstances){var o=e.commentInstances[i];o.voteInProgress||(o.data.vote=t.userVotes?t.userVotes[i]:"none",o.updateVote())}}})},e.prototype.fetchSelfComments=function(){var e=this;window.gigya.comments.getUserComments(this.params,{includeReplies:!0,includeUserHighlighting:!0,callback:function(t){if(t&&t.comments){e.setUserComments(t.comments);for(var i=0;i<t.comments.length;i++){var o=t.comments[i].ID;if(e.commentInstances[o])(s=e.commentInstances[o]).data.sender.isSelf=!0,s.updateComment(!1)}}else for(var n in e.setUserComments([]),e.commentInstances){var s;(s=e.commentInstances[n]).data.sender.isSelf=!1,s.updateComment(!1)}t.requestParams.userHighlightingGroups||(e.userHighlightingGroups=t.userHighlightingGroups),e.mainComposeBox.updateUserBadges()}})},e.prototype.showProgress=function(){window.gigya.utils.DOM.addClassToElement(this.container,"gig-comments-container-progress")},e.prototype.hideProgress=function(){window.gigya.utils.DOM.removeClassFromElement(this.container,"gig-comments-container-progress")},e.prototype.updateHeaderLinks=function(e){var t=this.getElement("header");e&&t&&(t.innerHTML=window.gigya.utils.templates.fill(this.templates.header,{sort:this.getText("sort"),subscribe:this.getText("subscribe"),rss:"<a>"+this.getText("rss")+"</a>"}));var i=this.getElement("sort");i&&(i.style.display=this.settings.enableUserSorting?"":"none");var o=this.getElement("rss");o&&(o.style.display=this.settings.disableRSS?"none":"");var n=this.getElement("subscribe");if(n){var s=this.streamInfo.isUserSubscribed||this.unsubscribeToken?this.getText("unsubscribe"):this.getText("subscribe");n.title=s,n.innerHTML=s,n.style.display=this.settings.disableRSS?"none":""}t&&this.setLinks(t)},e.prototype.updateUserReview=function(){this.mainComposeBox.updateUI()},e.prototype.getSelfReview=function(){if(this.textMode==s.TextMode.REVIEWS)for(var e=0;e<this.userComments.length;e++)if(!this.userComments[e].data.parentID)return this.userComments[e]},e.prototype.setLinks=function(e){for(var t,i,o=window.gigya.utils.DOM.getElementsByClass(e,"gig-comments-linksContainer"),n=0;n<o.length;n++){t=!1;for(var s=(i=o[n].childNodes).length-1;s>=0;s--){var a=i[s];"none"==a.style.display||""==a.innerHTML||t?window.gigya.utils.DOM.removeClassFromElement(a,"gig-comments-link-lastVisible"):(window.gigya.utils.DOM.addClassToElement(a,"gig-comments-link-lastVisible"),t=!0)}}},e.prototype.updateComments=function(e){if(void 0===e&&(e=!1),this.getElement("comments")){e&&(this.getElement("comments").innerHTML="");for(var t=0;t<this.comments.length;t++)this.comments[t].updateAll();this.updateCount()}},e.prototype.updateCount=function(){var e=this.getElement("count");if(e)if(this.settings.disableCommentsCount)e.innerHTML="";else{var t;if(this.textMode==s.TextMode.REVIEWS){var i=this.streamInfo.ratingCount,o=this.streamInfo.commentCount-this.streamInfo.ratingCount;t=this.getPluralizedCount(i,"review")+(o>0?", "+this.getPluralizedCount(o,"comment"):"")}else t=this.getPluralizedCount(this.streamInfo.commentCount,"comment");e.innerHTML=t}},e.prototype.getPluralizedCount=function(e,t){var i="one_"+t,o="num_"+t+"s",n=this.getText(1==e?i:o,"%num",e.toString());return"fr"==this.params.lang&&0==e&&(n=(n=this.getText(i,"%num",e.toString())).replace("1","0")),n},e.prototype.updateMore=function(e){var t=this.getElement("more");t&&(this.hasMore?(this.getMoreInProgress?(window.gigya.utils.DOM.addClassToElement(t,"gig-comments-more-progress"),t.innerHTML=""):(window.gigya.utils.DOM.removeClassFromElement(t,"gig-comments-more-progress"),t.innerHTML="reviews"==this.settings.mode?this.getText("show_more_reviews"):"ratingsOnly"==this.settings.mode?this.getText("show_more_ratings"):this.getText("show_more_comments")),t.style.display=""):t.style.display="none")},e.prototype.bindAll=function(){var e=this,t=this.getElement("more");t&&window.gigya.utils.DOM.addButtonSubmitListener(t,function(){e.onMoreClick(t)});var i=this.getElement("subscribe");i&&window.gigya.utils.DOM.addButtonSubmitListener(i,function(){e.onSubscribeClick()});var o=this.getElement("rss");if(o)for(var n=o.getElementsByTagName("a"),s=0;s<n.length;s++){var a=n[s];a.setAttribute("href",this.streamInfo.rssURL),window.gigya.utils.DOM.addButtonSubmitListener(a,function(t){e.onRssClick(t,!0)}),window.gigya.utils.DOM.addEventListener(a,"contextmenu",function(t){e.onRssClick(t)})}var g=this.getElement("sort");window.gigya.utils.DOM.addEventListener(g,"mousedown",function(t){e.onSortClick(g)})},e.prototype.onSubscribeClick=function(){var e=this;if(this.streamInfo.isUserSubscribed)window.gigya.comments.unsubscribe(this.params,{callback:function(t){return e.onUnsubscribe(t)}});else if(this.unsubscribeToken)window.gigya.comments.unsubscribe(this.params,{unsubscribeToken:this.unsubscribeToken,callback:function(t){return e.onUnsubscribe(t)}});else{var t=this.textMode==s.TextMode.REVIEWS?"review":"comment",i=window.gigya.utils.templates.fill(this.templates.emailTextboxDialogBody,{text:this.getText("enter_your_email_to_subscribe_to_new_"+t+"s_in_this_stream_colon"),buttonText:this.getText("subscribe"),email:this.user.email||"",emailLabel:this.getText("email")}),o=this.showDialog(this.getText("notifications_settings"),i,void 0,void 0,void 0,function(){e.getElement("subscribe").focus()}),n=window.gigya.utils.DOM.getElementsByClass(o,"gig-comments-dialog-textbox-button")[0];window.gigya.utils.DOM.addButtonSubmitListener(n,function(){var t=window.gigya.utils.DOM.getElementsByClass(o,"gig-comments-dialog-textbox")[0];if(t){var i=t.value;if(window.gigya.pluginUtils.validation.isEmailValid(i))e.subscribe(t.value),e.activeDialog.cancelHandler();else window.gigya.utils.DOM.getElementsByClass(o,"gig-comments-dialog-error")[0].innerHTML=e.getText("please_provide_a_valid_email_address")}})}},e.prototype.subscribe=function(e){var t=this;this.setStreamInfoIfNeeded(null,null,function(){window.gigya.comments.subscribe(t.params,{email:e,callback:function(e){t.onSubscribe(e)}})});var i=this.textMode==s.TextMode.REVIEWS?"review":"comment",o='<div class="gig-comments-dialog-subscribe-okIcon"></div>'+this.getText("thank_you_for_subscribing")+"<br />"+this.getText("new_"+i+"s_will_be_sent_directly_to_your_email_inbox");this.showDialog(this.getText("notifications_settings"),o),window.setTimeout(function(){t.activeDialog&&t.activeDialog.cancelHandler()},3e3)},e.prototype.onUnsubscribe=function(e){var t=this;0==e.errorCode&&(this.showDialog(this.getText("notifications_settings"),this.getText("you_have_successfully_unsubscribed")),window.setTimeout(function(){t.activeDialog&&t.activeDialog.cancelHandler()},3e3),delete this.unsubscribeToken,this.streamInfo.isUserSubscribed=!1,this.updateHeaderLinks())},e.prototype.onSubscribe=function(e){e&&e.unsubscribeToken&&(this.unsubscribeToken=e.unsubscribeToken),e.unsubscribeToken||(this.streamInfo.isUserSubscribed=!0),this.updateHeaderLinks()},e.prototype.onMoreClick=function(e){this.hasMore&&!this.getMoreInProgress&&(this.getMoreInProgress=!0,this.updateMore(),this.fetchComments())},e.prototype.onRssClick=function(e,t){if(t)return this.setStreamInfoIfNeeded(e,this.streamInfo.rssURL);this.setStreamInfoIfNeeded(e)},e.prototype.onSortClick=function(e){var t=this;if(e){var i=window.gigya.utils.DOM.getElementPosition(e),o=document.createElement("div");o.style.position="absolute",null!=o.style.zIndex&&(o.style.zIndex=window.gigya.utils.DOM.getNextZIndex().toString()),o.innerHTML=window.gigya.utils.templates.fill(this.templates.sortbox,{most_recent:this.getText("most_recent"),oldest:this.getText("oldest"),most_voted:this.getText("most_voted"),ratings:this.getText("ratings")}),o.className="gig-comments-container gig-comments-sortbox";for(var n=o.getElementsByTagName("li"),a=0;a<n.length;a++){var g=n[a],r=g.getAttribute("data-sort"),m=this.params.sort;(r==m||!m&&r==this.settings.sortBy)&&window.gigya.utils.DOM.addClassToElement(g,"gig-comments-sortbox-selected"),this.textMode!=s.TextMode.REVIEWS&&0==r.indexOf("rating")?window.gigya.utils.DOM.removeElement(g):window.gigya.utils.DOM.addButtonSubmitListener(g,function(e){var i=(e.target||e.srcElement).getAttribute("data-sort");t.params.pinnedCommentID&&delete t.params.pinnedCommentID,i&&(o.parentNode.removeChild(o),t.params.sort=i,t.setDefaultSort(i),t.saveState(),t.reset(),t.fetchComments())})}window.gigya.utils.DOM.appendToBody(o),o.style.left=i.left-o.offsetWidth+30+"px",o.style.top=i.top+e.offsetHeight+"px",window.gigya.pluginUtils.animation.fadeIn(o),window.gigya.pluginUtils.DOM.removeElementOnDocClickOrEscape(o,function(e,t){t&&l.Events.cancelEvent(e)})}},e.prototype.setDefaultSort=function(e){window.gigya.utils.cookie.set("_gig_comments_sort",e)},e.prototype.getDefaultSort=function(){return window.gigya.utils.cookie.get("_gig_comments_sort")},e.prototype.showDialog=function(e,t,i,o,n,s){var a=this;this.activeDialog&&this.activeDialog.cancelHandler();var g=window.gigya.utils.DOM.createTopLevelDiv();g.style.position="fixed",g.className=this.container.className,g.innerHTML=this.templates.dialog;var r=window.gigya.utils.DOM.getElementsByClass(g,"gig-comments-dialog-caption")[0],l=window.gigya.utils.DOM.getElementsByClass(g,"gig-comments-dialog-body")[0];r.innerHTML=e,l.innerHTML=t,r.setAttribute("id","gig-comments-dialog-caption-"+this.containerID),g.setAttribute("role","dialog"),g.setAttribute("tabindex","-1"),g.setAttribute("aria-labelledby",r.id);var m=function(){window.gigya.utils.DOM.removeEventListener(document,"keydown",b),g.parentNode&&g.parentNode.removeChild(g),a.activeDialog=void 0},d=function(){m(),s&&s(g)},c=function(){m(),o&&o(g)},u=window.gigya.utils.DOM.getElementsByClass(g,"gig-comments-dialog-close")[0];u&&window.gigya.utils.DOM.addButtonSubmitListener(u,d);var p=window.gigya.utils.DOM.getElementsByClass(g,"gig-comments-dialog-button-ok")[0];p&&(window.gigya.utils.DOM.addButtonSubmitListener(p,c),i?p.innerHTML=i:p.style.display="none");var h=window.gigya.utils.DOM.getElementsByClass(g,"gig-comments-dialog-button-cancel")[0];h&&(window.gigya.utils.DOM.addButtonSubmitListener(h,d),n?h.innerHTML=n:h.style.display="none");var b=function(e){27==(e.which||e.keyCode)&&d()};window.gigya.utils.DOM.addEventListener(document,"keydown",b),window.gigya.utils.DOM.appendToBody(g);var x=window.gigya.utils.viewport.getInnerSize(),f=x.w,v=x.h;return g.style.top=Math.max(0,Math.floor((v-g.offsetHeight)/2))+"px",g.style.left=Math.max(0,Math.floor((f-g.offsetWidth)/2))+"px",this.activeDialog={el:g,okHandler:c,cancelHandler:d},g.focus(),g},e.prototype.setStreamInfoIfNeeded=function(e,t,i){var o=this,n=this.params.streamTitle;n||(n=document.title),n&&""!=n||(n="Site");var s=this.params.streamURL;if(s||(s=document.location.href),this.streamInfo.streamURL&&(!this.params.streamInfoSig||n==this.streamInfo.streamTitle&&s==this.streamInfo.streamURL))return i&&i(),!0;window.gigya.comments.setStreamInfo(this.params,{streamTitle:n,streamURL:s,callback:function(){o.streamInfo.streamTitle=n,o.streamInfo.streamURL=s,t&&(document.location.href=t),i&&i()}}),e&&l.Events.cancelEvent(e)},e.prototype.buildMediaItemElement=function(e,t,i,o){var n=this,s=document.createElement("div");e.appendChild(s),e.style.height="",s.innerHTML=window.gigya.utils.templates.fill(this.templates.mediaItem,{displayUrl:t.url,url:t.url,caption:t.title?t.title:t.description?t.description:"",providerIcon:l.Images.getPhotoFullName("mediaProviders/"+t.provider.toLowerCase(),this.pixelRatio)});var a=window.gigya.utils.DOM.getElementsByClass(s,"gig-media-thumbnail")[0],g=window.gigya.utils.DOM.getElementsByClass(s,"gig-media-caption")[0],r=document.createElement("img");window.gigya.utils.DOM.addClassToElement(r,"gig-media-thumbnail-image");var m,d=a.offsetWidth,c=.75*d-g.offsetHeight,u=t.thumbnailHeight,p=t.thumbnailWidth;("image"==t.type.toLowerCase()&&t.thumbnailWidth<.7*d?(u=t.height,p=t.width,r.src=window.gigya.global.getPhotoURL(t.photoUrl)):r.src=window.gigya.global.getPhotoURL(t.thumbnailUrl),u>c)&&(u*=m=c/u,p*=m);p>d&&(u*=m=d/p,p*=m);u<c&&(c=u);var h=i?(d-p)/2:0;r.style.width=p+"px",r.style.height=u+"px",r.style.marginRight=h+"px",r.style.marginLeft=h+"px",a.style.height=c+"px";var b=window.gigya.utils.DOM.getElementsByClass(s,"gig-media-overlay")[0];if(b&&(b.style.top=-c+"px"),"rich"==t.type.toLowerCase()||"video"==t.type.toLowerCase()){var x=window.gigya.utils.DOM.getElementsByClass(s,"gig-media-play")[0];x&&window.gigya.utils.DOM.addEventListener(r,"load",function(){x.style.display="block";var e=(u-x.offsetHeight)/2,i=h+(p-x.offsetWidth)/2;n.isRtl?x.style.right=i+"px":x.style.left=i+"px",x.style.top=e+"px",window.gigya.utils.DOM.addButtonSubmitListener(x,function(){n.playMediaItem(t)})})}else r.style.cursor="pointer",window.gigya.utils.DOM.addButtonSubmitListener(r,function(){window.open(t.url)});var f=window.gigya.utils.DOM.getElementsByClass(s,"gig-media-cancel")[0];return f&&(i&&o?window.gigya.utils.DOM.addButtonSubmitListener(f,o):f.style.display="none"),a.appendChild(r),s},e.prototype.playMediaItem=function(e){if(this.isMobileUI)window.open(e.url);else{var t=document.body.style.overflow,i=document.createElement("div");i.className="gig-comments-mediaplayer-dimmer",i.style.zIndex=window.gigya.utils.DOM.getNextZIndex()+"",window.gigya.utils.DOM.appendToBody(i),window.gigya.pluginUtils.animation.fadeIn(i,.8),document.body.style.overflow="hidden";var o=document.createElement("div");o.className="gig-comments-mediaplayer",o.innerHTML=window.gigya.utils.templates.fill(this.templates.mediaItemPlayer,{playerHeight:e.height,playerHTML:e.html,caption:e.title?e.title:"",providerIcon:l.Images.getPhotoFullName("mediaProviders/"+e.provider.toLowerCase(),this.pixelRatio)}),o.style.zIndex=window.gigya.utils.DOM.getNextZIndex()+"",window.gigya.utils.DOM.appendToBody(o),window.gigya.pluginUtils.animation.fadeIn(o),o.style.marginLeft=-o.offsetWidth/2+"px",o.style.marginTop=-o.offsetHeight/2+"px";var n=function(){document.body.style.overflow=t,i.parentElement.removeChild(i),o.parentElement.removeChild(o)},s=window.gigya.utils.DOM.getElementsByClass(o,"gig-media-cancel")[0];window.gigya.utils.DOM.addButtonSubmitListener(i,n),window.gigya.utils.DOM.addButtonSubmitListener(s,n)}},e.prototype.removeUserBadges=function(e){if(e)for(var t=e.getElementsByClassName("gig-comment-userBadge");t.length>0;)t[0].parentNode.removeChild(t[0])},e.prototype.buildHighlightsCss=function(){var e="";if(this.settings&&this.settings.highlightGroupsSettings){for(var t=0;t<this.settings.highlightGroupsSettings.length;t++){var i=this.settings.highlightGroupsSettings[t];if(!i.cssRule){i.className="gig-badge-"+i.name.toLowerCase(),i.commentClassName="gig-comment-badge-"+i.name.toLowerCase(),i.userClassName="gig-comment-username-badge-"+i.name.toLowerCase();var o="";if(i.badgeImageURL)o="background-image:url("+("https://cdns.gigya.com/gs/i/comments2/editors_pick.png"==i.badgeImageURL?l.Images.getPhotoFullName("editors_pick"):window.gigya.global.getPhotoURL(i.badgeImageURL))+"); background-size: 17px 17px;";i.cssRule=".gig-comments-container *."+i.className+" {color:"+i.badgeColor+";"+o+"} .gig-comments-container *."+i.className+".gig-badge-border {border-color:"+i.badgeColor+";} ",i.commentBackgroundColor&&(i.cssRule+=".gig-comments-container *."+i.commentClassName+" {background-color:"+i.commentBackgroundColor+";} "),i.commenterNameColor&&(i.cssRule+=".gig-comments-container *."+i.userClassName+" {color:"+i.commenterNameColor+";} "),e+=i.cssRule+" "}}window.gigya._.plugins.utils.css.addCss(e,this.params.cssPrefix)}},e.prototype.getHighlightingBadges=function(e,t){if(e){for(var i=[],o=0;o<this.settings.highlightGroupsSettings.length;o++){var n=this.settings.highlightGroupsSettings[o];!n.enabled||-1==e.indexOf(n.name)||t&&-1==t.indexOf(n.type)||i.push(n)}return i}},e}();t.CommentsPlugin=m},36:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.COMMENTS=0]="COMMENTS",e[e.REVIEWS=1]="REVIEWS"}(t.TextMode||(t.TextMode={})),function(e){e[e.user=0]="user",e[e.comment=1]="comment",e[e.moderator=2]="moderator"}(t.HightlighGroupTypeEnum||(t.HightlighGroupTypeEnum={})),function(e){e[e.commenterName=0]="commenterName",e[e.commentTime=1]="commentTime"}(t.BadgeLocationEnum||(t.BadgeLocationEnum={})),function(e){e[e.none=0]="none",e[e.rectangle=1]="rectangle"}(t.BadgeFrameEnum||(t.BadgeFrameEnum={}))},68:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this.ID=e,this.parentID=t,this.replies=[]}return e.fromRawDataArray=function(t){if(!t)return null;for(var i=[],o=0;o<t.length;o++){var n=t[o];i.push(e.fromRawData(n))}return i},e.fromRawData=function(t){return t.replies&&t.replies.length>0&&(t.replies=e.fromRawDataArray(t.replies)),window.gigya.utils.object.merge([new e,t])},e.prototype.isReply=function(){return null!=this.parentID},e}();t.CommentData=i},93:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(68),n=i(159),s=i(36),a=i(29),g=i(94),r=function(){function e(e,t,i,o){this.plugin=e,this.container=t,this.onClose=o,this.lastSelection={start:-1},this.data=window.gigya.utils.object.clone(i,!0,!1),this.data.ratings||(this.data.ratings={})}return e.prototype.getText=function(e,t,i){return this.plugin.getText(e,t,i)},e.prototype.getElement=function(e){var t=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-composebox-"+e);return t&&t.length>0?t[0]:null},e.prototype.buildUIElementsObj=function(){this.uiElements={header:this.getElement("header"),title:this.getElement("title"),photo:this.getElement("photo"),textArea:this.getElement("textarea"),editor:this.getElement("editor"),summary:this.getElement("summary"),mediaItem:this.getElement("mediaItem"),summaryInput:this.getElement("summary-input"),name:this.getElement("name"),sidebar:this.getElement("sidebar"),sidebarButtons:{richText:this.getElement("sidebar-font"),addMediaItem:this.getElement("sidebar-media"),tagUser:this.getElement("sidebar-tag")},submitButton:this.getElement("post"),closeButton:this.getElement("close"),cancelButton:this.getElement("cancel"),loginBar:this.getElement("login"),socialLoginButton:this.getElement("social-login"),siteLoginButton:this.getElement("site-login"),guestLoginButton:this.getElement("guest-login"),logoutLink:this.getElement("logout"),followLink:this.getElement("follow"),shareSection:this.getElement("share"),shareProviders:this.getElement("share-providers"),postAnonymouslySection:this.getElement("postAnonymously"),postAnonymouslyCheckbox:this.getElement("anon-checkbox"),ratings:this.getElement("ratings"),ratingsOverall:this.getElement("rating-_overall"),errorMessage:this.getElement("error")}},e.prototype.getLoginProvider=function(){var e=this.plugin.user.loginProvider;if(!e)for(var t in this.plugin.user.identities){e=t;break}return e},e.prototype.isLoginDropdownEnabled=function(){return!this.data.isReply()&&(1==this.plugin.params.showLoginBar||this.plugin.settings.useSiteLogin)},e.prototype.hideElement=function(e,t){e&&(t?e.parentElement.removeChild(e):e.style.display="none")},e.prototype.open=function(){this.render(),this.focus()},e.prototype.render=function(){if(this.container){var e=this.plugin.textMode==s.TextMode.COMMENTS?this.getText("write_a_comment"):this.getText("write_a_review");this.container.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.composebox,{write_a_comment:e,logout:this.getText("logout"),post:this.getSubmitText(),cancel:this.getText("cancel"),postAnonymously:this.getText("post_anonymously"),share:this.getText("share_colon"),login:this.getText("login"),or:this.getText("or"),guest:this.getText("guest"),summary:this.plugin.textMode==s.TextMode.COMMENTS?this.getText("summary"):this.getText("review_summary")}),this.getElement("editor").innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.editor,{write_a_comment:e,fontAlt:this.getText("rich_text_formatting"),mediaAlt:this.getText("embed_a_media_item"),tagAlt:this.getText("tag_commenters")}),this.buildUIElementsObj();var t=this.getGuestUser();if(!this.plugin.user.isConnected&&t.isGuest&&this.plugin.settings.allowGuest&&(this.plugin.user=t),this.uiElements.editor&&"disabled"==this.plugin.settings.enableCommentBody&&(this.uiElements.editor.style.display="none"),this.uiElements.summary){if(this.uiElements.summaryInput){var i=this.uiElements.summaryInput.getAttribute("data-placeholder");window.gigya.global.setPlaceholder(this.uiElements.summaryInput,i,"gig-comments-placeholder")}this.uiElements.summary.style.display=this.data.isReply()||"disabled"==this.plugin.settings.enableCommentTitles?"none":""}this.renderSidebar(),this.renderRatings(),this.afterRender(),this.activateOnRender(),this.bindEvents()}else this.container.style.display="none"},e.prototype.activateOnRender=function(){var e=this;(this.data.isReply()||this.plugin.textMode==s.TextMode.REVIEWS)&&(window.gigya.utils.DOM.addClassToElement(this.container,"gig-comment-replybox-open"),this.plugin.isMobileUI?this.activate():window.setTimeout(function(){return e.activate()},10))},e.prototype.renderSidebar=function(){if(this.uiElements.sidebar)if(this.uiElements.editor&&"disabled"!=this.plugin.settings.enableCommentBody&&!this.plugin.isMobileUI){if(this.uiElements.sidebarButtons.richText){var e=this.uiElements.sidebarButtons.richText;this.plugin.settings.enableRichTextEditing||(e.parentElement.removeChild(e),this.uiElements.sidebarButtons.richText=null)}if(this.uiElements.sidebarButtons.addMediaItem){e=this.uiElements.sidebarButtons.addMediaItem;this.plugin.settings.enableMediaItems||(e.parentElement.removeChild(e),this.uiElements.sidebarButtons.addMediaItem=null)}if(this.uiElements.sidebarButtons.tagUser){e=this.uiElements.sidebarButtons.tagUser;this.plugin.settings.enableUserTagging||(e.parentElement.removeChild(e),this.uiElements.sidebarButtons.tagUser=null)}(this.uiElements.sidebarButtons.richText||this.uiElements.sidebarButtons.addMediaItem||this.uiElements.sidebarButtons.tagUser)&&window.gigya.utils.DOM.addClassToElement(this.uiElements.editor,"gig-composebox-editor-with-sidebar")}else this.uiElements.sidebar.style.display="none"},e.prototype.activate=function(){window.gigya.utils.DOM.addClassToElement(this.container,"gig-composebox-open")},e.prototype.close=function(e){this.container&&(this.container.innerHTML="",window.gigya.utils.DOM.removeClassFromElement(this.container,"gig-comment-replybox-open")),this.onClose&&this.onClose(e)},e.prototype.focus=function(){this.uiElements.textArea&&this.uiElements.textArea.focus()},e.prototype.updateUI=function(){this.uiElements&&(this.uiElements.name&&(this.uiElements.name.innerHTML=this.plugin.getUsername()),this.updateUserBadges(),this.updateLoginLogoutElements(),this.updateProfilePhoto(),this.updateTitle(),this.updateFollow(),this.updateRatings())},e.prototype.updateUserBadges=function(){if(this.uiElements.header&&(window.gigya.utils.DOM.removeClassFromElement(this.uiElements.header.parentElement,"gig-composebox-withBadges"),this.plugin.removeUserBadges(this.uiElements.header),this.plugin.user.isLoggedIn&&this.plugin.userHighlightingGroups)){var e=this.uiElements.title;this.plugin.createUserHighlightingBadges(e,this.plugin.userHighlightingGroups)&&window.gigya.utils.DOM.addClassToElement(this.uiElements.header.parentElement,"gig-composebox-withBadges")}},e.prototype.updateTitle=function(){if(this.uiElements.title){var e=this.getTitle();e?(this.uiElements.title.style.display="",this.uiElements.title.innerHTML=e):(this.uiElements.title.style.display="none",this.uiElements.title.innerHTML=e)}},e.prototype.updateProfilePhoto=function(){var e=this;if(this.uiElements.photo){var t=this.getLoginProvider(),i=window.gigya.utils.templates.fill(this.plugin.templates.photo,{photoURL:window.gigya.global.getPhotoURL(this.plugin.user.thumbnailURL||this.plugin.user.photoURL,a.Images.getPhotoFullName("Avatar_empty",this.plugin.pixelRatio)),providerImage:t&&"site"!=t&&"customopenid"!=t.toLowerCase()?this.plugin.templates.providerImage:"",providerImageUrl:g.imgBase+"providers/"+this.getLoginProvider()+"User_x1.png"});this.uiElements.photo.style.visibility="hidden",this.uiElements.photo.innerHTML=i;var o=this.uiElements.photo.getElementsByTagName("img");if(o&&o.length>0){var n=o[0];window.gigya.utils.DOM.addEventListener(n,"load",function(){window.gigya.global.scaleImageToContainer(o[0],!0,function(){e.uiElements.photo.style.visibility=""})})}}},e.prototype.updateLoginLogoutElements=function(){this.uiElements.logoutLink&&(this.plugin.user.isConnected||this.plugin.user.isGuest&&!this.isGuestLocked()?this.uiElements.logoutLink.style.display="":this.uiElements.logoutLink.style.display="none")},e.prototype.bindEvents=function(){var t=this;window.gigya.utils.DOM.addButtonSubmitListener(this.uiElements.submitButton,function(){t.onSubmitClicked()}),window.gigya.utils.DOM.addButtonSubmitListener(this.uiElements.cancelButton,function(){t.close()}),window.gigya.utils.DOM.addButtonSubmitListener(this.uiElements.closeButton,function(){t.close()}),window.gigya.utils.DOM.addButtonSubmitListener(this.uiElements.socialLoginButton,function(){t.onLoginClick(t.uiElements.socialLoginButton)}),window.gigya.utils.DOM.addButtonSubmitListener(this.uiElements.siteLoginButton,function(){t.onSiteLoginClick()}),window.gigya.utils.DOM.addButtonSubmitListener(this.uiElements.guestLoginButton,function(){t.onGuestClick(t.uiElements.guestLoginButton)}),window.gigya.utils.DOM.addEventListener(this.uiElements.sidebarButtons.richText,"mousedown",function(e){t.showFontBox(t.uiElements.sidebarButtons.richText),window.gigya.utils.DOM.cancelEvent(e)}),window.gigya.utils.DOM.addEventListener(this.uiElements.sidebarButtons.addMediaItem,"mousedown",function(e){t.showMediaBox(t.uiElements.sidebarButtons.addMediaItem),window.gigya.utils.DOM.cancelEvent(e)}),window.gigya.utils.DOM.addEventListener(this.uiElements.sidebarButtons.tagUser,"mousedown",function(e){t.onSidebarTagClicked(e),window.gigya.utils.DOM.cancelEvent(e)}),this.uiElements.textArea&&(window.gigya.utils.DOM.addEventListener(this.uiElements.textArea,"keydown",function(i){-1==window.gigya.utils.array.indexOf(e.allowedOnLimitKeys,i.keyCode)&&t.uiElements.textArea.textContent.length>=t.plugin.settings.maxCommentLength&&window.gigya.utils.DOM.cancelEvent(i)}),window.gigya.utils.DOM.addEventListener(this.uiElements.textArea,"focus",function(){t.activate()}),window.gigya.utils.DOM.addEventListener(this.uiElements.textArea,"keyup",function(e){(86==e.keyCode&&(e.ctrlKey||e.metaKey)||45==e.keyCode&&e.shiftKey)&&setTimeout(function(){t.handleUpdatedText()},1)}),window.gigya.utils.DOM.addEventListener(this.uiElements.textArea,"blur",function(){t.stopPolling(),"<br>"==t.uiElements.textArea.innerHTML&&(t.uiElements.textArea.innerHTML="")}),window.gigya.utils.DOM.addEventListener(this.uiElements.textArea,"focus",function(){t.startPolling()})),this.uiElements.logoutLink&&window.gigya.utils.DOM.addButtonSubmitListener(this.uiElements.logoutLink,function(){t.plugin.user.isGuest?t.logoutGuest():window.gigya.socialize.logout(t.plugin.params)});var i=this.uiElements.followLink;if(i){window.gigya.utils.DOM.addButtonSubmitListener(i,function(){t.onFollowClick(i)}),window.gigya.utils.DOM.addEventListener(i,"mouseover",function(){t.plugin.isUserFollowing()&&(i.innerHTML=t.getText("unfollow"))});var o=function(){t.updateFollow()};window.gigya.utils.DOM.addEventListener(i,"mouseout",o),o()}this.uiElements.summaryInput&&window.gigya.utils.DOM.addEventListener(this.uiElements.summaryInput,"blur",function(){t.pendingValidation&&t.validate()})},e.prototype.onSubmitClicked=function(){this.validate()&&(this.updateDataFromUI(),this.submit(),this.plugin.mainComposeBox.updateUI())},e.prototype.updateDataFromUI=function(){var e=this.uiElements.summaryInput;null==this.data.commentText&&(this.data.commentText="");var t=[];this.uiElements.textArea&&(this.data.commentText=a.UserTagging.replaceUserTagsWithSpans(this.uiElements.textArea,t)),e?e.value&&e.placeholderCleared?this.data.commentTitle=e.value:this.data.commentTitle="":this.data.commentTitle=null,this.data.taggedUsers=t,this.data.mediaItems=this.mediaItem?[this.mediaItem]:[],this.data.highlightGroups=this.plugin.userHighlightingGroups,this.data.status=1===this.plugin.settings.moderationState?"pending":""},e.prototype.onStarClick=function(e){var t=e.target||e.srcElement,i=t.parentNode.getAttribute("data-dimension"),o=t.getAttribute("data-value");this.data.ratings||(this.data.ratings={}),this.data.ratings[i]=parseInt(o),this.pendingValidation&&this.validate(),this.onStarMouseOut(e)},e.prototype.onStarMouseOver=function(e){var t=e.target||e.srcElement,i=t.parentNode,o=t.getAttribute("data-value");i=t.parentNode;this.updateStarsToValue(i,parseInt(o))},e.prototype.onStarMouseOut=function(e){var t=(e.target||e.srcElement).parentNode,i=t.getAttribute("data-dimension");this.updateStarsToValue(t,this.data.ratings[i])},e.prototype.updateStarsToValue=function(e,t){if(void 0===t&&(t=0),e)for(var i=e.getElementsByClassName("gig-composebox-rating-star"),o=0;o<i.length;o++){var n=i[o];parseInt(n.getAttribute("data-value"))<=t?window.gigya.utils.DOM.addClassToElement(n,"gig-composebox-rating-star-full"):window.gigya.utils.DOM.removeClassFromElement(n,"gig-composebox-rating-star-full")}},e.prototype.onLoginClick=function(e,t,i){var o=this;window.gigya.utils.DOM.addClassToElement(e,"gig-composebox-social-login-down");var n=document.createElement("div");n.className="gig-comments-container gig-comments-loginbox"+(this.plugin.autoPixelRatio?" gig-comments-hires-icons":"");var s,g=this.plugin.params.enabledProviders||"*",r=this.plugin.params.disabledProviders||"",l=window.gigya.socialize.hideProvidersByName(window.gigya.socialize.getProvidersByName(g),r),m=function(t){o.onLoginProviderClick(t,h,e,i)},d=function(e,t){var i=document.createElement("div");return i.className="gig-loginbox-provider",i.setAttribute("data-provider",e.name),i.innerHTML=e.displayName,i.setAttribute("aria-label",e.displayName),t&&(i.style.backgroundImage='url("'+t+'")'),window.gigya.utils.DOM.addButtonSubmitListener(i,m),n.appendChild(i),i};l&&((p=document.createElement("div")).className="gig-signinbox-provider",p.innerHTML=this.getText("sign_in_with"),n.appendChild(p));for(var c=0;c<l.length;c++){var u=l[c];if(u){var p=d(u,window.gigya._.getCdnResource("/gs/i/HTMLLogin/"+u.name+"_15.png"));c>1&&(p.style.display="none",s=!0)}}t&&d({name:"guest",displayName:this.getText("as_guest")},a.Images.getPhotoFullName("login_as_guest",this.plugin.pixelRatio)),s&&d({name:"more",displayName:this.getText("show_more")});var h=window.gigya.pluginUtils.DOM.addPopoverNearElement(e,n,"bottom",0,this.plugin.isRtl,!1,"slideDown",function(t,i){i&&(t.target==e||window.gigya.utils.DOM.isChildOf(t.target,e))&&a.Events.cancelEvent(t)}),b=n.querySelector("div.gig-loginbox-provider");b&&b.focus()},e.prototype.onLoginProviderClick=function(e,t,i,o){var n=e.target||e.srcElement,s=n.getAttribute("data-provider");if("more"==s){for(var a=window.gigya.utils.DOM.getElementsByClass(t,"gig-loginbox-provider"),g=0;g<a.length;g++)a[g].style.display="";n.style.display="none",window.gigya.pluginUtils.DOM.placePopoverNearElement(i,t,"bottom",0,this.plugin.isRtl,!1);var r=t.querySelectorAll("div.gig-loginbox-provider")[2];r&&r.focus()}else"guest"==s?(this.onGuestClick(i,o),t.parentNode.removeChild(t)):(window.gigya.socialize.addConnection(this.plugin.params,{provider:s,callback:o}),t.parentNode.removeChild(t))},e.prototype.onGuestClick=function(e,t){var i=this;window.gigya.utils.DOM.addClassToElement(e,"gig-composebox-guest-login-down");var o=window.gigya.utils.DOM.getElementPosition(e),n=document.createElement("div");n.style.position="absolute",null!=n.style.zIndex&&(n.style.zIndex=window.gigya.utils.DOM.getNextZIndex().toString()),n.className="gig-comments-container gig-comments-guestbox",window.gigya.utils.DOM.appendToBody(n);var s=window.gigya.utils.viewport.getInnerSize(),g=Math.max(0,window.gigya.localInfo.quirksMode?o.left-2:o.left);g+n.offsetWidth>s.w-40&&(g=s.w-n.offsetWidth-40),n.style.left=g+"px",n.style.top=o.top+e.offsetHeight-2+(window.gigya.localInfo.quirksMode?-2:0)+"px",n.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.guestbox,{nickname:this.getText("nickname"),email:window.gigya.utils.sanitize.sanitizeAttribute(this.plugin.settings.isGuestEmailRequired?this.getText("email"):this.getText("email_optional")),ok:this.getText("ok"),email_not_displayed_publicly:this.getText("email_not_displayed_publicly")});var r=window.gigya.utils.DOM.getElementsByClass(n,"gig-guestbox-nickname")[0],l=window.gigya.utils.DOM.getElementsByClass(n,"gig-guestbox-email")[0];this.plugin.settings.requireGuestName?r&&window.gigya.global.setPlaceholder(r,r.getAttribute("data-placeholder"),"gig-comments-placeholder"):r.style.display="none",l&&window.gigya.global.setPlaceholder(l,l.getAttribute("data-placeholder"),"gig-comments-placeholder"),window.gigya.utils.DOM.appendToBody(n),this.plugin.isMobileUI||window.gigya.pluginUtils.animation.slideDown(n);var m=function(e){var t=e.keyCode;27==t?(n.parentNode.removeChild(n),window.gigya.utils.DOM.removeEventListener(d,"click",u)):13==t&&u()};window.gigya.pluginUtils.DOM.removeElementOnDocClickOrEscape(n,function(t,i){i&&(t.target==e||window.gigya.utils.DOM.isChildOf(t.target,e))&&a.Events.cancelEvent(t)},null);var d=window.gigya.utils.DOM.getElementsByClass(n,"gig-guestbox-ok")[0],c=(r=window.gigya.utils.DOM.getElementsByClass(n,"gig-guestbox-nickname")[0],l=window.gigya.utils.DOM.getElementsByClass(n,"gig-guestbox-email")[0],window.gigya.utils.DOM.getElementsByClass(n,"gig-guestbox-error")[0]);if(r&&l&&d){var u=function(){var e="",o=l.placeholderCleared?l.value:"",s=r.placeholderCleared?r.value:"",a=""!=o.replace(/ /g,""),g=s.replace(/ /g,"").length>=3;i.plugin.settings.requireGuestName&&!g?e=i.getText("nickname_should_be_at_least_3_characters"):(i.plugin.settings.isGuestEmailRequired&&!a||a&&!window.gigya.pluginUtils.validation.isEmailValid(o))&&(e=i.getText("please_provide_a_valid_email_address")),c.innerHTML=e,e||(i.loginAsGuest(s,o),n.parentNode.removeChild(n),window.gigya.utils.DOM.removeEventListener(document,"keydown",m),window.gigya.utils.DOM.removeEventListener(d,"click",u),t&&t())};window.gigya.utils.DOM.addEventListener(d,"click",u),window.gigya.utils.DOM.addEventListener(document,"keydown",m)}},e.prototype.renderRatings=function(){if(this.uiElements.ratings)if(this.data.isReply()||"disabled"==this.plugin.settings.enableRatings)this.uiElements.ratings.style.display="none";else{var e=[{id:"_overall",name:this.getText("overall_rating")}];this.plugin.settings.ratingDims&&(e=e.concat(this.plugin.settings.ratingDims)),this.uiElements.ratings.style.display="",this.uiElements.ratings.innerHTML="";for(var t=0,i=0;i<e.length;i++){var o=e[i],n=this.getRatingElement(o);"_overall"===o.id&&(this.uiElements.ratingsOverall=n),this.uiElements.ratings.appendChild(n);var s=window.gigya.utils.DOM.getElementsByClass(n,"gig-composebox-rating-title")[0];s&&(t=Math.max(s.offsetWidth,t))}t>0&&window.gigya._.plugins.utils.css.addCss("#"+this.plugin.containerID+" *.gig-composebox-rating-title { width:"+(t+1)+"px; }",this.plugin.params.cssPrefix)}},e.prototype.updateRatings=function(){if(this.uiElements.ratings){var e=[{id:"_overall",name:this.getText("overall_rating")}];this.plugin.settings.ratingDims&&(e=e.concat(this.plugin.settings.ratingDims));for(var t=0;t<e.length;t++){var i=e[t],o=window.gigya.utils.DOM.getElementsByAttribute(this.uiElements.ratings,"*","data-dimension",i.id)[0];this.updateStarsToValue(o,this.data.ratings[i.id])}}},e.prototype.getRatingElement=function(e){var t=this,i=document.createElement("div");i.className="gig-composebox-rating gig-composebox-rating-"+e.id,i.innerHTML=this.plugin.templates.composeboxRating;var o=window.gigya.utils.DOM.getElementsByClass(i,"gig-composebox-rating-title")[0];o&&(o.innerHTML=e.name+":");var n=window.gigya.utils.DOM.getElementsByClass(i,"gig-composebox-rating-value")[0];if(n){n.setAttribute("data-dimension",e.id);for(var s=1;s<6;s++){var a=document.createElement("div");a.setAttribute("data-value",s.toString()),window.gigya.utils.DOM.addClassToElement(a,"gig-composebox-rating-star"),window.gigya.utils.DOM.addEventListener(a,"mouseover",function(e){return t.onStarMouseOver(e)}),window.gigya.utils.DOM.addEventListener(a,"mouseout",function(e){return t.onStarMouseOut(e)}),window.gigya.utils.DOM.addButtonSubmitListener(a,function(e){return t.onStarClick(e)}),n.appendChild(a)}}return i},e.prototype.loginAsGuest=function(e,t){window.gigya.utils.cookie.set("_gig_comments_is_guest","1"),e&&window.gigya.utils.cookie.set("_gig_comments_nickname",e),t&&window.gigya.utils.cookie.set("_gig_comments_email",t),this.plugin.setUser(this.getGuestUser())},e.prototype.logoutGuest=function(){window.gigya.utils.cookie.remove("_gig_comments_is_guest"),window.gigya.utils.cookie.remove("_gig_comments_email"),window.gigya.utils.cookie.remove("_gig_comments_nickname"),this.plugin.setUser({})},e.prototype.onSiteLoginClick=function(e){e||(e=function(){}),window.gigya.events.dispatchForWidget({eventName:"siteLoginClicked",callback:e},this.plugin.params)},e.prototype.getGuestUser=function(){var e=window.gigya.utils.cookie.get("_gig_comments_is_guest");return{UID:"",nickname:window.gigya.utils.cookie.get("_gig_comments_nickname")||"",isGuest:"1"==e,email:window.gigya.utils.cookie.get("_gig_comments_email")||""}},e.prototype.lockGuest=function(){window.gigya.utils.cookie.set("_gig_comments_locked","1")},e.prototype.isGuestLocked=function(){return window.gigya.utils.cookie.get("_gig_comments_locked")},e.prototype.startPolling=function(){var e=this;this.pollingInterval=setInterval(function(){e.handleUpdatedText()},100)},e.prototype.stopPolling=function(){void 0!==this.pollingInterval&&(clearInterval(this.pollingInterval),delete this.pollingInterval)},e.prototype.validate=function(e){var t,i="gig-composebox-field-error",o=this.uiElements.textArea?this.uiElements.textArea.innerHTML:"",n=!0;return this.uiElements.editor&&(window.gigya.utils.DOM.removeClassFromElement(this.uiElements.editor,i),this.uiElements.textArea.removeAttribute("aria-invalid")),this.uiElements.summary&&window.gigya.utils.DOM.removeClassFromElement(this.uiElements.summary,i),this.uiElements.ratingsOverall&&window.gigya.utils.DOM.removeClassFromElement(this.uiElements.ratingsOverall,i),"mandatory"!=this.plugin.settings.enableCommentTitles.split("_")[1]||!this.uiElements.summaryInput||this.data.isReply()||""!=this.uiElements.summaryInput.value.replace(/ /g,"").replace(/\n/g,"").replace(/\r/g,"")&&this.uiElements.summaryInput.placeholderCleared||(this.uiElements.summary&&window.gigya.utils.DOM.addClassToElement(this.uiElements.summary,i),t||(t=this.uiElements.summaryInput),n=!1),!this.data.isReply()&&"mandatory"!=this.plugin.settings.enableCommentBody.split("_")[1]||""!=o.replace(/ /g,"").replace(/\n/g,"").replace(/\r/g,"")||(this.uiElements.editor&&(window.gigya.utils.DOM.addClassToElement(this.uiElements.editor,i),this.uiElements.textArea.setAttribute("aria-invalid","true")),t||(t=this.uiElements.textArea),n=!1),!this.uiElements.ratingsOverall||"mandatory"!=this.plugin.settings.enableRatings.split("_")[1]||this.data.ratings&&this.data.ratings._overall||(window.gigya.utils.DOM.addClassToElement(this.uiElements.ratingsOverall,i),n=!1),this.uiElements.errorMessage&&(n?(this.pendingValidation=!1,this.uiElements.errorMessage.innerHTML="",this.uiElements.errorMessage.style.display="none"):(this.pendingValidation=!0,this.uiElements.errorMessage.innerHTML="ratingsOnly"==this.plugin.settings.mode?this.getText("please_select_your_rating"):this.getText("please_fill_required_fields"),this.uiElements.errorMessage.style.display="block",t&&e&&t.focus())),n},e.prototype.clear=function(){this.uiElements.textArea&&(this.uiElements.textArea.innerHTML="",this.uiElements.textArea.style.minHeight=""),this.uiElements.summaryInput&&(this.uiElements.summaryInput.value="",this.uiElements.summaryInput.refreshPlaceholder()),this.mediaItem&&(this.uiElements.mediaItem&&(this.uiElements.mediaItem.innerHTML=""),this.mediaItem=null),this.clearRatings()},e.prototype.clearRatings=function(){this.data.ratings={},this.updateRatings()},e.prototype.handleUpdatedText=function(){if(document.activeElement==this.uiElements.textArea){try{var e=a.Selection.getSelection(this.uiElements.textArea)}catch(e){this.stopPolling()}var t=this.uiElements.textArea.innerHTML;if(this.lastCommentHTML!=t){var i=this.stripUnallowedTags(t);if(t!=(i=this.stripCRLFTags(i))){i.length,t.length;this.uiElements.textArea.innerHTML=i,a.Selection.restoreSelection(this.uiElements.textArea,e)}this.uiElements.textArea.textContent.length>this.plugin.settings.maxCommentLength&&this.truncateTextNodes(this.uiElements.textArea,this.plugin.settings.maxCommentLength),this.lastCommentHTML=this.uiElements.textArea.innerHTML}e&&!this.plugin.isMobileUI&&(this.updateUserTaggingIfNeeded(e),this.lastSelection=window.gigya.utils.object.clone(e))}},e.prototype.getTextNodes=function(e,t){if(3===e.nodeType)t.push(e);else if(1===e.nodeType)for(var i=e.childNodes,o=0;o<i.length;o++)this.getTextNodes(i[o],t)},e.prototype.truncateTextNodes=function(e,t){var i=[];this.getTextNodes(e,i);for(var o=0;o<i.length;o++){var n=i[o];t>n.nodeValue.length?t-=n.nodeValue.length:0==t?n.nodeValue="":(n.nodeValue=n.nodeValue.substring(0,t),t=0)}},e.prototype.stripUnallowedTags=function(t){if(t){var i=e.alwaysAllowedTags+(this.plugin.settings.enableRichTextEditing?"|"+e.richTextAllowedTags:""),o=new RegExp("<((?!("+i+")[ >/])[a-z]+)[^<]*>|</((?!("+i+")[ >/])[a-z]+)>","gi");-1!=(t=t.replace(o,"")).indexOf('style="')&&(t=t.replace(/style="((.|\n)*?)"/g,""))}return t},e.prototype.stripCRLFTags=function(e){return e&&(e=e.replace(/\r|\n/g,"")),e},e.prototype.updateUserTaggingIfNeeded=function(e){var t=this;if(this.plugin.settings.enableUserTagging&&e&&e.start!=this.lastSelection.start&&e.start==e.end){var i=e.childText.replace(String.fromCharCode(160)," "),o=i.match(/\S+/g);if(o&&o.length>=0)var s=o[o.length-1];if(this.userTaggingBox)this.userTaggingBox.processTextChanged(i);else if(!this.userTaggingBox&&void 0!==s&&0===s.lastIndexOf("@")){this.userTaggingBox=new n.UserTaggingBox(this,function(e,i){e&&i?t.insertUserTag(i,a):delete t.userTaggingBox},i);var a=i.lastIndexOf("@")}}},e.prototype.insertUserTag=function(e,t){if(-1!==t&&window.getSelection){this.uiElements.textArea.focus(),a.Selection.restoreSelection(this.uiElements.textArea,this.lastSelection);var i=window.getSelection();if(i.getRangeAt&&i.rangeCount){var o=i.getRangeAt(0);void 0!==t&&(o.setStart(o.startContainer,t),o.deleteContents());var n=document.createTextNode(String.fromCharCode(160));o.insertNode(n),o.insertNode(e),n=document.createTextNode(String.fromCharCode(160)),o.insertNode(n);var s=document.createRange();s.setStartAfter(n),i.removeAllRanges(),i.addRange(s)}}},e.prototype.onFollowClick=function(e){var t=this;if(this.plugin.isUserFollowing())this.unfollow();else{var i=window.gigya.utils.templates.fill(this.plugin.templates.emailTextboxDialogBody,{text:this.plugin.textMode==s.TextMode.REVIEWS?this.getText("enter_your_email_to_receive_notifications_when_someone_comments_on_your_reviews_colon"):this.getText("enter_your_email_to_receive_notifications_when_someone_replies_to_your_comments_colon"),buttonText:this.getText("follow"),email:this.plugin.user.email,emailLabel:this.getText("email")}),o=this.plugin.showDialog(this.getText("notifications_settings"),i,void 0,void 0,void 0,function(){t.uiElements.followLink.focus()}),n=window.gigya.utils.DOM.getElementsByClass(o,"gig-comments-dialog-textbox-button")[0];window.gigya.utils.DOM.addButtonSubmitListener(n,function(e){var i=window.gigya.utils.DOM.getElementsByClass(o,"gig-comments-dialog-textbox")[0];if(i){var n=i.value;if(window.gigya.pluginUtils.validation.isEmailValid(n))t.follow(i.value),t.plugin.activeDialog.cancelHandler();else window.gigya.utils.DOM.getElementsByClass(o,"gig-comments-dialog-error")[0].innerHTML=t.getText("please_provide_a_valid_email_address")}})}},e.prototype.follow=function(e){window.gigya.comments.setUserOptions(this.plugin.params,{replyNotifications:"immediate",notificationsEmail:e,notificationsLanguage:this.plugin.params.lang}),this.plugin.userOptions||(this.plugin.userOptions={}),this.plugin.userOptions.replyNotifications="immediate",this.updateFollow()},e.prototype.unfollow=function(){window.gigya.comments.setUserOptions(this.plugin.params,{replyNotifications:"disabled"}),this.plugin.userOptions.replyNotifications="disabled",this.updateFollow()},e.prototype.updateFollow=function(){var e=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-composebox-follow")[0];e&&(this.plugin.user.isConnected&&!this.plugin.user.isTempUser?(this.plugin.isUserFollowing()?(window.gigya.utils.DOM.addClassToElement(e,"gig-composebox-following"),e.innerHTML=this.getText("following"),e.setAttribute("aria-label",this.getText("unfollow")),e.title=""):(window.gigya.utils.DOM.removeClassFromElement(e,"gig-composebox-following"),this.plugin.isMobileUI?e.innerHTML=this.getText("follow"):e.innerHTML=this.plugin.textMode==s.TextMode.REVIEWS?this.getText("follow_replies_to_my_reviews"):this.getText("follow_replies_to_my_comments"),e.title=this.plugin.textMode==s.TextMode.REVIEWS?this.getText("notify_me_when_someone_comments_on_my_review"):this.getText("notify_me_when_someone_replies_to_my_comments"),e.setAttribute("aria-label",e.title)),e.style.display=""):e.style.display="none")},e.prototype.toggleSidebarButton=function(e,t){t?window.gigya.utils.DOM.addClassToElement(e,"gig-composebox-sidebar-button-down"):window.gigya.utils.DOM.removeClassFromElement(e,"gig-composebox-sidebar-button-down")},e.prototype.onSidebarTagClicked=function(e){var t=this,i=e.target||e.srcElement;this.userTaggingBox||-1!=i.className.indexOf("gig-composebox-sidebar-button-down")||(window.gigya.utils.DOM.addClassToElement(i,"gig-composebox-sidebar-button-down"),this.userTaggingBox&&this.userTaggingBox.cancel(),this.userTaggingBox=new n.UserTaggingBox(this,function(e,o){e&&o&&t.insertUserTag(o),delete t.userTaggingBox,window.gigya.utils.DOM.removeClassFromElement(i,"gig-composebox-sidebar-button-down")},""))},e.prototype.showSidebarBox=function(e,t,i){var o=this;if(e){var n=window.gigya.utils.DOM.getElementPosition(e);this.toggleSidebarButton(e,!0),t.style.position="absolute",null!=t.style.zIndex&&(t.style.zIndex=window.gigya.utils.DOM.getNextZIndex().toString()),window.gigya.pluginUtils.animation.fadeIn(t),window.gigya.utils.DOM.appendToBody(t),this.plugin.isRtl?t.style.left=Math.max(0,n.left+e.offsetWidth)+"px":t.style.left=Math.max(0,n.left-t.offsetWidth)+"px",t.style.top=n.top+"px",window.gigya.pluginUtils.DOM.removeElementOnDocClickOrEscape(t,function(t,n){n&&(o.toggleSidebarButton(e,!1),t.target==e&&a.Events.cancelEvent(t),i&&i())})}},e.prototype.showMediaBox=function(e){var t=this,i=document.createElement("div");i.className="gig-comments-container gig-comments-mediabox",i.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.mediabox,{url:this.mediaItem?this.mediaItem.url:"",enter_url:this.plugin.getText("enter_url"),add_media_item:this.plugin.getText("tip_use_trusted_urls"),ok:this.plugin.getText("ok")});var o=window.gigya.utils.DOM.getElementsByClass(i,"gig-mediabox-url")[0],n=window.gigya.utils.DOM.getElementsByClass(i,"gig-mediabox-ok")[0];if(n){var s=function(){window.gigya.utils.DOM.removeEventListener(document,"keydown",a),window.gigya.utils.DOM.removeEventListener(n,"click",g)},a=function(e){var t=e.keyCode;27==t?(i.parentElement.removeChild(i),s()):13==t&&g()},g=function(){o&&o.value?(i.parentElement.removeChild(i),t.showMediaItemPreview(),t.toggleSidebarButton(e,!1),window.gigya.comments.analyzeMediaItem({categoryID:t.plugin.params.categoryID,urls:o.value,callback:function(e){!e.errorCode&&e.mediaItems&&1==e.mediaItems.length?(t.mediaItem=e.mediaItems[0],t.updateMediaItem()):(t.uiElements.errorMessage.style.display="block",t.uiElements.errorMessage.innerHTML=t.plugin.getText("the_provided_url_is_not_supported"),window.gigya.pluginUtils.DOM.hideElementOnDocClick(t.uiElements.errorMessage),t.removeMediaItemPreview())}})):(i.parentElement.removeChild(i),t.toggleSidebarButton(e,!1)),s()};window.gigya.utils.DOM.addEventListener(document,"keydown",a),window.gigya.utils.DOM.addEventListener(n,"click",g)}this.showSidebarBox(e,i,s),o.focus()},e.prototype.removeMediaItemPreview=function(){this.uiElements.mediaItem&&(this.uiElements.mediaItem.innerHTML=""),this.mediaItem=null},e.prototype.showMediaItemPreview=function(){if(this.uiElements.mediaItem){this.uiElements.mediaItem.innerHTML="",this.uiElements.editor&&window.gigya.utils.DOM.addClassToElement(this.uiElements.editor,"gig-composebox-editor-with-media");var e=document.createElement("div");window.gigya.utils.DOM.addClassToElement(e,"gig-composebox-media-preview"),this.uiElements.mediaItem.appendChild(e),e.style.height=.75*e.offsetWidth+"px"}},e.prototype.updateMediaItem=function(){var e=this;if(this.uiElements.mediaItem){var t=this.uiElements.mediaItem.childNodes[0];t.style.backgroundImage="";this.plugin.buildMediaItemElement(t,this.mediaItem,!0,function(){e.uiElements.mediaItem.innerHTML="",e.mediaItem=null,e.uiElements.editor&&window.gigya.utils.DOM.removeClassFromElement(e.uiElements.editor,"gig-composebox-editor-with-media")})}},e.prototype.showFontBox=function(e){var t=this,i=document.createElement("div");i.innerHTML=this.plugin.templates.fontbox,i.className="gig-comments-container gig-comments-fontbox";for(var o=i.getElementsByTagName("li"),n=0;n<o.length;n++){var s=o[n];window.gigya.utils.DOM.addEventListener(s,"mousedown",function(o){var n=(o.target||o.srcElement).getAttribute("data-command");n&&(i.parentNode.removeChild(i),t.toggleSidebarButton(e,!1),t.setFontCommand(n)),window.gigya.utils.DOM.cancelEvent(o)})}this.showSidebarBox(e,i)},e.prototype.setFontCommand=function(e){switch(e){case"bold":document.execCommand("bold",!1,!0);break;case"italic":document.execCommand("italic",!1,!0);break;case"underline":document.execCommand("underline",!1,!0);break;case"bullets":document.execCommand("InsertUnorderedList",!1,"newUL")}},e.prototype.submit=function(){},e.prototype.submitCallback=function(e){var t=this.plugin.getComment(this.data.ID);if(e.errorCode>0){var i;switch(e.errorCode){case 403037:i=this.getText("only_one_review_per_product_is_allowed");break;case 400124:i=this.getText("daily_commenting_limit_reached");break;case 400125:i=this.getText("commenting_frequency_limit_reached");break;case 403038:i=this.plugin.textMode==s.TextMode.COMMENTS?this.getText("comment_edit_rejected"):this.getText("review_edit_rejected");break;default:i=this.getText("an_error_has_occurred_please_try_again_later","%errorCode",e.errorCode)}i&&t.updateStatus(i),window.gigya.events.dispatchErrorFromResponse(this.plugin.params,e)}else e.comment&&(t.isTemp=!1,t.isPost=!0,t.reset(o.CommentData.fromRawData(e.comment)))},e.prototype.getSubmitText=function(){return""},e.prototype.afterRender=function(){},e.prototype.getTitle=function(){return""},e.alwaysAllowedTags="div|br|p|input|span",e.richTextAllowedTags="ul|li|u|i|b|strong|em",e.allowedOnLimitKeys=[8,9,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,144,145],e}();t.BaseComposeBox=r},94:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.imgBase=(window.gigya.thisScript?window.gigya._.getCdnResource():"")+"/gs/i/comments2/"},95:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),n=i(93),s=i(161),a=i(68),g=i(36),r=function(e){function t(t,i,o,n){return e.call(this,t,i,new a.CommentData("newComment",o),n)||this}return o.__extends(t,e),t.prototype.render=function(){this.plugin.settings.readOnly||"readOnly"==this.plugin.streamInfo.status||(e.prototype.render.call(this),this.renderSelfReviewIfNeeded(),this.renderShareOptions(),this.renderPostAnonymously(),this.updateUI())},t.prototype.renderShareOptions=function(){if(this.uiElements.shareSection&&this.uiElements.shareProviders){var e=this.plugin.params.enabledShareProviders||this.plugin.params.enabledProviders||"*",t=this.plugin.params.disabledShareProviders||this.plugin.params.disabledProviders||"",i=window.gigya.socialize.getProvidersByName(e);i=window.gigya.socialize.hideProvidersByName(i,t),i=window.gigya.socialize.getProvidersForRequiredCapabilities(i,["actions"]),this.share=new s.ComposeShare(this.uiElements.shareProviders,this.plugin,i,this.plugin.user.identities)}},t.prototype.renderPostAnonymously=function(){if(this.uiElements.postAnonymouslySection)if(this.plugin.settings.allowAnonymous){this.updatePostAnonymously();for(var e=(this.plugin.textMode==g.TextMode.COMMENTS?this.getText("when_posting_anonymously,_other_users_will_not_see_your_personal_info_next_to_your_comment."):this.getText("when_posting_anonymously,_other_users_will_not_see_your_personal_info_next_to_your_review.")).split(" "),t=6;t<e.length;t+=6)e.splice(t,0,["\n"]);this.uiElements.postAnonymouslySection.setAttribute("title",e.join(" "))}else this.uiElements.postAnonymouslySection.parentElement.removeChild(this.uiElements.postAnonymouslySection)},t.prototype.renderSelfReviewIfNeeded=function(){return this.selfReview=this.plugin.getSelfReview(),!(!this.selfReview||this.plugin.settings.allowMultipleReviewsPerUser||this.data.isReply())&&(this.container.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.myReview,{logout:this.getText("logout"),your_review:this.getText("your_review"),summary:this.getText("summary_colon"),review:this.getText("review_colon")}),this.buildUIElementsObj(),this.bindEvents(),this.updateSelfReview(),!0)},t.prototype.getSelfRatingDimensionElement=function(e,t){var i,o=e.data.ratings[t],n=document.createElement("div");if(n.innerHTML=this.plugin.templates.rating,n.className="gig-selfreview-rating gig-selfreview-rating-"+t,"_overall"==t)i=this.getText("my_rating_colon");else{var s=this.plugin.settings.ratingDims;if(s)for(var a=0;a<s.length;a++)if(s[a].id==t){i=s[a].name+":";break}}if(i){var g=window.gigya.utils.DOM.getElementsByClass(n,"gig-comment-rating-title")[0];g&&(g.innerHTML=i);var r=window.gigya.utils.DOM.getElementsByClass(n,"gig-comment-rating-value")[0];if(r){r.innerHTML="",r.title=o.toString();for(a=0;a<5;a++){var l=document.createElement("div");window.gigya.utils.DOM.addClassToElement(l,"gig-selfreview-rating-star");var m="";a<Math.floor(o)&&(m="gig-selfreview-rating-star-full"),window.gigya.utils.DOM.addClassToElement(l,m),r.appendChild(l)}}return n}},t.prototype.getUserAction=function(e,t){void 0===t&&(t=null),t||(t=this.data.isReply()?this.plugin.params.replyUserAction:this.plugin.params.userAction),(t=t?t.clone():new window.gigya.socialize.UserAction).title||(this.plugin.textMode!=g.TextMode.REVIEWS||this.data.isReply()?t.title=this.getText("commented_on_colon_pagetitle","%pageTitle",document.title):e.ratings&&e.ratings._overall?t.title=this.getText("i_rated_pagetitle_as_rating_5","%rating",e.ratings._overall.toString()).replace("%pageTitle",document.title):t.title=this.getText("my_review_on_colon_pagetitle","%pageTitle",document.title)),t.linkBack||(t.linkBack=window.gigya._.plugins.utils.URL.addOrReplaceHashFragment(document.location.href,"gig_comment_id","$commentID$"));var i=document.createElement("p");i.innerHTML=e.commentText.replace(/<br>/g,"\n").replace(/<\/?div>/g,"\n"),t.userMessage=i.innerText||i.textContent;var o={commentTitle:e.commentTitle,commentText:e.commentText,rating:e.ratings?e.ratings._overall:null};return o.ratingDescription=[this.getText("i_hate_it"),this.getText("i_dont_like_it"),this.getText("its_ok"),this.getText("i_like_it"),this.getText("i_love_it")][o.rating-1],window.gigya.global.fillUserActionTemplate(t,o)},t.prototype.bindEvents=function(){var t=this;e.prototype.bindEvents.call(this),window.gigya.utils.DOM.addEventListener(this.uiElements.postAnonymouslySection,"click",function(){t.postAnonymously=!t.postAnonymously,t.updatePostAnonymously()})},t.prototype.updateUI=function(){if(this.uiElements){var t=this.plugin.getSelfReview();if(!this.data.isReply()&&!this.plugin.settings.allowMultipleReviewsPerUser){if(t!=this.selfReview)return void this.render();t&&this.updateSelfReview()}e.prototype.updateUI.call(this),this.updateShareOptions(),this.updatePostAnonymously()}},t.prototype.updateSelfReview=function(){var e=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-selfreview-summary-container")[0],t=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-selfreview-summary")[0];t&&(this.selfReview&&this.selfReview.data.commentTitle?(t.innerHTML=this.selfReview.data.commentTitle,e&&(e.style.display="")):(t.innerHTML="",e&&(e.style.display="none")));var i=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-selfreview-body")[0];if(i)if(this.selfReview&&this.selfReview.data.commentText)i.innerHTML=window.gigya.global.wbr(this.selfReview.data.commentText.replace(/\n/g,"<br />"),20);else{i.innerHTML="";var o=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-selfreview-body-container")[0];o&&(o.style.display="none")}var n=0,s=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-selfreview-ratings")[0];if(s&&(s.id="gig_"+(new Date).getTime(),s.innerHTML="",s&&this.selfReview.data.ratings)){for(var a in this.selfReview.data.ratings){var g=this.getSelfRatingDimensionElement(this.selfReview,a);if(g){"_overall"==a&&s.firstChild?s.insertBefore(g,s.firstChild):s.appendChild(g);var r=window.gigya.utils.DOM.getElementsByClass(g,"gig-comment-rating-title")[0];n=Math.max(n,r.offsetWidth)}}window.gigya._.plugins.utils.css.addCss("#"+s.id+" *.gig-comment-rating-title { width:"+n+"px; }","")}},t.prototype.updateShareOptions=function(){this.uiElements.shareSection&&((this.plugin.user.isConnected||!this.plugin.user.isGuest)&&this.share.providers.length>0&&this.plugin.shareEnabled?(this.uiElements.shareSection.style.display="",this.share.updateIcons()):this.uiElements.shareSection.style.display="none")},t.prototype.updatePostAnonymously=function(){this.uiElements.postAnonymouslySection&&this.uiElements.postAnonymouslyCheckbox&&(!this.plugin.user.isConnected||this.plugin.user.isGuest?this.uiElements.postAnonymouslySection.style.display="none":(this.uiElements.postAnonymouslySection.style.display="",this.postAnonymously?window.gigya.utils.DOM.addClassToElement(this.uiElements.postAnonymouslyCheckbox,"gig-comments-checkbox-checked"):window.gigya.utils.DOM.removeClassFromElement(this.uiElements.postAnonymouslyCheckbox,"gig-comments-checkbox-checked")))},t.prototype.updateLoginLogoutElements=function(){e.prototype.updateLoginLogoutElements.call(this);var t=this.getElement("or");this.uiElements.loginBar&&(this.isLoginDropdownEnabled()?this.plugin.user.isConnected||this.plugin.user.isGuest?this.uiElements.loginBar.style.display="none":(this.plugin.settings.useSiteLogin&&this.uiElements.siteLoginButton?(this.uiElements.siteLoginButton.style.display="",this.uiElements.socialLoginButton&&(this.uiElements.socialLoginButton.style.display="none")):(this.uiElements.siteLoginButton&&(this.uiElements.siteLoginButton.style.display="none"),this.uiElements.socialLoginButton&&(this.uiElements.socialLoginButton.style.display="")),this.uiElements.loginBar.style.display=""):this.uiElements.loginBar.style.display="none"),this.uiElements.guestLoginButton&&(this.plugin.settings.allowGuest&&this.isLoginDropdownEnabled()?(this.uiElements.guestLoginButton.style.display="",t&&(t.style.display="")):(this.uiElements.guestLoginButton.style.display="none",t&&(t.style.display="none")))},t.prototype.afterRender=function(){this.hideElement(this.uiElements.cancelButton)},t.prototype.getSubmitText=function(){return this.getText("post")},t.prototype.getTitle=function(){var e,t=this.plugin.getComment(this.data.parentID);if(null!=t){var i=this.plugin.textMode==g.TextMode.REVIEWS?"comment_on_username_review":"reply_to_username";e=this.getText(i,"%username",'<span class="gig-composebox-username">'+window.gigya.utils.sanitize.sanitizeHTML(t.getUsername())+"</span>")}else e=this.plugin.user.isConnected||this.plugin.user.isGuest?this.getText("hello_username","%username",this.plugin.getUsername()):"";return e},t.prototype.submit=function(e){var t=this,i=this.uiElements.submitButton;this.uiElements.summaryInput;if(this.plugin.user.isGuest||this.plugin.user.isConnected){var o=(new Date).getTime(),n="pending_"+o;this.data.isReply()&&this.close(),this.data=window.gigya.utils.object.merge([this.data,{ID:n,timestamp:o,threadTimestamp:o,sender:{photoURL:window.gigya.global.getPhotoURL(this.plugin.user.thumbnailURL||this.plugin.user.photoURL),loginProvider:this.getLoginProvider(),name:this.plugin.getUsername(),UID:this.plugin.user?this.plugin.user.UID:null},tags:this.plugin.params.commentTags}]),this.postAnonymously&&(this.data.highlightGroups=[],this.data.sender={name:this.plugin.getText("anonymous")});var s=window.gigya.utils.object.removeUndefined({commentText:"disabled"!=this.plugin.settings.enableCommentBody?this.data.commentText:null,parentID:this.data.parentID?this.data.parentID:null,commentTitle:"disabled"==this.plugin.settings.enableCommentTitles||this.data.isReply()?null:this.data.commentTitle,taggedUsers:this.data.taggedUsers.length>0?this.data.taggedUsers.join(","):null,mediaItems:this.data.mediaItems.length>0?this.data.mediaItems[0].url:null,ratings:this.plugin.textMode==g.TextMode.REVIEWS?this.data.ratings:null,enabledProviders:e||!this.share||0==this.share.getSelected().length?" ":this.share.getSelected().join(","),tags:this.plugin.params.commentTags,anonymous:!!this.postAnonymously||null,guestName:this.plugin.user.isGuest?this.plugin.user.nickname:null,guestEmail:this.plugin.user.isGuest?this.plugin.user.email:null,callback:function(e){return t.submitCallback(e)}});if(this.share)for(var a=0;a<this.share.getSelected().length;a++){var r=this.share.getSelected()[a]+"UserAction";this.plugin.params[r]=this.getUserAction(this.data,this.plugin.params[r])}var l=s;if(l.guestName||(l.guestName=""),l.guestEmail||(l.guestEmail=""),l.eventName="beforeCommentSubmitted",0!=window.gigya.events.dispatchForWidget(l,this.plugin.params)){s=l,""==l.guestName&&delete l.guestName,""==l.guestEmail&&delete l.guestEmail;var m=this.plugin.getComment(this.data.parentID),d=m?m.level+1:0,c=null;"pending"==this.data.status&&(c=this.plugin.textMode==g.TextMode.REVIEWS&&0==d?this.getText("your_review_is_awaiting_moderation"):this.getText("your_comment_is_awaiting_moderation")),this.plugin.addComments([this.data],d,!1,!0,null,c),window.gigya.comments.postComment(this.plugin.params,s),this.share&&this.share.saveSelected(),this.plugin.setStreamInfoIfNeeded(),this.clear()}}else{var u=function(){t.submit()};this.plugin.settings.useSiteLogin?this.onSiteLoginClick(u):this.onLoginClick(i,this.plugin.settings.allowGuest,u)}},t.prototype.submitCallback=function(t){if(e.prototype.submitCallback.call(this,t),0==t.errorCode){var i=this.plugin.getComment(t.comment.ID);"published"===i.data.status&&(this.plugin.streamInfo.commentCount++,this.data.isReply()||this.plugin.streamInfo.ratingCount++,this.plugin.updateCount());var o=window.gigya.utils.object.removeUndefined({eventName:"commentSubmitted",streamID:this.plugin.params.streamID,categoryID:this.plugin.params.categoryID,commentText:i.data.commentText,comment:window.gigya.utils.object.clone(i.data,!0,!0),mode:this.plugin.textMode==g.TextMode.REVIEWS?"reviews":"comments",ratings:i.data.ratings,commentTitle:i.data.commentTitle,providerPostIDs:i.data.providerPostIDs,user:this.plugin.user.UID?this.plugin.user:null,guestUser:this.plugin.user.isGuest?{nickname:this.plugin.user.nickname,email:this.plugin.user.email}:null});this.plugin.userCommentsData.push(i.data),this.plugin.setUserComments(this.plugin.userCommentsData),window.gigya.events.dispatchForWidget(o,this.plugin.params)}},t}(n.BaseComposeBox);t.NewCommentBox=r}});