!function(t){var i={};function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(o,n,function(i){return t[i]}.bind(null,n));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=370)}({370:function(t,i){void 0===window.gigya.services.gm.plugins&&(window.gigya.services.gm.plugins={}),function(){window.gigya.services.gm.plugins.notifications={instances:{},showNotifications:function(t,e,o){i.createInstance(t,e,o)}};var t=window.gigya.services.gm.plugins.notifications,i={instances_size:0,notificationsPlugin:function(t,i,e){this._c=t,this._p=i,this._i=e,this._elid=i.containerID},createInstance:function(e,o,n){var a=document.getElementById(o.containerID);if(null!=a){a.innerHTML="";var s=new i.notificationsPlugin(e,o,n);t.instances[o.containerID]=s,i.instances_size++,s.init()}},createDefaultTemplates:function(){var t={_map:{},get:function(t){return this._map[t]},set:function(t,i){this._map[t]=i instanceof Array?i.join(""):i}};return t.set("notification",['<div class="gig-notifications">','<div class="gig-notifications-body">${body}</div>','<div class="gig-notifications-footer">${footer}</div>','<div class="gig-notifications-shareButton-container">${shareButton}</div>',"</div>"]),t.set("notificationCaption",['<div class="gig-notifications-caption">$TEXT("alert_new_level_reached")</div>']),t.set("notificationBody",['<table role="presentation" cellspacing="0" cellpadding="0"><tr>','<td class="gig-notifications-body-badge-container"><img alt="" class="gig-notifications-body-badge" src="$badgeURL" /></td>','<td class="gig-notifications-body-text-container"><div class="gig-notifications-body-text">',"$congratulations<br />$challengeDescription","</div></td>","</tr></table>"]),t.set("notificationFooter",['<table role="presentation" cellspacing="0" cellpadding="0"><tr>','<td class="gig-notifications-footer-text-container"><div class="gig-notifications-footer-text">$footerText</div></td>','<td class="gig-notifications-footer-nextLevelBadge-container"><a id="${id}_nextLevelBadge"><img alt="" src="$nextLevelLockedBadgeURL" class="gig-notifications-footer-nextLevelBadge" /></a></td>',"</tr></table>"]),t.set("shareButton",['<div class="gig-notifications-shareButton" id="${id}_shareButton"></div>']),t.set("closeButton",['<div class="gig-notifications-closeImage" id="${id}_closeButton"></div>']),t},defaultCss:[".gig-notifications *, div.gig-notifications, .gig-notifications span, .gig-notifications a:hover, .gig-notifications a:visited, .gig-notifications a:link, .gig-notifications a:active{","border:none; line-height:normal;padding:0px;margin:0px;color:inherit;text-decoration:none;width:auto;float:none;-moz-border-radius:0;border-radius:0;","font-family:arial;font-size:12px;color:#313131;background:none;text-align:left;z-index:99999}","div.gig-notifications-body {margin:7px 0;width:100%;}","div.gig-notifications-body-text {margin-right:7px}","td.gig-notifications-body-badge-container {vertical-align:top}","td.gig-notifications-body-text-container {vertical-align:middle}","span.gig-notifications-body-text-congratulations {font-weight:bold}","span.gig-notifications-body-text-levelTitle {font-weight:bold}","img.gig-notifications-body-badge {width:50px;height:50px;margin-right:10px;}","div.gig-notifications-footer{border-top: 1px solid #F0F0F0; padding: 7px 0 10px 0;width:100%}","div.gig-notifications-footer-text {margin-right:10px;}","span.gig-notifications-footer-text-achievementsLeft {font-weight:bold}","span.gig-notifications-footer-text-nextlevelTitle {font-weight:bold}","img.gig-notifications-footer-nextLevelBadge {width: 40px;height:40px}","td.gig-notifications-footer-nextLevelBadge-container {vertical-align:top;}","div.gig-notifications-shareButton {margin-left:auto;cursor:pointer;height: 18px;width: 70px;background-image:url('"+window.gigya._.getCdnResource("/gs/i/gm/shareButton.png")+"')}","div.gig-notifications-shareButton-container {text-align:right;overflow:hidden;}",'div.gig-notifications-closeImage {cursor:pointer; background-image:url("'+window.gigya._.getCdnResource("/gs/i/gm/CloseButton.png")+'"); width:14px;height:14px;}','.gig-notifications div.gig-balloon-frame {-ms-filter:"" !important;filter:"" !important; border-bottom:none}',"div.gig-notifications-footer-text a.gig-notifications-footer-link { color:#3e59ff;cursor:pointer;text-decoration:underline; }","div.gig-notifications-footer-text a.gig-notifications-footer-link * { color:#3e59ff;cursor:pointer;text-decoration:underline; }"]};i.notificationsPlugin.prototype={init:function(){this.templates=i.createDefaultTemplates(),this._p.headerTemplate&&this.templates.set("notificationCaption",this._p.headerTemplate),this._p.bodyTemplate&&this.templates.set("notificationBody",this._p.bodyTemplate),this._p.footerTemplate&&this.templates.set("notificationFooter",this._p.footerTemplate),this._p.dialogTemplate&&this.templates.set("notification",this._p.dialogTemplate),!this._p.cssPrefix&&i.addedCSS||(window.gigya.global.addCSS(i.defaultCss,this._p.cssPrefix),i.addedCSS=!0);var t=this;window.gigya.services.socialize.getUserSettings(this._c,{group:"gmSettings",callback:function(i){t.onSettings(i)}}),window.gigya.services.gm.getChallengeStatus(this._c,{details:"full",callback:function(i){t.afterGetChallenge(i)}})},getText:function(t,i,e){return window.gigya.pluginUtils.lang.getLocalizedText("gigya.services.gm.plugins.notifications.js",t,this._p.lang,i,e)},afterGetChallenge:function(t){if(t.errorCode>0)window.gigya.events.dispatchErrorFromResponse(this._p,t);else{if(!i.waitingForNotifications&&!window.gigya.utils.validation.isExplicitFalse(this._p.waitForNotifications)){i.waitingForNotifications=!0;var e=this,o=function(){window.setTimeout(function(){window.gigya.gm.showNotifications(e._p)},3e3)};window.gigya.events.addMap({defaultMethod:o,eventMap:[{events:"sendDone,reactionClicked,login,connectionAdded,commentSubmitted,commentVoted",args:[]}]}),window.gigya.socialize.addEventHandlers({listenerType:"component"},{onActionNotified:o})}t.achievements&&(this.achievements=t.achievements,this.draw())}},draw:function(){this.achievements&&this.settings&&(this.lastNotificationIndex=-1,this.drawNextNotification()),this.firedLoadEvent||(this.firedLoadEvent=!0,window.gigya.events.dispatchForWidget({eventName:"load",containerID:this._p.containerID},this._p))},drawNextNotification:function(){for(var t=this.lastNotificationIndex+1;t<this.achievements.length;t++){var i=this.achievements[t];if(i.isNewLevel&&i.level>0||this._p.debugMode){var e=[];i.badgeURL&&e.push(window.gigya.global.getPhotoURL(i.badgeURL)),i.nextLevelLockedBadgeURL&&e.push(window.gigya.global.getPhotoURL(i.nextLevelLockedBadgeURL,window.gigya._.getCdnResource("/gs/i/gm/LockedBadge.png")));var o=this;return window.gigya.global.preloadImages(e,function(){window.gigya.events.dispatchForWidget({eventName:"newLevel",challenge:i},o._p),o.drawNotification(i)}),void(this.lastNotificationIndex=t)}}try{var n=document.getElementById(this._elid);n.parentNode.removeChild(n),window.detachEvent("onscroll",n.fnFixPosition),window.detachEvent("onresize",n.fnFixPosition)}catch(t){}},closeNotification:function(){this.closeTimeout&&this.stopTimeout(),window.gigya.events.dispatchForWidget({eventName:"close"},this._i);var t=document.getElementById(this._elid+"_notification");window.gigya.global.removeIframeShim(t),document.getElementById(this._elid).innerHTML="",this.drawNextNotification()},drawNotification:function(t){var i=window.gigya.utils.object.clone(t);i.TEXT=window.gigya.utils.delegate.create(this,this.getText),i.id=this._elid+"_notification";var e=this.templates.get("notificationCaption"),o=document.getElementById(this._elid);i.nextLevelTitle&&i.actionStatus&&i.actionStatus.length>0?i.nextLevelActionURL?(i.footer=this.templates.get("notificationFooter"),i.footerText=('<a target="_blank" class="gig-notifications-footer-text gig-notifications-footer-link" href="$nextLevelActionURL" alt="">'+this.getText("learn_how_to_unlock_the_leveltitle_badge")+"</a>").replace("%leveltitle",'<span class="gig-notifications-footer-text gig-notifications-footer-text-nextlevelTitle">$nextLevelTitle</span>')):i.footer="":i.nextLevelTitle&&void 0!==i.pointsStatus?(i.footer=this.templates.get("notificationFooter"),i.requiredAchievement=this.getText(t.requiredAchievement)||i.requiredAchievement,i.footerText=this.getText("num_more_achievement_to_unlock_leveltitle_level","%num",'<span class="gig-notifications-footer-text gig-notifications-footer-text-achievementsLeft">$achievementsToNextLevel</span>').replace("%achievement","$requiredAchievement").replace("%leveltitle",'<span class="gig-notifications-footer-text gig-notifications-footer-text-nextlevelTitle">$nextLevelTitle</span>')):i.footer="",i.shareButtonImgSrc=window.gigya._.getCdnResource("/gs/i/gm/shareButton.png"),i.shareButton="",i.closeButton=this.templates.get("closeButton"),i.badgeURL=window.gigya.global.getPhotoURL(i.badgeURL),i.nextLevelLockedBadgeURL=window.gigya.global.getPhotoURL(i.nextLevelLockedBadgeURL,window.gigya._.getCdnResource("/gs/i/gm/LockedBadge.png")),this.settings.autoShare||(i.shareButton=window.gigya.utils.templates.fill(this.templates.get("shareButton"),i)),i.congratulations='<span class="gig-notifications-body-text gig-notifications-body-text-congratulations">$TEXT("congratulations")</span> '+this.getText("youve_unlocked_the_leveltitle_level","%levelTitle",'<span class="gig-notifications-body-text gig-notifications-body-text-levelTitle">$levelTitle</span>'),i.body=window.gigya.utils.templates.fill(this.templates.get("notificationBody"),i);var n=this.templates.get("notification"),a=window.gigya.utils.templates.fill(e,i),s=window.gigya.utils.templates.fill(n,i);null!=this._p.dialogTemplate?o.innerHTML='<span id="'+this._elid+'_notification">'+s+"</span>":o.innerHTML='<span id="'+this._elid+'_notification">'+window.gigya.global.getBalloonHTML(s,a,300,null,null,null,null,this.getInstanceRefString()+".closeNotification()")+"</span>",o.className="gig-notifications";var l=document.getElementById(this._elid+"_notification"),g=this;l.style.position="relative",window.gigya.localInfo.quirksMode?(o.style.overflow="hidden",l.style.zoom="1",o.style.position="absolute",o.fnFixPosition||(o.fnFixPosition=function(){var t=window.innerHeight,i=window.innerWidth;t&&0!=t||(t=document.body.clientHeight,i=document.body.clientWidth);var e=window.gigya.utils.viewport.getScroll(),n=e.top+t,a=e.left+i;o.style.left=a-o.offsetWidth-20+"px",o.style.top=n-o.offsetHeight+"px";var s=document.getElementById(g._elid+"_notification");s&&s.shim&&s.shim.update()},window.attachEvent("onscroll",o.fnFixPosition),window.attachEvent("onresize",o.fnFixPosition)),o.fnFixPosition()):(o.style.left="",o.style.position="fixed",o.style.bottom="0",o.style.right="10px"),window.gigya.localInfo.isIE&&window.gigya.global.addIframeShim(l),l.slideBottom=o.offsetHeight,g.slideNotification(l),window.gigya.services.gm.resetLevelStatus(this._c,{challenges:t.challengeID}),t.isNewLevel=!1;var c=document.getElementById(i.id+"_shareButton");c&&(c.onclick=function(){g.shareButtonClicked(t)});var r=document.getElementById(i.id+"_closeButton");r&&(r.onclick=function(){g.closeNotification()});var d=document.getElementById(i.id+"_nextLevelBadge");d&&t.nextLevelActionURL&&(d.href=t.nextLevelActionURL,d.target="_blank"),l.onmouseover=function(){g.stopTimeout()},l.onmouseout=function(){g.noTimeout||g.startTimeout()},this.startTimeout(),this.noTimeout=!1,this.publishChallenge(t)},stopTimeout:function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},startTimeout:function(){var t=this,i=null!=this._p.closeTimeout?this._p.closeTimeout:1e4;i>0&&(this.closeTimeout=window.setTimeout(function(){t.closeNotification()},i))},onSettings:function(t){t.errorCode>0&&window.gigya.events.dispatchErrorFromResponse(this._p,t),t.settings&&(this.settings=t.settings,this.draw())},publishChallenge:function(t){var i;!this.settings.privateProfile&&this._p.feedID&&(i="internal"),this.settings.autoShare&&(i="internal"==i?"both":"external"),i&&window.gigya.services.socialize.publishUserAction(this._c,{scope:i,userAction:this.getUserAction(t)})},slideNotification:function(t){t.style.top=t.slideBottom+"px",t.shim&&t.shim.update();var i=this;this.slideInterval=window.setInterval(function(){t.slideBottom-=5,t.style.top=t.slideBottom+"px",t.shim&&t.shim.update(),t.slideBottom<=1&&(t.style.top="0",t.shim&&t.shim.update(),window.clearInterval(i.slideInterval))},10)},shareButtonClicked:function(t){var i=this,e={containerID:"",userAction:this.getUserAction(t,!0),sourceData:{challengeID:t.challengeID,level:t.level},onSendDone:function(t){window.gigya.events.dispatchForWidget(t,i._p)},onClose:function(t){i.closeNotification()}};window.gigya.services.socialize.showShareUI(window.gigya.utils.object.clone(this._c,!0,!0),e,this._c.shareParams),this.stopTimeout(),this.noTimeout=!0},getUserAction:function(t,i){var e=this._p.userAction;return i&&this._p.shareParams&&this._p.shareParams.userAction&&(e=this._p.shareParams.userAction),e?e=new window.gigya.services.socialize.UserAction(window.gigya.utils.object.clone(e,!0,!0)):((e=new window.gigya.services.socialize.UserAction).setTitle(this.getText("i_just_achieved_leveltitle","%leveltitle","$levelTitle")),e.setDescription("$levelDescription"),e.addImage("$badgeURL")),e.linkBack||e.setLinkBack(document.location.href),window.gigya.global.fillUserActionTemplate(e,t)},getInstanceRefString:function(){return"gigya.services.gm.plugins.notifications.instances['"+encodeURIComponent(this._elid)+"']"}}}()}});