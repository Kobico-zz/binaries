!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=291)}([function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"__extends",function(){return r}),n.d(t,"__assign",function(){return o}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return s}),n.d(t,"__param",function(){return l}),n.d(t,"__metadata",function(){return c}),n.d(t,"__awaiter",function(){return u}),n.d(t,"__generator",function(){return d}),n.d(t,"__exportStar",function(){return p}),n.d(t,"__values",function(){return h}),n.d(t,"__read",function(){return g}),n.d(t,"__spread",function(){return m}),n.d(t,"__spreadArrays",function(){return f}),n.d(t,"__await",function(){return y}),n.d(t,"__asyncGenerator",function(){return S}),n.d(t,"__asyncDelegator",function(){return _}),n.d(t,"__asyncValues",function(){return v}),n.d(t,"__makeTemplateObject",function(){return w}),n.d(t,"__importStar",function(){return b}),n.d(t,"__importDefault",function(){return E});var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=e||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function s(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function l(e,t){return function(n,i){t(n,i,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,i){return new(n||(n=gigya.Promise))(function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}l((i=i.apply(e,t||[])).next())})}function d(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function p(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function f(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function S(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){r[e]&&(i[e]=function(t){return new gigya.Promise(function(n,i){o.push([e,t,n,i])>1||s(e,t)})})}function s(e,t){try{(n=r[e](t)).value instanceof y?gigya.Promise.resolve(n.value.v).then(l,c):u(o[0][2],n)}catch(e){u(o[0][3],e)}var n}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function _(e){var t,n;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:y(e[i](t)),done:"return"===i}:r?r(t):t}:r}}function v(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new gigya.Promise(function(i,r){(function(e,t,n,i){gigya.Promise.resolve(i).then(function(t){e({value:t,done:n})},t)})(i,r,(t=e[n](t)).done,t.value)})}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}}.call(this,n(0).__assign)},,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(51);function r(e,t){for(var n=0;n<e.length;++n)t(e[n],n,e)}function o(e,t){var n=e.attributes,i=!1;if(n)for(var r=0;r<n.length;r++)if(-1!==n[r].nodeName.indexOf(t)){i=!0;break}return i}function a(e,t){var n=function(e){var t=e.lastIndexOf("?"),n=e.substr(t+1,e.length),i=n.indexOf(":")+1,r=n.substr(i,n.length);"'"!=(r=window.gigya.utils.stringUtils.trim(r))[0]&&(r="'"+r);"'"!=r[r.length]&&(r+="'");var o=n.substr(0,i-1);return e=e.substr(0,t+1)+o+":"+r}(function(e){return e=(e=(e=e.replace(/\'/g,"'")).replace(/\?/g,"?'")).replace(/:/g,"':")}(function(e,t){var n=e.lastIndexOf("?"),i=e.substr(n+1,e.length),r=i.indexOf(":");if(-1===r)e+=":",t&&(e+=t);else{var o=i.substr(r+1,i.length);""===o&&(e=e.substr(0,e.length)+t)}return e}(e,t)));if(!t){var i=n.lastIndexOf(":'"+t+"'");i>-1&&(n=n.substring(0,i)+":null")}return n}function s(e){for(var t=[],n=e.attributes,i=0;i<n.length;i++)t.push(n[i]);return t}t.isHidden=function(e){for(;e&&e.parentElement;){if("hidden"===e.style.visibility||"none"===e.style.display||window.gigya.utils.DOM.isElementClass(e,"gigya-error-display")&&!window.gigya.utils.DOM.isElementClass(e,"gigya-error-display-active")||window.gigya.utils.DOM.isElementClass(e,"ng-hide"))return!0;e=e.parentElement}return!1},t.inIFrame=function(){try{return window.self!==window.top}catch(e){return!0}},t.isFieldInHiddenContainer=function(e){for(var t=e;t;){if(window.gigya.utils.DOM.isElementClass(t,"gigya-container")&&!window.gigya.utils.DOM.isElementClass(t,"gigya-container-enabled"))return!0;t=t.parentElement}return!1},t.firstPart=function(e,t){var n=e.indexOf(t);return n>-1?e.substring(0,n):e},t.LastIndexOf=function(e,t,n){void 0===n&&(n=0);for(var i=e.length;--i>=n;)if(e[i]===t)return i;return-1},t.ForEach=r,t.ForEachProp=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n,e)},t.Some=function(e,t){for(var n=0;n<e.length;++n)if(t(e[n],n,e))return!0;return!1},t.Every=function(e,t){for(var n=0;n<e.length;++n)if(!t(e[n],n,e))return!1;return!0},t.EveryProp=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&!t(e[n],n,e))return!1;return!0},t.Map=function(e,t){var n=new Array;return r(e,function(e,i,r){return n.push(t(e,i,r))}),n},t.DeepFreeze=function(e){},t.getElementsByHavingAttribute=function(e,t,n){var i=new Array;return r(e.getElementsByTagName(t),function(e){e.getAttribute(n)&&i.push(e)}),i},t.getElementsByHavingAttributePrefix=function(e,t,n){void 0===n&&(n=[]),"string"==typeof t&&(t=[t]);for(var i=e.getElementsByTagName("*"),r=new Array,a=0;a<=i.length-1;a++){var s=i.item(a);if(-1===window.gigya.utils.array.indexOf(n,s.tagName.toLowerCase()))for(var l=0,c=t;l<c.length;l++){var u=c[l];o(i[a],u)&&r.push(i[a])}}return r},t.isElementContainAttributePrefix=o,t.getConditionalAttributeExpressions=function(e,t){void 0===t&&(t=!1);var n,o,l=new Array,c=!1;return r(s(e),function(r){try{var s=-1!==r.nodeName.indexOf(i.Screen_CONSTS.conditionalAttributePrefix),u=-1!==r.nodeName.indexOf(i.Screen_CONSTS.expressionAttributePrefix);if(s||u){var d=r.nodeName.indexOf(":");if(-1!==d){var p=void 0;if(t)n=window.gigya._.plugins.utils.DOM.getAttribute(e,"value"),p=window.gigya._.plugins.utils.DOM.getAttribute(e,"name"),c="param"===e.tagName.toLowerCase();else{p=r.nodeName.substring(d+1,r.nodeName.length),o=window.gigya._.plugins.utils.DOM.getAttribute(e,p);var h="gigya-default-"+p;window.gigya._.plugins.utils.DOM.getAttribute(e,h)||window.gigya._.plugins.utils.DOM.setAttribute(e,h,null!==o?o:"null");var g=window.gigya._.plugins.utils.DOM.getAttribute(e,h);n="null"!==g?g:null}var m={attributeName:p,condition:u?r.nodeValue:a(r.nodeValue,n),defaultValue:n,lastAttributeValue:o,isWidgetParamTag:c};l.push(m)}}}catch(e){throw new Error("Conditional format error: "+e)}}),l},t.setupConditionalExpressionValue=a,t.isKeyCodeDisplayable=function(e){return e>47&&e<58||32==e||13==e||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223},t.UnitMeasurementType={pixel:"px",percentage:"%",auto:""},t.getUnitMeasurementType=function(e){return void 0===e&&(e=""),null===e||"auto"==e?t.UnitMeasurementType.auto:-1!=e.indexOf("%")?t.UnitMeasurementType.percentage:t.UnitMeasurementType.pixel},t.getAttributesAsArray=s,t.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},t.hasIndex=function(e){return/\[[0-9]]|\.[0-9]/.test(e)},t.removeSerializedKeyLastEnumerator=function(e){return e.replace(/[0-9]\.(?=[^.]*$)/,"").replace(/\[[0-9]](?=[^\[]*$)/,"")},t.removeSerializedKeyEdgeProperty=function(e){return e.substr(0,e.lastIndexOf("."))},t.IETemplateElementPolyfill=function(e){if(void 0===e&&(e=document),!("content"in document.createElement("template")))for(var t,n,i,r=Array.prototype.slice.call(document.getElementsByTagName("template")),o=0;(t=r[o++])&&!t.content;){for(n=t.children,i=document.createDocumentFragment();n[0];)i.appendChild(n[0]);t.content=i}}},,,,,,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(26),a=n(15),s=n(17),l=n(65),c=n(33),u=n(140),d=n(84);t.Form_CONSTS={originalSuccessScreen:"data-original-success-screen",successScreen:"data-on-success-screen",autoSkipScreen:"data-on-auto-skip-screen",autoSkipFlag:"data-auto-skip",screenSetSkippedScreen:"data-on-screenset-skipped-screen",formErrorClass:"gigya-form-error",defaultCheckedAttribute:"data-checked"},t.CUSTOM_VALIDATION_TIMEOUT_WARNING=1e4,r.DeepFreeze(t.Form_CONSTS);var p=function(e){function n(n,i,r){var o=e.call(this,i,n)||this;return o._screen=n,o.gigyaClass=r,o.formErrors={},o.dataToServer=new Array,o._dynamicInputs=new Array,o._inputs=new Array,o._errorDisplayElements={},o._widgets=new Array,o._passwordInputs=new Array,o._passwordRetypes=new Array,o._secretQuestions=new Array,o._autoSkipContainers=new Array,o._serverWidgets=new Array,o._needContainerHistory=!1,o.filters=new Array,o.isPopulated=!1,o.bindID=o.publishID?o.ID:r,o.originalSuccessScreen=i.getAttribute(t.Form_CONSTS.successScreen),o.successScreen=o._screenSet.chooseNextScreen(o.originalSuccessScreen),o.autoSkip="true"==i.getAttribute(t.Form_CONSTS.autoSkipFlag),o.autoSkipScreen=i.getAttribute(t.Form_CONSTS.autoSkipScreen)||o.successScreen,o.screenSetSkippedScreen=i.getAttribute(t.Form_CONSTS.screenSetSkippedScreen)||o.successScreen,o.registerFormInputs(),o.registerBoundedErrorElements(),o._widgets=s.BaseFormWidget.registerWidgets(o),o.submitHandler=function(e){window.gigya.utils.DOM.disableDefaultEventHandling(e),o.submit()},o.addEventListener("submit",o.submitHandler),o.fieldChangedHandler=function(e){o.evaluateConditionalAttributes()},o}return i.__extends(n,e),Object.defineProperty(n.prototype,"submitButtonClicked",{get:function(){return this._submitButtonClicked},enumerable:!0,configurable:!0}),n.addFormToLibrary=function(e){n.FormsLibrary[e.CONSTS.gigyaClass]=e},n.registerForms=function(e){var t=new Array;return r.ForEachProp(n.FormsLibrary,function(n,i){var o=e.templateElement.querySelectorAll("form."+i);r.ForEach(o,function(r){r.setAttribute("onsubmit","return false;"),t.push(new n(e,r,i))})}),t},n.prototype.registerFormInputs=function(){this._inputs=a.FormInput.registerFormInputs(this.templateElement.elements,this),this._passwordInputs.length>0&&(this._validatedPassword=this._passwordInputs[0])},n.prototype.addDataField=function(e){this.dataToServer.push(e)},n.prototype.addDynamicWidgets=function(e){var t=this,n=s.BaseFormWidget.registerDynamicWidgets(this,e);return r.ForEach(n,function(e){return e.linkInstanceElement(t.instanceElement)}),this._widgets=this._widgets.concat(n),n},n.prototype.removeDynamicWidgets=function(e){this._widgets&&this._widgets.length&&(this._widgets=this._widgets.filter(function(t){return e.indexOf(t)<0}),e.forEach(function(e){e.unlinkInstanceElement(),e.unlinkTemplate()}))},n.prototype.isFormBoundedElement=function(e){if(e.boundedTo===this.bindID)return!0;for(var t=e.instanceElement||e.templateElement,n=this.instanceElement||this.templateElement;t&&t!==n&&t!==document.documentElement;)t=t.parentElement;return t===n},n.prototype.linkAndPopulateElements=function(e){var t=this;r.ForEach(e,function(e){return e.linkInstanceElement(t.instanceElement)}),this.prePopulate()},n.prototype.ignoredFields=function(){return{"g-recaptcha-response":!0,"fc-token":!0}},n.prototype.registerBoundedErrorElements=function(){var e=this,t=new Array;this._errorDisplayElements={},r.ForEachProp(this._screen._errorDisplayElements,function(n){r.ForEach(n,function(n){e.isFormBoundedElement(n)&&t.push(n)})}),r.ForEach(t,function(t){t._form=e;var n=t.boundedTo===e.bindID?e.bindID:e.getNormalizedFieldName(t.boundedTo),i=e._errorDisplayElements[n];i||(i=e._errorDisplayElements[n]=[]),i.push(t)})},n.prototype.unlinkTemplate=function(){this.removeEventListener("submit",this.submitHandler);var t=function(e){return e.unlinkTemplate()};r.ForEach(this._widgets,t),r.ForEach(this._inputs,t),e.prototype.unlinkTemplate.call(this)},n.prototype.linkInstanceElement=function(t){e.prototype.linkInstanceElement.call(this,t),this.instanceElement&&(this.linkAndPopulateElements(this._inputs),this.linkAndPopulateElements(this._widgets),this.addEventListener("fieldChanged",this.fieldChangedHandler))},n.prototype.getLoginProviders=function(){return c.LoginModes.standard.getLoginProviders(this._screenSet.data.apiData,this._screenSet.params,this._screenSet.data.regToken)},n.prototype.unlinkInstanceElement=function(){if(this.removeEventListener("fieldChanged",this.fieldChangedHandler),this.clearDynamicFields(this._dynamicInputs),this._dynamicInputs=[],this.instanceElement){var t=function(e){return e.unlinkInstanceElement()};r.ForEach(this._widgets,t),r.ForEach(this._inputs,t)}e.prototype.unlinkInstanceElement.call(this)},n.prototype.prePopulateDataFrom=function(){return[]},n.prototype.prePopulateData=function(){var e=this._screenSet.getApiData(),t=[{}];return r.ForEach(this.prePopulateDataFrom(),function(n){t.push(window.gigya.utils.object.getPropertyBySerializedName(e,n,!1))}),window.gigya.utils.object.merge(t)},n.prototype.getErrorKey=function(e){switch(e.errorCode){case 403120:return"account_temporarily_locked_out";case 403041:return"account_is_disabled";case 401020:case 401021:return"login_captcha_error";case 403043:return"login_identifier_exists";case 400003:return"unique_identifier_exists";case 403044:return"sorry_we_are_not_able_to_process_your_registration";case 403042:return"invalid_login_or_password";case 403047:return"there_is_no_user_with_that_username_or_email";case 400006:return"there_are_errors_in_your_form_please_try_again";case 401030:return"old_password_cannot_be_the_same_as_new_password";case 500026:return"network_error";case 400009:return e.validationErrors.filter(function(e){return 400021===e.errorCode})[0]?"register_captcha_error":"there_are_errors_in_your_form_please_try_again";case 0:default:return""}},n.prototype.prePopulate=function(){var e=this,n=this.prePopulateData();this.updateDynamicFields();var i=function(i){var r=i.getName(!0);if(r){var o=null,s=i.instanceElement.getAttribute(a.FormInput_CONSTS.arrayRootAttribute);if(s){var l=i.instanceElement.getAttribute(a.FormInput_CONSTS.arrayKeyFieldAttribute),c=i.instanceElement.getAttribute(a.FormInput_CONSTS.arrayKeyValueAttribute);if(l&&c){var u=window.gigya.utils.object.getPropertyBySerializedName(n,s,!1);if(u&&u.constructor===Array&&u.length)for(var d=0,p=u;d<p.length;d++){var h=p[d],g=window.gigya.utils.object.getPropertyBySerializedName(h,l,!1);if(c===String(g)){o=window.gigya.utils.object.getPropertyBySerializedName(h,r.substr(s.length+1),!1);break}}}else e.warn("Field not populated because data-array-root provided without data-array-key-field and data-array-key-value",r)}else o=window.gigya.utils.object.getPropertyBySerializedName(n,r,!1);if(null!==o)i.prePopulate(o);else if("checkbox"===i.type){var m=i.instanceElement,f=i.instanceElement.getAttribute(t.Form_CONSTS.defaultCheckedAttribute);f&&(m.checked=Boolean(i.evaluateExpression({condition:f}))),i.setValue(m.checked)}}};r.ForEach(this._inputs,i),r.ForEach(this._dynamicInputs,i),this.isPopulated=!0},n.prototype.getExtraProfileFields=function(e){var t=this,n={};return this.dataToServer.map(function(e){return e.normalizedFieldName}).concat(this._widgets.reduce(function(e,t){return e.concat(t.getFieldsNames())},[])).filter(function(e){return r.firstPart(e,".")===t.profileObjectName()}).map(function(e){return r.firstPart(e.replace(t.profileObjectName()+".",""),".")}).reduce(function(i,r){if(n[r])return i;n[r]=!0;var o=t._screenSet.getProfile();return e&&o&&o[r]||i.push(r),i},[])},n.prototype.getNeededData=function(e){var t={};return this._needContainerHistory&&(t.getUserSettings={params:{group:"gigya_container_history-"+this._screenSet.params.containerID,regToken:this._screenSet.data.regToken,disableLocalSettings:!0},cache:!1}),r.Some(this.dataToServer,this.isPasswordPolicyNeededForField)&&(t.getPolicies={params:{sections:"passwordComplexity"},cache:!0}),t},n.prototype.isPasswordPolicyNeededForField=function(e){return e instanceof u.BasePasswordInput&&(e.isPasswordSchemaValidated()||e.isPasswordStrengthWidgetBound())},n.prototype.addDynamicInputs=function(e){var t=this,n=e.querySelectorAll("input,select,fieldset"),i=a.FormInput.registerFormInputs(n,this);return i.forEach(function(e){o.TemplateElement.prepareTemplateInstanceElement(e.templateElement,!1),e.linkInstanceElement(t.instanceElement)}),this._inputs=this._inputs.concat(i),i},n.prototype.removeDynamicInputs=function(e){var t=this;this._inputs=this._inputs.filter(function(t){return e.indexOf(t)<0}),e.forEach(function(e){var n=window.gigya.utils.array.indexOf(t.dataToServer,e);-1!==n&&t.dataToServer.splice(n,1),e.unlinkInstanceElement(),e.unlinkTemplate()})},n.prototype.clearDynamicFields=function(e){var t=this;r.ForEach(e,function(e){e.unlinkInstanceElement(),e.unlinkTemplate();var n=window.gigya.utils.array.indexOf(t.dataToServer,e);-1!==n&&t.dataToServer.splice(n,1)})},n.prototype.isDynamicFieldObsolete=function(e){for(var t=e.templateElement.parentElement;t&&t!==this.instanceElement&&t!==document.documentElement;)t=t.parentElement;return t!==this.instanceElement},n.prototype.isDynamicFieldToAdd=function(e){var t=this,n=this.ignoredFields(),i=e[o.TemplateElement_CONSTS.instanceOfArray];return(!i||!r.Some(i,function(e){return e instanceof a.FormInput&&e._form===t}))&&!n[e.getAttribute("name")]},n.prototype.updateDynamicFields=function(){var e=this,t=new Array,n=new Array;r.ForEach(this._dynamicInputs,function(i){e.isDynamicFieldObsolete(i)?t.push(i):n.push(i)}),this.clearDynamicFields(t);var i=new Array;r.ForEach(this.instanceElement.elements,function(t){e.isDynamicFieldToAdd(t)&&i.push(t)});var s=a.FormInput.registerFormInputs(i,this);r.ForEach(s,function(t){o.TemplateElement.prepareTemplateInstanceElement(t.templateElement,!1),t.linkInstanceElement(e.instanceElement),t.dynamicField=!0,n.push(t)}),this._dynamicInputs=n},n.prototype.requiredFields=function(){return this.specialFields()},n.prototype.onInputChange=function(e,t){var n=this;if(t)return window.gigya.utils.DOM.dispatch(this.instanceElement,"fieldChanged"),this.afterInputChange({field:e,errorCode:0,setByScript:t});var i=e.getValue();e.validate(function(t){var r={eventName:"fieldChanged",screen:n._screen.ID,form:n.bindID,field:e.fieldName,isValid:!t.errorCode,errMsg:t.errorCode,value:i};n._screen.dispatchEvent("fieldChanged",r),window.gigya.utils.DOM.dispatch(n.instanceElement,"fieldChanged"),n.afterInputChange(t)})},n.prototype.afterInputChange=function(e){"newPassword"!==e.field.fieldName&&"password"!==e.field.fieldName||r.ForEach(this._passwordRetypes,function(t){t.setValue("",e.setByScript)}),this.showFieldError(e.field,e.errorCode,!0)},n.prototype.isPasswordSchemaValidated=function(){return this.schemaValidated()},n.prototype.schemaValidated=function(){return!1},n.prototype.getFieldSchema=function(e){var t=this.getSchemaOf(e.fieldNamespace||"profile");return t&&t[e.fieldBaseName]},n.prototype.getSchemaOf=function(e){var t=this._screenSet.getApiData(),n=this.getSchemaRoot(e);return t.getSchema&&t.getSchema[n]&&t.getSchema[n].fields},n.prototype.getSchemaRoot=function(e){switch(e){case"data":return"dataSchema";case"profile":return"profileSchema";case"subscriptions":return"subscriptionsSchema";case"preferences":return"preferencesSchema";case"organization":return"organizationSchema";case"requester":return"requesterSchema"}},n.prototype.showFieldError=function(e,t,n,i){var o=i||this._screen.getErrorMessage(t,n,e),s={errorCode:t,errorMessage:o};0!==t&&100001!==t&&(this.formErrors[e.fieldName]=s);var l=!0;if(n){var c=void 0;switch(t){case 0:c=a.ValidityStates.valid;break;case 100001:c=a.ValidityStates.pending,l=!1;break;default:c=a.ValidityStates.error}e.setValidityState(c);var u=this._errorDisplayElements[e.normalizedFieldName]||[];r.ForEach(u,function(n){var i=e.instanceElement.getAttribute(a.FormInput_CONSTS.arrayKeyValueAttribute);i&&i!==n.instanceElement.getAttribute(a.FormInput_CONSTS.arrayKeyValueAttribute)||(s.errorMessage&&n.isErrorCodeAllowed(t)?n.showError(s):n.hideError())})}return l},n.prototype.showCustomFormError=function(e){var n={errorMessage:e,errorCode:400009};this.formErrors.form=n,this.showErrors([n],!0),window.gigya.utils.DOM.addClassToElement(this.instanceElement,t.Form_CONSTS.formErrorClass)},n.prototype.createOnBeforeValidationEvent=function(e){return{data:this._screenSet.getSchemaData(),profile:this._screenSet.getProfile(),subscriptions:this._screenSet.getSubScriptions(),preferences:this._screenSet.getPreferences(),eventName:"beforeValidation",form:this.bindID,formData:e,screen:this._screen.ID}},n.prototype.createOnAfterValidationEvent=function(e){return{data:this._screenSet.getSchemaData(),profile:this._screenSet.getProfile(),subscriptions:this._screenSet.getSubScriptions(),preferences:this._screenSet.getPreferences(),eventName:"afterValidation",form:this.bindID,formData:e,screen:this._screen.ID,formErrors:Object.keys(this.formErrors).length>0?this.formErrors:void 0}},n.prototype.applyCustomValidation=function(){return i.__awaiter(this,void 0,void 0,function(){var e,n,o,a,s,l,c,u,d,p,h=this;return i.__generator(this,function(i){switch(i.label){case 0:e=!0,n=void 0,this._screenSet.dimScreenSet(),o=this.getFlatFormData(!0,!1),a=this.createOnBeforeValidationEvent(o),s=this._screen.dispatchEvent(a.eventName,a),l=setTimeout(function(){console.warn("[Gigya]: custom validation did not resolve after more than "+t.CUSTOM_VALIDATION_TIMEOUT_WARNING+" seconds")},t.CUSTOM_VALIDATION_TIMEOUT_WARNING),i.label=1;case 1:return i.trys.push([1,3,4,5]),u=(c=window.gigya.utils.object).unflatten,[4,gigya.Promise.resolve(s)];case 2:return n=u.apply(c,[i.sent()]),[3,5];case 3:return d=i.sent(),console.warn("[Gigya]: custom validation threw an error",d),n=void 0,[3,5];case 4:return this._screenSet.undimScreenSet(),clearTimeout(l),[7];case 5:return(p=window.gigya.utils.object.merge([window.gigya.utils.object.flatten(n,!0),window.gigya.utils.object.flatten(n)]))&&"object"==typeof p&&r.ForEach(Object.keys(p),function(t){if(p.hasOwnProperty(t)){var n=p[t];if("form"===t)e=!1,h.showCustomFormError(n);else{var i=h.getFieldByData(t,o);i&&(e=!1,h.showFieldError(i,400009,!0,n))}}}),[2,e]}})})},n.prototype.getFieldByData=function(e,t){var n=this;if(void 0===t&&(t={}),!Object.keys(t).length)return this.getField(e);var i=window.gigya.utils.object.unflatten(t),o=window.gigya.utils.object.merge([window.gigya.utils.object.flatten(i,!0),window.gigya.utils.object.flatten(i)]);return Object.keys(o).filter(function(t){return t!==e&&r.hasIndex(t)&&r.removeSerializedKeyEdgeProperty(t)===r.removeSerializedKeyEdgeProperty(e)}).map(function(t){return n.getField(r.removeSerializedKeyLastEnumerator(e),o[t])}).filter(function(e){return Boolean(e)})[0]||this.getField(e)},n.prototype.onAfterValidation=function(){var e=this.getFlatFormData(!0,!1),t=this.createOnAfterValidationEvent(e);this._screen.dispatchEvent(t.eventName,t)},n.prototype.validate=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,a,s,l=this;return i.__generator(this,function(i){switch(i.label){case 0:return this.formErrors={},[4,this.applyCustomValidation()];case 1:return(t=i.sent())?(n=this.getFlatFormData(!0,!0),o=this.dataToServer.length,a=new Array,s=function(n){if(0!==n.errorCode){t=!1;var i={fieldName:n.field.fieldName,errorCode:n.errorCode};a.push(i),i.handled=l.showFieldError(n.field,n.errorCode,!0)}if(--o<0)return l.showErrors(a,!1),l.onAfterValidation(),e(t)},r.ForEach(this.dataToServer,function(e){return e.validate(s,n)}),s({errorCode:0,field:null}),[2]):[2,this.onAfterValidation()]}})})},n.prototype.showErrors=function(e,t){this._screen.showErrors(this,e,t)},n.prototype.isRequiredField=function(e){var t=r.firstPart(e,"."),n="data"==t?"dataSchema":"profileSchema";if("data"!=t&&"profile"!=t||(e=e.substring(t.length+1)),this.requiredFields()[e])return!0;var i=this._screenSet.getApiData();if(i.getSchema&&i.getSchema[n]&&i.getSchema[n].fields){var o=i.getSchema[n].fields[e];if(o&&o.required)return!0}return!1},n.prototype.checkAutoSkip=function(e,t){if(!this.autoSkip||r.Some(this._autoSkipContainers,function(e){return!e.checkAutoSkip()}))return t(!1);this.validate(t)},n.prototype.getNormalizedFieldName=function(e){if(!e)return e;if(this.specialFields()[e]||0===e.indexOf("local."))return e;var t=this.profileObjectName(),n=this.dataObjectName(),i=this.subscriptionObjectName(),r=this.preferencesObjectName(),o=this.organizationObjectName(),a=this.requesterObjectName(),s=e.split("."),l=s.length>1?s.shift():t;return l===t&&s.length>1&&s[0]===n&&(l=s.shift()),-1==[n,t,i,r,o,a].indexOf(l)&&(l=t),l&&s.unshift(l),s.join(".")},n.prototype.getField=function(e,t){var n;return e=this.getNormalizedFieldName(e),r.Some(this.dataToServer,function(i){return!(i.normalizedFieldName!==e||t&&t!==i.instanceElement.getAttribute(a.FormInput_CONSTS.arrayKeyValueAttribute))&&(n=i,!0)}),n},n.prototype.isSpecialField=function(e){return!!this.specialFields()[e.fieldName]},n.prototype.getFormData=function(e,t,n){var i=this;void 0===n&&(n=!1);var o={},s=this._screenSet.getApiData().getAccountInfo||{},l={};return r.ForEach(this.dataToServer,function(r){var c;if((!r.disabled()||i.isSpecialField(r))&&(!e||!r.isInHiddenContainer())){var u=r.getName(t,!0),d=window.gigya.utils.object.getPropertyBySerializedName(s,u,!1),p=r.getArrayRoot(!0),h=r.getValue(r.instanceElement,d||o[u]);if(h&&(h=window.gigya.utils.object.parseToObject(h.toString())||h),p){var g=r.instanceElement.getAttribute(a.FormInput_CONSTS.arrayKeyFieldAttribute),m=r.instanceElement.getAttribute(a.FormInput_CONSTS.arrayKeyValueAttribute);if(!g||!m)return void i.warn("Field ignored because data-array-root provided without data-array-key-field and data-array-key-value",u);if(!o[p]||o[p].constructor!==Array){var f=void 0;s&&(f=window.gigya.utils.object.clone(window.gigya.utils.object.getPropertyBySerializedName(s,p,!1),!1)),f&&f.constructor===Array||(f=[]),o[p]=f}for(var y=o[p],S=void 0,_=0;_<y.length;_++){var v=y[_];if(v[g]&&String(v[g])===m){l[p]&&-1!==window.gigya.utils.array.indexOf(l[p],m)?S=v:y.splice(_,1);break}}if(h)S||((c={})[g]=m,S=c,y.push(S),l[p]||(l[p]=[]),l[p].push(m)),S[u.substr(p.length+1)]=h}else null!=h&&(n&&""===String(h)&&h.constructor!==Array&&(h=null),o[u]=h)}}),o=this.postProcessFormData(o),o=window.gigya.utils.object.unflatten(o),r.ForEach(this.filters,function(e){o=e.filterOutWidgetsToSend(o)}),o},n.prototype.postProcessFormData=function(e){var t=window.gigya.utils.object.clone(e);return t=d.postProcessForm(t,this.getSchemaOf(d.namespace))},n.prototype.getFlatFormData=function(e,t,n){return void 0===n&&(n=!1),window.gigya.utils.object.flatten(this.getFormData(e,t,n))},n.prototype.specialFields=function(){return{}},n.prototype.subscriptionObjectName=function(){return"subscriptions"},n.prototype.dataObjectName=function(){return"data"},n.prototype.profileObjectName=function(){return"profile"},n.prototype.preferencesObjectName=function(){return"preferences"},n.prototype.organizationObjectName=function(){return"organization"},n.prototype.requesterObjectName=function(){return"requester"},n.prototype.queryStringToSubmitParamMap=function(){return{}},n.prototype.defaultSubmitParams=function(){var e=this.queryStringToSubmitParamMap(),t={};return Object.keys(e).forEach(function(n){var i=e[n],r=window.gigya.utils.URL.getParamValueFromURL(n,location.search,void 0);r&&(t[i]=r)}),t},n.prototype.submitApi=function(){throw new Error("Not implemented")},n.prototype._getSubmitApiParams=function(e){return window.gigya.utils.object.removeUndefined(e)},n.prototype.performSubmit=function(e){var t=this,n=this.submitApi(),i=this._screenSet.data.extraEventData;this._rememberMe&&(i.rememberMe=Boolean(this._rememberMe.getValue()));var r=i.rememberMe;this._screenSet.data.regToken&&(this._screenSet.params.regToken=this._screenSet.data.regToken);var o=this._getSubmitApiParams(window.gigya.utils.object.clone(this._screenSet.params,!0));this._screen.dimScreen(),n(o,e,{dontHandleScreenSet:!0,callback:function(e){return t.onAfterSubmit(e)},remember:r,sessionExpiration:r&&this._screenSet.params.rememberSessionExpiration?this._screenSet.params.rememberSessionExpiration:this._screen._screenSet.params.sessionExpiration},this.defaultSubmitParams())},n.prototype.submit=function(){var e=this;this._submitButtonClicked=!0,r.Some(this._serverWidgets,function(t){return t.serverState===l.ServerStates.InProgress&&(t.runOnServerDone(e.submitHandler),!0)})||(this.updateDynamicFields(),this.validate(function(t){e.onAfterValidation(),t&&e.getCaptchaToken().then(function(t){var n=e.getFormData(!0,!0,!0),i=e.getFlatFormData(!0,!1);void 0!==i.password&&delete i.password;var r={eventName:"beforeSubmit",screen:e._screen.ID,form:e.bindID,profile:e._screenSet.getProfile(),data:e._screenSet.getSchemaData(),preferences:e._screenSet.getPreferences(),subscriptions:e._screenSet.getSubScriptions(),formData:i};if(!1!==e._screen.dispatchEvent("beforeSubmit",r)){var o={eventName:"submit",screen:e._screen.ID,form:e.bindID,accountInfo:{profile:e._screenSet.getProfile(),data:e._screenSet.getSchemaData(),preferences:e._screenSet.getPreferences(),subscriptions:e._screenSet.getSubScriptions()},formModel:n},a=e._screen.dispatchEvent("submit",o);"string"==typeof t&&(n.captchaToken=t),a&&"function"==typeof a.then?a.then(function(t){return e.performSubmit(window.gigya.utils.object.merge([n,t]))}):e.performSubmit(window.gigya.utils.object.merge([n,a]))}}).catch(function(t){if(window.gigya.logger.error("exception when submitting a form",{e:t,form:e.gigyaClass}),t&&"captchaNeeded"===t.message){var n={errorMessage:e._screenSet.getText("login_captcha_error"),errorCode:400009,errorFlags:t.message};e.showErrors([n],!0)}})}))},n.prototype.getCaptchaToken=function(){var e=this._screen._captchas.filter(function(e){return Boolean(e)&&!e.isHidden()});return e.length?e[0].getToken():gigya.Promise.resolve(void 0)},n.prototype.onAfterSubmit=function(e){this._screen.undimScreen(),0==e.errorCode?window.gigya.utils.DOM.removeClassFromElement(this.instanceElement,t.Form_CONSTS.formErrorClass):window.gigya.utils.DOM.addClassToElement(this.instanceElement,t.Form_CONSTS.formErrorClass),this._screenSet.onScreenResponse(e,this)},n.prototype.evaluateConditionalAttributes=function(){var n=this;this.hasConditionalAttributes()&&(window.gigya.logger.group("form conditional attributes evaluation").endWhen(function(){e.prototype.evaluateConditionalAttributes.call(n),r.ForEach(n._dynamicInputs,function(e){e.evaluateConditionalAttributes()}),r.ForEach(n._widgets,function(e){e.evaluateConditionalAttributes()}),r.ForEach(n._inputs,function(e){e.evaluateConditionalAttributes()}),r.ForEach(n._passwordInputs,function(e){e.evaluateConditionalAttributes()}),r.ForEach(n._passwordRetypes,function(e){e.evaluateConditionalAttributes()}),r.ForEach(n._secretQuestions,function(e){e.evaluateConditionalAttributes()}),r.ForEach(n._autoSkipContainers,function(e){e.evaluateConditionalAttributes()}),r.ForEach(n._serverWidgets,function(e){e.evaluateConditionalAttributes()}),n._rememberMe&&n._rememberMe.evaluateConditionalAttributes()}),this.originalSuccessScreen=this.instanceElement.getAttribute(t.Form_CONSTS.successScreen),this.successScreen=this._screenSet.chooseNextScreen(this.originalSuccessScreen),this.autoSkip="true"==this.instanceElement.getAttribute(t.Form_CONSTS.autoSkipFlag),this.autoSkipScreen=this.instanceElement.getAttribute(t.Form_CONSTS.autoSkipScreen)||this.successScreen,this.screenSetSkippedScreen=this.instanceElement.getAttribute(t.Form_CONSTS.screenSetSkippedScreen)||this.successScreen)},n.prototype.hasConditionalAttributes=function(){if(e.prototype.hasConditionalAttributes.call(this))return!0;var t=[].concat(this._widgets,this._inputs,this._dynamicInputs,this._passwordInputs,this._passwordRetypes,this._secretQuestions,this._autoSkipContainers,this._serverWidgets);return window.gigya.utils.array.some(t,function(e){return e.hasConditionalAttributes()})},n.prototype.resetLastConditionalValues=function(){e.prototype.resetLastConditionalValues.call(this),r.ForEach(this._dynamicInputs,function(e){e.resetLastConditionalValues()}),r.ForEach(this._widgets,function(e){e.resetLastConditionalValues()}),r.ForEach(this._inputs,function(e){e.resetLastConditionalValues()}),r.ForEach(this._passwordInputs,function(e){e.resetLastConditionalValues()}),r.ForEach(this._passwordRetypes,function(e){e.resetLastConditionalValues()}),r.ForEach(this._secretQuestions,function(e){e.resetLastConditionalValues()}),r.ForEach(this._autoSkipContainers,function(e){e.resetLastConditionalValues()}),r.ForEach(this._serverWidgets,function(e){e.resetLastConditionalValues()})},n.FormsLibrary={},n}(o.TemplateElement);t.BaseForm=p},,,,,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),o=n(2),a=n(26),s=n(84),l=n(139),c=n(87);!function(e){e[e._undefined=0]="_undefined",e[e.valid=1]="valid",e[e.error=2]="error",e[e.pending=3]="pending"}(i=t.ValidityStates||(t.ValidityStates={})),o.DeepFreeze(i),t.fieldsNameData={loginID:{autoFillName:"username",paramName:"loginID"},passwordRetype:{autoFillName:"",paramName:""}},o.DeepFreeze(t.fieldsNameData);var u;o.DeepFreeze({loginID:"username",secretQuestion:"secret question",secretAnswer:"secret answer"}),function(e){e[e.clientModify=0]="clientModify",e[e.clientCreate=1]="clientCreate"}(u=t.WriteAccessModes||(t.WriteAccessModes={})),t.FormInput_CONSTS={fieldName:"data-gigya-name",displayName:"data-display-name",captcha:"gigya-captcha",allowEmpty:"data-allow-empty",required:"data-required",originalValue:"data-original-value",serverValidation:"data-invalid-error-code",showValidCheckmark:"show-valid-checkmark",showCheckmarkClass:"gigya-show-checkmark",errorClass:"gigya-error",validClass:"gigya-valid",pendingClass:"gigya-pending",emptyClass:"gigya-empty",placeholderAttribute:"data-gigya-placeholder",arrayRootAttribute:"data-array-root",arrayKeyFieldAttribute:"data-array-key-field",arrayKeyValueAttribute:"data-array-key-value"},o.DeepFreeze(t.FormInput_CONSTS);var d,p={};!function(e){e[e._start=0]="_start",e[e.Important=1]="Important",e[e.Normal=2]="Normal",e[e.Fallback=3]="Fallback",e[e._end=4]="_end"}(d=t.FormInputPriorities||(t.FormInputPriorities={}));var h=function(e){function n(t,n,r){void 0===n&&(n=!0),void 0===r&&(r=1e3);var o=e.call(this,t.element,t.form)||this;return o.isDataField=n,o.dynamicField=!1,o.isCaptcha=!1,o._validityState=i._undefined,o._showValidityMarker={},o.isCurrnetValuePlaceholderText=!0,o.isCtrlKeyUp=!1,o.KEY_CODE_DELETE=46,o.KEY_CODE_BACKSPACE=8,o.KEYCODE_LETTER_X=88,o.previousValue=null,o.intervalID=0,o.validityStateListeners=new Array,o._form=t.form,o.type=t.type,o._screen=o._form._screen,o.update(t.element,t.fieldName,n),o.showValidCheckmark(o.templateElement)&&(o._showValidityMarker[i.valid]=o._showValidityMarker[i.pending]=!0),o.onFieldChangeDebounced=window.gigya.utils.functions.debounce(function(){return o.onFieldChange()},o._screenSet.params.debounceDelay||r),o}return r.__extends(n,e),n.addInputToLibrary=function(e,t){void 0===t&&(t=d.Normal);var n=p[t]||[];n.push(e),p[t]=n},n.inputLibraryByPriority=function(){for(var e=new Array,t=d._start;t<=d._end;++t){var n=p[t];n&&(e=e.concat(n))}return e},n.registerFormInputs=function(e,i){var r=new Array,a=n.inputLibraryByPriority(),s=i.ignoredFields();return o.ForEach(e,function(e){var n,l=e.getAttribute(t.FormInput_CONSTS.fieldName)||e.getAttribute("name");if(!s[l]&&!window.gigya.utils.DOM.isBelongToGigyaFieldset(e)){var c={form:i,fieldName:l,element:e,type:e.getAttribute("type"),params:i._screenSet.params};o.Some(a,function(e){var t=e.FORM_TYPE_CRITERIA(c);return t&&(n=e),t}),n&&r.push(new n(c))}}),r},n.FORM_TYPE_CRITERIA=function(e){return!0},n.prototype.onKeyUp=function(e){9!==e.keyCode&&13!==e.keyCode&&16!==e.keyCode&&17!==e.keyCode&&91!==e.keyCode&&92!==e.keyCode&&20!==e.keyCode&&27!==e.keyCode&&this.onFieldChangeDebounced()},n.prototype.onFieldChange=function(e){if(void 0===e&&(e=!1),this.instanceElement&&this._screenSet.container){var t=this.getValue();this.previousValue===t&&"radio"!==this.type||(this.previousValue=t,this.updateCssClasses(),this._form.onInputChange(this,e))}},n.prototype.updateCssClasses=function(){this.isEmpty()?window.gigya.utils.DOM.addClassToElement(this.instanceElement,t.FormInput_CONSTS.emptyClass):window.gigya.utils.DOM.removeClassFromElement(this.instanceElement,t.FormInput_CONSTS.emptyClass)},n.prototype.update=function(e,n,i){var r=this;if(void 0===e&&(e=this.instanceElement),void 0===n&&(n=this.instanceElement.getAttribute("name")),this.fieldName=n,this.normalizedFieldName=this._form.getNormalizedFieldName(this.fieldName),this.normalizedFieldName){var o=this.normalizedFieldName.split(".");o.length>1&&(this.fieldNamespace=o.shift()),this.fieldNamespace==s.namespace&&o[o.length-1]==s.consentFieldName&&o.pop(),this.fieldBaseName=o.join(".").replace(l.ArrayManager_CONST.indexMatcher,""),this.fieldName!==e.getAttribute(t.FormInput_CONSTS.fieldName)&&e.setAttribute(t.FormInput_CONSTS.fieldName,this.fieldName)}var a=t.fieldsNameData[this.fieldBaseName];this.paramName=a?a.paramName:this.normalizedFieldName,a&&a.autoFillName&&e.setAttribute("name",a.autoFillName),i&&this.normalizedFieldName&&(this._form.addDataField(this),e.setAttribute(t.FormInput_CONSTS.originalValue,String(this.getValue(e))),this.keyUpHandler=function(e){return r.onKeyUp(e)},this.addEventListener("keyup",this.keyUpHandler),this.changeHandler=function(){return r.onFieldChange()},this.addEventListener("change",this.changeHandler)),this.updateDisplayName(e)},n.prototype.updateDisplayName=function(e){void 0===e&&(e=this.templateElement),this.displayName=e.getAttribute(t.FormInput_CONSTS.displayName)||this.fieldBaseName},n.prototype.getArrayRoot=function(e){void 0===e&&(e=!1);var n=this.instanceElement?this.instanceElement.getAttribute(t.FormInput_CONSTS.arrayRootAttribute):"";return n&&e&&(n=n.replace(l.ArrayManager_CONST.indexMatcher,".$1")),n},n.prototype.getName=function(e,t){void 0===t&&(t=!1);var n=e?this.normalizedFieldName:this.fieldName;return t?n.replace(l.ArrayManager_CONST.indexMatcher,".$1"):n},n.prototype.isEmpty=function(e){return void 0===e&&(e=this.getValue()),this._isValueEmpty(e)},n.prototype._isValueEmpty=function(e){return!e||!1===e},n.prototype.allowEmpty=function(){return Boolean(this.instanceElement&&this.instanceElement.getAttribute(t.FormInput_CONSTS.allowEmpty))},n.prototype.getTruncatedValue=function(e){return window.gigya.utils.stringUtils.trim(String(e))},n.prototype.validate=function(e,t){if(void 0===t&&(t=this._form.getFlatFormData(!1,!0)),this.isInHiddenContainer())return e({errorCode:0,field:this});this.validateValue(t,this.getValidateValue(t),e)},n.prototype.getValidateValue=function(e){return this.getValue()},n.prototype.clearServerError=function(){this.instanceElement.removeAttribute(t.FormInput_CONSTS.serverValidation)},n.prototype.getServerError=function(){var e=this.instanceElement.getAttribute(t.FormInput_CONSTS.serverValidation);return e?parseInt(e):0},n.prototype.setServerError=function(e){var n=0==e?i.valid:i.error;this.instanceElement.setAttribute(t.FormInput_CONSTS.serverValidation,e+""),this.setValidityState(n,!0)},n.prototype.validateValue=function(e,n,i){var r=null==n||""===this.getTruncatedValue(n);if(this.required()&&r)return i({errorCode:400027,field:this});if(this._schema){var a=0;if(o.Some(this.schemaChecks,function(e){return 0!=(a=e(n))}),0!==a)return i({errorCode:a,field:this})}if(this.instanceElement)if(this.instanceElement.getAttribute(t.FormInput_CONSTS.serverValidation)){var s=this.getServerError();if(0!=s)return i({errorCode:s,field:this})}else if(this.serverValidated())return this.startServerValidation(n,i);return i({errorCode:0,field:this})},n.prototype.serverValidated=function(){return!1},n.prototype.startServerValidation=function(e,t){c.notImplementerAbstract()},n.prototype.required=function(){return!!this._schemaRequired||(!(this.allowEmpty()||!this._form.requiredFields()[this.fieldName])||!!this.instanceElement.getAttribute(t.FormInput_CONSTS.required))},n.prototype.showValidCheckmark=function(e){return void 0===e&&(e=this.instanceElement),Boolean(e.getAttribute(t.FormInput_CONSTS.showValidCheckmark))&&!window.gigya.utils.validation.isExplicitFalse(e.getAttribute(t.FormInput_CONSTS.showValidCheckmark))},n.prototype.addValidityStateListener=function(e){e&&this.validityStateListeners.push(e)},n.prototype.removeValidityStateListener=function(e){e&&this.validityStateListeners.splice(window.gigya.utils.array.indexOf(this.validityStateListeners,e),1)},n.prototype.triggerValidityStateChange=function(e,t){var n=this;o.ForEach(this.validityStateListeners,function(i){return i(e,t,n)})},n.prototype.getValidityState=function(){return this._validityState},n.prototype.setValidityState=function(e,t){void 0===t&&(t=!1),e!==this._validityState&&(this._validityState=e,this._showValidityOnInput(),this.triggerValidityStateChange(this._validityState,t))},n.prototype._showValidityOnInput=function(e,n,i){void 0===e&&(e=this.instanceElement),void 0===n&&(n=this._validityState),void 0===i&&(i=!0),this.setValitidyClass(e,n),this._showValidityMarker[n]&&i?window.gigya.utils.DOM.addClassToElement(e,t.FormInput_CONSTS.showCheckmarkClass):window.gigya.utils.DOM.removeClassFromElement(e,t.FormInput_CONSTS.showCheckmarkClass)},n.prototype.setValitidyClass=function(e,n,r,o,a){if(void 0===r&&(r=t.FormInput_CONSTS.validClass),void 0===o&&(o=t.FormInput_CONSTS.errorClass),void 0===a&&(a=t.FormInput_CONSTS.pendingClass),e){var s;switch(n){case i.valid:s=r;break;case i.error:s=o;break;case i.pending:s=a}this.setElementValidationClass(e,s,r,o,a),this.placeHolderElement&&this.setElementValidationClass(this.placeHolderElement,s,r,o,a)}},n.prototype.setElementValidationClass=function(e,n,i,r,o){void 0===i&&(i=t.FormInput_CONSTS.validClass),void 0===r&&(r=t.FormInput_CONSTS.errorClass),void 0===o&&(o=t.FormInput_CONSTS.pendingClass),window.gigya.utils.DOM.removeClassFromElement(e,i),window.gigya.utils.DOM.removeClassFromElement(e,r),window.gigya.utils.DOM.removeClassFromElement(e,o),n&&window.gigya.utils.DOM.addClassToElement(e,n),n===r?e.setAttribute("aria-invalid","true"):e.setAttribute("aria-invalid","false")},n.prototype.unlinkTemplate=function(){this.changeHandler&&this.removeEventListener("change",this.changeHandler),this.keyUpHandler&&this.removeEventListener("keydown",this.keyUpHandler),e.prototype.unlinkTemplate.call(this)},n.prototype.linkInstanceElement=function(t){if(e.prototype.linkInstanceElement.call(this,t),this._schemaWriteAccessMode=u.clientModify,this._schemaRequired=!1,this.instanceElement){if(this._form.schemaValidated()&&(this._schema=this._form.getFieldSchema(this),this._schema)){if(this.schemaChecks=new Array,this._schema.type){var n=m[this._schema.type];n&&this.schemaChecks.push(n)}this._schema.format&&this._schema.format.match(f)&&this.schemaChecks.push(function(e){var t=e.match(f);if(t){var n=t[1],i=t[2];if(n&&i&&"regex"===n)try{var r=new RegExp(i);return r.test(""),function(e){return e&&!r.test(e)?400009:0}}catch(e){throw new Error("Unsupported regEx pattern: "+e)}}throw new Error("Unsupported format: "+e)}(this._schema.format)),this._schemaRequired=this._schema.required||o.Some(this.schemaChecks,function(e){return 0!=e("")}),this._schemaWriteAccessMode=u[this._schema.writeAccess]||u.clientModify}this.setPlaceholderValue(),this.setAriaRequired(),this.previousValue=this.getValue()}},n.prototype.createPlaceholderElement=function(e,t){"input"===e&&"checkbox"!==t&&"radio"!==t?this.placeHolderElement=window.gigya.utils.DOM.createElement("input",""):"textarea"===e&&(this.placeHolderElement=window.gigya.utils.DOM.createElement("textarea","")),window.gigya.localInfo.isIE8?this.placeHolderElement.style.width=this.instanceElement.currentStyle.width:this.placeHolderElement.style.width=window.getComputedStyle(this.instanceElement).width,"input"!==e&&"textarea"!==e||(this.placeHolderElement.screenSetInstanceOf=[this],this.placeHolderElement.setAttribute("value",this.placeholderAttributeValue),this.placeHolderElement.setAttribute("style",window.gigya._.plugins.utils.DOM.getAttribute(this.instanceElement,"style")),this.placeHolderElement.setAttribute("class",window.gigya._.plugins.utils.DOM.getAttribute(this.instanceElement,"class")+" gigya-placeholder"),this.instanceElement.parentNode.insertBefore(this.placeHolderElement,this.instanceElement),window.gigya.pluginUtils.DOM.hideElement(this.instanceElement)),("textarea"===e||"input"===e&&"checkbox"!==t&&"radio"!==t)&&(this.placeHolderElement.attachEvent("onkeydown",this.onPlaceholderKeyDown),this.addEventListener("keydown",this.onKeyDownForPlaceholder),this.addEventListener("blur",this.onBlurForPlaceholder),this.placeHolderElement.attachEvent("oncontextmenu",this.onContextMenuOpened),this.placeHolderElement.attachEvent("onfocus",this.onPlaceholderFocused),this.addEventListener("keyup",this.onKeyUpForPlaceholder),this.togglePlaceholderStateView(!0)),this.placeHolderElement.setAttribute("aria-hidden","true")},n.prototype.unlinkInstanceElement=function(){this.instanceElement&&(this._schemaRequired=!1,this.schemaChecks=this._schema=null,this.setValue(""),this.setValidityState(i._undefined)),e.prototype.unlinkInstanceElement.call(this)},n.prototype.getValue=function(e,t){return void 0===e&&(e=this.instanceElement),void 0===e.value?"":"password"===this.type?e.value:window.gigya.utils.stringUtils.trim(e.value)},n.prototype.prePopulate=function(e){this.previousValue=e,"hidden"!==this.type&&this.setValue(e),this._schemaWriteAccessMode!==u.clientCreate||this.isEmpty(e)||this.instanceElement.setAttribute("disabled","disabled")},n.prototype.disabled=function(){return Boolean(this.instanceElement&&this.instanceElement.getAttribute("disabled"))},n.prototype.setValue=function(e,t){void 0===t&&(t=!0);var n=this.instanceElement;n.value!==e&&(n.value=String(e)),this.onFieldChange(t)},n.prototype.isHidden=function(){return o.isHidden(this.instanceElement)},n.prototype.isInHiddenContainer=function(){return o.isFieldInHiddenContainer(this.instanceElement)},n.prototype.evaluateConditionalAttributes=function(){e.prototype.evaluateConditionalAttributes.call(this),this.updateDisplayName(this.instanceElement||this.templateElement),this.showValidCheckmark(this.templateElement)&&(this._showValidityMarker[i.valid]=this._showValidityMarker[i.pending]=!0,this._showValidityOnInput())},n.prototype.executeConditionalResult=function(n,r,o){var a=r.lastAttributeValue;return(n=e.prototype.executeConditionalResult.call(this,n,r,o))===a?a:(r.attributeName===t.FormInput_CONSTS.required?(this.getValidityState()===i.error&&this.onFieldChange(),this.setPlaceholderValue(),this.setAriaRequired()):r.attributeName===t.FormInput_CONSTS.placeholderAttribute&&this.setPlaceholderValue(),n)},n.prototype.setAriaRequired=function(){"submit"!==this.type&&"button"!==this.type&&this.instanceElement.setAttribute("aria-required",this.required()?"true":"false")},n.prototype.setPlaceholderValue=function(){var e=this.instanceElement.getAttribute(t.FormInput_CONSTS.placeholderAttribute);if(e&&(this.placeholderAttributeValue=e?e+(this.required()?" *":""):""),this.placeholderAttributeValue){var n=this.instanceElement.tagName.toLowerCase(),i=this.instanceElement.getAttribute("type");window.gigya.localInfo.isIE8||window.gigya.localInfo.isIE9?this.placeHolderElement?window.gigya._.plugins.utils.DOM.setAttribute(this.placeHolderElement,"value",this.placeholderAttributeValue):this.createPlaceholderElement(n,i):("input"===n&&"checkbox"!==i&&"radio"!==i||"textarea"===n)&&this.instanceElement.setAttribute("placeholder",this.placeholderAttributeValue)}},n.prototype.onKeyUpForPlaceholder=function(e){var t=e.srcElement.screenSetInstanceOf[0];t.isCtrlKeyUp&&(e.keyCode===this.KEYCODE_LETTER_X&&t.togglePlaceholderStateView(!0))},n.prototype.onBlurForPlaceholder=function(e){var t=e.srcElement.value,n=e.srcElement.screenSetInstanceOf[0];t||n.togglePlaceholderStateView(!0)},n.prototype.onContextMenuOpened=function(e){event.returnValue=!1},n.prototype.onPlaceholderFocused=function(e){var t=e.srcElement.screenSetInstanceOf[0];t.togglePlaceholderStateView(!1,e),event.cancelBubble=!0,-1===t._screenSet._placeholderIntervalID&&(t.togglePlaceholderStateView(!1,e),t._screenSet._placeholderIntervalID=setInterval(function(){-1===t._screenSet._placeholderIntervalID?t.togglePlaceholderStateView(!1,e):clearInterval(t._screenSet._placeholderIntervalID)},100))},n.prototype.onPlaceholderKeyDown=function(e){var t=e.keyCode,n=o.isKeyCodeDisplayable(t),i=e.srcElement.screenSetInstanceOf[0];n?i.togglePlaceholderStateView(!1):t!==i.KEY_CODE_BACKSPACE&&t!==i.KEY_CODE_DELETE||(event.returnValue=!1)},n.prototype.onKeyDownForPlaceholder=function(e){var t=e.keyCode,n=o.isKeyCodeDisplayable(t),i=e.srcElement.screenSetInstanceOf[0],r=i.instanceElement.getAttribute("value");!n&&i.isCurrnetValuePlaceholderText&&t==i.KEY_CODE_BACKSPACE?event.returnValue=!1:r&&1==r.length&&t==i.KEY_CODE_BACKSPACE?(e.srcElement.setAttribute("value",""),event.returnValue=!1):!i.isTextSelected||t!=i.KEY_CODE_DELETE&&t!=i.KEY_CODE_BACKSPACE?e.ctrlKey?i.isCtrlKeyUp=!0:n&&i.isCurrnetValuePlaceholderText?i.togglePlaceholderStateView(!1):i.isCurrnetValuePlaceholderText&&t==i.KEY_CODE_DELETE&&(event.returnValue=!1):(i.isTextSelected=!1,i.togglePlaceholderStateView(!0,event))},n.prototype.togglePlaceholderStateView=function(e,t){var n=this;void 0===t&&(t=null),e?(t&&(t.returnValue=!1),window.gigya.pluginUtils.DOM.showElement(this.placeHolderElement),window.gigya.pluginUtils.DOM.hideElement(this.instanceElement),window.gigya._.plugins.utils.DOM.setAttribute(this.instanceElement,"value",""),this.placeHolderElement||setTimeout(function(){n.placeHolderElement.focus()},1e3)):(window.gigya.pluginUtils.DOM.hideElement(this.placeHolderElement),window.gigya.pluginUtils.DOM.showElement(this.instanceElement),window.gigya._.plugins.utils.DOM.setAttribute(this.placeHolderElement,"value",this.placeholderAttributeValue),this.instanceElement.focus()),this.isCurrnetValuePlaceholderText=e,this.isCtrlKeyUp=!1,this.isTextSelected=!1},n.prototype.getLoggerName=function(){return this.fieldName||e.prototype.getLoggerName.call(this)},n}(a.TemplateElement);function g(e){return e&&isNaN(parseInt(e))?400009:0}t.FormInput=h;var m={integer:g,long:g,float:function(e){return e&&isNaN(parseFloat(e))?400009:0},boolean:function(e){return null==e?400009:0},date:function(e){return e&&!window.gigya.global.date.getISODate(e)?400009:0}};o.DeepFreeze(m);var f=/(.*?)\([\'\"](.*?)[\'\"]\)$/;h.addInputToLibrary(h,d.Fallback)},,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(85),o=function(e){function t(t,n,i){var r=e.call(this,n,t,t._screen,i)||this;return r._form=t,r}return i.__extends(t,e),t.addWidgetToLibrary=function(e){t.FormWidgetsLibrary[e.CONSTS.selector]=e},t.registerWidgets=function(e){return r.BaseWidget.registerTypedWidgets(e.templateElement,t.FormWidgetsLibrary,function(t,n){return new t(e,n)})},t.registerDynamicWidgets=function(e,n){return r.BaseWidget.registerTypedWidgets(n,t.FormWidgetsLibrary,function(t,n){return new t(e,n)})},t.prototype.getFieldsNames=function(){return[]},t.prototype.update=function(){},t.FormWidgetsLibrary={},t}(r.BaseWidget);t.BaseFormWidget=o},,,,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(85),o=n(2),a=function(e){function t(t,n,i){var r=e.call(this,n,t,t,i)||this;return r._childWidgets=[],r}return i.__extends(t,e),t.prototype.unlinkInstanceElement=function(){e.prototype.unlinkInstanceElement.call(this),this.unlinkWidgets()},t.prototype.unlinkWidgets=function(){o.ForEach(this._childWidgets,function(e){e.unlinkInstanceElement()}),this._childWidgets=[]},t.prototype.linkWidgets=function(){var e=this;this._screen&&this._screen.instanceElement&&(this._childWidgets=t.registerDynamicWidgets(this._screen,this.instanceElement).filter(function(t){return!e.deps||!e.deps.some(function(e){return t instanceof e})}),o.ForEach(this._childWidgets,function(t){t.linkInstanceElement(e._screen.instanceElement)}))},t.addWidgetToLibrary=function(e){t.ScreenWidgetsLibrary[e.CONSTS.selector]=e},t.registerWidgets=function(e){return r.BaseWidget.registerTypedWidgets(e.templateElement,t.ScreenWidgetsLibrary,function(t,n){return new t(e,n)})},t.registerDynamicWidgets=function(e,n){return r.BaseWidget.registerTypedWidgets(n,t.ScreenWidgetsLibrary,function(t,n){return new t(e,n)})},t.ScreenWidgetsLibrary={},t}(r.BaseWidget);t.BaseScreenWidget=a},,,function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e._undefined=0]="_undefined",e[e.none=1]="none",e[e.legacy=2]="legacy",e[e.modern=3]="modern"}(n=t.PluginStyle||(t.PluginStyle={})),t.getPluginStyleClass=function(e){return"gigya-style-"+n[e]}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2),o=n(138);!function(e){e[e._undefined=0]="_undefined",e[e.template=1]="template",e[e.instance=2]="instance"}(i=t.ElementRoles||(t.ElementRoles={}));var a=0;t.TemplateElement_CONSTS={elementId:"data-screenset-element-id",publishElementId:"data-screenset-element-id-publish",templateForArray:"screenSetTemplateFor",instanceOfArray:"screenSetInstanceOf",screenSetRoles:"data-screenset-roles"},r.DeepFreeze(t.TemplateElement_CONSTS);var s=new Function("screenset","viewport","formData","profile","data","subscriptions","preferences","accountInfo","tfaProviders","authMethods","conflictingAccount","schema","_account","value","return eval(value);"),l=function(){function e(n,r){if(this.templateElement=n,this._parent=r,this.eventHandlers={},this.conditionalExpressions=new Array,this._screenSet=r._screenSet,e.isTemplateInstance(this.templateElement))this.ID=this.templateElement.getAttribute(t.TemplateElement_CONSTS.elementId)||"",this.publishID="true"===this.templateElement.getAttribute(t.TemplateElement_CONSTS.publishElementId);else{if(this.ID=this.templateElement.id||"",""!==this.ID)this.publishID=!0,this.templateElement.removeAttribute("id");else{var o=++a+"_"+(new Date).getTime();this.ID="__gig_template_element_"+o,this.publishID=!1}this.templateElement.setAttribute(t.TemplateElement_CONSTS.elementId,this.ID),this.templateElement.setAttribute(t.TemplateElement_CONSTS.publishElementId,String(this.publishID))}this.ID=this.ID.trim();var s=e.getRoles(this.templateElement);s.push(i.template),e.setRoles(this.templateElement,s);var l=n[t.TemplateElement_CONSTS.templateForArray];l||(l=new Array,n[t.TemplateElement_CONSTS.templateForArray]=l),this.conditionalExpressions=this.getConditionalExpression(this.templateElement),l.push(this)}return e.prototype.unlinkTemplate=function(){var n=this.templateElement[t.TemplateElement_CONSTS.templateForArray];if(n){var o=r.LastIndexOf(n,this);n.splice(o,1)}var a=e.getRoles(this.templateElement);a.pop()===i.template?e.setRoles(this.templateElement,a):this.warn("unlinkTemplate without matching role")},e.prototype.getConditionalExpression=function(e){var t=[];try{t=r.getConditionalAttributeExpressions(e)}catch(e){this.warn("Error parsing conditional expressions.")}return t},e.getRoles=function(e){var n=(e.getAttribute(t.TemplateElement_CONSTS.screenSetRoles)||"").split(",");return""===n[0]&&n.pop(),r.Map(n,function(e){return i[e]||i._undefined})},e.setRoles=function(e,n){var o=r.Map(n,function(e){return i[e]});e.setAttribute(t.TemplateElement_CONSTS.screenSetRoles,o.join(","))},e.prototype.warn=function(e,t){this._parent.warn(e,t?this.ID+"."+t:this.ID)},e.prototype.linkInstanceElement=function(n){var o=this,a=window.gigya.utils.DOM.getElementsByAttribute(n,"*",t.TemplateElement_CONSTS.elementId,this.ID);if(a&&a.length&&a[0]){this.instanceElement=a[0];var s=e.getRoles(this.instanceElement);s.push(i.instance),e.setRoles(this.instanceElement,s);var l=this.instanceElement[t.TemplateElement_CONSTS.instanceOfArray];l||(l=new Array,this.instanceElement[t.TemplateElement_CONSTS.instanceOfArray]=l),r.ForEachProp(this.eventHandlers,function(e,t){return r.ForEach(e,function(e){return window.gigya.utils.DOM.addEventListener(o.instanceElement,t,e)})}),l.push(this),this.initFromInstanceElement()}else this.warn("Failed to find the instance element to link to")},e.prototype.unlinkInstanceElement=function(){var n=this;if(this.instanceElement){r.ForEachProp(this.eventHandlers,function(e,t){return r.ForEach(e,function(e){return window.gigya.utils.DOM.removeEventListener(n.instanceElement,t,e)})});var o=e.getRoles(this.instanceElement);o.pop()===i.instance?e.setRoles(this.instanceElement,o):this.warn("unlinkInstanceElement without matching role");var a=this.instanceElement[t.TemplateElement_CONSTS.instanceOfArray];a&&a.splice(window.gigya.utils.array.indexOf(a,this),1),this.instanceElement=null}},e.isTemplateInstance=function(e){return e.getAttribute(t.TemplateElement_CONSTS.elementId)},e.prepareTemplateInstanceElement=function(n,r){var a=n.getAttribute(t.TemplateElement_CONSTS.elementId),s="true"===n.getAttribute(t.TemplateElement_CONSTS.publishElementId);if(a){if(s&&n.setAttribute("id",a),r){var l=e.getRoles(n);l.pop()===i.template&&e.setRoles(n,l)}}else o.warn("","Failed to find elementId")},e.prepareTemplateInstances=function(n){var i=n.querySelectorAll("*["+t.TemplateElement_CONSTS.elementId+"]");r.ForEach(i,function(t){return e.prepareTemplateInstanceElement(t,!0)})},e.prototype.addEventListener=function(e,t){var n=this.eventHandlers[e];n||(n=new Array,this.eventHandlers[e]=n),n.push(t),this.instanceElement&&window.gigya.utils.DOM.addEventListener(this.instanceElement,e,t)},e.prototype.removeEventListener=function(e,t){this.instanceElement&&window.gigya.utils.DOM.removeEventListener(this.instanceElement,e,t);var n=this.eventHandlers[e];if(n){var i=r.LastIndexOf(n,t);i>-1&&n.splice(i,1)}},e.prototype.getLoggerName=function(){return""},e.prototype.evaluateConditionalAttributes=function(){var e=this;this.conditionalExpressions=this.getConditionalExpression(this.instanceElement),this.hasConditionalAttributes()&&(window.gigya.logger.group(("conditional expressions for "+(this.constructor.name||this.ID)+" "+this.getLoggerName()).trim()).endWhen(function(){window.gigya.logger.info("template element:",e),r.ForEach(e.conditionalExpressions,function(t){var n=e.evaluateExpression(t);e.executeConditionalResult(n,t,e.instanceElement)})}),this.initFromInstanceElement())},e.prototype.initFromInstanceElement=function(){},e.prototype.hasConditionalAttributes=function(){return this.conditionalExpressions&&this.conditionalExpressions.length>0},e.prototype.evaluateExpression=function(e){var t=this.getExpressionData();window.gigya.logger.debug("evaluating:",{conditionalExpression:e,expressionData:t});try{return s(t.screenset,t.viewport,t.formData,t.profile,t.data,t.subscriptions,t.preferences,t.accountInfo,t.tfaProviders,t.authMethods,t.conflictingAccount,t.schema,window.gigya.utils.object.expressionHelper(t),e.condition)}catch(t){return e.ignoreError||window.gigya.logger.warn("Screenset exception in conditional expression!",{condition:e.condition,e:t}),e.defaultValue}},e.prototype.getExpressionData=function(){var e=this._screenSet.getApiData(),t=window.gigya.utils.viewport.getInnerSize(),n={formData:{},profile:{},data:{},preferences:{},subscriptions:{},authMethods:[],schema:e.getSchema||{},accountInfo:e.getAccountInfo||{},tfaProviders:e.getProviders||{},conflictingAccount:e.getConflictingAccount||{},screenset:{width:this._screenSet.container.offsetWidth,height:this._screenSet.container.offsetHeight,translations:this._screenSet.params.customLang||{},lang:this._screenSet.lang,isModal:this._screenSet.isModal,isMobile:this._screenSet.isMobileUI},viewport:{width:t.w,height:t.h,orientation:window.gigya.utils.viewport.getOrientation()}};if(e.getAccountInfo&&(n=window.gigya.utils.object.clone(window.gigya.utils.object.extractProperties(e.getAccountInfo,n,"profile|data|preferences|subscriptions|authMethods"),!0)),this._parent.isPopulated){n.formData=this._parent.getFlatFormData(!0,!1);var i=this._parent.getFormData(!1,!1);n=window.gigya.utils.object.merge([n,i],!0)}return n},e.prototype.executeConditionalResult=function(e,t,n){if((e=window.gigya.utils.validation.isExplicitFalse(e)?e:e||t.defaultValue)===t.lastAttributeValue)window.gigya.logger.info("attribute '"+t.attributeName+"' remained the same: "+e);else if(window.gigya.logger.info("attribute '"+t.attributeName+"' changed: "+JSON.stringify(t.lastAttributeValue)+" => "+JSON.stringify(e)),t.lastAttributeValue=e,"class"===t.attributeName&&this.cssClass&&(e=((e||"")+" "+this.cssClass).trim()),e||window.gigya.utils.validation.isExplicitFalse(e)&&!window.gigya.utils.DOM.isHTMLBooleanAttribute(t.attributeName)){var i="object"==typeof e?JSON.stringify(e):e;window.gigya._.plugins.utils.DOM.setAttribute(n,t.attributeName,i)}else window.gigya._.plugins.utils.DOM.setAttribute(n,t.attributeName,null);return e},e.prototype.resetLastConditionalValues=function(){r.ForEach(this.conditionalExpressions,function(e){e.lastAttributeValue=""})},e}();t.TemplateElement=l},,,,,,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(2);!function(e){e[e.fail=0]="fail",e[e.saveProfileAndFail=1]="saveProfileAndFail"}(t.ConflictHandling||(t.ConflictHandling={})),t.LoginModes={standard:{name:"standard",getLoginProviders:function(e,t,n){var i=t.enabledProviders;return"string"!=typeof i?null:i.toLowerCase()},filterParams:function(e){return delete e.regToken,delete e.instanceID,delete e.getInstance,e}},reAuth:{name:"reAuth",getLoginProviders:function(e,t,n){var r=e.getAccountInfo&&e.getAccountInfo.socialProviders,o=e.getAccountInfo&&e.getAccountInfo.identities;if(!r)return null;var a=(r=r.toLowerCase()).split(",");return o&&i.ForEach(o,function(e){if(!e.allowsLogin){var t=a.indexOf(e.provider.toLowerCase());t>-1&&a.splice(t,1)}}),a.join(",")},filterParams:function(e){return delete e.instanceID,delete e.getInstance,e}},link:{name:"link",getLoginProviders:function(e,t,n){return n?e.getConflictingAccount&&e.getConflictingAccount.conflictingAccount&&e.getConflictingAccount.conflictingAccount.loginProviders&&e.getConflictingAccount.conflictingAccount.loginProviders.join(",").toLowerCase():null},filterParams:function(e){return delete e.instanceID,delete e.getInstance,e}}},i.DeepFreeze(t.LoginModes)},,,,,,,,,,,,,,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.pendingError=0]="pendingError",e[e.missing=1]="missing",e[e.finished=2]="finished",e[e.canceled=3]="canceled",e[e.backButton=4]="backButton",e[e.canceledByParent=5]="canceledByParent",e[e.skip=6]="skip",e[e.error=7]="error",e[e.cancel=8]="cancel"}(t.CloseReasons||(t.CloseReasons={}))},,,,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Screen_CONSTS={gigyaClass:"gigya-screen",conditionalAttributePrefix:"gigya-conditional",expressionAttributePrefix:"gigya-expression",cssClass:"data-css-class"}},,,,,,,,,,,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.gigyaPhone=0]="gigyaPhone",e[e.gigyaTotp=1]="gigyaTotp",e[e.gigyaPush=2]="gigyaPush",e[e.livelink=3]="livelink"}(t.EditableTfaProvidersTypes||(t.EditableTfaProvidersTypes={})),t.gigyaAssertionExpiration=3e5},,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(2);t.ScreenOptions_CONSTS={accountsLinkedScreen:"data-on-accounts-linked-screen",pendingTfaRegistrationScreen:"data-on-pending-tfa-registration-screen",pendingTfaVerificationScreen:"data-on-pending-tfa-verification-screen",pendingRegistrationScreen:"data-on-pending-registration-screen",existingLoginIdentifierScreen:"data-on-existing-login-identifier-screen",pendingVerificationScreen:"data-on-pending-verification-screen",pendingCodeVerificationScreen:"data-on-pending-email-verification-code",missingLoginIdScreen:"data-on-missing-loginid-screen",pendingPasswordChangeScreen:"data-on-pending-password-change-screen",pendingReAuthenticationScreen:"data-on-pending-recent-login-screen",width:"data-width",height:"data-height",caption:"data-caption"},i.DeepFreeze(t.ScreenOptions_CONSTS);var r=function(e,n){n=n||{},this.accountsLinkedScreen=e.getAttribute(t.ScreenOptions_CONSTS.accountsLinkedScreen)||n.accountsLinkedScreen,this.pendingTfaRegistrationScreen=e.getAttribute(t.ScreenOptions_CONSTS.pendingTfaRegistrationScreen)||n.pendingTfaRegistrationScreen,this.pendingTfaVerificationScreen=e.getAttribute(t.ScreenOptions_CONSTS.pendingTfaVerificationScreen)||n.pendingTfaVerificationScreen,this.pendingRegistrationScreen=e.getAttribute(t.ScreenOptions_CONSTS.pendingRegistrationScreen)||n.pendingRegistrationScreen,this.existingLoginIdentifierScreen=e.getAttribute(t.ScreenOptions_CONSTS.existingLoginIdentifierScreen)||n.existingLoginIdentifierScreen,this.pendingVerificationScreen=e.getAttribute(t.ScreenOptions_CONSTS.pendingVerificationScreen)||n.pendingVerificationScreen,this.pendingCodeVerificationScreen=e.getAttribute(t.ScreenOptions_CONSTS.pendingCodeVerificationScreen)||n.pendingCodeVerificationScreen,this.missingLoginIdScreen=e.getAttribute(t.ScreenOptions_CONSTS.missingLoginIdScreen)||n.missingLoginIdScreen,this.pendingPasswordChangeScreen=e.getAttribute(t.ScreenOptions_CONSTS.pendingPasswordChangeScreen)||n.pendingPasswordChangeScreen,this.pendingReAuthenticationScreen=e.getAttribute(t.ScreenOptions_CONSTS.pendingReAuthenticationScreen)||n.pendingReAuthenticationScreen,this.width=e.getAttribute(t.ScreenOptions_CONSTS.width)||n.width,this.height=e.getAttribute(t.ScreenOptions_CONSTS.height)||n.height,this.caption=e.getAttribute(t.ScreenOptions_CONSTS.caption)||n.caption};t.ScreenOptions=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),o=n(2),a=n(17);!function(e){e[e.NotStarted=0]="NotStarted",e[e.InProgress=1]="InProgress",e[e.Done=2]="Done",e[e.Error=3]="Error"}(i=t.ServerStates||(t.ServerStates={})),o.DeepFreeze(i);var s=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.nextServerQueryId=0,o.serverState=i.NotStarted,o.callbacks=new Array,t._serverWidgets.push(o),o}return r.__extends(t,e),t.prototype.startServerQuery=function(){return this.serverState=i.InProgress,++this.nextServerQueryId},t.prototype.onServerQueryEnd=function(e,t,n){e===this.nextServerQueryId?this.serverQueryDone(t,n):this.warn("Ignoring server response #"+e)},t.prototype.serverQueryDone=function(e,t){var n=this;this.serverState=e,o.ForEach(this.callbacks,function(t){return t(e,n)}),this.callbacks=new Array},t.prototype.runOnServerDone=function(e){this.serverState!==i.InProgress?e(this.serverState,this):this.callbacks.push(e)},t}(a.BaseFormWidget);t.BaseServerWidget=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0);t.CaptchaHandlers={},function(e){e[e.Visible=0]="Visible",e[e.Invisible=1]="Invisible"}(i=t.CaptchaMode||(t.CaptchaMode={}));var o=0,a=function(){function e(e){void 0===e&&(e={}),this.params=e,this._ID="gig_captcha_"+ ++o}return e.prototype.init=function(e){return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(n){switch(n.label){case 0:if(!this.siteKey)return window.gigya.logger.warn("Missing captcha configuration"),[2,!1];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.loadProvider()];case 2:return n.sent(),this.render(e),[2,!0];case 3:return t=n.sent(),window.gigya.logger.warn(t.message||t),[2,!1];case 4:return[2]}})})},e.prototype.getID=function(){return this._ID},e.prototype.getToken=function(){return r.__awaiter(this,void 0,void 0,function(){var e;return r.__generator(this,function(t){switch(t.label){case 0:return(e=this.captchaToken)?[3,2]:[4,this.lazyExecuteOrFail()];case 1:e=t.sent(),t.label=2;case 2:return[2,e]}})})},e.prototype.reset=function(){this.captchaToken=null},Object.defineProperty(e.prototype,"siteKey",{get:function(){return this.isInvisible?this.invisibleSiteKey:this.visibleSiteKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInvisible",{get:function(){return this.params.mode===i.Invisible},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callbackID",{get:function(){return"gig_"+this.provider+"_onLoad"},enumerable:!0,configurable:!0}),e}();t.BaseCaptchaHandler=a},function(e,t,n){(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(150),r=function(){function t(e,t){this.dataStore=e,this._serverApi=t}return t.prototype.send=function(){var t=this;return new gigya.Promise(function(n,i){var r=e(t.dataStore.params,t.getRequestParams());r.callback=function(e){t.handleResponse(e),n(e)};try{t._serverApi.run(r)}catch(e){i(e)}})},Object.defineProperty(t.prototype,"methodName",{get:function(){return this._serverApi.methodName},enumerable:!0,configurable:!0}),t.getHandler=function(e,t,n){var r=this._handlers[e]||this._defaultHandler;if(r){var o=n.filter(function(t){return t.methodName===e})[0];return o?new r(t,o):(window.gigya.logger.warn("["+i.ApiLink_CONSTS.attributeName+']: unable to create api link for: "'+e+'", the method is not supported'),null)}return null},t.addHandler=function(e,t){if(this._handlers[e])throw new Error("Can't re-register api link handler, "+e+" handler already exist");this._handlers[e]=t},t.addDefaultHandler=function(e){this._defaultHandler?window.gigya.logger.error("Can't register default API handler, one is already registered"):this._defaultHandler=e},t._handlers={},t}();t.BaseApiHandler=r}).call(this,n(0).__assign)},,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e._undefined=0]="_undefined",e[e.desktop=1]="desktop",e[e.mobile=2]="mobile",e[e.auto=3]="auto"}(t.DeviceTypes||(t.DeviceTypes={}))},,,,,,,,,,,,,,,function(e,t){function n(e){return 0==e.indexOf(t.namespace+".")&&e.substr(e.length-t.consentFieldName.length,e.length)===t.consentFieldName}function i(e){var t=e.split(".");return t.slice(1,t.length-1).join(".")}Object.defineProperty(t,"__esModule",{value:!0}),t.consentFieldName="isConsentGranted",t.namespace="preferences",t.postProcessForm=function(e,r){var o=function(e,r){if(e&&r){var o=Object.keys(e).filter(n).map(i);return o.length?o.reduce(function(e,n){var i=r[n];return i?e[n]={docVersion:i.currentDocVersion,docDate:i.currentDocDate}:window.gigya.logger.warn("form input bound to "+t.namespace+"."+n+" but it doesn't exist on schema"),e},{}):void 0}}(e,r);return o&&(e=window.gigya.utils.object.merge([e,{displayedPreferences:o}])),e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(26),o=n(2),a=function(e){function t(t,n,i,r){void 0===r&&(r=!0);var o=e.call(this,t,n)||this;return o._screen=i,o.params={},o.renderWidgetUI=!1,o.params=o.getElementParams(t),r&&window.gigya.utils.DOM.addClassToElement(t,"gigya-reset"),o}return i.__extends(t,e),t.registerTypedWidgets=function(e,t,n){var i=new Array;return o.ForEachProp(t,function(t,r){var a=e.querySelectorAll(t.CONSTS.selector);o.ForEach(a,function(e){i.push(n(t,e))})}),i},t.prototype.getElementParams=function(e){var t=this,n={},i=this;return o.ForEach(e.querySelectorAll("param"),function(e){var r;n[e.name]=e.value;try{r=o.getConditionalAttributeExpressions(e,!0)}catch(e){t.warn("Error in param conditionals, conditionals ignored"),r=[]}r.length>0&&(i.conditionalExpressions=i.conditionalExpressions.concat(r))}),n},t.prototype.evaluateConditionalAttributes=function(){this.widgetParams||(this.widgetParams=this.params,this.renderWidgetUI=!0),e.prototype.evaluateConditionalAttributes.call(this),this.renderWidgetUI&&this.renderWidget()},t.prototype.executeConditionalResult=function(t,n,i){return n.isWidgetParamTag?(""===t&&n.defaultValue&&(t=n.defaultValue),t||n.defaultValue?t!==n.lastAttributeValue&&(n.lastAttributeValue=t,this.widgetParams[n.attributeName]=t,this.renderWidgetUI=!0):(n.lastAttributeValue=t,this.widgetParams[n.attributeName]&&(delete this.widgetParams[n.attributeName],this.renderWidgetUI=!0)),t):e.prototype.executeConditionalResult.call(this,t,n,i)},t.prototype.renderWidget=function(){},t}(r.TemplateElement);t.BaseWidget=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),o=n(2),a=n(26),s={"gigya-error-display":{showError:function(e,t){return window.gigya.utils.DOM.addClassToElement(e,"gigya-error-display-active")},hideError:function(e){return window.gigya.utils.DOM.removeClassFromElement(e,"gigya-error-display-active")}},"gigya-error-msg":{showError:function(e,t){window.gigya.utils.DOM.addClassToElement(e,"gigya-error-msg-active"),e.innerHTML=t},hideError:function(e){window.gigya.utils.DOM.removeClassFromElement(e,"gigya-error-msg-active"),e.innerHTML=""}}};o.DeepFreeze(s),function(e){e[e.boundObjectError=0]="boundObjectError",e[e.firstError=1]="firstError",e[e.anyError=2]="anyError",e[e.allErrors=3]="allErrors",e[e["bound-object-error"]=0]="bound-object-error",e[e["first-error"]=1]="first-error",e[e["any-error"]=2]="any-error",e[e["all-errors"]=3]="all-errors"}(i=t.ErrorScopes||(t.ErrorScopes={})),o.DeepFreeze(i),t.ErrorDisplayElement_CONSTS={gigyaClasses:["gigya-error-display","gigya-error-msg"],boundedTo:"data-bound-to",errorCodes:"data-error-codes",scope:"data-scope",flags:"data-error-flags",errorClassPrefix:"gigya-error-code-"},o.DeepFreeze(t.ErrorDisplayElement_CONSTS);var l=function(e){function n(n,r){var a=e.call(this,n,r)||this;a._screen=r,a.boundedTo=n.getAttribute(t.ErrorDisplayElement_CONSTS.boundedTo),a.scope=i[n.getAttribute(t.ErrorDisplayElement_CONSTS.scope)]||i.boundObjectError;var l=n.getAttribute(t.ErrorDisplayElement_CONSTS.errorCodes);a.allowedErrorCodes=l?o.Map(l.split(","),function(e){return parseInt(e)}):[];var c=n.getAttribute(t.ErrorDisplayElement_CONSTS.flags);for(var u in a.allowedFlags=c?c.split(","):[],s)if(window.gigya.utils.DOM.isElementClass(n,u)){a.policy=s[u];break}return a.policy.hideError(n),n.setAttribute("aria-atomic","true"),n.setAttribute("role","alert"),a}return r.__extends(n,e),n.prototype.isErrorCodeAllowed=function(e,t){var n=this;void 0===t&&(t=null);var i=0===this.allowedErrorCodes.length&&100001!==e||-1!==window.gigya.utils.array.indexOf(this.allowedErrorCodes,e),r=0===this.allowedFlags.length;if(this.allowedFlags.length&&t){var a=t.split(",");r=o.Some(a,function(e){return-1!==window.gigya.utils.array.indexOf(n.allowedFlags,e)&&(r=!0,!0)})}return i&&r},n.prototype.showError=function(e){this.setLastError(e),this.policy.showError(this.instanceElement,e.errorMessage),this._screenSet.centerModal()},n.prototype.hideError=function(){this.policy.hideError(this.instanceElement),this.removeLastError()},n.prototype.setLastError=function(e){this.removeLastError(),this.lastError=e,this.instanceElement&&(window.gigya.utils.DOM.addClassToElement(this.instanceElement,t.ErrorDisplayElement_CONSTS.errorClassPrefix+e.errorCode),this._screenSet.centerModal())},n.prototype.removeLastError=function(){this.lastError&&(this.instanceElement&&(window.gigya.utils.DOM.removeClassFromElement(this.instanceElement,t.ErrorDisplayElement_CONSTS.errorClassPrefix+this.lastError.errorCode),this._screenSet.centerModal()),this.lastError=null)},n.prototype.evaluateConditionalAttributes=function(){e.prototype.evaluateConditionalAttributes.call(this),this.boundedTo=this.instanceElement.getAttribute(t.ErrorDisplayElement_CONSTS.boundedTo);var n=this.instanceElement.getAttribute(t.ErrorDisplayElement_CONSTS.errorCodes);this.allowedErrorCodes=n?o.Map(n.split(","),function(e){return parseInt(e)}):[],this.scope=i[this.instanceElement.getAttribute(t.ErrorDisplayElement_CONSTS.scope)]||i.boundObjectError;var r=this.instanceElement.getAttribute(t.ErrorDisplayElement_CONSTS.flags);this.allowedFlags=r?r.split(","):[]},n}(a.TemplateElement);t.ErrorDisplayElement=l},function(e,t,n){var i=this;Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),a=n(64);t.PendingErrorAttributes={},t.PendingErrorAttributes[200009]={name:a.ScreenOptions_CONSTS.accountsLinkedScreen,nextScreen:function(e){return e._screen.accountsLinkedScreen||"_finish"},requiresFinalize:!0},t.PendingErrorAttributes[206001]={name:a.ScreenOptions_CONSTS.pendingRegistrationScreen,nextScreen:function(e){return delete e._screenSet.getApiData().getSchema,e._screen.pendingRegistrationScreen},requiresFinalize:!0},t.PendingErrorAttributes[403043]=t.PendingErrorAttributes[200010]={name:a.ScreenOptions_CONSTS.existingLoginIdentifierScreen,nextScreen:function(e){return e._screenSet.data.regToken&&e._screen.existingLoginIdentifierScreen},requiresFinalize:!0},t.PendingErrorAttributes[206002]={name:a.ScreenOptions_CONSTS.pendingVerificationScreen,nextScreen:function(e){return e._screen.pendingVerificationScreen},resetFinalizeNeededState:!0},t.PendingErrorAttributes[206003]={name:a.ScreenOptions_CONSTS.missingLoginIdScreen,nextScreen:function(e){return e._screen.missingLoginIdScreen}},t.PendingErrorAttributes[403100]={name:a.ScreenOptions_CONSTS.pendingPasswordChangeScreen,nextScreen:function(e){return e._screen.pendingPasswordChangeScreen},requiresFinalize:!0},t.PendingErrorAttributes[403101]={name:a.ScreenOptions_CONSTS.pendingTfaVerificationScreen,nextScreen:function(e){return e._screen.pendingTfaVerificationScreen},requiresFinalize:!0},t.PendingErrorAttributes[403102]={name:a.ScreenOptions_CONSTS.pendingTfaRegistrationScreen,nextScreen:function(e){return e._screen.pendingTfaRegistrationScreen},requiresFinalize:!0},t.PendingErrorAttributes[403110]={name:a.ScreenOptions_CONSTS.pendingReAuthenticationScreen,nextScreen:function(e){return e._screen.pendingReAuthenticationScreen}},t.PendingErrorAttributes[206006]={name:a.ScreenOptions_CONSTS.pendingCodeVerificationScreen,requiresFinalize:!0,nextScreen:function(e){return r.__awaiter(i,void 0,void 0,function(){var t,n;return r.__generator(this,function(i){switch(i.label){case 0:return t=e._screenSet.getApiData(),(n=t.getAccountInfo=t.getAccountInfo||{}).email||n.profile&&n.profile.email?[3,2]:[4,new gigya.Promise(function(t){return e._screenSet.updateAccountInfo(t)})];case 1:n=i.sent(),i.label=2;case 2:return n.email=n.email||n.profile&&n.profile.email,window.gigya.accounts.otp.sendCode({regToken:e._screenSet.data.regToken,email:n.email,callback:function(t){0==t.errorCode&&(e._screenSet.data.otpData.vToken=t.vToken)}}),[2,e._screen.pendingCodeVerificationScreen]}})})}},o.DeepFreeze(t.PendingErrorAttributes),t.notImplementerAbstract=function(){throw new Error("NOT IMPLEMENTED")}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(144),a=n(47),s=n(143),l=n(9),c=n(87),u=n(26),d=n(64),p=n(69),h=n(25),g=n(145),m=n(51),f=n(62),y={namespace:"accounts",pluginName:"screenSet",showScreenSetName:"showScreenSet",switchScreenName:"switchScreen",hideScreenSetName:"hideScreenSet",stayOnScreen:"_stay"};r.DeepFreeze(y),r.DeepFreeze(a.CloseReasons),t.EndFlowScreens={_skip:a.CloseReasons.skip,_finish:a.CloseReasons.finished,_cancel:a.CloseReasons.cancel},r.DeepFreeze(t.EndFlowScreens),t.ScreenSet_CONSTS={gigyaClass:"gigya-screen-set",mobileDialogClass:"gigya-screen-dialog-mobile",webDialogClass:"gigya-screen-dialog",contentClass:"gigya-screen-dialog-content",topElementClass:"gigya-screen-dialog-top",calculateSizeClass:"gigya-calculate-size",gigyaHidden:"gigya-hidden",startScreen:"data-start-screen",isResponsive:"data-responsive",dialogStyle:"data-dialog-style"},r.DeepFreeze(t.ScreenSet_CONSTS);var S=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._addedCSS=!1,t._screens={},t._random=Math.random(),t._placeholderIntervalID=-1,t.onUserStateChange=function(e){return t.onAccountInfo(e)},t._screenSet=t,t}return i.__extends(n,e),n.prototype.getConfig=function(){return{requiredParams:["screenSet"],defaultParams:{screenSet:""},defaultModalParams:{screenSet:""},defaultDeviceType:p.DeviceTypes.auto,hasMobileUI:!0,allowModal:!0,disableModalContainerInit:!0,defaultDialogStyle:h.PluginStyle.legacy,supportsResponsive:!0,enableSizePolling:!0,enableViewportPolling:!0}},n.injectionInfo=function(){return{name:"screenSet",namespace:"accounts",methodName:"showScreenSet",jsName:"gigya.services.accounts.plugins.screenSet",publicMethods:{hideScreenSet:{instanceMethod:"cancel",argNames:[]},switchScreen:{instanceMethod:"switchScreen",argNames:["screen"]}}}},n.prototype.dispatchScreenSetEvent=function(e,t){return this.dispatchPluginEvent(e,t)},n._calculateInstanceId=function(e){var t=e.containerID||"";return e.screenSet+"_"+t},n.prototype.init=function(e){var t=this;this.loadTemplate(function(i,a,s){if(i)for(var l in window.gigya.logger.info("screenset template loaded"),r.IETemplateElementPolyfill(),s&&(t.explicitParams=window.gigya.utils.object.merge([s,t.explicitParams],!1),t.params=window.gigya.utils.object.merge([t.params,window.gigya.thisScript.globalConf,t.explicitParams],!1)),t.params.customLang=window.gigya.utils.object.merge([a||{},t.params.customLang||{}]),t.params.customLang)t.params.customLang[l.toLowerCase()]=t.params.customLang[l];else window.gigya.logger.error("failed loading screenset template");var c=window.gigya.utils.URL.getParamsFromURL(document.location.href).gig_regToken;c&&(t.params.regToken=c),t.params.parentData?(t._isChild=!0,t.data=t.params.parentData,delete t.params.parentData):(t._isChild=!1,t.data=new o.ScreenSetData(t.params),t.params.regToken=t.data.regToken),t.params.isChild=t._isChild,t._isChild||t.registerGlobalEvents(),t.params.regSource||(t.params.regSource=r.firstPart(r.firstPart(document.location.href,"?"),"#")),t._instanceId=n._calculateInstanceId(t.params),i?(t.initContainer(),t.initScreens()):(t.dispatchErrorFromResponse(a),t.container&&(t.container.innerText="An error has occurred. Please try again later.")),e(i)})},n.prototype.loadTemplate=function(e){var i=this;if(this.templateElement)e(!0);else{var r=this._ID=this.isMobileUI&&this.params.mobileScreenSet?this.params.mobileScreenSet:this.params.screenSet,o="__gigyaScreenSet_"+r,a=document.getElementById(o);if(!a){if(this.templateElement=document.getElementById(r),this.templateElement&&this.templateElement.parentElement&&this.templateElement.parentElement.id&&0===this.templateElement.parentElement.id.indexOf("__gigyaScreenSet_")&&(this.templateElement=void 0),this.templateElement)return void e(!0);(a=document.createElement("div")).id=o,a.style.display="none",window.gigya.utils.DOM.appendToBody(a)}var s=this.getLangForScreenSet(),l=a.querySelector("div."+t.ScreenSet_CONSTS.gigyaClass);if(l){this.templateElement=l,n.CACHE[r]||(n.CACHE[r]={javascript:void 0,translations:{}});var c=n.CACHE[r].javascript?window.gigya.utils.JSON.deserialize(n.CACHE[r].javascript):void 0,u=window.gigya.pluginUtils.lang.getTranslationsFromContainer(n.CACHE[r],s,!1);u?e(!0,u,c):window.gigya.accounts.getScreenSets(this.params,{lang:s,include:"translations",screenSetIDs:r,callback:this.prepareCallback(function(t){if(0==t.errorCode&&t.screenSets&&t.screenSets.length){var i=t.screenSets[0],o=window.gigya.pluginUtils.lang.getTranslationsFromContainer(i,s)||{};n.CACHE[r].translations[s]=o,e(!0,o,c)}else e(!1,t)})})}else window.gigya.accounts.getScreenSets(this.params,{lang:s,include:"html,css,javascript,translations",screenSetIDs:r,callback:this.prepareCallback(function(t){var o;if(0==t.errorCode&&t.screenSets&&t.screenSets.length&&t.screenSets[0].html){var l=void 0,c=t.screenSets[0],u=window.gigya.pluginUtils.lang.getTranslationsFromContainer(c,s)||{};n.CACHE[r]={javascript:c.javascript,translations:(o={},o[s]=u,o)},a.innerHTML||(a.innerHTML=c.html),i._loadedScreensetCss=c.css,i.templateElement=a.querySelector("div"),c.javascript&&(l=window.gigya.utils.JSON.deserialize(c.javascript)),e(!0,u,l)}else e(!1,t)})})}},n.prototype.injectScreenSetCSS=function(){if(!this._addedCSS){if(this._style!=h.PluginStyle.none){var e=window.gigya.utils.templates.fill(this.getCss().defaultCSS,{imgBase:this._imgBase});window.gigya._.plugins.utils.css.addCss(e,this.params.cssPrefix,!1)}this._loadedScreensetCss&&(window.gigya._.plugins.utils.css.addCss(this._loadedScreensetCss),delete this._loadedScreensetCss),this._addedCSS=!0}},n.prototype.initContainer=function(){if(this.templateElement){var t=this.isModal&&this.getPluginStyle()==h.PluginStyle.legacy;this.config.defaultModalParams.dimDialogBackground=!t,e.prototype.initContainer.call(this),t&&(this.config.enableViewportPolling=!1,this._modalDialog.getModalDialogContainer().setAttribute("gigid",this.config.methodName))}else this.isModal||(window.gigya.utils.DOM.setSize(this.container,this.params.width,this.params.height,!1),this.params.responsive&&(this.container.style.width="auto"),this._loadingIndicator=new window.gigya._.plugins.LoadDimmer(this.container))},n.prototype.initScreens=function(){var e=this;this.isResponsive="true"==this.templateElement.getAttribute(t.ScreenSet_CONSTS.isResponsive),this.screenOptions=new d.ScreenOptions(this.templateElement),window.gigya.logger.info("screenset screens:",this.screenOptions),this.injectScreenSetCSS(),this._isChild||this.addGlobalEventHandler("onLogin",function(){e.data.finalizeRegistrationNeeded=!1}),this.prepareScreenSetContainer(),this.prepareScreens(),this._startScreen=this.params.startScreen||this.templateElement.getAttribute(n.CONSTS.startScreen)||this._startScreen,this.isMobileUI&&this.isModal&&window.scrollTo(0,0),this.params.initialResponse?(!this.params.initialResponse.operation&&this.params.initialMethod&&(this.params.initialResponse.operation="/"+this.params.initialMethod),this.onScreenResponse(this.params.initialResponse,{ID:this._ID,bindID:this._ID,_screen:this._screens[this._startScreen],_screenSet:this})):this.switchScreen(this._startScreen,this.params.formContext)},n.prototype.getPluginStyle=function(){return h.PluginStyle[this.params.dialogStyle]||this.templateElement&&(h.PluginStyle[this.templateElement.getAttribute(t.ScreenSet_CONSTS.dialogStyle)]||this.getConfig().defaultDialogStyle)||h.PluginStyle._undefined},n.prototype.prepareScreenSetContainer=function(){var e,n=this.containerID;e=this.isModal?this.getTemplates().screenSet_dialog:this.getTemplates().screenSet;var i,r=n+"_content",o=n+"_child";(this.container.insertAdjacentHTML("beforeend",window.gigya.utils.templates.fill(e,{innerContainerID:r,childContainerID:o})),this._captionElement)||(this._isChild?(document.getElementById(r+"_caption").style.display="none",i=this.container.parentElement.id+"_content_caption"):i=r+"_caption",this._captionElement=document.getElementById(i));this._elContainer=document.getElementById(r),this.isModal&&this._style==h.PluginStyle.legacy&&window.gigya.utils.DOM.addClassToElement(this._elContainer,t.ScreenSet_CONSTS.contentClass),window.gigya.utils.DOM.addClassToElement(this._elContainer,"gigya-locale-"+window.gigya.thisScript.lang.langCode),this._elChildContainer=document.getElementById(o)},n.prototype.getApiData=function(){return this.data.apiData},n.prototype.getProfile=function(){var e=this.getApiData();return e&&e.getAccountInfo&&e.getAccountInfo.profile||{}},n.prototype.getSchemaData=function(){var e=this.getApiData();return e&&e.getAccountInfo&&e.getAccountInfo.data||{}},n.prototype.getSubScriptions=function(){var e=this.getApiData();return e&&e.getAccountInfo&&e.getAccountInfo.subscriptions||{}},n.prototype.getPreferences=function(){var e=this.getApiData();return e&&e.getAccountInfo&&e.getAccountInfo.preferences||{}},n.prototype.removeRegToken=function(){this.data.regToken=this.params.regToken=null},n.prototype.establishRegToken=function(e){this.params.regToken=this.data.regToken=e},n.prototype.onScreenResponse=function(e,t,n){return i.__awaiter(this,void 0,void 0,function(){var r,o,s,c,u,d=this;return i.__generator(this,function(i){switch(i.label){case 0:return t||(t={}),this.data.lastSubmittedFormID=t.ID,this.data.lastSubmittedFormResponse=e,r=t.successScreen,e.response&&(e=e.response),e.autoSkip&&(r=t.autoSkipScreen),a.CloseReasons[e.childScreenSetCloseReason]===a.CloseReasons.skip&&(r=t.screenSetSkippedScreen),"_finish"===r&&(r=void 0),e.regToken&&this.establishRegToken(e.regToken),this.onAccountInfo(e),(n||this.data.lastSubmittedFormID&&(r||!this.endFlowIsPending()))&&(o=this.params.onAfterSubmit,s=function(e){var n=d.unwrapResponse(e),i={eventName:"afterSubmit",screen:t._screen.ID,form:t.bindID,profile:d.getProfile(),data:d.getSchemaData(),preferences:d.getPreferences(),subscriptions:d.getSubScriptions(),response:n};d.params.onAfterSubmit||(d.params.onAfterSubmit=o),d.dispatchPluginEvent(i.eventName,i)},t instanceof g.NewsletterSignupForm?s(e):"/accounts.setAccountInfo"!==e.operation||0!=e.errorCode||e.profile&&e.data?!this.isAccountInfoRequired(e.operation)||this.getApiData().getAccountInfo&&this.getApiData().getAccountInfo.profile&&this.getApiData().getAccountInfo.data?s(e):this.updateAccountInfo(function(t){return s(e)}):this.updateAccountInfo(function(e){return s(e)})),0!=e.errorCode?[3,1]:(c=this.getApiData(),"/accounts.register"==e.operation&&c.initRegistration&&(window.gigya.logger.info("clearing screenset initRegistration cache (regToken)"),delete c.initRegistration),this._currentScreen&&this._currentScreen.hideErrors(),!r||this._currentScreen&&r==this._currentScreen.ID?r||(window.gigya.logger.info("no next screen so..."),this.params.remember=this.data.extraEventData.rememberMe,this.endFlow(e,t,a.CloseReasons.finished)):this.switchScreen(r,e,t),[3,3]);case 1:return[4,this.handlePendingErrors(e,t)];case 2:if(i.sent())return[2];(u=t instanceof l.BaseForm?t:t.getErrorDisplayForm?t.getErrorDisplayForm():void 0)&&this.displayServerErrors(e,u),i.label=3;case 3:return[2]}})})},n.prototype.isAccountInfoRequired=function(e){return-1==["/accounts.resetPassword","/accounts.resendVerificationCode","/accounts.tfa.initTFA"].indexOf(e)},n.prototype.unwrapResponse=function(e){var t;return t=e.event&&e.event.response?e.event.response:e,window.gigya.utils.object.clone(t)},n.prototype.displayServerErrors=function(e,t){var n=this;if(e.secretQuestion)r.ForEach(t._secretQuestions,function(t){return t.setQuestion(e.secretQuestion)});else{var i,o=t.getErrorKey(e);switch(o&&(e.errorMessage=this.getText(o)),e.errorDetailsCode){case 100001:i=this.getText("old_password_cannot_be_the_same_as_new_password");break;case 100002:i=this.getText("wrong_password")}if(this.error(e.errorMessage,e.errorCode,{screen:t._screen.ID,form:t.ID,response:window.gigya.utils.object.clone(this.data.lastSubmittedFormResponse)}),!this._currentScreen)return void this.hide(a.CloseReasons[a.CloseReasons.error]);window.gigya.logger.info("reloading captchas"),r.ForEach(this._currentScreen._captchas,function(e){return e.reload()});var s={errorCode:e.errorCode,errorMessage:e.customMessage||i||e.errorMessage,errorFlags:e.errorFlags},l=new Array;e.validationErrors&&window.gigya.logger.group("screenset validation errors").endWhen(function(){r.ForEach(e.validationErrors,function(e,i){var o=t.getField(e.fieldName);o||"profile"===r.firstPart(e.fieldName,".")&&(o=t.getField(e.fieldName.replace("profile.","")));if(o){0===i&&o.instanceElement&&o.instanceElement.focus();var a=window.gigya.utils.object.clone(e);l.push(a),t.showFieldError(o,e.errorCode,!0,e.customMessage)&&(e.handled=!0)}else"captchaText"===e.fieldName?n.warn("Captcha is required but captcha widget is missing from the submitted form"):n.warn(e.fieldName+" is mandatory/invalid but its field is missing from the submitted form")})}),l.push(s),t.showErrors([s],!0),t.showErrors(l,!1),t.onAfterValidation()}},n.prototype.prepareScreens=function(){var e=this,t=this.templateElement.querySelectorAll("."+m.Screen_CONSTS.gigyaClass),n=!0;r.ForEach(t,function(t,i){var r=new s.Screen(e,t);e._screens[r.ID]=r,n&&(n=!1,e._startScreen=r.ID)})},n.prototype.close=function(){this.cancel()},n.prototype.cancel=function(){this.hide(a.CloseReasons[a.CloseReasons.canceled],null,!0)},n.prototype.hide=function(t,n,i){this.undimScreenSet(),this.isModal&&this._currentScreen&&(this._currentScreen.unlinkInstanceElement(),this._currentScreen=null),i&&(this.container.innerHTML=""),e.prototype.close.call(this,t,window.gigya.utils.object.removeUndefined({user:n&&n.user}))},n.prototype.dispose=function(){this._isDisposed||(this._child&&(this._child.hide(a.CloseReasons[a.CloseReasons.canceledByParent]),this._child.dispose(),this._child=null),r.ForEachProp(this._screens,function(e){return e.unlinkTemplate()}),this._child||this.unregisterGlobalEvents(),e.prototype.dispose.call(this))},n.prototype.registerGlobalEvents=function(){this.addGlobalEventHandlers({onLogin:this.onUserStateChange,onLogout:this.onUserStateChange})},n.prototype.unregisterGlobalEvents=function(){this.removeGlobalEventHandlers({onLogin:this.onUserStateChange,onLogout:this.onUserStateChange})},n.prototype.getErrorMessage=function(e,t,n,i){if(0==e)return"";switch(e){case 400027:return this.getRequiredValueValidationErrorMessage(t,i);case 400003:return this.getUniqueIdentifierValidationErrorMessage(n);case 500026:return this.getText("network_error");case 400009:default:return this.getValidationErrorMessage(n,i)}},n.prototype.getRequiredValueValidationErrorMessage=function(e,t){return e?this.getText("this_field_is_required","%fieldname",t):this.getText("please_enter_fieldname","%fieldname",t)},n.prototype.getUniqueIdentifierValidationErrorMessage=function(e){switch(e){case"username":return this.getText("username_already_exists");case"email":return this.getText("email_already_exists")}return""},n.prototype.getValidationErrorMessage=function(e,t){switch(e){case"email":return this.getText("email_address_is_invalid");case"password":case"newPassword":return this.getText("password_does_not_meet_complexity_requirements");case"passwordRetype":return this.getText("passwords_do_not_match");case"loginID":return this.getText("invalid_login_or_password");default:return this.getText("invalid_fieldname","%fieldname",t)}},n.prototype.updateAccountInfo=function(e){var t=this;window.gigya.accounts.getAccountInfo(this.params,{include:"profile,data",callback:function(n){t.onAccountInfo(n),e(n)}})},n.prototype.onAccountInfo=function(e){var t=e.accountInfo||e,n=this.getApiData();n.getAccountInfo||(n.getAccountInfo={}),r.ForEach(["profile","data","emails","loginIDs"],function(e){t[e]&&(n.getAccountInfo[e]=window.gigya.utils.object.merge([n.getAccountInfo[e]||{},t[e]]),window.gigya.logger.info("screenset accountInfo."+e+" cache updated:",n.getAccountInfo[e]))}),this._currentScreen&&this._currentScreen.evaluateConditionalAttributes()},n.prototype.onApiData=function(e,t){window.gigya.logger.debug("updating screenset cache of "+e.operation);var n=this.getApiData(),i=this.getApiMethodFromFullNamespace(e.operation);e.operation.indexOf("getProviders")>-1?n[i]={activeProviders:this.getEditableTfaProvider(e.activeProviders)}:n[i]=e,e.regToken&&(window.gigya.logger.info("updating screenset regToken"),this.establishRegToken(e.regToken));var r=!0;for(var o in this.data.neededData)if(!n[o]){r=!1;break}r&&(window.gigya.logger.info("got all required data"),this.loadNextScreen(t))},n.prototype.chooseNextScreen=function(e){if(e){var t=e.split(","),n=0,i=[];r.ForEach(t,function(e){var t=e.split(":"),r=t.length>1?parseInt(t[1]):1;n+=r,i.push({screen:t[0],weight:r})});var o,a=this._random*n;return r.Some(i,function(e){return!((a-=e.weight)>0)&&(o=e.screen,!0)}),o}},n.prototype.getEditableTfaProvider=function(e){void 0===e&&(e=[]);for(var t=[],n=0;n<e.length-0;n++){this.isTfaProviderEditable(e[n].name)&&t.push(e[n].name)}return t},n.prototype.isTfaProviderEditable=function(e){return null!=f.EditableTfaProvidersTypes[e]},n.prototype.getApiMethodFromFullNamespace=function(e){var t=e.split(".");return t[t.length-1]},n.prototype.switchToChildScreenSet=function(e,t,n){var i=this;window.gigya.logger.info("opening child screenset: "+e+"/"+t);var r={screenSet:e,lang:this.getLangForScreenSet(),customLang:this.params.customLang,width:this.params.width,height:this.params.height,context:this.params.context,cid:this.params.cid,regSource:this.params.regSource,regToken:this.params.regToken,onError:this.params.onError,onBeforeSubmit:this.params.onBeforeSubmit,onAfterSubmit:this.params.onAfterSubmit,onBeforeScreenLoad:this.params.onBeforeScreenLoad,onAfterScreenLoad:this.params.onAfterScreenLoad,onFieldChanged:this.params.onFieldChanged,ignoreApiQueue:this.params.ignoreApiQueue,onHide:function(e){switch(i.params.regToken=i.data.regToken,a.CloseReasons[e.reason]){case a.CloseReasons.canceledByParent:break;case a.CloseReasons.error:case a.CloseReasons.canceled:i.hide(e.reason);break;case a.CloseReasons.pendingError:i.onScreenResponse(i.data.lastSubmittedFormResponse,n,!1);break;case a.CloseReasons.finished:case a.CloseReasons.skip:case a.CloseReasons.missing:default:i.onScreenResponse({errorCode:0,childScreenSetCloseReason:e.reason,user:e.user},n,!1)}},parentData:this.data,getInstance:function(e){i._child=e},_allowMultipleInstances:!0};return t&&(r.startScreen=t),this.hideScreenSetContainer(),this.isModal?r.newModal=!0:r.containerID=this._elChildContainer.id,window.gigya[y.namespace][y.showScreenSetName](r),!0},n.prototype.switchScreen=function(e,t,n){var i,r=e.split("/");return r.length>1&&(i=r.shift()),e=r.join("/"),i!==this.params.screenSet||(i=null,e)?i?this.switchToChildScreenSet(i,e,n):this.switchToLocalScreen(e,t,n):(this.warn('Attempt to open screen-set "'+i+'" from within the same screen-set, without specifing screen to move to.'),!1)},n.prototype.switchToLocalScreen=function(e,n,i){var o=this;if(t.EndFlowScreens[e])return this.endFlow(n,i,t.EndFlowScreens[e]),!0;if(e===y.stayOnScreen)return!0;if(this._currentScreen&&this._currentScreen.ID===e)return!1;if(window.gigya.logger.info("switching to screen: "+e),this._nextScreen=this._screens[e],!this._nextScreen)return this.warn('Missing screen "'+e+'"'),this.hide(a.CloseReasons[a.CloseReasons.missing]),!1;this.data.finalizeRegistrationNeeded&&!this._nextScreen.haveForms()&&this.endFlow(n,i,a.CloseReasons.finished),this._currentScreen||this.setNextScreenSize();var s=!1,l=this._nextScreen.getExtraProfileFields(!1).join(","),c=n;this.data.neededData=this._nextScreen.getNeededData(c);var u=this.getApiData(),d=this.prepareCallback(function(e){return o.onApiData(e,c)});return window.gigya.logger.info("required data for the screen:",this.data.neededData),r.ForEachProp(this.data.neededData,function(e,t){if(window.gigya.utils.validation.isExplicitFalse(e.cache)&&u&&delete u[t],!u[t]||"getAccountInfo"===t&&""!==l){u[t]&&delete u[t],o.dimScreenSet(),s=!0;var n={callback:d};e.responseHandler&&(n.callback=function(t){return o.onApiData(e.responseHandler(t),c)}),"getAccountInfo"===t&&l&&(n.extraProfileFields=l);var i=window.gigya.utils.object.expressionHelper(window.gigya.accounts).getField(t)||window.gigya.socialize[t]||window.gigya.accounts.tfa[t]||window.gigya.accounts.b2b[t],r=window.gigya.utils.object.removeUndefined(e.params);r&&r.include&&o.params&&(r.include=window.gigya.utils.stringUtils.mergeCommaSeparatedValues(r.include,o.params.include)),i(o.params,r,n)}}),s?window.gigya.logger.info("waiting for required data"):this.loadNextScreen(c),!0},n.prototype.shouldClose=function(){return this.isModal},n.prototype.loadNextScreen=function(e){var t=this,n=this._nextScreen.ID,i=window.gigya.logger.group("loading screen "+n),r=window.gigya.utils.object.removeUndefined({eventName:"beforeScreenLoad",currentScreen:this._currentScreen&&this._currentScreen.ID,form:this.data.lastSubmittedFormID,response:window.gigya.utils.object.clone(this.data.lastSubmittedFormResponse),profile:this.getProfile(),data:this.getSchemaData(),subscriptions:this.getSubScriptions(),preferences:this.getPreferences(),nextScreen:n,schema:this.getApiData().getSchema}),o=this.dispatchPluginEvent(r.eventName,r);if(this.undimScreenSet(),o){this.setNextScreenSize(this._nextScreen),this._elContainer.innerHTML="",this._currentScreen&&(window.gigya.logger.debug("unlinking current screen: "+this._currentScreen.ID),this._currentScreen.unlinkInstanceElement(),this._currentScreen=null);var a=this.prepareNextScreen();this._nextScreen.performAutoSkip(e).then(function(e){if(e){window.gigya.logger.info("auto skipping screen: "+t._nextScreen.ID),t._nextScreen.undimScreen(),t._nextScreen.unlinkInstanceElement();t._screenSet.onScreenResponse({errorCode:0,autoSkip:!0},e)}else{a.style.display="",t._elContainer&&t._elContainer.parentNode&&t._elContainer.parentNode.removeChild(t._elContainer),t.container.appendChild(a),t._elContainer=a,t._currentScreen=t._nextScreen,t._nextScreen=null,t._currentScreen.resetLastConditionalValues(),t._currentScreen.evaluateConditionalAttributes();var r=t._currentScreen.instanceElement?t._currentScreen.instanceElement.offsetWidth+"px":"";t.setCaption(t._currentScreen.caption,r),t.showScreenSetContainer();var o=window.gigya.utils.object.removeUndefined({eventName:"afterScreenLoad",currentScreen:n,form:t.data.lastSubmittedFormID,response:window.gigya.utils.object.clone(t.data.lastSubmittedFormResponse),profile:t.getProfile(),preferences:t._screenSet.getPreferences(),data:t.getSchemaData()});t.dispatchPluginEvent(o.eventName,o),i.end()}})}},n.prototype.prepareNextScreen=function(){window.gigya.logger.info("preparing next screen: "+this._nextScreen.ID);var e=document.createElement("div"),t=document.createElement("div");return r.ForEach(this._elContainer.attributes,function(e){return t.setAttribute(e.name,e.value)}),t.appendChild(e),document.body.appendChild(t),this._nextScreen.placeContentInElement(e),u.TemplateElement.prepareTemplateInstances(t),this._nextScreen.linkInstanceElement(t),t.style.display="none",t},n.prototype.setCaption=function(e,t){!this._captionElement||!this.isModal&&this._child||(e?this._captionElement.style.display="":this.isModal||(this._captionElement.style.display="none"),this._captionElement.innerHTML=e||"&nbsp;",this.isModal||this.isMobileUI||void 0===t||(this._captionElement.style.width=t))},n.prototype.setNextScreenSize=function(e){var n,i;if(this._elContainer.style.display="",e&&(n=e.width,i=e.height,!n||!i)){var o=document.createElement("div");e.placeContentInElement(o),window.gigya.utils.DOM.addClassToElement(o,t.ScreenSet_CONSTS.calculateSizeClass),window.gigya.utils.DOM.setSize(o,n,i),this.container.appendChild(o);var a=window.gigya.global.getBordersAndPaddings(o);n||(n=String(o.offsetWidth+Math.ceil(a.w)+30)),i||(i=String(o.offsetHeight+1)),o.parentNode.removeChild(o)}if(n)if(this.isMobileUI||!this.isModal&&this.isResponsive){var s="auto"==n?"none":""+((""+n).indexOf("%")>0?n:n+"px");this._elContainer.style.maxWidth=s,(window.gigya.localInfo.isIE7||window.gigya.localInfo.isIE8||window.gigya.localInfo.isIE&&window.gigya.localInfo.quirksMode)&&(this._elContainer.style._width=s)}else this.getPluginStyle()==h.PluginStyle.legacy&&r.getUnitMeasurementType(n)==r.UnitMeasurementType.percentage||window.gigya.utils.DOM.setSize(this._elContainer,n,void 0);this.isModal&&this.isMobileUI},n.prototype.shouldFinalizeFlow=function(e){return!this._isChild&&this.endFlowIsPending()&&e!==a.CloseReasons.cancel},n.prototype.doesScreenHaveForms=function(e){return e&&this._screens[e]&&this._screens[e].haveForms()},n.prototype.dimScreenSet=function(){this._loadingIndicator&&this._loadingIndicator.show()},n.prototype.undimScreenSet=function(){this._loadingIndicator&&this._loadingIndicator.hide()},n.prototype.handlePendingErrors=function(e,t){return i.__awaiter(this,void 0,void 0,function(){var n,r;return i.__generator(this,function(i){switch(i.label){case 0:return n=c.PendingErrorAttributes[e.errorCode]||{},window.gigya.logger.info("screenset routing error code "+e.errorCode+" --\x3e "+n.name),n.nextScreen?[4,n.nextScreen(t)]:[3,2];case 1:r=i.sent(),i.label=2;case 2:return r?(n.requiresFinalize?this.data.finalizeRegistrationNeeded=!0:n.resetFinalizeNeededState&&(this.data.finalizeRegistrationNeeded=!1),[2,this.switchScreen(r,e,t)]):(this._isChild?this.hide(a.CloseReasons[a.CloseReasons.pendingError],e):window.gigya.logger.warn("Missing ScreenSet attribute "+n.name+" for pending error: "+e.errorCode),[2,!1])}})})},n.prototype.endFlowIsPending=function(){return this.data.finalizeRegistrationNeeded&&this.data.regToken},n.prototype.endFlow=function(e,t,n){var i=this;if(window.gigya.logger.info("ending screenset flow"),n===a.CloseReasons.skip&&t&&t.onSkipped&&t.onSkipped(e),this.shouldFinalizeFlow(n)){void 0!==this.data.extraEventData.allowAccountsLinking&&(this.params.allowAccountsLinking=this.data.extraEventData.allowAccountsLinking);var r=this.data.regToken||this.params.regToken;this.removeRegToken(),window.gigya.logger.info("screenset finalizing registration"),window.gigya.accounts.finalizeRegistration(this.params,{include:window.gigya.utils.stringUtils.mergeCommaSeparatedValues("profile,data,emails,subscriptions,preferences",this._screenSet.params.include),dontHandleScreenSet:!0,regToken:r,callback:function(e){0==e.errorCode?(window.gigya.logger.info("registration finalized - clearing cache"),i.data.finalizeRegistrationNeeded=!1,i.data.apiData={}):(window.gigya.logger.info("registration failed finalizing - re-using existing regToken"),i.data.regToken=i.params.regToken=r),i.onScreenResponse(e,t,!0)}})}else this.hide(a.CloseReasons[n],e)},n.prototype.resizeModal=function(t){this.getPluginStyle()!==h.PluginStyle.legacy?(t.height&&(this._elContainer.style.height=t.height),t.width&&(this._elContainer.style.width=t.width)):(r.getUnitMeasurementType(t.width)==r.UnitMeasurementType.percentage&&(delete t.width,this._elContainer.style.width=""),r.getUnitMeasurementType(t.height)==r.UnitMeasurementType.percentage&&(delete t.height,this._elContainer.style.height="")),e.prototype.resizeModal.call(this,t)},n.prototype.resizePlugin=function(e,t){this.onViewportSizeChanged()},n.prototype.onViewportSizeChanged=function(e,t){this._currentScreen&&this._currentScreen.evaluateConditionalAttributes()},n.prototype.showScreenSetContainer=function(){this._modalDialog?(window.gigya.utils.DOM.removeClassFromElement(this._modalDialog.getModalDialogContainer(),t.ScreenSet_CONSTS.gigyaHidden),this._modalDialog.showAll()):(window.gigya.utils.DOM.removeClassFromElement(this._elContainer,t.ScreenSet_CONSTS.gigyaHidden),window.gigya.utils.DOM.addClassToElement(this._elChildContainer,t.ScreenSet_CONSTS.gigyaHidden))},n.prototype.hideScreenSetContainer=function(){this._modalDialog?(this._modalDialog.hideAll(),window.gigya.utils.DOM.addClassToElement(this._modalDialog.getModalDialogContainer(),t.ScreenSet_CONSTS.gigyaHidden)):(window.gigya.utils.DOM.addClassToElement(this._elContainer,t.ScreenSet_CONSTS.gigyaHidden),window.gigya.utils.DOM.removeClassFromElement(this._elChildContainer,t.ScreenSet_CONSTS.gigyaHidden))},n.prototype.getLangForScreenSet=function(){return this.params._explicitLang?this.params.lang:window.gigya.thisScript.lang.originalLang},n.CACHE=window.gigya.__screenSetPluginCache=window.gigya.__screenSetPluginCache||{},n.CONSTS=t.ScreenSet_CONSTS,n}(window.gigya._.plugins.BasePlugin);t.ScreenSetPlugin=S},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(9),a=n(33);t.LoginForm_CONSTS={gigyaClass:"gigya-login-form"},r.DeepFreeze(t.LoginForm_CONSTS);var s=function(e){function n(t,n,i){return e.call(this,t,n,i)||this}return i.__extends(n,e),n.prototype.specialFields=function(){return window.gigya.utils.object.merge([e.prototype.specialFields.call(this),{loginID:!0,password:!0,captchaText:!0,captchaToken:!0}])},n.prototype.submitApi=function(){return window.gigya.accounts.login},n.prototype.getErrorKey=function(t){return 401030===t.errorCode?"old_password_used":e.prototype.getErrorKey.call(this,t)},n.prototype._getSubmitApiParams=function(t){return t=a.LoginModes.standard.filterParams(t),e.prototype._getSubmitApiParams.call(this,t)},n.prototype.defaultSubmitParams=function(){return window.gigya.utils.object.merge([e.prototype.defaultSubmitParams.call(this),{loginMode:a.LoginModes.standard.name,include:window.gigya.utils.stringUtils.mergeCommaSeparatedValues("profile,data,emails,subscriptions,preferences",this._screenSet.params.include)}])},n.CONSTS=t.LoginForm_CONSTS,n}(o.BaseForm);t.LoginForm=s,o.BaseForm.addFormToLibrary(s)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(9);t.RegisterForm_CONSTS={gigyaClass:"gigya-register-form"},r.DeepFreeze(t.RegisterForm_CONSTS);var a=function(e){function n(t,n,i){return e.call(this,t,n,i)||this}return i.__extends(n,e),n.prototype.requiredFields=function(){var t=e.prototype.requiredFields.call(this);return(t=window.gigya.utils.object.merge([t,this.specialFields()])).username=t.email=!0,t},n.prototype.prePopulateDataFrom=function(){return["getAccountInfo","getAccountInfo.profile","getAccountInfo.loginIDs"]},n.prototype.getNeededData=function(){var t=this;return window.gigya.utils.object.merge([e.prototype.getNeededData.call(this),{initRegistration:{cache:!1,params:{},responseHandler:function(e){return window.gigya.logger.info("clearing account info from screenset cache"),delete t._screenSet.getApiData().getAccountInfo,e}},getSchema:{params:{}}}])},n.prototype.schemaValidated=function(){return!0},n.prototype.specialFields=function(){return window.gigya.utils.object.merge([e.prototype.specialFields.call(this),{username:!0,email:!0,password:!0,passwordRetype:!0,secretQuestion:!0,secretAnswer:!0,captchaText:!0,captchaToken:!0,regSource:!0,siteUID:!0}])},n.prototype.performSubmit=function(t){return this._screenSet.doesScreenHaveForms(this.successScreen)?this._screenSet.data.finalizeRegistrationNeeded=!0:t.finalizeRegistration=!0,e.prototype.performSubmit.call(this,t)},n.prototype.submitApi=function(){return window.gigya.accounts.register},n.prototype.queryStringToSubmitParamMap=function(){return{gig_email:"email"}},n.prototype.defaultSubmitParams=function(){return window.gigya.utils.object.merge([e.prototype.defaultSubmitParams.call(this),{include:window.gigya.utils.stringUtils.mergeCommaSeparatedValues("profile,data,emails,loginIDs,subscriptions,preferences",this._screenSet.params.include)}])},n.CONSTS=t.RegisterForm_CONSTS,n}(o.BaseForm);t.RegisterForm=a,o.BaseForm.addFormToLibrary(a)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(22);t.Translated_CONSTS={selector:"*[data-translation-key]",translationKeyAttribute:"data-translation-key"},r.DeepFreeze(t.Translated_CONSTS);var a=function(e){function n(t,n){return e.call(this,t,n,!1)||this}return i.__extends(n,e),n.prototype.linkInstanceElement=function(t){e.prototype.linkInstanceElement.call(this,t),this.updateTranslation()},n.prototype.unlinkInstanceElement=function(){e.prototype.unlinkInstanceElement.call(this)},n.prototype.evaluateConditionalAttributes=function(){e.prototype.evaluateConditionalAttributes.call(this),this.renderedTranslationKey!==this.instanceElement.getAttribute(n.CONSTS.translationKeyAttribute).toLowerCase()&&this.updateTranslation()},n.prototype.getTranslationKey=function(){return this.instanceElement.getAttribute(n.CONSTS.translationKeyAttribute).toLowerCase()},n.prototype.updateTranslation=function(){this.renderedTranslationKey=this.getTranslationKey(),this._screenSet.params.customLang&&this._screenSet.params.customLang[this.renderedTranslationKey]&&(this.unlinkWidgets(),this.instanceElement.innerHTML=this._screenSet.params.customLang[this.renderedTranslationKey],this.linkWidgets())},n.CONSTS=t.Translated_CONSTS,n}(o.BaseScreenWidget);t.TranslatedWidget=a,o.BaseScreenWidget.addWidgetToLibrary(a)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.warn=function(e,t){"object"==typeof console&&console.warn&&console.warn("Gigya Screenset ("+e+") - "+t)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(15),a=n(17),s=n(86);t.ArrayManager_CONST={selector:".gigya-composite-control-array-widget",containerSelector:".gigya-array-manager",formElSelector:"input,select,.gigya-array-manager",addButtonSelector:"button.gigya-array-add-btn",removeButtonSelector:"button.gigya-array-remove-btn",itemWrapperClass:"gigya-array-template",inputsWrapperClass:"inputs-wrapper",buttonsWrapperClass:"buttons-wrapper",templateItemAttr:"data-array-template-id",arrayManagerRootAttr:"data-array-manager-root",deleteDisabledClass:"disable-delete",indexMatcher:/\[([0-9])]/g},r.DeepFreeze(t.ArrayManager_CONST);var l=0,c=function(){function e(e,n){this.arrayManager=e,this._index=n,this._container=document.createElement("div"),this._inputsWrapper=document.createElement("div"),this._buttonsWrapper=document.createElement("div"),this.onDispose=[],this.screenWidgets=[],this.formInputs=[],this.formWidgets=[],this.boundedErrors=[],this._form=e._form,this._screen=e._screen,this._uniqueItemID="array-template-"+Date.now()+"-"+n,this._buttonsWrapper.id=this._uniqueItemID+"_"+t.ArrayManager_CONST.buttonsWrapperClass,window.gigya.utils.DOM.addClassToElement(this._buttonsWrapper,t.ArrayManager_CONST.buttonsWrapperClass),window.gigya.utils.DOM.addClassToElement(this._inputsWrapper,t.ArrayManager_CONST.inputsWrapperClass),this._inputsWrapper.appendChild(e.createInputsWrapper());var i=e.attachRemoveButton(this);this._buttonsWrapper.appendChild(i),this._container.appendChild(this._inputsWrapper),this._container.appendChild(this._buttonsWrapper),window.gigya.utils.DOM.addClassToElement(this._container,t.ArrayManager_CONST.itemWrapperClass),this._container.setAttribute(t.ArrayManager_CONST.templateItemAttr,this._uniqueItemID);var r=this._getAllElements().filter(function(e){return Boolean(e.id)}).reduce(function(e,t){return e[t.id]=t.id+"_"+ ++l,e},{});window.gigya.utils.DOM.manipulateAttributes(this._getAllElements(),new RegExp(Object.keys(r).join("|"),"g"),function(e){return r[e]}),this._indexNameBindings()}return e.prototype.getID=function(){return this._uniqueItemID},e.prototype.getIndex=function(){return this._index},e.prototype.setIndex=function(e){this._index=e,this.update()},e.prototype.attachAddButton=function(e){this._buttonsWrapper.insertBefore(e,this._buttonsWrapper.firstChild)},e.prototype.linkInstance=function(){this._linkToScreen(),this._linkToForm()},e.prototype.getContainer=function(){return this._container},e.prototype.dispose=function(){this.onDispose.forEach(function(e){return e()}),this._unlinkScreen(),this._unlinkForm(),this._container.parentNode&&this._container.parentNode.removeChild(this._container)},e.prototype.update=function(){this._indexNameBindings(),this._screen.removeSpecificErrorBinds(this.boundedErrors),this.boundedErrors=this._screen.addSpecificErrorBinds(d(this._inputsWrapper)),this._form.registerBoundedErrorElements(),this.formInputs.forEach(function(e){return e.update()}),this.formWidgets.forEach(function(e){return e.update()})},e.prototype._getAllElements=function(){return Array.prototype.slice.call(this._inputsWrapper.querySelectorAll("*"))},e.prototype._indexNameBindings=function(){var e=this,n=this.arrayManager.getFieldsNames().concat(this.arrayManager.getStoreAsArrayRoots()),i=this.arrayManager.getRootName(),r=i.replace(t.ArrayManager_CONST.indexMatcher,""),o=n.filter(function(e){return Boolean(e)}).map(function(e){return i.replace(t.ArrayManager_CONST.indexMatcher,"(?:\\[[0-9]])?")+"(?:\\[[0-9]])?"+e.substr(r.length)}).join("|");window.gigya.utils.DOM.manipulateAttributes(this._getAllElements(),new RegExp(o,"g"),function(t){return p(t,i,e._index)},function(e){return/^name|^data-|^gigya/i.test(e.name)})},e.prototype._linkToScreen=function(){this.screenWidgets=this._screen.addDynamicWidgets(this._container),this.boundedErrors=this._screen.addSpecificErrorBinds(d(this._inputsWrapper))},e.prototype._unlinkScreen=function(){this._screen.removeDynamicWidgets(this.screenWidgets)},e.prototype._linkToForm=function(){this.formInputs=this._form.addDynamicInputs(this._inputsWrapper),this._form.registerBoundedErrorElements(),this.formWidgets=this._form.addDynamicWidgets(this._inputsWrapper)},e.prototype._unlinkForm=function(){this._form.removeDynamicWidgets(this.formWidgets),this._form.registerBoundedErrorElements(),this._form.removeDynamicInputs(this.formInputs)},e}();t.ArrayManagerItem=c;var u=function(e){function n(n,i){var r=e.call(this,n,i,!1)||this;r.onDispose=new Array,r._items=[];var a=r.templateElement.querySelectorAll("template");return r._inputsTemplate=a[0],r._buttonsTemplate=a[1],!r._inputsTemplate&&console&&console.warn&&console.warn("gigya: Array Manager is provided with invalid template"),r._minimumItems=Number(r.params.minimum)||1,r._fieldsNames=Array.prototype.slice.call(r._inputsTemplate.content.querySelectorAll(t.ArrayManager_CONST.formElSelector)).map(function(e){return r._form.getNormalizedFieldName(e.getAttribute("name"))}),r._storeAsArrayRoots=Array.prototype.slice.call(r._inputsTemplate.content.querySelectorAll("["+o.FormInput_CONSTS.arrayRootAttribute+"]")).map(function(e){return e.getAttribute(o.FormInput_CONSTS.arrayRootAttribute)}),r}return i.__extends(n,e),n.prototype.createInputsWrapper=function(){return document.importNode(this._inputsTemplate.content,!0)},n.prototype.attachRemoveButton=function(e){var t=this,n=function(){return t.removeItem(e.getID())},i=this._getButton("remove",n);return e.onDispose.push(function(){return i.removeEventListener("click",n)}),i},n.prototype.linkInstanceElement=function(n){var i=this;e.prototype.linkInstanceElement.call(this,n),this._arrayContainer=this.instanceElement.querySelector(t.ArrayManager_CONST.containerSelector);var r=function(){return i.addItem()};this._addButton=this._getButton("add",r),this.onDispose.push(function(){return i._addButton.removeEventListener("click",r)}),this._arrayRootName=this._arrayContainer.getAttribute("name");var o=this._form.prePopulateData(),a=window.gigya.utils.object.getPropertyBySerializedName(o,this._arrayRootName,!1),s=this._minimumItems;a&&a instanceof Array&&(s=Math.max(this._minimumItems,a.length));for(var l=0;l<s;l++)this.addItem()},n.prototype.unlinkInstanceElement=function(){var t=this;this._items.forEach(function(e){t._screen.removeSpecificErrorBinds(e.boundedErrors),t._form.registerBoundedErrorElements(),e.dispose()}),this._items=[],this.onDispose.forEach(function(e){return e()}),e.prototype.unlinkInstanceElement.call(this)},n.prototype.addItem=function(){var e=new c(this,this._items.length);this._arrayContainer.appendChild(e.getContainer()),e.attachAddButton(this._addButton),e.linkInstance(),this._items.push(e),this._applyCurrentState()},n.prototype.removeItem=function(e){var t=-1,n=null;r.Some(this._items,function(i,r){return i.getID()===e&&(t=r,n=i,!0)}),n&&(this._screen.removeSpecificErrorBinds(n.boundedErrors),this._form.registerBoundedErrorElements(),this._items.splice(t,1),this._reindexItems(t),n.dispose(),this._items.length>0&&this._items[this._items.length-1].attachAddButton(this._addButton),this._applyCurrentState())},n.prototype.getFieldsNames=function(){return this._fieldsNames},n.prototype.getStoreAsArrayRoots=function(){return this._storeAsArrayRoots},n.prototype._reindexItems=function(e){for(var t=e;t<this._items.length;++t)this._items[t].setIndex(t)},n.prototype._applyCurrentState=function(){this._items.length<=this._minimumItems?window.gigya.utils.DOM.addClassToElement(this._arrayContainer,t.ArrayManager_CONST.deleteDisabledClass):window.gigya.utils.DOM.removeClassFromElement(this._arrayContainer,t.ArrayManager_CONST.deleteDisabledClass),this._screenSet.centerModal()},n.prototype.getRootName=function(){return this._arrayRootName},n.prototype.update=function(){this._arrayRootName=this._arrayContainer.getAttribute("name"),this._items.forEach(function(e){return e.update()})},n.prototype._getButton=function(e,n){var i=document.importNode(this._buttonsTemplate.content.querySelectorAll(t.ArrayManager_CONST[e+"ButtonSelector"])[0],!0);return n&&i.addEventListener("click",n),i},n.CONSTS=t.ArrayManager_CONST,n}(a.BaseFormWidget);function d(e){var t=[],n=Array.prototype.slice.call(e.querySelectorAll("["+s.ErrorDisplayElement_CONSTS.boundedTo+"]")).map(function(e){return e.getAttribute(s.ErrorDisplayElement_CONSTS.boundedTo)});return r.ForEach(s.ErrorDisplayElement_CONSTS.gigyaClasses,function(i){var r=[];n.forEach(function(e){r.push("."+i+"["+s.ErrorDisplayElement_CONSTS.boundedTo+'="'+e+'"]')}),t=t.concat(Array.prototype.slice.call(e.querySelectorAll(r.join(","))))}),t}function p(e,n,i){if(!e||!n)return"";e=e.replace(t.ArrayManager_CONST.indexMatcher,"");var r=n.replace(t.ArrayManager_CONST.indexMatcher,"");return n+"["+i+"]."+e.substr(r.length+1)}t.ArrayManagerWidget=u,a.BaseFormWidget.addWidgetToLibrary(u),t.getErrorBindings=d,t.addIndex=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(15),a=n(141),s=n(26),l=n(51);t.BasePasswordInput_CONSTS={showPasswordStrength:"show-password-strength"},r.DeepFreeze(t.BasePasswordInput_CONSTS);var c=function(e){function n(n){var i=e.call(this,n)||this;return i.showPasswordStrengthConditionalExists=!1,i.showPasswordStrengthAttribute="",r.ForEach(i.conditionalExpressions,function(e){e.attributeName==t.BasePasswordInput_CONSTS.showPasswordStrength&&(i.showPasswordStrengthConditionalExists=!0,i.showPasswordStrengthConditional=e)}),i.showPasswordStrengthAttribute=window.gigya._.plugins.utils.DOM.getAttribute(i.templateElement,t.BasePasswordInput_CONSTS.showPasswordStrength),null!=i.showPasswordStrengthAttribute&&i.showPasswordStrengthAttribute.length?(i.passwordStrengthOrientation=a.BubbleOrientations[i.showPasswordStrengthAttribute],void 0===i.passwordStrengthOrientation&&(i.passwordStrengthOrientation=i._screenSet.isModal?a.BubbleOrientations.left:a.BubbleOrientations.up),i.showPasswordStrength=void 0!==i.passwordStrengthOrientation&&i.passwordStrengthOrientation!=a.BubbleOrientations.none||i.showPasswordStrengthConditionalExists):i.showPasswordStrength=!1,i}return i.__extends(n,e),n.prototype.linkInstanceElement=function(t){if(e.prototype.linkInstanceElement.call(this,t),this.showPasswordStrength){var n="";n=this.showPasswordStrengthAttribute&&void 0!==this.passwordStrengthOrientation&&this.passwordStrengthOrientation!==a.BubbleOrientations.none?window.gigya.utils.templates.fill(this._screenSet.getTemplates().inlinedPasswordStrength,{orientation:a.BubbleOrientations[this.passwordStrengthOrientation]}):window.gigya.utils.templates.fill(this._screenSet.getTemplates().inlinedPasswordStrength,{orientation:a.BubbleOrientations[a.BubbleOrientations.none]}),this.instanceElement.insertAdjacentHTML("afterend",n);var i=this.instanceElement.nextElementSibling?this.instanceElement.nextElementSibling:this.instanceElement.nextSibling;if(this.passwordStrengthWidget=new a.PasswordStrengthWidget(this._form,i),this.showPasswordStrengthConditionalExists){this.passwordStrengthWidget.templateElement.setAttribute(l.Screen_CONSTS.conditionalAttributePrefix+"data-bubble-orientation",this.showPasswordStrengthConditional.condition);var r={attributeName:"data-bubble-orientation",condition:this.showPasswordStrengthConditional.condition,defaultValue:this.showPasswordStrengthConditional.defaultValue,lastAttributeValue:this.showPasswordStrengthConditional.defaultValue,isWidgetParamTag:!1};this.passwordStrengthWidget.conditionalExpressions.push(r)}this.passwordStrengthWidget._passwordField=this,s.TemplateElement.prepareTemplateInstanceElement(i,!1),this.passwordStrengthWidget.linkInstanceElement(i.parentElement)}},n.prototype.unlinkInstanceElement=function(){this.showPasswordStrength&&(this.passwordStrengthWidget.unlinkInstanceElement(),this.passwordStrengthWidget.unlinkTemplate(),this.passwordStrengthWidget=null),e.prototype.unlinkInstanceElement.call(this)},n.prototype.getTruncatedValue=function(e){return String(e)},n.prototype.validateValue=function(t,n,i){var r=this;e.prototype.validateValue.call(this,t,n,function(e){if(0!==e.errorCode)return i(e);if(r.isPasswordSchemaValidated()){var t=r._screenSet.getApiData();if(t.getPolicies&&t.getPolicies.passwordComplexity){var o=t.getPolicies.passwordComplexity||{},s=a.getPasswordStrengthData(n);if(!a.isPasswordStrengthValid(n,s,o))return i({errorCode:400009,field:r})}}i(e)})},n.prototype.isPasswordSchemaValidated=function(){return this._form.isPasswordSchemaValidated()},n.prototype.evaluateConditionalAttributes=function(){e.prototype.evaluateConditionalAttributes.call(this),this.passwordStrengthWidget&&this.passwordStrengthWidget.evaluateConditionalAttributes()},n.prototype.isPasswordStrengthWidgetBound=function(){return this.showPasswordStrength},n}(o.FormInput);t.BasePasswordInput=c;var u=function(e){function t(t){var n=e.call(this,t)||this;return n._form._passwordInputs.push(n),n}return i.__extends(t,e),t.FORM_TYPE_CRITERIA=function(e){return"password"===e.fieldName},t.prototype.isPasswordSchemaValidated=function(){return e.prototype.isPasswordSchemaValidated.call(this)},t}(c);t.PasswordInput=u,o.FormInput.addInputToLibrary(u);var d=function(e){function t(t){var n=e.call(this,t)||this;return n._form._passwordInputs.unshift(n),n}return i.__extends(t,e),t.FORM_TYPE_CRITERIA=function(e){return"newPassword"===e.fieldName},t}(c);t.NewPasswordInput=d,o.FormInput.addInputToLibrary(d)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),o=n(2),a=n(17);t.DisplayModes={policy:{hasMinimumRequirements:!0,hasStrengthMeter:!1,getTemplate:function(e){return e.passwordStrength_minimumRequirements}},meter:{hasMinimumRequirements:!1,hasStrengthMeter:!0,getTemplate:function(e){return e.passwordStrength_strengthMeter}},combined:{hasMinimumRequirements:!0,hasStrengthMeter:!0,getTemplate:function(e){return e.passwordStrength_strengthMeter+e.passwordStrength_minimumRequirements}}},function(e){e[e.right=0]="right",e[e.left=1]="left",e[e.up=2]="up",e[e.down=3]="down",e[e.none=4]="none"}(i=t.BubbleOrientations||(t.BubbleOrientations={})),o.DeepFreeze(i),t.PasswordStrengthWidget_CONSTS={selector:"div.gigya-password-strength",bubbleClass:"gigya-password-strength-bubble",mobileClass:"mobile-bubble",desktopClass:"desktop-bubble",displayMode:"data-display-mode",bubble:"data-on-focus-bubble",bubbleOrientation:"data-bubble-orientation"},o.DeepFreeze(t.PasswordStrengthWidget_CONSTS);var s=function(e){function n(n,r){var o=e.call(this,n,r)||this;return o.bubbleLastTop="",o.originalClass=r.className,o.originalStyle=r.getAttribute("style"),o.originalDisplay=r.style.display,r.style.display="none",o._passwordField=n.getField("newPassword")||n.getField("password"),o._passwordField?(o.getText=function(e){return o._screenSet.getText(e)},o.displayMode=t.DisplayModes[r.getAttribute(t.PasswordStrengthWidget_CONSTS.displayMode)]||t.DisplayModes.combined,o.template=window.gigya.utils.templates.fill(o._screenSet.getTemplates().passwordStrength,{content:o.displayMode.getTemplate(o._screenSet.getTemplates())}),o.isBubble=Boolean(r.getAttribute(t.PasswordStrengthWidget_CONSTS.bubble)),o.isBubble&&(o.bubbleOrientation=i[r.getAttribute(t.PasswordStrengthWidget_CONSTS.bubbleOrientation)],void 0===o.bubbleOrientation&&(o.bubbleOrientation=o._screenSet.isModal?i.left:i.up),o.bubbleID=o._screenSet.params.containerID+"_bubble",o.onBlur=function(){return o.hideBubble()},o.onFocus=function(){return o.showBubble()},o.onScroll=function(){var e=window.gigya.global.divGMBalloon;e&&e.style.top==o.bubbleLastTop&&o.refreshBubble()}),o.fnKeyUp=function(){return o.onPasswordChange()},window.gigya.utils.DOM.addEventListener(o._passwordField,"keyup",o.fnKeyUp),o.isBubble&&(o._passwordField.addEventListener("focus",o.onFocus),o._passwordField.addEventListener("blur",o.onBlur),window.gigya.utils.DOM.addEventListener(document,"scroll",o.onScroll)),o._screenSet.onRefreshExternalComponentsEvent().add(function(){o.refreshBubble()}),o):(o.warn(t.PasswordStrengthWidget_CONSTS.selector+"'s form is missing password field to bound to"),o)}return r.__extends(n,e),n.prototype.unlinkTemplate=function(){window.gigya.utils.DOM.removeEventListener(document,"scroll",this.onScroll),this._passwordField&&(this.isBubble&&(this._passwordField.removeEventListener("blur",this.onBlur),this._passwordField.removeEventListener("focus",this.onFocus)),this.hideBubble(),window.gigya.utils.DOM.removeEventListener(this._passwordField,"keyup",this.fnKeyUp)),e.prototype.unlinkTemplate.call(this)},n.prototype.showBubble=function(){this.instanceElement.style.display="";var e=this.instanceElement.offsetWidth||250;this.instanceElement.style.display="none";var n=t.PasswordStrengthWidget_CONSTS.bubbleClass+" "+(this._screenSet.isMobileUI?t.PasswordStrengthWidget_CONSTS.mobileClass:t.PasswordStrengthWidget_CONSTS.desktopClass),i=document.createElement("div");i.setAttribute("style",this.instanceElement.getAttribute("style")),"none"===i.style.display&&(i.style.display="");var r='<div id="'+this.bubbleID+'_content" class="'+this.instanceElement.className+'" style="'+i.getAttribute("style")+'">'+this.getPasswordBubbleContent()+"</div>";window.gigya.global.putGMBalloonNextTo(this._passwordField.instanceElement,r,null,e,null,!0,this.bubbleID,!0,this.getBubbleOrientations(),n),this.isBubbleVisible=!0,this.bubbleLastTop=window.gigya.global.divGMBalloon.style.top},n.prototype.getBubbleOrientations=function(){var e=[i[this.bubbleOrientation]],t=e[0],n=i[i.up],r=i[i.down];return void 0===t?t=n:t!==n&&e.push(n),t!==r&&e.push(r),e},n.prototype.hideBubble=function(){window.gigya.global.removeGMBalloon(),this.isBubbleVisible=!1},n.prototype.getPasswordBubbleContent=function(){var e={TEXT:this.getText},t=c(String(this._passwordField.getValue())),n=this._screenSet.getApiData(),i=n.getPolicies?n.getPolicies.passwordComplexity:null;if(i||(i={}),i.minLength=i.minLength||0,i.minCharGroups=i.minCharGroups||0,this.displayMode.hasStrengthMeter){var r=0,o="too_weak";u(String(this._passwordField.getValue()),t,i)&&(o="weak",t.length>4&&(r+=40),t.length>5&&(r+=21),t.length>7&&(r+=18),t.charGroups>1&&(r+=21),t.charGroups>2&&(r+=17),t.charGroups>3&&(r+=23),r>60&&(o="fair"),r>80&&(o="strong"),r>100&&(o="very_strong")),e.score=r,e.scoreClass="gigya-passwordStrength-"+o,e.scoreText=this._screenSet.getText(o),e.barIndicatorClass="gigya-passwordStrength-bar-"+o}if(this.displayMode.hasMinimumRequirements){var a=[];if(i.minLength>0){var s=this._screenSet.getText("num_characters_total","%num",i.minLength);s&&a.push(s)}if(i.minCharGroups>0){var l=this._screenSet.getText("num_of_the_following_groups","%num",i.minCharGroups);l&&a.push(l)}if(e.requirements="",a.length>0){var d=a.pop();e.requirements=this._screenSet.getText("password_must_contain_at_least")+" ",a.length>0&&(e.requirements+=a.join(", ")+" "+this._screenSet.getText("and")+" "),e.requirements+=d}e.requirements=window.gigya.pluginUtils.text.fixTextWidows(e.requirements)}return window.gigya.utils.templates.fill(this.template,e)},n.prototype.onPasswordChange=function(){var e=this.getPasswordBubbleContent();this.isBubble?document.getElementById(this.bubbleID+"_content").innerHTML=e:(this.instanceElement.innerHTML=e,this.instanceElement.style.display=this.originalDisplay)},n.prototype.evaluateConditionalAttributes=function(){e.prototype.evaluateConditionalAttributes.call(this),this.isBubble&&(this.bubbleOrientation=i[this.instanceElement.getAttribute(t.PasswordStrengthWidget_CONSTS.bubbleOrientation)],void 0===this.bubbleOrientation&&(this.bubbleOrientation=this._screenSet.isModal?i.left:i.up))},n.prototype.refreshBubble=function(){this.isBubbleVisible&&this.showBubble()},n.CONSTS=t.PasswordStrengthWidget_CONSTS,n}(a.BaseFormWidget);function l(e){return e&&e.length?e.length:0}function c(e){e||(e="");var t={lower:l(e.match(/[a-z]/g)),upper:l(e.match(/[A-Z]/g)),digits:l(e.match(/\d/g)),specialChars:l(e.match(/[^\dA-Za-z]/g)),length:e.length,charGroups:0};return t.lower&&t.charGroups++,t.upper&&t.charGroups++,t.digits&&t.charGroups++,t.specialChars&&t.charGroups++,t}function u(e,t,n){if(e&&t&&n)return n.regExp?new RegExp(n.regExp).test(e):!(t.lower<n.minLowercase||t.upper<n.minUppercase||t.digits<n.minDigit||t.specialChars<n.minSpecialChars||t.charGroups<n.minCharGroups||t.length<n.minLength)}t.PasswordStrengthWidget=s,a.BaseFormWidget.addWidgetToLibrary(s),t.getPasswordStrengthData=c,t.isPasswordStrengthValid=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(65);t.BaseUploadWidget_CONSTS={setDimentionsDelay:500,uploadCheckInterval:500,uploading:"data-upload-status",uploadForm:"screenSetUploadForm"},r.DeepFreeze(t.BaseUploadWidget_CONSTS);var a=0,s=function(e){function n(n,i,r){var s=e.call(this,n,i,r)||this,l=a++;return s._uploadIframeID=s._screenSet.params.containerID+"_upload"+l+"_target",s.formDivID=s._screenSet.params.containerID+"_upload"+l+"_form",s.listenOnIframe=function(){var e=s.uploadIframe.getAttribute(t.BaseUploadWidget_CONSTS.uploading),n=o.ServerStates[e];n!==s.serverState&&s.onServerQueryEnd(s._lastQueryId,n)},s.fileInputChanged=function(){return s.onFileInputChange()},s}return i.__extends(n,e),n.prototype.onFileInputChange=function(){this.startServerQuery()},n.prototype.linkInstanceElement=function(n){var i=this;e.prototype.linkInstanceElement.call(this,n),this.instanceElement&&(this.uploadIframe=document.createElement("iframe"),this.uploadIframe.style.display="none",this.uploadIframe.id=this._uploadIframeID,this.uploadIframe.setAttribute("name",this._uploadIframeID),this.uploadIframe.setAttribute(t.BaseUploadWidget_CONSTS.uploading,o.ServerStates[o.ServerStates.NotStarted]),this.uploadIframe.setAttribute("onload","this.setAttribute('"+t.BaseUploadWidget_CONSTS.uploading+"','"+o.ServerStates[o.ServerStates.Done]+"')"),this.instanceElement.appendChild(this.uploadIframe),this._formDiv=document.createElement("div"),this._formDiv.id=this.formDivID,this._formDiv.className="gigya-attach-file-upload-form",this._formDiv.innerHTML=this.getFormHtml(),this._formDiv.style.zIndex=""+window.gigya.utils.DOM.getNextZIndex(),this.instanceElement.appendChild(this._formDiv),window.setTimeout(function(){return i.setFormDimentions()},t.BaseUploadWidget_CONSTS.setDimentionsDelay),this._uploadForm=this.getFormElement(),this.fileInput=this._uploadForm.elements._profilePhoto,window.gigya.utils.DOM.addClassToElement(this.fileInput,"gigya-attach-file-upload-file-input"),window.gigya.utils.DOM.addEventListener(this.fileInput,"change",this.fileInputChanged))},n.prototype.getFormHtml=function(){throw new Error("Not Implemented")},n.prototype.getFormElement=function(){throw new Error("Not Implemented")},n.prototype.getFileElement=function(){throw new Error("Not Implemented")},n.prototype.setFormDimentions=function(){this.instanceElement&&0!=this.instanceElement.offsetHeight&&(this._formDiv.style.height=this.instanceElement.offsetHeight+"px",this._formDiv.style.width=this.instanceElement.offsetWidth+"px")},n.prototype.unlinkInstanceElement=function(){this.instanceElement&&(this.uploadCheckInterval&&this.onServerQueryEnd(this._lastQueryId,o.ServerStates.Error),window.gigya.utils.DOM.removeEventListener(this.fileInput,"change",this.onFileInputChange),this.fileInput=null,this._uploadForm=null,this._formDiv.parentElement.removeChild(this._formDiv),this._formDiv=null,this.instanceElement.removeChild(this.uploadIframe),this.uploadIframe=null),e.prototype.unlinkInstanceElement.call(this)},n.prototype.stopUploadCheck=function(){this.uploadCheckInterval&&(window.clearInterval(this.uploadCheckInterval),this.uploadCheckInterval=0)},n.prototype.serverQueryDone=function(t){this.stopUploadCheck(),e.prototype.serverQueryDone.call(this,t)},n.prototype.submitUploadForm=function(){this._uploadForm.submit()},n.prototype.startServerQuery=function(){return this._lastQueryId=e.prototype.startServerQuery.call(this),this.uploadIframe.setAttribute(t.BaseUploadWidget_CONSTS.uploading,o.ServerStates[this.serverState]),this.uploadCheckInterval||(this.uploadCheckInterval=window.setInterval(this.listenOnIframe,t.BaseUploadWidget_CONSTS.uploadCheckInterval)),this.submitUploadForm(),this._lastQueryId},n.prototype.getServerParameters=function(){var e=window.gigya.utils.object.extractProperties(this._screenSet.params,{},"APIKey|cid|oauth_token|login_token|source|sourceData|regToken");return e.authMode=e.oauth_token?"token":"cookie",window.gigya._.apiAdapters.web&&(e.login_token=window.gigya._.apiAdapters.web.tokenStore.get(e.APIKey),e.gmidTicket=window.gigya._.apiAdapter.getGmidTicket()),e.APIKey||(e.APIKey=window.gigya.thisScript.APIKey),this._screenSet.data.regToken&&(e.regToken=this._screenSet.data.regToken),e},n}(o.BaseServerWidget);t.BaseUploadWidget=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(26),o=n(64),a=n(9),s=n(2),l=n(86),c=n(22),u=n(51),d=n(25),p=function(e){function t(t,n){var i=e.call(this,n,t)||this;return i._screenSet=t,i.templateElement=n,i._errorDisplayElements={},i._profilePhotos=new Array,i._captchas=new Array,i._others=new Array,i.ID||i.warn("screen is missing an id"),/[^-_0-9a-zA-Z]/.test(i.ID)&&i.warn("screen id contains special characters that may contain special meaning"),o.ScreenOptions.call(i,n,t.screenOptions),i.prepareBoundedToFormElements(),i._forms=a.BaseForm.registerForms(i),i._widgets=c.BaseScreenWidget.registerWidgets(i),i.prepareOtherElements(),i.setCssClass(),i}return i.__extends(t,e),t.prototype.prepareBoundedToFormElements=function(){var e=this,n=new Array;t.utils.ForEach(l.ErrorDisplayElement_CONSTS.gigyaClasses,function(t){n=n.concat(Array.prototype.slice.call(e.templateElement.querySelectorAll("."+t)))}),t.utils.ForEach(n,function(t){var n=new l.ErrorDisplayElement(t,e),i=e._errorDisplayElements[n.boundedTo];i||(i=e._errorDisplayElements[n.boundedTo]=[]),i.push(n)})},t.prototype.addSpecificErrorBinds=function(e){var n=this;void 0===e&&(e=[]);var i=[];return t.utils.ForEach(e,function(e){var t=new l.ErrorDisplayElement(e,n);n._errorDisplayElements[t.boundedTo]=(n._errorDisplayElements[t.boundedTo]||[]).concat([t]),i.push(t)}),i.forEach(function(e){return e.linkInstanceElement(n.instanceElement)}),i},t.prototype.removeSpecificErrorBinds=function(e){var n=this;void 0===e&&(e=[]),t.utils.ForEach(e,function(e){delete n._errorDisplayElements[e.boundedTo],e.unlinkInstanceElement()})},t.prototype.addDynamicWidgets=function(e){var n=this,i=c.BaseScreenWidget.registerDynamicWidgets(this,e);return t.utils.ForEach(i,function(e){return e.linkInstanceElement(n.instanceElement)}),this._widgets=this._widgets.concat(i),i},t.prototype.removeDynamicWidgets=function(e){this._widgets&&this._widgets.length&&(this._widgets=this._widgets.filter(function(t){return e.indexOf(t)<0}),e.forEach(function(e){e.unlinkInstanceElement(),e.unlinkTemplate()}))},t.prototype.prepareOtherElements=function(){for(var e=t.utils.getElementsByHavingAttribute(this.templateElement,"*","id"),n=[u.Screen_CONSTS.conditionalAttributePrefix,u.Screen_CONSTS.expressionAttributePrefix],i=0,o=t.utils.getElementsByHavingAttributePrefix(this.templateElement,n,["param"]);i<o.length;i++){var a=o[i];-1===window.gigya.utils.array.indexOf(e,a)&&e.push(a)}for(var s=0,l=e;s<l.length;s++){var c=l[s];r.TemplateElement.isTemplateInstance(c)||this._others.push(new r.TemplateElement(c,this))}},t.prototype.overrideTemplateCaption=function(e){this.instanceElement.removeAttribute(u.Screen_CONSTS.expressionAttributePrefix+":"+o.ScreenOptions_CONSTS.caption),this.instanceElement.setAttribute(o.ScreenOptions_CONSTS.caption,e),this.caption=e},t.prototype.haveForms=function(){return this._forms.length||this._hasTfa},t.prototype.getFormByElement=function(e){for(var t=0,n=this._forms;t<n.length;t++){var i=n[t];if(i.instanceElement.contains(e))return i}},t.prototype.setCssClass=function(){this.cssClass=this.templateElement.getAttribute(u.Screen_CONSTS.cssClass)},t.prototype.unlinkTemplate=function(){var n=function(e){return e.unlinkTemplate()};t.utils.ForEach(this._forms,n),t.utils.ForEachProp(this._errorDisplayElements,function(e){t.utils.ForEach(e,n)}),t.utils.ForEach(this._others,n),t.utils.ForEach(this._widgets,n),e.prototype.unlinkTemplate.call(this)},t.prototype.linkInstanceElement=function(n){var i=this;if(e.prototype.linkInstanceElement.call(this,n),this.instanceElement){var r=function(e){return e.linkInstanceElement(i.instanceElement)};t.utils.ForEach(this._widgets,r),t.utils.ForEach(this._others,r),t.utils.ForEachProp(this._errorDisplayElements,function(e){t.utils.ForEach(e,r)}),t.utils.ForEach(this._forms,r)}(window.gigya.localInfo.isIE9||window.gigya.localInfo.isIE8)&&t.utils.ForEach(this._forms,function(e){e.filters.push({filterOutWidgetsToSend:function(e){return e.profile&&delete e.profile._profilePhoto,e}})})},t.prototype.placeContentInElement=function(e){t.utils.ForEach(this.templateElement.attributes,function(t){return e.setAttribute(t.name,t.value)}),e.innerHTML=this.templateElement.innerHTML},t.prototype.unlinkInstanceElement=function(){if(this.instanceElement){var n=function(e){return e.unlinkInstanceElement()};t.utils.ForEach(this._forms,n),t.utils.ForEachProp(this._errorDisplayElements,function(e){t.utils.ForEach(e,n)}),t.utils.ForEach(this._others,n),t.utils.ForEach(this._widgets,n)}e.prototype.unlinkInstanceElement.call(this)},t.prototype.getErrorMessage=function(e,t,n){return this._screenSet.getErrorMessage(e,t,n.fieldName,n.displayName)},t.prototype.dispatchEvent=function(e,t){return this._screenSet.dispatchScreenSetEvent(e,t)},t.prototype.performAutoSkip=function(e){var n=this;return new gigya.Promise(function(i){n._forms.length||i(null);var r=n._forms.length,o=!0,a=function(e){e||(o=!1),--r<=0&&i(o?n._forms[0]:null)};t.utils.ForEach(n._forms,function(t){return t.checkAutoSkip(e,a)})})},t.prototype.hideErrors=function(){var e=this;this._forms.map(function(t){return(e._errorDisplayElements[t.bindID]||[]).forEach(function(e){return e.hideError()})})},t.prototype.showErrors=function(e,n,i){var r=this,o=this._errorDisplayElements[e.bindID]||[];t.utils.ForEach(o,function(o){if(i||o.scope===l.ErrorScopes.firstError||o.scope===l.ErrorScopes.anyError||o.scope===l.ErrorScopes.allErrors){var a,s,c=new Array,u=!1;if(t.utils.ForEach(n,function(t){if(o.isErrorCodeAllowed(t.errorCode,t.errorFlags)){t.handled=!0;var n=t.customMessage||t.errorMessage;if(a||(a=t.errorCode),!n){var i=e.getField(t.fieldName);i&&(n=r._screenSet.getErrorMessage(t.errorCode,!1,i.fieldName,i.displayName))}n&&(u=!0,c.push(n))}}),u)s=o.scope===l.ErrorScopes.firstError||i?c[0]:"<ul><li>"+c.join("</li><li>")+"</li></ul>",o.showError({errorCode:a,errorMessage:s});else o.hideError()}}),t.utils.Some(n,function(e){return!e.handled})&&e.warn("Missing error-msg or error-display for form")},t.prototype.dimScreen=function(){return this._screenSet.dimScreenSet()},t.prototype.undimScreen=function(){return this._screenSet.undimScreenSet()},t.prototype.setProfilePhoto=function(e){t.utils.ForEach(this._profilePhotos,function(t){return t.setThumbnailUrl(e)})},t.prototype.getExtraProfileFields=function(e){var n=new Array;return t.utils.ForEach(this._forms,function(t){return n=n.concat(t.getExtraProfileFields(e))}),n},t.prototype.getNeededData=function(e){var n={};return t.utils.ForEach(this._forms,function(i){var r=i.getNeededData(e);t.utils.ForEachProp(r,function(e,t){return n[t]=e})}),n},t.prototype.hasConditionalAttributes=function(){if(e.prototype.hasConditionalAttributes.call(this))return!0;var t=[].concat(this._forms,this._widgets,this._captchas,this._profilePhotos,this._others);return window.gigya.utils.array.forEachProp(this._errorDisplayElements,function(e){return t.concat(e)}),window.gigya.utils.array.some(t,function(e){return e.hasConditionalAttributes()})},t.prototype.evaluateConditionalAttributes=function(){var n=this;this.hasConditionalAttributes()&&window.gigya.logger.group("screen conditional attributes evaluation").endWhen(function(){var i=n.width,r=n.height;e.prototype.evaluateConditionalAttributes.call(n),o.ScreenOptions.call(n,n.instanceElement,n._screenSet.screenOptions);var a=n.width,s=n.height,l=n.getScreenDimensionsWithUnitType();i==a&&r==s||n._screenSet.resizeModal({width:l.width,height:l.height});var c=n.instanceElement?n.instanceElement.offsetWidth+"px":"";n._screenSet.setCaption(n.caption,c),t.utils.ForEach(n._forms,function(e){e.evaluateConditionalAttributes()}),t.utils.ForEachProp(n._errorDisplayElements,function(e){t.utils.ForEach(e,function(e){e.evaluateConditionalAttributes()})}),t.utils.ForEach(n._others,function(e){e.evaluateConditionalAttributes()}),t.utils.ForEach(n._widgets,function(e){e.evaluateConditionalAttributes()})})},t.prototype.resetLastConditionalValues=function(){window.gigya.logger.debug("resetting conditional values"),e.prototype.resetLastConditionalValues.call(this),t.utils.ForEach(this._forms,function(e){e.resetLastConditionalValues()}),t.utils.ForEachProp(this._errorDisplayElements,function(e){t.utils.ForEach(e,function(e){e.resetLastConditionalValues()})}),t.utils.ForEach(this._others,function(e){e.resetLastConditionalValues()}),t.utils.ForEach(this._widgets,function(e){e.resetLastConditionalValues()})},t.prototype.getScreenDimensionsWithUnitType=function(){var e,n,i,r,o=this._screenSet.getPluginStyle()==d.PluginStyle.legacy;this.width&&((n=t.utils.getUnitMeasurementType(this.width))===s.UnitMeasurementType.auto||o&&n==s.UnitMeasurementType.percentage||(e=parseFloat(this.width)+n));this.height&&((r=t.utils.getUnitMeasurementType(this.height))===s.UnitMeasurementType.auto||o&&r==s.UnitMeasurementType.percentage||(i=parseFloat(this.height)+r));return{width:e,height:i}},t.utils={ForEach:s.ForEach,getElementsByHavingAttribute:s.getElementsByHavingAttribute,getElementsByHavingAttributePrefix:s.getElementsByHavingAttributePrefix,ForEachProp:s.ForEachProp,Some:s.Some,getUnitMeasurementType:s.getUnitMeasurementType},t}(r.TemplateElement);t.Screen=p},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){this.params=e,this.apiData={},this.lastSubmittedFormResponse={},this.finalizeRegistrationNeeded=!1,this.neededData={},this.extraEventData={},this.otpData={},this.pushData={},this.regToken=e.regToken,this.finalizeRegistrationNeeded=e.finalizeRegistration};t.ScreenSetData=n},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(9);t.NewsletterSignup_CONSTS={gigyaClass:"gigya-subscribe-with-email-form"},r.DeepFreeze(t.NewsletterSignup_CONSTS);var a=function(e){function n(t,n,i){return e.call(this,t,n,i)||this}return i.__extends(n,e),n.prototype.prePopulateDataFrom=function(){return["getAccountInfo","getAccountInfo.profile"]},n.prototype.getNeededData=function(){return window.gigya.utils.object.merge([e.prototype.getNeededData.call(this),{getSchema:{params:{}},getAccountInfo:{params:{include:"emails,profile,subscriptions,preferences"}}}])},n.prototype.performSubmit=function(t){var n=this,i=this._screenSet.params.regToken||this._screenSet.data.regToken;"OK"===this._screenSet.getApiData().getAccountInfo.status||i?(t=this.setSubscriptions(t,i),e.prototype.performSubmit.call(this,t)):window.gigya.accounts.initRegistration({isLite:!0,callback:function(i){i.regToken&&(t=n.setSubscriptions(t,i.regToken)),e.prototype.performSubmit.call(n,t)}})},n.prototype.setSubscriptions=function(e,t){return t&&(e.regToken=t,this._screenSet.params.regToken=t,this._screenSet.data.regToken=t),e},n.prototype.submitApi=function(){return window.gigya.accounts.setAccountInfo},n.prototype.onAfterSubmit=function(t){if(0==t.errorCode){var n=this.getFormData(!0,!1);n.email&&(n.profile||(n.profile={}),n.profile.email=n.email,delete n.email),this._screenSet.onAccountInfo(n)}e.prototype.onAfterSubmit.call(this,t)},n.prototype.requiredFields=function(){var t=e.prototype.requiredFields.call(this);return t.email=!0,t},n.prototype.schemaValidated=function(){return!0},n.CONSTS=t.NewsletterSignup_CONSTS,n}(o.BaseForm);t.NewsletterSignupForm=a,o.BaseForm.addFormToLibrary(a)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.passwordStrength=n(292),t.passwordStrength_strengthMeter=n(293),t.passwordStrength_minimumRequirements=n(294),t.screenSet_dialog=n(295),t.screenSet=n(296),t.photoUpload_ui=n(297),t.photoUpload_form=n(298),t.inlinedPasswordStrength=n(299),t.consent=n(300)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(9),a=n(33);t.ProfileForm_CONSTS={gigyaClass:"gigya-profile-form",specialFields:{username:!0,oldPassword:!0,password:!0,newPassword:!0,passwordRetype:!0,secretQuestion:!0,secretAnswer:!0,addLoginEmails:!0,removeLoginEmails:!0}},r.DeepFreeze(t.ProfileForm_CONSTS);var s=function(e){function n(t,n,i){return e.call(this,t,n,i)||this}return i.__extends(n,e),n.prototype.prePopulateDataFrom=function(){return["getAccountInfo","getAccountInfo.profile","getAccountInfo.subscriptions","getAccountInfo.loginIDs","getAccountInfo.preferences"]},n.prototype.getNeededData=function(){return window.gigya.utils.object.merge([e.prototype.getNeededData.call(this),{getSchema:{params:{}},getAccountInfo:{params:{include:"loginIDs,emails,profile,data,subscriptions,preferences"}},getProviders:{params:{sections:"activeProviders"}}}])},n.prototype.schemaValidated=function(){return!0},n.prototype.isPasswordSchemaValidated=function(){return window.gigya.thisScript.globalConf.toggles&&void 0!==window.gigya.thisScript.globalConf.toggles.alwaysValidatePassword?window.gigya.thisScript.globalConf.toggles.alwaysValidatePassword:(window.gigya.logger.report("alwaysValidatePassword not adopted completely",{globalConf:JSON.stringify(window.gigya.thisScript.globalConf)},!1),!1)},n.prototype.specialFields=function(){return window.gigya.utils.object.merge([e.prototype.specialFields.call(this),t.ProfileForm_CONSTS.specialFields])},n.prototype.getLoginProviders=function(){return a.LoginModes.reAuth.getLoginProviders(this._screenSet.data.apiData,this._screenSet.params,this._screenSet.data.regToken)},n.prototype.submitApi=function(){return window.gigya.accounts.setAccountInfo},n.prototype.defaultSubmitParams=function(){var t=this._screenSet.params.conflictHandling||a.ConflictHandling[this._screenSet.data.regToken?a.ConflictHandling.saveProfileAndFail:a.ConflictHandling.fail];return window.gigya.utils.object.merge([e.prototype.defaultSubmitParams.call(this),{conflictHandling:t}])},n.prototype.getExtraProfileFields=function(t){var n=e.prototype.getExtraProfileFields.call(this,t);return-1===window.gigya.utils.array.indexOf(n,"samlData")&&n.push("samlData"),n},n.CONSTS=t.ProfileForm_CONSTS,n}(o.BaseForm);t.ProfileForm=s,o.BaseForm.addFormToLibrary(s)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(15);t.CheckboxInput_CONSTS={errorClass:"gigya-terms-error",validClass:"gigya-terms-valid",dataValueInArray:"data-value-in-array"};var o=function(e){function n(t){return e.call(this,t)||this}return i.__extends(n,e),n.FORM_TYPE_CRITERIA=function(e){return"checkbox"===e.type},n.prototype.required=function(){return/^(.+\.)?terms$/.test(this.fieldName)?e.prototype.required.call(this):this.isClientRequired()},n.prototype.isClientRequired=function(){return this._schema&&this._schema.format&&"true"==this._schema.format.toLowerCase()},n.prototype._isValueEmpty=function(e){return!e},n.prototype.validateValue=function(t,n,i){if(this.required()&&!n)return i({errorCode:400027,field:this});e.prototype.validateValue.call(this,t,n,i)},n.prototype._showValidityOnInput=function(){this.setValitidyClass(this.instanceElement.parentElement,this._validityState,t.CheckboxInput_CONSTS.validClass,t.CheckboxInput_CONSTS.errorClass)},n.prototype.evaluateConditionalAttributes=function(){e.prototype.evaluateConditionalAttributes.call(this),this.setValitidyClass(this.instanceElement.parentElement,this._validityState,t.CheckboxInput_CONSTS.validClass,t.CheckboxInput_CONSTS.errorClass)},n.prototype.prePopulate=function(n){var i=this.instanceElement.getAttribute(t.CheckboxInput_CONSTS.dataValueInArray);if(i)if(n instanceof Array){var r=n.indexOf(i);e.prototype.prePopulate.call(this,r>=0)}else e.prototype.prePopulate.call(this,!1);else e.prototype.prePopulate.call(this,n)},n.prototype.setValue=function(e,t){void 0===t&&(t=!0),this.instanceElement.checked=e&&"false"!==e,this.onFieldChange(t)},n.prototype.getValue=function(e,n){void 0===e&&(e=this.instanceElement);var i=e.checked,r=e.getAttribute(t.CheckboxInput_CONSTS.dataValueInArray);if(r){n||(n=[]);var o=n.indexOf(r);e.checked&&o<0?n.push(r):!e.checked&&o>=0&&n.splice(o,1),i=n}return i},n}(r.FormInput);t.CheckboxInput=o,r.FormInput.addInputToLibrary(o)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(9),o=n(2),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.specialFields=function(){return window.gigya.utils.object.merge([e.prototype.specialFields.call(this),{code:!0}])},t.prototype.getErrorKey=function(t){return 400006===t.errorCode&&t.errorDetails?o.endsWith(t.errorDetails,"Token has been revoked")?"otp_code_expired":o.endsWith(t.errorDetails,"phoneNumber already exists")?"phone_number_exists":o.endsWith(t.errorDetails,"code")?"please_enter_a_valid_code":e.prototype.getErrorKey.call(this,t):e.prototype.getErrorKey.call(this,t)},t.prototype.defaultSubmitParams=function(){return window.gigya.utils.object.merge([e.prototype.defaultSubmitParams.call(this),{vToken:this._screenSet.data.otpData.vToken}])},t}(r.BaseForm);t.OtpVerificationBaseForm=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(22),o=n(151),a=n(91);t.ApiLink_CONSTS={selector:"[data-gigya-api-link]",attributeName:"data-gigya-api-link",disableTimeoutInSeconds:"data-disable-timeout",disabledClass:"gigya-disabled-text",deps:[a.TranslatedWidget]};var s=function(e){function n(t,n,i,r,o){void 0===i&&(i=window.gigya._.arApiList),void 0===r&&(r=window.gigya.utils.DOM),void 0===o&&(o={defaultDisableTimeout:10});var a=e.call(this,t,n,!1)||this;return a._apiList=i,a._domUtils=r,a._config=o,a._clickHandler=function(){a._disable(),a._apiHandler.send()},a}return i.__extends(n,e),n.prototype.linkInstanceElement=function(t){e.prototype.linkInstanceElement.call(this,t),this._apiHandler=this._getApiHandler(),this._apiHandler&&(this._setDisableTimeout(),this._addClickHandler())},n.prototype.unlinkInstanceElement=function(){this._removeClickHandler(),e.prototype.unlinkInstanceElement.call(this)},n.prototype._getApiHandler=function(){var e=this.instanceElement.getAttribute(t.ApiLink_CONSTS.attributeName);if(!e)return window.gigya.logger.warn("["+t.ApiLink_CONSTS.attributeName+"]: missing api method name"),null;var n=this._apiList.filter(function(e){return e instanceof window.gigya._.ServerApi});return o.BaseApiHandler.getHandler(e,this._screenSet.data,n)},n.prototype._addClickHandler=function(){this._domUtils.addEventListener(this.instanceElement,"click",this._clickHandler)},n.prototype._removeClickHandler=function(){this._domUtils.removeEventListener(this.instanceElement,"click",this._clickHandler)},n.prototype._setDisableTimeout=function(){var e=this.instanceElement.getAttribute(t.ApiLink_CONSTS.disableTimeoutInSeconds);e&&!isNaN(Number(e))||(e=String(this._config.defaultDisableTimeout)),this._disableTimeout=1e3*Number(e)},n.prototype._disable=function(){var e=this;this._removeClickHandler(),this._domUtils.addClassToElement(this.instanceElement,t.ApiLink_CONSTS.disabledClass),setTimeout(function(){e._enable()},this._disableTimeout)},n.prototype._enable=function(){this._addClickHandler(),this._domUtils.removeClassFromElement(this.instanceElement,t.ApiLink_CONSTS.disabledClass)},n.CONSTS=t.ApiLink_CONSTS,n}(r.BaseScreenWidget);t.ApiLinkWidget=s,r.BaseScreenWidget.addWidgetToLibrary(s)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);i.__exportStar(n(67),t),i.__exportStar(n(338),t),i.__exportStar(n(339),t),i.__exportStar(n(340),t)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r=n(17),o=n(22),a=n(65),s=n(142),l=n(85),c=n(84),u=n(138),d=n(86),p=n(87),h=n(33),g=n(143),m=n(51),f=n(64),y=n(144),S=n(88),_=n(146),v=n(26),w=n(301),b=n(2),E=n(302),C=n(89),T=n(303),I=n(304),O=n(305),A=n(306),F=n(145),D=n(147),N=n(307),P=n(90),k=n(308),M=n(309),x=n(310),L=n(311),V=n(148),R=n(312),B=n(15),W=n(313),j=n(140),H=n(314),U=n(315),z=n(316),q=n(317),K=n(139),Q=n(318),G=n(319),$=n(320),Y=n(321),J=n(322),X=n(323),Z=n(324),ee=n(141),te=n(325),ne=n(326),ie=n(327),re=n(328),oe=n(329),ae=n(330),se=n(331),le=n(91),ce=n(332),ue=n(66),de=n(333),pe=n(334);n(335),n(336),n(337),n(150),n(341),n(342),window.gigya._||(window.gigya._={}),window.gigya._.plugins||(window.gigya._.plugins={}),window.gigya._.plugins.ScreenSet||(window.gigya._.plugins.ScreenSet={}),window.gigya._.plugins.ScreenSet.consent||(window.gigya._.plugins.ScreenSet.consent={}),window.gigya._.plugins.resources||(window.gigya._.plugins.resources={}),window.gigya._.plugins.resources.html||(window.gigya._.plugins.resources.html={}),window.gigya._.plugins.resources.html.screenSet||(window.gigya._.plugins.resources.html.screenSet={}),e(window.gigya._.plugins.ScreenSet,ce,i,r,o,a,s,l,u,d,p,h,g,m,f,y,S,v,w,b,E,C,T,I,O,A,F,D,N,P,k,M,x,L,V,R,B,W,j,H,U,z,q,K,Q,G,$,Y,J,X,Z,ee,te,ne,ie,re,oe,ae,se,le,ue,de,pe),e(window.gigya._.plugins.ScreenSet.consent,c),e(window.gigya._.plugins.resources.html.screenSet,_)}).call(this,n(0).__assign)},function(e,t){e.exports='<div class="${scoreClass}" aria-atomic="true" aria-live="polite">${content}</div>\r\n'},function(e,t){e.exports='<div class="gigya-passwordStrength-text">\r\n    <span class="gigya-passwordStrength-text">$TEXT(\'password_strength_colon\')</span>\r\n    <span class="gigya-passwordStrength-text gigya-passwordStrength-scoreText">${scoreText}</span>\r\n</div>\r\n<div class="gigya-passwordStrength-bar">\r\n    <div class="${barIndicatorClass}"></div>\r\n</div>\r\n'},function(e,t){e.exports='<div class="gigya-passwordStrength-text-requirements">$requirements</div>\r\n'},function(e,t){e.exports='<div id="${innerContainerID}" class="gigya-screen-content"></div>'},function(e,t){e.exports='<h1 class="gigya-screen-caption" id="${innerContainerID}_caption"></h1>\r\n<div id="${childContainerID}" class="gigya-hidden"></div>\r\n<div id="${innerContainerID}" class="gigya-screen-content"></div>\r\n'},function(e,t){e.exports='<div class="gigya-photo-upload-image" id="${photoElementID}"></div>\r\n<div>\r\n    <div class="gigya-photo-upload-button">$choose_file</div>\r\n    <div class="gigya-photo-upload-path" id="${pathContainerID}">$no_file_chosen</div>\r\n    <div class="gigya-photo-upload-text">$tip</div>\r\n</div>\r\n'},function(e,t){e.exports='<form enctype="multipart/form-data" method="post" class="gigya-photo-upload-form" target="${formTarget}" action="">\r\n    <input type="file" accept="image/*" name="_profilePhoto" />\r\n</form>\r\n'},function(e,t){e.exports='<div class="gigya-password-strength" data-on-focus-bubble="true" data-bubble-orientation="${orientation}"></div>\r\n'},function(e,t){e.exports='<div  class="consent">\r\n\r\n    <div class="gigya-consent-title">${label}</div>\r\n    <div class="gigya-consent-subtitle" >${docId}</div>\r\n    <span class="gigya-consent-text">${approvedOnLabel}</span> <span class="gigya-consent-text">${approved}</span>\r\n\r\n</div>'},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(146),r=function(){function e(){this._map={}}return e.prototype.get=function(e){return this._map[e]},e.prototype.set=function(e,t){this._map[e]=t instanceof Array?t.join(""):t},e}();t.TemplatesCache=r,t.createDefaultTemplates=function(){var e=new r;return e.set("passwordStrength",i.passwordStrength),e.set("passwordStrength-strengthMeter",i.passwordStrength_strengthMeter),e.set("passwordStrength-minimumRequirements",i.passwordStrength_minimumRequirements),e.set("screenSet-dialog",i.screenSet_dialog),e.set("screenSet",i.screenSet),e.set("photoUpload_ui",i.photoUpload_ui),e.set("photoUpload_form",i.photoUpload_form),e.set("inlinedPasswordStrength",i.inlinedPasswordStrength),e.set("consent",i.consent),e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(9),a=n(33);t.LinkAccountsForm_CONSTS={gigyaClass:"gigya-link-accounts-form"},r.DeepFreeze(t.LinkAccountsForm_CONSTS);var s=function(e){function n(t,n,i){return e.call(this,t,n,i)||this}return i.__extends(n,e),n.prototype.prePopulateData=function(){var t=e.prototype.prePopulateData.call(this),n=this._screenSet.getApiData(),i=n&&n.getConflictingAccount&&n.getConflictingAccount.conflictingAccount;return i&&(t.loginID=i.loginID||i.emails&&i.emails[0]),t},n.prototype.specialFields=function(){return window.gigya.utils.object.merge([e.prototype.specialFields.call(this),{loginID:!0,password:!0}])},n.prototype.submitApi=function(){return window.gigya.accounts.login},n.prototype.getNeededData=function(){var t=e.prototype.getNeededData.call(this);return this._screenSet.data.regToken&&(t=window.gigya.utils.object.merge([t,{getConflictingAccount:{params:{regToken:this._screenSet.data.regToken}}}])),t},n.prototype.defaultSubmitParams=function(){var t=this._screenSet.getApiData(),n=t&&t.getConflictingAccount&&t.getConflictingAccount.conflictingAccount;return window.gigya.utils.object.merge([e.prototype.defaultSubmitParams.call(this),{loginMode:a.LoginModes.link.name,loginID:n&&(n.loginID||n.emails&&n.emails[0]),include:window.gigya.utils.stringUtils.mergeCommaSeparatedValues("profile,data,subscriptions,preferences",this._screenSet.params.include)}])},n.prototype.getLoginProviders=function(){return a.LoginModes.link.getLoginProviders(this._screenSet.data.apiData,this._screenSet.params,this._screenSet.data.regToken)},n.prototype.onSkipped=function(e){this._screenSet.data.extraEventData.allowAccountsLinking=!0},n.CONSTS=t.LinkAccountsForm_CONSTS,n}(o.BaseForm);t.LinkAccountsForm=s,o.BaseForm.addFormToLibrary(s)},function(e,t,n){(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(9);t.PasswordlessLoginForm_CONSTS={gigyaClass:"gigya-passwordless-login-form"},r.DeepFreeze(t.PasswordlessLoginForm_CONSTS);var a=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i.__extends(r,n),r.prototype.specialFields=function(){return window.gigya.utils.object.merge([n.prototype.specialFields.call(this),{loginID:!0}])},r.prototype.submitApi=function(){return function(e,t,n,i){window.gigya.accounts.auth.getMethods({identifier:t.loginID,callback:n.callback})}},r.prototype.getErrorKey=function(e){return 404e3===e.errorCode?"invalid_login_identifier":n.prototype.getErrorKey.call(this,e)},r.prototype.onAfterSubmit=function(e){this.saveInAccountInfo({identifier:e.requestParams.identifier,authMethods:e.methods}),n.prototype.onAfterSubmit.call(this,e)},r.prototype.saveInAccountInfo=function(t){var n=this._screenSet.getApiData();n.getAccountInfo=n.getAccountInfo||{},e(n.getAccountInfo,t)},r.CONSTS=t.PasswordlessLoginForm_CONSTS,r}(o.BaseForm);t.PasswordlessLoginForm=a,o.BaseForm.addFormToLibrary(a)}).call(this,n(0).__assign)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(9),a=window.gigya._.plugins.utils.DOM.getAttribute;t.AuthMethodsForm_CONSTS={gigyaClass:"gigya-auth-methods-form"},r.DeepFreeze(t.AuthMethodsForm_CONSTS);var s=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._authMethodButtons=[],t}return i.__extends(n,e),n.prototype.linkInstanceElement=function(t){var n=this;e.prototype.linkInstanceElement.call(this,t),this.instanceElement.querySelectorAll("[data-auth-method]").forEach(function(e){return n._authMethodButtons.push(e)})},n.prototype.checkAutoSkip=function(t,n){var i=this;e.prototype.checkAutoSkip.call(this,t,function(e){if(e){var r=i.getEnabledAuthMethods();if(1==r.length||!t.explicitSwitchScreen)return i.autoSkipScreen=i.getDefaultAuthScreen(r),n(!0)}return n(!1)})},n.prototype.getDefaultAuthScreen=function(e){if(!e||!e.length)return window.gigya.logger.warn("could not find default auth method"),null;var t=e[e.length-1],n=this._authMethodButtons.find(function(e){return a(e,"data-auth-method")===t});if(!n)return e.pop(),this.getDefaultAuthScreen(e);var i=a(n,"data-switch-screen");return window.gigya.logger.info("found default auth-screen",{successScreen:i}),i},n.prototype.getEnabledAuthMethods=function(){var e,t;return(null===(t=null===(e=this._screenSet.getApiData().getAccountInfo)||void 0===e?void 0:e.authMethods)||void 0===t?void 0:t.slice())||[]},n.CONSTS=t.AuthMethodsForm_CONSTS,n}(o.BaseForm);t.AuthMethodsForm=s,o.BaseForm.addFormToLibrary(s)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(9),a=n(89);t.PasswordAuthMethodForm_CONSTS={gigyaClass:"gigya-password-auth-method-form"},r.DeepFreeze(t.PasswordAuthMethodForm_CONSTS);var s=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(n,e),n.prototype.submitApi=function(){var e=this;return function(t,n,i,r){var o=e._screenSet.getApiData().getAccountInfo||{};n=window.gigya.utils.object.merge([n,{loginID:o.identifier,password:n.password}]),window.gigya.accounts.login(t,n,i,r)}},n.CONSTS=t.PasswordAuthMethodForm_CONSTS,n}(a.LoginForm);t.PasswordAuthMethodForm=s,o.BaseForm.addFormToLibrary(s)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(9);t.PushAuthMethodForm_CONSTS={gigyaClass:"gigya-push-auth-method-form"},r.DeepFreeze(t.PushAuthMethodForm_CONSTS);var a=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._pollingStartTime=0,t._dataStore=t._screenSet.data,t}return i.__extends(n,e),n.prototype.linkInstanceElement=function(t){e.prototype.linkInstanceElement.call(this,t),this.startPushVerificationFlow()},n.prototype.unlinkInstanceElement=function(){this.stopPolling(),e.prototype.unlinkInstanceElement.call(this)},n.prototype.startPushVerificationFlow=function(){var e=this,t=this._dataStore.apiData.getAccountInfo||{};window.gigya.accounts.auth.push.sendVerification({identifier:t.identifier,callback:function(t){return e.onSendVerificationResponse(t)}}),this.startPolling()},n.prototype.submitApi=function(){var e=this;return function(t,n,i,r){window.gigya.accounts.auth.login({accessToken:e._accessToken,callback:i.callback})}},n.prototype.stopPolling=function(){this._pollingStartTime=0,clearTimeout(this._timeoutId)},n.prototype.onSendVerificationResponse=function(e){0==e.errorCode&&e.vToken?this._dataStore.pushData.vToken=e.vToken:window.gigya.logger.error("gigya.accounts.auth.push.sendVerification failed",{res:e})},n.prototype.checkIsVerified=function(){var e=this,t=this._dataStore.pushData.vToken;t?window.gigya.accounts.auth.push.isVerified({vToken:t,callback:function(t){return e.onIsVerifiedResponse(t)}}):this.onIsVerifiedResponse({errorCode:0})},n.prototype.onPushVerified=function(e){this._accessToken=e,this.stopPolling(),this.submit()},n.prototype.onIsVerifiedResponse=function(e){var t=this;if(e.accessToken)return this.onPushVerified(e.accessToken);0!=e.errorCode&&window.gigya.logger.error("gigya.accounts.auth.push.isVerified failed",{res:e}),this._timeoutId=window.setTimeout(function(){t.shouldContinuePolling()&&t.checkIsVerified()},n.PollingIntervalMillis)},n.prototype.shouldContinuePolling=function(){return window.gigya.utils.date.now()-this._pollingStartTime<n.PollingLimitMillis},n.prototype.startPolling=function(){this._pollingStartTime=window.gigya.utils.date.now(),this.checkIsVerified()},n.CONSTS=t.PushAuthMethodForm_CONSTS,n.PollingLimitMillis=12e4,n.PollingIntervalMillis=3e3,n}(o.BaseForm);t.PushAuthMethodForm=a,o.BaseForm.addFormToLibrary(a)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(9),a=n(33);t.ReauthenticationForm_CONSTS={gigyaClass:"gigya-reauthentication-form"},r.DeepFreeze(t.ReauthenticationForm_CONSTS);var s=function(e){function n(t,n,i){return e.call(this,t,n,i)||this}return i.__extends(n,e),n.prototype.prePopulateData=function(){var t=e.prototype.prePopulateData.call(this),n=this._screenSet.getApiData(),i=n&&n.getAccountInfo&&n.getAccountInfo.loginIDs;return i&&(t.loginID=i.username||i.emails&&i.emails[0]),t},n.prototype.submitApi=function(){return window.gigya.accounts.login},n.prototype.getNeededData=function(){return window.gigya.utils.object.merge([e.prototype.getNeededData.call(this),{getSchema:{params:{}},getAccountInfo:{params:{include:"identities-active,loginIDs"},cache:!1}}])},n.prototype.getLoginProviders=function(){return a.LoginModes.reAuth.getLoginProviders(this._screenSet.data.apiData,this._screenSet.params,this._screenSet.data.regToken)},n.prototype.defaultSubmitParams=function(){return window.gigya.utils.object.merge([e.prototype.defaultSubmitParams.call(this),{loginMode:a.LoginModes.reAuth.name,loginID:"no-one"}])},n.prototype.specialFields=function(){return window.gigya.utils.object.merge([e.prototype.specialFields.call(this),{password:!0,captchaText:!0,captchaToken:!0,loginID:!0}])},n.CONSTS=t.ReauthenticationForm_CONSTS,n}(o.BaseForm);t.ReauthenticationForm=s,o.BaseForm.addFormToLibrary(s)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(9);t.ResendVerificationCodeForm_CONSTS={gigyaClass:"gigya-resend-verification-code-form"},r.DeepFreeze(t.ResendVerificationCodeForm_CONSTS);var a=function(e){function n(t,n,i){return e.call(this,t,n,i)||this}return i.__extends(n,e),n.prototype.getNeededData=function(){return window.gigya.utils.object.merge([e.prototype.getNeededData.call(this),{getAccountInfo:{params:{include:"emails"}}}])},n.prototype.specialFields=function(){return window.gigya.utils.object.merge([e.prototype.specialFields.call(this),{email:!0}])},n.prototype.submitApi=function(){return window.gigya.accounts.resendVerificationCode},n.CONSTS=t.ResendVerificationCodeForm_CONSTS,n}(o.BaseForm);t.ResendVerificationCodeForm=a,o.BaseForm.addFormToLibrary(a)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(9);t.ResetPasswordForm_CONSTS={gigyaClass:"gigya-reset-password-form"},r.DeepFreeze(t.ResetPasswordForm_CONSTS);var a=function(e){function n(t,n,i){var r=e.call(this,t,n,i)||this;return r.filters.push({filterOutWidgetsToSend:function(e){return e.securityFields&&e.securityFields.passwordRetype&&delete e.securityFields.passwordRetype,e}}),r}return i.__extends(n,e),n.prototype.specialFields=function(){return window.gigya.utils.object.merge([e.prototype.specialFields.call(this),{loginID:!0,newPassword:!0,email:!0,secretAnswer:!0}])},n.prototype.getErrorKey=function(t){return 403025===t.errorCode?"invalid_password_reset_token":e.prototype.getErrorKey.call(this,t)},n.prototype.schemaValidated=function(){return!!this.getField("newPassword")},n.prototype.profileObjectName=function(){return"securityFields"},n.prototype.submitApi=function(){return window.gigya.accounts.resetPassword},n.prototype.linkInstanceElement=function(t){e.prototype.linkInstanceElement.call(this,t),this._screenSet.data.finalizeRegistrationNeeded=!1},n.prototype.prePopulateData=function(){var t=e.prototype.prePopulateData.call(this),n=this._screenSet.getApiData(),i=n&&n.getAccountInfo&&n.getAccountInfo.loginIDs;i&&(t.loginID=i.username||i.emails&&i.emails[0]);var r=n&&n.getConflictingAccount&&n.getConflictingAccount.conflictingAccount;return r&&(t.loginID=r.loginID||r.emails&&r.emails[0]),t},n.prototype.defaultSubmitParams=function(){var t=e.prototype.defaultSubmitParams.call(this);if(!this.getField("newPassword"))return t;var n=this._screenSet.params&&this._screenSet.params.passwordResetToken?this._screenSet.params.passwordResetToken:window.gigya.utils.URL.getParamValueFromURL("pwrt",window.location.toString(),void 0);return n&&(t.passwordResetToken=n),t},n.CONSTS=t.ResetPasswordForm_CONSTS,n}(o.BaseForm);t.ResetPasswordForm=a,o.BaseForm.addFormToLibrary(a)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(9);t.OrgRegisterForm_CONSTS={gigyaClass:"gigya-org-register-form"},r.DeepFreeze(t.OrgRegisterForm_CONSTS);var a=function(e){function n(t,n,i){return e.call(this,t,n,i)||this}return i.__extends(n,e),n.prototype.mergeOrgSchemaIntoMainSchema=function(e,t){return window.gigya.utils.object.merge([e,{organizationSchema:t.organizationSchema,requesterSchema:t.requesterSchema}],!0)},n.prototype.prePopulateDataFrom=function(){return["getOrganizationSchema"]},n.prototype.getNeededData=function(){var t=this;return window.gigya.utils.object.merge([e.prototype.getNeededData.call(this),{getOrganizationSchema:{params:{},responseHandler:function(e){var n=t._screenSet.getApiData().getSchema;return n&&(t._screenSet.getApiData().getSchema=t.mergeOrgSchemaIntoMainSchema(n,e)),e}},getSchema:{params:{},responseHandler:function(e){var n=t._screenSet.getApiData().getOrganizationSchema;return t.mergeOrgSchemaIntoMainSchema(e,n||{})}}}])},n.prototype.schemaValidated=function(){return!0},n.prototype.submitApi=function(){return window.gigya.accounts.b2b.registerOrganization},n.CONSTS=t.OrgRegisterForm_CONSTS,n}(o.BaseForm);t.OrgRegisterForm=a,o.BaseForm.addFormToLibrary(a)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(15),o=function(e){function t(t){return e.call(this,t,!1)||this}return i.__extends(t,e),t.FORM_TYPE_CRITERIA=function(e){return"submit"===e.type||"reset"===e.type||"button"===e.type||"button"===e.element.nodeName.toLowerCase()},t.prototype.setValue=function(){},t}(r.FormInput);t.ButtonInput=o,r.FormInput.addInputToLibrary(o)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(15),o=n(89),a=function(e){function t(t){return e.call(this,t)||this}return i.__extends(t,e),t.FORM_TYPE_CRITERIA=function(e){return!(e.form instanceof o.LoginForm||"email"!==e.fieldName&&"email"!==e.type)},t.prototype.validateValue=function(t,n,i){return n&&!window.gigya.pluginUtils.validation.isValidEmailLoginID(n)?i({errorCode:400006,field:this}):e.prototype.validateValue.call(this,t,n,i)},t}(r.FormInput);t.EmailInput=a,r.FormInput.addInputToLibrary(a)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(15),o=n(90),a=function(e){function t(t){var n=e.call(this,t)||this;return n.isServerValidationEnabled=!0,n._serverValidateAvaliability=n.showValidCheckmark(t.element),n.loginIdMustBeEmail="email"===t.fieldName,n}return i.__extends(t,e),t.FORM_TYPE_CRITERIA=function(e){return e.form instanceof o.RegisterForm&&("email"===e.fieldName||"username"===e.fieldName)},t.prototype.showDataPending=function(){this.instanceElement&&this._form.showFieldError(this,100001,!0)},t.prototype.onKeyUp=function(t){this.getValue()!==this.previousValue&&(this.previousValue=void 0,this.lastCheck=void 0,this.showDataPending()),e.prototype.onKeyUp.call(this,t)},t.prototype.linkInstanceElement=function(t){e.prototype.linkInstanceElement.call(this,t);var n=this.getEmailFromQueryParams();n&&(this.prePopulate(n),this.instanceElement.setAttribute("disabled","disabled"))},t.prototype.serverValidated=function(){return this._serverValidateAvaliability},t.prototype.startServerValidation=function(e,t){var n=this;this.instanceElement&&e!==this.lastCheck&&(this.showDataPending(),this.lastCheck=e,this.clearServerError(),this.instanceElement.removeAttribute(r.FormInput_CONSTS.serverValidation),this.setValidityState(r.ValidityStates.pending),!1===this.isServerValidationEnabled?t({errorCode:0,field:this}):window.gigya.accounts.isAvailableLoginID({loginID:e,callback:function(i){return n.serverQueryDone(i,e,t)}}))},t.prototype.serverQueryDone=function(e,t,n){if(this.instanceElement&&this.getValue()===t){var i=e.errorCode;switch(i){case 0:window.gigya.utils.validation.isExplicitTrue(e.isAvailable)||(i=400003);break;case 403026:this.isServerValidationEnabled=!1,i=0}this.setServerError(i),this._form.onInputChange(this,!1),n({errorCode:i,field:this})}},t.prototype.validateValue=function(t,n,i){return this.isServerValidationEnabled&&n!==this.lastCheck&&this.clearServerError(),!n||!this.loginIdMustBeEmail||this._schema&&this._schema.format||window.gigya.pluginUtils.validation.isValidEmailLoginID(n)?e.prototype.validateValue.call(this,t,n,i):i({errorCode:400006,field:this})},t.prototype.getEmailFromQueryParams=function(){return window.gigya.utils.URL.getParamValueFromURL("gig_email",window.location.search,void 0)},t}(r.FormInput);t.LoginIdInput=a,r.FormInput.addInputToLibrary(a,r.FormInputPriorities.Important)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(15),o=n(15),a=/^\+?[1-9]\d{1,14}$/;t.gigyaPhoneNumberInput="gigya-phone-number-input";var s=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.countryCodesDataStructure={},t.onCountryCodeSelected=function(e){t.countryCodeSelectHadChanged=!0;var n=t.countryCodeSelect.value;"0"!==n&&(t.countryCodeSelect.options[0].value=n,t.countryCodeSelect.options[0].text=n,t.countryCodeSelect.selectedIndex=0,t.onFieldChange(e))},t.onSubscriberNumberChanged=function(){t.subscriberNumberHadChanged=!0},t}return i.__extends(n,e),n.FORM_TYPE_CRITERIA=function(e){return e.element instanceof HTMLFieldSetElement&&e.type===t.gigyaPhoneNumberInput},n.prototype.generateCountryCodesDataStructure=function(){var e=this;this.countryCodeSelect.querySelectorAll('option[value]:not([value="0"])').forEach(function(t){for(var n=e.countryCodesDataStructure,i=0,r=t.value;i<r.length;i++){var o=r[i];n[o]||(n[o]={}),n=n[o]}})},n.prototype.getCountryCode=function(e){for(var t="",n=this.countryCodesDataStructure,i=0,r=e;i<r.length;i++){var o=r[i];if(!n[o])break;t=""+t+o,n=n[o]}return t},n.prototype.getSubscriberNumber=function(e,t){t=t.replace("+","\\+");var n=new RegExp("^"+t);return e.replace(n,"")},n.prototype.setupChangeEventHandler=function(){this.countryCodeSelect.addEventListener("change",this.onCountryCodeSelected),this.subscriberNumber.addEventListener("input",this.onSubscriberNumberChanged)},n.prototype.removeChangeEventHandler=function(){this.countryCodeSelect.removeEventListener("change",this.onCountryCodeSelected),this.subscriberNumber.removeEventListener("input",this.onSubscriberNumberChanged)},n.prototype.linkInstanceElement=function(t){e.prototype.linkInstanceElement.call(this,t),this.countryCodeSelect=this.instanceElement.querySelector("select"),this.subscriberNumber=this.instanceElement.querySelector("input"),this.countryCodeSelect&&this.subscriberNumber?(this.generateCountryCodesDataStructure(),this.setupChangeEventHandler()):window.gigya.logger.warn("Phone Number Input: missing country select or mobile phone text box")},n.prototype._showValidityOnInput=function(t){if(void 0===t&&(t=this.instanceElement),this.shouldValidate()){var n=this.getCountryCodeValidityState();e.prototype._showValidityOnInput.call(this,this.countryCodeSelect,n,!1),n===o.ValidityStates.error&&this.countryCodeSelect.blur();var i=this.getSubscriberNumberValidityState(),r=n===o.ValidityStates.valid&&i===o.ValidityStates.valid;e.prototype._showValidityOnInput.call(this,this.subscriberNumber,i,r)}},n.prototype.unlinkInstanceElement=function(){e.prototype.unlinkInstanceElement.call(this),this.removeChangeEventHandler()},n.prototype.setValidityState=function(t,n){void 0===n&&(n=!1),this.countryCodeSelect.value===this.countryCodeSelectPreviousValue&&this.subscriberNumber.value===this.subscriberNumberPreviousValue||(this.countryCodeSelectPreviousValue=this.countryCodeSelect.value,this.subscriberNumberPreviousValue=this.subscriberNumber.value,this._validityState=o.ValidityStates._undefined),e.prototype.setValidityState.call(this,t,n)},n.prototype.validateValue=function(t,n,i){var r=this;return this.shouldValidate()?(this.countryCodeSelect.value&&"0"!==this.countryCodeSelect.value&&this.subscriberNumber.value||(n=""),e.prototype.validateValue.call(this,t,n,function(e){if(0!==e.errorCode)return i(e);var t=a.test(n)?0:400006;return i({errorCode:t,field:r})})):i({errorCode:0,field:this})},n.prototype.getValue=function(e,t){if(void 0===e&&(e=this.instanceElement),!this.countryCodeSelect||!this.subscriberNumber)return"";var n="0"===this.countryCodeSelect.value?"":this.countryCodeSelect.value,i=this.subscriberNumber.value.replace(/\s/gm,"");return"+39"!==n&&(i=i.replace(/^0+/,"")),""+n+i},n.prototype.setValue=function(e,t){if(void 0===t&&(t=!0),this.countryCodeSelect&&this.subscriberNumber&&this.getValue()!==e){var n=this.getCountryCode(e),i=this.getSubscriberNumber(e,n);this.countryCodeSelect.value=n,this.subscriberNumber.value=i,this.onCountryCodeSelected(t)}},n.prototype.getCountryCodeValidityState=function(){return this.countryCodeSelect.value&&"0"!==this.countryCodeSelect.value?o.ValidityStates.valid:o.ValidityStates.error},n.prototype.getSubscriberNumberValidityState=function(){return!this.subscriberNumber.value||this.getCountryCodeValidityState()===o.ValidityStates.valid&&!a.test(this.getValue())?o.ValidityStates.error:o.ValidityStates.valid},n.prototype.shouldValidate=function(){return this._form.submitButtonClicked||this.countryCodeSelectHadChanged&&this.subscriberNumberHadChanged},n}(r.FormInput);t.PhoneNumberInput=s,r.FormInput.addInputToLibrary(s)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(15),o=function(e){function t(t){return e.call(this,t)||this}return i.__extends(t,e),t.FORM_TYPE_CRITERIA=function(e){return"radio"===e.type},t.prototype.getValidateValue=function(e){return e[this.getName(!1,!0)]},t.prototype.linkInstanceElement=function(t){e.prototype.linkInstanceElement.call(this,t),this._schema=void 0,this.groupRadioButtonArrayFields()},t.prototype.setValue=function(e,t){void 0===t&&(t=!0);var n=this.instanceElement;n.checked=e.toString()===n.value,this.onFieldChange(t)},t.prototype.getValue=function(t){void 0===t&&(t=this.instanceElement);var n=e.prototype.getValue.call(this,t);return t.checked?n:null},t.prototype.groupRadioButtonArrayFields=function(){if(this.instanceElement){var e=this.instanceElement.getAttribute("name"),t=this.instanceElement.getAttribute(r.FormInput_CONSTS.arrayKeyValueAttribute);e&&t&&this.instanceElement.setAttribute("name",e+"["+t+"]")}},t}(r.FormInput);t.RadioInput=o,r.FormInput.addInputToLibrary(o)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(148),o=n(15),a=function(e){function t(t){var n=e.call(this,t)||this;return n._form._rememberMe=n,n}return i.__extends(t,e),t.FORM_TYPE_CRITERIA=function(e){return"remember"===e.fieldName},t}(r.CheckboxInput);t.RememeberInput=a,o.FormInput.addInputToLibrary(a,o.FormInputPriorities.Important)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(15),o=function(e){function t(t){var n=e.call(this,t)||this;return n._form._passwordRetypes.push(n),n}return i.__extends(t,e),t.FORM_TYPE_CRITERIA=function(e){return"passwordRetype"===e.fieldName},t.prototype.validateValue=function(t,n,i){if(this._form._validatedPassword){var r=this._form._validatedPassword.getValue();if(""!==r&&r!==n)return i({field:this,errorCode:400009})}e.prototype.validateValue.call(this,t,n,i)},t}(r.FormInput);t.RetypePasswordInput=o,r.FormInput.addInputToLibrary(o)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(22),a=n(91);t.Binding_CONSTS={selector:"*[data-binding]",dataBindingAttribute:"data-binding"},r.DeepFreeze(t.Binding_CONSTS);var s=function(e){function n(t,n){var i=e.call(this,t,n,!1)||this;return i.deps=[a.TranslatedWidget],i}return i.__extends(n,e),n.prototype.linkInstanceElement=function(t){e.prototype.linkInstanceElement.call(this,t),this.supportInterpolation="true"==this.templateElement.getAttribute(n.CONSTS.dataBindingAttribute),this.originalString=this.instanceElement.innerHTML,this.lastValue=null,this.updateValue()},n.prototype.evaluateConditionalAttributes=function(){e.prototype.evaluateConditionalAttributes.call(this),this.updateValue()},n.prototype.getBindingKey=function(){return this.originalString},n.prototype.getValue=function(){return this.evaluate(this.getBindingKey())},n.prototype.updateValue=function(){var e=this.getValue();e&&this.lastValue!==e&&(this.unlinkWidgets(),this.lastValue=e.replace("undefined",""),this.instanceElement.innerHTML=this.lastValue,this.linkWidgets())},n.prototype.evaluate=function(e){void 0===e&&(e="");return e.match(/{{(.*?)}}/g)&&this.supportInterpolation?this.evaluateExpression({ignoreError:!0,condition:e.split(/({{.*?}})/g).map(function(e){return"'"+e+"'"}).join(" + ").replace(/(\r\n|\n|\r)/gm,"").replace(/'{{(.*?)}}'/g,"$1")}):e},n.CONSTS=t.Binding_CONSTS,n}(o.BaseScreenWidget);t.BindingWidget=s,o.BaseScreenWidget.addWidgetToLibrary(s)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(17),o=n(66),a=n(90),s=n(2);t.CaptchaWidget_CONSTS={selector:"div.gigya-captcha"};var l=function(e){function n(t,n){var i=e.call(this,t,n)||this;i._index=t._screen._captchas.length,t._screen._captchas.push(i);var r=window.gigya.utils.object.merge([i.params,{lang:i._screenSet.params.lang,mode:t instanceof a.RegisterForm?o.CaptchaMode.Invisible:o.CaptchaMode.Visible}]),s=o.CaptchaHandlers[window.gigya.partnerSettings.captchaProvider];if(!s||"function"!=typeof s)throw new Error("[Gigya]: unsupported captcha provider");return i._captchaHandler=new s(r),i}return i.__extends(n,e),n.prototype.linkInstanceElement=function(t){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(n){switch(n.label){case 0:return e.prototype.linkInstanceElement.call(this,t),[4,this._captchaHandler.init(this.instanceElement)];case 1:return n.sent()||(this.unlinkInstanceElement(),this._form._screen._captchas.splice(this._index,1)),[2]}})})},n.prototype.isHidden=function(){return s.isHidden(this.instanceElement)},n.prototype.reload=function(){this._captchaHandler.reset()},n.prototype.getToken=function(){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){return[2,this._captchaHandler.getToken()]})})},n.CONSTS=t.CaptchaWidget_CONSTS,n}(r.BaseFormWidget);t.CaptchaWidget=l,r.BaseFormWidget.addWidgetToLibrary(l)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(17);t.Consent_CONSTS={selector:"div.gigya-consent"},r.DeepFreeze(t.Consent_CONSTS);var a=function(e){function n(t,n){return e.call(this,t,n,!1)||this}return i.__extends(n,e),n.prototype.linkInstanceElement=function(t){e.prototype.linkInstanceElement.call(this,t),this.loadWidget()},n.prototype.evaluateConditionalAttributes=function(){e.prototype.evaluateConditionalAttributes.call(this),this.loadWidget()},n.prototype.loadWidget=function(){var e=this._screenSet.getApiData().getAccountInfo,t=this.instanceElement.getAttribute("name"),n=window.gigya.utils.object.expressionHelper(e).getField(t);if(n&&!0===n.isConsentGranted){var i=n.docDate?this.formatTime(n.docDate):n.docVersion,r=this.formatTime(n.lastConsentModified);this.instanceElement.innerHTML=window.gigya.utils.templates.fill(this._screenSet.getTemplates().consent,{label:this.instanceElement.getAttribute("data-label"),docId:i,approvedOnLabel:this.instanceElement.getAttribute("data-approved-on-label")||"Approved on",approved:r})}},n.prototype.formatTime=function(e){var t=Date.parse(e);return isNaN(t)?"":new Date(t).toLocaleDateString()},n.CONSTS=t.Consent_CONSTS,n}(o.BaseFormWidget);t.ConsentWidget=a,o.BaseFormWidget.addWidgetToLibrary(a)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(17),a=n(15);t.ContainerWidget_CONSTS={selector:"div.gigya-container",activeClass:"gigya-container-enabled",emptyFields:"data-empty-fields",displayCap:"data-display-cap",displayFreq:"data-display-freq",loginIdentities:"data-login-idenities",conditionAttr:"data-condition",onRenderAttr:"data-on-render"},r.DeepFreeze(t.ContainerWidget_CONSTS);var s,l=function(e){function n(n,i){var r=e.call(this,n,i,!1)||this;return r.onElementChange=function(){return r.refresh()},r.name=i.getAttribute("name"),r.emptyFields=i.getAttribute(t.ContainerWidget_CONSTS.emptyFields),r.emptyFields&&n._autoSkipContainers.push(r),r.name&&(i.getAttribute(t.ContainerWidget_CONSTS.displayCap)||i.getAttribute(t.ContainerWidget_CONSTS.displayFreq))&&(n._needContainerHistory=!0),r.update(i),r}return i.__extends(n,e),n.prototype.update=function(e){void 0===e&&(e=this.instanceElement),this.renderingConditions=c(e,p.rendering),this.validationConditions=c(e,p.validation)},n.prototype.checkAutoSkip=function(){return!u(this.emptyFields,this)},n.prototype.linkInstanceElement=function(t){e.prototype.linkInstanceElement.call(this,t);var n=this.testRendering();this.originalRenderingStatus=this.conditionStatus=n,this.originalRenderingStatus&&this.onElementChange()},n.prototype.refresh=function(){var e=this.validationPassed=this.testValidations();this.conditionStatus=this.originalRenderingStatus&&e,this.conditionStatus?window.gigya.utils.DOM.addClassToElement(this.instanceElement,t.ContainerWidget_CONSTS.activeClass):window.gigya.utils.DOM.removeClassFromElement(this.instanceElement,t.ContainerWidget_CONSTS.activeClass)},n.prototype.testRendering=function(){return this.testContainer(this.renderingConditions)},n.prototype.testValidations=function(){return this.testContainer(this.validationConditions)},n.prototype.testContainer=function(e){var t=this,n={hasRequiredEmptyFields:this.containsEmptyRequiredFields()},i=r.Every(e,function(e){return e(t,n)});return n.hasRequiredEmptyFields||i},n.prototype.containsEmptyRequiredFields=function(){var e=this;if(!this._form.isPopulated)return!1;var t=r.getElementsByHavingAttribute(this.instanceElement,"*",a.FormInput_CONSTS.fieldName);return r.Some(t,function(t){var n=t.getAttribute(a.FormInput_CONSTS.fieldName);if(n&&(e._form.isRequiredField(n)&&!t.value))return!0;return!1})},n.prototype.getHistoryFromSettings=function(){var e=this._screenSet.getApiData();if(!this.name)return null;if(!e.getUserSettings||e.getUserSettings.errorCode>0)return null;var t=e.getUserSettings.settings;if(!t)return null;var n=t[this.name]||{};return n.displayCount||(n.displayCount=0),n.lastDisplay||(n.lastDisplay=-1),n},n.prototype.saveHistoryInSettings=function(e){var t=this._screenSet.getApiData();if(!t.getUserSettings||t.getUserSettings.errorCode>0)return null;var n=t.getUserSettings.settings;if(!n)return null;n[this.name]=e;var i={};i[this.name]={displayCount:e.displayCount,lastDisplay:e.lastDisplay},window.gigya.socialize.setUserSettings({group:"gigya_container_history-"+this._form.ID,regToken:this._screenSet.data.regToken,settings:i,disableLocalSettings:!0})},n.prototype.evaluateConditionalAttributes=function(){this.update(this.instanceElement),e.prototype.evaluateConditionalAttributes.call(this),this.emptyFields=this.instanceElement.getAttribute(t.ContainerWidget_CONSTS.emptyFields),this.originalRenderingStatus&&this.onElementChange()},n.prototype.hasConditionalAttributes=function(){return!0},n.CONSTS=t.ContainerWidget_CONSTS,n}(o.BaseFormWidget);function c(e,t){var n=new Array;return r.ForEachProp(t,function(t,i){if(e.getAttribute(i)){var r=e.getAttribute(i),o=!1;r&&"true"==e.getAttribute(l.CONSTS.onRenderAttr)&&(o=!0),t.overwriteFields?n.push(function(e,t){return function(n,i){var r=t(e,n);return r||(i.hasRequiredEmptyFields=!1),r}}(r,t)):n.push(function(e,t,n){return void 0===n&&(n=!1),function(i,r){return t(e,i,n)}}(r,t,o))}}),n}function u(e,t){var n=new Array;if("*"===e){var i=r.getElementsByHavingAttribute(t.instanceElement,"*",a.FormInput_CONSTS.fieldName);r.ForEach(i,function(e){e.getAttribute(a.FormInput_CONSTS.fieldName)&&n.push(e)})}else r.ForEach(e.split(","),function(e){var i=window.gigya.utils.DOM.getElementsByAttribute(t.instanceElement,"*",a.FormInput_CONSTS.fieldName,e)[0];n.push(i)});return r.Some(n,function(e){return!e.value})}function d(e,t){var n,i,o,a=e.split(","),l=t._form.getLoginProviders(),c=r.Some(a,function(e){return e===s[s.site]}),u=r.Some(a,function(e){return e===s[s.social]}),d=r.Some(a,function(e){return e===s[s.siteOnly]}),p=r.Some(a,function(e){return e===s[s.socialOnly]}),h=r.Some(a,function(e){return e===s[s.siteAndSocial]});return"string"!=typeof l?(o=[],n=i=!0):(o=l.split(","),n=r.Some(o,function(e){return e!==s[s.site]}),i=r.Some(o,function(e){return e===s[s.site]})),d?i&&!n:p?n&&!i:h?i&&n:u?n:c?i:r.Some(a,function(e){return r.Some(o,function(t){return t===e})})}t.ContainerWidget=l,o.BaseFormWidget.addWidgetToLibrary(l),function(e){e[e.social=0]="social",e[e.site=1]="site",e[e.siteOnly=2]="siteOnly",e[e.socialOnly=3]="socialOnly",e[e.siteAndSocial=4]="siteAndSocial",e[e["site-only"]=2]="site-only",e[e["social-only"]=3]="social-only",e[e["site-and-social"]=4]="site-and-social"}(s=t.SpecialProviders||(t.SpecialProviders={})),r.DeepFreeze(s),d.overwriteFields=!0;var p={rendering:{"data-domains":function(e){var t=e.split(",");return r.Some(t,function(e){return window.gigya.pluginUtils.domain.isInDomain(e)})},"data-apikeys":function(e){var t=e.split(",");return-1!=window.gigya.utils.array.indexOf(t,window.gigya.thisScript.APIKey)},"data-prob":function(e,t){return t._screenSet._random<=parseFloat(e)},"data-after-date":function(e){var t=window.gigya.global.date.getISODate(e);return(new Date).getTime()>t.getTime()},"data-before-date":function(e){var t=window.gigya.global.date.getISODate(e);return(new Date).getTime()<=t.getTime()},"data-display-cap":function(e,t){var n=t.getHistoryFromSettings();return!(!n||e<=n.displayCount||(n.wasUpdated||(n.displayCount++,n.wasUpdated=!0,t.saveHistoryInSettings(n)),0))},"data-display-freq":function(e,t){var n=t.getHistoryFromSettings();if(!n)return!1;var i=(new Date).getTime(),r=(i-n.lastDisplay)/1e3;return!(-1!==n.lastDisplay&&e>=r||(n.wasUpdated||(n.lastDisplay=i,n.wasUpdated=!0,t.saveHistoryInSettings(n)),0))},"data-empty-fields":u,"data-login-identities":d},validation:{"data-condition":function(e,t,n){return void 0===n&&(n=!1),!(!n||!t.validationPassed)||Boolean(t.evaluateExpression({condition:e}))}}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(17),a=n(88);t.Image_CONSTS={selector:"div.gigya-image",srcAttribute:"data-src",widthAttribute:"data-width",heightAttribute:"data-height",backgroundSizeAttribute:"data-background-size"},r.DeepFreeze(t.Image_CONSTS);var s=function(e){function n(t,n){return e.call(this,t,n,!1)||this}return i.__extends(n,e),n.prototype.linkInstanceElement=function(t){e.prototype.linkInstanceElement.call(this,t),this.setBackgroundImage()},n.prototype.evaluateConditionalAttributes=function(){e.prototype.evaluateConditionalAttributes.call(this),this.setBackgroundImage()},n.prototype.setBackgroundImage=function(){var e=this.instanceElement,t=e.getAttribute(n.CONSTS.srcAttribute),i=e.getAttribute(n.CONSTS.widthAttribute),r=e.getAttribute(n.CONSTS.heightAttribute),o=e.getAttribute(n.CONSTS.backgroundSizeAttribute);t?(window.gigya.utils.DOM.removeClassFromElement(this.instanceElement,a.ScreenSet_CONSTS.gigyaHidden),i&&(e.style.width=this.getSize(i)),r&&(e.style.height=this.getSize(r)),o||e.setAttribute(n.CONSTS.backgroundSizeAttribute,"fit"),this.prevSrc!==t&&(this.prevSrc=t,"https"===window.gigya.localInfo.protocol&&0===t.indexOf("http://")&&(t=window.gigya.global.getPhotoURL(t)),e.style.backgroundImage='url("'+t+'")')):window.gigya.utils.DOM.addClassToElement(this.instanceElement,a.ScreenSet_CONSTS.gigyaHidden)},n.prototype.getSize=function(e){var t=Number(e);return isNaN(t)?e:e+"px"},n.CONSTS=t.Image_CONSTS,n}(o.BaseFormWidget);t.ImageWidget=s,o.BaseFormWidget.addWidgetToLibrary(s)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(17),a=n(15);t.LoginAvailabilityWidget_CONSTS={selector:"div.gigya-loginID-availability",boundTo:"data-bound-to"},r.DeepFreeze(t.LoginAvailabilityWidget_CONSTS);var s=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.init(t,n),i}return i.__extends(n,e),n.prototype.init=function(e,t){var n=this;this.loginIdStateListener=function(e){return n.onLoginIdStateChange(e,!0)},this.originalDisplay=t.style.display,this.reset(t)},n.prototype.reset=function(e){this.boundedField=this._form.getField(e.getAttribute(n.CONSTS.boundTo))||this._form.getField("loginID")||this._form.getField("username")||this._form.getField("email"),this.boundedField?(this.boundedField._serverValidateAvaliability=!0,this.boundedField.addValidityStateListener(this.loginIdStateListener)):this.warn(t.LoginAvailabilityWidget_CONSTS.selector+" is missing a field to bound to")},n.prototype.linkInstanceElement=function(t){e.prototype.linkInstanceElement.call(this,t),this.boundedField&&this.onLoginIdStateChange(this.boundedField.getValidityState(),!1)},n.prototype.unlinkTemplate=function(){this.boundedField&&this.boundedField.removeValidityStateListener(this.loginIdStateListener),e.prototype.unlinkTemplate.call(this)},n.prototype.onLoginIdStateChange=function(e,t){if(t||(e=a.ValidityStates._undefined),this.instanceElement)switch(window.gigya.utils.DOM.removeClassFromElement(this.instanceElement,"gigya-loginID-availability-progress"),window.gigya.utils.DOM.removeClassFromElement(this.instanceElement,"gigya-loginID-availability-not-available"),window.gigya.utils.DOM.removeClassFromElement(this.instanceElement,"gigya-loginID-availability-available"),e){case a.ValidityStates.valid:this.instanceElement.style.display=this.originalDisplay,this.instanceElement.innerHTML=this._screenSet.getText("available"),window.gigya.utils.DOM.addClassToElement(this.instanceElement,"gigya-loginID-availability-available");break;case a.ValidityStates.error:this.instanceElement.style.display=this.originalDisplay,this.instanceElement.innerHTML=this._screenSet.getText("not_available"),window.gigya.utils.DOM.addClassToElement(this.instanceElement,"gigya-loginID-availability-not-available");break;case a.ValidityStates.pending:this.instanceElement.style.display=this.originalDisplay,this.instanceElement.innerHTML=this._screenSet.getText("checking"),window.gigya.utils.DOM.addClassToElement(this.instanceElement,"gigya-loginID-availability-progress");break;default:this.instanceElement.innerHTML="",this.instanceElement.style.display="none"}},n.prototype.evaluateConditionalAttributes=function(){e.prototype.evaluateConditionalAttributes.call(this)},n.CONSTS=t.LoginAvailabilityWidget_CONSTS,n}(o.BaseFormWidget);t.LoginAvailabilityWidget=s,o.BaseFormWidget.addWidgetToLibrary(s)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(22),a=0;t.MyPhotoWidget_CONSTS={selector:"div.gigya-myPhoto"},r.DeepFreeze(t.MyPhotoWidget_CONSTS);var s=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.containerId=i._screenSet.containerID+"_myPhoto_"+a++,i}return i.__extends(n,e),n.prototype.linkInstanceElement=function(t){e.prototype.linkInstanceElement.call(this,t),this.instanceElement&&(this.instanceElement&&(this.instanceElement.innerHTML='<div id="'+this.containerId+'"></div>'),this.params.containerID||(this.widgetParams=this.params,this.renderWidget()))},n.prototype.unlinkInstanceElement=function(){this.instanceElement&&(this.instanceElement.innerHTML=""),this._instance&&this._instance.dispose(),e.prototype.unlinkInstanceElement.call(this)},n.prototype.renderWidget=function(){var e=this;window.gigya.accounts.showMyPhotoUI(this.widgetParams,{containerID:this.containerId,lang:this._screenSet.lang,regToken:this._screenSet.params.regToken,getInstance:function(t){e._instance=t},onLoad:function(){e._screenSet.centerModal()}}),this.renderWidgetUI=!1},n.CONSTS=t.MyPhotoWidget_CONSTS,n}(o.BaseScreenWidget);t.MyPhotoWidget=s,o.BaseScreenWidget.addWidgetToLibrary(s)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(142),a=n(65),s=n(17),l=0;t.PhotoUploadWidget_CONSTS={selector:"div.gigya-photo-upload"},r.DeepFreeze(t.PhotoUploadWidget_CONSTS);var c=function(e){function n(t,n){var i=e.call(this,t,n)||this;i.photoElementID=i._uploadIframeID+"_photo",i.pathContainerID=i._uploadIframeID+"_path",i.defaultBGImage=window.gigya._.getCdnResource()+"/gs/i/accounts/avatar_64.png";var r=i._screenSet.getTemplates().photoUpload_ui;return i.uiHtml=window.gigya.utils.templates.fill(r,{pathContainerID:i.pathContainerID,photoElementID:i.photoElementID,choose_file:i._screenSet.getText("choose_file"),no_file_chosen:i._screenSet.getText("no_file_chosen"),tip:i._screenSet.getText("maximum_size_of_3mb.")+" JPG, GIF, PNG."}),n.innerHTML="",(window.gigya.localInfo.isIE9||window.gigya.localInfo.isIE8)&&i._form.filters.push({filterOutWidgetsToSend:function(e){return e.profile&&delete e.profile._profilePhoto,e}}),i}return i.__extends(n,e),n.prototype.linkInstanceElement=function(t){e.prototype.linkInstanceElement.call(this,t),this.uiDiv=document.createElement("div"),this.uiDiv.innerHTML=this.uiHtml,this.instanceElement.appendChild(this.uiDiv),this.restoreDefaultBg()},n.prototype.unlinkInstanceElement=function(){this.instanceElement.removeChild(this.uiDiv),this.uiDiv=null,e.prototype.unlinkInstanceElement.call(this)},n.prototype.restoreDefaultBg=function(){var e=document.getElementById(this.photoElementID);e&&(e.style.backgroundImage="url('"+this.defaultBGImage+"')")},n.prototype.getFormHtml=function(){return window.gigya.utils.templates.fill(this._screenSet.getTemplates().photoUpload_form,{formTarget:this._uploadIframeID})},n.prototype.getFormElement=function(){return this._formDiv.getElementsByTagName("form")[0]},n.prototype.getFileElement=function(){return this._uploadForm.elements._profilePhoto},n.prototype.submitUploadForm=function(){this.lastResponseId=this._uploadIframeID+"_"+this._lastQueryId;var t=window.gigya.utils.stringUtils.format("https://"+window.gigya._.getApiDomain("accounts")+"/accounts.uploadProfilePhoto?publish=true&context={0}&saveResponseID={0}&{1}",this.lastResponseId,window.gigya.utils.keyValue.serialize(this.getServerParameters()));this._uploadForm.action=t,document.getElementById(this.pathContainerID).style.backgroundImage="url('"+window.gigya._.getCdnResource()+"/gs/i/accounts/smallLoader.gif')",e.prototype.submitUploadForm.call(this)},n.prototype.serverQueryDone=function(e){var t=this;this.stopUploadCheck();var n=window.gigya.utils.object.removeUndefined(this.getServerParameters());n.saveResponseID=this.lastResponseId,n.noAuth=!0,delete n.login_token,delete n.regToken,window.gigya._.apiAdapter.sendRequest("socialize.getSavedResponse",n,function(e){return t.onUploadSavedResponse(e)},{jsSdkRequestId:this.lastResponseId})},n.prototype.onUploadSavedResponse=function(e){switch(document.getElementById(this.pathContainerID).style.backgroundImage="",e.errorCode){case 0:this.onUploadSuccess();break;case 400006:this.onServerError({errorCode:413004,errorMessage:this._screenSet.getText("profilePhoto_fileSizeError")});break;default:this.onServerError(e)}},n.prototype.onUploadSuccess=function(){var t=this,n=document.getElementById(this.pathContainerID);n&&(n.style.backgroundImage="");var i=this.getServerParameters();i.type="thumbnail",i.context=this._uploadIframeID+ ++l;var r=new Image,o=window.gigya._.getApiDomain("accounts"),s=(i.login_token||i.regToken?"https":window.gigya.localInfo.protocol)+"://"+o+"/accounts.getProfilePhoto?"+window.gigya.utils.keyValue.serialize(i);r.onload=function(){var e=document.getElementById(t.photoElementID),n=r.src;e&&(e.style.backgroundImage="url('"+n+"')"),t._form._screen.setProfilePhoto(n),r=r.onload=r.onerror=null},r.onerror=function(){t.onServerError({errorCode:404004,errorMessage:"Profile photo inaccesible."}),t._form._screen.setProfilePhoto(""),r=r.onload=r.onerror=null},r.src=s,e.prototype.serverQueryDone.call(this,a.ServerStates.Done)},n.prototype.onServerError=function(t){this.restoreDefaultBg(),this._form._screen._screenSet.onScreenResponse(t,this._form),e.prototype.serverQueryDone.call(this,a.ServerStates.Error)},n.CONSTS=t.PhotoUploadWidget_CONSTS,n}(o.BaseUploadWidget);t.PhotoUploadWidget=c,s.BaseFormWidget.addWidgetToLibrary(c)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(22);t.ProfilePhotoWidget_CONSTS={selector:"div.gigya-profile-photo"},r.DeepFreeze(t.ProfilePhotoWidget_CONSTS);var a=function(e){function n(t,n){var i=e.call(this,t,n)||this;return t._profilePhotos.push(i),i}return i.__extends(n,e),n.prototype.linkInstanceElement=function(t){e.prototype.linkInstanceElement.call(this,t);var n=this._screenSet.getProfile(),i=n.thumbnailURL?window.gigya.global.getPhotoURL(n.thumbnailURL):"";this.setThumbnailUrl(i)},n.prototype.setThumbnailUrl=function(e){this.instanceElement.innerHTML=e?'<img src="'+e+'" />':""},n.CONSTS=t.ProfilePhotoWidget_CONSTS,n}(o.BaseScreenWidget);t.ProfilePhotoWidget=a,o.BaseScreenWidget.addWidgetToLibrary(a)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(17),a=n(15),s=n(88);t.RequiredDisplayWidget_CONSTS={selector:".gigya-required-display",boundTo:"data-bound-to"},r.DeepFreeze(t.RequiredDisplayWidget_CONSTS);var l=function(e){function n(t,n){var i=e.call(this,t,n)||this;return"none"===n.style.display&&(n.style.display=""),n.setAttribute("aria-hidden","true"),i}return i.__extends(n,e),n.prototype.linkInstanceElement=function(t){e.prototype.linkInstanceElement.call(this,t),this.updateVisibility()},n.prototype.evaluateConditionalAttributes=function(){e.prototype.evaluateConditionalAttributes.call(this),this.updateVisibility()},n.prototype.updateBoundedField=function(e){this.boundTo=this.instanceElement.getAttribute(t.RequiredDisplayWidget_CONSTS.boundTo),this.boundToField=e},n.prototype.updateVisibility=function(){var e=this.instanceElement;if(e){if(this.boundTo=e.getAttribute(t.RequiredDisplayWidget_CONSTS.boundTo),!this.boundTo)return this.warn(t.RequiredDisplayWidget_CONSTS.selector+" is missing "+t.RequiredDisplayWidget_CONSTS.boundTo+" attribute"),void this.hide();if(this.boundToField=this._form.getField(this.boundTo,this.instanceElement.getAttribute(a.FormInput_CONSTS.arrayKeyValueAttribute)),!this.boundToField)return this.warn(t.RequiredDisplayWidget_CONSTS.selector+"'s form is missing field "+this.boundTo+" to bound to"),void this.hide()}this.boundToField&&this.boundToField.required()?this.show():this.hide()},n.prototype.show=function(){window.gigya.utils.DOM.removeClassFromElement(this.instanceElement,s.ScreenSet_CONSTS.gigyaHidden)},n.prototype.hide=function(){window.gigya.utils.DOM.addClassToElement(this.instanceElement,s.ScreenSet_CONSTS.gigyaHidden)},n.CONSTS=t.RequiredDisplayWidget_CONSTS,n}(o.BaseFormWidget);t.RequiredDisplayWidget=l,o.BaseFormWidget.addWidgetToLibrary(l)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(17),a=n(26);t.SecretQuestionWidget_CONSTS={selector:"div.gigya-secret-question",allowEmpty:"data-allow-empty"},r.DeepFreeze(t.SecretQuestionWidget_CONSTS);var s=function(e){function n(n,i){var o=e.call(this,n,i,!1)||this;o.questions=new Array,n._secretQuestions.push(o);var a=i.querySelectorAll('*[name="secretQuestion"]');return r.ForEach(a,function(e){return o.questions.push(new l(e,o))}),o.answerField=n.getField("secretAnswer"),o.answerField?o:(o.warn(t.SecretQuestionWidget_CONSTS.selector+"'s form is missing secretAnswer field to link to"),o)}return i.__extends(n,e),n.prototype.unlinkTemplate=function(){r.ForEach(this.questions,function(e){return e.unlinkTemplate()}),e.prototype.unlinkTemplate.call(this)},n.prototype.linkInstanceElement=function(n){var i=this;e.prototype.linkInstanceElement.call(this,n),this.instanceElement&&(this.answerField&&this.answerField.instanceElement.setAttribute(t.SecretQuestionWidget_CONSTS.allowEmpty,"1"),r.ForEach(this.questions,function(e){return e.linkInstanceElement(i.instanceElement)}))},n.prototype.unlinkInstanceElement=function(){this.instanceElement&&r.ForEach(this.questions,function(e){return e.unlinkInstanceElement()}),e.prototype.unlinkInstanceElement.call(this)},n.prototype.setQuestion=function(e){r.ForEach(this.questions,function(t){return t.instanceElement.innerHTML=e}),this.answerField&&this.answerField.instanceElement.removeAttribute(t.SecretQuestionWidget_CONSTS.allowEmpty),this.instanceElement.style.display="inline"},n.CONSTS=t.SecretQuestionWidget_CONSTS,n}(o.BaseFormWidget);t.SecretQuestionWidget=s;var l=function(e){function t(t,n){return e.call(this,t,n)||this}return i.__extends(t,e),t}(a.TemplateElement);o.BaseFormWidget.addWidgetToLibrary(s)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(22),a=n(33),s=n(9),l=0;t.SocialLoginWidget_CONSTS={selector:"div.gigya-social-login"},r.DeepFreeze(t.SocialLoginWidget_CONSTS);var c=function(e){function n(n,i){var r=e.call(this,n,i)||this;return r.bindID=r.publishID?r.ID:t.SocialLoginWidget_CONSTS.selector,r.loginMode=a.LoginModes[r.params.loginMode||"standard"],r.containerId=r._screenSet.containerID+"_social_"+l++,r.onErrorResponse=function(e){if(400100!==e.errorCode&&400006!==e.errorCode)return r._screenSet.onScreenResponse(e,r)},r.onLoginResponse=function(e){r._screenSet.removeRegToken(),r._screenSet.onScreenResponse({errorCode:0,event:e},r)},r}return i.__extends(n,e),n.prototype.linkInstanceElement=function(t){if(e.prototype.linkInstanceElement.call(this,t),this.instanceElement){for(;this.instanceElement.firstChild;)this.instanceElement.removeChild(this.instanceElement.firstChild);this._container=document.createElement("div"),this._container.className="gigya-social-login-container",this._container.id=this.containerId,this.instanceElement.appendChild(this._container),this.calculateEnabledProviders(),this.apiParams=this.loginMode.filterParams(window.gigya.utils.object.clone(this._screenSet.params)),this.params.containerID||(this.widgetParams=this.params,this.renderWidget())}},n.prototype.getErrorDisplayForm=function(){return this._screen.getFormByElement(this.instanceElement)},n.prototype.initFromInstanceElement=function(){this.successScreen=this._screenSet.chooseNextScreen(this.instanceElement.getAttribute(s.Form_CONSTS.successScreen))},n.prototype.calculateEnabledProviders=function(){var e=this.loginMode.getLoginProviders(this._screenSet.data.apiData,this.params,this._screenSet.data.regToken);null!=e&&(this.params.enabledProviders=e)},n.prototype.unlinkInstanceElement=function(){this.instanceElement&&(this.instanceElement.innerHTML=""),this._instance&&this._instance.dispose(),e.prototype.unlinkInstanceElement.call(this)},n.prototype.renderWidget=function(){var e=this;this.setContainerSize(this.widgetParams.width,this.widgetParams.height),window.gigya.socialize.showLoginUI(this.apiParams,this.widgetParams,{containerID:this.containerId,accountsSocialLogin:!0,onLogin:this.onLoginResponse,onError:this.onErrorResponse,finalizeRegistration:!0,dontHandleScreenSet:!0,UIMode:this.loginMode!==a.LoginModes.link?"Login":"LinkAccount",include:window.gigya.utils.stringUtils.mergeCommaSeparatedValues("profile,data,emails,subscriptions,preferences",this._screenSet.params.include),regSource:this._screenSet.params.regSource||r.firstPart(r.firstPart(location.href,"?"),"#"),getInstance:function(t){e._instance=t}}),this.renderWidgetUI=!1},n.prototype.setContainerSize=function(e,t){if(e){var n=r.getUnitMeasurementType(e);n!=r.UnitMeasurementType.auto&&(this._container.style.width=parseFloat(e)+n)}if(t){var i=r.getUnitMeasurementType(t);i!=r.UnitMeasurementType.auto&&(this._container.style.height=parseFloat(t)+i)}},n.CONSTS=t.SocialLoginWidget_CONSTS,n}(o.BaseScreenWidget);t.SocialLoginWidget=c,o.BaseScreenWidget.addWidgetToLibrary(c)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(17),a=n(147);t.SubscriptionWidget_CONSTS={selector:"div.gigya-subscription",subscriptionName:"name"},r.DeepFreeze(t.SubscriptionWidget_CONSTS);var s=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i._shouldPopulate=t instanceof a.ProfileForm,i}return i.__extends(n,e),n.prototype.linkInstanceElement=function(t){if(e.prototype.linkInstanceElement.call(this,t),this.instanceElement){var i=this.instanceElement.getAttribute(n.CONSTS.subscriptionName).split(".");i.shift(),this.subscriptionObj={channel:i.pop(),name:i.join(".")};var r=this.templateElement.hasAttribute("data-checked");if(this._shouldPopulate){var o=this._screenSet.getApiData().getAccountInfo;if(o&&o.subscriptions&&o.subscriptions.hasOwnProperty(this.subscriptionObj.name)){var a=o.subscriptions[this.subscriptionObj.name][this.subscriptionObj.channel];a&&(a.hasOwnProperty("isSubscribed")&&(r=a.isSubscribed),a.hasOwnProperty("doubleOptIn")&&"pending"===a.doubleOptIn.status.toLowerCase()&&(this._statusElement=document.createElement("div"),this._statusElement.className="subscription-status-label",this._statusElement.style.paddingLeft="18px",this._statusElement.style.color="grey",this._statusElement.style.fontStyle="italic",this._statusElement.innerText=this._screenSet.getText("subscription_pending_confirmation")))}}this._inuptElement=document.createElement("input"),this._inuptElement.id="subs-checkbox-"+this.subscriptionObj.name,this._inuptElement.name="subscriptions."+this.subscriptionObj.name+"."+this.subscriptionObj.channel+".isSubscribed",this._inuptElement.className="gigya-input-checkbox subscription-checkbox",this._inuptElement.type="checkbox",this._inuptElement.checked=r,this._labelElement=document.createElement("label"),this._labelElement.className="subscription-name-label",this._labelElement.style.display="inline-block",this._labelElement.style.verticalAlign="middle",this._labelElement.style.paddingLeft="5px",this._labelElement.setAttribute("for",this._inuptElement.id),this._container=document.createElement("div"),this._container.className="subs-widget-container",this._container.appendChild(this._inuptElement),this._container.appendChild(this._labelElement),this._statusElement&&this._container.appendChild(this._statusElement),this.instanceElement.appendChild(this._container),this.renderWidget()}},n.prototype.renderWidget=function(){e.prototype.renderWidget.call(this),this._labelElement.innerHTML=this.instanceElement?this.instanceElement.getAttribute("data-label"):""},n.CONSTS=t.SubscriptionWidget_CONSTS,n}(o.BaseFormWidget);t.SubscriptionWidget=s,o.BaseFormWidget.addWidgetToLibrary(s)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(22),a=0;t.TfaWidget_CONSTS={selector:"div.gigya-tfa"},r.DeepFreeze(t.TfaWidget_CONSTS);var s=function(e){function n(n,i){var r=e.call(this,n,i)||this;return r.bindID=r.publishID?r.ID:t.TfaWidget_CONSTS.selector,n._hasTfa=!0,r.tfaContainerId=(r._screenSet.params.containerID||"showScreenSet")+"_showTfaUI_"+a++,r}return i.__extends(n,e),n.prototype.linkInstanceElement=function(t){var n=this;e.prototype.linkInstanceElement.call(this,t),this.instanceElement&&(this.instanceElement.innerHTML='<div id="'+this.tfaContainerId+'"></div>',this._screen.dimScreen(),this.widgetParams||(this.widgetParams=this.params),window.gigya.accounts.showTfaUI(this.params,this.widgetParams,{dontHandleScreenSet:!1,regToken:this._screenSet.data.regToken,lang:this._screenSet.params.lang,containerID:this.tfaContainerId,cssPrefix:"div.gigya-tfa",width:"auto",source:this._screenSet.injectionInfo.methodName,onDone:function(e){n._screen.dimScreen(),n._screenSet.onScreenResponse(e.response,n)},onLoad:function(){n._screen.undimScreen()},onAfterScreenLoad:function(e){e&&e.caption&&e.caption.length&&(n._screen.overrideTemplateCaption(e.caption),n._screenSet.setCaption(e.caption)),n._screenSet.centerModal()},ignoreApiQueue:this._screenSet.params.ignoreApiQueue,customLang:this._screenSet.params.customLang}))},n.prototype.unlinkInstanceElement=function(){this.instanceElement&&(this.instanceElement.innerHTML=""),this._instance&&this._instance.dispose(),e.prototype.unlinkInstanceElement.call(this)},n.prototype.renderWidget=function(){var e=this;window.gigya.accounts.showTfaUI(this.widgetParams,{dontHandleScreenSet:!1,regToken:this._screenSet.data.regToken,containerID:this.tfaContainerId,cssPrefix:"div.gigya-tfa",width:"auto",deviceType:this._screenSet.params.deviceType,source:this._screenSet.injectionInfo.methodName,onDone:function(t){e._screen.dimScreen(),e._screenSet.onScreenResponse(t.response,e)},onLoad:function(){e._screen.undimScreen()},onAfterScreenLoad:function(t){t&&t.caption&&t.caption.length&&(e._screen.overrideTemplateCaption(t.caption),e._screenSet.setCaption(t.caption)),e._screenSet.centerModal()},getInstance:function(t){e._instance=t},ignoreApiQueue:this._screenSet.params.ignoreApiQueue}),this.renderWidgetUI=!1},n.CONSTS=t.TfaWidget_CONSTS,n}(o.BaseScreenWidget);t.TfaWidget=s,o.BaseScreenWidget.addWidgetToLibrary(s)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(22);t.SwitchScreen_CONSTS={selector:"[data-switch-screen]",switchScreen:"data-switch-screen",successScreen:"data-on-success-screen",screenSetSkippedScreen:"data-on-screenset-skipped-screen"},r.DeepFreeze(t.SwitchScreen_CONSTS);var a=function(e){function n(t,n){var i=e.call(this,t,n,!1)||this;return i._screen=t,i.bindID=i.ID,i}return i.__extends(n,e),n.prototype.linkInstanceElement=function(t){var n=this;e.prototype.linkInstanceElement.call(this,t),this.updateAttributes(),this.clickHandler=function(e){var t=n._screen.getFormByElement(n.instanceElement);n._screenSet.switchScreen(n.switchScreen,{errorCode:0,explicitSwitchScreen:!0},t)},this.addEventListener("click",this.clickHandler)},n.prototype.unlinkInstanceElement=function(){e.prototype.unlinkInstanceElement.call(this),this.removeEventListener("click",this.clickHandler)},n.prototype.evaluateConditionalAttributes=function(){e.prototype.evaluateConditionalAttributes.call(this),this.updateAttributes()},n.prototype.updateAttributes=function(){this.switchScreen=this.instanceElement.getAttribute(t.SwitchScreen_CONSTS.switchScreen),this.instanceElement.setAttribute("href","javascript:void(0)"),this.instanceElement.removeAttribute("target")},n.CONSTS=t.SwitchScreen_CONSTS,n}(o.BaseScreenWidget);t.SwitchScreenWidget=a,o.BaseScreenWidget.addWidgetToLibrary(a)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(0),o=n(66),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(e){var t=this;this.challengeExecutor=new gigya.Promise(function(n){var i=t.getID()+"_"+Date.now();e.innerHTML='<div id="'+i+'"></div>',t.challengeRef=new FunCaptcha({public_key:t.siteKey,language:t.params.lang,target_html:i,callback:function(){var i=e.querySelector('[name="fc-token"]');t.captchaToken=i&&i.value,n(t.captchaToken)}})})},t.prototype.reset=function(){"undefined"!=typeof FunCaptcha&&this.challengeRef&&this.captchaToken&&this.challengeRef.refresh_session(),e.prototype.reset.call(this)},t.prototype.loadProvider=function(){var e=this;if("undefined"==typeof FunCaptcha)return i||(i=new gigya.Promise(function(t,n){window[e.callbackID]=function(){delete window[e.callbackID],"undefined"!=typeof FunCaptcha?t():n("error while trying to load FunCaptcha")},window.gigya.utils.script.load(e.providerURL,n)})),i},t.prototype.lazyExecuteOrFail=function(){throw new Error("captchaNeeded")},Object.defineProperty(t.prototype,"provider",{get:function(){return"FunCaptcha"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerURL",{get:function(){return"//funcaptcha.com/fc/api/?onload="+this.callbackID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invisibleSiteKey",{get:function(){return window.gigya.partnerSettings.funCaptcha&&window.gigya.partnerSettings.funCaptcha.siteKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleSiteKey",{get:function(){return window.gigya.partnerSettings.funCaptcha&&window.gigya.partnerSettings.funCaptcha.siteKey},enumerable:!0,configurable:!0}),t}(o.BaseCaptchaHandler);t.FunCaptchaHandler=a,o.CaptchaHandlers.FunCaptcha=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(66),o=n(2),a={br:"bg",he:"iw","es-mx":"es-419",tl:"fil"},s=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(n,e),n.prototype.render=function(e){var t=this;if(this.isInvisible||!o.inIFrame()){var n={sitekey:this.siteKey,callback:function(e){t.captchaToken=e,t._challengeResolver(e)},type:this.params.type,theme:this.params.theme,size:this.params.size};this.isInvisible&&(n.badge=this.params.badge,n.size="invisible");var i=this.getID()+"_"+Date.now();e.innerHTML='<div id="'+i+'"></div>',this._createChallengeExecutor(),this.challengeRef=grecaptcha.render(i,n)}else window.gigya.logger.warn("reCAPTCHA v2 cannot be loaded inside iFrame")},n.prototype.reset=function(){"undefined"!=typeof grecaptcha&&void 0!==this.challengeRef&&(grecaptcha.reset(this.challengeRef),this._createChallengeExecutor()),e.prototype.reset.call(this)},n.prototype.loadProvider=function(){var e,i=this;if("undefined"==typeof grecaptcha)return t.greCaptchaLoad||(t.greCaptchaLoad=new gigya.Promise(function(t,r){var o=function(){return clearTimeout(e),window.gigya.logger.debug("Loading google captcha from "+n.RECAPTCHA_DOMAIN),"undefined"!=typeof grecaptcha?(window.gigya.logger.debug("Aborting. Google captcha already loaded"),t()):i.params.googleCaptchaDomain===n.RECAPTCHA_DOMAIN?(window.gigya.logger.debug("Aborting. Already tried to load from "+n.RECAPTCHA_DOMAIN+" and failed'"),r("Failed to load google's captcha from "+n.RECAPTCHA_DOMAIN)):(i.params.googleCaptchaDomain=n.RECAPTCHA_DOMAIN,void window.gigya.utils.script.load(i.providerURL,r))};e=setTimeout(o,n.RETRY_FROM_RECAPTCHA_TIMEOUT),window[i.callbackID]=function(){delete window[i.callbackID],"undefined"!=typeof grecaptcha?t():r("Error while trying to load grecaptcha")},window.gigya.logger.debug("Loading grecaptcha from "+i._domain),window.gigya.utils.script.load(i.providerURL,o)})),t.greCaptchaLoad},n.prototype.lazyExecuteOrFail=function(){if(this.isInvisible)return grecaptcha.execute(this.challengeRef),this.challengeExecutor;throw new Error("captchaNeeded")},Object.defineProperty(n.prototype,"provider",{get:function(){return"Google"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"providerURL",{get:function(){return"//"+this._domain+"/recaptcha/api.js?render=explicit&onload="+this.callbackID+"&hl="+this._lang},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"invisibleSiteKey",{get:function(){return window.gigya.partnerSettings.invisibleRecaptcha&&window.gigya.partnerSettings.invisibleRecaptcha.siteKey},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visibleSiteKey",{get:function(){return window.gigya.partnerSettings.recaptchaV2&&window.gigya.partnerSettings.recaptchaV2.siteKey},enumerable:!0,configurable:!0}),n.prototype._createChallengeExecutor=function(){var e=this;this.challengeExecutor=new gigya.Promise(function(t){e._challengeResolver=t})},Object.defineProperty(n.prototype,"_domain",{get:function(){var e=0===window.gigya.dataCenter.toLowerCase().indexOf("cn1")||window.gigya.utils.stringUtils.endsWith(window.gigya.dataCenter,"gigay-api.cn");return this.params.googleCaptchaDomain||(e?n.RECAPTCHA_DOMAIN:n.GOOGLE_DOMAIN)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_lang",{get:function(){return a[this.params.lang]||this.params.lang},enumerable:!0,configurable:!0}),n.RECAPTCHA_DOMAIN="www.recaptcha.net",n.GOOGLE_DOMAIN="www.google.com",n.RETRY_FROM_RECAPTCHA_TIMEOUT=3e3,n}(r.BaseCaptchaHandler);t.GoogleCaptchaHandler=s,r.CaptchaHandlers.Google=s},function(e,t,n){(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(9);t.OtpSendCodeForm_CONSTS={gigyaClass:"gigya-otp-send-code-form"},r.DeepFreeze(t.OtpSendCodeForm_CONSTS);var a=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i.__extends(r,n),r.prototype.submitApi=function(){return window.gigya.accounts.otp.sendCode},r.prototype.prePopulateDataFrom=function(){return["getAccountInfo","getAccountInfo.profile"]},r.prototype.onAfterSubmit=function(e){this._screenSet.data.otpData.vToken=e.vToken,n.prototype.onAfterSubmit.call(this,e)},r.prototype.specialFields=function(){return window.gigya.utils.object.merge([n.prototype.specialFields.call(this),{phoneNumber:!0,email:!0}])},r.prototype.performSubmit=function(e){this._saveSpecialFieldsInCache(),n.prototype.performSubmit.call(this,e)},r.prototype._saveSpecialFieldsInCache=function(){var t=this,n=this.getFormData(!0,!0,!0);this._screenSet.getApiData().getAccountInfo=this._screenSet.getApiData().getAccountInfo||{};var i=this.specialFields();Object.keys(i).filter(function(e){return Boolean(i[e])}).forEach(function(i){var r;e(t._screenSet.getApiData().getAccountInfo,((r={})[i]=n[i],r))})},r.CONSTS=t.OtpSendCodeForm_CONSTS,r}(o.BaseForm);t.OtpSendCodeForm=a,o.BaseForm.addFormToLibrary(a),t.MobileLoginForm_CONSTS={gigyaClass:"gigya-mobile-login-form"},r.DeepFreeze(t.MobileLoginForm_CONSTS);var s=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(n,e),n.CONSTS=t.MobileLoginForm_CONSTS,n}(a);t.MobileLoginForm=s,o.BaseForm.addFormToLibrary(s)}).call(this,n(0).__assign)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(9),a=n(149);t.OtpUpdateForm_CONSTS={gigyaClass:"gigya-otp-update-form"},r.DeepFreeze(t.OtpUpdateForm_CONSTS);var s=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(n,e),n.prototype.submitApi=function(){return window.gigya.accounts.otp.update},n.CONSTS=t.OtpUpdateForm_CONSTS,n}(a.OtpVerificationBaseForm);t.OtpUpdateForm=s,o.BaseForm.addFormToLibrary(s)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(9),a=n(149);t.OtpLoginForm_CONSTS={gigyaClass:"gigya-otp-login-form"},r.DeepFreeze(t.OtpLoginForm_CONSTS);var s=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(n,e),n.prototype.submitApi=function(){return window.gigya.accounts.otp.login},n.CONSTS=t.OtpLoginForm_CONSTS,n}(a.OtpVerificationBaseForm);t.OtpLoginForm=s,o.BaseForm.addFormToLibrary(s),t.MobileLoginVerificationForm_CONSTS={gigyaClass:"gigya-mobile-verification-form"},r.DeepFreeze(t.MobileLoginVerificationForm_CONSTS);var l=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(n,e),n.CONSTS=t.MobileLoginVerificationForm_CONSTS,n}(s);t.MobileLoginVerificationForm=l,o.BaseForm.addFormToLibrary(l)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(67),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.getRequestParams=function(){return{}},t.prototype.handleResponse=function(e){},t}(r.BaseApiHandler);t.StandardApiHandler=o,r.BaseApiHandler.addDefaultHandler(o)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(67),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.getRequestParams=function(){return this.dataStore.apiData.getAccountInfo=this.dataStore.apiData.getAccountInfo||{},{phoneNumber:this.dataStore.apiData.getAccountInfo.phoneNumber,email:this.dataStore.apiData.getAccountInfo.email}},t.prototype.handleResponse=function(e){this.dataStore.otpData.vToken=e.vToken},t}(r.BaseApiHandler);t.SendOtpCodeHandler=o,r.BaseApiHandler.addHandler("accounts.otp.sendCode",o)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(67),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.getRequestParams=function(){return{identifier:(this.dataStore.apiData.getAccountInfo||{}).identifier}},t.prototype.handleResponse=function(e){0==e.errorCode&&e.vToken?this.dataStore.pushData.vToken=e.vToken:window.gigya.logger.error("gigya.accounts.auth.push.sendVerification failed")},t}(r.BaseApiHandler);t.SendVerificationHandler=o,r.BaseApiHandler.addHandler("accounts.auth.push.sendVerification",o)},function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(151),t)}]);