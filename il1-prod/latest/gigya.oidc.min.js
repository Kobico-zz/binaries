!function(e){var i={};function n(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=i,n.d=function(e,i,t){n.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,i){if(1&i&&(e=n(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var o in e)n.d(t,o,function(i){return e[i]}.bind(null,o));return t},n.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(i,"a",i),i},n.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},n.p="",n(n.s=385)}({385:function(module,exports){!function(){function ensureJsSdkLoaded(e,i,n){window.gigya&&window.gigya.isGigya?window.gigya.isReady?n():waitForGigyaServiceReady(n):(loadGigyaJS(e,i),waitForGigyaServiceReady(n))}var loadGigyaJS=function(e,i){window.gigya=window.gigya||{},window.gigya.isGigya=!0;var n=0==location.protocol.toLowerCase().indexOf("https"),t=i.dc?"."+i.dc:"",o=(n?"https://cdns"+t+".gigya.com":"http://cdn"+t+".gigya.com")+"/js/gigya.js?apiKey="+e,r=document.createElement("script");r.type="text/javascript",r.src=o,r.async=!0,document.getElementsByTagName("head")[0].appendChild(r)},waitForGigyaServiceReady=function(e){var i=null;void 0!==window.onGigyaServiceReady&&(i=window.onGigyaServiceReady),window.onGigyaServiceReady=function(){i&&i.apply(this,arguments),e()}};function urlParams(e){e.indexOf("?")>-1&&(e=e.substring(e.indexOf("?")+1));for(var i=e.split(/&/),n={},t=0;t<i.length;++t){var o=i[t];if(-1!==o.indexOf("=")){var r=o.split("=");2===r.length&&(n[r[0]]=decodeURIComponent(r[1]))}}return n}function getParameterByName(e){var i=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return i&&decodeURIComponent(i[1].replace(/\+/g," "))}function redirectToLogin(e){var i=window.gigya.utils.JSON.deserialize(e.configJson);if(!i)throw new Error("The params object is not valid.");window.location.replace(i.loginURL)}function redirectToConsent(e,i,n){var t=window.gigya.utils.JSON.deserialize(e.configJson);if(!t)throw new Error("The params object is not valid.");var o={context:n.context,clientID:n.clientID,scope:n.scope,prompt:n.prompt,display:n.display,UID:i.UID,UIDSignature:i.UIDSignature,signatureTimestamp:i.signatureTimestamp},r=window.gigya.utils.URL.addParamsToURL(t.consentURL,o);location.href=r}function redirectToContinue(e,i){var n=getLoginToken(e),t=urlParams(window.location.hash||window.location.search),o=getParameterByName("consent"),r=t.sig,a=t.userKey;"undefined"===a&&(a=null),redirectToContinueEndPoint("authorize/continue",{context:i,login_token:n,consent:o,sig:r,userKey:a,gmidTicket:window.gigya._.apiAdapter.getGmidTicket()},e)}function redirectToError(e,i){var n=window.gigya.utils.JSON.deserialize(e.configJson);if(!n)throw new Error("The params object is not valid.");var t=n.errorURL;t=window.gigya.utils.URL.addParamsToURL(t,i),location.href=t}function redirectToContinueEndPoint(e,i,n){redirect("https://"+window.gigya._.getApiDomain("fidm")+"/oidc/op/v1.0/"+n+"/"+e,{domain:e,apiKey:n,endPoint:e},i)}function redirect(e,i,n){e=window.gigya.utils.templates.fill(e,i),e=window.gigya.utils.URL.addParamsToURL(e,n),location.href=e}function getLoginToken(e){return window.gigya._.apiAdapters.web.tokenStore.get(e)}function getUid(e){window.gigya.socialize.getUserInfo({callback:function(i){if(0===i.errorCode){var n={UID:i.UID,UIDSignature:i.UIDSignature,signatureTimestamp:i.signatureTimestamp};e(n)}}})}function activeUserExists(e,i){return!!getLoginToken(e)&&!!i}function contextKey(e){return"gig_oidcContext_"+e}var sessionStorageTimeout=6e5;function saveContext(e,i,n){var t=contextKey(e);window.gigya.utils.sessionCache.get(t,sessionStorageTimeout,function(e){(e=e||[]).push(i),window.gigya.utils.sessionCache.set(t,e),n()})}function removeContext(e){var i=contextKey(e);window.gigya.utils.sessionCache.remove(i)}function loadContext(e,i){var n=contextKey(e);window.gigya.utils.sessionCache.get(n,sessionStorageTimeout,function(e){var t=(e=e||[]).pop()||{};window.gigya.utils.sessionCache.set(n,e),i(t)})}function processRequest(e){var i=getParams();switch(i.mode){case"login":if(!i.context)throw new Error("missing context param");saveContext(e.apiKey,i,function(){getUid(function(n){activeUserExists(e.apiKey,n.UID)?redirectToConsent(e,n,i):redirectToLogin(e)})});break;case"forceLogin":if(!i.context)throw new Error("missing context param");saveContext(e.apiKey,i,function(){redirectToLogin(e)});break;case"passiveLogin":if(!i.context)throw new Error("missing context param");saveContext(e.apiKey,i,function(){getUid(function(n){activeUserExists(e.apiKey,n.UID)?redirectToConsent(e,n,i):redirectToContinue(e.apiKey,i.context)})});break;case"afterLogin":loadContext(e.apiKey,function(i){saveContext(e.apiKey,i,function(){getUid(function(n){if(!activeUserExists(e.apiKey,n.UID))throw new Error("missing active user");redirectToConsent(e,n,i)})})});break;case"afterConsent":loadContext(e.apiKey,function(i){removeContext(e.apiKey),redirectToContinue(e.apiKey,i.context)});break;case"error":redirectToError(e,i)}}function findConfiguration(){var e=findScriptElement();if(!e)throw new Error("failed to find script element");var i=urlParams(e.src).apiKey,n=e.innerHTML.replace(/^\s+|\s+$/g,"");if(!n)throw new Error("No object params was found.");if(!i)throw new Error("failed to find api key");return{apiKey:i,configJson:n}}function findScriptElement(){for(var e,i=document.getElementsByTagName("script"),n=i.length-1;n>=0;n--){var t=i[n],o=t.src.toLowerCase();if(""!=o&&(o.indexOf("//cdnd*.gigya.com")>-1||o.indexOf("//cdnsd*.gigya.com")>-1||o.indexOf("?apikey=")>-1)&&o.indexOf("gigya.oidc.")>-1){e=t;break}}return e}function deserializeJSON(json,defaultValue,scope){if(!json||!json.replace(/^\s+|\s+$/g,""))return defaultValue||{};try{var keys=[],values=[];if(scope)for(var key in scope)keys.push(key),values.push(scope[key]);var fn=eval("(function("+keys.join(",")+") { return "+json.trim()+"; })");return fn.apply(void 0,values)}catch(e){return console.warn("Error deserializing JavaScript",e),defaultValue||{}}}function getParams(){var e=urlParams(window.location.hash||window.location.search);return{mode:e.mode,context:e.context,clientID:e.client_id||e.clientID,scope:e.scope,prompt:e.prompt,display:e.display,message:e.errorMessage,code:e.errorCode,callID:e.callId}}function bootstrap(){var e=findConfiguration();ensureJsSdkLoaded(e.apiKey,deserializeJSON(e.configJson),function(){processRequest(e)})}bootstrap()}()}});