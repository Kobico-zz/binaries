!function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=289)}({0:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"__extends",function(){return n}),i.d(t,"__assign",function(){return a}),i.d(t,"__rest",function(){return r}),i.d(t,"__decorate",function(){return s}),i.d(t,"__param",function(){return l}),i.d(t,"__metadata",function(){return d}),i.d(t,"__awaiter",function(){return u}),i.d(t,"__generator",function(){return c}),i.d(t,"__exportStar",function(){return p}),i.d(t,"__values",function(){return g}),i.d(t,"__read",function(){return h}),i.d(t,"__spread",function(){return f}),i.d(t,"__spreadArrays",function(){return v}),i.d(t,"__await",function(){return b}),i.d(t,"__asyncGenerator",function(){return m}),i.d(t,"__asyncDelegator",function(){return y}),i.d(t,"__asyncValues",function(){return w}),i.d(t,"__makeTemplateObject",function(){return _}),i.d(t,"__importStar",function(){return x}),i.d(t,"__importDefault",function(){return T});var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function n(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var a=function(){return(a=e||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function r(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]])}return i}function s(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r}function l(e,t){return function(i,o){t(i,o,e)}}function d(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,i,o){return new(i||(i=gigya.Promise))(function(n,a){function r(e){try{l(o.next(e))}catch(e){a(e)}}function s(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(r,s)}l((o=o.apply(e,t||[])).next())})}function c(e,t){var i,o,n,a,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(n=2&a[0]?o.return:a[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(n=(n=r.trys).length>0&&n[n.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){r.label=a[1];break}if(6===a[0]&&r.label<n[1]){r.label=n[1],n=a;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(a);break}n[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function p(e,t){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}function g(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}function h(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var o,n,a=i.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)r.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return r}function f(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function v(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var o=Array(e),n=0;for(t=0;t<i;t++)for(var a=arguments[t],r=0,s=a.length;r<s;r++,n++)o[n]=a[r];return o}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function m(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,n=i.apply(e,t||[]),a=[];return o={},r("next"),r("throw"),r("return"),o[Symbol.asyncIterator]=function(){return this},o;function r(e){n[e]&&(o[e]=function(t){return new gigya.Promise(function(i,o){a.push([e,t,i,o])>1||s(e,t)})})}function s(e,t){try{(i=n[e](t)).value instanceof b?gigya.Promise.resolve(i.value.v).then(l,d):u(a[0][2],i)}catch(e){u(a[0][3],e)}var i}function l(e){s("next",e)}function d(e){s("throw",e)}function u(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}function y(e){var t,i;return t={},o("next"),o("throw",function(e){throw e}),o("return"),t[Symbol.iterator]=function(){return this},t;function o(o,n){t[o]=e[o]?function(t){return(i=!i)?{value:b(e[o](t)),done:"return"===o}:n?n(t):t}:n}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=g(e),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(i){t[i]=e[i]&&function(t){return new gigya.Promise(function(o,n){(function(e,t,i,o){gigya.Promise.resolve(o).then(function(t){e({value:t,done:i})},t)})(o,n,(t=e[i](t)).done,t.value)})}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}}.call(this,i(0).__assign)},130:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.imgBase=window.gigya._.getCdnResource("/gs/i/comments2/"),t.defaultCss={reset:[".gig-tfa-container *, *.gig-tfa-container {","word-wrap:break-word;padding:0px;margin:0px;color:inherit;text-decoration:none;width:auto;float:none;","font-family:arial;color:#333333;position:static;text-align:left;vertical-align:baseline;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}"].join(""),resetRtl:".gig-comments-container *, *.gig-comments-container {direction:rtl;text-align:right;}",global:[".gig-tfa-container {}",".gig-tfa-header-text {margin-bottom:30px;}",".gig-tfa-button.gig-tfa-button-submit.disabled {pointer-events:none; opacity:0.3;}",".gig-tfa-container input:focus {box-shadow:0 0 3px #50BADE, 0 1px 3px rgba(0, 0, 0, 0.05) inset}",".gig-tfa-container input:focus {border: 1px solid #87B9EA; outline: medium none}",".gig-tfa-container input, .gig-tfa-container select {border: 1px solid #CCCCCC;border-radius: 3px 3px 3px 3px;margin: 6px 0;padding: 5px;}",".gig-tfa-container label {margin-right:15px;}","input.gig-tfa-phone-prefix {display:none;}",".gig-tfa-phone-number {width: 100%}",".gig-tfa-label {font-weight:bold;margin:10px 0;}",".gig-tfa-phone-register-select, .gig-tfa-selectbox {width: 100%}",".gig-tfa-phone-register-type-label {margin: 15px 0 3px}",".gig-tfa-phone-register-type * {margin:0;display:inline-block;vertical-align:middle;margin:0;}",".gig-tfa-phone-register-type span {line-height: 15px;}",".gig-tfa-button-container {text-align:right;margin:15px 0 0;}",".gig-tfa-button {","display:inline-block;text-align: center;border: 1px solid #CECECE;cursor: pointer;padding: 0 12px;","color: #333333;font-weight: bold;border-radius: 4px;line-height: 26px;gradient(#FFFFFF,#F2F2F2)}",".gig-tfa-button:hover {gradient(#F2F2F2,#FFFFFF)}",".gig-tfa-error {color:#dd4b39;line-height:14px;font-size:11px;margin:10px 0!important}",".gig-tfa-code-textbox {width: 100%; margin: 6px 0!important}","input.gig-tfa-input-error {border: 1px solid #dd4b39!important}",".gig-tfa-phone-code-resend {color:#2B8DDD;cursor:pointer;}",".gig-tfa-phone-code-phonenumber {}","input.gig-tfa-code-remember-checkbox {margin: 0px 5px 0 0!important;padding: 0;vertical-align: top;}","label.gig-tfa-code-remember-label {display:block; margin: 10px 0 18px!important}",".gig-tfa-phone-resend-yourphone {font-weight:normal}",".gig-tfa-phone-edit-link {margin-left:25px;;color:#2B8DDD;cursor:pointer}",".gig-tfa-select-wrapper {padding:10px 0;margin-bottom: 16px;border-bottom:1px #e0dddd solid}",".gig-tfa-totp-step-label {color: #11598b;font-size:18px!important;padding-bottom:10px}",".gig-tfa-totp-qrcode {text-align:center; margin-bottom: 16px; border-bottom:1px #e0dddd solid}",".gig-tfa-bottom-intro {margin-bottom: 35px!important;margin-top: 15px!important}","div.gig-tfa-totp-header-text {font-size: 15px;color: #4e515e}","div.gig-tfa-button-container.gig-tfa-button-container-top-margin {margin-top:35px!important}","div.gig-tfa-button-container.gig-tfa-button-container-row>.gig-tfa-button {width: 49%!important;}","div.gig-tfa-button-container.gig-tfa-button-container-row div:last-child {float:left!important}","table.gig-tfa-totp-backup-codes {width: 100%;border:1px black dashed;margin:25px 0}","table.gig-tfa-totp-backup-codes td {text-align: center;padding:12px}","div.gig-tfa-row{width:100%;text-align:center; padding:15px 0}",".gig-backup-codes-print-btn{margin-bottom: 10px!important;}","a.gig-tfa-link {color:#1371b9;text-decoration:none;font-size:15px;margin:0!important;cursor:pointer}"].join(""),mobile:[".gig-tfa-container *, *.gig-tfa-container {font-size:16px;-webkit-text-size-adjust:none;}"].join(""),nonMobile:[".gig-tfa-container *, *.gig-tfa-container {font-size:12px}"].join(""),rtl:[].join("")}},131:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTemplates={container:['<div class="gig-tfa-select-provider"></div>','<div class="gig-tfa-provider-wrapper" id="$wrapperId"></div>'].join(""),selectProvider:['<div class="gig-tfa-select-wrapper">','<div class="gig-tfa-label">$selectProviderHeader</div>','<div class="gig-tfa-select">','<div class="gig-tfa-select-text"></div>','<select class="gig-tfa-selectbox"></select>',"</div>"].join(""),progress:'<div class="gig-tfa-progress"></div>',error:["<div>",'<div class="gig-tfa-error"></div>',"</div>"].join(""),phoneRegister:['<div id="$id-header" class="gig-tfa-header-text">$headerText</div>','<div class="gig-tfa-label" id="$id-select-your-country" aria-hidden="true">$select_your_country</div>','<select class="gig-tfa-phone-register-select" width="248" tabindex="0" aria-labelledby="$id-header $id-select-your-country"><option value="0">- Select -</option><optgroup label=""><option value="1" isUS="true">United States</option><option value="1">Canada</option><option value="44">United Kingdom</option><option value="61">Australia</option><option value="81">Japan</option></optgroup><optgroup label="------------------------"><option value="93">Afghanistan</option><option value="355">Albania</option><option value="213">Algeria</option><option value="376">Andorra</option><option value="244">Angola</option><option value="809">Anguilla</option><option value="268">Antigua and Barbuda</option><option value="54">Argentina</option><option value="374">Armenia</option><option value="297">Aruba</option><option value="61">Australia</option><option value="43">Austria</option><option value="994">Azerbaijan</option><option value="973">Bahrain</option><option value="880">Bangladesh</option><option value="246">Barbados</option><option value="375">Belarus</option><option value="32">Belgium</option><option value="501">Belize</option><option value="229">Benin</option><option value="809">Bermuda</option><option value="975">Bhutan</option><option value="591">Bolivia</option><option value="387">Bosnia And Herzegovina</option><option value="267">Botswana</option><option value="55">Brazil</option><option value="246">British Indian Ocean Territory</option><option value="673">Brunei</option><option value="359">Bulgaria</option><option value="226">Burkina Faso</option><option value="257">Burundi</option><option value="855">Cambodia</option><option value="237">Cameroon</option><option value="1">Canada</option><option value="238">Cape Verde</option><option value="345">Cayman Islands</option><option value="235">Chad</option><option value="56">Chile</option><option value="86">China</option><option value="57">Colombia</option><option value="242">Congo</option><option value="243">Congo, The Democratic Republic Of The</option><option value="506">Costa Rica</option><option value="225">Cote d\'Ivoire</option><option value="385">Croatia</option><option value="53">Cuba</option><option value="357">Cyprus</option><option value="420">Czech Republic</option><option value="45">Denmark</option><option value="253">Djibouti</option><option value="767">Dominica</option><option value="809">Dominican Republic</option><option value="670">East Timor</option><option value="593">Ecuador</option><option value="20">Egypt</option><option value="503">El Salvador</option><option value="240">Equatorial Guinea</option><option value="372">Estonia</option><option value="500">Falkland Islands (Malvinas)</option><option value="298">Faroe Islands</option><option value="679">Fiji</option><option value="358">Finland</option><option value="33">France</option><option value="594">French Guiana</option><option value="689">French Polynesia</option><option value="241">Gabon</option><option value="220">Gambia</option><option value="995">Georgia</option><option value="49">Germany</option><option value="233">Ghana</option><option value="350">Gibraltar</option><option value="30">Greece</option><option value="299">Greenland</option><option value="473">Grenada</option><option value="590">Guadeloupe</option><option value="502">Guatemala</option><option value="32767">Guernsey</option><option value="592">Guyana</option><option value="509">Haiti</option><option value="504">Honduras</option><option value="852">Hong Kong</option><option value="36">Hungary</option><option value="354">Iceland</option><option value="91">India</option><option value="62">Indonesia</option><option value="98">Iran</option><option value="964">Iraq</option><option value="353">Ireland</option><option value="44">Isle Of Man</option><option value="972">Israel</option><option value="39">Italy</option><option value="876">Jamaica</option><option value="81">Japan</option><option value="44">Jersey</option><option value="962">Jordan</option><option value="7">Kazakhstan</option><option value="254">Kenya</option><option value="82">Korea, South</option><option value="965">Kuwait</option><option value="996">Kyrgyzstan</option><option value="371">Latvia</option><option value="961">Lebanon</option><option value="266">Lesotho</option><option value="231">Liberia</option><option value="218">Libya</option><option value="423">Liechtenstein</option><option value="370">Lithuania</option><option value="352">Luxembourg</option><option value="853">Macao</option><option value="389">Macedonia</option><option value="261">Madagascar</option><option value="265">Malawi</option><option value="60">Malaysia</option><option value="960">Maldives</option><option value="223">Mali</option><option value="356">Malta</option><option value="596">Martinique </option><option value="222">Mauritania</option><option value="230">Mauritius</option><option value="52">Mexico</option><option value="373">Moldova</option><option value="33">Monaco</option><option value="976">Mongolia</option><option value="382">Montenegro</option><option value="473">Montserrat</option><option value="212">Morocco </option><option value="258">Mozambique</option><option value="95">Myanmar</option><option value="264">Namibia</option><option value="977">Nepal</option><option value="31">Netherlands</option><option value="599">Netherlands Antilles</option><option value="687">New Caledonia</option><option value="64">New Zealand</option><option value="505">Nicaragua</option><option value="227">Niger</option><option value="234">Nigeria</option><option value="1670">Northern Mariana Islands</option><option value="47">Norway</option><option value="968">Oman</option><option value="92">Pakistan</option><option value="970">Palestine</option><option value="507">Panama</option><option value="595">Paraguay</option><option value="51">Peru</option><option value="63">Philippines</option><option value="48">Poland</option><option value="351">Portugal </option><option value="1787">Puerto Rico</option><option value="974">Qatar</option><option value="262">Reunion</option><option value="40">Romania</option><option value="7">Russia</option><option value="250">Rwanda </option><option value="1869">Saint Kitts and Nevis</option><option value="1758">Saint Lucia</option><option value="1784">Saint Vincent</option><option value="966">Saudi Arabia</option><option value="221">Senegal</option><option value="381">Serbia</option><option value="248">Seychelles</option><option value="232">Sierra Leone</option><option value="65">Singapore</option><option value="421">Slovakia</option><option value="386">Slovenia</option><option value="252">Somalia</option><option value="27">South Africa</option><option value="34">Spain</option><option value="94">Sri Lanka</option><option value="249">Sudan</option><option value="597">Suriname</option><option value="268">Swaziland</option><option value="46">Sweden</option><option value="41">Switzerland</option><option value="963">Syria</option><option value="886">Taiwan</option><option value="7">Tajikistan</option><option value="255">Tanzania</option><option value="66">Thailand</option><option value="228">Togo</option><option value="676">Tonga</option><option value="1868">Trinidad And Tobago</option><option value="216">Tunisia</option><option value="90">Turkey</option><option value="993">Turkmenistan</option><option value="256">Uganda</option><option value="380">Ukraine</option><option value="971">United Arab Emirates</option><option value="44">United Kingdom</option><option value="1" isUS="true">United States</option><option value="598">Uruguay</option><option value="7">Uzbekistan</option><option value="678">Vanuatu</option><option value="58">Venezuela</option><option value="84">Viet Nam</option><option value="1284">Virgin Islands, British</option><option value="681">Wallis And Futuna</option><option value="381">Yemen</option><option value="260">Zambia</option><option value="263">Zimbabwe</option></optgroup></select>','<div class="gig-tfa-label" id="$id-phone-number" aria-hidden="true">$enter_your_phone_number</div>','<input class="gig-tfa-phone-prefix" type="text" disabled="disabled"/>','<input class="gig-tfa-phone-number" type="text" aria-labelledby="$id-phone-number" />','<div class="gig-tfa-verification-method" style="display:none">','<div class="gig-tfa-label gig-tfa-phone-register-type-label">$get_code_by</div>','<label class="gig-tfa-phone-register-type gig-tfa-phone-register-type-sms" for="$id-get-sms-code"><input class="gig-tfa-phone-register-type-radio" name="phoneMethod" type="radio" value="sms" id="$id-get-sms-code" checked /> <span>$text_message</span></label>','<label class="gig-tfa-phone-register-type gig-tfa-phone-register-type-voice-call" for="$id-get-voice-code"><input class="gig-tfa-phone-register-type-radio" name="phoneMethod" type="radio" value="voice" id="$id-get-voice-code" /> <span>$voice_call</span></label>',"</div>",'<div class="gig-tfa-error" aria-hidden="true" aria-atomic="true" role="alert"></div>','<div class="gig-tfa-button-container"><div class="gig-tfa-button gig-tfa-button-next" role="button" tabindex="0">$send</div></div>'].join(""),phoneEnterCode:['<div id="$id-header-text" tabindex="-1"  class="gig-tfa-phone-code-header-text">$headerText</div>','<div id="$id-subtext" tabindex="-1" class="gig-tfa-phone-code-header-subtext"><span class="gig-tfa-phone-code-phonenumber"></span>&nbsp;(<span class="gig-tfa-phone-code-resend" tabindex="0" role="button">$resend</span>)</div>','<div class="gig-tfa-label" id="$id-enter-code" tabindex="-1" aria-hidden="true">$enter_code</div>','<input class="gig-tfa-code-textbox" type="text" tabindex="0" aria-labelledby="$id-header-text $id-subtext $id-enter-code" />','<div class="gig-tfa-error" aria-hidden="true" aria-atomic="true" role="alert"></div>','<label class="gig-tfa-code-remember-label" tabindex="-1" for="$id-remember"><input class="gig-tfa-code-remember-checkbox" type="checkbox" tabindex="0" id="$id-remember" />$remember_this_device</label>','<div class="gig-tfa-button-container"><div class="gig-tfa-button gig-tfa-button-submit" tabindex="0" role="button">$submit</div></div>'].join(""),emailEnterCode:['<div id="$id-header-text" tabindex="-1" class="gig-tfa-email-code-header-text">$headerText</div>','<div id="$id-email" tabindex="-1" class="gig-tfa-email-text">$email</div>','<div class="gig-tfa-label" id="$id-enter-code" tabindex="-1" aria-hidden="true">$enter_code</div>','<input class="gig-tfa-code-textbox" type="text" tabindex="0" aria-labelledby="$id-header-text $id-email $id-enter-code"/>','<div class="gig-tfa-error" aria-hidden="true" aria-atomic="true" role="alert"></div>','<label class="gig-tfa-code-remember-label" tabindex="-1" for="$id-remember"><input class="gig-tfa-code-remember-checkbox" type="checkbox" tabindex="0" id="$id-remember" />$remember_this_device</label>','<div class="gig-tfa-button-container"><div class="gig-tfa-button gig-tfa-button-submit" tabindex="0" role="button">$submit</div></div>'].join(""),phoneResend:['<div class="gig-tfa-phone-resend-header-text">$headerText</div>','<div class="gig-tfa-verification-method" style="display:none">','<div class="gig-tfa-label gig-tfa-phone-resend-type-label">$get_code_by</div>','<label class="gig-tfa-phone-resend-type gig-tfa-phone-resend-type-sms" for="$id-get-sms-code"><input class="gig-tfa-phone-resend-type-radio" name="phoneMethod" type="radio" value="sms" id="$id-get-sms-code" /> <span>$text_message</span></label>','<label class="gig-tfa-phone-resend-type gig-tfa-phone-resend-type-voice-call" for="$id-get-voice-code"><input class="gig-tfa-phone-resend-type-radio" name="phoneMethod" type="radio" value="voice" id="$id-get-voice-code" /> <span>$voice_call</span></label>',"</div>",'<div class="gig-tfa-label gig-tfa-phone-resend-yourphone-label">$your_phone_number <span class="gig-tfa-phone-resend-yourphone"></span></div>','<div class="gig-tfa-button-container"><div class="gig-tfa-button gig-tfa-button-send" tabindex="0" role="button">$send</div></div>'].join(""),phoneEdit:['<div class="gig-tfa-phone-edit-header-text">$headerText</div>','<div class="gig-tfa-phone-edit-numbers"></div>'].join(""),phoneEditEntry:['<span class="gig-tfa-phone-edit-number">$phoneNumber</span><span class="gig-tfa-phone-edit-link" data-phoneid="$phoneId" tabindex="0" role="button">$edit</span>'].join(""),totpRegister:['<h2 id="$id-step-1" tabindex="-1" class="gig-tfa-totp-step-label">$step1</h2>','<div id="$id-scan-qr-code-label" tabindex="-1" class="gig-tfa-label">$scan_qr_code</div>','<div class="gig-tfa-totp-qrcode">','<img src="$qrCode"/>',"</div>",'<h2 id="$id-step-2" tabindex="-1" class="gig-tfa-totp-step-label">$step2</h2>','<div class="gig-tfa-label" id="$id-enter-code" tabindex="-1" aria-hidden="true">$enter_code</div>','<input class="gig-tfa-code-textbox" type="text" tabindex="0" aria-labelledby="$id-step-1 $id-scan-qr-code-label $id-step-2 $id-enter-code"/>','<div class="gig-tfa-error" aria-hidden="true" aria-atomic="true" role="alert"></div>','<label class="gig-tfa-code-remember-label" tabindex="-1" for="$id-remember-me"><input class="gig-tfa-code-remember-checkbox" type="checkbox" tabindex="0" id="$id-remember-me" />$remember_this_device</label>','<div id="$id-download-backup-codes" tabindex="-1" class="gig-tfa-label gig-tfa-bottom-intro">$downloadBackupCodesIntro</div>','<div class="gig-tfa-button-container"><div class="gig-tfa-button gig-tfa-button-submit" aria-describedby="$id-download-backup-codes" tabindex="0" role="button">$submit</div></div>'].join(""),totpEdit:['<div id="$id-header" tabindex="-1" aria-label="$headerText" class="gig-tfa-totp-header-text gig-tfa-totp-edit-header-text">$headerText</div>','<div class="gig-tfa-error" aria-hidden="true" aria-atomic="true" role="alert"></div>','<div class="gig-tfa-button-container gig-tfa-button-container-top-margin">','<div class="gig-tfa-button gig-tfa-button-change-device" tabindex="0" aria-labelledby="$id-header" role="button">$changeDevice</div>','<div class="gig-tfa-button gig-tfa-button-backup-codes" tabindex="0" aria-labelledby="$id-header" role="button">$backupCodes</div>',"</div>"].join(""),totpBackupCodes:['<div id="$id-header" tabindex="-1" class="gig-tfa-totp-header-text gig-tfa-totp-backup-codes-header-text">$headerText</div>','<table class="gig-tfa-totp-backup-codes">',"<tr>","<td>$backupCode1</td>","<td>$backupCode2</td>","<td>$backupCode3</td>","</tr>","<tr>","<td>$backupCode4</td>","<td>$backupCode5</td>","<td>$backupCode6</td>","</tr>","<tr>","<td>$backupCode7</td>","<td>$backupCode8</td>","<td>$backupCode9</td>","</tr>","</table>",'<div class="gig-tfa-button-container">','<div class="gig-tfa-button gig-backup-codes-print-btn" tabindex="0" role="button" aria-labelledby="$id-header">$print</div>',"</div>",'<div class="gig-tfa-row">','<a class="gig-tfa-link gig-tfa-generate-new-codes" tabindex="0" role="button">$generateNewCodes</a>',"</div>"].join(""),totpGenerateNewCodesConfirmation:['<div class="gig-tfa-label">$resetCodesQuestion</div>','<div class="gig-tfa-button-container gig-tfa-button-container-row gig-tfa-button-container-top-margin">','<div class="gig-tfa-button gig-backup-codes-confirm" tabindex="0" role="button">$yes</div>','<div class="gig-tfa-button gig-backup-codes-cancel" tabindex="0" role="button">$cancel</div>',"</div>"],totpVerify:['<div class="gig-tfa-label" id="$id-enter-code" tabindex="-1" aria-hidden="true">$enter_code</div>','<input class="gig-tfa-code-textbox" type="text" tabindex="0" aria-labelledby="$id-enter-code"/>','<div class="gig-tfa-error" aria-hidden="true" aria-atomic="true" role="alert"></div>','<label class="gig-tfa-code-remember-label" for="$id-remember-me"><input class="gig-tfa-code-remember-checkbox" type="checkbox" tabindex="0" id="$id-remember-me" />$remember_this_device</label>','<div class="gig-tfa-button-container"><div class="gig-tfa-button gig-tfa-button-submit" tabindex="0" role="button">$submit</div></div>','<div class="gig-tfa-row gig-tfa-use-backup-code-row">','<a class="gig-tfa-link gig-tfa-use-backup-code">$useBackupCode</a>',"</div>"].join(""),pushVerificationPhone:['<div class="gig-tfa-label" id="$id-push-tfa" tabindex="-1" aria-hidden="true">$call_to_action</div>','<div class="gig-tfa-error" aria-hidden="true" aria-atomic="true" role="alert"></div>','<div class="gig-tfa-row gig-tfa-use-backup-code-row">','<a class="gig-tfa-link gig-tfa-use-backup-code">$useBackupCode</a>',"<br/>",'<a class="gig-tfa-link gig-tfa-resend-push-notification">$resendPushNotification</a>',"</div>"].join(""),pushVerificationBackupCodes:['<div class="gig-tfa-label" id="$id-push-tfa" tabindex="-1" aria-hidden="true">$call_to_action</div>','<input class="gig-tfa-code-textbox" type="text" tabindex="0" aria-labelledby="$id-push-tfa"/>','<div class="gig-tfa-error" aria-hidden="true" aria-atomic="true" role="alert"></div>','<div class="gig-tfa-button-container"><div class="gig-tfa-button gig-tfa-button-submit" tabindex="0" role="button">$submit</div></div>','<div class="gig-tfa-row gig-tfa-use-backup-code-row">','<a class="gig-tfa-link gig-tfa-resend-push-notification">$resendPushNotification</a>',"</div>"].join("")}},132:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(133),n=i(134),a=i(135),r=i(136),s=i(290),l={gigyaPhone:o.GigyaPhoneProvider,livelink:n.LiveLinkPhoneProvider,gigyaEmail:a.EmailTfaProvider,gigyaTotp:r.TotpTfaProvider,gigyaPush:s.PushTfaProvider};t.getTfaProviderInstance=function(e,t,i,o,n,a){return l[e]?new l[e](t,i,o,n,a):null},t.isTfaProviderSupported=function(e){return null!=l[e]}},133:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),n=i(83),a=i(32),r=function(e){function t(t,i,o,n,r){var s=e.call(this,t,i,o,n,r)||this;return s.name="gigyaPhone",s.supportedSendMethods=[a.VerificationMethod.SMS,a.VerificationMethod.VOICE],s}return o.__extends(t,e),t}(n.PhoneTfaProvider);t.GigyaPhoneProvider=r},134:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),n=i(83),a=i(32),r=function(e){function t(t,i,o,n,r){var s=e.call(this,t,i,o,n,r)||this;return s.name="livelink",s.supportedSendMethods=[a.VerificationMethod.SMS],s}return o.__extends(t,e),t.prototype.updateNumbers=function(t){var i=this;e.prototype.updateNumbers.call(this,function(){i.phoneNumbers.forEach(function(e){return e.lastMethod="sms"}),t()})},t}(n.PhoneTfaProvider);t.LiveLinkPhoneProvider=r},135:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),n=i(50),a=i(63),r=function(e){function t(t,i,o,n,a,r){void 0===r&&(r=3e5);var s=e.call(this,t,i,o,n,a,r)||this;return s.emails=[],s}return o.__extends(t,e),t.prototype.startFlow=function(e){var t=this;this.showProgress(),this.getEmails(function(){t.hideProgress(),t.showEmailTfaScreen()})},t.prototype.getEmails=function(e){var t=this;window.gigya.accounts.tfa.email.getEmails(this.params,{callback:function(i){t.emails=i.emails,e()}})},t.prototype.showEmailTfaScreen=function(){if(this.emails.length>0){var e=this.emails[0];this.sendVerificationCodeToEmail(e),this.showEnterCode(e)}},t.prototype.sendVerificationCodeToEmail=function(e){var t=this;this.phvToken=null;var i={emailID:e.id,callback:function(e){t.phvToken=e.phvToken}};window.gigya.accounts.tfa.email.sendVerificationCode(this.params,i)},t.prototype.showEnterCode=function(e){var t=this;this.container.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.emailEnterCode,{id:this.container.id,headerText:this.plugin.getText("a_verification_code_has_been_sent_to_colon"),enter_code:this.plugin.getText("enter_code_colon"),remember_this_device:this.plugin.isMobileUI?this.plugin.getText("remember_this_device"):this.plugin.getText("remember_this_computer"),submit:this.plugin.getText("submit")});var i=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-button-submit")[0],o=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-code-textbox")[0],n=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-code-remember-checkbox")[0],r=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-email-text")[0];window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-error")[0];r.innerText=e.obfuscated,o.focus(),a.bindEnterKey(i),window.gigya.utils.DOM.addEventListener(i,"click",function(){t.sendTfaCode(o,n.checked)}),this.plugin.onAfterScreenLoad("tfa-enter-code")},t.prototype.sendTfaCode=function(e,t){var i=this;this.phvToken&&window.gigya.accounts.tfa.email.completeVerification(this.params,{phvToken:this.phvToken,code:e.value,callback:function(o){0==o.errorCode?(i.hideError([e]),i.onDone(o,o.providerAssertion,!t)):i.showError(i.plugin.getText("please_enter_a_valid_code"),[e])}})},t.prototype.onDone=function(e,t,i){this.callback(e,t,i)},t}(n.BaseTfaProvider);t.EmailTfaProvider=r},136:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),n=i(50),a=i(32),r=i(63),s=i(137),l=function(e){function t(t,i,o,n,a,r){var l=e.call(this,t,i,o,n,a)||this;return l._backupCodesManager=r,l.name="gigyaTotp",l._backupCodesManager||(l._backupCodesManager=new s.BackupCodesManager(l)),l}return o.__extends(t,e),t.prototype.startFlow=function(e){this.show()},t.prototype.show=function(){switch(this.mode){case a.TfaMode.register:this.showRegisterMode();break;case a.TfaMode.verify:this.showVerifyMode();break;case a.TfaMode.edit:this.showEditMode()}},t.prototype.showRegisterMode=function(){var e=this;r.createActionInterval(this,function(t){return o.__awaiter(e,void 0,void 0,function(){var e,i=this;return o.__generator(this,function(o){return this.showProgress(),e=function(e){e&&0!==e.errorCode||window.gigya.accounts.tfa.totp.register(i.params,{callback:function(e){if(0!==e.errorCode)return i.container.innerHTML=i.plugin.templates.error,i.showError(i.plugin.getText("an_error_has_occurred_please_try_again_later")||"Error");i.renderRegistrationProcess(e.qrCode,e.sctToken),t>1&&i.showError(i.plugin.getText("totp_session_expired"))}})},t>1?this.plugin.initTfa(this.name,a.TfaMode.register,e):e(),[2]})})},this.restartFlowInterval)},t.prototype.showVerifyMode=function(e){var t=this;void 0===e&&(e=!1),this.container.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.totpVerify,{id:this.container.id,enter_code:e?this.plugin.getText("enter_backup_code"):this.plugin.getText("enter_totp_code"),remember_this_device:this.plugin.isMobileUI?this.plugin.getText("remember_this_device"):this.plugin.getText("remember_this_computer"),submit:this.plugin.getText("submit"),useBackupCode:e?this.plugin.getText("enter_totp_code"):this.plugin.getText("cant_access_use_backup_codes")}),this.renderVerificationSection(e);var i=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-use-backup-code");window.gigya.utils.DOM.addEventListener(i[0],"click",function(){return t.showVerifyMode(!e)}),this.plugin.onAfterScreenLoad("tfa-totp-verification")},t.prototype.showEditMode=function(){var e=this;this.container.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.totpEdit,{headerText:this.plugin.getText("totp_verification_settings_intro"),backupCodes:this.plugin.getText("backup_codes"),changeDevice:this.plugin.getText("totp_change_device")});var t=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-button-change-device")[0],i=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-button-backup-codes")[0];t.focus(),window.gigya.utils.DOM.addEventListener(t,"click",function(){return e.showChangeDeviceScreen()}),window.gigya.utils.DOM.addEventListener(i,"click",function(){return e.showBackupCodesScreen()}),this.plugin.onAfterScreenLoad("tfa-edit",this.plugin.getText("totp_verification_settings"))},t.prototype.showBackupCodesScreen=function(e){var t=this;void 0===e&&(e=null),r.createActionInterval(this,function(){return o.__awaiter(t,void 0,void 0,function(){var t,i,n,a,r,s=this;return o.__generator(this,function(o){switch(o.label){case 0:return(t=e)?[3,2]:(this.showProgress(),[4,this._backupCodesManager.getBackupCodes()]);case 1:if(0!==(i=o.sent()).errorCode||!i.backupCodes)return this.container.innerHTML=this.plugin.templates.error,[2,this.showError(this.plugin.getText("an_error_has_occurred_please_try_again_later")||"Error")];t=i.backupCodes,o.label=2;case 2:return this.container.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.totpBackupCodes,window.gigya.utils.object.merge([{headerText:this.plugin.getText("print_backup_codes_intro"),print:this.plugin.getText("print"),generateNewCodes:this.plugin.getText("generate_backup_codes")},this._backupCodesManager.prepareBackupCodesForView(t)])),n=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-totp-backup-codes")[0],a=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-backup-codes-print-btn")[0],r=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-generate-new-codes")[0],window.gigya.localInfo.isNativeMobileApp?(a.parentElement.style.display="none",r.focus()):a.focus(),window.gigya.utils.DOM.addEventListener(a,"click",function(){return s._backupCodesManager.printBackupCodes(n.outerHTML)}),window.gigya.utils.DOM.addEventListener(r,"click",function(){return s.showGenerateNewCodesConfirmation(t)}),this.plugin.onAfterScreenLoad("tfa-backup-codes",this.plugin.getText("backup_codes")),[2]}})})},this.restartFlowInterval)},t.prototype.showChangeDeviceScreen=function(){var e=this;r.createActionInterval(this,function(t){return o.__awaiter(e,void 0,void 0,function(){var e=this;return o.__generator(this,function(i){return this.showProgress(),this.plugin.initTfa(this.name,a.TfaMode.edit,function(i){i&&0!==i.errorCode||window.gigya.accounts.tfa.totp.register(e.params,{callback:function(i){if(0!==i.errorCode)return e.container.innerHTML=e.plugin.templates.error,e.showError(e.plugin.getText("an_error_has_occurred_please_try_again_later")||"Error");e.renderRegistrationProcess(i.qrCode,i.sctToken,"tfa-totp-change-device",e.plugin.getText("totp_change_device")),t>1&&e.showError(e.plugin.getText("totp_session_expired"))}})}),[2]})})},this.restartFlowInterval)},t.prototype.showGenerateNewCodesConfirmation=function(e){var t=this;this.container.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.totpGenerateNewCodesConfirmation,{resetCodesQuestion:this.plugin.getText("reset_codes_question"),yes:this.plugin.getText("yes"),cancel:this.plugin.getText("cancel")});var i=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-backup-codes-confirm")[0],n=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-backup-codes-cancel")[0];i.focus(),window.gigya.utils.DOM.addEventListener(i,"click",function(){return o.__awaiter(t,void 0,void 0,function(){var e;return o.__generator(this,function(t){switch(t.label){case 0:return this.showProgress(),[4,this._backupCodesManager.generateNewCodes()];case 1:return 0===(e=t.sent()).errorCode&&e.backupCodes?[4,this.showBackupCodesScreen(e.backupCodes)]:(this.container.innerHTML=this.plugin.templates.error,[2,this.showError(this.plugin.getText("an_error_has_occurred_please_try_again_later")||"Error")]);case 2:return t.sent(),[2]}})})}),window.gigya.utils.DOM.addEventListener(n,"click",function(){return t.showBackupCodesScreen(e)}),this.plugin.onAfterScreenLoad("tfa-backup-codes-regenerate",this.plugin.getText("backup_codes"))},t.prototype.sendTfaCode=function(e,t,i,o){var n=this;return void 0===o&&(o=!1),this.verify(e.value,!t.checked,this.sctToken,o).then(function(t){return n.hideError([e]),t}).catch(function(t){n.showError(t,[e]),window.gigya.utils.DOM.removeClassFromElement(i,"disabled")})},t.prototype.verify=function(e,t,i,o){var n=this;return void 0===o&&(o=!1),new gigya.Promise(function(a,r){var s={code:e,callback:function(e){n.hideProgress(),0==e.errorCode?(n.callback(e,e.providerAssertion,t),a(!0)):"Wrong verification code"===e.errorDetails?r(n.plugin.getText("please_enter_a_valid_code")):r(n.plugin.getText("an_error_has_occurred_please_try_again_later")||"Error")}};i&&(s.sctToken=i),o?window.gigya.accounts.tfa.backupcodes.verify(n.params,s):window.gigya.accounts.tfa.totp.verify(n.params,s)})},t.prototype.renderRegistrationProcess=function(e,t,i,o){var n=this;void 0===i&&(i="tfa-totp-registration"),this.sctToken=t,this.container.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.totpRegister,{id:this.container.id,step1:this.plugin.getText("step","${ind}","1"),step2:this.plugin.getText("step","${ind}","2"),scan_qr_code:this.plugin.getText("scan_qr_code"),qrCode:e,enter_code:this.plugin.getText("enter_totp_code"),remember_this_device:this.plugin.isMobileUI?this.plugin.getText("remember_this_device"):this.plugin.getText("remember_this_computer"),downloadBackupCodesIntro:this.plugin.getText("download_backup_codes"),submit:this.plugin.getText("submit")}),this.renderVerificationSection(),this.waitForQRImageToRender().then(function(){n.plugin.onAfterScreenLoad(i,o)}).catch(function(e){window.gigya.logger.warn(e),n.showError(n.plugin.getText("an_error_has_occurred_please_try_again_later")||"Error")})},t.prototype.renderVerificationSection=function(e){var t=this;void 0===e&&(e=!1);var i=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-button-submit")[0],o=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-code-textbox")[0],n=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-code-remember-checkbox")[0];o.focus(),r.bindEnterKey(o,i),r.bindEnterKey(n,i),r.bindEnterKey(i),window.gigya.utils.DOM.addEventListener(i,"click",function(){if(!o.value)return t.showError(t.plugin.getText("please_enter_a_valid_code"),[o]);window.gigya.utils.DOM.addClassToElement(i,"disabled"),t.sendTfaCode(o,n,i,e)})},t.prototype.waitForQRImageToRender=function(){var e=this;return new gigya.Promise(function(t,i){var o=window.gigya.utils.DOM.getElementsByClass(e.container,"gig-tfa-totp-qrcode");if(o[0]){var n=o[0].getElementsByTagName("img");n[0]?(window.gigya.utils.DOM.addEventListener(n[0],"load",t),window.gigya.utils.DOM.addEventListener(n[0],"error",i)):i("TOTP: missing qrCode image element")}else i("TOTP: missing qrCode image element")})},t}(n.BaseTfaProvider);t.TotpTfaProvider=l},137:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),n=i(32),a=function(){function e(e){this._tfaProvider=e}return e.prototype.getBackupCodes=function(){return o.__awaiter(this,void 0,void 0,function(){var e=this;return o.__generator(this,function(t){switch(t.label){case 0:return[4,new gigya.Promise(function(t){e._tfaProvider.plugin.initTfa(e._tfaProvider.name,n.TfaMode.edit,function(i){i&&0!==i.errorCode||window.gigya.accounts.tfa.backupcodes.get(e._tfaProvider.params,{callback:t})})})];case 1:return[2,t.sent()]}})})},e.prototype.generateNewCodes=function(){return o.__awaiter(this,void 0,void 0,function(){var e=this;return o.__generator(this,function(t){switch(t.label){case 0:return[4,new gigya.Promise(function(t){e._tfaProvider.plugin.initTfa(e._tfaProvider.name,n.TfaMode.edit,function(i){i&&0!==i.errorCode||window.gigya.accounts.tfa.backupcodes.create(e._tfaProvider.params,{callback:t})})})];case 1:return[2,t.sent()]}})})},e.prototype.prepareBackupCodesForView=function(t){var i=e.ExpectedNumberOfBackupCodes-t.length;if(i>0)for(var o=0;o<i;o++)t.unshift(this._tfaProvider.plugin.getText("already_used"));return t.reduce(function(e,t,i){return e["backupCode"+(i+1)]=t,e},{})},e.prototype.printBackupCodes=function(e){var t=window.open("","_blank");return t.document.write("<html><head><title>"+this._tfaProvider.plugin.getText("backup_codes")+"</title>"),t.document.write("<style>body{text-align:center;font-family:arial}table{border: 1px dashed;margin:0 auto}td{padding:15px;font-size:20px;}</style>"),t.document.write("</head><body>"),t.document.write("<h3>"+this._tfaProvider.plugin.getText("cant_access_use_backup_codes")+"</h3>"),t.document.write(e),t.document.write("<hr>"),t.document.write("</body></html>"),t.document.close(),t.focus(),t.print(),window.setTimeout(function(){return t.close()},0),!0},e.ExpectedNumberOfBackupCodes=9,e}();t.BackupCodesManager=a},289:function(e,t,i){(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=i(130),n=i(131),a=i(32),r=i(132),s=i(50),l=i(135),d=i(133),u=i(134),c=i(83),p=i(136);window.gigya._||(window.gigya._={}),window.gigya._.plugins||(window.gigya._.plugins={}),window.gigya._.plugins.tfa||(window.gigya._.plugins.tfa={}),window.gigya._.plugins.tfa.factory||(window.gigya._.plugins.tfa.factory={}),window.gigya._.plugins.tfa.providers||(window.gigya._.plugins.tfa.providers={}),e(window.gigya._.plugins.tfa,o,n,a),e(window.gigya._.plugins.tfa.factory,r),e(window.gigya._.plugins.tfa.providers,s,l,d,u,c,p),window.gigya._.UI.attachPlugin(a.TfaPlugin,"accounts","tfa","showTfaUI")}).call(this,i(0).__assign)},290:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),n=i(50),a=i(32),r=i(137),s=i(63),l=12e4,d=3e3,u=function(e){function t(t,i,o,n,a,u,c,p){void 0===c&&(c=l),void 0===p&&(p=d);var g=e.call(this,t,i,o,n,a)||this;return g._backupCodesManager=u,g._pollingLimitMillis=c,g._pollingIntervalMillis=p,g._pollingStartTime=0,g.resendPushNotificationClickHandler=function(){g.stopPolling(),g.plugin.initTfa(g.name,g.mode,function(e){0==e.errorCode?g.plugin.startProviderFlow({name:g.name},g.mode):g.onError("initTfa failed",{method:"resendPushNotificationClickHandler",res:e})})},g.useBackupCodesClickHandler=function(){g.stopPolling(),g.container.innerHTML=window.gigya.utils.templates.fill(g.plugin.templates.pushVerificationBackupCodes,{id:g.container.id,call_to_action:g.plugin.getText("enter_backup_code"),resendPushNotification:g.plugin.getText("resend_push_notification"),useBackupCode:g.plugin.getText("cant_access_use_backup_codes"),submit:g.plugin.getText("submit")});var e=g.getSubmitButton(),t=g.getBackupCodeInput(),i=g.getResendButton();window.gigya.utils.DOM.addEventListener(i,"click",g.resendPushNotificationClickHandler),window.gigya.utils.DOM.addEventListener(e,"click",g.submitBackupCodeClickHandler),s.bindEnterKey(t,e),s.bindEnterKey(e),t.focus(),g.plugin.onAfterScreenLoad("tfa-backup-codes")},g.submitBackupCodeClickHandler=function(){var e=g.getSubmitButton(),t=g.getBackupCodeInput(),i=t.value;if(!i)return g.showError(g.plugin.getText("please_enter_a_valid_code"),[t]);window.gigya.utils.DOM.addClassToElement(e,"disabled"),window.gigya.accounts.tfa.backupcodes.verify(g.params,{code:i,callback:function(i){if(g.hideProgress(),0==i.errorCode)return g.onPushVerified(i);window.gigya.utils.DOM.removeClassFromElement(e,"disabled");var o=g.getBackupCodeErrorMessage(i);g.showError(o,[t])}})},g.name="gigyaPush",g._backupCodesManager||(g._backupCodesManager=new r.BackupCodesManager(g)),g}return o.__extends(t,e),t.prototype.checkIsVerified=function(){var e=this;window.gigya.accounts.tfa.push.isVerified({gigyaAssertion:this.params.gigyaAssertion,regToken:this.params.regToken,callback:function(t){return e.onIsVerifiedResponse(t)}})},t.prototype.onIsVerifiedResponse=function(e){var t=this;return 0!=e.errorCode?this.onError("failed to check push verification state",{method:"isVerified",res:e}):e.providerAssertion?this.onPushVerified(e):void setTimeout(function(){t.shouldContinuePolling()&&t.checkIsVerified()},this._pollingIntervalMillis)},t.prototype.startPolling=function(){this._pollingStartTime=window.gigya.utils.date.now(),this.checkIsVerified()},t.prototype.stopPolling=function(){this._pollingStartTime=0},t.prototype.shouldContinuePolling=function(){return!this.shouldStopPolling()},t.prototype.shouldStopPolling=function(){return window.gigya.utils.date.now()-this._pollingStartTime>=this._pollingLimitMillis||!this.isActive()},t.prototype.onPushVerified=function(e){this.hideError(),this.callback(e,e.providerAssertion,!0)},t.prototype.onError=function(e,t,i){void 0===i&&(i="an_error_has_occurred_please_try_again_later"),e&&window.gigya.logger.error(e,t);var o=this.plugin.getText(i)||"Error";return this.showError(o)},t.prototype.onSendVerificationResponse=function(e){this.hideProgress(),0==e.errorCode?(this.showVerifyMode(),this.startPolling()):this.onError("failed to send push tfa verification",{method:"sendVerification",res:e})},t.prototype.startPushVerificationFlow=function(){var e=this;this.showProgress(),window.gigya.accounts.tfa.push.sendVerification({gigyaAssertion:this.params.gigyaAssertion,regToken:this.params.regToken,callback:function(t){return e.onSendVerificationResponse(t)}})},t.prototype.showVerifyMode=function(){this.container.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.pushVerificationPhone,{id:this.container.id,resendPushNotification:this.plugin.getText("resend_push_notification"),call_to_action:this.plugin.getText("push_tfa_call_to_action"),useBackupCode:this.plugin.getText("cant_access_use_backup_codes")});var e=this.getUseBackupCodesButton(),t=this.getResendButton();window.gigya.utils.DOM.addEventListener(e,"click",this.useBackupCodesClickHandler),window.gigya.utils.DOM.addEventListener(t,"click",this.resendPushNotificationClickHandler),this.plugin.onAfterScreenLoad("tfa-push-verification")},t.prototype.getBackupCodeErrorMessage=function(e){return"Wrong verification code"===e.errorDetails?this.plugin.getText("please_enter_a_valid_code"):this.plugin.getText("an_error_has_occurred_please_try_again_later")||"Error"},t.prototype.showEditMode=function(){this.showBackupCodesEditMode()},t.prototype.showBackupCodesEditMode=function(e){var t=this;void 0===e&&(e=null),s.createActionInterval(this,function(){return o.__awaiter(t,void 0,void 0,function(){var t,i,n,a,r,s=this;return o.__generator(this,function(o){switch(o.label){case 0:return(t=e)?[3,2]:(this.showProgress(),[4,this._backupCodesManager.getBackupCodes()]);case 1:if(0!==(i=o.sent()).errorCode||!i.backupCodes)return this.container.innerHTML=this.plugin.templates.error,[2,this.showError(this.plugin.getText("an_error_has_occurred_please_try_again_later")||"Error")];t=i.backupCodes,o.label=2;case 2:return this.container.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.totpBackupCodes,window.gigya.utils.object.merge([{headerText:this.plugin.getText("print_backup_codes_intro"),print:this.plugin.getText("print"),generateNewCodes:this.plugin.getText("generate_backup_codes")},this._backupCodesManager.prepareBackupCodesForView(t)])),n=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-totp-backup-codes")[0],a=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-backup-codes-print-btn")[0],r=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-generate-new-codes")[0],window.gigya.localInfo.isNativeMobileApp?(a.parentElement.style.display="none",r.focus()):a.focus(),window.gigya.utils.DOM.addEventListener(a,"click",function(){return s._backupCodesManager.printBackupCodes(n.outerHTML)}),window.gigya.utils.DOM.addEventListener(r,"click",function(){return s.showGenerateNewCodesConfirmation(t)}),this.plugin.onAfterScreenLoad("tfa-backup-codes",this.plugin.getText("backup_codes")),[2]}})})},this.restartFlowInterval)},t.prototype.showGenerateNewCodesConfirmation=function(e){var t=this;this.container.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.totpGenerateNewCodesConfirmation,{resetCodesQuestion:this.plugin.getText("reset_codes_question"),yes:this.plugin.getText("yes"),cancel:this.plugin.getText("cancel")});var i=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-backup-codes-confirm")[0],n=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-backup-codes-cancel")[0];i.focus(),window.gigya.utils.DOM.addEventListener(i,"click",function(){return o.__awaiter(t,void 0,void 0,function(){var e;return o.__generator(this,function(t){switch(t.label){case 0:return this.showProgress(),[4,this._backupCodesManager.generateNewCodes()];case 1:return 0===(e=t.sent()).errorCode&&e.backupCodes?[4,this.showBackupCodesEditMode(e.backupCodes)]:(this.container.innerHTML=this.plugin.templates.error,[2,this.showError(this.plugin.getText("an_error_has_occurred_please_try_again_later")||"Error")]);case 2:return t.sent(),[2]}})})}),window.gigya.utils.DOM.addEventListener(n,"click",function(){return t.showBackupCodesEditMode(e)}),this.plugin.onAfterScreenLoad("tfa-backup-codes-regenerate",this.plugin.getText("backup_codes"))},t.prototype.getSubmitButton=function(){return s.getElementByClassName(this.container,"gig-tfa-button-submit")},t.prototype.getBackupCodeInput=function(){return s.getElementByClassName(this.container,"gig-tfa-code-textbox")},t.prototype.getResendButton=function(){return s.getElementByClassName(this.container,"gig-tfa-resend-push-notification")},t.prototype.getUseBackupCodesButton=function(){return s.getElementByClassName(this.container,"gig-tfa-use-backup-code")},t.prototype.startFlow=function(e){switch(this.mode){case a.TfaMode.verify:this.startPushVerificationFlow();break;case a.TfaMode.edit:this.showEditMode()}},t}(n.BaseTfaProvider);t.PushTfaProvider=u},32:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=i(131),a=i(130),r=i(132),s=i(62);!function(e){e[e.verify=0]="verify",e[e.register=1]="register",e[e.add=2]="add",e[e.edit=3]="edit"}(o=t.TfaMode||(t.TfaMode={})),function(e){e[e.SMS=0]="SMS",e[e.VOICE=1]="VOICE"}(t.VerificationMethod||(t.VerificationMethod={})),t.FriendlyProviderNames={livelink:"Phone (SMS)",gigyaPhone:"Phone (Voice/SMS)",gigyaTotp:"Time based Authentication",gigyaPush:"Push Notification",gigyaEmail:"Email"};var l=function(){function e(e){var t=this;this.params=e,this.activeProviders=[],this.inactiveProviders=[],this.templates=window.gigya.utils.object.clone(n.defaultTemplates,!1),this.mode=this.getModeByString(e.mode),this.container=document.getElementById(e.containerID)||document.createElement("div"),this.container.id=this.container.id||String(Date.now()+Math.floor(100*Math.random())),this.initUI(),this.updateProviders(function(){window.gigya.events.dispatchForWidget({eventName:"load"},t.params),t.showSelector()})}return e.prototype.getText=function(e,t,i){return this.params.customLang&&this.params.customLang[e]?this.params.customLang[e].replace(t,i):window.gigya.pluginUtils.lang.getLocalizedText("gigya.services.accounts.plugins.tfa.js",e,this.params.lang,t,i)},e.prototype.initUI=function(){var e=this.params.deviceType?this.params.deviceType.toLowerCase():"desktop";this.isMobileUI="mobile"==e||"auto"==e&&window.gigya.localInfo.isMobile;var t=this.params.cssPrefix;if(t||!this.addedCss){var i=this.params.lang;this.isRtl="he"==i||"ar"==i,window.gigya._.plugins.utils.css.addCss(a.defaultCss.reset,t),this.isRtl&&window.gigya._.plugins.utils.css.addCss(a.defaultCss.resetRtl,t);var o=window.gigya.pluginUtils.css.fixCss(a.defaultCss.global),n=window.gigya.pluginUtils.css.fixCss(a.defaultCss.rtl);window.gigya._.plugins.utils.css.addCss(o,t),this.isRtl&&window.gigya._.plugins.utils.css.addCss(n,t),this.isMobileUI?window.gigya._.plugins.utils.css.addCss(a.defaultCss.mobile,t):window.gigya._.plugins.utils.css.addCss(a.defaultCss.nonMobile,t),window.gigya.localInfo.isMobile&&window.gigya.localInfo.isSafari&&window.gigya._.plugins.utils.css.addCss(".gig-tfa-container * {-webkit-text-size-adjust:none;}",t),this.addedCss=!0}this.isMobileUI&&(this.container.style.width="100%"),this.container.className="gig-tfa-container",this.container.innerHTML=window.gigya.utils.templates.fill(this.templates.container,{wrapperId:this.container.id+"_wrapper"})},e.prototype.showProgress=function(){this.selectedProvider&&this.selectedProvider.container&&window.gigya.global.showLoader(this.selectedProvider.container,"gig-tfa-provider-loader",120)},e.prototype.hideProgress=function(){},e.prototype.removeProvider=function(e){},e.prototype.getModeByString=function(e){for(var t in o)if(o[t]==e)return o[o[t]]},e.prototype.updateProviders=function(e){var t=this;this.showProgress(),window.gigya.accounts.tfa.getProviders(this.params,{callback:function(i){t.hideProgress(),t.inactiveProviders=i.inactiveProviders||[],t.activeProviders=i.activeProviders||[],t.mode||(0==t.activeProviders.length?t.mode=o.register:t.mode=o.verify),e()}})},e.prototype.initTfa=function(e,t,i){var n=this;void 0===i&&(i=function(){}),window.gigya.accounts.tfa.initTFA(this.params,{provider:e,mode:o[t],callback:function(e){n.params.gigyaAssertion=e.gigyaAssertion,i(e)}})},e.prototype.startProviderFlow=function(e,t){var i=this,o=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-provider-wrapper")[0];this.selectedProvider=r.getTfaProviderInstance(e.name,this,o,this.params,t,function(e,t,o){i.onProviderCallback(e,t,o)}),this.selectedProvider.startFlow(e.capabilities)},e.prototype.showProvider=function(e,t){var i=this;this.initTfa(e.name,t==o.edit?o.verify:t,function(o){0==o.errorCode?i.startProviderFlow(e,t):i.onDone(o)})},e.prototype.onProviderCallback=function(e,t,i){var o=this;0==e.errorCode?window.gigya.accounts.tfa.finalizeTFA(this.params,{providerAssertion:t,tempDevice:i,callback:function(e){o.onDone(e)}}):this.onDone(e)},e.prototype.onDone=function(e){this.container.innerHTML="",window.gigya.events.dispatchForWidget({eventName:"done",response:e},this.params)},e.prototype.showSelector=function(e){void 0===e&&(e=this.mode);var t=this.getSupportedProviders(e);t&&0!=t.length&&(this.showProvider(t[0],e),t.length>1&&this.showProviderSelector(t,e))},e.prototype.showProviderSelector=function(e,i){var o=this;void 0===i&&(i=this.mode),this.container.querySelector(".gig-tfa-select-provider").innerHTML=window.gigya.utils.templates.fill(this.templates.selectProvider,{selectProviderHeader:this.getText("select_provider")});var n=this.container.querySelector(".gig-tfa-selectbox");e.map(function(e){var i=document.createElement("option");return i.value=e.name,i.text=t.FriendlyProviderNames[e.name],i}).forEach(function(e){return n.add(e)}),window.gigya.utils.DOM.addEventListener(n,"change",function(e){o.showProgress();var t=e.target.options[e.target.selectedIndex];o.showProvider({name:t.value},i)})},e.prototype.getSupportedProviders=function(e){var t=this.getProvidersForMode(e);if(t&&0!=t.length)return t.filter(function(e){return r.isTfaProviderSupported(e.name)})},e.prototype.getProvidersForMode=function(e){switch(e){case o.register:case o.add:return this.inactiveProviders;case o.edit:return this.getEditableProviders();case o.verify:return this.activeProviders}},e.prototype.getEditableProviders=function(){for(var e=[],t=0;t<=this.activeProviders.length-1;t++){this.isTfaProviderEditable(this.activeProviders[t].name)&&e.push(this.activeProviders[t])}return e},e.prototype.isTfaProviderEditable=function(e){return null!=s.EditableTfaProvidersTypes[e]},e.prototype.onAfterScreenLoad=function(e,t){window.gigya.events.dispatchForWidget({eventName:"afterScreenLoad",screen:e,caption:t},this.params)},e}();t.TfaPlugin=l},50:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(62),n=function(){function e(e,t,i,n,a,r){void 0===r&&(r=o.gigyaAssertionExpiration),this.plugin=e,this.container=t,this.params=i,this.mode=n,this.callback=a,this.restartFlowInterval=r}return e.prototype.showError=function(e,t){void 0===t&&(t=[]);var i=this.container.querySelector("div.gig-tfa-error");i&&(i.innerHTML=e,i.removeAttribute("aria-hidden"));for(var o=0;o<t.length;o++)window.gigya.utils.DOM.addClassToElement(t[o],"gig-tfa-input-error")},e.prototype.hideError=function(e){void 0===e&&(e=[]);var t=this.container.querySelector("div.gig-tfa-error");t&&(t.innerHTML="",t.setAttribute("aria-hidden","true"));for(var i=0;i<e.length;i++)window.gigya.utils.DOM.removeClassFromElement(e[i],"gig-tfa-input-error")},e.prototype.showProgress=function(){this.plugin.showProgress()},e.prototype.hideProgress=function(){this.plugin.hideProgress()},e.prototype.isInDOM=function(){return Boolean(this.container&&this.container.parentElement&&document.getElementById(this.container.parentElement.id))},e.prototype.isActive=function(){return!this.isInactive()},e.prototype.isInactive=function(){return!this.isInDOM()||this.plugin.selectedProvider&&this.plugin.selectedProvider!==this},e}();t.BaseTfaProvider=n},62:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.gigyaPhone=0]="gigyaPhone",e[e.gigyaTotp=1]="gigyaTotp",e[e.gigyaPush=2]="gigyaPush",e[e.livelink=3]="livelink"}(t.EditableTfaProvidersTypes||(t.EditableTfaProvidersTypes={})),t.gigyaAssertionExpiration=3e5},63:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(0);t.getElementByClassName=function(e,t){return window.gigya.utils.DOM.getElementsByClass(e,t)[0]},t.createActionInterval=function(e,t,i,n){var a=this;void 0===n&&(n=function(){return!1});var r=1,s=!1;t(r).then(function(){return s=!0});var l=setInterval(function(){return o.__awaiter(a,void 0,void 0,function(){return o.__generator(this,function(i){switch(i.label){case 0:return!n(r)&&e.isActive()?[3,1]:(clearInterval(l),[3,3]);case 1:return s?(s=!1,[4,t(++r)]):[3,3];case 2:i.sent(),s=!0,i.label=3;case 3:return[2]}})})},i)},t.bindEnterKey=function(e,t){var i=e,o=t||e;window.gigya.utils.DOM.addEventListener(i,"keyup",function(e){var i=e.which||e.keyCode;(13===i||32===i&&!t)&&o.click()})}},83:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),n=i(50),a=i(32),r=i(63),s=function(e){function t(t,i,o,n,a,r){var s=e.call(this,t,i,o,n,a,r)||this;return s.phoneNumbers=[],s.supportedSendMethods=[],s}return o.__extends(t,e),t.prototype.startFlow=function(e){var t=this;e&&(this.supportedSendMethods=e.filter(Boolean).map(function(e){return e.toUpperCase()}).map(function(e){return a.VerificationMethod[e]})),this.updateNumbers(function(){t.show()})},t.prototype.show=function(e){switch(void 0===e&&(e=this.mode),e){case a.TfaMode.edit:this.showEdit();break;case a.TfaMode.add:case a.TfaMode.register:this.showEnterPhoneNumber(e);break;case a.TfaMode.verify:this.showVerify()}},t.prototype.showEdit=function(){var e=this;this.container.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.phoneEdit,{headerText:this.plugin.getText("please_choose_a_number_to_edit_colon")});for(var t=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-phone-edit-numbers")[0],i=[],o=0;o<this.phoneNumbers.length;o++){var n=this.phoneNumbers[o],s=window.gigya.utils.templates.fill(this.plugin.templates.phoneEditEntry,{phoneNumber:n.plain||n.obfuscated,phoneId:n.id,edit:this.plugin.getText("edit")});i.push(s)}t.innerHTML=i.join("");var l=function(t){e.showProgress();var i=t.srcElement||t.currentTarget||e,o=e.getPhoneById(i.getAttribute("data-phoneid"));e.plugin.initTfa(e.name,a.TfaMode.edit,function(t){0==t.errorCode?e.updateNumbers(function(){e.hideProgress(),e.showEnterPhoneNumber(a.TfaMode.edit,e.getPhoneById(o.id))}):e.showError(t.errorMessage)})},d=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-phone-edit-link");for(o=0;o<d.length;o++)r.bindEnterKey(d[o]),window.gigya.utils.DOM.addEventListener(d[o],"click",l);this.plugin.onAfterScreenLoad("tfa-edit")},t.prototype.getPhoneById=function(e){for(var t=0;t<this.phoneNumbers.length;t++)if(this.phoneNumbers[t].id==e)return this.phoneNumbers[t]},t.prototype.showEnterPhoneNumber=function(e,t){var i=this;void 0===e&&(e=a.TfaMode.register);var n=this.plugin.getText("to_keep_your_account_secure_verification_codes_will_be_sent_when_you_login_from_untrusted_devices_dot");e==a.TfaMode.edit&&(n=this.plugin.getText("edit_your_phone_number_where_verification_codes_will_be_received_colon")),this.container.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.phoneRegister,{id:this.container.id,headerText:n,select_your_country:this.plugin.getText("select_your_country_colon"),enter_your_phone_number:this.plugin.getText("enter_your_phone_number_colon"),get_code_by:this.plugin.getText("get_code_by_colon"),text_message:this.plugin.getText("text_message"),voice_call:this.plugin.getText("voice_call"),send:this.plugin.getText("get_the_code")}),this.showVerificationMethods();var s=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-button-next")[0],l=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-phone-register-select")[0],d=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-phone-prefix")[0],u=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-phone-number")[0],c=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-phone-register-type-radio");if(l.focus(),t&&t.plain)for(var p=0;p<l.options.length;p++){var g=l.options[p];if(0===t.plain.indexOf(g.value)){l.selectedIndex=p,d.value=g.value,u.value=t.plain.substr(g.value.length);break}}window.gigya.utils.DOM.addEventListener(l,"change",function(){var e=l.options[l.selectedIndex];e&&(d.value=e.value)}),r.bindEnterKey(s),window.gigya.utils.DOM.addEventListener(s,"click",function(){for(var o,n=0;n<c.length;n++)if(c[n].checked){o=c[n].value;break}if(d.value&&u.value){var r=d.value;"39"!=d.value?r+=u.value.replace(/^0+/,""):r+=u.value,i.mode==a.TfaMode.edit&&t.id&&(i.phoneIdToRemove=t.id);var s={plain:r};i.sendVerificationCodeToPhone(s,e,o)}}),window.gigya.pluginUtils.DOM.setTextboxSubmitButton(u,s),r.createActionInterval(this,function(t){return o.__awaiter(i,void 0,void 0,function(){return o.__generator(this,function(i){return t>1&&u&&u.parentElement&&this.plugin.initTfa(this.name,e),[2]})})},this.restartFlowInterval,function(){return!u||!u.parentElement}),this.plugin.onAfterScreenLoad("tfa-enter-phone-number")},t.prototype.getLastPhone=function(){return this.phoneNumbers[this.phoneNumbers.length-1]},t.prototype.showVerify=function(){if(this.phoneNumbers.length>0){var e=this.getLastPhone();this.sendVerificationCodeToPhone(e,a.TfaMode.verify,e.lastMethod)}},t.prototype.showEnterCode=function(e,t,i){var o=this;this.container.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.phoneEnterCode,{id:this.container.id,headerText:"sms"==i?this.plugin.getText("a_verification_code_has_been_sent_to_your_phone_number_colon"):this.plugin.getText("a_phone_call_with_your_verification_code_has_been_placed_to_colon"),resend:t==a.TfaMode.verify?this.plugin.getText("didn't_get_the_code_qm"):this.plugin.getText("change_resend"),enter_code:this.plugin.getText("enter_code_colon"),remember_this_device:this.plugin.isMobileUI?this.plugin.getText("remember_this_device"):this.plugin.getText("remember_this_computer"),submit:this.plugin.getText("submit")});var n=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-button-submit")[0],s=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-phone-code-resend")[0],l=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-code-textbox")[0],d=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-code-remember-checkbox")[0],u=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-phone-code-phonenumber")[0];window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-error")[0];u.innerHTML=e.plain||e.obfuscated,l.focus(),r.bindEnterKey(l,n),r.bindEnterKey(d,n),r.bindEnterKey(n),window.gigya.utils.DOM.addEventListener(n,"click",function(){o.sendTfaCode(l,d)}),r.bindEnterKey(s);var c=function(){o.plugin.initTfa(o.name,t,function(){t==a.TfaMode.register||t==a.TfaMode.add||t==a.TfaMode.edit?o.showEnterPhoneNumber(t,e):o.showResend(t,e)})},p=setTimeout(function(){l&&l.parentElement&&c()},this.restartFlowInterval);window.gigya.utils.DOM.addEventListener(s,"click",function(){c(),clearTimeout(p)}),this.plugin.onAfterScreenLoad("tfa-enter-code")},t.prototype.sendTfaCode=function(e,t){var i=this;if(this.phvToken){var o=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-button-submit")[0];window.gigya.utils.DOM.addClassToElement(o,"disabled"),this.completeVerification(this.phvToken,e.value,function(n){0==n.errorCode?(i.hideError([e]),i.onDone(n,n.providerAssertion,!t.checked)):(i.showError(i.plugin.getText("please_enter_a_valid_code"),[e]),window.gigya.utils.DOM.removeClassFromElement(o,"disabled"))})}},t.prototype.showResend=function(e,t){var i=this,o=this.supportedSendMethods.length>=2?this.plugin.getText("choose_how_to_receive_the_verification_code_colon"):"";this.container.innerHTML=window.gigya.utils.templates.fill(this.plugin.templates.phoneResend,{id:this.container.id,headerText:o,get_code_by:this.plugin.getText("get_code_by_colon"),text_message:this.plugin.getText("text_message"),voice_call:this.plugin.getText("voice_call"),send:this.plugin.getText("get_the_code"),your_phone_number:this.plugin.getText("your_phone_number_colon")}),this.showVerificationMethods();for(var n=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-button-send")[0],a=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-phone-resend-yourphone")[0],s=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-phone-resend-type-radio"),l=0;l<s.length;l++)if(s[l].value==t.lastMethod){s[l].checked=!0;break}a.innerHTML=t.plain||t.obfuscated,r.bindEnterKey(n),window.gigya.utils.DOM.addEventListener(n,"click",function(){for(var o,n=0;n<s.length;n++)if(s[n].checked){o=s[n].value;break}i.sendVerificationCodeToPhone(t,e,o)}),this.plugin.onAfterScreenLoad("tfa-resend")},t.prototype.showVerificationMethods=function(){var e=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-verification-method");if(e.length&&e[0].style&&this.supportedSendMethods.length>=2)e[0].style.display="";else{var t=window.gigya.utils.DOM.getElementsByClass(this.container,"gig-tfa-button-container")[0];t&&t.style&&(t.style.marginTop="20px")}},t.prototype.updateNumbers=function(e){var t=this;this.mode==a.TfaMode.add||this.mode==a.TfaMode.edit||this.mode==a.TfaMode.verify?(this.showProgress(),window.gigya.accounts.tfa.phone.getRegisteredPhoneNumbers(this.params,{callback:function(i){t.hideProgress(),t.phoneNumbers=i.phones,e()}})):e()},t.prototype.sendVerificationCodeToPhone=function(e,t,i){var o=this;if(e.plain||e.obfuscated){var n={method:i||"sms",callback:function(e){o.phvToken=e.phvToken}};e.id?n.phoneID=e.id:n.phone=e.plain,this.phvToken=null,window.gigya.accounts.tfa.phone.sendVerificationCode(this.params,n),this.showEnterCode(e,t,i)}},t.prototype.completeVerification=function(e,t,i){window.gigya.accounts.tfa.phone.completeVerification(this.params,{phvToken:e,code:t,callback:function(e){i(e)}})},t.prototype.onDone=function(e,t,i){var o=this;this.phoneIdToRemove?window.gigya.accounts.tfa.phone.removePhone(this.params,{phoneId:this.phoneIdToRemove,callback:function(){o.callback(e,t,i)}}):this.callback(e,t,i)},t}(n.BaseTfaProvider);t.PhoneTfaProvider=s}});