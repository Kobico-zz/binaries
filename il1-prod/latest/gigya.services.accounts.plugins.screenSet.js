/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/accounts/Gigya.JS.Plugin.screenSet2/app/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/tslib/tslib.es6.js":
/*!*****************************************!*\
  !*** ./node_modules/tslib/tslib.es6.js ***!
  \*****************************************/
/*! exports provided: __extends, __assign, __rest, __decorate, __param, __metadata, __awaiter, __generator, __exportStar, __values, __read, __spread, __spreadArrays, __await, __asyncGenerator, __asyncDelegator, __asyncValues, __makeTemplateObject, __importStar, __importDefault */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(__webpack_provided_Object_dot_assign) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__extends", function() { return __extends; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__assign", function() { return __assign; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__rest", function() { return __rest; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__decorate", function() { return __decorate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__param", function() { return __param; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__metadata", function() { return __metadata; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__awaiter", function() { return __awaiter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__generator", function() { return __generator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__exportStar", function() { return __exportStar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__values", function() { return __values; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__read", function() { return __read; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__spread", function() { return __spread; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__spreadArrays", function() { return __spreadArrays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__await", function() { return __await; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncGenerator", function() { return __asyncGenerator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncDelegator", function() { return __asyncDelegator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncValues", function() { return __asyncValues; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__makeTemplateObject", function() { return __makeTemplateObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__importStar", function() { return __importStar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__importDefault", function() { return __importDefault; });
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/* global Reflect, Promise */

var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return extendStatics(d, b);
};

function __extends(d, b) {
    extendStatics(d, b);
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

var __assign = function() {
    __assign = __webpack_provided_Object_dot_assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    }
    return __assign.apply(this, arguments);
}

function __rest(s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
}

function __decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}

function __param(paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
}

function __metadata(metadataKey, metadataValue) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
}

function __awaiter(thisArg, _arguments, P, generator) {
    return new (P || (P = gigya.Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

function __exportStar(m, exports) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}

function __values(o) {
    var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;
    if (m) return m.call(o);
    return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
}

function __read(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
}

function __spread() {
    for (var ar = [], i = 0; i < arguments.length; i++)
        ar = ar.concat(__read(arguments[i]));
    return ar;
}

function __spreadArrays() {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};

function __await(v) {
    return this instanceof __await ? (this.v = v, this) : new __await(v);
}

function __asyncGenerator(thisArg, _arguments, generator) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var g = generator.apply(thisArg, _arguments || []), i, q = [];
    return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i;
    function verb(n) { if (g[n]) i[n] = function (v) { return new gigya.Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }
    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }
    function step(r) { r.value instanceof __await ? gigya.Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }
    function fulfill(value) { resume("next", value); }
    function reject(value) { resume("throw", value); }
    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }
}

function __asyncDelegator(o) {
    var i, p;
    return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;
    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === "return" } : f ? f(v) : v; } : f; }
}

function __asyncValues(o) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var m = o[Symbol.asyncIterator], i;
    return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
    function verb(n) { i[n] = o[n] && function (v) { return new gigya.Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
    function settle(resolve, reject, d, v) { gigya.Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }
}

function __makeTemplateObject(cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};

function __importStar(mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result.default = mod;
    return result;
}

function __importDefault(mod) {
    return (mod && mod.__esModule) ? mod : { default: mod };
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js")["__assign"]))

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts":
/*!*****************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var TemplateElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var BaseServerWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget.ts");
var LoginModes_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts");
var PasswordInputs_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PasswordInputs */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PasswordInputs.ts");
var Consent_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.Form_CONSTS = {
    originalSuccessScreen: 'data-original-success-screen',
    successScreen: 'data-on-success-screen',
    autoSkipScreen: 'data-on-auto-skip-screen',
    autoSkipFlag: 'data-auto-skip',
    screenSetSkippedScreen: 'data-on-screenset-skipped-screen',
    formErrorClass: 'gigya-form-error',
    defaultCheckedAttribute: 'data-checked',
};
exports.CUSTOM_VALIDATION_TIMEOUT_WARNING = 10000;
utils_1.DeepFreeze(exports.Form_CONSTS);
var NOT_IMPLEMENTED = 'Not implemented';
var BaseForm = /** @class */ (function (_super) {
    tslib_1.__extends(BaseForm, _super);
    function BaseForm(_screen, elForm, gigyaClass) {
        var _this = _super.call(this, elForm, _screen) || this;
        _this._screen = _screen;
        _this.gigyaClass = gigyaClass;
        _this.formErrors = {};
        // Form inputs
        _this.dataToServer = new Array();
        _this._dynamicInputs = new Array();
        _this._inputs = new Array();
        _this._errorDisplayElements = {};
        _this._widgets = new Array();
        _this._passwordInputs = new Array();
        _this._passwordRetypes = new Array();
        _this._secretQuestions = new Array();
        _this._autoSkipContainers = new Array();
        _this._serverWidgets = new Array();
        _this._needContainerHistory = false;
        _this.filters = new Array();
        _this.isPopulated = false;
        _this.dataStore = _this._screenSet.data;
        _this.bindID = _this.publishID ? _this.ID : gigyaClass;
        _this.originalSuccessScreen = elForm.getAttribute(exports.Form_CONSTS.successScreen);
        _this.successScreen = _this._screenSet.chooseNextScreen(_this.originalSuccessScreen);
        _this.autoSkip = elForm.getAttribute(exports.Form_CONSTS.autoSkipFlag) == 'true';
        _this.autoSkipScreen = elForm.getAttribute(exports.Form_CONSTS.autoSkipScreen) || _this.successScreen;
        _this.screenSetSkippedScreen = elForm.getAttribute(exports.Form_CONSTS.screenSetSkippedScreen) || _this.successScreen;
        _this.registerFormInputs();
        _this.registerBoundedErrorElements();
        _this._widgets = BaseFormWidget_1.BaseFormWidget.registerWidgets(_this);
        _this.submitHandler = function (event) {
            window.gigya.utils.DOM.disableDefaultEventHandling(event);
            _this.submit();
        };
        _this.addEventListener('submit', _this.submitHandler);
        _this.fieldChangedHandler = function (event) {
            _this.evaluateConditionalAttributes();
        };
        return _this;
    }
    Object.defineProperty(BaseForm.prototype, "submitButtonClicked", {
        get: function () {
            return this._submitButtonClicked;
        },
        enumerable: true,
        configurable: true
    });
    BaseForm.addFormToLibrary = function (form) {
        BaseForm.FormsLibrary[form.CONSTS.gigyaClass] = form;
    };
    BaseForm.registerForms = function (parent) {
        var forms = new Array();
        utils_1.ForEachProp(BaseForm.FormsLibrary, function (formType, gigyaClass) {
            var elements = parent.templateElement.querySelectorAll("form." + gigyaClass);
            utils_1.ForEach(elements, function (el) {
                // #43904 - Ensure form is never submitted, even in case of initialization error.
                // This works by modifying the HTML attribute of the instance element before initialization.
                // When the element is cloned into an instance, all submissions will be cancelled by default.
                el.setAttribute('onsubmit', 'return false;');
                forms.push(new formType(parent, el, gigyaClass));
            });
        });
        return forms;
    };
    BaseForm.prototype.registerFormInputs = function () {
        this._inputs = FormInput_1.FormInput.registerFormInputs(this.templateElement.elements, this);
        if (this._passwordInputs.length > 0)
            this._validatedPassword = this._passwordInputs[0];
    };
    BaseForm.prototype.addDataField = function (field) {
        this.dataToServer.push(field);
    };
    BaseForm.prototype.addDynamicWidgets = function (rootEl) {
        var _this = this;
        var newWidgets = BaseFormWidget_1.BaseFormWidget.registerDynamicWidgets(this, rootEl);
        utils_1.ForEach(newWidgets, function (w) { return w.linkInstanceElement(_this.instanceElement); });
        this._widgets = this._widgets.concat(newWidgets);
        return newWidgets;
    };
    BaseForm.prototype.removeDynamicWidgets = function (widgetsToRemove) {
        if (!this._widgets || !this._widgets.length)
            return;
        this._widgets = this._widgets.filter(function (w) { return widgetsToRemove.indexOf(w) < 0; });
        widgetsToRemove.forEach(function (widget) {
            widget.unlinkInstanceElement();
            widget.unlinkTemplate();
        });
    };
    BaseForm.prototype.isFormBoundedElement = function (boundedElement) {
        if (boundedElement.boundedTo === this.bindID)
            return true;
        var el = boundedElement.instanceElement || boundedElement.templateElement;
        var thisEl = this.instanceElement || this.templateElement;
        while (el && el !== thisEl && el !== document.documentElement)
            el = el.parentElement;
        return el === thisEl;
    };
    BaseForm.prototype.linkAndPopulateElements = function (items) {
        var _this = this;
        var linkItem = function (i) { return i.linkInstanceElement(_this.instanceElement); };
        utils_1.ForEach(items, linkItem);
        this.prePopulate();
    };
    BaseForm.prototype.ignoredFields = function () {
        return {
            'g-recaptcha-response': true,
            'fc-token': true,
        };
    };
    BaseForm.prototype.registerBoundedErrorElements = function () {
        var _this = this;
        // Find all error display elements on the screen in this form.
        var formBoundedElements = new Array();
        this._errorDisplayElements = {};
        utils_1.ForEachProp(this._screen._errorDisplayElements, function (boundedElements) {
            utils_1.ForEach(boundedElements, function (boundedElement) {
                if (_this.isFormBoundedElement(boundedElement)) {
                    formBoundedElements.push(boundedElement);
                }
            });
        });
        // Loop through each error element on this form.
        utils_1.ForEach(formBoundedElements, function (boundedElement) {
            boundedElement._form = _this;
            // Unless bound to this form, normalize field name (for example, "birthYear" becomes "profile.birthYear").
            var boundedTo = boundedElement.boundedTo === _this.bindID ? _this.bindID : _this.getNormalizedFieldName(boundedElement.boundedTo);
            // Add to list of elements bound to specific ID.
            var boundedList = _this._errorDisplayElements[boundedTo];
            if (!boundedList) {
                boundedList = _this._errorDisplayElements[boundedTo] = [];
            }
            boundedList.push(boundedElement);
        });
    };
    BaseForm.prototype.unlinkTemplate = function () {
        this.removeEventListener('submit', this.submitHandler);
        var unlinkItem = function (i) { return i.unlinkTemplate(); };
        utils_1.ForEach(this._widgets, unlinkItem);
        utils_1.ForEach(this._inputs, unlinkItem);
        _super.prototype.unlinkTemplate.call(this);
    };
    BaseForm.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.instanceElement) {
            this.linkAndPopulateElements(this._inputs);
            this.linkAndPopulateElements(this._widgets);
            // Add event listener after link to instance elements.
            this.addEventListener('fieldChanged', this.fieldChangedHandler);
        }
    };
    BaseForm.prototype.getLoginProviders = function () {
        return LoginModes_1.LoginModes.standard.getLoginProviders(this._screenSet.data.apiData, this._screenSet.params, this._screenSet.data.regToken);
    };
    BaseForm.prototype.unlinkInstanceElement = function () {
        // The event listener needs to be removed so that it can't be triggered when instance elements don't exist.
        this.removeEventListener('fieldChanged', this.fieldChangedHandler);
        this.clearDynamicFields(this._dynamicInputs);
        this._dynamicInputs = [];
        if (this.instanceElement) {
            var unlinkItem = function (i) { return i.unlinkInstanceElement(); };
            utils_1.ForEach(this._widgets, unlinkItem);
            utils_1.ForEach(this._inputs, unlinkItem);
        }
        _super.prototype.unlinkInstanceElement.call(this);
    };
    //#region pre-populate form
    BaseForm.prototype.prePopulateDataFrom = function () {
        return [];
    };
    BaseForm.prototype.prePopulateData = function () {
        var apiData = this._screenSet.getApiData();
        var apiDataForForm = [{}];
        utils_1.ForEach(this.prePopulateDataFrom(), function (field) {
            apiDataForForm.push(window.gigya.utils.object.getPropertyBySerializedName(apiData, field, false));
        });
        return window.gigya.utils.object.merge(apiDataForForm);
    };
    BaseForm.prototype.getErrorKey = function (response) {
        var errorCode = response.errorCode;
        switch (errorCode) {
            case GSErrors_1.GSErrors.ACCOUNT_TEMPORARILY_LOCKED_OUT:
                return 'account_temporarily_locked_out';
            case GSErrors_1.GSErrors.ACCOUNT_DISABLED:
                return 'account_is_disabled';
            case GSErrors_1.GSErrors.LOGIN_FAILED_CAPTCHA_REQUIRED:
            case GSErrors_1.GSErrors.LOGIN_FAILED_WRONG_CAPTCHA:
                return 'login_captcha_error';
            case GSErrors_1.GSErrors.LOGIN_IDENTIFIER_EXISTS:
                return 'login_identifier_exists';
            case GSErrors_1.GSErrors.UNIQUE_IDENTIFIER_EXISTS:
                return 'unique_identifier_exists';
            case GSErrors_1.GSErrors.UNDERAGE_USER:
                return 'sorry_we_are_not_able_to_process_your_registration'; //COPPA
            case GSErrors_1.GSErrors.INVALID_LOGINID:
                return 'invalid_login_or_password';
            case GSErrors_1.GSErrors.LOGINID_DOES_NOT_EXIST:
                return 'there_is_no_user_with_that_username_or_email';
            case GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE: // invalid parameter value
                return 'there_are_errors_in_your_form_please_try_again';
            case GSErrors_1.GSErrors.OLD_PASSWORD_USED:
                return 'old_password_cannot_be_the_same_as_new_password';
            case GSErrors_1.GSErrors.NETWORK_ERROR:
                return 'network_error';
            case GSErrors_1.GSErrors.VALIDATION_ERROR: // Validation_error
                var captchaError = response.validationErrors.filter(function (err) { return err.errorCode === GSErrors_1.GSErrors.CAPTCHA_VERIFICATION_FAILED; })[0];
                return captchaError ? 'register_captcha_error' : 'there_are_errors_in_your_form_please_try_again';
            case GSErrors_1.GSErrors.OK:
            default:
                // Nothing to do for the error message here
                return '';
        }
    };
    // Pre-populate form data from server or default values.
    BaseForm.prototype.prePopulate = function () {
        var _this = this;
        var populateData = this.prePopulateData();
        this.updateDynamicFields();
        var updateField = function (field) {
            var fieldName = field.getName(true);
            if (fieldName) {
                var dataValue = null;
                var arrayRootField = field.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.arrayRootAttribute);
                if (!arrayRootField) {
                    dataValue = window.gigya.utils.object.getPropertyBySerializedName(populateData, fieldName, false);
                }
                else {
                    var arrayKeyField = field.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.arrayKeyFieldAttribute);
                    var arrayKeyValue = field.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.arrayKeyValueAttribute);
                    if (!arrayKeyField || !arrayKeyValue) {
                        _this.warn('Field not populated because data-array-root provided without data-array-key-field and data-array-key-value', fieldName);
                    }
                    else {
                        var arrayRoot = window.gigya.utils.object.getPropertyBySerializedName(populateData, arrayRootField, false);
                        if (arrayRoot && arrayRoot.constructor === Array && arrayRoot.length) {
                            // Find element.
                            for (var _i = 0, arrayRoot_1 = arrayRoot; _i < arrayRoot_1.length; _i++) {
                                var o = arrayRoot_1[_i];
                                var arrayKeyFieldValue = window.gigya.utils.object.getPropertyBySerializedName(o, arrayKeyField, false);
                                if (arrayKeyValue === String(arrayKeyFieldValue)) {
                                    dataValue = window.gigya.utils.object.getPropertyBySerializedName(o, fieldName.substr(arrayRootField.length + 1), false);
                                    break;
                                }
                            }
                        }
                    }
                }
                if (dataValue !== null) {
                    field.prePopulate(dataValue);
                }
                else if (field.type === 'checkbox') {
                    var checkboxInstanceElement = field.instanceElement;
                    var defaultCheckedCondition = field.instanceElement.getAttribute(exports.Form_CONSTS.defaultCheckedAttribute);
                    if (defaultCheckedCondition) {
                        checkboxInstanceElement.checked = Boolean(field.evaluateExpression({ condition: defaultCheckedCondition }));
                    }
                    // Set default value to checked property.
                    // This is necessary to trigger conditionals that rely on the checkbox's value.
                    field.setValue(checkboxInstanceElement.checked);
                }
            }
        };
        utils_1.ForEach(this._inputs, updateField);
        utils_1.ForEach(this._dynamicInputs, updateField);
        this.isPopulated = true;
    };
    BaseForm.prototype.getExtraProfileFields = function (missingOnly) {
        var _this = this;
        var alreadyHandledFields = {};
        return this.dataToServer
            .map(function (field) { return field.normalizedFieldName; })
            .concat(this._widgets.reduce(function (res, widget) { return res.concat(widget.getFieldsNames()); }, [])) // get also fieldNames from widgets that may not be filled in dataToServer
            .filter(function (n) { return utils_1.firstPart(n, '.') === _this.profileObjectName(); }) // make sure it is in profile namespace
            .map(function (n) { return utils_1.firstPart(n.replace(_this.profileObjectName() + '.', ''), '.'); }) // get the property name itself
            .reduce(function (fieldNames, fn) {
            if (alreadyHandledFields[fn])
                return fieldNames;
            alreadyHandledFields[fn] = true;
            var profile = _this._screenSet.getProfile();
            if (!missingOnly || !profile || !profile[fn]) {
                fieldNames.push(fn);
            }
            return fieldNames;
        }, []);
    };
    BaseForm.prototype.getNeededData = function (formContext) {
        var neededData = {};
        if (this._needContainerHistory) {
            neededData['getUserSettings'] = {
                params: {
                    group: 'gigya_container_history-' + this._screenSet.params.containerID,
                    regToken: this._screenSet.data.regToken,
                    disableLocalSettings: true,
                },
                cache: false,
            };
        }
        // Fetch password complexity for the password widget and validation if password field exists on screen.
        var isPasswordPoliciesNeeded = utils_1.Some(this.dataToServer, this.isPasswordPolicyNeededForField);
        if (isPasswordPoliciesNeeded) {
            neededData['getPolicies'] = {
                params: {
                    sections: 'passwordComplexity',
                },
                cache: true,
            };
        }
        return neededData;
    };
    BaseForm.prototype.isPasswordPolicyNeededForField = function (field) {
        return field instanceof PasswordInputs_1.BasePasswordInput && (field.isPasswordSchemaValidated() || field.isPasswordStrengthWidgetBound());
    };
    //#endregion
    //#region Dynamic fields
    // explicitly add dynamic inputs, more efficient
    BaseForm.prototype.addDynamicInputs = function (rootEl) {
        var _this = this;
        var inputsElements = rootEl.querySelectorAll('input,select,fieldset');
        var inputs = FormInput_1.FormInput.registerFormInputs(inputsElements, this);
        inputs.forEach(function (input) {
            TemplateElement_1.TemplateElement.prepareTemplateInstanceElement(input.templateElement, false);
            input.linkInstanceElement(_this.instanceElement);
        });
        this._inputs = this._inputs.concat(inputs);
        return inputs;
    };
    BaseForm.prototype.removeDynamicInputs = function (inputsToRemove) {
        var _this = this;
        this._inputs = this._inputs.filter(function (i) { return inputsToRemove.indexOf(i) < 0; });
        inputsToRemove.forEach(function (input) {
            var dataIndex = window.gigya.utils.array.indexOf(_this.dataToServer, input);
            if (dataIndex !== -1) {
                _this.dataToServer.splice(dataIndex, 1);
            }
            input.unlinkInstanceElement();
            input.unlinkTemplate();
        });
    };
    BaseForm.prototype.clearDynamicFields = function (dynamics) {
        var _this = this;
        utils_1.ForEach(dynamics, function (old) {
            old.unlinkInstanceElement();
            old.unlinkTemplate();
            var dataIndex = window.gigya.utils.array.indexOf(_this.dataToServer, old);
            if (dataIndex !== -1)
                _this.dataToServer.splice(dataIndex, 1);
        });
    };
    BaseForm.prototype.isDynamicFieldObsolete = function (dynamicElement) {
        var parent = dynamicElement.templateElement.parentElement;
        while (parent && parent !== this.instanceElement && parent !== document.documentElement)
            parent = parent.parentElement;
        return parent !== this.instanceElement;
    };
    BaseForm.prototype.isDynamicFieldToAdd = function (el) {
        var _this = this;
        var ignoredFields = this.ignoredFields();
        var instanceOfArray = el[TemplateElement_1.TemplateElement_CONSTS.instanceOfArray];
        if (instanceOfArray && utils_1.Some(instanceOfArray, function (instance) { return instance instanceof FormInput_1.FormInput && instance._form === _this; }))
            return false;
        var name = el.getAttribute('name');
        if (ignoredFields[name])
            return false;
        return true;
    };
    BaseForm.prototype.updateDynamicFields = function () {
        var _this = this;
        var oldDynamicInputs = new Array();
        var validDynamicInputs = new Array();
        // separate valid from invalid existing dynamics
        utils_1.ForEach(this._dynamicInputs, function (existingDynamicInput) {
            if (_this.isDynamicFieldObsolete(existingDynamicInput))
                oldDynamicInputs.push(existingDynamicInput);
            else
                validDynamicInputs.push(existingDynamicInput);
        });
        // remove invalid dynamics
        this.clearDynamicFields(oldDynamicInputs);
        // add new dynamics
        var newDynamics = new Array();
        // find new dynamic elements
        utils_1.ForEach(this.instanceElement.elements, function (el) {
            if (_this.isDynamicFieldToAdd(el))
                newDynamics.push(el);
        });
        // create instances for new dynamics
        var newDynamicInputs = FormInput_1.FormInput.registerFormInputs(newDynamics, this);
        utils_1.ForEach(newDynamicInputs, function (newDynamicInput) {
            TemplateElement_1.TemplateElement.prepareTemplateInstanceElement(newDynamicInput.templateElement, false);
            newDynamicInput.linkInstanceElement(_this.instanceElement);
            newDynamicInput.dynamicField = true;
            validDynamicInputs.push(newDynamicInput);
        });
        // store new dynamics list
        this._dynamicInputs = validDynamicInputs;
    };
    //#endregion
    //#region validation
    BaseForm.prototype.requiredFields = function () {
        return this.specialFields();
    };
    BaseForm.prototype.onInputChange = function (input, setByScript) {
        var _this = this;
        if (setByScript) {
            window.gigya.utils.DOM.dispatch(this.instanceElement, 'fieldChanged');
            return this.afterInputChange({
                field: input,
                errorCode: GSErrors_1.GSErrors.OK,
                setByScript: setByScript,
            });
        }
        else {
            var value = input.getValue();
            input.validate(function (validationinfo) {
                var fieldChangeEvent = {
                    eventName: 'fieldChanged',
                    screen: _this._screen.ID,
                    form: _this.bindID,
                    field: input.fieldName,
                    isValid: !validationinfo.errorCode,
                    errMsg: validationinfo.errorCode,
                    value: value,
                };
                _this._screen.dispatchEvent('fieldChanged', fieldChangeEvent);
                window.gigya.utils.DOM.dispatch(_this.instanceElement, 'fieldChanged');
                _this.afterInputChange(validationinfo);
            });
        }
    };
    BaseForm.prototype.afterInputChange = function (validationInfo) {
        if (validationInfo.field.fieldName === 'newPassword' || validationInfo.field.fieldName === 'password') {
            utils_1.ForEach(this._passwordRetypes, function (p) {
                p.setValue('', validationInfo.setByScript);
            });
        }
        this.showFieldError(validationInfo.field, validationInfo.errorCode, true);
    };
    BaseForm.prototype.isPasswordSchemaValidated = function () {
        return this.schemaValidated();
    };
    BaseForm.prototype.schemaValidated = function () {
        return false;
    };
    BaseForm.prototype.getFieldSchema = function (field) {
        var schema = this.getSchemaOf(field.fieldNamespace || 'profile');
        return schema && schema[field.fieldBaseName];
    };
    BaseForm.prototype.getSchemaOf = function (schemaName) {
        var apiData = this._screenSet.getApiData();
        var schemaRoot = this.getSchemaRoot(schemaName);
        return apiData.getSchema && apiData.getSchema[schemaRoot] && apiData.getSchema[schemaRoot].fields;
    };
    BaseForm.prototype.getSchemaRoot = function (namespace) {
        switch (namespace) {
            case 'data':
                return 'dataSchema';
            case 'profile':
                return 'profileSchema';
            case 'subscriptions':
                return 'subscriptionsSchema';
            case 'preferences':
                return 'preferencesSchema';
            case 'organization':
                return 'organizationSchema';
            case 'requester':
                return 'requesterSchema';
        }
    };
    BaseForm.prototype.showFieldError = function (field, errorCode, isBoundToField, customErrMsg) {
        var errorMessage = customErrMsg || this._screen.getErrorMessage(errorCode, isBoundToField, field);
        var errorInfo = {
            errorCode: errorCode,
            errorMessage: errorMessage,
        };
        if (errorCode !== GSErrors_1.GSErrors.OK && errorCode !== GSErrors_1.GSErrors.Data_Pending) {
            this.formErrors[field.fieldName] = errorInfo;
        }
        var shouldHandleError = true;
        // display error on bounded error elements
        if (isBoundToField) {
            var fieldValidity = void 0;
            switch (errorCode) {
                case 0:
                    fieldValidity = FormInput_1.ValidityStates.valid;
                    break;
                case GSErrors_1.GSErrors.Data_Pending:
                    fieldValidity = FormInput_1.ValidityStates.pending;
                    shouldHandleError = false;
                    break;
                default:
                    fieldValidity = FormInput_1.ValidityStates.error;
                    break;
            }
            // Display error on the field itself.
            field.setValidityState(fieldValidity);
            // Dealing with gigya-error-msg and gigya-error-display within the same form as the input.
            var arBoundElements = this._errorDisplayElements[field.normalizedFieldName] || [];
            utils_1.ForEach(arBoundElements, function (elBound) {
                // Do not consider the field bound if it's a different array element.
                var fieldArrayKeyValue = field.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.arrayKeyValueAttribute);
                if (fieldArrayKeyValue && fieldArrayKeyValue !== elBound.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.arrayKeyValueAttribute)) {
                    return;
                }
                if (errorInfo.errorMessage && elBound.isErrorCodeAllowed(errorCode)) {
                    elBound.showError(errorInfo);
                }
                else {
                    elBound.hideError();
                }
            });
        }
        return shouldHandleError;
    };
    BaseForm.prototype.showCustomFormError = function (errMsg) {
        var errorInfo = {
            errorMessage: errMsg,
            errorCode: GSErrors_1.GSErrors.VALIDATION_ERROR,
        };
        this.formErrors['form'] = errorInfo;
        this.showErrors([errorInfo], true); // isServerError = true (force the display of the error message)
        window.gigya.utils.DOM.addClassToElement(this.instanceElement, exports.Form_CONSTS.formErrorClass);
    };
    BaseForm.prototype.createOnBeforeValidationEvent = function (formData) {
        return {
            data: this._screenSet.getSchemaData(),
            profile: this._screenSet.getProfile(),
            subscriptions: this._screenSet.getSubScriptions(),
            preferences: this._screenSet.getPreferences(),
            eventName: 'beforeValidation',
            form: this.bindID,
            formData: formData,
            screen: this._screen.ID,
        };
    };
    BaseForm.prototype.createOnAfterValidationEvent = function (formData) {
        return {
            data: this._screenSet.getSchemaData(),
            profile: this._screenSet.getProfile(),
            subscriptions: this._screenSet.getSubScriptions(),
            preferences: this._screenSet.getPreferences(),
            eventName: 'afterValidation',
            form: this.bindID,
            formData: formData,
            screen: this._screen.ID,
            formErrors: Object.keys(this.formErrors).length > 0 ? this.formErrors : undefined,
        };
    };
    BaseForm.prototype.applyCustomValidation = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var isValid, customErrMsgs, formData, beforeValidationEvent, validationResult, _customValidationTimeout, _a, _b, ex_1, errors;
            var _this = this;
            return tslib_1.__generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        isValid = true;
                        customErrMsgs = undefined;
                        this._screenSet.dimScreenSet();
                        formData = this.getFlatFormData(true, false);
                        beforeValidationEvent = this.createOnBeforeValidationEvent(formData);
                        validationResult = this._screen.dispatchEvent(beforeValidationEvent.eventName, beforeValidationEvent);
                        _customValidationTimeout = setTimeout(function () {
                            console.warn("[Gigya]: custom validation did not resolve after more than " + exports.CUSTOM_VALIDATION_TIMEOUT_WARNING + " seconds");
                        }, exports.CUSTOM_VALIDATION_TIMEOUT_WARNING);
                        _c.label = 1;
                    case 1:
                        _c.trys.push([1, 3, 4, 5]);
                        _b = (_a = window.gigya.utils.object).unflatten;
                        return [4 /*yield*/, gigya.Promise.resolve(validationResult)];
                    case 2:
                        customErrMsgs = _b.apply(_a, [_c.sent()]);
                        return [3 /*break*/, 5];
                    case 3:
                        ex_1 = _c.sent();
                        console.warn("[Gigya]: custom validation threw an error", ex_1);
                        customErrMsgs = undefined;
                        return [3 /*break*/, 5];
                    case 4:
                        this._screenSet.undimScreenSet();
                        clearTimeout(_customValidationTimeout);
                        return [7 /*endfinally*/];
                    case 5:
                        errors = window.gigya.utils.object.merge([window.gigya.utils.object.flatten(customErrMsgs, true), window.gigya.utils.object.flatten(customErrMsgs)]);
                        if (errors && typeof errors === 'object') {
                            utils_1.ForEach(Object.keys(errors), function (fieldName) {
                                if (errors.hasOwnProperty(fieldName)) {
                                    var errMsg = errors[fieldName];
                                    if (fieldName === 'form') {
                                        isValid = false;
                                        _this.showCustomFormError(errMsg);
                                    }
                                    else {
                                        var field = _this.getFieldByData(fieldName, formData);
                                        if (field) {
                                            isValid = false;
                                            _this.showFieldError(field, GSErrors_1.GSErrors.VALIDATION_ERROR, true, errMsg);
                                        }
                                    }
                                }
                            });
                        }
                        return [2 /*return*/, isValid];
                }
            });
        });
    };
    BaseForm.prototype.getFieldByData = function (fieldName, formData) {
        var _this = this;
        if (formData === void 0) { formData = {}; }
        if (!Object.keys(formData).length) {
            return this.getField(fieldName);
        }
        //For store as array fields, loop through all fields to find the correct match
        var formModel = window.gigya.utils.object.unflatten(formData);
        var formDataWithAllKeys = window.gigya.utils.object.merge([window.gigya.utils.object.flatten(formModel, true), window.gigya.utils.object.flatten(formModel)]);
        var storeAsArrayField = Object.keys(formDataWithAllKeys)
            .filter(function (key) { return key !== fieldName && utils_1.hasIndex(key) && utils_1.removeSerializedKeyEdgeProperty(key) === utils_1.removeSerializedKeyEdgeProperty(fieldName); })
            .map(function (key) { return _this.getField(utils_1.removeSerializedKeyLastEnumerator(fieldName), formDataWithAllKeys[key]); })
            .filter(function (field) { return Boolean(field); })[0];
        var field = storeAsArrayField || this.getField(fieldName);
        return field;
    };
    BaseForm.prototype.onAfterValidation = function () {
        var formData = this.getFlatFormData(true, false);
        var afterValidationEvent = this.createOnAfterValidationEvent(formData);
        this._screen.dispatchEvent(afterValidationEvent.eventName, afterValidationEvent);
    };
    BaseForm.prototype.validate = function (callback) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var isValid, flatFormData, fieldsLeft, arValidationErrors, fieldValidationCallback;
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.formErrors = {};
                        return [4 /*yield*/, this.applyCustomValidation()];
                    case 1:
                        isValid = _a.sent();
                        if (!isValid) {
                            return [2 /*return*/, this.onAfterValidation()];
                        }
                        flatFormData = this.getFlatFormData(true, true);
                        fieldsLeft = this.dataToServer.length;
                        arValidationErrors = new Array();
                        fieldValidationCallback = function (validationInfo) {
                            if (validationInfo.errorCode !== GSErrors_1.GSErrors.OK) {
                                isValid = false;
                                var errorInfo = {
                                    fieldName: validationInfo.field.fieldName,
                                    errorCode: validationInfo.errorCode,
                                };
                                arValidationErrors.push(errorInfo);
                                errorInfo.handled = _this.showFieldError(validationInfo.field, validationInfo.errorCode, true);
                            }
                            if (--fieldsLeft < 0) {
                                _this.showErrors(arValidationErrors, false);
                                _this.onAfterValidation();
                                return callback(isValid);
                            }
                        };
                        utils_1.ForEach(this.dataToServer, function (field) { return field.validate(fieldValidationCallback, flatFormData); });
                        fieldValidationCallback({ errorCode: GSErrors_1.GSErrors.OK, field: null }); // trigger at least once to ensure callback trigger
                        return [2 /*return*/];
                }
            });
        });
    };
    BaseForm.prototype.showErrors = function (arErrors, isServerError) {
        this._screen.showErrors(this, arErrors, isServerError);
    };
    BaseForm.prototype.isRequiredField = function (fieldName) {
        var fieldNamespace = utils_1.firstPart(fieldName, '.');
        var schemaName = fieldNamespace == 'data' ? 'dataSchema' : 'profileSchema';
        if (fieldNamespace == 'data' || fieldNamespace == 'profile') {
            fieldName = fieldName.substring(fieldNamespace.length + 1);
        }
        var requiredFields = this.requiredFields();
        if (requiredFields[fieldName]) {
            return true;
        }
        var apiData = this._screenSet.getApiData(); // TODO shouldn't this be dependant on is schemaValidated?
        if (apiData.getSchema && apiData.getSchema[schemaName] && apiData.getSchema[schemaName].fields) {
            var schema = apiData.getSchema[schemaName].fields[fieldName];
            if (schema && schema.required) {
                return true;
            }
        }
        return false;
    };
    //#endregion
    BaseForm.prototype.checkAutoSkip = function (formContext, callback) {
        if (!this.autoSkip || utils_1.Some(this._autoSkipContainers, function (c) { return !c.checkAutoSkip(); }))
            return callback(false);
        this.validate(callback);
    };
    //#region form data
    BaseForm.prototype.getNormalizedFieldName = function (fieldName) {
        if (!fieldName) {
            return fieldName;
        }
        // If special field or local field, use as-is.
        var specialFields = this.specialFields();
        if (specialFields[fieldName] || fieldName.indexOf('local.') === 0) {
            return fieldName;
        }
        // Get data and profile namespace.
        var profileNamespace = this.profileObjectName();
        var dataNamespace = this.dataObjectName();
        var subscriptionNamespace = this.subscriptionObjectName();
        var preferencesNamespace = this.preferencesObjectName();
        var organizationNamespace = this.organizationObjectName();
        var requesterNamespace = this.requesterObjectName();
        // Default to profile namespace if not provided and not special field.
        var nameParts = fieldName.split('.');
        var ns = nameParts.length > 1 ? nameParts.shift() : profileNamespace;
        // Change "profile.data.field" to "data.field".
        if (ns === profileNamespace && nameParts.length > 1 && nameParts[0] === dataNamespace) {
            ns = nameParts.shift();
        }
        // Default to profile namespace if unknown namespace was provided.
        if ([dataNamespace, profileNamespace, subscriptionNamespace, preferencesNamespace, organizationNamespace, requesterNamespace].indexOf(ns) == -1) {
            ns = profileNamespace;
        }
        // Push namespace back onto array of strings.
        if (ns) {
            nameParts.unshift(ns);
        }
        // Return string.
        var normalizedFieldName = nameParts.join('.');
        return normalizedFieldName;
    };
    BaseForm.prototype.getField = function (fieldName, arrayKeyValue) {
        var result;
        fieldName = this.getNormalizedFieldName(fieldName);
        utils_1.Some(this.dataToServer, function (field) {
            if (field.normalizedFieldName === fieldName) {
                if (!arrayKeyValue || arrayKeyValue === field.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.arrayKeyValueAttribute)) {
                    result = field;
                    return true;
                }
            }
            return false;
        });
        return result;
    };
    BaseForm.prototype.isSpecialField = function (field) {
        return !!this.specialFields()[field.fieldName];
    };
    BaseForm.prototype.getFormData = function (ignoreHiddenContainers, normalizeFields, replaceEmptyStringWithNull) {
        var _this = this;
        if (replaceEmptyStringWithNull === void 0) { replaceEmptyStringWithNull = false; }
        var oData = {};
        // Get existing account for array merging.
        var accountInfo = this._screenSet.getApiData().getAccountInfo || {};
        var trackCreatedObjKeys = {};
        // Create form data.
        utils_1.ForEach(this.dataToServer, function (field) {
            var _a;
            if ((!field.disabled() || _this.isSpecialField(field)) && (!ignoreHiddenContainers || !field.isInHiddenContainer())) {
                var fieldKey = field.getName(normalizeFields, true);
                var currentValue = window.gigya.utils.object.getPropertyBySerializedName(accountInfo, fieldKey, false);
                var arrayRootField = field.getArrayRoot(true);
                var fieldValue = field.getValue(field.instanceElement, currentValue || oData[fieldKey]);
                if (fieldValue) {
                    // currently we do not support the field's original data-type.
                    fieldValue = window.gigya.utils.object.parseToObject(fieldValue.toString()) || fieldValue;
                }
                // Typical path for non-array fields.
                if (!arrayRootField) {
                    if (fieldValue != null) {
                        // This is used when gathering parameters to send to the server. do not convert empty array to null.
                        if (replaceEmptyStringWithNull && String(fieldValue) === '' && fieldValue.constructor !== Array) {
                            fieldValue = null;
                        }
                        oData[fieldKey] = fieldValue;
                    }
                }
                else {
                    // Array root is provided, switch to array mode. Verify all required attributes are provided.
                    var arrayKeyField = field.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.arrayKeyFieldAttribute);
                    var arrayKeyValue = field.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.arrayKeyValueAttribute);
                    if (!arrayKeyField || !arrayKeyValue) {
                        _this.warn('Field ignored because data-array-root provided without data-array-key-field and data-array-key-value', fieldKey);
                        return;
                    }
                    if (!oData[arrayRootField] || oData[arrayRootField].constructor !== Array) {
                        var arr = void 0;
                        if (accountInfo) {
                            arr = window.gigya.utils.object.clone(window.gigya.utils.object.getPropertyBySerializedName(accountInfo, arrayRootField, false), false);
                        }
                        if (!arr || arr.constructor !== Array) {
                            arr = [];
                        }
                        oData[arrayRootField] = arr;
                    }
                    var arrayRoot = oData[arrayRootField];
                    // Find or create object inside of array.
                    var obj = void 0;
                    for (var i = 0; i < arrayRoot.length; i++) {
                        var o = arrayRoot[i];
                        if (o[arrayKeyField] && String(o[arrayKeyField]) === arrayKeyValue) {
                            // If object was found from server, remove object from array root and re-create.
                            // The merge logic replaces entire objects but keeps the other elements in the array.
                            if (!trackCreatedObjKeys[arrayRootField] || window.gigya.utils.array.indexOf(trackCreatedObjKeys[arrayRootField], arrayKeyValue) === -1) {
                                arrayRoot.splice(i, 1);
                            }
                            else {
                                obj = o;
                            }
                            break;
                        }
                    }
                    // Create new object or append key to existing object only if a field value is present.
                    // This is what allows an object to be deleted from the array.
                    if (fieldValue) {
                        if (!obj) {
                            obj = (_a = {},
                                _a[arrayKeyField] = arrayKeyValue,
                                _a);
                            arrayRoot.push(obj);
                            if (!trackCreatedObjKeys[arrayRootField]) {
                                trackCreatedObjKeys[arrayRootField] = [];
                            }
                            trackCreatedObjKeys[arrayRootField].push(arrayKeyValue);
                        }
                        // Add value to object.
                        var subKey = fieldKey.substr(arrayRootField.length + 1);
                        obj[subKey] = fieldValue;
                    }
                }
            }
        });
        oData = this.postProcessFormData(oData);
        // The form data may be a mix of flattened and unflattened data. Ensure it is unflattened.
        oData = window.gigya.utils.object.unflatten(oData);
        // Filter the data.
        utils_1.ForEach(this.filters, function (wid) {
            oData = wid.filterOutWidgetsToSend(oData);
        });
        return oData;
    };
    BaseForm.prototype.postProcessFormData = function (oData) {
        var res = window.gigya.utils.object.clone(oData);
        res = Consent_1.postProcessForm(res, this.getSchemaOf(Consent_1.namespace));
        return res;
    };
    BaseForm.prototype.getFlatFormData = function (ignoreHiddenContainers, normalizeFields, replaceEmptyStringWithNull) {
        if (replaceEmptyStringWithNull === void 0) { replaceEmptyStringWithNull = false; }
        return window.gigya.utils.object.flatten(this.getFormData(ignoreHiddenContainers, normalizeFields, replaceEmptyStringWithNull));
    };
    BaseForm.prototype.specialFields = function () {
        return {};
    };
    BaseForm.prototype.subscriptionObjectName = function () {
        return 'subscriptions';
    };
    BaseForm.prototype.dataObjectName = function () {
        return 'data';
    };
    BaseForm.prototype.profileObjectName = function () {
        return 'profile';
    };
    BaseForm.prototype.preferencesObjectName = function () {
        return 'preferences';
    };
    BaseForm.prototype.organizationObjectName = function () {
        return 'organization';
    };
    BaseForm.prototype.requesterObjectName = function () {
        return 'requester';
    };
    BaseForm.prototype.queryStringToSubmitParamMap = function () {
        return {};
    };
    BaseForm.prototype.defaultSubmitParams = function () {
        var qsParams = this.queryStringToSubmitParamMap();
        var ret = {};
        Object.keys(qsParams).forEach(function (p) {
            var submitParam = qsParams[p];
            var value = window.gigya.utils.URL.getParamValueFromURL(p, location.search, undefined);
            if (value) {
                ret[submitParam] = value;
            }
        });
        return ret;
    };
    //#endregion
    //#region submit
    BaseForm.prototype.submitApi = function () {
        throw new Error(NOT_IMPLEMENTED);
    };
    BaseForm.prototype._getSubmitApiParams = function (params) {
        return window.gigya.utils.object.removeUndefined(params);
    };
    BaseForm.prototype.performSubmit = function (formData) {
        var _this = this;
        var submitApi = this.submitApi();
        var extraEventData = this._screenSet.data.extraEventData;
        if (this._rememberMe) {
            extraEventData.rememberMe = Boolean(this._rememberMe.getValue());
        }
        var remember = extraEventData.rememberMe;
        // Make sure to use the latest regtoken if it was set by a child screenset
        if (this._screenSet.data.regToken) {
            this._screenSet.params.regToken = this._screenSet.data.regToken;
        }
        var apiParams = this._getSubmitApiParams(window.gigya.utils.object.clone(this._screenSet.params, true));
        this._screen.dimScreen();
        var options = {
            dontHandleScreenSet: true,
            callback: function (response) { return _this.onAfterSubmit(response); },
            remember: remember,
            sessionExpiration: remember && this._screenSet.params.rememberSessionExpiration
                ? this._screenSet.params.rememberSessionExpiration
                : this._screen._screenSet.params.sessionExpiration,
        };
        submitApi(apiParams, formData, options, this.defaultSubmitParams());
    };
    BaseForm.prototype.submit = function () {
        var _this = this;
        this._submitButtonClicked = true;
        //#region - code to be removed: the following code block should be removed when the old photo upload widget will not be supported along with BaseServerWidget
        var waitForServerResponse = utils_1.Some(this._serverWidgets, function (w) {
            if (w.serverState === BaseServerWidget_1.ServerStates.InProgress) {
                w.runOnServerDone(_this.submitHandler);
                return true;
            }
            return false;
        });
        if (waitForServerResponse)
            return;
        //#endregion
        this.updateDynamicFields();
        this.validate(function (isValid) {
            _this.onAfterValidation();
            if (isValid) {
                _this.getCaptchaToken()
                    .then(function (captchaToken) {
                    // Generate object to pass as params.
                    var formDataForServer = _this.getFormData(true, true, true);
                    // Generate flat form data for event.
                    var flatFormDataForEvent = _this.getFlatFormData(true, false);
                    if (typeof flatFormDataForEvent['password'] !== 'undefined') {
                        delete flatFormDataForEvent['password']; // meaningless in terms of security but less shocking for clients :)
                    }
                    var event = {
                        eventName: 'beforeSubmit',
                        screen: _this._screen.ID,
                        form: _this.bindID,
                        profile: _this._screenSet.getProfile(),
                        data: _this._screenSet.getSchemaData(),
                        preferences: _this._screenSet.getPreferences(),
                        subscriptions: _this._screenSet.getSubScriptions(),
                        formData: flatFormDataForEvent,
                    };
                    var eventResult = _this._screen.dispatchEvent('beforeSubmit', event);
                    // Check if the submit was cancelled before proceeding.
                    if (eventResult !== false) {
                        var submitEvent = {
                            eventName: 'submit',
                            screen: _this._screen.ID,
                            form: _this.bindID,
                            accountInfo: {
                                profile: _this._screenSet.getProfile(),
                                data: _this._screenSet.getSchemaData(),
                                preferences: _this._screenSet.getPreferences(),
                                subscriptions: _this._screenSet.getSubScriptions(),
                            },
                            formModel: formDataForServer,
                        };
                        var submitResult = _this._screen.dispatchEvent('submit', submitEvent);
                        if (typeof captchaToken === 'string')
                            formDataForServer['captchaToken'] = captchaToken;
                        if (submitResult && typeof submitResult.then === 'function') {
                            submitResult.then(function (x) { return _this.performSubmit(window.gigya.utils.object.merge([formDataForServer, x])); });
                        }
                        else {
                            _this.performSubmit(window.gigya.utils.object.merge([formDataForServer, submitResult]));
                        }
                    }
                })
                    .catch(function (e) {
                    // all other exceptions gets swallowed, also if it happened for example inside form's onAfterSubmit method (!)
                    window.gigya.logger.error('exception when submitting a form', { e: e, form: _this.gigyaClass });
                    if (e && e.message === 'captchaNeeded') {
                        var errorInfo = {
                            errorMessage: _this._screenSet.getText('login_captcha_error'),
                            errorCode: GSErrors_1.GSErrors.VALIDATION_ERROR,
                            errorFlags: e.message,
                        };
                        _this.showErrors([errorInfo], true);
                    }
                });
            }
        });
    };
    //#endregion
    BaseForm.prototype.getCaptchaToken = function () {
        var captchas = this._screen._captchas.filter(function (captcha) { return Boolean(captcha) && !captcha.isHidden(); });
        return captchas.length ? captchas[0].getToken() : gigya.Promise.resolve(undefined);
    };
    BaseForm.prototype.onAfterSubmit = function (response) {
        this._screen.undimScreen();
        if (response.errorCode == GSErrors_1.GSErrors.OK) {
            window.gigya.utils.DOM.removeClassFromElement(this.instanceElement, exports.Form_CONSTS.formErrorClass);
        }
        else {
            window.gigya.utils.DOM.addClassToElement(this.instanceElement, exports.Form_CONSTS.formErrorClass);
        }
        this._screenSet.onScreenResponse(response, this);
    };
    BaseForm.prototype.evaluateConditionalAttributes = function () {
        var _this = this;
        if (!this.hasConditionalAttributes()) {
            return;
        }
        window.gigya.logger.group("form conditional attributes evaluation").endWhen(function () {
            _super.prototype.evaluateConditionalAttributes.call(_this);
            utils_1.ForEach(_this._dynamicInputs, function (dynamicInput) {
                dynamicInput.evaluateConditionalAttributes();
            });
            utils_1.ForEach(_this._widgets, function (widget) {
                widget.evaluateConditionalAttributes();
            });
            utils_1.ForEach(_this._inputs, function (input) {
                input.evaluateConditionalAttributes();
            });
            utils_1.ForEach(_this._passwordInputs, function (passwordInput) {
                passwordInput.evaluateConditionalAttributes();
            });
            utils_1.ForEach(_this._passwordRetypes, function (passwordRetype) {
                passwordRetype.evaluateConditionalAttributes();
            });
            utils_1.ForEach(_this._secretQuestions, function (sec) {
                sec.evaluateConditionalAttributes();
            });
            utils_1.ForEach(_this._autoSkipContainers, function (auto) {
                auto.evaluateConditionalAttributes();
            });
            utils_1.ForEach(_this._serverWidgets, function (serv) {
                serv.evaluateConditionalAttributes();
            });
            if (_this._rememberMe) {
                _this._rememberMe.evaluateConditionalAttributes();
            }
        });
        this.originalSuccessScreen = this.instanceElement.getAttribute(exports.Form_CONSTS.successScreen);
        this.successScreen = this._screenSet.chooseNextScreen(this.originalSuccessScreen);
        this.autoSkip = this.instanceElement.getAttribute(exports.Form_CONSTS.autoSkipFlag) == 'true';
        this.autoSkipScreen = this.instanceElement.getAttribute(exports.Form_CONSTS.autoSkipScreen) || this.successScreen;
        this.screenSetSkippedScreen = this.instanceElement.getAttribute(exports.Form_CONSTS.screenSetSkippedScreen) || this.successScreen;
    };
    BaseForm.prototype.hasConditionalAttributes = function () {
        if (_super.prototype.hasConditionalAttributes.call(this))
            return true;
        var children = [].concat(this._widgets, this._inputs, this._dynamicInputs, this._passwordInputs, this._passwordRetypes, this._secretQuestions, this._autoSkipContainers, this._serverWidgets);
        return window.gigya.utils.array.some(children, function (child) { return child.hasConditionalAttributes(); });
    };
    BaseForm.prototype.resetLastConditionalValues = function () {
        _super.prototype.resetLastConditionalValues.call(this);
        utils_1.ForEach(this._dynamicInputs, function (dynamicInput) {
            dynamicInput.resetLastConditionalValues();
        });
        utils_1.ForEach(this._widgets, function (widget) {
            widget.resetLastConditionalValues();
        });
        utils_1.ForEach(this._inputs, function (input) {
            input.resetLastConditionalValues();
        });
        utils_1.ForEach(this._passwordInputs, function (passwordInput) {
            passwordInput.resetLastConditionalValues();
        });
        utils_1.ForEach(this._passwordRetypes, function (passwordRetype) {
            passwordRetype.resetLastConditionalValues();
        });
        utils_1.ForEach(this._secretQuestions, function (sec) {
            sec.resetLastConditionalValues();
        });
        utils_1.ForEach(this._autoSkipContainers, function (auto) {
            auto.resetLastConditionalValues();
        });
        utils_1.ForEach(this._serverWidgets, function (serv) {
            serv.resetLastConditionalValues();
        });
    };
    //#region Form library
    BaseForm.FormsLibrary = {};
    return BaseForm;
}(TemplateElement_1.TemplateElement));
exports.BaseForm = BaseForm;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts":
/*!***********************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var BaseWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget.ts");
var BaseFormWidget = /** @class */ (function (_super) {
    tslib_1.__extends(BaseFormWidget, _super);
    function BaseFormWidget(_form, el, resetCSS) {
        var _this = _super.call(this, el, _form, _form._screen, resetCSS) || this;
        _this._form = _form;
        return _this;
    }
    BaseFormWidget.addWidgetToLibrary = function (widget) {
        BaseFormWidget.FormWidgetsLibrary[widget.CONSTS.selector] = widget;
    };
    BaseFormWidget.registerWidgets = function (parent) {
        return BaseWidget_1.BaseWidget.registerTypedWidgets(parent.templateElement, BaseFormWidget.FormWidgetsLibrary, function (type, el) { return new type(parent, el); });
    };
    BaseFormWidget.registerDynamicWidgets = function (parent, rootEl) {
        return BaseWidget_1.BaseWidget.registerTypedWidgets(rootEl, BaseFormWidget.FormWidgetsLibrary, function (type, el) { return new type(parent, el); });
    };
    BaseFormWidget.prototype.getFieldsNames = function () {
        return [];
    };
    BaseFormWidget.prototype.update = function () { };
    BaseFormWidget.FormWidgetsLibrary = {};
    return BaseFormWidget;
}(BaseWidget_1.BaseWidget));
exports.BaseFormWidget = BaseFormWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts":
/*!*************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var BaseWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget.ts");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget = /** @class */ (function (_super) {
    tslib_1.__extends(BaseScreenWidget, _super);
    function BaseScreenWidget(_screen, el, resetCSS) {
        var _this = _super.call(this, el, _screen, _screen, resetCSS) || this;
        _this._childWidgets = [];
        return _this;
    }
    BaseScreenWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        this.unlinkWidgets();
    };
    BaseScreenWidget.prototype.unlinkWidgets = function () {
        utils_1.ForEach(this._childWidgets, function (widget) {
            widget.unlinkInstanceElement();
        });
        this._childWidgets = [];
    };
    BaseScreenWidget.prototype.linkWidgets = function () {
        var _this = this;
        // Widgets that render html inside them, must register internal widgets
        if (!this._screen || !this._screen.instanceElement)
            return;
        this._childWidgets =
            BaseScreenWidget.registerDynamicWidgets(this._screen, this.instanceElement)
                .filter(function (childWidget) { return !_this.deps || !_this.deps.some(function (dep) { return childWidget instanceof dep; }); });
        utils_1.ForEach(this._childWidgets, function (widget) {
            widget.linkInstanceElement(_this._screen.instanceElement);
        });
    };
    BaseScreenWidget.addWidgetToLibrary = function (widget) {
        BaseScreenWidget.ScreenWidgetsLibrary[widget.CONSTS.selector] = widget;
    };
    BaseScreenWidget.registerWidgets = function (parent) {
        return BaseWidget_1.BaseWidget.registerTypedWidgets(parent.templateElement, BaseScreenWidget.ScreenWidgetsLibrary, function (type, el) { return new type(parent, el); });
    };
    BaseScreenWidget.registerDynamicWidgets = function (parent, rootEl) {
        return BaseWidget_1.BaseWidget.registerTypedWidgets(rootEl, BaseScreenWidget.ScreenWidgetsLibrary, function (type, el) { return new type(parent, el); });
    };
    BaseScreenWidget.ScreenWidgetsLibrary = {};
    return BaseScreenWidget;
}(BaseWidget_1.BaseWidget));
exports.BaseScreenWidget = BaseScreenWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget.ts":
/*!*************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget.ts ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var ServerStates;
(function (ServerStates) {
    ServerStates[ServerStates["NotStarted"] = 0] = "NotStarted";
    ServerStates[ServerStates["InProgress"] = 1] = "InProgress";
    ServerStates[ServerStates["Done"] = 2] = "Done";
    ServerStates[ServerStates["Error"] = 3] = "Error";
})(ServerStates = exports.ServerStates || (exports.ServerStates = {}));
utils_1.DeepFreeze(ServerStates);
var BaseServerWidget = /** @class */ (function (_super) {
    tslib_1.__extends(BaseServerWidget, _super);
    function BaseServerWidget(form, el, resetCSS) {
        var _this = _super.call(this, form, el, resetCSS) || this;
        _this.nextServerQueryId = 0;
        _this.serverState = ServerStates.NotStarted;
        _this.callbacks = new Array();
        form._serverWidgets.push(_this);
        return _this;
    }
    BaseServerWidget.prototype.startServerQuery = function () {
        this.serverState = ServerStates.InProgress;
        return ++this.nextServerQueryId;
    };
    BaseServerWidget.prototype.onServerQueryEnd = function (serverQueryId, newState, data) {
        if (serverQueryId === this.nextServerQueryId)
            this.serverQueryDone(newState, data);
        else
            this.warn('Ignoring server response #' + serverQueryId);
    };
    BaseServerWidget.prototype.serverQueryDone = function (newState, data) {
        var _this = this;
        this.serverState = newState;
        utils_1.ForEach(this.callbacks, function (callback) { return callback(newState, _this); });
        this.callbacks = new Array();
    };
    BaseServerWidget.prototype.runOnServerDone = function (callback) {
        if (this.serverState !== ServerStates.InProgress)
            callback(this.serverState, this);
        else
            this.callbacks.push(callback);
    };
    return BaseServerWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.BaseServerWidget = BaseServerWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseUploadWidget.ts":
/*!*************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseUploadWidget.ts ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseServerWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget.ts");
var NOT_IMPLEMENTED = 'Not Implemented';
exports.BaseUploadWidget_CONSTS = {
    setDimentionsDelay: 500,
    uploadCheckInterval: 500,
    uploading: 'data-upload-status',
    uploadForm: 'screenSetUploadForm',
};
utils_1.DeepFreeze(exports.BaseUploadWidget_CONSTS);
var nextGeneratedId = 0;
var BaseUploadWidget = /** @class */ (function (_super) {
    tslib_1.__extends(BaseUploadWidget, _super);
    function BaseUploadWidget(form, el, resetCSS) {
        var _this = _super.call(this, form, el, resetCSS) || this;
        var uploadId = nextGeneratedId++;
        _this._uploadIframeID = _this._screenSet.params.containerID + '_upload' + uploadId + '_target';
        _this.formDivID = _this._screenSet.params.containerID + '_upload' + uploadId + '_form';
        _this.listenOnIframe = function () {
            var iframeStateName = _this.uploadIframe.getAttribute(exports.BaseUploadWidget_CONSTS.uploading);
            var iframeState = BaseServerWidget_1.ServerStates[iframeStateName];
            if (iframeState !== _this.serverState)
                _this.onServerQueryEnd(_this._lastQueryId, iframeState);
        };
        _this.fileInputChanged = function () { return _this.onFileInputChange(); };
        return _this;
    }
    BaseUploadWidget.prototype.onFileInputChange = function () {
        this.startServerQuery();
    };
    BaseUploadWidget.prototype.linkInstanceElement = function (parent) {
        var _this = this;
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.instanceElement) {
            // add upload iframe
            this.uploadIframe = document.createElement('iframe');
            this.uploadIframe.style.display = 'none';
            this.uploadIframe.id = this._uploadIframeID;
            this.uploadIframe.setAttribute('name', this._uploadIframeID);
            this.uploadIframe.setAttribute(exports.BaseUploadWidget_CONSTS.uploading, BaseServerWidget_1.ServerStates[BaseServerWidget_1.ServerStates.NotStarted]);
            this.uploadIframe.setAttribute('onload', "this.setAttribute('" + exports.BaseUploadWidget_CONSTS.uploading + "','" + BaseServerWidget_1.ServerStates[BaseServerWidget_1.ServerStates.Done] + "')");
            this.instanceElement.appendChild(this.uploadIframe);
            // place form for the user to interfact with
            this._formDiv = document.createElement('div');
            this._formDiv.id = this.formDivID;
            this._formDiv.className = 'gigya-attach-file-upload-form';
            this._formDiv.innerHTML = this.getFormHtml();
            this._formDiv.style.zIndex = '' + window.gigya.utils.DOM.getNextZIndex();
            this.instanceElement.appendChild(this._formDiv);
            // set dimentions
            window.setTimeout(function () { return _this.setFormDimentions(); }, exports.BaseUploadWidget_CONSTS.setDimentionsDelay);
            this._uploadForm = this.getFormElement();
            this.fileInput = this._uploadForm.elements['_profilePhoto'];
            window.gigya.utils.DOM.addClassToElement(this.fileInput, 'gigya-attach-file-upload-file-input'); // TODO Change uses css for ie patch instead of style
            window.gigya.utils.DOM.addEventListener(this.fileInput, 'change', this.fileInputChanged);
        }
    };
    BaseUploadWidget.prototype.getFormHtml = function () {
        throw new Error(NOT_IMPLEMENTED);
    };
    BaseUploadWidget.prototype.getFormElement = function () {
        throw new Error(NOT_IMPLEMENTED);
    };
    BaseUploadWidget.prototype.getFileElement = function () {
        throw new Error(NOT_IMPLEMENTED);
    };
    BaseUploadWidget.prototype.setFormDimentions = function () {
        // TODO behavior change: uses timeout rather than interval
        if (this.instanceElement) {
            if (this.instanceElement.offsetHeight != 0) {
                this._formDiv.style.height = this.instanceElement.offsetHeight + 'px';
                this._formDiv.style.width = this.instanceElement.offsetWidth + 'px';
            }
        }
    };
    BaseUploadWidget.prototype.unlinkInstanceElement = function () {
        if (this.instanceElement) {
            if (this.uploadCheckInterval)
                this.onServerQueryEnd(this._lastQueryId, BaseServerWidget_1.ServerStates.Error);
            window.gigya.utils.DOM.removeEventListener(this.fileInput, 'change', this.onFileInputChange);
            this.fileInput = null;
            this._uploadForm = null;
            this._formDiv.parentElement.removeChild(this._formDiv);
            this._formDiv = null;
            this.instanceElement.removeChild(this.uploadIframe);
            this.uploadIframe = null;
        }
        _super.prototype.unlinkInstanceElement.call(this);
    };
    BaseUploadWidget.prototype.stopUploadCheck = function () {
        if (this.uploadCheckInterval) {
            window.clearInterval(this.uploadCheckInterval);
            this.uploadCheckInterval = 0;
        }
    };
    BaseUploadWidget.prototype.serverQueryDone = function (newState) {
        this.stopUploadCheck();
        _super.prototype.serverQueryDone.call(this, newState);
    };
    BaseUploadWidget.prototype.submitUploadForm = function () {
        this._uploadForm.submit();
    };
    BaseUploadWidget.prototype.startServerQuery = function () {
        this._lastQueryId = _super.prototype.startServerQuery.call(this);
        this.uploadIframe.setAttribute(exports.BaseUploadWidget_CONSTS.uploading, BaseServerWidget_1.ServerStates[this.serverState]);
        if (!this.uploadCheckInterval)
            this.uploadCheckInterval = window.setInterval(this.listenOnIframe, exports.BaseUploadWidget_CONSTS.uploadCheckInterval);
        this.submitUploadForm();
        return this._lastQueryId;
    };
    BaseUploadWidget.prototype.getServerParameters = function () {
        var params = window.gigya.utils.object.extractProperties(this._screenSet.params, {}, 'APIKey|cid|oauth_token|login_token|source|sourceData|regToken'); // TODO: remove the any type
        params.authMode = params['oauth_token'] ? 'token' : 'cookie';
        var webAdapter = window.gigya._.apiAdapters.web;
        if (webAdapter) {
            // TODO: remove casting
            params.login_token = window.gigya._.apiAdapters.web.tokenStore.get(params['APIKey']);
            params.gmidTicket = window.gigya._.apiAdapter.getGmidTicket();
        }
        if (!params.APIKey)
            params.APIKey = window.gigya.thisScript.APIKey;
        if (this._screenSet.data.regToken)
            params.regToken = this._screenSet.data.regToken;
        return params;
    };
    return BaseUploadWidget;
}(BaseServerWidget_1.BaseServerWidget));
exports.BaseUploadWidget = BaseUploadWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget.ts":
/*!*******************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget.ts ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var TemplateElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseWidget = /** @class */ (function (_super) {
    tslib_1.__extends(BaseWidget, _super);
    function BaseWidget(el, parent, _screen, resetCss) {
        if (resetCss === void 0) { resetCss = true; }
        var _this = _super.call(this, el, parent) || this;
        _this._screen = _screen;
        _this.params = {};
        _this.renderWidgetUI = false;
        _this.params = _this.getElementParams(el);
        if (resetCss)
            window.gigya.utils.DOM.addClassToElement(el, 'gigya-reset');
        return _this;
    }
    BaseWidget.registerTypedWidgets = function (parentElement, widgetLibrary, factory) {
        var widgets = new Array();
        utils_1.ForEachProp(widgetLibrary, function (type, gigyaClass) {
            var elements = parentElement.querySelectorAll(type.CONSTS.selector);
            utils_1.ForEach(elements, function (el) {
                widgets.push(factory(type, el));
            });
        });
        return widgets;
    };
    //#endregion
    BaseWidget.prototype.getElementParams = function (el) {
        var _this = this;
        var params = {};
        var self = this;
        utils_1.ForEach(el.querySelectorAll('param'), function (param) {
            params[param.name] = param.value;
            var widgetExpressions;
            try {
                widgetExpressions = utils_1.getConditionalAttributeExpressions(param, true);
            }
            catch (e) {
                _this.warn('Error in param conditionals, conditionals ignored');
                widgetExpressions = [];
            }
            if (widgetExpressions.length > 0) {
                self.conditionalExpressions = self.conditionalExpressions.concat(widgetExpressions);
            }
        });
        return params;
    };
    BaseWidget.prototype.evaluateConditionalAttributes = function () {
        if (!this.widgetParams) {
            // first time the widget is loaded.
            this.widgetParams = this.params;
            this.renderWidgetUI = true;
        }
        _super.prototype.evaluateConditionalAttributes.call(this);
        if (this.renderWidgetUI) {
            this.renderWidget();
        }
    };
    // overrides 'executeConditionalResult' in TemplateElement
    BaseWidget.prototype.executeConditionalResult = function (evaluationResult, conditionalAtt, element) {
        if (!conditionalAtt.isWidgetParamTag) {
            return _super.prototype.executeConditionalResult.call(this, evaluationResult, conditionalAtt, element);
        }
        else {
            if (evaluationResult === '' && conditionalAtt.defaultValue) {
                evaluationResult = conditionalAtt.defaultValue;
            }
            if (!evaluationResult && !conditionalAtt.defaultValue) {
                conditionalAtt.lastAttributeValue = evaluationResult;
                // First check that the param is inside the widget params so
                // I can set the 'reRenderWidget' flag.
                if (this.widgetParams[conditionalAtt.attributeName]) {
                    delete this.widgetParams[conditionalAtt.attributeName];
                    this.renderWidgetUI = true;
                }
            }
            else if (evaluationResult !== conditionalAtt.lastAttributeValue) {
                conditionalAtt.lastAttributeValue = evaluationResult;
                this.widgetParams[conditionalAtt.attributeName] = evaluationResult;
                this.renderWidgetUI = true;
            }
            return evaluationResult;
        }
    };
    BaseWidget.prototype.renderWidget = function () {
        //virtual method - implemented only by widgets who are 'pluginWidgets'
    };
    return BaseWidget;
}(TemplateElement_1.TemplateElement));
exports.BaseWidget = BaseWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Captcha.ts":
/*!****************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Captcha.ts ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent.ts":
/*!****************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent.ts ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
exports.consentFieldName = 'isConsentGranted';
exports.namespace = 'preferences';
function postProcessForm(formData, preferencesSchema) {
    var displayedPreferences = getDisplayedPreferences(formData, preferencesSchema);
    if (displayedPreferences) {
        formData = window.gigya.utils.object.merge([formData, { displayedPreferences: displayedPreferences }]);
    }
    return formData;
}
exports.postProcessForm = postProcessForm;
function getDisplayedPreferences(formData, preferencesSchema) {
    if (!formData)
        return undefined;
    if (!preferencesSchema) {
        // gigya.logger.error(`form has preferences - but it doesn't exist in schema`);
        return undefined;
    }
    var consents = Object.keys(formData)
        .filter(isConsentField)
        .map(toConsentName);
    if (!consents.length)
        return undefined;
    return consents.reduce(function (res, curr) {
        var consent = preferencesSchema[curr];
        if (!consent) {
            window.gigya.logger.warn("form input bound to " + exports.namespace + "." + curr + " but it doesn't exist on schema");
        }
        else {
            res[curr] = {
                docVersion: consent.currentDocVersion,
                docDate: consent.currentDocDate,
            };
        }
        return res;
    }, {});
}
function isConsentField(fieldName) {
    // todo: after ie11 deprecation, replace with startsWith & endsWith.
    return fieldName.indexOf(exports.namespace + ".") == 0 && fieldName.substr(fieldName.length - exports.consentFieldName.length, fieldName.length) === exports.consentFieldName;
}
function toConsentName(consentFieldName) {
    // removing preferences namespace and isConsentGranted
    var fieldParts = consentFieldName.split('.');
    return fieldParts.slice(1, fieldParts.length - 1).join('.');
}


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Debug.ts":
/*!**************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Debug.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
function warn(screensetID, msg) {
    // TODO: this probably should use some general debug warn method or in the base plugin
    if (typeof console == 'object' && console.warn)
        console.warn('Gigya Screenset (' + screensetID + ') - ' + msg);
}
exports.warn = warn;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement.ts":
/*!****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement.ts ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var TemplateElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var ErrorElementPolicies = {
    'gigya-error-display': {
        showError: function (el, errorMessage) { return window.gigya.utils.DOM.addClassToElement(el, 'gigya-error-display-active'); },
        hideError: function (el) { return window.gigya.utils.DOM.removeClassFromElement(el, 'gigya-error-display-active'); },
    },
    'gigya-error-msg': {
        showError: function (el, errorMessage) {
            window.gigya.utils.DOM.addClassToElement(el, 'gigya-error-msg-active');
            el.innerHTML = errorMessage;
        },
        hideError: function (el) {
            window.gigya.utils.DOM.removeClassFromElement(el, 'gigya-error-msg-active');
            el.innerHTML = '';
        },
    },
};
utils_1.DeepFreeze(ErrorElementPolicies);
var ErrorScopes;
(function (ErrorScopes) {
    ErrorScopes[ErrorScopes["boundObjectError"] = 0] = "boundObjectError";
    ErrorScopes[ErrorScopes["firstError"] = 1] = "firstError";
    ErrorScopes[ErrorScopes["anyError"] = 2] = "anyError";
    ErrorScopes[ErrorScopes["allErrors"] = 3] = "allErrors";
    ErrorScopes[ErrorScopes["bound-object-error"] = 0] = "bound-object-error";
    ErrorScopes[ErrorScopes["first-error"] = 1] = "first-error";
    ErrorScopes[ErrorScopes["any-error"] = 2] = "any-error";
    ErrorScopes[ErrorScopes["all-errors"] = 3] = "all-errors";
})(ErrorScopes = exports.ErrorScopes || (exports.ErrorScopes = {}));
utils_1.DeepFreeze(ErrorScopes);
exports.ErrorDisplayElement_CONSTS = {
    gigyaClasses: ['gigya-error-display', 'gigya-error-msg'],
    boundedTo: 'data-bound-to',
    errorCodes: 'data-error-codes',
    scope: 'data-scope',
    flags: 'data-error-flags',
    errorClassPrefix: 'gigya-error-code-',
};
utils_1.DeepFreeze(exports.ErrorDisplayElement_CONSTS);
var ErrorDisplayElement = /** @class */ (function (_super) {
    tslib_1.__extends(ErrorDisplayElement, _super);
    function ErrorDisplayElement(el, _screen) {
        var _this = _super.call(this, el, _screen) || this;
        _this._screen = _screen;
        _this.boundedTo = el.getAttribute(exports.ErrorDisplayElement_CONSTS.boundedTo);
        _this.scope = ErrorScopes[el.getAttribute(exports.ErrorDisplayElement_CONSTS.scope)] || ErrorScopes.boundObjectError;
        var errorCodes = el.getAttribute(exports.ErrorDisplayElement_CONSTS.errorCodes);
        if (errorCodes)
            _this.allowedErrorCodes = utils_1.Map(errorCodes.split(','), function (code) { return parseInt(code); });
        else
            _this.allowedErrorCodes = [];
        var flags = el.getAttribute(exports.ErrorDisplayElement_CONSTS.flags);
        if (flags)
            _this.allowedFlags = flags.split(',');
        else
            _this.allowedFlags = [];
        for (var className in ErrorElementPolicies) {
            if (window.gigya.utils.DOM.isElementClass(el, className)) {
                _this.policy = ErrorElementPolicies[className];
                break;
            }
        }
        _this.policy.hideError(el); // clear error as initial appearance
        // WCAG: Set role=alert and aria-atomic so that screen readers will automatically read updated error text.
        // See: https://www.w3.org/TR/WCAG20-TECHS/ARIA19.html
        el.setAttribute('aria-atomic', 'true');
        el.setAttribute('role', 'alert');
        return _this;
    }
    ErrorDisplayElement.prototype.isErrorCodeAllowed = function (errorCode, flags) {
        var _this = this;
        if (flags === void 0) { flags = null; }
        var allowedCode = (this.allowedErrorCodes.length === 0 && errorCode !== GSErrors_1.GSErrors.Data_Pending) || window.gigya.utils.array.indexOf(this.allowedErrorCodes, errorCode) !== -1;
        var allowedFlag = this.allowedFlags.length === 0; // Allow all flags if flags are not specified
        if (this.allowedFlags.length && flags) {
            var arFlags = flags.split(',');
            allowedFlag = utils_1.Some(arFlags, function (flag) {
                if (window.gigya.utils.array.indexOf(_this.allowedFlags, flag) !== -1) {
                    allowedFlag = true;
                    return true;
                }
                return false;
            });
        }
        return allowedCode && allowedFlag;
    };
    ErrorDisplayElement.prototype.showError = function (error) {
        this.setLastError(error);
        this.policy.showError(this.instanceElement, error.errorMessage);
        this._screenSet.centerModal();
    };
    ErrorDisplayElement.prototype.hideError = function () {
        this.policy.hideError(this.instanceElement);
        this.removeLastError();
    };
    ErrorDisplayElement.prototype.setLastError = function (error) {
        this.removeLastError();
        this.lastError = error;
        if (this.instanceElement) {
            window.gigya.utils.DOM.addClassToElement(this.instanceElement, exports.ErrorDisplayElement_CONSTS.errorClassPrefix + error.errorCode);
            this._screenSet.centerModal();
        }
    };
    ErrorDisplayElement.prototype.removeLastError = function () {
        if (this.lastError) {
            if (this.instanceElement) {
                window.gigya.utils.DOM.removeClassFromElement(this.instanceElement, exports.ErrorDisplayElement_CONSTS.errorClassPrefix + this.lastError.errorCode);
                this._screenSet.centerModal();
            }
            this.lastError = null;
        }
    };
    ErrorDisplayElement.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        this.boundedTo = this.instanceElement.getAttribute(exports.ErrorDisplayElement_CONSTS.boundedTo);
        var errorCodes = this.instanceElement.getAttribute(exports.ErrorDisplayElement_CONSTS.errorCodes);
        if (errorCodes)
            this.allowedErrorCodes = utils_1.Map(errorCodes.split(','), function (code) { return parseInt(code); });
        else
            this.allowedErrorCodes = [];
        this.scope = ErrorScopes[this.instanceElement.getAttribute(exports.ErrorDisplayElement_CONSTS.scope)] || ErrorScopes.boundObjectError;
        var flags = this.instanceElement.getAttribute(exports.ErrorDisplayElement_CONSTS.flags);
        if (flags)
            this.allowedFlags = flags.split(',');
        else
            this.allowedFlags = [];
    };
    return ErrorDisplayElement;
}(TemplateElement_1.TemplateElement));
exports.ErrorDisplayElement = ErrorDisplayElement;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors.ts":
/*!***************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var _this = this;
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var ScreenOptions_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.PendingErrorAttributes = {};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.ACCOUNTS_LINKED] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.accountsLinkedScreen,
    nextScreen: function (form) { return form._screen.accountsLinkedScreen || '_finish'; },
    requiresFinalize: true,
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.ACCOUNT_PENDING_REGISTRATION] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.pendingRegistrationScreen,
    nextScreen: function (form) {
        var apiData = form._screenSet.getApiData();
        delete apiData.getSchema; // cleaning cached schema
        return form._screen.pendingRegistrationScreen;
    },
    requiresFinalize: true,
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.LOGIN_IDENTIFIER_EXISTS] = exports.PendingErrorAttributes[GSErrors_1.GSErrors.OK_WITH_ERROR_LOGIN_IDENTIFIER_EXISTS] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.existingLoginIdentifierScreen,
    nextScreen: function (form) { return form._screenSet.data.regToken && form._screen.existingLoginIdentifierScreen; },
    requiresFinalize: true,
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.ACCOUNT_PENDING_VERIFICATION] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.pendingVerificationScreen,
    nextScreen: function (form) { return form._screen.pendingVerificationScreen; },
    resetFinalizeNeededState: true,
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.ACCOUNT_MISSING_LOGINID] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.missingLoginIdScreen,
    nextScreen: function (form) { return form._screen.missingLoginIdScreen; },
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.PENDING_PASSWORD_CHANGE] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.pendingPasswordChangeScreen,
    nextScreen: function (form) { return form._screen.pendingPasswordChangeScreen; },
    requiresFinalize: true,
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.ACCOUNT_PENDING_TFA_VERIFICATION] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.pendingTfaVerificationScreen,
    nextScreen: function (form) { return form._screen.pendingTfaVerificationScreen; },
    requiresFinalize: true,
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.ACCOUNT_PENDING_TFA_REGISTRATION] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.pendingTfaRegistrationScreen,
    nextScreen: function (form) { return form._screen.pendingTfaRegistrationScreen; },
    requiresFinalize: true,
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.ACCOUNT_PENDING_RECENT_LOGIN] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.pendingReAuthenticationScreen,
    nextScreen: function (form) { return form._screen.pendingReAuthenticationScreen; },
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.PENDING_CODE_VERIFICATION] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.pendingCodeVerificationScreen,
    requiresFinalize: true,
    nextScreen: function (form) { return tslib_1.__awaiter(_this, void 0, void 0, function () {
        var apiData, accountInfo;
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    apiData = form._screenSet.getApiData();
                    accountInfo = apiData.getAccountInfo = apiData.getAccountInfo || {};
                    if (!(!accountInfo.email && !(accountInfo.profile && accountInfo.profile.email))) return [3 /*break*/, 2];
                    return [4 /*yield*/, new gigya.Promise(function (r) { return form._screenSet.updateAccountInfo(r); })];
                case 1:
                    accountInfo = _a.sent();
                    _a.label = 2;
                case 2:
                    accountInfo.email = accountInfo.email || (accountInfo.profile && accountInfo.profile.email);
                    window.gigya.accounts.otp.sendCode({
                        regToken: form._screenSet.data.regToken,
                        email: accountInfo.email,
                        callback: function (res) {
                            if (res.errorCode == GSErrors_1.GSErrors.OK) {
                                form._screenSet.data.otpData.vToken = res.vToken;
                            }
                        }
                    });
                    return [2 /*return*/, form._screen.pendingCodeVerificationScreen];
            }
        });
    }); }
};
utils_1.DeepFreeze(exports.PendingErrorAttributes);
function notImplementerAbstract() {
    throw new Error('NOT IMPLEMENTED');
}
exports.notImplementerAbstract = notImplementerAbstract;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/AuthMethodsForm.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/AuthMethodsForm.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var getAttribute = window.gigya._.plugins.utils.DOM.getAttribute;
exports.AuthMethodsForm_CONSTS = {
    gigyaClass: 'gigya-auth-methods-form',
};
utils_1.DeepFreeze(exports.AuthMethodsForm_CONSTS);
var AuthMethodsForm = /** @class */ (function (_super) {
    tslib_1.__extends(AuthMethodsForm, _super);
    function AuthMethodsForm() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._authMethodButtons = [];
        return _this;
    }
    AuthMethodsForm.prototype.linkInstanceElement = function (parent) {
        var _this = this;
        _super.prototype.linkInstanceElement.call(this, parent);
        this.instanceElement.querySelectorAll('[data-auth-method]')
            .forEach(function (el) { return _this._authMethodButtons.push(el); });
    };
    AuthMethodsForm.prototype.checkAutoSkip = function (formContext, callback) {
        var _this = this;
        _super.prototype.checkAutoSkip.call(this, formContext, function (formCanSkip) {
            if (formCanSkip) { // auto-skip is enabled
                var enabledAuthMethods = _this.getEnabledAuthMethods();
                if (enabledAuthMethods.length == 1 // only 1 active auth method
                    || !formContext.explicitSwitchScreen) { // navigation to screen wasn't explicit (explicit means: clicking on a link that says "Change auth method")
                    _this.autoSkipScreen = _this.getDefaultAuthScreen(enabledAuthMethods);
                    return callback(true);
                }
            }
            return callback(false);
        });
    };
    AuthMethodsForm.prototype.getDefaultAuthScreen = function (enabledAuthMethods) {
        if (!enabledAuthMethods || !enabledAuthMethods.length) {
            window.gigya.logger.warn('could not find default auth method');
            return null;
        }
        var defaultAuthMethod = enabledAuthMethods[enabledAuthMethods.length - 1]; // get last enabled auth method
        var authMethodButton = this._authMethodButtons.find(function (x) { return getAttribute(x, 'data-auth-method') === defaultAuthMethod; });
        if (!authMethodButton) {
            // remove the last auth-method from the list (the one we could'nt find a match for)
            enabledAuthMethods.pop();
            return this.getDefaultAuthScreen(enabledAuthMethods);
        }
        var defaultAuthScreen = getAttribute(authMethodButton, 'data-switch-screen');
        window.gigya.logger.info('found default auth-screen', { successScreen: defaultAuthScreen });
        return defaultAuthScreen;
    };
    AuthMethodsForm.prototype.getEnabledAuthMethods = function () {
        var _a, _b;
        var apiData = this._screenSet.getApiData();
        return ((_b = (_a = apiData.getAccountInfo) === null || _a === void 0 ? void 0 : _a.authMethods) === null || _b === void 0 ? void 0 : _b.slice()) || [];
    };
    AuthMethodsForm.CONSTS = exports.AuthMethodsForm_CONSTS;
    return AuthMethodsForm;
}(BaseForm_1.BaseForm));
exports.AuthMethodsForm = AuthMethodsForm;
BaseForm_1.BaseForm.addFormToLibrary(AuthMethodsForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LinkAccountsForm.ts":
/*!*******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LinkAccountsForm.ts ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var LoginModes_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts");
exports.LinkAccountsForm_CONSTS = {
    gigyaClass: 'gigya-link-accounts-form',
};
utils_1.DeepFreeze(exports.LinkAccountsForm_CONSTS);
var LinkAccountsForm = /** @class */ (function (_super) {
    tslib_1.__extends(LinkAccountsForm, _super);
    function LinkAccountsForm(screen, elForm, gigyaClass) {
        return _super.call(this, screen, elForm, gigyaClass) || this;
    }
    LinkAccountsForm.prototype.prePopulateData = function () {
        var populateData = _super.prototype.prePopulateData.call(this);
        var apiData = this._screenSet.getApiData();
        var conflictingAccount = apiData && apiData.getConflictingAccount && apiData.getConflictingAccount.conflictingAccount;
        if (conflictingAccount)
            populateData.loginID = conflictingAccount.loginID || (conflictingAccount.emails && conflictingAccount.emails[0]);
        return populateData;
    };
    LinkAccountsForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            {
                loginID: true,
                password: true,
            },
        ]);
    };
    LinkAccountsForm.prototype.submitApi = function () {
        return window.gigya.accounts.login;
    };
    LinkAccountsForm.prototype.getNeededData = function () {
        var neededData = _super.prototype.getNeededData.call(this);
        if (this._screenSet.data.regToken) {
            neededData = window.gigya.utils.object.merge([
                // only bring in conflicting accounts if there is a regToken present
                neededData,
                {
                    getConflictingAccount: {
                        params: {
                            regToken: this._screenSet.data.regToken,
                        },
                    },
                },
            ]);
        }
        return neededData;
    };
    LinkAccountsForm.prototype.defaultSubmitParams = function () {
        var apiData = this._screenSet.getApiData();
        var conflictingAccount = apiData && apiData.getConflictingAccount && apiData.getConflictingAccount.conflictingAccount;
        return window.gigya.utils.object.merge([
            _super.prototype.defaultSubmitParams.call(this),
            {
                loginMode: LoginModes_1.LoginModes.link.name,
                loginID: conflictingAccount && (conflictingAccount.loginID || (conflictingAccount.emails && conflictingAccount.emails[0])),
                include: window.gigya.utils.stringUtils.mergeCommaSeparatedValues('profile,data,subscriptions,preferences', this._screenSet.params.include)
            },
        ]);
    };
    LinkAccountsForm.prototype.getLoginProviders = function () {
        return LoginModes_1.LoginModes.link.getLoginProviders(this._screenSet.data.apiData, this._screenSet.params, this._screenSet.data.regToken);
    };
    LinkAccountsForm.prototype.onSkipped = function (response) {
        this._screenSet.data.extraEventData.allowAccountsLinking = true;
    };
    LinkAccountsForm.CONSTS = exports.LinkAccountsForm_CONSTS;
    return LinkAccountsForm;
}(BaseForm_1.BaseForm));
exports.LinkAccountsForm = LinkAccountsForm;
BaseForm_1.BaseForm.addFormToLibrary(LinkAccountsForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LoginForm.ts":
/*!************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LoginForm.ts ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var LoginModes_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.LoginForm_CONSTS = {
    gigyaClass: 'gigya-login-form',
};
utils_1.DeepFreeze(exports.LoginForm_CONSTS);
var LoginForm = /** @class */ (function (_super) {
    tslib_1.__extends(LoginForm, _super);
    function LoginForm(screen, elForm, gigyaClass) {
        return _super.call(this, screen, elForm, gigyaClass) || this;
    }
    LoginForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            {
                loginID: true,
                password: true,
                captchaText: true,
                captchaToken: true,
            },
        ]);
    };
    LoginForm.prototype.submitApi = function () {
        return window.gigya.accounts.login;
    };
    LoginForm.prototype.getErrorKey = function (response) {
        if (response.errorCode === GSErrors_1.GSErrors.OLD_PASSWORD_USED) {
            return 'old_password_used';
        }
        return _super.prototype.getErrorKey.call(this, response);
    };
    LoginForm.prototype._getSubmitApiParams = function (params) {
        params = LoginModes_1.LoginModes.standard.filterParams(params);
        return _super.prototype._getSubmitApiParams.call(this, params);
    };
    LoginForm.prototype.defaultSubmitParams = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.defaultSubmitParams.call(this),
            {
                loginMode: LoginModes_1.LoginModes.standard.name,
                include: window.gigya.utils.stringUtils.mergeCommaSeparatedValues('profile,data,emails,subscriptions,preferences', this._screenSet.params.include)
            },
        ]);
    };
    LoginForm.CONSTS = exports.LoginForm_CONSTS;
    return LoginForm;
}(BaseForm_1.BaseForm));
exports.LoginForm = LoginForm;
BaseForm_1.BaseForm.addFormToLibrary(LoginForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/NewsletterSignupForm.ts":
/*!***********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/NewsletterSignupForm.ts ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.NewsletterSignup_CONSTS = {
    gigyaClass: 'gigya-subscribe-with-email-form',
};
utils_1.DeepFreeze(exports.NewsletterSignup_CONSTS);
var NewsletterSignupForm = /** @class */ (function (_super) {
    tslib_1.__extends(NewsletterSignupForm, _super);
    function NewsletterSignupForm(screen, elForm, gigyaClass) {
        return _super.call(this, screen, elForm, gigyaClass) || this;
    }
    NewsletterSignupForm.prototype.prePopulateDataFrom = function () {
        return ['getAccountInfo', 'getAccountInfo.profile'];
    };
    NewsletterSignupForm.prototype.getNeededData = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.getNeededData.call(this),
            {
                getSchema: {
                    params: {},
                },
                getAccountInfo: {
                    params: {
                        include: 'emails,profile,subscriptions,preferences',
                    },
                },
            },
        ]);
    };
    NewsletterSignupForm.prototype.performSubmit = function (oParams) {
        var _this = this;
        var regTok = this._screenSet.params.regToken || this._screenSet.data.regToken;
        if (this._screenSet.getApiData().getAccountInfo.status === 'OK' || regTok) {
            oParams = this.setSubscriptions(oParams, regTok);
            _super.prototype.performSubmit.call(this, oParams);
        }
        else {
            window.gigya.accounts.initRegistration({
                isLite: true,
                callback: function (res) {
                    if (res.regToken) {
                        oParams = _this.setSubscriptions(oParams, res.regToken);
                    }
                    _super.prototype.performSubmit.call(_this, oParams);
                },
            });
        }
    };
    NewsletterSignupForm.prototype.setSubscriptions = function (oParams, regToken) {
        if (regToken) {
            oParams['regToken'] = regToken;
            // this should store the regToken for future screens in the same screen set...
            this._screenSet.params.regToken = regToken;
            this._screenSet.data.regToken = regToken;
        }
        return oParams;
    };
    NewsletterSignupForm.prototype.submitApi = function () {
        return window.gigya.accounts.setAccountInfo;
    };
    NewsletterSignupForm.prototype.onAfterSubmit = function (response) {
        if (response.errorCode == GSErrors_1.GSErrors.OK) {
            var formData = this.getFormData(true, false);
            if (formData.email) {
                if (!formData.profile)
                    formData.profile = {};
                formData.profile.email = formData.email;
                delete formData.email;
            }
            this._screenSet.onAccountInfo(formData);
        }
        _super.prototype.onAfterSubmit.call(this, response);
    };
    NewsletterSignupForm.prototype.requiredFields = function () {
        var requiredFields = _super.prototype.requiredFields.call(this);
        requiredFields['email'] = true;
        return requiredFields;
    };
    NewsletterSignupForm.prototype.schemaValidated = function () {
        return true;
    };
    NewsletterSignupForm.CONSTS = exports.NewsletterSignup_CONSTS;
    return NewsletterSignupForm;
}(BaseForm_1.BaseForm));
exports.NewsletterSignupForm = NewsletterSignupForm;
BaseForm_1.BaseForm.addFormToLibrary(NewsletterSignupForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OrganizationRegistrationForm.ts":
/*!*******************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OrganizationRegistrationForm.ts ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
exports.OrgRegisterForm_CONSTS = {
    gigyaClass: 'gigya-org-register-form',
};
utils_1.DeepFreeze(exports.OrgRegisterForm_CONSTS);
var OrgRegisterForm = /** @class */ (function (_super) {
    tslib_1.__extends(OrgRegisterForm, _super);
    function OrgRegisterForm(screen, elForm, gigyaClass) {
        return _super.call(this, screen, elForm, gigyaClass) || this;
    }
    // merges the "organizationSchema" and "requesterSchema" fields
    // from the getOrganizationSchema response
    // into the "general" schema (getSchema response)
    OrgRegisterForm.prototype.mergeOrgSchemaIntoMainSchema = function (mainSchema, orgSchema) {
        return window.gigya.utils.object.merge([mainSchema, {
                organizationSchema: orgSchema.organizationSchema,
                requesterSchema: orgSchema.requesterSchema
            }], true);
    };
    OrgRegisterForm.prototype.prePopulateDataFrom = function () {
        return ['getOrganizationSchema'];
    };
    OrgRegisterForm.prototype.getNeededData = function () {
        var _this = this;
        return window.gigya.utils.object.merge([
            _super.prototype.getNeededData.call(this),
            {
                getOrganizationSchema: {
                    params: {},
                    responseHandler: function (orgSchema) {
                        var mainSchema = _this._screenSet.getApiData().getSchema;
                        if (mainSchema)
                            _this._screenSet.getApiData().getSchema = _this.mergeOrgSchemaIntoMainSchema(mainSchema, orgSchema);
                        return orgSchema; // return getOrgSchemaResponse
                    },
                },
                getSchema: {
                    params: {},
                    responseHandler: function (mainSchema) {
                        var orgSchema = _this._screenSet.getApiData().getOrganizationSchema;
                        return _this.mergeOrgSchemaIntoMainSchema(mainSchema, orgSchema || {}); // return the merged schema
                    }
                }
            },
        ]);
    };
    OrgRegisterForm.prototype.schemaValidated = function () {
        return true;
    };
    OrgRegisterForm.prototype.submitApi = function () {
        return window.gigya.accounts.b2b.registerOrganization;
    };
    OrgRegisterForm.CONSTS = exports.OrgRegisterForm_CONSTS;
    return OrgRegisterForm;
}(BaseForm_1.BaseForm));
exports.OrgRegisterForm = OrgRegisterForm;
BaseForm_1.BaseForm.addFormToLibrary(OrgRegisterForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpLoginForm.ts":
/*!***************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpLoginForm.ts ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var OtpVerificationBaseForm_1 = __webpack_require__(/*! ./OtpVerificationBaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpVerificationBaseForm.ts");
exports.OtpLoginForm_CONSTS = {
    gigyaClass: 'gigya-otp-login-form',
};
utils_1.DeepFreeze(exports.OtpLoginForm_CONSTS);
var OtpLoginForm = /** @class */ (function (_super) {
    tslib_1.__extends(OtpLoginForm, _super);
    function OtpLoginForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    OtpLoginForm.prototype.submitApi = function () {
        return window.gigya.accounts.otp.login;
    };
    OtpLoginForm.CONSTS = exports.OtpLoginForm_CONSTS;
    return OtpLoginForm;
}(OtpVerificationBaseForm_1.OtpVerificationBaseForm));
exports.OtpLoginForm = OtpLoginForm;
BaseForm_1.BaseForm.addFormToLibrary(OtpLoginForm);
// region mobile-login backward compatibility
// for old screen sets that uses 'gigya-mobile-verification-form'
exports.MobileLoginVerificationForm_CONSTS = {
    gigyaClass: 'gigya-mobile-verification-form',
};
utils_1.DeepFreeze(exports.MobileLoginVerificationForm_CONSTS);
var MobileLoginVerificationForm = /** @class */ (function (_super) {
    tslib_1.__extends(MobileLoginVerificationForm, _super);
    function MobileLoginVerificationForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MobileLoginVerificationForm.CONSTS = exports.MobileLoginVerificationForm_CONSTS;
    return MobileLoginVerificationForm;
}(OtpLoginForm));
exports.MobileLoginVerificationForm = MobileLoginVerificationForm;
BaseForm_1.BaseForm.addFormToLibrary(MobileLoginVerificationForm);
// endregion


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpSendCodeForm.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpSendCodeForm.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(__webpack_provided_Object_dot_assign) {Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
exports.OtpSendCodeForm_CONSTS = {
    gigyaClass: 'gigya-otp-send-code-form',
};
utils_1.DeepFreeze(exports.OtpSendCodeForm_CONSTS);
var OtpSendCodeForm = /** @class */ (function (_super) {
    tslib_1.__extends(OtpSendCodeForm, _super);
    function OtpSendCodeForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    OtpSendCodeForm.prototype.submitApi = function () {
        return window.gigya.accounts.otp.sendCode;
    };
    OtpSendCodeForm.prototype.prePopulateDataFrom = function () {
        return ['getAccountInfo', 'getAccountInfo.profile'];
    };
    OtpSendCodeForm.prototype.onAfterSubmit = function (response) {
        this._screenSet.data.otpData.vToken = response['vToken'];
        _super.prototype.onAfterSubmit.call(this, response);
    };
    OtpSendCodeForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            {
                phoneNumber: true,
                email: true
            },
        ]);
    };
    OtpSendCodeForm.prototype.performSubmit = function (oParams) {
        this._saveSpecialFieldsInCache();
        _super.prototype.performSubmit.call(this, oParams);
    };
    OtpSendCodeForm.prototype._saveSpecialFieldsInCache = function () {
        var _this = this;
        var formData = this.getFormData(true, true, true);
        this._screenSet.getApiData().getAccountInfo = this._screenSet.getApiData().getAccountInfo || {};
        var specialFields = this.specialFields();
        Object.keys(specialFields)
            .filter(function (specialField) { return Boolean(specialFields[specialField]); })
            .forEach(function (specialField) {
            var _a;
            __webpack_provided_Object_dot_assign(_this._screenSet.getApiData().getAccountInfo, (_a = {}, _a[specialField] = formData[specialField], _a));
        });
    };
    OtpSendCodeForm.CONSTS = exports.OtpSendCodeForm_CONSTS;
    return OtpSendCodeForm;
}(BaseForm_1.BaseForm));
exports.OtpSendCodeForm = OtpSendCodeForm;
BaseForm_1.BaseForm.addFormToLibrary(OtpSendCodeForm);
// region mobile-login backward compatibility
// for old screen sets that uses 'gigya-mobile-verification-form'
exports.MobileLoginForm_CONSTS = {
    gigyaClass: 'gigya-mobile-login-form',
};
utils_1.DeepFreeze(exports.MobileLoginForm_CONSTS);
var MobileLoginForm = /** @class */ (function (_super) {
    tslib_1.__extends(MobileLoginForm, _super);
    function MobileLoginForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MobileLoginForm.CONSTS = exports.MobileLoginForm_CONSTS;
    return MobileLoginForm;
}(OtpSendCodeForm));
exports.MobileLoginForm = MobileLoginForm;
BaseForm_1.BaseForm.addFormToLibrary(MobileLoginForm);
// endregion

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js")["__assign"]))

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpUpdateForm.ts":
/*!****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpUpdateForm.ts ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var OtpVerificationBaseForm_1 = __webpack_require__(/*! ./OtpVerificationBaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpVerificationBaseForm.ts");
exports.OtpUpdateForm_CONSTS = {
    gigyaClass: 'gigya-otp-update-form',
};
utils_1.DeepFreeze(exports.OtpUpdateForm_CONSTS);
var OtpUpdateForm = /** @class */ (function (_super) {
    tslib_1.__extends(OtpUpdateForm, _super);
    function OtpUpdateForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    OtpUpdateForm.prototype.submitApi = function () {
        return window.gigya.accounts.otp.update;
    };
    OtpUpdateForm.CONSTS = exports.OtpUpdateForm_CONSTS;
    return OtpUpdateForm;
}(OtpVerificationBaseForm_1.OtpVerificationBaseForm));
exports.OtpUpdateForm = OtpUpdateForm;
BaseForm_1.BaseForm.addFormToLibrary(OtpUpdateForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpVerificationBaseForm.ts":
/*!**************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpVerificationBaseForm.ts ***!
  \**************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var OtpVerificationBaseForm = /** @class */ (function (_super) {
    tslib_1.__extends(OtpVerificationBaseForm, _super);
    function OtpVerificationBaseForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    OtpVerificationBaseForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            {
                code: true
            },
        ]);
    };
    OtpVerificationBaseForm.prototype.getErrorKey = function (response) {
        if (response.errorCode === GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE && response.errorDetails) {
            return utils_1.endsWith(response.errorDetails, 'Token has been revoked') ?
                'otp_code_expired' :
                utils_1.endsWith(response.errorDetails, 'phoneNumber already exists') ?
                    'phone_number_exists' :
                    utils_1.endsWith(response.errorDetails, 'code') ?
                        'please_enter_a_valid_code' :
                        _super.prototype.getErrorKey.call(this, response);
        }
        return _super.prototype.getErrorKey.call(this, response);
    };
    OtpVerificationBaseForm.prototype.defaultSubmitParams = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.defaultSubmitParams.call(this),
            { vToken: this._screenSet.data.otpData.vToken }
        ]);
    };
    return OtpVerificationBaseForm;
}(BaseForm_1.BaseForm));
exports.OtpVerificationBaseForm = OtpVerificationBaseForm;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordAuthMethodForm.ts":
/*!*************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordAuthMethodForm.ts ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var LoginForm_1 = __webpack_require__(/*! ./LoginForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LoginForm.ts");
exports.PasswordAuthMethodForm_CONSTS = {
    gigyaClass: 'gigya-password-auth-method-form',
};
utils_1.DeepFreeze(exports.PasswordAuthMethodForm_CONSTS);
var PasswordAuthMethodForm = /** @class */ (function (_super) {
    tslib_1.__extends(PasswordAuthMethodForm, _super);
    function PasswordAuthMethodForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PasswordAuthMethodForm.prototype.submitApi = function () {
        var _this = this;
        return function (params, formData, options, defaultParams) {
            var accountInfo = _this._screenSet.getApiData().getAccountInfo || {};
            formData = window.gigya.utils.object.merge([formData, {
                    loginID: accountInfo.identifier,
                    password: formData.password
                }]);
            window.gigya.accounts.login(params, formData, options, defaultParams);
        };
    };
    PasswordAuthMethodForm.CONSTS = exports.PasswordAuthMethodForm_CONSTS;
    return PasswordAuthMethodForm;
}(LoginForm_1.LoginForm));
exports.PasswordAuthMethodForm = PasswordAuthMethodForm;
BaseForm_1.BaseForm.addFormToLibrary(PasswordAuthMethodForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessLoginForm.ts":
/*!************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessLoginForm.ts ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(__webpack_provided_Object_dot_assign) {Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.PasswordlessLoginForm_CONSTS = {
    gigyaClass: 'gigya-passwordless-login-form',
};
utils_1.DeepFreeze(exports.PasswordlessLoginForm_CONSTS);
var PasswordlessLoginForm = /** @class */ (function (_super) {
    tslib_1.__extends(PasswordlessLoginForm, _super);
    function PasswordlessLoginForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PasswordlessLoginForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            { loginID: true }
        ]);
    };
    PasswordlessLoginForm.prototype.submitApi = function () {
        return function (params, formData, options, defaultParams) {
            window.gigya.accounts.auth.getMethods({
                identifier: formData.loginID,
                callback: options.callback
            });
        };
    };
    PasswordlessLoginForm.prototype.getErrorKey = function (response) {
        return response.errorCode === GSErrors_1.GSErrors.NOT_FOUND
            ? 'invalid_login_identifier'
            : _super.prototype.getErrorKey.call(this, response);
    };
    PasswordlessLoginForm.prototype.onAfterSubmit = function (response) {
        this.saveInAccountInfo({
            identifier: response.requestParams.identifier,
            authMethods: response.methods
        });
        _super.prototype.onAfterSubmit.call(this, response);
    };
    PasswordlessLoginForm.prototype.saveInAccountInfo = function (obj) {
        var apiData = this._screenSet.getApiData();
        apiData.getAccountInfo = apiData.getAccountInfo || {};
        __webpack_provided_Object_dot_assign(apiData.getAccountInfo, obj);
    };
    PasswordlessLoginForm.CONSTS = exports.PasswordlessLoginForm_CONSTS;
    return PasswordlessLoginForm;
}(BaseForm_1.BaseForm));
exports.PasswordlessLoginForm = PasswordlessLoginForm;
BaseForm_1.BaseForm.addFormToLibrary(PasswordlessLoginForm);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js")["__assign"]))

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProfileForm.ts":
/*!**************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProfileForm.ts ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var LoginModes_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts");
exports.ProfileForm_CONSTS = {
    gigyaClass: 'gigya-profile-form',
    specialFields: {
        username: true,
        oldPassword: true,
        password: true,
        newPassword: true,
        passwordRetype: true,
        secretQuestion: true,
        secretAnswer: true,
        addLoginEmails: true,
        removeLoginEmails: true,
    },
};
utils_1.DeepFreeze(exports.ProfileForm_CONSTS);
var ProfileForm = /** @class */ (function (_super) {
    tslib_1.__extends(ProfileForm, _super);
    function ProfileForm(screen, elForm, gigyaClass) {
        return _super.call(this, screen, elForm, gigyaClass) || this;
    }
    ProfileForm.prototype.prePopulateDataFrom = function () {
        return ['getAccountInfo', 'getAccountInfo.profile', 'getAccountInfo.subscriptions', 'getAccountInfo.loginIDs', 'getAccountInfo.preferences'];
    };
    ProfileForm.prototype.getNeededData = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.getNeededData.call(this),
            {
                getSchema: {
                    params: {},
                },
                getAccountInfo: {
                    params: {
                        include: 'loginIDs,emails,profile,data,subscriptions,preferences',
                    },
                },
                getProviders: {
                    params: {
                        sections: 'activeProviders',
                    },
                },
            },
        ]);
    };
    ProfileForm.prototype.schemaValidated = function () {
        return true;
    };
    ProfileForm.prototype.isPasswordSchemaValidated = function () {
        if (window.gigya.thisScript.globalConf['toggles'] && typeof window.gigya.thisScript.globalConf['toggles']['alwaysValidatePassword'] != 'undefined') {
            return window.gigya.thisScript.globalConf['toggles']['alwaysValidatePassword'];
        }
        else {
            window.gigya.logger.report('alwaysValidatePassword not adopted completely', { globalConf: JSON.stringify(window.gigya.thisScript.globalConf) }, false);
        }
        return false;
    };
    ProfileForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([_super.prototype.specialFields.call(this), exports.ProfileForm_CONSTS.specialFields]);
    };
    ProfileForm.prototype.getLoginProviders = function () {
        return LoginModes_1.LoginModes.reAuth.getLoginProviders(this._screenSet.data.apiData, this._screenSet.params, this._screenSet.data.regToken);
    };
    ProfileForm.prototype.submitApi = function () {
        return window.gigya.accounts.setAccountInfo;
    };
    ProfileForm.prototype.defaultSubmitParams = function () {
        var conflictHandling = this._screenSet.params.conflictHandling
            || LoginModes_1.ConflictHandling[this._screenSet.data.regToken ? LoginModes_1.ConflictHandling.saveProfileAndFail : LoginModes_1.ConflictHandling.fail];
        return window.gigya.utils.object.merge([
            _super.prototype.defaultSubmitParams.call(this),
            {
                conflictHandling: conflictHandling,
            },
        ]);
    };
    ProfileForm.prototype.getExtraProfileFields = function (missingOnly) {
        var missingFields = _super.prototype.getExtraProfileFields.call(this, missingOnly);
        if (window.gigya.utils.array.indexOf(missingFields, 'samlData') === -1) {
            missingFields.push('samlData');
        }
        return missingFields;
    };
    ProfileForm.CONSTS = exports.ProfileForm_CONSTS;
    return ProfileForm;
}(BaseForm_1.BaseForm));
exports.ProfileForm = ProfileForm;
BaseForm_1.BaseForm.addFormToLibrary(ProfileForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PushAuthMethodForm.ts":
/*!*********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PushAuthMethodForm.ts ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.PushAuthMethodForm_CONSTS = {
    gigyaClass: 'gigya-push-auth-method-form'
};
utils_1.DeepFreeze(exports.PushAuthMethodForm_CONSTS);
var PushAuthMethodForm = /** @class */ (function (_super) {
    tslib_1.__extends(PushAuthMethodForm, _super);
    function PushAuthMethodForm() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._pollingStartTime = 0;
        _this._pollingLimit = _this._screenSet.params['isVerifiedPollingLimit'] || 1000 * 60 * 2; // default 2 min
        _this._pollingInterval = _this._screenSet.params['isVerifiedPollingInterval'] || 1000 * 3; // default 3 sec
        return _this;
    }
    PushAuthMethodForm.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this.startPushVerificationFlow();
    };
    PushAuthMethodForm.prototype.unlinkInstanceElement = function () {
        this.stopPolling();
        _super.prototype.unlinkInstanceElement.call(this);
    };
    PushAuthMethodForm.prototype.startPushVerificationFlow = function () {
        var _this = this;
        var accountInfo = this.dataStore.apiData.getAccountInfo || {};
        window.gigya.accounts.auth.push.sendVerification({
            identifier: accountInfo.identifier,
            callback: function (res) { return _this.onSendVerificationResponse(res); }
        });
        this.startPolling();
    };
    PushAuthMethodForm.prototype.submitApi = function () {
        var _this = this;
        return function (params, data, options, defaultParams) {
            window.gigya.accounts.auth.login({
                accessToken: _this._accessToken,
                callback: options.callback
            });
        };
    };
    PushAuthMethodForm.prototype.stopPolling = function () {
        this._pollingStartTime = 0;
        clearTimeout(this._timeoutId);
    };
    PushAuthMethodForm.prototype.onSendVerificationResponse = function (res) {
        if (res.errorCode == 0 && res.vToken) {
            this.dataStore.pushData.vToken = res.vToken;
        }
        else {
            window.gigya.logger.error('gigya.accounts.auth.push.sendVerification failed', { res: res });
        }
    };
    PushAuthMethodForm.prototype.checkIsVerified = function () {
        var _this = this;
        // vToken may change in the data-store by the form's controls ("resend" button)
        var vToken = this.dataStore.pushData.vToken;
        if (vToken) {
            window.gigya.accounts.auth.push.isVerified({ vToken: vToken, callback: function (res) { return _this.onIsVerifiedResponse(res); } });
        }
        else {
            this.onIsVerifiedResponse({ errorCode: GSErrors_1.GSErrors.OK });
        }
    };
    ;
    PushAuthMethodForm.prototype.onPushVerified = function (accessToken) {
        this._accessToken = accessToken;
        this.stopPolling();
        this.submit(); // automatically submits the form so it'll send the accounts.auth.login request
    };
    PushAuthMethodForm.prototype.onIsVerifiedResponse = function (res) {
        var _this = this;
        // success
        if (res.accessToken)
            return this.onPushVerified(res.accessToken);
        // error
        if (res.errorCode != GSErrors_1.GSErrors.OK)
            window.gigya.logger.error('gigya.accounts.auth.push.isVerified failed', { res: res });
        // keep polling
        this._timeoutId = window.setTimeout(function () {
            if (_this.shouldContinuePolling())
                _this.checkIsVerified();
        }, this._pollingInterval);
    };
    PushAuthMethodForm.prototype.shouldContinuePolling = function () {
        var now = window.gigya.utils.date.now();
        return (now - this._pollingStartTime) < this._pollingLimit; // polling limit not reached
    };
    PushAuthMethodForm.prototype.startPolling = function () {
        this._pollingStartTime = window.gigya.utils.date.now();
        this.checkIsVerified();
    };
    PushAuthMethodForm.CONSTS = exports.PushAuthMethodForm_CONSTS;
    return PushAuthMethodForm;
}(BaseForm_1.BaseForm));
exports.PushAuthMethodForm = PushAuthMethodForm;
BaseForm_1.BaseForm.addFormToLibrary(PushAuthMethodForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ReauthenticationForm.ts":
/*!***********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ReauthenticationForm.ts ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var LoginModes_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts");
exports.ReauthenticationForm_CONSTS = {
    gigyaClass: 'gigya-reauthentication-form',
};
utils_1.DeepFreeze(exports.ReauthenticationForm_CONSTS);
var ReauthenticationForm = /** @class */ (function (_super) {
    tslib_1.__extends(ReauthenticationForm, _super);
    function ReauthenticationForm(screen, elForm, gigyaClass) {
        return _super.call(this, screen, elForm, gigyaClass) || this;
    }
    ReauthenticationForm.prototype.prePopulateData = function () {
        var populateData = _super.prototype.prePopulateData.call(this);
        var apiData = this._screenSet.getApiData();
        var loginIDs = apiData && apiData.getAccountInfo && apiData.getAccountInfo.loginIDs;
        if (loginIDs)
            populateData.loginID = loginIDs.username || (loginIDs.emails && loginIDs.emails[0]);
        return populateData;
    };
    ReauthenticationForm.prototype.submitApi = function () {
        return window.gigya.accounts.login;
    };
    ReauthenticationForm.prototype.getNeededData = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.getNeededData.call(this),
            {
                getSchema: {
                    params: {},
                },
                getAccountInfo: {
                    params: {
                        include: 'identities-active,loginIDs',
                    },
                    cache: false,
                },
            },
        ]);
    };
    ReauthenticationForm.prototype.getLoginProviders = function () {
        return LoginModes_1.LoginModes.reAuth.getLoginProviders(this._screenSet.data.apiData, this._screenSet.params, this._screenSet.data.regToken);
    };
    ReauthenticationForm.prototype.defaultSubmitParams = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.defaultSubmitParams.call(this),
            {
                loginMode: LoginModes_1.LoginModes.reAuth.name,
                loginID: 'no-one',
            },
        ]);
    };
    ReauthenticationForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            {
                password: true,
                captchaText: true,
                captchaToken: true,
                loginID: true,
            },
        ]);
    };
    ReauthenticationForm.CONSTS = exports.ReauthenticationForm_CONSTS;
    return ReauthenticationForm;
}(BaseForm_1.BaseForm));
exports.ReauthenticationForm = ReauthenticationForm;
BaseForm_1.BaseForm.addFormToLibrary(ReauthenticationForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm.ts":
/*!***************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm.ts ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
exports.RegisterForm_CONSTS = {
    gigyaClass: 'gigya-register-form',
};
utils_1.DeepFreeze(exports.RegisterForm_CONSTS);
var RegisterForm = /** @class */ (function (_super) {
    tslib_1.__extends(RegisterForm, _super);
    function RegisterForm(screen, elForm, gigyaClass) {
        return _super.call(this, screen, elForm, gigyaClass) || this;
    }
    RegisterForm.prototype.requiredFields = function () {
        var requiredFields = _super.prototype.requiredFields.call(this);
        requiredFields = window.gigya.utils.object.merge([requiredFields, this.specialFields()]);
        requiredFields['username'] = requiredFields['email'] = true;
        return requiredFields;
    };
    RegisterForm.prototype.prePopulateDataFrom = function () {
        return ['getAccountInfo', 'getAccountInfo.profile', 'getAccountInfo.loginIDs'];
    };
    RegisterForm.prototype.getNeededData = function () {
        var _this = this;
        return window.gigya.utils.object.merge([
            _super.prototype.getNeededData.call(this),
            {
                initRegistration: {
                    cache: false,
                    params: {},
                    responseHandler: function (res) {
                        window.gigya.logger.info("clearing account info from screenset cache");
                        var apiData = _this._screenSet.getApiData();
                        delete apiData.getAccountInfo;
                        return res; // pass result on to the screenSet
                    },
                },
                getSchema: {
                    params: {},
                },
            },
        ]);
    };
    RegisterForm.prototype.schemaValidated = function () {
        return true;
    };
    RegisterForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            {
                username: true,
                email: true,
                password: true,
                passwordRetype: true,
                secretQuestion: true,
                secretAnswer: true,
                captchaText: true,
                captchaToken: true,
                regSource: true,
                siteUID: true,
            },
        ]);
    };
    RegisterForm.prototype.performSubmit = function (oParams) {
        if (!this._screenSet.doesScreenHaveForms(this.successScreen)) {
            oParams.finalizeRegistration = true;
        }
        else {
            this._screenSet.data.finalizeRegistrationNeeded = true;
        }
        return _super.prototype.performSubmit.call(this, oParams);
    };
    RegisterForm.prototype.submitApi = function () {
        return window.gigya.accounts.register;
    };
    RegisterForm.prototype.queryStringToSubmitParamMap = function () {
        return {
            gig_email: 'email',
        };
    };
    RegisterForm.prototype.defaultSubmitParams = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.defaultSubmitParams.call(this),
            {
                include: window.gigya.utils.stringUtils.mergeCommaSeparatedValues('profile,data,emails,loginIDs,subscriptions,preferences', this._screenSet.params.include)
            },
        ]);
    };
    RegisterForm.CONSTS = exports.RegisterForm_CONSTS;
    return RegisterForm;
}(BaseForm_1.BaseForm));
exports.RegisterForm = RegisterForm;
BaseForm_1.BaseForm.addFormToLibrary(RegisterForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResendVerificationCodeForm.ts":
/*!*****************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResendVerificationCodeForm.ts ***!
  \*****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
exports.ResendVerificationCodeForm_CONSTS = {
    gigyaClass: 'gigya-resend-verification-code-form',
};
utils_1.DeepFreeze(exports.ResendVerificationCodeForm_CONSTS);
var ResendVerificationCodeForm = /** @class */ (function (_super) {
    tslib_1.__extends(ResendVerificationCodeForm, _super);
    function ResendVerificationCodeForm(screen, elForm, gigyaClass) {
        return _super.call(this, screen, elForm, gigyaClass) || this;
    }
    ResendVerificationCodeForm.prototype.getNeededData = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.getNeededData.call(this),
            {
                getAccountInfo: {
                    params: {
                        include: 'emails',
                    },
                },
            },
        ]);
    };
    ResendVerificationCodeForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            {
                email: true,
            },
        ]);
    };
    ResendVerificationCodeForm.prototype.submitApi = function () {
        return window.gigya.accounts.resendVerificationCode;
    };
    ResendVerificationCodeForm.CONSTS = exports.ResendVerificationCodeForm_CONSTS;
    return ResendVerificationCodeForm;
}(BaseForm_1.BaseForm));
exports.ResendVerificationCodeForm = ResendVerificationCodeForm;
BaseForm_1.BaseForm.addFormToLibrary(ResendVerificationCodeForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResetPasswordForm.ts":
/*!********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResetPasswordForm.ts ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.ResetPasswordForm_CONSTS = {
    gigyaClass: 'gigya-reset-password-form',
};
utils_1.DeepFreeze(exports.ResetPasswordForm_CONSTS);
var ResetPasswordForm = /** @class */ (function (_super) {
    tslib_1.__extends(ResetPasswordForm, _super);
    function ResetPasswordForm(screen, elForm, gigyaClass) {
        var _this = _super.call(this, screen, elForm, gigyaClass) || this;
        _this.filters.push({
            filterOutWidgetsToSend: function (formData) {
                if (formData['securityFields'] && formData['securityFields']['passwordRetype'])
                    delete formData['securityFields']['passwordRetype'];
                return formData;
            },
        });
        return _this;
    }
    ResetPasswordForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            {
                loginID: true,
                newPassword: true,
                email: true,
                secretAnswer: true,
            },
        ]);
    };
    ResetPasswordForm.prototype.getErrorKey = function (response) {
        if (response.errorCode === GSErrors_1.GSErrors.INVALID_TOKEN) {
            return 'invalid_password_reset_token';
        }
        return _super.prototype.getErrorKey.call(this, response);
    };
    ResetPasswordForm.prototype.schemaValidated = function () {
        // Necessary to show error message for password complexity.
        // PasswordInputs.ts will not generate password complexity error callback if schemaValidated returns false.
        return !!this.getField('newPassword');
    };
    ResetPasswordForm.prototype.profileObjectName = function () {
        return 'securityFields';
    };
    ResetPasswordForm.prototype.submitApi = function () {
        return window.gigya.accounts.resetPassword;
    };
    ResetPasswordForm.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this._screenSet.data.finalizeRegistrationNeeded = false;
    };
    ResetPasswordForm.prototype.prePopulateData = function () {
        var populateData = _super.prototype.prePopulateData.call(this);
        var apiData = this._screenSet.getApiData();
        // if login already exists
        var loginIDs = apiData && apiData.getAccountInfo && apiData.getAccountInfo.loginIDs;
        if (loginIDs) {
            populateData.loginID = loginIDs.username || (loginIDs.emails && loginIDs.emails[0]);
        }
        // for link accounts
        var conflictingAccount = apiData && apiData.getConflictingAccount && apiData.getConflictingAccount.conflictingAccount;
        if (conflictingAccount) {
            populateData.loginID = conflictingAccount.loginID || (conflictingAccount.emails && conflictingAccount.emails[0]);
        }
        return populateData;
    };
    ResetPasswordForm.prototype.defaultSubmitParams = function () {
        var params = _super.prototype.defaultSubmitParams.call(this);
        // Check for password field in form. Return default submit params if password field is not present in form.
        // In the future, we may divide into separate forms.
        if (!this.getField('newPassword')) {
            return params;
        }
        // Password field is in form, so we care about the password reset token.
        var passwordResetToken = this._screenSet.params && this._screenSet.params.passwordResetToken
            ? this._screenSet.params.passwordResetToken
            : window.gigya.utils.URL.getParamValueFromURL('pwrt', window.location.toString(), undefined);
        if (passwordResetToken) {
            params.passwordResetToken = passwordResetToken;
        }
        return params;
    };
    ResetPasswordForm.CONSTS = exports.ResetPasswordForm_CONSTS;
    return ResetPasswordForm;
}(BaseForm_1.BaseForm));
exports.ResetPasswordForm = ResetPasswordForm;
BaseForm_1.BaseForm.addFormToLibrary(ResetPasswordForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/BaseApiHandler.ts":
/*!*******************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/BaseApiHandler.ts ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(__webpack_provided_Object_dot_assign) {Object.defineProperty(exports, "__esModule", { value: true });
var ApiLinkWidget_1 = __webpack_require__(/*! ../../Widgets/ApiLinkWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ApiLinkWidget.ts");
var BaseApiHandler = /** @class */ (function () {
    function BaseApiHandler(dataStore, _serverApi) {
        this.dataStore = dataStore;
        this._serverApi = _serverApi;
    }
    BaseApiHandler.prototype.send = function () {
        var _this = this;
        return new gigya.Promise(function (resolve, reject) {
            var reqParams = __webpack_provided_Object_dot_assign(_this.dataStore.params || {}, _this.getRequestParams());
            reqParams['callback'] = function (response) {
                _this.handleResponse(response);
                resolve(response);
            };
            try {
                _this._serverApi.run(reqParams);
            }
            catch (e) {
                reject(e);
            }
        });
    };
    Object.defineProperty(BaseApiHandler.prototype, "methodName", {
        get: function () {
            return this._serverApi.methodName;
        },
        enumerable: true,
        configurable: true
    });
    BaseApiHandler.getHandler = function (methodName, handlerDataStore, serverApis) {
        var handler = this._handlers[methodName] || this._defaultHandler;
        if (handler) {
            var serverApi = serverApis.filter(function (api) { return api.methodName === methodName; })[0];
            if (!serverApi) {
                window.gigya.logger.warn("[" + ApiLinkWidget_1.ApiLink_CONSTS.attributeName + "]: unable to create api link for: \"" + methodName + "\", the method is not supported");
                return null;
            }
            return new handler(handlerDataStore, serverApi);
        }
        return null;
    };
    BaseApiHandler.addHandler = function (methodName, handler) {
        if (this._handlers[methodName]) {
            throw new Error("Can't re-register api link handler, " + methodName + " handler already exist");
        }
        this._handlers[methodName] = handler;
    };
    BaseApiHandler.addDefaultHandler = function (handler) {
        if (this._defaultHandler) {
            window.gigya.logger.error("Can't register default API handler, one is already registered");
            return;
        }
        this._defaultHandler = handler;
    };
    BaseApiHandler._handlers = {};
    return BaseApiHandler;
}());
exports.BaseApiHandler = BaseApiHandler;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js")["__assign"]))

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/SendOtpCodeHandler.ts":
/*!***********************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/SendOtpCodeHandler.ts ***!
  \***********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var BaseApiHandler_1 = __webpack_require__(/*! ./BaseApiHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/BaseApiHandler.ts");
var SendOtpCodeHandler = /** @class */ (function (_super) {
    tslib_1.__extends(SendOtpCodeHandler, _super);
    function SendOtpCodeHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SendOtpCodeHandler.prototype.getRequestParams = function () {
        this.dataStore.apiData.getAccountInfo = this.dataStore.apiData.getAccountInfo || {};
        return {
            phoneNumber: this.dataStore.apiData.getAccountInfo.phoneNumber,
            email: this.dataStore.apiData.getAccountInfo.email
        };
    };
    SendOtpCodeHandler.prototype.handleResponse = function (response) {
        this.dataStore.otpData.vToken = response['vToken'];
    };
    return SendOtpCodeHandler;
}(BaseApiHandler_1.BaseApiHandler));
exports.SendOtpCodeHandler = SendOtpCodeHandler;
BaseApiHandler_1.BaseApiHandler.addHandler('accounts.otp.sendCode', SendOtpCodeHandler);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/SendVerificationHandler.ts":
/*!****************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/SendVerificationHandler.ts ***!
  \****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var BaseApiHandler_1 = __webpack_require__(/*! ./BaseApiHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/BaseApiHandler.ts");
var SendVerificationHandler = /** @class */ (function (_super) {
    tslib_1.__extends(SendVerificationHandler, _super);
    function SendVerificationHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SendVerificationHandler.prototype.getRequestParams = function () {
        var accountInfo = this.dataStore.apiData.getAccountInfo || {};
        return { identifier: accountInfo.identifier };
    };
    SendVerificationHandler.prototype.handleResponse = function (response) {
        if (response.errorCode == 0 && response.vToken) {
            this.dataStore.pushData.vToken = response.vToken;
        }
        else {
            window.gigya.logger.error('gigya.accounts.auth.push.sendVerification failed');
        }
    };
    return SendVerificationHandler;
}(BaseApiHandler_1.BaseApiHandler));
exports.SendVerificationHandler = SendVerificationHandler;
BaseApiHandler_1.BaseApiHandler.addHandler('accounts.auth.push.sendVerification', SendVerificationHandler);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/StandardHandler.ts":
/*!********************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/StandardHandler.ts ***!
  \********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var BaseApiHandler_1 = __webpack_require__(/*! ./BaseApiHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/BaseApiHandler.ts");
var StandardApiHandler = /** @class */ (function (_super) {
    tslib_1.__extends(StandardApiHandler, _super);
    function StandardApiHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    StandardApiHandler.prototype.getRequestParams = function () {
        return {};
    };
    StandardApiHandler.prototype.handleResponse = function (response) { };
    return StandardApiHandler;
}(BaseApiHandler_1.BaseApiHandler));
exports.StandardApiHandler = StandardApiHandler;
BaseApiHandler_1.BaseApiHandler.addDefaultHandler(StandardApiHandler);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/index.ts":
/*!**********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/index.ts ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
tslib_1.__exportStar(__webpack_require__(/*! ./BaseApiHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/BaseApiHandler.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./StandardHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/StandardHandler.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./SendOtpCodeHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/SendOtpCodeHandler.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./SendVerificationHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/SendVerificationHandler.ts"), exports);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler.ts":
/*!***************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler.ts ***!
  \***************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var CaptchaProvider;
(function (CaptchaProvider) {
    CaptchaProvider["GOOGLE"] = "Google";
    CaptchaProvider["FUNCAPTCHA"] = "FunCaptcha";
})(CaptchaProvider = exports.CaptchaProvider || (exports.CaptchaProvider = {}));
exports.CaptchaHandlers = {};
var CaptchaMode;
(function (CaptchaMode) {
    CaptchaMode[CaptchaMode["Visible"] = 0] = "Visible";
    CaptchaMode[CaptchaMode["Invisible"] = 1] = "Invisible";
})(CaptchaMode = exports.CaptchaMode || (exports.CaptchaMode = {}));
var nextCaptchaID = 0;
var BaseCaptchaHandler = /** @class */ (function () {
    function BaseCaptchaHandler(params) {
        if (params === void 0) { params = {}; }
        this.params = params;
        this._ID = "gig_captcha_" + ++nextCaptchaID;
    }
    BaseCaptchaHandler.prototype.init = function (hostElement) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var e_1;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.siteKey) {
                            window.gigya.logger.warn('Missing captcha configuration');
                            return [2 /*return*/, false];
                        }
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, this.loadProvider()];
                    case 2:
                        _a.sent();
                        this.render(hostElement);
                        return [2 /*return*/, true];
                    case 3:
                        e_1 = _a.sent();
                        window.gigya.logger.warn(e_1.message || e_1);
                        return [2 /*return*/, false];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    BaseCaptchaHandler.prototype.getID = function () {
        return this._ID;
    };
    BaseCaptchaHandler.prototype.getToken = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var _a;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.captchaToken;
                        if (_a) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.lazyExecuteOrFail()];
                    case 1:
                        _a = (_b.sent());
                        _b.label = 2;
                    case 2: return [2 /*return*/, _a];
                }
            });
        });
    };
    BaseCaptchaHandler.prototype.reset = function () {
        this.captchaToken = null;
    };
    Object.defineProperty(BaseCaptchaHandler.prototype, "siteKey", {
        get: function () {
            return this.isInvisible ? this.invisibleSiteKey : this.visibleSiteKey;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseCaptchaHandler.prototype, "isInvisible", {
        get: function () {
            return this.params.mode === CaptchaMode.Invisible;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseCaptchaHandler.prototype, "callbackID", {
        get: function () {
            return "gig_" + this.provider + "_onLoad";
        },
        enumerable: true,
        configurable: true
    });
    return BaseCaptchaHandler;
}());
exports.BaseCaptchaHandler = BaseCaptchaHandler;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/FunCaptchaHandler.ts":
/*!**************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/FunCaptchaHandler.ts ***!
  \**************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var BaseCaptchaHandler_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler.ts");
var funCaptchaLoad;
var FunCaptchaHandler = /** @class */ (function (_super) {
    tslib_1.__extends(FunCaptchaHandler, _super);
    function FunCaptchaHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    FunCaptchaHandler.prototype.render = function (hostElement) {
        var _this = this;
        this.challengeExecutor = new gigya.Promise(function (resolve) {
            var callback = function () {
                var tokenInput = hostElement.querySelector('[name="fc-token"]');
                _this.captchaToken = tokenInput && tokenInput.value;
                resolve(_this.captchaToken);
            };
            var id = _this.getID() + "_" + Date.now();
            hostElement.innerHTML = "<div id=\"" + id + "\"></div>";
            _this.challengeRef = new FunCaptcha({
                public_key: _this.siteKey,
                language: _this.params.lang,
                target_html: id,
                callback: callback,
            });
        });
    };
    FunCaptchaHandler.prototype.reset = function () {
        if (typeof FunCaptcha != 'undefined' && this.challengeRef && this.captchaToken) {
            this.challengeRef.refresh_session();
        }
        _super.prototype.reset.call(this);
    };
    FunCaptchaHandler.prototype.loadProvider = function () {
        var _this = this;
        if (typeof FunCaptcha !== 'undefined')
            return;
        else if (!funCaptchaLoad) {
            funCaptchaLoad = new gigya.Promise(function (resolve, reject) {
                window[_this.callbackID] = function () {
                    delete window[_this.callbackID];
                    typeof FunCaptcha !== 'undefined' ? resolve() : reject("error while trying to load FunCaptcha");
                };
                window.gigya.utils.script.load(_this.providerURL, reject);
            });
        }
        return funCaptchaLoad;
    };
    FunCaptchaHandler.prototype.lazyExecuteOrFail = function () {
        // FunCaptcha don't have lazy execution as - for example - google's invisible captcha
        throw new Error('captchaNeeded');
    };
    Object.defineProperty(FunCaptchaHandler.prototype, "provider", {
        get: function () {
            return BaseCaptchaHandler_1.CaptchaProvider.FUNCAPTCHA;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FunCaptchaHandler.prototype, "providerURL", {
        get: function () {
            return "//funcaptcha.com/fc/api/?onload=" + this.callbackID;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FunCaptchaHandler.prototype, "invisibleSiteKey", {
        get: function () {
            return window.gigya.partnerSettings.funCaptcha && window.gigya.partnerSettings.funCaptcha.siteKey;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FunCaptchaHandler.prototype, "visibleSiteKey", {
        get: function () {
            return window.gigya.partnerSettings.funCaptcha && window.gigya.partnerSettings.funCaptcha.siteKey;
        },
        enumerable: true,
        configurable: true
    });
    return FunCaptchaHandler;
}(BaseCaptchaHandler_1.BaseCaptchaHandler));
exports.FunCaptchaHandler = FunCaptchaHandler;
BaseCaptchaHandler_1.CaptchaHandlers[BaseCaptchaHandler_1.CaptchaProvider.FUNCAPTCHA] = FunCaptchaHandler;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/GoogleCaptchaHandler.ts":
/*!*****************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/GoogleCaptchaHandler.ts ***!
  \*****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var BaseCaptchaHandler_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler.ts");
var screenSetUtils = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var uniqueGoogleLocaleCodes = {
    br: 'bg',
    he: 'iw',
    'es-mx': 'es-419',
    tl: 'fil',
};
var GoogleCaptchaHandler = /** @class */ (function (_super) {
    tslib_1.__extends(GoogleCaptchaHandler, _super);
    function GoogleCaptchaHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    GoogleCaptchaHandler.prototype.render = function (hostElement) {
        var _this = this;
        if (!this.isInvisible && screenSetUtils.inIFrame()) {
            window.gigya.logger.warn('reCAPTCHA v2 cannot be loaded inside iFrame');
            return;
        }
        var callback = function (token) {
            _this.captchaToken = token;
            _this._challengeResolver(token);
        };
        var recaptchaParams = {
            sitekey: this.siteKey,
            callback: callback,
            type: this.params['type'],
            theme: this.params['theme'],
            size: this.params['size'],
        };
        if (this.isInvisible) {
            recaptchaParams.badge = this.params['badge'];
            recaptchaParams.size = 'invisible';
        }
        var id = this.getID() + "_" + Date.now();
        hostElement.innerHTML = "<div id=\"" + id + "\"></div>";
        this._createChallengeExecutor();
        this.challengeRef = grecaptcha.render(id, recaptchaParams);
    };
    GoogleCaptchaHandler.prototype.reset = function () {
        if (typeof grecaptcha !== 'undefined' && typeof this.challengeRef !== 'undefined') {
            grecaptcha.reset(this.challengeRef);
            this._createChallengeExecutor();
        }
        _super.prototype.reset.call(this);
    };
    GoogleCaptchaHandler.prototype.loadProvider = function () {
        var _this = this;
        if (typeof grecaptcha !== 'undefined')
            return;
        else if (!exports.greCaptchaLoad) {
            var timeoutId_1;
            exports.greCaptchaLoad = new gigya.Promise(function (resolve, reject) {
                var reloadFromRecaptchaDomain = function () {
                    clearTimeout(timeoutId_1);
                    window.gigya.logger.debug("Loading google captcha from " + GoogleCaptchaHandler.RECAPTCHA_DOMAIN);
                    if (typeof grecaptcha !== 'undefined') {
                        window.gigya.logger.debug('Aborting. Google captcha already loaded');
                        return resolve();
                    }
                    if (_this.params['googleCaptchaDomain'] === GoogleCaptchaHandler.RECAPTCHA_DOMAIN) {
                        window.gigya.logger.debug("Aborting. Already tried to load from " + GoogleCaptchaHandler.RECAPTCHA_DOMAIN + " and failed'");
                        return reject("Failed to load google's captcha from " + GoogleCaptchaHandler.RECAPTCHA_DOMAIN);
                    }
                    _this.params['googleCaptchaDomain'] = GoogleCaptchaHandler.RECAPTCHA_DOMAIN;
                    window.gigya.utils.script.load(_this.providerURL, reject);
                };
                timeoutId_1 = setTimeout(reloadFromRecaptchaDomain, GoogleCaptchaHandler.RETRY_FROM_RECAPTCHA_TIMEOUT);
                window[_this.callbackID] = function () {
                    delete window[_this.callbackID];
                    typeof grecaptcha !== 'undefined' ? resolve() : reject("Error while trying to load grecaptcha");
                };
                window.gigya.logger.debug("Loading grecaptcha from " + _this._domain);
                window.gigya.utils.script.load(_this.providerURL, reloadFromRecaptchaDomain);
            });
        }
        return exports.greCaptchaLoad;
    };
    GoogleCaptchaHandler.prototype.lazyExecuteOrFail = function () {
        if (this.isInvisible) {
            grecaptcha.execute(this.challengeRef);
            return this.challengeExecutor;
        }
        throw new Error('captchaNeeded');
    };
    Object.defineProperty(GoogleCaptchaHandler.prototype, "provider", {
        get: function () {
            return BaseCaptchaHandler_1.CaptchaProvider.GOOGLE;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GoogleCaptchaHandler.prototype, "providerURL", {
        get: function () {
            return "//" + this._domain + "/recaptcha/api.js?render=explicit&onload=" + this.callbackID + "&hl=" + this._lang;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GoogleCaptchaHandler.prototype, "invisibleSiteKey", {
        get: function () {
            return window.gigya.partnerSettings.invisibleRecaptcha && window.gigya.partnerSettings.invisibleRecaptcha.siteKey;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GoogleCaptchaHandler.prototype, "visibleSiteKey", {
        get: function () {
            return window.gigya.partnerSettings.recaptchaV2 && window.gigya.partnerSettings.recaptchaV2.siteKey;
        },
        enumerable: true,
        configurable: true
    });
    GoogleCaptchaHandler.prototype._createChallengeExecutor = function () {
        var _this = this;
        this.challengeExecutor = new gigya.Promise(function (resolve) {
            _this._challengeResolver = resolve;
        });
    };
    Object.defineProperty(GoogleCaptchaHandler.prototype, "_domain", {
        get: function () {
            var isCNDataCenter = window.gigya.dataCenter.toLowerCase().indexOf('cn1') === 0 || window.gigya.utils.stringUtils.endsWith(window.gigya.dataCenter, 'gigay-api.cn');
            return this.params['googleCaptchaDomain'] || (isCNDataCenter ? GoogleCaptchaHandler.RECAPTCHA_DOMAIN : GoogleCaptchaHandler.GOOGLE_DOMAIN);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GoogleCaptchaHandler.prototype, "_lang", {
        get: function () {
            return uniqueGoogleLocaleCodes[this.params.lang] || this.params.lang;
        },
        enumerable: true,
        configurable: true
    });
    GoogleCaptchaHandler.RECAPTCHA_DOMAIN = 'www.recaptcha.net';
    GoogleCaptchaHandler.GOOGLE_DOMAIN = 'www.google.com';
    GoogleCaptchaHandler.RETRY_FROM_RECAPTCHA_TIMEOUT = 3 * 1000;
    return GoogleCaptchaHandler;
}(BaseCaptchaHandler_1.BaseCaptchaHandler));
exports.GoogleCaptchaHandler = GoogleCaptchaHandler;
BaseCaptchaHandler_1.CaptchaHandlers[BaseCaptchaHandler_1.CaptchaProvider.GOOGLE] = GoogleCaptchaHandler;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/index.ts":
/*!***********************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/index.ts ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
tslib_1.__exportStar(__webpack_require__(/*! ./ApiHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/index.ts"), exports);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/ButtonInput.ts":
/*!***************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/ButtonInput.ts ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var ButtonInput = /** @class */ (function (_super) {
    tslib_1.__extends(ButtonInput, _super);
    function ButtonInput(context) {
        return _super.call(this, context, false) || this;
    }
    ButtonInput.FORM_TYPE_CRITERIA = function (context) {
        return context.type === 'submit' || context.type === 'reset' || context.type === 'button' || context.element.nodeName.toLowerCase() === 'button';
    };
    ButtonInput.prototype.setValue = function () {
        return; // our form should never set value to buttons
    };
    return ButtonInput;
}(FormInput_1.FormInput));
exports.ButtonInput = ButtonInput;
FormInput_1.FormInput.addInputToLibrary(ButtonInput);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CheckboxInput.ts":
/*!*****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CheckboxInput.ts ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.CheckboxInput_CONSTS = {
    errorClass: 'gigya-terms-error',
    validClass: 'gigya-terms-valid',
    dataValueInArray: 'data-value-in-array',
};
var CheckboxInput = /** @class */ (function (_super) {
    tslib_1.__extends(CheckboxInput, _super);
    function CheckboxInput(context) {
        return _super.call(this, context) || this;
    }
    CheckboxInput.FORM_TYPE_CRITERIA = function (context) {
        return context.type === 'checkbox';
    };
    CheckboxInput.prototype.required = function () {
        // See #44030.
        if (/^(.+\.)?terms$/.test(this.fieldName)) {
            return _super.prototype.required.call(this);
        }
        else {
            return this.isClientRequired();
        }
    };
    CheckboxInput.prototype.isClientRequired = function () {
        return this._schema && this._schema.format && this._schema.format.toLowerCase() == 'true';
    };
    CheckboxInput.prototype._isValueEmpty = function (value) {
        return !value; // override default handling of checkboxes
    };
    CheckboxInput.prototype.validateValue = function (formData, fieldValue, callback) {
        if (this.required() && !fieldValue) {
            return callback({
                errorCode: GSErrors_1.GSErrors.REQUIRED_VALUE_VALIDATION_ERROR,
                field: this,
            });
        }
        _super.prototype.validateValue.call(this, formData, fieldValue, callback);
    };
    CheckboxInput.prototype._showValidityOnInput = function () {
        this.setValitidyClass(this.instanceElement.parentElement, this._validityState, exports.CheckboxInput_CONSTS.validClass, exports.CheckboxInput_CONSTS.errorClass);
    };
    CheckboxInput.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        this.setValitidyClass(this.instanceElement.parentElement, this._validityState, exports.CheckboxInput_CONSTS.validClass, exports.CheckboxInput_CONSTS.errorClass);
    };
    CheckboxInput.prototype.prePopulate = function (value) {
        var el = this.instanceElement;
        var dataValueInArray = el.getAttribute(exports.CheckboxInput_CONSTS.dataValueInArray);
        if (!dataValueInArray)
            _super.prototype.prePopulate.call(this, value);
        else if (value instanceof Array) {
            var pos = value.indexOf(dataValueInArray);
            _super.prototype.prePopulate.call(this, pos >= 0);
        }
        else {
            //todo : warn about illegal value (undefiend, null..)
            _super.prototype.prePopulate.call(this, false);
        }
    };
    CheckboxInput.prototype.setValue = function (dataValue, setByScript) {
        if (setByScript === void 0) { setByScript = true; }
        // Set new value directly on the DOM.
        var el = this.instanceElement;
        el.checked = dataValue && dataValue !== 'false'; // Boolean can be saved as "true" or "false" (string).
        // Trigger change.
        this.onFieldChange(setByScript);
    };
    CheckboxInput.prototype.getValue = function (el, currentValue) {
        if (el === void 0) { el = this.instanceElement; }
        var value = el.checked;
        var arrayItemValue = el.getAttribute(exports.CheckboxInput_CONSTS.dataValueInArray);
        if (arrayItemValue) {
            if (!currentValue)
                currentValue = [];
            var pos = currentValue.indexOf(arrayItemValue);
            if (el.checked && pos < 0) {
                currentValue.push(arrayItemValue);
            }
            else if (!el.checked && pos >= 0) {
                currentValue.splice(pos, 1);
            }
            value = currentValue;
        }
        return value;
    };
    return CheckboxInput;
}(FormInput_1.FormInput));
exports.CheckboxInput = CheckboxInput;
FormInput_1.FormInput.addInputToLibrary(CheckboxInput);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/EmailInput.ts":
/*!**************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/EmailInput.ts ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var LoginForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LoginForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LoginForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var EmailInput = /** @class */ (function (_super) {
    tslib_1.__extends(EmailInput, _super);
    function EmailInput(context) {
        return _super.call(this, context) || this;
    }
    EmailInput.FORM_TYPE_CRITERIA = function (context) {
        return !(context.form instanceof LoginForm_1.LoginForm) && (context.fieldName === 'email' || context.type === 'email');
    };
    EmailInput.prototype.validateValue = function (formData, fieldValue, callback) {
        if (fieldValue && !window.gigya.pluginUtils.validation.isValidEmailLoginID(fieldValue))
            return callback({
                errorCode: GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE,
                field: this,
            });
        return _super.prototype.validateValue.call(this, formData, fieldValue, callback);
    };
    return EmailInput;
}(FormInput_1.FormInput));
exports.EmailInput = EmailInput;
FormInput_1.FormInput.addInputToLibrary(EmailInput);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts":
/*!*************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var TemplateElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
var Consent_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent.ts");
var ArrayManagerWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ArrayManagerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ArrayManagerWidget.ts");
var Errors_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var ValidityStates;
(function (ValidityStates) {
    ValidityStates[ValidityStates["_undefined"] = 0] = "_undefined";
    ValidityStates[ValidityStates["valid"] = 1] = "valid";
    ValidityStates[ValidityStates["error"] = 2] = "error";
    ValidityStates[ValidityStates["pending"] = 3] = "pending";
})(ValidityStates = exports.ValidityStates || (exports.ValidityStates = {}));
utils_1.DeepFreeze(ValidityStates);
exports.fieldsNameData = {
    loginID: { autoFillName: 'username', paramName: 'loginID' },
    passwordRetype: { autoFillName: '', paramName: '' },
};
utils_1.DeepFreeze(exports.fieldsNameData);
var fieldsDisplayNames = {
    loginID: 'username',
    secretQuestion: 'secret question',
    secretAnswer: 'secret answer',
};
utils_1.DeepFreeze(fieldsDisplayNames);
var WriteAccessModes;
(function (WriteAccessModes) {
    WriteAccessModes[WriteAccessModes["clientModify"] = 0] = "clientModify";
    WriteAccessModes[WriteAccessModes["clientCreate"] = 1] = "clientCreate";
})(WriteAccessModes = exports.WriteAccessModes || (exports.WriteAccessModes = {}));
exports.FormInput_CONSTS = {
    fieldName: 'data-gigya-name',
    displayName: 'data-display-name',
    captcha: 'gigya-captcha',
    allowEmpty: 'data-allow-empty',
    required: 'data-required',
    originalValue: 'data-original-value',
    serverValidation: 'data-invalid-error-code',
    showValidCheckmark: 'show-valid-checkmark',
    showCheckmarkClass: 'gigya-show-checkmark',
    errorClass: 'gigya-error',
    validClass: 'gigya-valid',
    pendingClass: 'gigya-pending',
    emptyClass: 'gigya-empty',
    placeholderAttribute: 'data-gigya-placeholder',
    arrayRootAttribute: 'data-array-root',
    arrayKeyFieldAttribute: 'data-array-key-field',
    arrayKeyValueAttribute: 'data-array-key-value',
};
utils_1.DeepFreeze(exports.FormInput_CONSTS);
var FormInputsLibrary = {};
var FormInputPriorities;
(function (FormInputPriorities) {
    FormInputPriorities[FormInputPriorities["_start"] = 0] = "_start";
    FormInputPriorities[FormInputPriorities["Important"] = 1] = "Important";
    FormInputPriorities[FormInputPriorities["Normal"] = 2] = "Normal";
    FormInputPriorities[FormInputPriorities["Fallback"] = 3] = "Fallback";
    FormInputPriorities[FormInputPriorities["_end"] = 4] = "_end";
})(FormInputPriorities = exports.FormInputPriorities || (exports.FormInputPriorities = {}));
var FormInput = /** @class */ (function (_super) {
    tslib_1.__extends(FormInput, _super);
    //#endregion
    function FormInput(context, isDataField, keypressValidationDelay) {
        if (isDataField === void 0) { isDataField = true; }
        if (keypressValidationDelay === void 0) { keypressValidationDelay = 1000; }
        var _this = _super.call(this, context.element, context.form) || this;
        _this.isDataField = isDataField;
        _this.dynamicField = false;
        _this.isCaptcha = false;
        _this._validityState = ValidityStates._undefined;
        _this._showValidityMarker = {};
        _this.isCurrnetValuePlaceholderText = true;
        _this.isCtrlKeyUp = false;
        _this.KEY_CODE_DELETE = 46;
        _this.KEY_CODE_BACKSPACE = 8;
        _this.KEYCODE_LETTER_X = 88;
        _this.previousValue = null;
        _this.intervalID = 0;
        _this.validityStateListeners = new Array();
        _this._form = context.form;
        _this.type = context.type;
        _this._screen = _this._form._screen;
        _this.update(context.element, context.fieldName, isDataField);
        if (_this.showValidCheckmark(_this.templateElement)) {
            _this._showValidityMarker[ValidityStates.valid] = _this._showValidityMarker[ValidityStates.pending] = true;
        }
        // Ensure the onFieldChanged event isn't fired for every keypress.
        _this.onFieldChangeDebounced = window.gigya.utils.functions.debounce(function () { return _this.onFieldChange(); }, _this._screenSet.params['debounceDelay'] || keypressValidationDelay);
        return _this;
    }
    //#region formInput library
    FormInput.addInputToLibrary = function (type, priority) {
        if (priority === void 0) { priority = FormInputPriorities.Normal; }
        var inputList = FormInputsLibrary[priority] || [];
        inputList.push(type);
        FormInputsLibrary[priority] = inputList;
    };
    FormInput.inputLibraryByPriority = function () {
        var lib = new Array();
        for (var priority = FormInputPriorities._start; priority <= FormInputPriorities._end; ++priority) {
            var priorityList = FormInputsLibrary[priority];
            if (priorityList)
                lib = lib.concat(priorityList);
        }
        return lib;
    };
    FormInput.registerFormInputs = function (elements, parent) {
        var inputs = new Array();
        var lib = FormInput.inputLibraryByPriority();
        var ignoredFields = parent.ignoredFields();
        utils_1.ForEach(elements, function (el) {
            var type;
            var fieldName = el.getAttribute(exports.FormInput_CONSTS.fieldName) || el.getAttribute('name');
            // ignore fields that are on the form ignore list
            if (ignoredFields[fieldName]) {
                return;
            }
            // ignore fields that are part of a fieldset (in case of composition of inputs the fieldset will represent its inputs as a whole)
            if (window.gigya.utils.DOM.isBelongToGigyaFieldset(el)) {
                return;
            }
            var context = {
                form: parent,
                fieldName: fieldName,
                element: el,
                type: el.getAttribute('type'),
                params: parent._screenSet.params,
            };
            utils_1.Some(lib, function (t) {
                var match = t.FORM_TYPE_CRITERIA(context);
                if (match)
                    type = t;
                return match;
            });
            if (type)
                inputs.push(new type(context));
        });
        return inputs;
    };
    FormInput.FORM_TYPE_CRITERIA = function (context) {
        return true;
    };
    FormInput.prototype.onKeyUp = function (e) {
        // Ignore tab, ctrl, windows key, escape, caps lock, etc.
        if (e.keyCode !== 9 &&
            e.keyCode !== 13 &&
            e.keyCode !== 16 &&
            e.keyCode !== 17 &&
            e.keyCode !== 91 &&
            e.keyCode !== 92 &&
            e.keyCode !== 20 &&
            e.keyCode !== 27) {
            this.onFieldChangeDebounced();
        }
    };
    /**
     * Called when an element's value MAY have changed.
     */
    FormInput.prototype.onFieldChange = function (setByScript) {
        if (setByScript === void 0) { setByScript = false; }
        // May be called after a small delay, ensure the element still exists.
        // Specifically check to ensure the screen-set container still exists to handle the case where container is killed with the escape key.
        if (!this.instanceElement || !this._screenSet.container) {
            return;
        }
        // Avoid triggering twice when a user finishes typing (triggering keydown) and then leaves the field (triggering change).
        // Exempt radio type because each individual element is unique instance, so it can't track state. Regardless, it's not necessary.
        var value = this.getValue();
        if (this.previousValue === value && this.type !== 'radio') {
            return;
        }
        this.previousValue = value;
        // Triggered when field is changed:
        this.updateCssClasses();
        this._form.onInputChange(this, setByScript);
    };
    FormInput.prototype.updateCssClasses = function () {
        if (this.isEmpty()) {
            window.gigya.utils.DOM.addClassToElement(this.instanceElement, exports.FormInput_CONSTS.emptyClass);
        }
        else {
            window.gigya.utils.DOM.removeClassFromElement(this.instanceElement, exports.FormInput_CONSTS.emptyClass);
        }
    };
    FormInput.prototype.update = function (element, fieldName, isDataField) {
        var _this = this;
        if (element === void 0) { element = this.instanceElement; }
        if (fieldName === void 0) { fieldName = this.instanceElement.getAttribute('name'); }
        this.fieldName = fieldName;
        this.normalizedFieldName = this._form.getNormalizedFieldName(this.fieldName);
        if (this.normalizedFieldName) {
            // calculate field name parts
            var fieldNameParts = this.normalizedFieldName.split('.');
            if (fieldNameParts.length > 1) {
                this.fieldNamespace = fieldNameParts.shift();
            }
            // when binding to the consent's grant field, we need to treat the base name as the consent itself (schema validations mainly)
            if (this.fieldNamespace == Consent_1.namespace && fieldNameParts[fieldNameParts.length - 1] == Consent_1.consentFieldName) {
                fieldNameParts.pop();
            }
            this.fieldBaseName = fieldNameParts.join('.').replace(ArrayManagerWidget_1.ArrayManager_CONST.indexMatcher, '');
            // Keep name saved for future screenset instances
            if (this.fieldName !== element.getAttribute(exports.FormInput_CONSTS.fieldName)) {
                element.setAttribute(exports.FormInput_CONSTS.fieldName, this.fieldName);
            }
        }
        var fieldData = exports.fieldsNameData[this.fieldBaseName];
        this.paramName = fieldData ? fieldData.paramName : this.normalizedFieldName;
        if (fieldData && fieldData.autoFillName) {
            element.setAttribute('name', fieldData.autoFillName);
        }
        if (isDataField && this.normalizedFieldName) {
            this._form.addDataField(this);
            // save the original value
            element.setAttribute(exports.FormInput_CONSTS.originalValue, String(this.getValue(element)));
            this.keyUpHandler = function (e) { return _this.onKeyUp(e); };
            this.addEventListener('keyup', this.keyUpHandler);
            this.changeHandler = function () { return _this.onFieldChange(); };
            this.addEventListener('change', this.changeHandler);
        }
        this.updateDisplayName(element);
    };
    FormInput.prototype.updateDisplayName = function (element) {
        if (element === void 0) { element = this.templateElement; }
        this.displayName = element.getAttribute(exports.FormInput_CONSTS.displayName) || this.fieldBaseName;
    };
    FormInput.prototype.getArrayRoot = function (flatten) {
        if (flatten === void 0) { flatten = false; }
        var arrayRoot = this.instanceElement ? this.instanceElement.getAttribute(exports.FormInput_CONSTS.arrayRootAttribute) : '';
        if (arrayRoot && flatten) {
            arrayRoot = arrayRoot.replace(ArrayManagerWidget_1.ArrayManager_CONST.indexMatcher, '.$1');
        }
        return arrayRoot;
    };
    FormInput.prototype.getName = function (isNormalized, flatten) {
        if (flatten === void 0) { flatten = false; }
        var name = !isNormalized ? this.fieldName : this.normalizedFieldName;
        return flatten ? name.replace(ArrayManagerWidget_1.ArrayManager_CONST.indexMatcher, '.$1') : name;
    };
    FormInput.prototype.isEmpty = function (value) {
        if (value === void 0) { value = this.getValue(); }
        return this._isValueEmpty(value);
    };
    FormInput.prototype._isValueEmpty = function (value) {
        return !value || value === false;
    };
    FormInput.prototype.allowEmpty = function () {
        return Boolean(this.instanceElement && this.instanceElement.getAttribute(exports.FormInput_CONSTS.allowEmpty)); // hasAttribute is not supported in IE9
    };
    FormInput.prototype.getTruncatedValue = function (val) {
        return window.gigya.utils.stringUtils.trim(String(val));
    };
    FormInput.prototype.validate = function (callback, formData) {
        if (formData === void 0) { formData = this._form.getFlatFormData(false, true); }
        if (this.isInHiddenContainer()) {
            return callback({
                errorCode: GSErrors_1.GSErrors.OK,
                field: this,
            });
        }
        this.validateValue(formData, this.getValidateValue(formData), callback);
    };
    FormInput.prototype.getValidateValue = function (formData) {
        return this.getValue();
    };
    FormInput.prototype.clearServerError = function () {
        this.instanceElement.removeAttribute(exports.FormInput_CONSTS.serverValidation);
    };
    FormInput.prototype.getServerError = function () {
        var code = this.instanceElement.getAttribute(exports.FormInput_CONSTS.serverValidation);
        if (code)
            return parseInt(code);
        return GSErrors_1.GSErrors.OK;
    };
    FormInput.prototype.setServerError = function (errorCode) {
        var validityState = errorCode == GSErrors_1.GSErrors.OK ? ValidityStates.valid : ValidityStates.error;
        this.instanceElement.setAttribute(exports.FormInput_CONSTS.serverValidation, errorCode + '');
        this.setValidityState(validityState, true);
    };
    FormInput.prototype.validateValue = function (formData, fieldValue, callback) {
        var fieldIsEmpty = fieldValue == null || this.getTruncatedValue(fieldValue) === '';
        if (this.required() && fieldIsEmpty)
            return callback({
                errorCode: GSErrors_1.GSErrors.REQUIRED_VALUE_VALIDATION_ERROR,
                field: this,
            });
        // schema validation
        if (this._schema) {
            var schemaError = GSErrors_1.GSErrors.OK;
            utils_1.Some(this.schemaChecks, function (check) {
                schemaError = check(fieldValue);
                return schemaError != GSErrors_1.GSErrors.OK;
            });
            if (schemaError !== GSErrors_1.GSErrors.OK)
                return callback({
                    errorCode: schemaError,
                    field: this,
                });
        }
        // Server validation
        if (this.instanceElement) {
            var serverCode = this.instanceElement.getAttribute(exports.FormInput_CONSTS.serverValidation); // hasAttribute is not supported in IE9
            if (serverCode) {
                // serverValidation already returned
                var serverValidationErrorCode = this.getServerError();
                if (serverValidationErrorCode != GSErrors_1.GSErrors.OK)
                    return callback({
                        errorCode: serverValidationErrorCode,
                        field: this,
                    });
            }
            else {
                // initiate server validation
                if (this.serverValidated())
                    return this.startServerValidation(fieldValue, callback);
            }
        }
        return callback({
            errorCode: GSErrors_1.GSErrors.OK,
            field: this,
        });
    };
    FormInput.prototype.serverValidated = function () {
        return false;
    };
    FormInput.prototype.startServerValidation = function (fieldValue, callback) {
        Errors_1.notImplementerAbstract();
    };
    FormInput.prototype.required = function () {
        // Schema requires this field.
        if (this._schemaRequired) {
            return true;
        }
        // Form requires this field.
        if (!this.allowEmpty() && this._form.requiredFields()[this.fieldName]) {
            return true;
        }
        // Field is required on this screen.
        if (this.instanceElement.getAttribute(exports.FormInput_CONSTS.required)) {
            return true;
        }
        return false;
    };
    //#endregion
    //#region show error
    FormInput.prototype.showValidCheckmark = function (element) {
        if (element === void 0) { element = this.instanceElement; }
        return (Boolean(element.getAttribute(exports.FormInput_CONSTS.showValidCheckmark)) && // ie9 has no hasAttribute
            !window.gigya.utils.validation.isExplicitFalse(element.getAttribute(exports.FormInput_CONSTS.showValidCheckmark)));
    };
    FormInput.prototype.addValidityStateListener = function (listener) {
        if (listener)
            this.validityStateListeners.push(listener);
    };
    FormInput.prototype.removeValidityStateListener = function (listener) {
        if (listener)
            this.validityStateListeners.splice(window.gigya.utils.array.indexOf(this.validityStateListeners, listener), 1);
    };
    FormInput.prototype.triggerValidityStateChange = function (validityState, fromServer) {
        var _this = this;
        utils_1.ForEach(this.validityStateListeners, function (listener) { return listener(validityState, fromServer, _this); });
    };
    FormInput.prototype.getValidityState = function () {
        return this._validityState;
    };
    FormInput.prototype.setValidityState = function (validityState, fromServer) {
        if (fromServer === void 0) { fromServer = false; }
        if (validityState !== this._validityState) {
            this._validityState = validityState;
            this._showValidityOnInput();
            this.triggerValidityStateChange(this._validityState, fromServer);
        }
    };
    FormInput.prototype._showValidityOnInput = function (element, validityState, allowValidityMarker) {
        if (element === void 0) { element = this.instanceElement; }
        if (validityState === void 0) { validityState = this._validityState; }
        if (allowValidityMarker === void 0) { allowValidityMarker = true; }
        this.setValitidyClass(element, validityState);
        if (this._showValidityMarker[validityState] && allowValidityMarker)
            window.gigya.utils.DOM.addClassToElement(element, exports.FormInput_CONSTS.showCheckmarkClass);
        else
            window.gigya.utils.DOM.removeClassFromElement(element, exports.FormInput_CONSTS.showCheckmarkClass);
    };
    FormInput.prototype.setValitidyClass = function (element, validityState, validClass, errorClass, pendingClass) {
        if (validClass === void 0) { validClass = exports.FormInput_CONSTS.validClass; }
        if (errorClass === void 0) { errorClass = exports.FormInput_CONSTS.errorClass; }
        if (pendingClass === void 0) { pendingClass = exports.FormInput_CONSTS.pendingClass; }
        if (!element)
            return;
        var currentClass;
        switch (validityState) {
            case ValidityStates.valid:
                currentClass = validClass;
                break;
            case ValidityStates.error:
                currentClass = errorClass;
                break;
            case ValidityStates.pending:
                currentClass = pendingClass;
                break;
        }
        this.setElementValidationClass(element, currentClass, validClass, errorClass, pendingClass);
        if (this.placeHolderElement) {
            this.setElementValidationClass(this.placeHolderElement, currentClass, validClass, errorClass, pendingClass);
        }
    };
    FormInput.prototype.setElementValidationClass = function (element, validationClass, validClass, errorClass, pendingClass) {
        if (validClass === void 0) { validClass = exports.FormInput_CONSTS.validClass; }
        if (errorClass === void 0) { errorClass = exports.FormInput_CONSTS.errorClass; }
        if (pendingClass === void 0) { pendingClass = exports.FormInput_CONSTS.pendingClass; }
        window.gigya.utils.DOM.removeClassFromElement(element, validClass);
        window.gigya.utils.DOM.removeClassFromElement(element, errorClass);
        window.gigya.utils.DOM.removeClassFromElement(element, pendingClass);
        if (validationClass) {
            window.gigya.utils.DOM.addClassToElement(element, validationClass);
        }
        if (validationClass === errorClass) {
            // Validation failed.
            element.setAttribute('aria-invalid', 'true');
        }
        else {
            // No errors detected.
            element.setAttribute('aria-invalid', 'false');
        }
    };
    //#endregion
    FormInput.prototype.unlinkTemplate = function () {
        if (this.changeHandler) {
            this.removeEventListener('change', this.changeHandler);
        }
        if (this.keyUpHandler) {
            this.removeEventListener('keydown', this.keyUpHandler);
        }
        _super.prototype.unlinkTemplate.call(this);
    };
    FormInput.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this._schemaWriteAccessMode = WriteAccessModes.clientModify;
        this._schemaRequired = false;
        if (this.instanceElement) {
            if (this._form.schemaValidated()) {
                this._schema = this._form.getFieldSchema(this);
                if (this._schema) {
                    this.schemaChecks = new Array();
                    if (this._schema.type) {
                        var typeCheck = SchemaTypeChecks[this._schema.type];
                        if (typeCheck)
                            this.schemaChecks.push(typeCheck);
                    }
                    // currently we support only regex format checks - will change.
                    if (this._schema.format && this._schema.format.match(formatPattern))
                        this.schemaChecks.push(schemaFormatCheck(this._schema.format));
                    this._schemaRequired = this._schema.required || utils_1.Some(this.schemaChecks, function (check) { return check('') != GSErrors_1.GSErrors.OK; }); // schema define this field as required // schema checks do not pass if there is no value
                    this._schemaWriteAccessMode = WriteAccessModes[this._schema.writeAccess] || WriteAccessModes.clientModify;
                }
            }
            this.setPlaceholderValue();
            this.setAriaRequired();
            // Set input's default value as previous value.
            // prePopulate will override this if a value exists.
            this.previousValue = this.getValue();
        }
    };
    /**
     * Used for browsers that do not support native placeholders.
     */
    FormInput.prototype.createPlaceholderElement = function (elName, elType) {
        if (elName === 'input' && elType !== 'checkbox' && elType !== 'radio') {
            this.placeHolderElement = window.gigya.utils.DOM.createElement('input', '');
        }
        else if (elName === 'textarea') {
            this.placeHolderElement = window.gigya.utils.DOM.createElement('textarea', '');
        }
        if (window.gigya.localInfo.isIE8) {
            this.placeHolderElement.style.width = this.instanceElement['currentStyle'].width;
        }
        else {
            this.placeHolderElement.style.width = window.getComputedStyle(this.instanceElement).width;
        }
        if (elName === 'input' || elName === 'textarea') {
            this.placeHolderElement['screenSetInstanceOf'] = [this];
            this.placeHolderElement.setAttribute('value', this.placeholderAttributeValue);
            this.placeHolderElement.setAttribute('style', window.gigya._.plugins.utils.DOM.getAttribute(this.instanceElement, 'style'));
            this.placeHolderElement.setAttribute('class', window.gigya._.plugins.utils.DOM.getAttribute(this.instanceElement, 'class') + ' gigya-placeholder');
            this.instanceElement.parentNode.insertBefore(this.placeHolderElement, this.instanceElement);
            // the following line is for vertically aligning the text inside the element
            window.gigya.pluginUtils.DOM.hideElement(this.instanceElement);
        }
        // Attach events.
        if (elName === 'textarea' || (elName === 'input' && elType !== 'checkbox' && elType !== 'radio')) {
            this.placeHolderElement['attachEvent']('onkeydown', this.onPlaceholderKeyDown);
            //this.placeHolderElement.attachEvent('onselectstart', this.onTextSelectionStart);
            this.addEventListener('keydown', this.onKeyDownForPlaceholder);
            this.addEventListener('blur', this.onBlurForPlaceholder);
            this.placeHolderElement['attachEvent']('oncontextmenu', this.onContextMenuOpened);
            this.placeHolderElement['attachEvent']('onfocus', this.onPlaceholderFocused);
            //this.addEventListener('select', this.onTextSelected);
            this.addEventListener('keyup', this.onKeyUpForPlaceholder);
            this.togglePlaceholderStateView(true);
        }
        // WCAG: Hide placeholder input from screen readers.
        this.placeHolderElement.setAttribute('aria-hidden', 'true');
    };
    FormInput.prototype.unlinkInstanceElement = function () {
        if (this.instanceElement) {
            this._schemaRequired = false;
            this.schemaChecks = this._schema = null;
            this.setValue('');
            this.setValidityState(ValidityStates._undefined);
        }
        _super.prototype.unlinkInstanceElement.call(this);
    };
    FormInput.prototype.getValue = function (el, currentValue) {
        if (el === void 0) { el = this.instanceElement; }
        if (el.value === undefined)
            return '';
        return this.type === 'password' ? el.value : window.gigya.utils.stringUtils.trim(el.value);
    };
    FormInput.prototype.prePopulate = function (value) {
        this.previousValue = value;
        // Hidden fields are not pre-populated because it may overwrite a static value.
        if (this.type !== 'hidden') {
            this.setValue(value);
        }
        if (this._schemaWriteAccessMode === WriteAccessModes.clientCreate && !this.isEmpty(value)) {
            this.instanceElement.setAttribute('disabled', 'disabled');
        }
    };
    FormInput.prototype.disabled = function () {
        return Boolean(this.instanceElement && this.instanceElement.getAttribute('disabled'));
    };
    FormInput.prototype.setValue = function (dataValue, setByScript) {
        if (setByScript === void 0) { setByScript = true; }
        // Set new value directly on the DOM.
        var el = this.instanceElement;
        if (el.value !== dataValue) {
            el.value = String(dataValue);
        }
        // Trigger change.
        this.onFieldChange(setByScript);
    };
    FormInput.prototype.isHidden = function () {
        return utils_1.isHidden(this.instanceElement);
    };
    FormInput.prototype.isInHiddenContainer = function () {
        return utils_1.isFieldInHiddenContainer(this.instanceElement);
    };
    FormInput.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        this.updateDisplayName(this.instanceElement || this.templateElement);
        if (this.showValidCheckmark(this.templateElement)) {
            this._showValidityMarker[ValidityStates.valid] = this._showValidityMarker[ValidityStates.pending] = true;
            this._showValidityOnInput();
        }
    };
    FormInput.prototype.executeConditionalResult = function (evaluationResult, conditionalAtt, element) {
        // Grab the last attribute value before it's set to the new value.
        var lastAttributeValue = conditionalAtt.lastAttributeValue;
        // Set new attributes in the DOM.
        evaluationResult = _super.prototype.executeConditionalResult.call(this, evaluationResult, conditionalAtt, element);
        // Only interested in changes.
        if (evaluationResult === lastAttributeValue) {
            return lastAttributeValue;
        }
        if (conditionalAtt.attributeName === exports.FormInput_CONSTS.required) {
            // The field may have been marked as required in the UI and triggered an error.
            // Triggering the field change event will clear the error if it was caused by the required status.
            if (this.getValidityState() === ValidityStates.error) {
                this.onFieldChange();
            }
            // The placeholder value needs the asterisk appended to it.
            this.setPlaceholderValue();
            // WCAG compliance.
            this.setAriaRequired();
        }
        else if (conditionalAtt.attributeName === exports.FormInput_CONSTS.placeholderAttribute) {
            // Placeholder value updated via conditional attribute.
            this.setPlaceholderValue();
        }
        return evaluationResult;
    };
    FormInput.prototype.setAriaRequired = function () {
        // #69533
        if (this.type === 'submit' || this.type === 'button') {
            return;
        }
        this.instanceElement.setAttribute('aria-required', this.required() ? 'true' : 'false');
    };
    FormInput.prototype.setPlaceholderValue = function () {
        var placeholderText = this.instanceElement.getAttribute(exports.FormInput_CONSTS.placeholderAttribute);
        if (placeholderText) {
            this.placeholderAttributeValue = placeholderText ? "" + placeholderText + (this.required() ? ' *' : '') : '';
        }
        if (this.placeholderAttributeValue) {
            var elementName = this.instanceElement.tagName.toLowerCase();
            var elementType = this.instanceElement.getAttribute('type');
            if (window.gigya.localInfo.isIE8 || window.gigya.localInfo.isIE9) {
                if (!this.placeHolderElement) {
                    this.createPlaceholderElement(elementName, elementType);
                }
                else {
                    window.gigya._.plugins.utils.DOM.setAttribute(this.placeHolderElement, 'value', this.placeholderAttributeValue);
                }
            }
            else {
                if ((elementName === 'input' && elementType !== 'checkbox' && elementType !== 'radio') || elementName === 'textarea') {
                    this.instanceElement.setAttribute('placeholder', this.placeholderAttributeValue);
                }
            }
        }
    };
    FormInput.prototype.onKeyUpForPlaceholder = function (e) {
        var input = e.srcElement['screenSetInstanceOf'][0];
        if (input.isCtrlKeyUp) {
            var keycode = e.keyCode;
            if (keycode === this.KEYCODE_LETTER_X) {
                // x character, backspace or delete
                input.togglePlaceholderStateView(true);
            }
        }
    };
    FormInput.prototype.onBlurForPlaceholder = function (event) {
        var el = event.srcElement;
        var currentValue = el['value'];
        var input = event.srcElement['screenSetInstanceOf'][0];
        if (!currentValue) {
            input.togglePlaceholderStateView(true);
        }
    };
    // this handler is for suppressing the text selection on the placeholder
    //public onTextSelectionStart(e)
    //{
    //    var input = e.srcElement['screenSetInstanceOf'][0] as FormInput;
    //    if (input.isCurrnetValuePlaceholderText) {
    //        event.returnValue = false;
    //    }
    //}
    FormInput.prototype.onContextMenuOpened = function (e) {
        event.returnValue = false;
    };
    FormInput.prototype.onPlaceholderFocused = function (e) {
        var element = e.srcElement;
        var input = element['screenSetInstanceOf'][0];
        input.togglePlaceholderStateView(false, e);
        event.cancelBubble = true;
        if (input._screenSet._placeholderIntervalID === -1) {
            input.togglePlaceholderStateView(false, e);
            input._screenSet._placeholderIntervalID = setInterval(function () {
                if (input._screenSet._placeholderIntervalID === -1) {
                    input.togglePlaceholderStateView(false, e);
                }
                else {
                    clearInterval(input._screenSet._placeholderIntervalID);
                }
            }, 100);
        }
    };
    //this handler is for cases where the user selects the text inside the element (in order to delete part of it)
    //public onTextSelected() {
    //    var el = event.srcElement as HTMLElement;
    //    var input = event.srcElement['screenSetInstanceOf'][0] as FormInput;
    //    input.isTextSelected = true;
    //}
    FormInput.prototype.onPlaceholderKeyDown = function (e) {
        var keycode = e.keyCode;
        var isEnteredValueDisplayable = utils_1.isKeyCodeDisplayable(keycode);
        var element = e.srcElement;
        var input = element['screenSetInstanceOf'][0];
        if (isEnteredValueDisplayable) {
            // hide the placeholder element and show the actual element
            input.togglePlaceholderStateView(false);
        }
        else if (keycode === input.KEY_CODE_BACKSPACE || keycode === input.KEY_CODE_DELETE) {
            event.returnValue = false;
        }
    };
    FormInput.prototype.onKeyDownForPlaceholder = function (e) {
        var keycode = e.keyCode;
        var isEnteredValueDisplayable = utils_1.isKeyCodeDisplayable(keycode);
        var input = e.srcElement['screenSetInstanceOf'][0];
        var lastValue = input.instanceElement.getAttribute('value');
        if (!isEnteredValueDisplayable && input.isCurrnetValuePlaceholderText && keycode == input.KEY_CODE_BACKSPACE) {
            event.returnValue = false;
        }
        else if (lastValue && lastValue.length == 1 && keycode == input.KEY_CODE_BACKSPACE) {
            // @ts-ignore
            e.srcElement.setAttribute('value', '');
            event.returnValue = false;
        }
        else if (input.isTextSelected && (keycode == input.KEY_CODE_DELETE || keycode == input.KEY_CODE_BACKSPACE)) {
            input.isTextSelected = false;
            input.togglePlaceholderStateView(true, event);
        }
        else if (e.ctrlKey) {
            input.isCtrlKeyUp = true;
        }
        else if (isEnteredValueDisplayable && input.isCurrnetValuePlaceholderText) {
            input.togglePlaceholderStateView(false);
        }
        else if (input.isCurrnetValuePlaceholderText && keycode == input.KEY_CODE_DELETE) {
            event.returnValue = false;
        }
    };
    FormInput.prototype.togglePlaceholderStateView = function (showPlaceholder, e) {
        var _this = this;
        if (e === void 0) { e = null; }
        // e: MSEventObj
        if (showPlaceholder) {
            if (e) {
                //this is to handle the select event where the text is erased and the placeholder value isn't set
                e.returnValue = false;
            }
            window.gigya.pluginUtils.DOM.showElement(this.placeHolderElement);
            window.gigya.pluginUtils.DOM.hideElement(this.instanceElement);
            window.gigya._.plugins.utils.DOM.setAttribute(this.instanceElement, 'value', '');
            if (!this.placeHolderElement) {
                setTimeout(function () {
                    _this.placeHolderElement.focus();
                }, 1000);
            }
        }
        else {
            window.gigya.pluginUtils.DOM.hideElement(this.placeHolderElement);
            window.gigya.pluginUtils.DOM.showElement(this.instanceElement);
            window.gigya._.plugins.utils.DOM.setAttribute(this.placeHolderElement, 'value', this.placeholderAttributeValue);
            this.instanceElement.focus();
        }
        this.isCurrnetValuePlaceholderText = showPlaceholder;
        this.isCtrlKeyUp = false;
        this.isTextSelected = false;
    };
    FormInput.prototype.getLoggerName = function () {
        return this.fieldName || _super.prototype.getLoggerName.call(this);
    };
    return FormInput;
}(TemplateElement_1.TemplateElement));
exports.FormInput = FormInput;
function integerCheck(fieldValue) {
    if (fieldValue && isNaN(parseInt(fieldValue)))
        return GSErrors_1.GSErrors.VALIDATION_ERROR;
    return GSErrors_1.GSErrors.OK;
}
function floatCheck(fieldValue) {
    if (fieldValue && isNaN(parseFloat(fieldValue)))
        return GSErrors_1.GSErrors.VALIDATION_ERROR;
    return GSErrors_1.GSErrors.OK;
}
function booleanCheck(fieldValue) {
    if (fieldValue == null)
        return GSErrors_1.GSErrors.VALIDATION_ERROR;
    return GSErrors_1.GSErrors.OK;
}
function dateCheck(fieldValue) {
    if (fieldValue) {
        var dateResult = window.gigya.global.date.getISODate(fieldValue); // Format is always ISO
        if (!dateResult)
            return GSErrors_1.GSErrors.VALIDATION_ERROR;
    }
    return GSErrors_1.GSErrors.OK;
}
var SchemaTypeChecks = {
    integer: integerCheck,
    long: integerCheck,
    float: floatCheck,
    boolean: booleanCheck,
    date: dateCheck,
};
utils_1.DeepFreeze(SchemaTypeChecks);
var formatPattern = /(.*?)\([\'\"](.*?)[\'\"]\)$/;
function schemaFormatCheck(format) {
    var arFormat = format.match(formatPattern);
    if (arFormat) {
        var formatType = arFormat[1];
        var formatValue = arFormat[2];
        if (formatType && formatValue) {
            if (formatType === 'regex') {
                try {
                    var regexFormat_1 = new RegExp(formatValue);
                    regexFormat_1.test(''); // Run regex to make sure that regex will crush if necesary during schema load
                    return function (fieldValue) {
                        if (fieldValue && !regexFormat_1.test(fieldValue))
                            return GSErrors_1.GSErrors.VALIDATION_ERROR;
                        return GSErrors_1.GSErrors.OK;
                    };
                }
                catch (e) {
                    throw new Error('Unsupported regEx pattern: ' + e);
                }
            }
        }
    }
    throw new Error('Unsupported format: ' + format);
}
FormInput.addInputToLibrary(FormInput, FormInputPriorities.Fallback);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/LoginIdInput.ts":
/*!****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/LoginIdInput.ts ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var RegisterForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var LoginIdInput = /** @class */ (function (_super) {
    tslib_1.__extends(LoginIdInput, _super);
    function LoginIdInput(context) {
        var _this = _super.call(this, context) || this;
        _this.isServerValidationEnabled = true;
        _this._serverValidateAvaliability = _this.showValidCheckmark(context.element);
        _this.loginIdMustBeEmail = context.fieldName === 'email';
        return _this;
    }
    LoginIdInput.FORM_TYPE_CRITERIA = function (context) {
        return context.form instanceof RegisterForm_1.RegisterForm && (context.fieldName === 'email' || context.fieldName === 'username');
    };
    LoginIdInput.prototype.showDataPending = function () {
        if (this.instanceElement) {
            this._form.showFieldError(this, GSErrors_1.GSErrors.Data_Pending, true);
        }
    };
    LoginIdInput.prototype.onKeyUp = function (e) {
        if (this.getValue() !== this.previousValue) {
            // Force all events to be fired because we've touched the field error status.
            this.previousValue = undefined;
            this.lastCheck = undefined;
            this.showDataPending();
        }
        _super.prototype.onKeyUp.call(this, e);
    };
    LoginIdInput.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        var email = this.getEmailFromQueryParams();
        if (email) {
            this.prePopulate(email);
            this.instanceElement.setAttribute('disabled', 'disabled');
        }
    };
    LoginIdInput.prototype.serverValidated = function () {
        return this._serverValidateAvaliability;
    };
    LoginIdInput.prototype.startServerValidation = function (fieldValue, callback) {
        var _this = this;
        if (!this.instanceElement) {
            return;
        }
        if (fieldValue === this.lastCheck) {
            // Nothing has changed since last check, no need to query the server again
            return;
        }
        this.showDataPending();
        this.lastCheck = fieldValue;
        this.clearServerError();
        this.instanceElement.removeAttribute(FormInput_1.FormInput_CONSTS.serverValidation);
        this.setValidityState(FormInput_1.ValidityStates.pending);
        if (this.isServerValidationEnabled === false) {
            // We've already tried to use the server-side validation and discovered that it's disabled.
            // Save API calls and don't try again.
            callback({
                errorCode: GSErrors_1.GSErrors.OK,
                field: this,
            });
        }
        else {
            window.gigya.accounts.isAvailableLoginID({
                loginID: fieldValue,
                callback: function (res) { return _this.serverQueryDone(res, fieldValue, callback); },
            });
        }
    };
    LoginIdInput.prototype.serverQueryDone = function (res, checkedValue, callback) {
        // response is no longer relevant due to screen going out of view
        if (!this.instanceElement) {
            return;
        }
        // response is no longer relevant due to value change
        if (this.getValue() !== checkedValue) {
            return;
        }
        var errorCode = res.errorCode;
        switch (errorCode) {
            case GSErrors_1.GSErrors.OK:
                if (!window.gigya.utils.validation.isExplicitTrue(res.isAvailable)) {
                    errorCode = GSErrors_1.GSErrors.UNIQUE_IDENTIFIER_EXISTS;
                }
                break;
            // Console Site Settings has "Protect against login identifier harvesting" option.
            // This causes error code 403026 to be returned for all isAvailableLoginID calls.
            // This shouldn't show any error to the client, so transform to an "OK" response.
            case GSErrors_1.GSErrors.UNAUTHORIZED_ACCESS_ERROR:
                this.isServerValidationEnabled = false;
                errorCode = GSErrors_1.GSErrors.OK;
                break;
        }
        this.setServerError(errorCode);
        this._form.onInputChange(this, false); // triggers revalidation
        callback({
            errorCode: errorCode,
            field: this,
        });
    };
    LoginIdInput.prototype.validateValue = function (formData, fieldValue, callback) {
        if (this.isServerValidationEnabled &&
            fieldValue !== this.lastCheck) {
            this.clearServerError();
        }
        if (fieldValue) {
            if (this.loginIdMustBeEmail &&
                (!this._schema || !this._schema.format) && // continue to hard coded email validation only if schema lacks format
                !window.gigya.pluginUtils.validation.isValidEmailLoginID(fieldValue)) {
                return callback({
                    errorCode: 400006 /* INVALID_PARAMETER_VALUE */,
                    field: this,
                });
            }
        }
        return _super.prototype.validateValue.call(this, formData, fieldValue, callback);
    };
    LoginIdInput.prototype.getEmailFromQueryParams = function () {
        return window.gigya.utils.URL.getParamValueFromURL('gig_email', window.location.search, undefined);
    };
    return LoginIdInput;
}(FormInput_1.FormInput));
exports.LoginIdInput = LoginIdInput;
FormInput_1.FormInput.addInputToLibrary(LoginIdInput, FormInput_1.FormInputPriorities.Important);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PasswordInputs.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PasswordInputs.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var PasswordStrengthWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordStrengthWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordStrengthWidget.ts");
var TemplateElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
var ScreenConsts_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.BasePasswordInput_CONSTS = {
    showPasswordStrength: 'show-password-strength',
};
utils_1.DeepFreeze(exports.BasePasswordInput_CONSTS);
var BasePasswordInput = /** @class */ (function (_super) {
    tslib_1.__extends(BasePasswordInput, _super);
    function BasePasswordInput(context) {
        var _this = _super.call(this, context) || this;
        _this.showPasswordStrengthConditionalExists = false;
        _this.showPasswordStrengthAttribute = '';
        utils_1.ForEach(_this.conditionalExpressions, function (el) {
            if (el.attributeName == exports.BasePasswordInput_CONSTS.showPasswordStrength) {
                _this.showPasswordStrengthConditionalExists = true;
                _this.showPasswordStrengthConditional = el;
            }
        });
        _this.showPasswordStrengthAttribute = window.gigya._.plugins.utils.DOM.getAttribute(_this.templateElement, exports.BasePasswordInput_CONSTS.showPasswordStrength);
        if (_this.showPasswordStrengthAttribute != null && _this.showPasswordStrengthAttribute.length) {
            _this.passwordStrengthOrientation = PasswordStrengthWidget_1.BubbleOrientations[_this.showPasswordStrengthAttribute];
            if (typeof _this.passwordStrengthOrientation === 'undefined')
                _this.passwordStrengthOrientation = _this._screenSet.isModal ? PasswordStrengthWidget_1.BubbleOrientations.left : PasswordStrengthWidget_1.BubbleOrientations.up;
            _this.showPasswordStrength =
                (typeof _this.passwordStrengthOrientation !== 'undefined' && _this.passwordStrengthOrientation != PasswordStrengthWidget_1.BubbleOrientations.none) ||
                    _this.showPasswordStrengthConditionalExists;
        }
        else {
            _this.showPasswordStrength = false;
        }
        return _this;
    }
    BasePasswordInput.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.showPasswordStrength) {
            var bubbleHtml = '';
            if (this.showPasswordStrengthAttribute &&
                typeof this.passwordStrengthOrientation !== 'undefined' &&
                this.passwordStrengthOrientation !== PasswordStrengthWidget_1.BubbleOrientations.none) {
                bubbleHtml = window.gigya.utils.templates.fill(this._screenSet.getTemplates().inlinedPasswordStrength, {
                    orientation: PasswordStrengthWidget_1.BubbleOrientations[this.passwordStrengthOrientation],
                });
            }
            else {
                bubbleHtml = window.gigya.utils.templates.fill(this._screenSet.getTemplates().inlinedPasswordStrength, {
                    orientation: PasswordStrengthWidget_1.BubbleOrientations[PasswordStrengthWidget_1.BubbleOrientations.none],
                });
            }
            this.instanceElement.insertAdjacentHTML('afterend', bubbleHtml);
            var bubbleElement = (this.instanceElement.nextElementSibling
                ? this.instanceElement.nextElementSibling
                : this.instanceElement.nextSibling); // IE8 compatability
            this.passwordStrengthWidget = new PasswordStrengthWidget_1.PasswordStrengthWidget(this._form, bubbleElement);
            if (this.showPasswordStrengthConditionalExists) {
                this.passwordStrengthWidget.templateElement.setAttribute(ScreenConsts_1.Screen_CONSTS.conditionalAttributePrefix + 'data-bubble-orientation', this.showPasswordStrengthConditional.condition);
                var conditional = {
                    attributeName: 'data-bubble-orientation',
                    condition: this.showPasswordStrengthConditional.condition,
                    defaultValue: this.showPasswordStrengthConditional.defaultValue,
                    lastAttributeValue: this.showPasswordStrengthConditional.defaultValue,
                    isWidgetParamTag: false,
                };
                this.passwordStrengthWidget.conditionalExpressions.push(conditional);
            }
            this.passwordStrengthWidget._passwordField = this; // bind to this password field
            TemplateElement_1.TemplateElement.prepareTemplateInstanceElement(bubbleElement, false);
            this.passwordStrengthWidget.linkInstanceElement(bubbleElement.parentElement);
        }
    };
    BasePasswordInput.prototype.unlinkInstanceElement = function () {
        if (this.showPasswordStrength) {
            this.passwordStrengthWidget.unlinkInstanceElement();
            this.passwordStrengthWidget.unlinkTemplate();
            this.passwordStrengthWidget = null;
        }
        _super.prototype.unlinkInstanceElement.call(this);
    };
    BasePasswordInput.prototype.getTruncatedValue = function (val) {
        return String(val);
    };
    BasePasswordInput.prototype.validateValue = function (formData, fieldValue, callback) {
        var _this = this;
        _super.prototype.validateValue.call(this, formData, fieldValue, function (validationInfo) {
            if (validationInfo.errorCode !== GSErrors_1.GSErrors.OK)
                return callback(validationInfo);
            if (_this.isPasswordSchemaValidated()) {
                var apiData = _this._screenSet.getApiData();
                if (apiData.getPolicies && apiData.getPolicies.passwordComplexity) {
                    var oComplexity = apiData.getPolicies.passwordComplexity || {};
                    var oPassStrength = PasswordStrengthWidget_1.getPasswordStrengthData(fieldValue);
                    if (!PasswordStrengthWidget_1.isPasswordStrengthValid(fieldValue, oPassStrength, oComplexity))
                        return callback({
                            errorCode: GSErrors_1.GSErrors.VALIDATION_ERROR,
                            field: _this,
                        });
                }
            }
            callback(validationInfo);
        });
    };
    BasePasswordInput.prototype.isPasswordSchemaValidated = function () {
        return this._form.isPasswordSchemaValidated();
    };
    BasePasswordInput.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        if (this.passwordStrengthWidget) {
            this.passwordStrengthWidget.evaluateConditionalAttributes();
        }
    };
    BasePasswordInput.prototype.isPasswordStrengthWidgetBound = function () {
        return this.showPasswordStrength;
    };
    return BasePasswordInput;
}(FormInput_1.FormInput));
exports.BasePasswordInput = BasePasswordInput;
var PasswordInput = /** @class */ (function (_super) {
    tslib_1.__extends(PasswordInput, _super);
    function PasswordInput(context) {
        var _this = _super.call(this, context) || this;
        _this._form._passwordInputs.push(_this);
        return _this;
    }
    PasswordInput.FORM_TYPE_CRITERIA = function (context) {
        return context.fieldName === 'password';
    };
    PasswordInput.prototype.isPasswordSchemaValidated = function () {
        return _super.prototype.isPasswordSchemaValidated.call(this);
    };
    return PasswordInput;
}(BasePasswordInput));
exports.PasswordInput = PasswordInput;
FormInput_1.FormInput.addInputToLibrary(PasswordInput);
var NewPasswordInput = /** @class */ (function (_super) {
    tslib_1.__extends(NewPasswordInput, _super);
    function NewPasswordInput(context) {
        var _this = _super.call(this, context) || this;
        _this._form._passwordInputs.unshift(_this);
        return _this;
    }
    NewPasswordInput.FORM_TYPE_CRITERIA = function (context) {
        return context.fieldName === 'newPassword';
    };
    return NewPasswordInput;
}(BasePasswordInput));
exports.NewPasswordInput = NewPasswordInput;
FormInput_1.FormInput.addInputToLibrary(NewPasswordInput);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PhoneNumberInput.ts":
/*!********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PhoneNumberInput.ts ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var FormInput_2 = __webpack_require__(/*! ./FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var regExMatchingForE164 = /^\+?[1-9]\d{1,14}$/;
exports.gigyaPhoneNumberInput = 'gigya-phone-number-input';
var PhoneNumberInput = /** @class */ (function (_super) {
    tslib_1.__extends(PhoneNumberInput, _super);
    function PhoneNumberInput() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.countryCodesDataStructure = {};
        _this.onCountryCodeSelected = function (setByScript) {
            _this.countryCodeSelectHadChanged = true;
            var selectedValue = _this.countryCodeSelect.value;
            if (selectedValue === '0') // the default value - it represents no value
                return;
            _this.countryCodeSelect.options[0].value = selectedValue;
            _this.countryCodeSelect.options[0].text = selectedValue;
            _this.countryCodeSelect.selectedIndex = 0;
            // Trigger change.
            _this.onFieldChange(setByScript);
        };
        _this.onSubscriberNumberChanged = function () {
            _this.subscriberNumberHadChanged = true;
        };
        return _this;
    }
    PhoneNumberInput.FORM_TYPE_CRITERIA = function (context) {
        return context.element instanceof HTMLFieldSetElement
            && context.type === exports.gigyaPhoneNumberInput;
    };
    PhoneNumberInput.prototype.generateCountryCodesDataStructure = function () {
        var _this = this;
        // get all option with value attr except the one with value "0"
        var countryCodeOptions = this.countryCodeSelect.querySelectorAll('option[value]:not([value="0"])');
        countryCodeOptions.forEach(function (countryCodeOption) {
            var ds = _this.countryCodesDataStructure;
            for (var _i = 0, _a = countryCodeOption.value; _i < _a.length; _i++) {
                var digit = _a[_i];
                if (!ds[digit]) {
                    ds[digit] = {};
                }
                ds = ds[digit];
            }
        });
    };
    PhoneNumberInput.prototype.getCountryCode = function (phoneNumber) {
        var res = ""; // initialize as an empty string
        var ds = this.countryCodesDataStructure;
        for (var _i = 0, phoneNumber_1 = phoneNumber; _i < phoneNumber_1.length; _i++) {
            var digit = phoneNumber_1[_i];
            if (!ds[digit]) {
                break;
            }
            res = "" + res + digit;
            ds = ds[digit];
        }
        return res;
    };
    PhoneNumberInput.prototype.getSubscriberNumber = function (phoneNumber, countryCode) {
        countryCode = countryCode.replace('\+', '\\+');
        var regExp = new RegExp("^" + countryCode);
        return phoneNumber.replace(regExp, '');
    };
    PhoneNumberInput.prototype.setupChangeEventHandler = function () {
        this.countryCodeSelect.addEventListener('change', this.onCountryCodeSelected);
        this.subscriberNumber.addEventListener('input', this.onSubscriberNumberChanged);
    };
    PhoneNumberInput.prototype.removeChangeEventHandler = function () {
        this.countryCodeSelect.removeEventListener('change', this.onCountryCodeSelected);
        this.subscriberNumber.removeEventListener('input', this.onSubscriberNumberChanged);
    };
    PhoneNumberInput.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this.countryCodeSelect = this.instanceElement.querySelector('select');
        this.subscriberNumber = this.instanceElement.querySelector('input');
        if (!this.countryCodeSelect || !this.subscriberNumber) {
            window.gigya.logger.warn("Phone Number Input: missing country select or mobile phone text box");
            return;
        }
        this.generateCountryCodesDataStructure();
        this.setupChangeEventHandler();
    };
    PhoneNumberInput.prototype._showValidityOnInput = function (element) {
        if (element === void 0) { element = this.instanceElement; }
        if (!this.shouldValidate())
            return;
        var countryCodeValidityState = this.getCountryCodeValidityState();
        _super.prototype._showValidityOnInput.call(this, this.countryCodeSelect, countryCodeValidityState, false);
        if (countryCodeValidityState === FormInput_2.ValidityStates.error) {
            this.countryCodeSelect.blur();
        }
        var subscriberNumberValidityState = this.getSubscriberNumberValidityState();
        var allowValidityMarker = (countryCodeValidityState === FormInput_2.ValidityStates.valid && subscriberNumberValidityState === FormInput_2.ValidityStates.valid);
        _super.prototype._showValidityOnInput.call(this, this.subscriberNumber, subscriberNumberValidityState, allowValidityMarker);
    };
    PhoneNumberInput.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        this.removeChangeEventHandler();
    };
    PhoneNumberInput.prototype.setValidityState = function (validityState, fromServer) {
        if (fromServer === void 0) { fromServer = false; }
        if (this.countryCodeSelect.value !== this.countryCodeSelectPreviousValue
            || this.subscriberNumber.value !== this.subscriberNumberPreviousValue) {
            this.countryCodeSelectPreviousValue = this.countryCodeSelect.value;
            this.subscriberNumberPreviousValue = this.subscriberNumber.value;
            this._validityState = FormInput_2.ValidityStates._undefined;
        }
        _super.prototype.setValidityState.call(this, validityState, fromServer);
    };
    PhoneNumberInput.prototype.validateValue = function (formData, fieldValue, callback) {
        var _this = this;
        if (!this.shouldValidate())
            return callback({ errorCode: GSErrors_1.GSErrors.OK, field: this });
        if (!this.countryCodeSelect.value || this.countryCodeSelect.value === '0' || !this.subscriberNumber.value)
            fieldValue = '';
        return _super.prototype.validateValue.call(this, formData, fieldValue, function (validationInfo) {
            if (validationInfo.errorCode !== GSErrors_1.GSErrors.OK)
                return callback(validationInfo); // basic validation failed
            var errorCode = regExMatchingForE164.test(fieldValue) ?
                GSErrors_1.GSErrors.OK : // valid phone number in e.164 format
                GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE;
            return callback({
                errorCode: errorCode, field: _this,
            });
        });
    };
    PhoneNumberInput.prototype.getValue = function (el, currentValue) {
        if (el === void 0) { el = this.instanceElement; }
        if (!this.countryCodeSelect || !this.subscriberNumber)
            return '';
        var countryCode = this.countryCodeSelect.value === '0' ? "" : this.countryCodeSelect.value;
        var subscriberNumber = this.subscriberNumber.value.replace(/\s/gm, ''); // removes any whitespace character
        if (countryCode !== '+39') { // Italy (phone must start with 0)
            subscriberNumber = subscriberNumber.replace(/^0+/, '');
        }
        return "" + countryCode + subscriberNumber;
    };
    PhoneNumberInput.prototype.setValue = function (phoneNumber, setByScript) {
        if (setByScript === void 0) { setByScript = true; }
        if (!this.countryCodeSelect || !this.subscriberNumber) {
            return;
        }
        if (this.getValue() !== phoneNumber) {
            var countryCode = this.getCountryCode(phoneNumber);
            var subscriberNumber = this.getSubscriberNumber(phoneNumber, countryCode);
            this.countryCodeSelect.value = countryCode;
            this.subscriberNumber.value = subscriberNumber;
            this.onCountryCodeSelected(setByScript);
        }
    };
    PhoneNumberInput.prototype.getCountryCodeValidityState = function () {
        return (!this.countryCodeSelect.value || this.countryCodeSelect.value === '0')
            ? FormInput_2.ValidityStates.error
            : FormInput_2.ValidityStates.valid;
    };
    PhoneNumberInput.prototype.getSubscriberNumberValidityState = function () {
        return (!this.subscriberNumber.value ||
            (this.getCountryCodeValidityState() === FormInput_2.ValidityStates.valid &&
                !regExMatchingForE164.test(this.getValue())))
            ? FormInput_2.ValidityStates.error
            : FormInput_2.ValidityStates.valid;
    };
    PhoneNumberInput.prototype.shouldValidate = function () {
        return this._form.submitButtonClicked ||
            (this.countryCodeSelectHadChanged && this.subscriberNumberHadChanged);
    };
    return PhoneNumberInput;
}(FormInput_1.FormInput));
exports.PhoneNumberInput = PhoneNumberInput;
FormInput_1.FormInput.addInputToLibrary(PhoneNumberInput);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RadioInput.ts":
/*!**************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RadioInput.ts ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var RadioInput = /** @class */ (function (_super) {
    tslib_1.__extends(RadioInput, _super);
    function RadioInput(context) {
        return _super.call(this, context) || this;
    }
    RadioInput.FORM_TYPE_CRITERIA = function (context) {
        return context.type === 'radio';
    };
    RadioInput.prototype.getValidateValue = function (formData) {
        return formData[this.getName(false, true)];
    };
    RadioInput.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this._schema = undefined; // disable schema checks for radio buttons
        this.groupRadioButtonArrayFields();
    };
    RadioInput.prototype.setValue = function (dataValue, setByScript) {
        if (setByScript === void 0) { setByScript = true; }
        // Set new value directly on the DOM.
        var el = this.instanceElement;
        el.checked = dataValue.toString() === el.value;
        // Trigger change.
        this.onFieldChange(setByScript);
    };
    RadioInput.prototype.getValue = function (el) {
        if (el === void 0) { el = this.instanceElement; }
        var value = _super.prototype.getValue.call(this, el);
        return el.checked ? value : null;
    };
    RadioInput.prototype.groupRadioButtonArrayFields = function () {
        if (this.instanceElement) {
            // #44366 - Group radio buttons by schema field name and array key field.
            var name = this.instanceElement.getAttribute('name');
            var arrayKeyValue = this.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.arrayKeyValueAttribute);
            if (name && arrayKeyValue) {
                this.instanceElement.setAttribute('name', name + "[" + arrayKeyValue + "]");
            }
        }
    };
    return RadioInput;
}(FormInput_1.FormInput));
exports.RadioInput = RadioInput;
FormInput_1.FormInput.addInputToLibrary(RadioInput);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RememeberInput.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RememeberInput.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var CheckboxInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CheckboxInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CheckboxInput.ts");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var RememeberInput = /** @class */ (function (_super) {
    tslib_1.__extends(RememeberInput, _super);
    function RememeberInput(context) {
        var _this = _super.call(this, context) || this;
        _this._form._rememberMe = _this;
        return _this;
    }
    RememeberInput.FORM_TYPE_CRITERIA = function (context) {
        return context.fieldName === 'remember';
    };
    return RememeberInput;
}(CheckboxInput_1.CheckboxInput));
exports.RememeberInput = RememeberInput;
FormInput_1.FormInput.addInputToLibrary(RememeberInput, FormInput_1.FormInputPriorities.Important);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RetypePasswordInput.ts":
/*!***********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RetypePasswordInput.ts ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var RetypePasswordInput = /** @class */ (function (_super) {
    tslib_1.__extends(RetypePasswordInput, _super);
    function RetypePasswordInput(context) {
        var _this = _super.call(this, context) || this;
        _this._form._passwordRetypes.push(_this);
        return _this;
    }
    RetypePasswordInput.FORM_TYPE_CRITERIA = function (context) {
        return context.fieldName === 'passwordRetype';
    };
    RetypePasswordInput.prototype.validateValue = function (formData, fieldValue, callback) {
        if (this._form._validatedPassword) {
            var passwordValue = this._form._validatedPassword.getValue();
            if (passwordValue !== '' && passwordValue !== fieldValue)
                return callback({
                    field: this,
                    errorCode: GSErrors_1.GSErrors.VALIDATION_ERROR,
                });
        }
        _super.prototype.validateValue.call(this, formData, fieldValue, callback);
    };
    return RetypePasswordInput;
}(FormInput_1.FormInput));
exports.RetypePasswordInput = RetypePasswordInput;
FormInput_1.FormInput.addInputToLibrary(RetypePasswordInput);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts":
/*!*******************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var ConflictHandling;
(function (ConflictHandling) {
    ConflictHandling[ConflictHandling["fail"] = 0] = "fail";
    ConflictHandling[ConflictHandling["saveProfileAndFail"] = 1] = "saveProfileAndFail";
})(ConflictHandling = exports.ConflictHandling || (exports.ConflictHandling = {}));
exports.LoginModes = {
    standard: {
        name: 'standard',
        getLoginProviders: function (apiData, params, regToken) {
            var enabledProviders = params['enabledProviders'];
            if (typeof enabledProviders !== 'string')
                return null;
            return enabledProviders.toLowerCase();
        },
        filterParams: function (params) {
            delete params.regToken;
            delete params.instanceID;
            delete params.getInstance;
            return params;
        },
    },
    reAuth: {
        name: 'reAuth',
        getLoginProviders: function (apiData, params, regToken) {
            var currentProviders = apiData.getAccountInfo && apiData.getAccountInfo.socialProviders;
            var identities = apiData.getAccountInfo && apiData.getAccountInfo.identities;
            if (!currentProviders)
                return null;
            currentProviders = currentProviders.toLowerCase();
            var providers = currentProviders.split(',');
            if (identities) {
                // remove identities that are allowLogin false
                utils_1.ForEach(identities, function (identity) {
                    if (!identity.allowsLogin) {
                        var idx = providers.indexOf(identity.provider.toLowerCase());
                        if (idx > -1)
                            providers.splice(idx, 1);
                    }
                });
            }
            return providers.join(',');
        },
        filterParams: function (params) {
            delete params.instanceID;
            delete params.getInstance;
            return params;
        },
    },
    link: {
        name: 'link',
        getLoginProviders: function (apiData, params, regToken) {
            if (!regToken)
                return null;
            return (apiData.getConflictingAccount &&
                apiData.getConflictingAccount.conflictingAccount &&
                apiData.getConflictingAccount.conflictingAccount.loginProviders &&
                apiData.getConflictingAccount.conflictingAccount.loginProviders.join(',').toLowerCase());
        },
        filterParams: function (params) {
            delete params.instanceID;
            delete params.getInstance;
            return params;
        },
    },
};
utils_1.DeepFreeze(exports.LoginModes);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Screen.ts":
/*!***************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Screen.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var TemplateElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
var ScreenOptions_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var ErrorDisplayElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var ScreenConsts_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts");
var PluginStyles_1 = __webpack_require__(/*! src/core/Gigya.Js.Plugin/app/PluginStyles */ "./src/core/Gigya.Js.Plugin/app/PluginStyles.ts");
var Screen = /** @class */ (function (_super) {
    tslib_1.__extends(Screen, _super);
    function Screen(_screenSet, templateElement) {
        var _this = _super.call(this, templateElement, _screenSet) || this;
        _this._screenSet = _screenSet;
        _this.templateElement = templateElement;
        _this._errorDisplayElements = {};
        _this._profilePhotos = new Array();
        _this._captchas = new Array();
        _this._others = new Array();
        if (!_this.ID)
            _this.warn('screen is missing an id');
        if (/[^-_0-9a-zA-Z]/.test(_this.ID))
            _this.warn('screen id contains special characters that may contain special meaning');
        ScreenOptions_1.ScreenOptions.call(_this, templateElement, _screenSet.screenOptions);
        _this.prepareBoundedToFormElements();
        _this._forms = BaseForm_1.BaseForm.registerForms(_this);
        _this._widgets = BaseScreenWidget_1.BaseScreenWidget.registerWidgets(_this);
        // handling of normal DOM elements that use gigya logic
        _this.prepareOtherElements();
        _this.setCssClass();
        return _this;
    }
    Screen.prototype.prepareBoundedToFormElements = function () {
        var _this = this;
        var boundedElements = new Array();
        Screen.utils.ForEach(ErrorDisplayElement_1.ErrorDisplayElement_CONSTS.gigyaClasses, function (gigyaClass) {
            boundedElements = boundedElements.concat(Array.prototype.slice.call(_this.templateElement.querySelectorAll("." + gigyaClass)));
        });
        Screen.utils.ForEach(boundedElements, function (el) {
            var boundedElement = new ErrorDisplayElement_1.ErrorDisplayElement(el, _this);
            var boundedList = _this._errorDisplayElements[boundedElement.boundedTo];
            if (!boundedList)
                boundedList = _this._errorDisplayElements[boundedElement.boundedTo] = [];
            boundedList.push(boundedElement);
        });
    };
    Screen.prototype.addSpecificErrorBinds = function (boundedElements) {
        var _this = this;
        if (boundedElements === void 0) { boundedElements = []; }
        var boundedErrorElements = [];
        Screen.utils.ForEach(boundedElements, function (el) {
            var boundedElement = new ErrorDisplayElement_1.ErrorDisplayElement(el, _this);
            _this._errorDisplayElements[boundedElement.boundedTo] = (_this._errorDisplayElements[boundedElement.boundedTo] || []).concat([boundedElement]);
            boundedErrorElements.push(boundedElement);
        });
        boundedErrorElements.forEach(function (el) { return el.linkInstanceElement(_this.instanceElement); });
        return boundedErrorElements;
    };
    Screen.prototype.removeSpecificErrorBinds = function (boundedErrors) {
        var _this = this;
        if (boundedErrors === void 0) { boundedErrors = []; }
        Screen.utils.ForEach(boundedErrors, function (errorDisplay) {
            delete _this._errorDisplayElements[errorDisplay.boundedTo];
            errorDisplay.unlinkInstanceElement();
        });
    };
    Screen.prototype.addDynamicWidgets = function (rootEl) {
        var _this = this;
        var newWidgets = BaseScreenWidget_1.BaseScreenWidget.registerDynamicWidgets(this, rootEl);
        Screen.utils.ForEach(newWidgets, function (w) { return w.linkInstanceElement(_this.instanceElement); });
        this._widgets = this._widgets.concat(newWidgets);
        return newWidgets;
    };
    Screen.prototype.removeDynamicWidgets = function (widgetsToRemove) {
        if (!this._widgets || !this._widgets.length)
            return;
        this._widgets = this._widgets.filter(function (w) { return widgetsToRemove.indexOf(w) < 0; });
        widgetsToRemove.forEach(function (widget) {
            widget.unlinkInstanceElement();
            widget.unlinkTemplate();
        });
    };
    Screen.prototype.prepareOtherElements = function () {
        // These elements are evaluated because they have an ID.
        var otherElements = Screen.utils.getElementsByHavingAttribute(this.templateElement, '*', 'id');
        // These elements are evaluated because they have conditional attributes.
        var attributePrefixes = [ScreenConsts_1.Screen_CONSTS.conditionalAttributePrefix, ScreenConsts_1.Screen_CONSTS.expressionAttributePrefix];
        var conditionalElements = Screen.utils.getElementsByHavingAttributePrefix(this.templateElement, attributePrefixes, ['param']);
        // Combine and de-dup arrays.
        for (var _i = 0, conditionalElements_1 = conditionalElements; _i < conditionalElements_1.length; _i++) {
            var conditionalElement = conditionalElements_1[_i];
            if (window.gigya.utils.array.indexOf(otherElements, conditionalElement) === -1) {
                otherElements.push(conditionalElement);
            }
        }
        // Add TemplateElement to other elements.
        for (var _a = 0, otherElements_1 = otherElements; _a < otherElements_1.length; _a++) {
            var el = otherElements_1[_a];
            if (!TemplateElement_1.TemplateElement.isTemplateInstance(el)) {
                this._others.push(new TemplateElement_1.TemplateElement(el, this));
            }
        }
    };
    Screen.prototype.overrideTemplateCaption = function (caption) {
        // override caption attributes and remove the caption expression, NOTICE: this mean that it will no longer be evaluated
        this.instanceElement.removeAttribute(ScreenConsts_1.Screen_CONSTS.expressionAttributePrefix + ":" + ScreenOptions_1.ScreenOptions_CONSTS.caption);
        this.instanceElement.setAttribute(ScreenOptions_1.ScreenOptions_CONSTS.caption, caption);
        this.caption = caption;
    };
    Screen.prototype.haveForms = function () {
        return this._forms.length || this._hasTfa;
    };
    Screen.prototype.getFormByElement = function (element) {
        for (var _i = 0, _a = this._forms; _i < _a.length; _i++) {
            var form = _a[_i];
            if (form.instanceElement.contains(element)) {
                return form;
            }
        }
    };
    Screen.prototype.setCssClass = function () {
        this.cssClass = this.templateElement.getAttribute(ScreenConsts_1.Screen_CONSTS.cssClass);
    };
    Screen.prototype.unlinkTemplate = function () {
        var unlinkItem = function (i) { return i.unlinkTemplate(); };
        Screen.utils.ForEach(this._forms, unlinkItem);
        Screen.utils.ForEachProp(this._errorDisplayElements, function (boundedElements) {
            Screen.utils.ForEach(boundedElements, unlinkItem);
        });
        Screen.utils.ForEach(this._others, unlinkItem);
        Screen.utils.ForEach(this._widgets, unlinkItem);
        _super.prototype.unlinkTemplate.call(this);
    };
    Screen.prototype.linkInstanceElement = function (parent) {
        var _this = this;
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.instanceElement) {
            var linkItem = function (i) { return i.linkInstanceElement(_this.instanceElement); };
            Screen.utils.ForEach(this._widgets, linkItem);
            Screen.utils.ForEach(this._others, linkItem);
            Screen.utils.ForEachProp(this._errorDisplayElements, function (boundedElements) {
                Screen.utils.ForEach(boundedElements, linkItem);
            });
            Screen.utils.ForEach(this._forms, linkItem);
        }
        if (window.gigya.localInfo.isIE9 || window.gigya.localInfo.isIE8) {
            Screen.utils.ForEach(this._forms, function (form) {
                form.filters.push({
                    filterOutWidgetsToSend: function (dataToFilter) {
                        if (dataToFilter.profile) {
                            delete dataToFilter.profile._profilePhoto;
                        }
                        return dataToFilter;
                    },
                });
            });
        }
    };
    Screen.prototype.placeContentInElement = function (instanceElement) {
        Screen.utils.ForEach(this.templateElement.attributes, function (a) { return instanceElement.setAttribute(a.name, a.value); });
        instanceElement.innerHTML = this.templateElement.innerHTML;
    };
    Screen.prototype.unlinkInstanceElement = function () {
        if (this.instanceElement) {
            var unlinkItem = function (i) { return i.unlinkInstanceElement(); };
            Screen.utils.ForEach(this._forms, unlinkItem);
            Screen.utils.ForEachProp(this._errorDisplayElements, function (boundedElements) {
                Screen.utils.ForEach(boundedElements, unlinkItem);
            });
            Screen.utils.ForEach(this._others, unlinkItem);
            Screen.utils.ForEach(this._widgets, unlinkItem);
        }
        _super.prototype.unlinkInstanceElement.call(this);
    };
    Screen.prototype.getErrorMessage = function (errorCode, isBoundToField, field) {
        return this._screenSet.getErrorMessage(errorCode, isBoundToField, field.fieldName, field.displayName);
    };
    Screen.prototype.dispatchEvent = function (eventName, event) {
        return this._screenSet.dispatchScreenSetEvent(eventName, event);
    };
    // TODO: make async stack
    Screen.prototype.performAutoSkip = function (formContext) {
        var _this = this;
        return new gigya.Promise(function (resolve) {
            if (!_this._forms.length)
                resolve(null);
            var formsLeft = _this._forms.length;
            var screenCanSkip = true;
            var callback = function (formCanSkip) {
                if (!formCanSkip)
                    screenCanSkip = false;
                if (--formsLeft <= 0)
                    resolve(screenCanSkip ? _this._forms[0] : null);
            };
            Screen.utils.ForEach(_this._forms, function (f) {
                return f.checkAutoSkip(formContext, callback);
            });
        });
    };
    Screen.prototype.hideErrors = function () {
        var _this = this;
        this._forms.map(function (f) {
            return (_this._errorDisplayElements[f.bindID] || []).forEach(function (elBound) {
                return elBound.hideError();
            });
        });
    };
    Screen.prototype.showErrors = function (form, arErrors, isServerError) {
        var _this = this;
        var arBoundElements = this._errorDisplayElements[form.bindID] || [];
        Screen.utils.ForEach(arBoundElements, function (elBound) {
            if (!isServerError && elBound.scope !== ErrorDisplayElement_1.ErrorScopes.firstError && elBound.scope !== ErrorDisplayElement_1.ErrorScopes.anyError && elBound.scope !== ErrorDisplayElement_1.ErrorScopes.allErrors)
                return;
            var firstError;
            var arErrorMessages = new Array();
            var shouldDisplay = false;
            Screen.utils.ForEach(arErrors, function (error) {
                if (elBound.isErrorCodeAllowed(error.errorCode, error.errorFlags)) {
                    error.handled = true;
                    var errorMessage = error.customMessage || error.errorMessage;
                    if (!firstError)
                        firstError = error.errorCode;
                    if (!errorMessage) {
                        var field = form.getField(error.fieldName);
                        if (field)
                            errorMessage = _this._screenSet.getErrorMessage(error.errorCode, false, field.fieldName, field.displayName);
                    }
                    if (errorMessage) {
                        shouldDisplay = true;
                        arErrorMessages.push(errorMessage);
                    }
                }
            });
            if (shouldDisplay) {
                var errorMsg;
                if (elBound.scope === ErrorDisplayElement_1.ErrorScopes.firstError || isServerError) {
                    errorMsg = arErrorMessages[0];
                }
                else {
                    errorMsg = '<ul><li>' + arErrorMessages.join('</li><li>') + '</li></ul>';
                }
                elBound.showError({
                    errorCode: firstError,
                    errorMessage: errorMsg,
                });
            }
            else {
                elBound.hideError();
            }
        });
        if (Screen.utils.Some(arErrors, function (error) { return !error.handled; })) {
            form.warn('Missing error-msg or error-display for form');
        }
    };
    Screen.prototype.dimScreen = function () {
        return this._screenSet.dimScreenSet();
    };
    Screen.prototype.undimScreen = function () {
        return this._screenSet.undimScreenSet();
    };
    Screen.prototype.setProfilePhoto = function (thumbnailUrl) {
        Screen.utils.ForEach(this._profilePhotos, function (pPhoto) { return pPhoto.setThumbnailUrl(thumbnailUrl); });
    };
    Screen.prototype.getExtraProfileFields = function (missingOnly) {
        var missingFields = new Array();
        Screen.utils.ForEach(this._forms, function (f) { return (missingFields = missingFields.concat(f.getExtraProfileFields(missingOnly))); });
        return missingFields;
    };
    Screen.prototype.getNeededData = function (formContext) {
        var neededData = {};
        Screen.utils.ForEach(this._forms, function (f) {
            var formNeededData = f.getNeededData(formContext);
            Screen.utils.ForEachProp(formNeededData, function (val, name) { return (neededData[name] = val); });
        });
        return neededData;
    };
    /// Override TemplateElement's hasConditionalAttributes
    Screen.prototype.hasConditionalAttributes = function () {
        if (_super.prototype.hasConditionalAttributes.call(this))
            return true;
        var children = [].concat(this._forms, this._widgets, this._captchas, this._profilePhotos, this._others);
        window.gigya.utils.array.forEachProp(this._errorDisplayElements, function (templateElements) { return children.concat(templateElements); });
        return window.gigya.utils.array.some(children, function (child) { return child.hasConditionalAttributes(); });
    };
    Screen.prototype.evaluateConditionalAttributes = function () {
        var _this = this;
        if (!this.hasConditionalAttributes()) {
            return;
        }
        window.gigya.logger.group("screen conditional attributes evaluation").endWhen(function () {
            var lastDataWidthAttributeValue = _this.width;
            var lastDataHeightAttributeValue = _this.height;
            _super.prototype.evaluateConditionalAttributes.call(_this);
            ScreenOptions_1.ScreenOptions.call(_this, _this.instanceElement, _this._screenSet.screenOptions);
            // Assign the 'data-' attributes of the screen.
            // Note: the screen's 'data-' attributes will override CSS properties and will take precedence
            // in case the current data-width is 'auto', no width value will be set to the 'Screen' element.
            var currentDataWidthAttributeValue = _this.width;
            var currentDataHeightAttributeValue = _this.height;
            // The following line is for a scenario that conditional attributes were evaluated on the screen level
            // and there's a chance that the modal also needs to be resized accordingly
            var screenDimensions = _this.getScreenDimensionsWithUnitType();
            if (lastDataWidthAttributeValue != currentDataWidthAttributeValue || lastDataHeightAttributeValue != currentDataHeightAttributeValue) {
                _this._screenSet.resizeModal({ width: screenDimensions.width, height: screenDimensions.height });
            }
            var captionWidth = _this.instanceElement ? _this.instanceElement.offsetWidth + 'px' : '';
            _this._screenSet.setCaption(_this.caption, captionWidth);
            Screen.utils.ForEach(_this._forms, function (form) {
                form.evaluateConditionalAttributes();
            });
            Screen.utils.ForEachProp(_this._errorDisplayElements, function (boundedElements) {
                Screen.utils.ForEach(boundedElements, function (boundedElement) {
                    boundedElement.evaluateConditionalAttributes();
                });
            });
            Screen.utils.ForEach(_this._others, function (oth) {
                oth.evaluateConditionalAttributes();
            });
            Screen.utils.ForEach(_this._widgets, function (widget) {
                widget.evaluateConditionalAttributes();
            });
        });
    };
    Screen.prototype.resetLastConditionalValues = function () {
        window.gigya.logger.debug("resetting conditional values");
        _super.prototype.resetLastConditionalValues.call(this);
        Screen.utils.ForEach(this._forms, function (form) {
            form.resetLastConditionalValues();
        });
        Screen.utils.ForEachProp(this._errorDisplayElements, function (boundedElements) {
            Screen.utils.ForEach(boundedElements, function (boundedElement) {
                boundedElement.resetLastConditionalValues();
            });
        });
        Screen.utils.ForEach(this._others, function (oth) {
            oth.resetLastConditionalValues();
        });
        Screen.utils.ForEach(this._widgets, function (widget) {
            widget.resetLastConditionalValues();
        });
    };
    Screen.prototype.getScreenDimensionsWithUnitType = function () {
        var isLegacy = this._screenSet.getPluginStyle() == PluginStyles_1.PluginStyle.legacy;
        var widthVal;
        if (this.width) {
            var widthUnits;
            widthUnits = Screen.utils.getUnitMeasurementType(this.width);
            if (widthUnits !== utils_1.UnitMeasurementType.auto && (!isLegacy || widthUnits != utils_1.UnitMeasurementType.percentage)) {
                widthVal = parseFloat(this.width) + widthUnits;
            }
        }
        var heightVal;
        if (this.height) {
            var heightUnits;
            heightUnits = Screen.utils.getUnitMeasurementType(this.height);
            if (heightUnits !== utils_1.UnitMeasurementType.auto && (!isLegacy || heightUnits != utils_1.UnitMeasurementType.percentage)) {
                heightVal = parseFloat(this.height) + heightUnits;
            }
        }
        return { width: widthVal, height: heightVal };
    };
    // Overridable dependencies ///
    Screen.utils = {
        ForEach: utils_1.ForEach,
        getElementsByHavingAttribute: utils_1.getElementsByHavingAttribute,
        getElementsByHavingAttributePrefix: utils_1.getElementsByHavingAttributePrefix,
        ForEachProp: utils_1.ForEachProp,
        Some: utils_1.Some,
        getUnitMeasurementType: utils_1.getUnitMeasurementType,
    };
    return Screen;
}(TemplateElement_1.TemplateElement));
exports.Screen = Screen;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts":
/*!*********************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
exports.Screen_CONSTS = {
    gigyaClass: 'gigya-screen',
    conditionalAttributePrefix: 'gigya-conditional',
    expressionAttributePrefix: 'gigya-expression',
    cssClass: 'data-css-class',
};


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions.ts":
/*!**********************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions.ts ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
exports.ScreenOptions_CONSTS = {
    accountsLinkedScreen: 'data-on-accounts-linked-screen',
    pendingTfaRegistrationScreen: 'data-on-pending-tfa-registration-screen',
    pendingTfaVerificationScreen: 'data-on-pending-tfa-verification-screen',
    pendingRegistrationScreen: 'data-on-pending-registration-screen',
    existingLoginIdentifierScreen: 'data-on-existing-login-identifier-screen',
    pendingVerificationScreen: 'data-on-pending-verification-screen',
    pendingCodeVerificationScreen: 'data-on-pending-email-verification-code',
    missingLoginIdScreen: 'data-on-missing-loginid-screen',
    pendingPasswordChangeScreen: 'data-on-pending-password-change-screen',
    pendingReAuthenticationScreen: 'data-on-pending-recent-login-screen',
    width: 'data-width',
    height: 'data-height',
    caption: 'data-caption',
};
utils_1.DeepFreeze(exports.ScreenOptions_CONSTS);
var ScreenOptions = /** @class */ (function () {
    function ScreenOptions(el, parent) {
        parent = parent || {};
        this.accountsLinkedScreen = el.getAttribute(exports.ScreenOptions_CONSTS.accountsLinkedScreen) || parent.accountsLinkedScreen;
        this.pendingTfaRegistrationScreen = el.getAttribute(exports.ScreenOptions_CONSTS.pendingTfaRegistrationScreen) || parent.pendingTfaRegistrationScreen;
        this.pendingTfaVerificationScreen = el.getAttribute(exports.ScreenOptions_CONSTS.pendingTfaVerificationScreen) || parent.pendingTfaVerificationScreen;
        this.pendingRegistrationScreen = el.getAttribute(exports.ScreenOptions_CONSTS.pendingRegistrationScreen) || parent.pendingRegistrationScreen;
        this.existingLoginIdentifierScreen = el.getAttribute(exports.ScreenOptions_CONSTS.existingLoginIdentifierScreen) || parent.existingLoginIdentifierScreen;
        this.pendingVerificationScreen = el.getAttribute(exports.ScreenOptions_CONSTS.pendingVerificationScreen) || parent.pendingVerificationScreen;
        this.pendingCodeVerificationScreen = el.getAttribute(exports.ScreenOptions_CONSTS.pendingCodeVerificationScreen) || parent.pendingCodeVerificationScreen;
        this.missingLoginIdScreen = el.getAttribute(exports.ScreenOptions_CONSTS.missingLoginIdScreen) || parent.missingLoginIdScreen;
        this.pendingPasswordChangeScreen = el.getAttribute(exports.ScreenOptions_CONSTS.pendingPasswordChangeScreen) || parent.pendingPasswordChangeScreen;
        this.pendingReAuthenticationScreen = el.getAttribute(exports.ScreenOptions_CONSTS.pendingReAuthenticationScreen) || parent.pendingReAuthenticationScreen;
        this.width = el.getAttribute(exports.ScreenOptions_CONSTS.width) || parent.width;
        this.height = el.getAttribute(exports.ScreenOptions_CONSTS.height) || parent.height;
        this.caption = el.getAttribute(exports.ScreenOptions_CONSTS.caption) || parent.caption;
    }
    return ScreenOptions;
}());
exports.ScreenOptions = ScreenOptions;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetData.ts":
/*!**********************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetData.ts ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var ScreenSetData = /** @class */ (function () {
    function ScreenSetData(params) {
        this.params = params;
        this.apiData = {}; // Each form can have its own server API data
        this.lastSubmittedFormResponse = {};
        this.finalizeRegistrationNeeded = false;
        this.neededData = {};
        this.extraEventData = {};
        this.otpData = {};
        this.pushData = {};
        this.regToken = params.regToken;
        this.finalizeRegistrationNeeded = params.finalizeRegistration;
    }
    return ScreenSetData;
}());
exports.ScreenSetData = ScreenSetData;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin.ts":
/*!************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin.ts ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var ScreenSetData_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetData */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetData.ts");
var CloseReasons_1 = __webpack_require__(/*! src/core/Gigya.Js.Plugin/app/CloseReasons */ "./src/core/Gigya.Js.Plugin/app/CloseReasons.ts");
var Screen_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Screen */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Screen.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var Errors_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors.ts");
var TemplateElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
var ScreenOptions_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions.ts");
var IBaseObjectConfig_1 = __webpack_require__(/*! src/core/Gigya.Js/app/BaseObject/IBaseObjectConfig */ "./src/core/Gigya.Js/app/BaseObject/IBaseObjectConfig.ts");
var PluginStyles_1 = __webpack_require__(/*! src/core/Gigya.Js.Plugin/app/PluginStyles */ "./src/core/Gigya.Js.Plugin/app/PluginStyles.ts");
var NewsletterSignupForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/NewsletterSignupForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/NewsletterSignupForm.ts");
var ScreenConsts_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts");
var constants_1 = __webpack_require__(/*! src/accounts/constants */ "./src/accounts/constants.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var ScreenSetPlugin_CONSTS = {
    namespace: 'accounts',
    pluginName: 'screenSet',
    showScreenSetName: 'showScreenSet',
    switchScreenName: 'switchScreen',
    hideScreenSetName: 'hideScreenSet',
    stayOnScreen: '_stay',
};
utils_1.DeepFreeze(ScreenSetPlugin_CONSTS);
utils_1.DeepFreeze(CloseReasons_1.CloseReasons);
exports.EndFlowScreens = {
    _skip: CloseReasons_1.CloseReasons.skip,
    _finish: CloseReasons_1.CloseReasons.finished,
    _cancel: CloseReasons_1.CloseReasons.cancel,
};
utils_1.DeepFreeze(exports.EndFlowScreens);
exports.ScreenSet_CONSTS = {
    gigyaClass: 'gigya-screen-set',
    mobileDialogClass: 'gigya-screen-dialog-mobile',
    webDialogClass: 'gigya-screen-dialog',
    contentClass: 'gigya-screen-dialog-content',
    topElementClass: 'gigya-screen-dialog-top',
    calculateSizeClass: 'gigya-calculate-size',
    gigyaHidden: 'gigya-hidden',
    startScreen: 'data-start-screen',
    isResponsive: 'data-responsive',
    dialogStyle: 'data-dialog-style',
};
utils_1.DeepFreeze(exports.ScreenSet_CONSTS);
var ScreenSetPlugin = /** @class */ (function (_super) {
    tslib_1.__extends(ScreenSetPlugin, _super);
    function ScreenSetPlugin() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._addedCSS = false;
        _this._screens = {};
        _this._random = Math.random();
        _this._placeholderIntervalID = -1;
        _this.onUserStateChange = function (res) { return _this.onAccountInfo(res); };
        // ITemplateElementParent implementation
        _this._screenSet = _this;
        return _this;
    }
    ScreenSetPlugin.prototype.getConfig = function () {
        return {
            requiredParams: ['screenSet'],
            defaultParams: { screenSet: '' },
            defaultModalParams: {
                screenSet: '',
            },
            defaultDeviceType: IBaseObjectConfig_1.DeviceTypes.auto,
            hasMobileUI: true,
            allowModal: true,
            disableModalContainerInit: true,
            defaultDialogStyle: PluginStyles_1.PluginStyle.legacy,
            supportsResponsive: true,
            enableSizePolling: true,
            enableViewportPolling: true,
        };
    };
    ScreenSetPlugin.injectionInfo = function () {
        return {
            name: 'screenSet',
            namespace: 'accounts',
            methodName: 'showScreenSet',
            jsName: 'gigya.services.accounts.plugins.screenSet',
            publicMethods: {
                hideScreenSet: { instanceMethod: 'cancel', argNames: [] },
                switchScreen: { instanceMethod: 'switchScreen', argNames: ['screen'] },
            },
        };
    };
    /// TODO: son objects should use be injected with this screen-set event dispatcher and warn method (above).
    ScreenSetPlugin.prototype.dispatchScreenSetEvent = function (eventName, obj) {
        return this.dispatchPluginEvent(eventName, obj);
    };
    //#region static methods
    // TODO: will have a support structure in BasePlugin that will find the instance
    ScreenSetPlugin._calculateInstanceId = function (p) {
        var containerID = p.containerID || '';
        return p.screenSet + '_' + containerID;
    };
    //#endregion
    ScreenSetPlugin.prototype.init = function (callback) {
        var _this = this;
        this.loadTemplate(function (success, translations, serverParams) {
            if (!success) {
                window.gigya.logger.error('failed loading screen set template');
            }
            else {
                window.gigya.logger.info('screen set template loaded');
                utils_1.IETemplateElementPolyfill();
                // Re-create parameters using server-loaded params.
                if (serverParams) {
                    // Merge the explicit params on top of the server-provided params to create a new set of explicit params.
                    _this.explicitParams = window.gigya.utils.object.merge([serverParams, _this.explicitParams], false);
                    // Create a new set of params by merging with global conf.
                    _this.params = window.gigya.utils.object.merge([_this.params, window.gigya.thisScript.globalConf, _this.explicitParams], false);
                }
                // Merge translations from parameters to support translations being overridden on the client-side.
                _this.params.customLang = window.gigya.utils.object.merge([translations || {}, _this.params.customLang || {}]);
                // Normalize all translation keys to lowercase in addition to their original casing.
                for (var key in _this.params.customLang) {
                    _this.params.customLang[key.toLowerCase()] = _this.params.customLang[key];
                }
            }
            // #71502 | support regToken in query string for LiteAccount users
            var gig_regToken = window.gigya.utils.URL.getParamsFromURL(document.location.href)['gig_regToken'];
            if (gig_regToken) {
                _this.params.regToken = gig_regToken;
            }
            if (_this.params.parentData) {
                _this._isChild = true;
                _this.data = _this.params.parentData;
                delete _this.params.parentData; // remove to prevent circular refrences inside params
            }
            else {
                _this._isChild = false;
                _this.data = new ScreenSetData_1.ScreenSetData(_this.params);
                _this.params.regToken = _this.data.regToken;
            }
            _this.params.isChild = _this._isChild; // make the is child accessible to event listeners
            // parent screenSet should listen to global login/out events
            if (!_this._isChild) {
                _this.registerGlobalEvents();
            }
            if (!_this.params.regSource) {
                _this.params.regSource = utils_1.firstPart(utils_1.firstPart(document.location.href, '?'), '#');
            }
            _this._instanceId = ScreenSetPlugin._calculateInstanceId(_this.params);
            if (success) {
                _this.initContainer();
                _this.initScreens();
            }
            else {
                _this.dispatchErrorFromResponse(translations); // second argument is used as error response in case of failure
                if (_this.container) {
                    _this.container.innerText = 'An error has occurred. Please try again later.';
                }
            }
            callback(success);
        });
    };
    /**
     * There are two ways to provide a screen-set template.
     * 1. Place the screen-set template element on the page with the screen-set ID. In this case, it is assumed CSS and JS are provided.
     * 2. Load screen-set from Gigya servers, which includes CSS and extra JS parameters. After load, the screen-set is cached in a DOM element.
     */
    ScreenSetPlugin.prototype.loadTemplate = function (callback) {
        var _this = this;
        // Check to see if we've already loaded the template.
        if (this.templateElement) {
            callback(true);
            return;
        }
        // Set screen-set ID.
        var screenSetID = (this._ID = this.isMobileUI && this.params.mobileScreenSet ? this.params.mobileScreenSet : this.params.screenSet);
        // Find (create if needed) screen-set template container on the page.
        var screenSetTemplateContainerID = "__gigyaScreenSet_" + screenSetID;
        var screenSetTemplateContainer = document.getElementById(screenSetTemplateContainerID);
        if (!screenSetTemplateContainer) {
            // Check for site-provided screen-set template element on the page. Use instead of loading from Gigya servers.
            // No JavaScript is loaded in this case because the screen-set was provided by the site.
            this.templateElement = document.getElementById(screenSetID);
            // #52641 - Ensure local screen-set template is not loaded from inside a Gigya-created screen-set template container.
            if (this.templateElement &&
                this.templateElement.parentElement &&
                this.templateElement.parentElement.id &&
                this.templateElement.parentElement.id.indexOf('__gigyaScreenSet_') === 0) {
                this.templateElement = undefined;
            }
            if (this.templateElement) {
                callback(true);
                return;
            }
            screenSetTemplateContainer = document.createElement('div');
            screenSetTemplateContainer.id = screenSetTemplateContainerID;
            screenSetTemplateContainer.style.display = 'none';
            window.gigya.utils.DOM.appendToBody(screenSetTemplateContainer);
        }
        var lang = this.getLangForScreenSet();
        // Look within the template for cached screen-set element.
        // It may have been populated by a previous call.
        var screenSetEl = screenSetTemplateContainer.querySelector("div." + exports.ScreenSet_CONSTS.gigyaClass);
        if (screenSetEl) {
            this.templateElement = screenSetEl;
            if (!ScreenSetPlugin.CACHE[screenSetID]) {
                ScreenSetPlugin.CACHE[screenSetID] = {
                    javascript: undefined,
                    translations: {},
                };
            }
            var javascript_1 = ScreenSetPlugin.CACHE[screenSetID].javascript
                ? window.gigya.utils.JSON.deserialize(ScreenSetPlugin.CACHE[screenSetID].javascript)
                : undefined;
            // First, check to see if we've cached translations from the server in the language requested.
            // (don't fallback to root/default lang when trying to get translations from cache)
            var cachedTranslations = window.gigya.pluginUtils.lang.getTranslationsFromContainer(ScreenSetPlugin.CACHE[screenSetID], lang, false);
            if (cachedTranslations) {
                callback(true, cachedTranslations, javascript_1);
            }
            else {
                // We need to fetch translations for this language from the server.
                // This is a rare case that's hit only when the user already loaded the screen-set in one language and now it's being rendered in a different language.
                window.gigya.accounts.getScreenSets(this.params, {
                    lang: lang,
                    include: 'translations',
                    screenSetIDs: screenSetID,
                    callback: this.prepareCallback(function (res) {
                        if (res.errorCode != 0 || !res.screenSets || !res.screenSets.length) {
                            callback(false, res);
                            return;
                        }
                        // Cache translations from server.
                        var oScreenSet = res.screenSets[0];
                        var translations = window.gigya.pluginUtils.lang.getTranslationsFromContainer(oScreenSet, lang) || {};
                        // saving the translations in cache with {{lang}} as the key,
                        // even if the translations are fallback from root/default lang
                        // to enable loading the same screen-set with a different missing lang/variation
                        ScreenSetPlugin.CACHE[screenSetID].translations[lang] = translations;
                        callback(true, translations, javascript_1);
                    }),
                });
            }
        }
        else {
            // Load screen-set from server.
            // NOTE: This can be triggered twice if 2 screen-sets load at the same time.
            window.gigya.accounts.getScreenSets(this.params, {
                lang: lang,
                include: 'html,css,javascript,translations',
                screenSetIDs: screenSetID,
                callback: this.prepareCallback(function (res) {
                    var _a;
                    if (res.errorCode != 0 || !res.screenSets || !res.screenSets.length || !res.screenSets[0].html) {
                        callback(false, res);
                        return;
                    }
                    var serverParams = undefined;
                    var oScreenSet = res.screenSets[0];
                    var translations = window.gigya.pluginUtils.lang.getTranslationsFromContainer(oScreenSet, lang) || {};
                    ScreenSetPlugin.CACHE[screenSetID] = {
                        javascript: oScreenSet.javascript,
                        translations: (_a = {},
                            _a[lang] = translations,
                            _a),
                    };
                    // Check to be sure the screen-set DOM wasn't already created while waiting for response.
                    // It is vital we don't re-render it or IE11 will break. See #47181.
                    if (!screenSetTemplateContainer.innerHTML) {
                        screenSetTemplateContainer.innerHTML = oScreenSet.html;
                    }
                    // For compatibility, storing this for injection AFTER modalDialog's css.
                    _this._loadedScreensetCss = oScreenSet.css;
                    // Set template element.
                    _this.templateElement = screenSetTemplateContainer.querySelector('div');
                    // If JavaScript is present, also store as an attribute on the template container for future screen-set calls.
                    if (oScreenSet.javascript) {
                        serverParams = window.gigya.utils.JSON.deserialize(oScreenSet.javascript);
                    }
                    callback(true, translations, serverParams);
                }),
            });
        }
    };
    ScreenSetPlugin.prototype.injectScreenSetCSS = function () {
        if (!this._addedCSS) {
            if (this._style != PluginStyles_1.PluginStyle.none) {
                var css = window.gigya.utils.templates.fill(this.getCss().defaultCSS, { imgBase: this._imgBase });
                window.gigya._.plugins.utils.css.addCss(css, this.params.cssPrefix, false);
            }
            if (this._loadedScreensetCss) {
                window.gigya._.plugins.utils.css.addCss(this._loadedScreensetCss);
                delete this._loadedScreensetCss;
            }
            this._addedCSS = true;
        }
    };
    /// Override from BasePlugin.
    ScreenSetPlugin.prototype.initContainer = function () {
        // BasePlugin's initContainer method is invoked in its sync run process,
        // but here we want to initialize the container [in page or modal] only after the template async load is completed [needed for getPluginStyle method].
        if (this.templateElement) {
            var isModalLegacy = this.isModal && this.getPluginStyle() == PluginStyles_1.PluginStyle.legacy;
            // pre-init container
            this.config.defaultModalParams.dimDialogBackground = !isModalLegacy;
            _super.prototype.initContainer.call(this);
            // post-init container
            if (isModalLegacy) {
                this.config.enableViewportPolling = false;
                this._modalDialog.getModalDialogContainer().setAttribute('gigid', this.config.methodName);
            }
        }
        // Basic sync in-page initializing. --legacy
        else if (!this.isModal) {
            window.gigya.utils.DOM.setSize(this.container, this.params.width, this.params.height, false);
            if (this.params.responsive)
                this.container.style.width = 'auto';
            this._loadingIndicator = new window.gigya._.plugins.LoadDimmer(this.container);
        }
    };
    ScreenSetPlugin.prototype.initScreens = function () {
        var _this = this;
        this.isResponsive = this.templateElement.getAttribute(exports.ScreenSet_CONSTS.isResponsive) == 'true';
        this.screenOptions = new ScreenOptions_1.ScreenOptions(this.templateElement);
        window.gigya.logger.info("screenset screens:", this.screenOptions);
        this.injectScreenSetCSS();
        if (!this._isChild) {
            // Child screenSet does not need to listen, parent already listens
            this.addGlobalEventHandler('onLogin', function () {
                _this.data.finalizeRegistrationNeeded = false;
            });
        }
        this.prepareScreenSetContainer();
        this.prepareScreens();
        this._startScreen =
            this.params.startScreen || // parameters
                this.templateElement.getAttribute(ScreenSetPlugin.CONSTS.startScreen) || // screen set definition
                this._startScreen; // first screen that was set when screens where parsed
        if (this.isMobileUI && this.isModal) {
            window.scrollTo(0, 0);
        }
        if (this.params.initialResponse) {
            if (!this.params.initialResponse.operation && this.params.initialMethod) {
                this.params.initialResponse.operation = "/" + this.params.initialMethod;
            }
            this.onScreenResponse(this.params.initialResponse, {
                ID: this._ID,
                bindID: this._ID,
                _screen: this._screens[this._startScreen],
                _screenSet: this,
            });
        }
        else {
            this.switchScreen(this._startScreen, this.params.formContext);
        }
    };
    /// Overriding BasePlugin's
    ScreenSetPlugin.prototype.getPluginStyle = function () {
        /// priority: params > screenset template attr > config
        /// if template hasn't loaded yet - return undefined style.
        return (PluginStyles_1.PluginStyle[this.params.dialogStyle] ||
            (this.templateElement && (PluginStyles_1.PluginStyle[this.templateElement.getAttribute(exports.ScreenSet_CONSTS.dialogStyle)] || this.getConfig().defaultDialogStyle)) ||
            PluginStyles_1.PluginStyle._undefined);
    };
    ScreenSetPlugin.prototype.prepareScreenSetContainer = function () {
        var containerID = this.containerID;
        var template;
        if (this.isModal) {
            template = this.getTemplates().screenSet_dialog;
        }
        else {
            template = this.getTemplates().screenSet;
        }
        var innerContainerID = containerID + '_content';
        var childContainerID = containerID + '_child';
        this.container.insertAdjacentHTML('beforeend', window.gigya.utils.templates.fill(template, {
            innerContainerID: innerContainerID,
            childContainerID: childContainerID,
        }));
        /// TODO: for ie8 support, need to be async in order to get elements that were added by the above.
        if (!this._captionElement) {
            var captionId;
            // Child screenset takes over parent's caption.
            if (this._isChild) {
                document.getElementById(innerContainerID + '_caption').style.display = 'none';
                captionId = this.container.parentElement.id + '_content_caption';
            }
            else {
                captionId = innerContainerID + '_caption';
            }
            this._captionElement = document.getElementById(captionId);
        }
        this._elContainer = document.getElementById(innerContainerID);
        if (this.isModal && this._style == PluginStyles_1.PluginStyle.legacy)
            window.gigya.utils.DOM.addClassToElement(this._elContainer, exports.ScreenSet_CONSTS.contentClass);
        // Add class with current locale.
        // This is used by CSS in the default screen-sets for RTL languages.
        window.gigya.utils.DOM.addClassToElement(this._elContainer, "gigya-locale-" + window.gigya.thisScript.lang.langCode);
        this._elChildContainer = document.getElementById(childContainerID);
    };
    ScreenSetPlugin.prototype.getApiData = function () {
        return this.data.apiData;
    };
    ScreenSetPlugin.prototype.getProfile = function () {
        var apiData = this.getApiData();
        var profile = apiData && apiData.getAccountInfo && apiData.getAccountInfo.profile;
        return profile || {};
    };
    ScreenSetPlugin.prototype.getSchemaData = function () {
        var apiData = this.getApiData();
        var data = apiData && apiData.getAccountInfo && apiData.getAccountInfo.data;
        return data || {};
    };
    ScreenSetPlugin.prototype.getSubScriptions = function () {
        var apiData = this.getApiData();
        var subscriptions = apiData && apiData.getAccountInfo && apiData.getAccountInfo.subscriptions;
        return subscriptions || {};
    };
    ScreenSetPlugin.prototype.getPreferences = function () {
        var apiData = this.getApiData();
        var preferences = apiData && apiData.getAccountInfo && apiData.getAccountInfo.preferences;
        return preferences || {};
    };
    ScreenSetPlugin.prototype.removeRegToken = function () {
        this.data.regToken = this.params.regToken = null;
    };
    ScreenSetPlugin.prototype.establishRegToken = function (regToken) {
        this.params.regToken = this.data.regToken = regToken;
    };
    // TODO perhaps the form could also be the widget that originated the screenSet request (like anchor widget or the TFA widget)
    ScreenSetPlugin.prototype.onScreenResponse = function (response, form, afterFinalizeRegistration) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var nextScreen, originalAfterSubmitHandler, fnOnInfoUpdated_1, apiData, errorForm;
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!form)
                            form = {};
                        this.data.lastSubmittedFormID = form.ID;
                        this.data.lastSubmittedFormResponse = response;
                        nextScreen = form.successScreen;
                        if (response.response)
                            response = response.response;
                        if (response.autoSkip)
                            // autoSkip is being set on the checkAutoSkip and sent back here in a dummy response
                            nextScreen = form.autoSkipScreen;
                        if (CloseReasons_1.CloseReasons[response.childScreenSetCloseReason] === CloseReasons_1.CloseReasons.skip)
                            nextScreen = form.screenSetSkippedScreen;
                        if (nextScreen === '_finish') {
                            // Resetting 'nextScreen' to be undefined in order to prevent side effects such as 'onAfterSubmit' event being fired twice (#69819)
                            // This is because UI-Builder inconsistently sets the next-screen value to '_finish'/undefined
                            nextScreen = undefined;
                        }
                        if (response.regToken) {
                            this.establishRegToken(response.regToken);
                        }
                        this.onAccountInfo(response); //will update the profile/data cache from the response
                        if (afterFinalizeRegistration || (this.data.lastSubmittedFormID && (nextScreen || !this.endFlowIsPending()))) {
                            originalAfterSubmitHandler = this.params.onAfterSubmit;
                            fnOnInfoUpdated_1 = function (response) {
                                var submitResponse = _this.unwrapResponse(response);
                                var afterSubmitEvent = {
                                    eventName: 'afterSubmit',
                                    screen: form._screen.ID,
                                    form: form.bindID,
                                    profile: _this.getProfile(),
                                    data: _this.getSchemaData(),
                                    preferences: _this.getPreferences(),
                                    subscriptions: _this.getSubScriptions(),
                                    response: submitResponse,
                                };
                                if (!_this.params.onAfterSubmit)
                                    _this.params.onAfterSubmit = originalAfterSubmitHandler;
                                _this.dispatchPluginEvent(afterSubmitEvent.eventName, afterSubmitEvent);
                            };
                            if (form instanceof NewsletterSignupForm_1.NewsletterSignupForm) {
                                fnOnInfoUpdated_1(response);
                            }
                            // Need to get the updated info since setAccountInfo updated it.
                            else if (response.operation === '/accounts.setAccountInfo' && response.errorCode == GSErrors_1.GSErrors.OK && (!response.profile || !response.data)) {
                                this.updateAccountInfo(function (accountInfoResponse) { return fnOnInfoUpdated_1(accountInfoResponse); });
                            }
                            // If missing info
                            else if (this.isAccountInfoRequired(response.operation) &&
                                (!this.getApiData().getAccountInfo || !this.getApiData().getAccountInfo.profile || !this.getApiData().getAccountInfo.data)) {
                                this.updateAccountInfo(function (accountInfoResponse) { return fnOnInfoUpdated_1(response); });
                            }
                            else {
                                fnOnInfoUpdated_1(response);
                            }
                        }
                        if (!(response.errorCode == GSErrors_1.GSErrors.OK)) return [3 /*break*/, 1];
                        apiData = this.getApiData();
                        if (response.operation == '/accounts.register' && apiData.initRegistration) {
                            // a successful call to accounts.register revokes the previous initRegistration response so that a new regToken will be generated for other register forms
                            window.gigya.logger.info("clearing screenset initRegistration cache (regToken)");
                            delete apiData.initRegistration;
                        }
                        this._currentScreen && this._currentScreen.hideErrors();
                        if (nextScreen && (!this._currentScreen || nextScreen != this._currentScreen.ID)) {
                            this.switchScreen(nextScreen, response, form);
                        }
                        else if (!nextScreen) {
                            window.gigya.logger.info("no next screen so...");
                            this.params.remember = this.data.extraEventData.rememberMe;
                            this.endFlow(response, form, CloseReasons_1.CloseReasons.finished);
                        }
                        return [3 /*break*/, 3];
                    case 1: return [4 /*yield*/, this.handlePendingErrors(response, form)];
                    case 2:
                        // Response indicate an error
                        if (_a.sent()) {
                            return [2 /*return*/];
                        }
                        errorForm = form instanceof BaseForm_1.BaseForm ? form : form.getErrorDisplayForm ? form.getErrorDisplayForm() : undefined;
                        if (errorForm) {
                            this.displayServerErrors(response, errorForm);
                        }
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    ScreenSetPlugin.prototype.isAccountInfoRequired = function (method) {
        return ([
            // method that DON'T require account info
            '/accounts.resetPassword',
            '/accounts.resendVerificationCode',
            '/accounts.tfa.initTFA',
        ].indexOf(method) == -1);
    };
    ScreenSetPlugin.prototype.unwrapResponse = function (response) {
        var submitResponse;
        if (response.event && response.event.response) {
            // unwrap social login response
            submitResponse = response.event.response;
        }
        else {
            submitResponse = response;
        }
        return window.gigya.utils.object.clone(submitResponse);
    };
    /// TODO: move to BasePlugin?
    ScreenSetPlugin.prototype.displayServerErrors = function (response, form) {
        var _this = this;
        if (response.secretQuestion) {
            utils_1.ForEach(form._secretQuestions, function (secretQuestionWidget) { return secretQuestionWidget.setQuestion(response.secretQuestion); });
        }
        else {
            // TODO why else - can't an error be indicated along with the need for secret question? (validation error for example)
            var errorKey = form.getErrorKey(response);
            if (errorKey) {
                response.errorMessage = this.getText(errorKey);
            }
            var errorDetails;
            switch (response.errorDetailsCode // TODO Why this is not dependant on a specific main error code?
            ) {
                case GSErrors_1.GSErrorDetails.Same_password:
                    errorDetails = this.getText('old_password_cannot_be_the_same_as_new_password');
                    break;
                case GSErrors_1.GSErrorDetails.Invalid_password:
                    errorDetails = this.getText('wrong_password');
                    break;
            }
            this.error(response.errorMessage, response.errorCode, {
                screen: form._screen.ID,
                form: form.ID,
                response: window.gigya.utils.object.clone(this.data.lastSubmittedFormResponse),
            });
            // error when no screen is loaded - prerequisites where not met
            if (!this._currentScreen) {
                this.hide(CloseReasons_1.CloseReasons[CloseReasons_1.CloseReasons.error]);
                return;
            }
            window.gigya.logger.info("reloading captchas");
            utils_1.ForEach(this._currentScreen._captchas, function (c) { return c.reload(); });
            var serverError = {
                errorCode: response.errorCode,
                errorMessage: response.customMessage || errorDetails || response.errorMessage,
                errorFlags: response.errorFlags,
            };
            var arFormErrors = new Array();
            if (response.validationErrors) {
                window.gigya.logger.group("screenset validation errors").endWhen(function () {
                    utils_1.ForEach(response.validationErrors, function (error, i) {
                        var field = form.getField(error.fieldName);
                        if (!field) {
                            var fieldNamespace = utils_1.firstPart(error.fieldName, '.');
                            if (fieldNamespace === 'profile')
                                field = form.getField(error.fieldName.replace('profile.', ''));
                        }
                        if (field) {
                            if (i === 0 && field.instanceElement)
                                // first validation error
                                field.instanceElement.focus();
                            var validationError = window.gigya.utils.object.clone(error); // TODO remove the clone
                            arFormErrors.push(validationError);
                            if (form.showFieldError(field, error.errorCode, true, error.customMessage))
                                error.handled = true;
                        }
                        else {
                            // server reported error with no matching field
                            if (error.fieldName === 'captchaText') {
                                _this.warn('Captcha is required but captcha widget is missing from the submitted form');
                            }
                            else {
                                _this.warn(error.fieldName + ' is mandatory/invalid but its field is missing from the submitted form');
                            }
                        }
                    });
                });
            }
            arFormErrors.push(serverError);
            form.showErrors([serverError], true);
            form.showErrors(arFormErrors, false);
            form.onAfterValidation();
        }
    };
    ScreenSetPlugin.prototype.prepareScreens = function () {
        var _this = this;
        var screenElements = this.templateElement.querySelectorAll("." + ScreenConsts_1.Screen_CONSTS.gigyaClass);
        var firstScreen = true;
        utils_1.ForEach(screenElements, function (screenElement, i) {
            var screen = new Screen_1.Screen(_this, screenElement);
            _this._screens[screen.ID] = screen;
            if (firstScreen) {
                firstScreen = false;
                _this._startScreen = screen.ID;
            }
        });
    };
    //called when modal dialog is close to unlink widgets in screen
    ScreenSetPlugin.prototype.close = function () {
        this.cancel();
    };
    ScreenSetPlugin.prototype.cancel = function () {
        this.hide(CloseReasons_1.CloseReasons[CloseReasons_1.CloseReasons.canceled], null, true);
    };
    ScreenSetPlugin.prototype.hide = function (reason, response, alwaysClearContainer) {
        this.undimScreenSet();
        if (this.isModal && this._currentScreen) {
            this._currentScreen.unlinkInstanceElement();
            this._currentScreen = null;
        }
        if (alwaysClearContainer)
            this.container.innerHTML = '';
        _super.prototype.close.call(this, reason, window.gigya.utils.object.removeUndefined({
            user: response && response.user,
        }));
    };
    ScreenSetPlugin.prototype.dispose = function () {
        if (this._isDisposed) {
            return;
        }
        if (this._child) {
            this._child.hide(CloseReasons_1.CloseReasons[CloseReasons_1.CloseReasons.canceledByParent]);
            this._child.dispose();
            this._child = null;
        }
        utils_1.ForEachProp(this._screens, function (s) { return s.unlinkTemplate(); });
        if (!this._child) {
            this.unregisterGlobalEvents();
        }
        _super.prototype.dispose.call(this);
    };
    ScreenSetPlugin.prototype.registerGlobalEvents = function () {
        this.addGlobalEventHandlers({
            onLogin: this.onUserStateChange,
            onLogout: this.onUserStateChange,
        });
    };
    ScreenSetPlugin.prototype.unregisterGlobalEvents = function () {
        this.removeGlobalEventHandlers({
            onLogin: this.onUserStateChange,
            onLogout: this.onUserStateChange,
        });
    };
    /// TODO: move to BasePlugin?
    ScreenSetPlugin.prototype.getErrorMessage = function (errorCode, isBoundToField, fieldName, fieldDisplayName) {
        if (errorCode == GSErrors_1.GSErrors.OK)
            return '';
        switch (errorCode) {
            case GSErrors_1.GSErrors.REQUIRED_VALUE_VALIDATION_ERROR:
                return this.getRequiredValueValidationErrorMessage(isBoundToField, fieldDisplayName);
            case GSErrors_1.GSErrors.UNIQUE_IDENTIFIER_EXISTS:
                return this.getUniqueIdentifierValidationErrorMessage(fieldName);
            case GSErrors_1.GSErrors.NETWORK_ERROR:
                return this.getText('network_error');
            case GSErrors_1.GSErrors.VALIDATION_ERROR:
            default:
                return this.getValidationErrorMessage(fieldName, fieldDisplayName);
        }
    };
    ScreenSetPlugin.prototype.getRequiredValueValidationErrorMessage = function (isBoundToField, fieldDisplayName) {
        if (isBoundToField) {
            // #49968 - Replace %fieldname even though the defaults don't use it to support %fieldname in customLang.
            return this.getText('this_field_is_required', '%fieldname', fieldDisplayName);
        }
        return this.getText('please_enter_fieldname', '%fieldname', fieldDisplayName);
    };
    ScreenSetPlugin.prototype.getUniqueIdentifierValidationErrorMessage = function (fieldName) {
        switch (fieldName) {
            case 'username':
                return this.getText('username_already_exists');
            case 'email':
                return this.getText('email_already_exists');
        }
        return '';
    };
    ScreenSetPlugin.prototype.getValidationErrorMessage = function (fieldName, fieldDisplayName) {
        switch (fieldName) {
            case 'email':
                return this.getText('email_address_is_invalid');
            case 'password':
            case 'newPassword':
                return this.getText('password_does_not_meet_complexity_requirements');
            case 'passwordRetype':
                return this.getText('passwords_do_not_match');
            case 'loginID':
                return this.getText('invalid_login_or_password');
            default:
                return this.getText('invalid_fieldname', '%fieldname', fieldDisplayName);
        }
    };
    ScreenSetPlugin.prototype.updateAccountInfo = function (fnCallback) {
        var _this = this;
        window.gigya.accounts.getAccountInfo(this.params, {
            include: 'profile,data',
            callback: function (response) {
                _this.onAccountInfo(response);
                fnCallback(response);
            },
        });
    };
    ScreenSetPlugin.prototype.onAccountInfo = function (response) {
        var accountInfo = response.accountInfo || response;
        var apiData = this.getApiData();
        if (!apiData.getAccountInfo) {
            apiData.getAccountInfo = {};
        }
        utils_1.ForEach(['profile', 'data', 'emails', 'loginIDs'], function (prop) {
            if (accountInfo[prop]) {
                apiData.getAccountInfo[prop] = window.gigya.utils.object.merge([apiData.getAccountInfo[prop] || {}, accountInfo[prop]]);
                window.gigya.logger.info("screenset accountInfo." + prop + " cache updated:", apiData.getAccountInfo[prop]);
            }
        });
        // Ensure any conditions that rely on account info are updated.
        if (this._currentScreen) {
            this._currentScreen.evaluateConditionalAttributes();
        }
    };
    ScreenSetPlugin.prototype.onApiData = function (response, formContext) {
        window.gigya.logger.debug("updating screenset cache of " + response.operation);
        var apiData = this.getApiData();
        var apiMethodKey = this.getApiMethodFromFullNamespace(response.operation);
        if (response.operation.indexOf('getProviders') > -1) {
            apiData[apiMethodKey] = { activeProviders: this.getEditableTfaProvider(response.activeProviders) };
        }
        else {
            apiData[apiMethodKey] = response;
        }
        if (response.regToken) {
            window.gigya.logger.info("updating screenset regToken");
            this.establishRegToken(response.regToken);
        }
        var gotAllNeededData = true;
        for (var methodName in this.data.neededData) {
            if (!apiData[methodName]) {
                gotAllNeededData = false;
                break;
            }
        }
        if (gotAllNeededData) {
            window.gigya.logger.info("got all required data");
            this.loadNextScreen(formContext);
        }
    };
    ScreenSetPlugin.prototype.chooseNextScreen = function (nextScreenValue) {
        if (!nextScreenValue)
            return;
        var possibleScreens = nextScreenValue.split(',');
        // Weighted screen possibilities
        var weightSum = 0;
        var weightedParts = [];
        utils_1.ForEach(possibleScreens, function (screen) {
            var parts = screen.split(':');
            var weight = parts.length > 1 ? parseInt(parts[1]) : 1;
            weightSum += weight;
            weightedParts.push({
                screen: parts[0],
                weight: weight,
            });
        });
        var random = this._random * weightSum;
        var selectedScreen;
        utils_1.Some(weightedParts, function (w) {
            random -= w.weight;
            if (random > 0)
                return false;
            selectedScreen = w.screen;
            return true;
        });
        return selectedScreen;
    };
    ScreenSetPlugin.prototype.getEditableTfaProvider = function (activeProviders) {
        if (activeProviders === void 0) { activeProviders = []; }
        var editableProviders = [];
        for (var i = 0; i < activeProviders.length - 0; i++) {
            var isEditable = this.isTfaProviderEditable(activeProviders[i].name);
            if (isEditable) {
                editableProviders.push(activeProviders[i].name);
            }
        }
        return editableProviders;
    };
    ScreenSetPlugin.prototype.isTfaProviderEditable = function (providerToCheck) {
        // go over the list of editable providers
        return constants_1.EditableTfaProvidersTypes[providerToCheck] != undefined;
    };
    ScreenSetPlugin.prototype.getApiMethodFromFullNamespace = function (operation) {
        var apiUrlSegments = operation.split('.');
        return apiUrlSegments[apiUrlSegments.length - 1];
    };
    ScreenSetPlugin.prototype.switchToChildScreenSet = function (screenSetName, screenID, form) {
        var _this = this;
        window.gigya.logger.info("opening child screenset: " + screenSetName + "/" + screenID);
        var hideChildHandler = function (e) {
            _this.params.regToken = _this.data.regToken;
            switch (CloseReasons_1.CloseReasons[e.reason]) {
                case CloseReasons_1.CloseReasons.canceledByParent:
                    break;
                case CloseReasons_1.CloseReasons.error:
                case CloseReasons_1.CloseReasons.canceled:
                    _this.hide(e.reason);
                    break;
                case CloseReasons_1.CloseReasons.pendingError:
                    _this.onScreenResponse(_this.data.lastSubmittedFormResponse, form, false);
                    break;
                case CloseReasons_1.CloseReasons.finished:
                case CloseReasons_1.CloseReasons.skip:
                case CloseReasons_1.CloseReasons.missing:
                default:
                    // Any arbitrary reason will be treated as finished flow
                    _this.onScreenResponse({
                        errorCode: GSErrors_1.GSErrors.OK,
                        childScreenSetCloseReason: e.reason,
                        user: e.user,
                    }, form, false);
                    break;
            }
        };
        var onError = function (e) {
            if (_this.params.onError)
                _this.params.onError(e);
            _this.hide(CloseReasons_1.CloseReasons[CloseReasons_1.CloseReasons.error]);
        };
        var childParams = {
            screenSet: screenSetName,
            lang: this.getLangForScreenSet(),
            customLang: this.params.customLang,
            width: this.params.width,
            height: this.params.height,
            context: this.params.context,
            cid: this.params.cid,
            regSource: this.params.regSource,
            regToken: this.params.regToken,
            onError: this.params.onError,
            onBeforeSubmit: this.params.onBeforeSubmit,
            onAfterSubmit: this.params.onAfterSubmit,
            onBeforeScreenLoad: this.params.onBeforeScreenLoad,
            onAfterScreenLoad: this.params.onAfterScreenLoad,
            onFieldChanged: this.params.onFieldChanged,
            ignoreApiQueue: this.params.ignoreApiQueue,
            onHide: hideChildHandler,
            parentData: this.data,
            getInstance: function (child) {
                _this._child = child;
            },
            _allowMultipleInstances: true,
        };
        if (screenID)
            childParams.startScreen = screenID;
        this.hideScreenSetContainer();
        if (this.isModal) {
            childParams.newModal = true;
        }
        else {
            childParams.containerID = this._elChildContainer.id;
        }
        window.gigya[ScreenSetPlugin_CONSTS.namespace][ScreenSetPlugin_CONSTS.showScreenSetName](childParams);
        return true;
    };
    // Returns whether screen was switched
    ScreenSetPlugin.prototype.switchScreen = function (screenID, response, oForm) {
        var screenParts = screenID.split('/');
        var screenSetName;
        if (screenParts.length > 1)
            screenSetName = screenParts.shift();
        screenID = screenParts.join('/');
        // if you request the same screen set - just work within the current screenSet
        if (screenSetName === this.params.screenSet) {
            screenSetName = null;
            if (!screenID) {
                this.warn('Attempt to open screen-set "' + screenSetName + '" from within the same screen-set, without specifing screen to move to.');
                return false;
            }
        }
        if (screenSetName)
            return this.switchToChildScreenSet(screenSetName, screenID, oForm);
        return this.switchToLocalScreen(screenID, response, oForm);
    };
    ScreenSetPlugin.prototype.switchToLocalScreen = function (screenID, response, oForm) {
        var _this = this;
        if (exports.EndFlowScreens[screenID]) {
            this.endFlow(response, oForm, exports.EndFlowScreens[screenID]);
            return true;
        }
        if (screenID === ScreenSetPlugin_CONSTS.stayOnScreen) {
            return true;
        }
        if (this._currentScreen && this._currentScreen.ID === screenID)
            // nothing to do already on the screen
            return false;
        window.gigya.logger.info("switching to screen: " + screenID);
        this._nextScreen = this._screens[screenID];
        if (!this._nextScreen) {
            this.warn('Missing screen "' + screenID + '"');
            this.hide(CloseReasons_1.CloseReasons[CloseReasons_1.CloseReasons.missing]);
            return false;
        }
        if (this.data.finalizeRegistrationNeeded && !this._nextScreen.haveForms()) {
            // TODO: Why not allow a screen that contains only an ad and screen links?
            this.endFlow(response, oForm, CloseReasons_1.CloseReasons.finished);
        }
        if (!this._currentScreen)
            this.setNextScreenSize(); // draw an empty screen with a progress
        var shouldWaitForData = false;
        var extraProfileFields = this._nextScreen.getExtraProfileFields(false).join(',');
        var formContext = response;
        this.data.neededData = this._nextScreen.getNeededData(formContext);
        var apiData = this.getApiData();
        var callback = this.prepareCallback(function (res) { return _this.onApiData(res, formContext); });
        window.gigya.logger.info("required data for the screen:", this.data.neededData);
        utils_1.ForEachProp(this.data.neededData, function (methodInfo, methodName) {
            var disableCache = window.gigya.utils.validation.isExplicitFalse(methodInfo.cache);
            if (disableCache && apiData)
                delete apiData[methodName];
            if (!apiData[methodName] || (methodName === 'getAccountInfo' && extraProfileFields !== '')) {
                if (apiData[methodName])
                    delete apiData[methodName];
                _this.dimScreenSet();
                shouldWaitForData = true;
                var extraParams = { callback: callback };
                if (methodInfo.responseHandler)
                    // If method has a specific response handler, go through it before passing the data to the screenSet
                    extraParams.callback = function (res) { return _this.onApiData(methodInfo.responseHandler(res), formContext); };
                if (methodName === 'getAccountInfo') {
                    if (extraProfileFields) {
                        extraParams['extraProfileFields'] = extraProfileFields;
                    }
                }
                var method = window.gigya.utils.object.expressionHelper(window.gigya.accounts).getField(methodName)
                    || window.gigya.socialize[methodName] || window.gigya.accounts.tfa[methodName] || window.gigya.accounts.b2b[methodName];
                var methodParams = window.gigya.utils.object.removeUndefined(methodInfo.params);
                if (methodParams && methodParams['include'] && _this.params) {
                    methodParams['include'] =
                        window.gigya.utils.stringUtils.mergeCommaSeparatedValues(methodParams['include'], _this.params['include']);
                }
                method(_this.params, methodParams, extraParams);
            }
        });
        if (shouldWaitForData) {
            window.gigya.logger.info("waiting for required data");
        }
        else {
            this.loadNextScreen(formContext);
        }
        return true;
    };
    ScreenSetPlugin.prototype.shouldClose = function () {
        return this.isModal;
    };
    ScreenSetPlugin.prototype.loadNextScreen = function (formContext) {
        var _this = this;
        var screenID = this._nextScreen.ID;
        var logger = window.gigya.logger.group("loading screen " + screenID);
        var beforeLoadEvent = window.gigya.utils.object.removeUndefined({
            eventName: 'beforeScreenLoad',
            currentScreen: this._currentScreen && this._currentScreen.ID,
            form: this.data.lastSubmittedFormID,
            response: window.gigya.utils.object.clone(this.data.lastSubmittedFormResponse),
            profile: this.getProfile(),
            data: this.getSchemaData(),
            subscriptions: this.getSubScriptions(),
            preferences: this.getPreferences(),
            nextScreen: screenID,
            schema: this.getApiData().getSchema,
        });
        var eventResult = this.dispatchPluginEvent(beforeLoadEvent.eventName, beforeLoadEvent);
        this.undimScreenSet();
        if (!eventResult)
            return;
        this.setNextScreenSize(this._nextScreen);
        this._elContainer.innerHTML = '';
        if (this._currentScreen) {
            window.gigya.logger.debug("unlinking current screen: " + this._currentScreen.ID);
            this._currentScreen.unlinkInstanceElement();
            this._currentScreen = null;
        }
        var tempElContainer = this.prepareNextScreen();
        this._nextScreen.performAutoSkip(formContext).then(function (skippedForm) {
            if (skippedForm) {
                window.gigya.logger.info("auto skipping screen: " + _this._nextScreen.ID);
                _this._nextScreen.undimScreen();
                _this._nextScreen.unlinkInstanceElement();
                var response = { errorCode: GSErrors_1.GSErrors.OK, autoSkip: true };
                _this._screenSet.onScreenResponse(response, skippedForm); // Behaves as if the first form was submitted (if there is one)
                return;
            }
            tempElContainer.style.display = '';
            if (_this._elContainer && _this._elContainer.parentNode) {
                _this._elContainer.parentNode.removeChild(_this._elContainer);
            }
            _this.container.appendChild(tempElContainer);
            _this._elContainer = tempElContainer;
            _this._currentScreen = _this._nextScreen;
            _this._nextScreen = null;
            _this._currentScreen.resetLastConditionalValues();
            _this._currentScreen.evaluateConditionalAttributes();
            var screenWidth = _this._currentScreen.instanceElement ? _this._currentScreen.instanceElement.offsetWidth + 'px' : '';
            _this.setCaption(_this._currentScreen.caption, screenWidth);
            _this.showScreenSetContainer();
            var afterLoadEvent = window.gigya.utils.object.removeUndefined({
                eventName: 'afterScreenLoad',
                currentScreen: screenID,
                form: _this.data.lastSubmittedFormID,
                response: window.gigya.utils.object.clone(_this.data.lastSubmittedFormResponse),
                profile: _this.getProfile(),
                preferences: _this._screenSet.getPreferences(),
                data: _this.getSchemaData(),
            });
            _this.dispatchPluginEvent(afterLoadEvent.eventName, afterLoadEvent);
            logger.end();
        });
    };
    ScreenSetPlugin.prototype.prepareNextScreen = function () {
        window.gigya.logger.info("preparing next screen: " + this._nextScreen.ID);
        var elScreen = document.createElement('div'), elContainer = document.createElement('div');
        utils_1.ForEach(this._elContainer.attributes, function (a) { return elContainer.setAttribute(a.name, a.value); });
        elContainer.appendChild(elScreen);
        document.body.appendChild(elContainer);
        this._nextScreen.placeContentInElement(elScreen);
        TemplateElement_1.TemplateElement.prepareTemplateInstances(elContainer);
        this._nextScreen.linkInstanceElement(elContainer);
        elContainer.style.display = 'none';
        return elContainer;
    };
    ScreenSetPlugin.prototype.setCaption = function (caption, width) {
        // Do not attempt to set caption if there is no element.
        // Do not attempt to set caption if we are not in a modal and there is a child screen-set (child will control caption).
        if (!this._captionElement || (!this.isModal && this._child)) {
            return;
        }
        if (!caption) {
            // TODO why this behavior? why if it is empty and on mobile to set content with hidden style?
            if (!this.isModal)
                this._captionElement.style.display = 'none';
        }
        else {
            this._captionElement.style.display = '';
        }
        this._captionElement.innerHTML = caption || '&nbsp;';
        if (!this.isModal && !this.isMobileUI && width !== undefined) {
            this._captionElement.style.width = width;
        }
    };
    ScreenSetPlugin.prototype.setNextScreenSize = function (nextScreen) {
        this._elContainer.style.display = '';
        var w;
        var h;
        if (nextScreen) {
            w = nextScreen.width;
            h = nextScreen.height;
            if (!w || !h) {
                var elTempScreen = document.createElement('div');
                nextScreen.placeContentInElement(elTempScreen);
                window.gigya.utils.DOM.addClassToElement(elTempScreen, exports.ScreenSet_CONSTS.calculateSizeClass);
                window.gigya.utils.DOM.setSize(elTempScreen, w, h);
                this.container.appendChild(elTempScreen);
                var bnp = window.gigya.global.getBordersAndPaddings(elTempScreen);
                if (!w)
                    w = String(elTempScreen.offsetWidth + Math.ceil(bnp.w) + 30);
                if (!h)
                    h = String(elTempScreen.offsetHeight + 1);
                elTempScreen.parentNode.removeChild(elTempScreen);
            }
        }
        if (w) {
            if (!this.isMobileUI && (this.isModal || !this.isResponsive)) {
                // do not set width in % units for legacy.
                if (this.getPluginStyle() != PluginStyles_1.PluginStyle.legacy || utils_1.getUnitMeasurementType(w) != utils_1.UnitMeasurementType.percentage) {
                    window.gigya.utils.DOM.setSize(this._elContainer, w, undefined);
                }
            }
            else {
                var maxWidth = w == 'auto' ? 'none' : '' + (('' + w).indexOf('%') > 0 ? w : w + 'px');
                this._elContainer.style.maxWidth = maxWidth;
                if (window.gigya.localInfo.isIE7 || window.gigya.localInfo.isIE8 || (window.gigya.localInfo.isIE && window.gigya.localInfo.quirksMode))
                    this._elContainer.style['_width'] = maxWidth; // Fix for old IE that does not recognize maxWidth
            }
        }
        if (this.isModal && !this.isMobileUI) {
            //if (h) {
            //    this._elContainer.style.minHeight = h + 'px';
            //    if (gigya.localInfo.isIE7 || gigya.localInfo.isIE8 || (gigya.localInfo.isIE && gigya.localInfo.quirksMode))
            //        this._elContainer.style['_height'] = h + 'px'; // Workaround for old IE that does not support minHeight
            //}
        }
    };
    ScreenSetPlugin.prototype.shouldFinalizeFlow = function (reason) {
        return !this._isChild && this.endFlowIsPending() && reason !== CloseReasons_1.CloseReasons.cancel;
    };
    ScreenSetPlugin.prototype.doesScreenHaveForms = function (screenId) {
        return screenId && this._screens[screenId] && this._screens[screenId].haveForms();
    };
    ScreenSetPlugin.prototype.dimScreenSet = function () {
        this._loadingIndicator && this._loadingIndicator.show();
    };
    ScreenSetPlugin.prototype.undimScreenSet = function () {
        this._loadingIndicator && this._loadingIndicator.hide();
    };
    ScreenSetPlugin.prototype.handlePendingErrors = function (response, oForm) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var errorInfo, nextScreen;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        errorInfo = Errors_1.PendingErrorAttributes[response.errorCode] || {};
                        window.gigya.logger.info("screenset routing error code " + response.errorCode + " --> " + errorInfo.name);
                        if (!errorInfo.nextScreen) return [3 /*break*/, 2];
                        return [4 /*yield*/, errorInfo.nextScreen(oForm)];
                    case 1:
                        nextScreen = _a.sent();
                        _a.label = 2;
                    case 2:
                        if (nextScreen) {
                            if (errorInfo.requiresFinalize) {
                                this.data.finalizeRegistrationNeeded = true;
                            }
                            else if (errorInfo.resetFinalizeNeededState) {
                                this.data.finalizeRegistrationNeeded = false;
                            }
                            // TODO add a warning that the pending screen does not have a form and can not deal with the pending issue
                            return [2 /*return*/, this.switchScreen(nextScreen, response, oForm)];
                        }
                        else {
                            if (this._isChild)
                                // allow parent to handle pending error
                                this.hide(CloseReasons_1.CloseReasons[CloseReasons_1.CloseReasons.pendingError], response);
                            // this is the parent
                            else
                                window.gigya.logger.warn("Missing ScreenSet attribute " + errorInfo.name + " for pending error: " + response.errorCode);
                            return [2 /*return*/, false];
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    ScreenSetPlugin.prototype.endFlowIsPending = function () {
        return this.data.finalizeRegistrationNeeded && this.data.regToken;
    };
    ScreenSetPlugin.prototype.endFlow = function (res, oForm, reason) {
        var _this = this;
        window.gigya.logger.info("ending screenset flow");
        if (reason === CloseReasons_1.CloseReasons.skip) {
            if (oForm && oForm.onSkipped) {
                oForm.onSkipped(res);
            }
        }
        if (this.shouldFinalizeFlow(reason)) {
            if (typeof this.data.extraEventData.allowAccountsLinking !== 'undefined')
                this.params.allowAccountsLinking = this.data.extraEventData.allowAccountsLinking;
            var regToken_1 = this.data.regToken || this.params.regToken;
            this.removeRegToken();
            window.gigya.logger.info("screenset finalizing registration");
            window.gigya.accounts.finalizeRegistration(this.params, {
                include: window.gigya.utils.stringUtils.mergeCommaSeparatedValues('profile,data,emails,subscriptions,preferences', this._screenSet.params.include),
                dontHandleScreenSet: true,
                regToken: regToken_1,
                callback: function (response) {
                    if (response.errorCode == 0) {
                        window.gigya.logger.info("registration finalized - clearing cache");
                        _this.data.finalizeRegistrationNeeded = false;
                        _this.data.apiData = {};
                    }
                    else {
                        window.gigya.logger.info("registration failed finalizing - re-using existing regToken");
                        _this.data.regToken = _this.params.regToken = regToken_1;
                    }
                    _this.onScreenResponse(response, oForm, true);
                },
            });
        }
        else {
            this.hide(CloseReasons_1.CloseReasons[reason], res);
        }
    };
    // BasePlugin Override
    ScreenSetPlugin.prototype.resizeModal = function (size) {
        // TODO not sure we need this at all
        if (this.getPluginStyle() !== PluginStyles_1.PluginStyle.legacy) {
            if (size.height)
                this._elContainer.style.height = size.height;
            if (size.width)
                this._elContainer.style.width = size.width;
        }
        else {
            /* legacy adjustments */
            if (utils_1.getUnitMeasurementType(size.width) == utils_1.UnitMeasurementType.percentage) {
                delete size.width;
                this._elContainer.style.width = '';
            }
            if (utils_1.getUnitMeasurementType(size.height) == utils_1.UnitMeasurementType.percentage) {
                delete size.height;
                this._elContainer.style.height = '';
            }
        }
        _super.prototype.resizeModal.call(this, size);
    };
    ScreenSetPlugin.prototype.resizePlugin = function (old, curr) {
        this.onViewportSizeChanged();
    };
    ScreenSetPlugin.prototype.onViewportSizeChanged = function (oldViewportSize, currentViewportSize) {
        if (this._currentScreen) {
            this._currentScreen.evaluateConditionalAttributes();
        }
    };
    ScreenSetPlugin.prototype.showScreenSetContainer = function () {
        if (this._modalDialog) {
            window.gigya.utils.DOM.removeClassFromElement(this._modalDialog.getModalDialogContainer(), exports.ScreenSet_CONSTS.gigyaHidden);
            this._modalDialog.showAll();
        }
        else {
            // in place screen-set
            window.gigya.utils.DOM.removeClassFromElement(this._elContainer, exports.ScreenSet_CONSTS.gigyaHidden);
            window.gigya.utils.DOM.addClassToElement(this._elChildContainer, exports.ScreenSet_CONSTS.gigyaHidden);
        }
    };
    ScreenSetPlugin.prototype.hideScreenSetContainer = function () {
        if (this._modalDialog) {
            this._modalDialog.hideAll();
            window.gigya.utils.DOM.addClassToElement(this._modalDialog.getModalDialogContainer(), exports.ScreenSet_CONSTS.gigyaHidden);
        }
        else {
            // in place screen-set
            window.gigya.utils.DOM.addClassToElement(this._elContainer, exports.ScreenSet_CONSTS.gigyaHidden);
            window.gigya.utils.DOM.removeClassFromElement(this._elChildContainer, exports.ScreenSet_CONSTS.gigyaHidden);
        }
    };
    ScreenSetPlugin.prototype.getLangForScreenSet = function () {
        return this.params._explicitLang
            ? this.params.lang // use explicit lang param if supplied
            : window.gigya.thisScript.lang.originalLang; // otherwise, use the original (full) lang from globalConf
    };
    /**
     * Used to cache reference to JavaScript and translations downloaded for each screen-set.
     *
     * The object reference is placed on the gigya object directly to avoid being cleared when this file is reloaded by a site switching languages.
     */
    ScreenSetPlugin.CACHE = (window.gigya['__screenSetPluginCache'] = window.gigya['__screenSetPluginCache'] || {});
    ScreenSetPlugin.CONSTS = exports.ScreenSet_CONSTS;
    return ScreenSetPlugin;
}(window.gigya._.plugins.BasePlugin));
exports.ScreenSetPlugin = ScreenSetPlugin;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetResources.ts":
/*!***************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetResources.ts ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
exports.passwordStrength = __webpack_require__(/*! ./templates/passwordStrength.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength.html");
exports.passwordStrength_strengthMeter = __webpack_require__(/*! ./templates/passwordStrength_strengthMeter.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength_strengthMeter.html");
exports.passwordStrength_minimumRequirements = __webpack_require__(/*! ./templates/passwordStrength_minimumRequirements.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength_minimumRequirements.html");
exports.screenSet_dialog = __webpack_require__(/*! ./templates/screenSet_dialog.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/screenSet_dialog.html");
exports.screenSet = __webpack_require__(/*! ./templates/screenSet.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/screenSet.html");
exports.photoUpload_ui = __webpack_require__(/*! ./templates/photoUpload_ui.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/photoUpload_ui.html");
exports.photoUpload_form = __webpack_require__(/*! ./templates/photoUpload_form.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/photoUpload_form.html");
exports.inlinedPasswordStrength = __webpack_require__(/*! ./templates/inlinedPasswordStrength.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/inlinedPasswordStrength.html");
exports.consent = __webpack_require__(/*! ./templates/consent.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/consent.html");


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/SwitchScreenWidget.ts":
/*!***************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/SwitchScreenWidget.ts ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! ./BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.SwitchScreen_CONSTS = {
    selector: '[data-switch-screen]',
    switchScreen: 'data-switch-screen',
    successScreen: 'data-on-success-screen',
    screenSetSkippedScreen: 'data-on-screenset-skipped-screen',
};
utils_1.DeepFreeze(exports.SwitchScreen_CONSTS);
var SwitchScreenWidget = /** @class */ (function (_super) {
    tslib_1.__extends(SwitchScreenWidget, _super);
    function SwitchScreenWidget(_screen, el) {
        var _this = _super.call(this, _screen, el, false) || this;
        _this._screen = _screen;
        // No definition of what should be the id in case that no ID is published.
        _this.bindID = _this.ID;
        return _this;
    }
    SwitchScreenWidget.prototype.linkInstanceElement = function (parent) {
        var _this = this;
        _super.prototype.linkInstanceElement.call(this, parent);
        this.updateAttributes();
        this.clickHandler = function (event) {
            var form = _this._screen.getFormByElement(_this.instanceElement);
            var formContext = {
                errorCode: GSErrors_1.GSErrors.OK,
                explicitSwitchScreen: true
            };
            _this._screenSet.switchScreen(_this.switchScreen, formContext, form);
        };
        this.addEventListener('click', this.clickHandler);
    };
    SwitchScreenWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        this.removeEventListener('click', this.clickHandler);
    };
    SwitchScreenWidget.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        this.updateAttributes();
    };
    SwitchScreenWidget.prototype.updateAttributes = function () {
        this.switchScreen = this.instanceElement.getAttribute(exports.SwitchScreen_CONSTS.switchScreen);
        this.instanceElement.setAttribute('href', 'javascript:void(0)');
        this.instanceElement.removeAttribute('target');
    };
    SwitchScreenWidget.CONSTS = exports.SwitchScreen_CONSTS;
    return SwitchScreenWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.SwitchScreenWidget = SwitchScreenWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(SwitchScreenWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts":
/*!************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var Debug_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Debug */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Debug.ts");
var ElementRoles;
(function (ElementRoles) {
    ElementRoles[ElementRoles["_undefined"] = 0] = "_undefined";
    ElementRoles[ElementRoles["template"] = 1] = "template";
    ElementRoles[ElementRoles["instance"] = 2] = "instance";
})(ElementRoles = exports.ElementRoles || (exports.ElementRoles = {}));
var generatedIdNumber = 0;
exports.TemplateElement_CONSTS = {
    elementId: 'data-screenset-element-id',
    publishElementId: 'data-screenset-element-id-publish',
    templateForArray: 'screenSetTemplateFor',
    instanceOfArray: 'screenSetInstanceOf',
    screenSetRoles: 'data-screenset-roles',
};
utils_1.DeepFreeze(exports.TemplateElement_CONSTS);
var conditionalFunction = new Function('screenset', 'viewport', 'formData', 'profile', 'data', 'subscriptions', 'preferences', 'accountInfo', 'tfaProviders', 'authMethods', 'conflictingAccount', 'schema', '_account', 'value', 'return eval(value);');
var TemplateElement = /** @class */ (function () {
    function TemplateElement(templateElement, _parent) {
        this.templateElement = templateElement;
        this._parent = _parent;
        this.eventHandlers = {};
        this.conditionalExpressions = new Array();
        this._screenSet = _parent._screenSet;
        if (TemplateElement.isTemplateInstance(this.templateElement)) {
            // Creating multiple TemplateElement instances on the same element
            this.ID = this.templateElement.getAttribute(exports.TemplateElement_CONSTS.elementId) || '';
            this.publishID = this.templateElement.getAttribute(exports.TemplateElement_CONSTS.publishElementId) === 'true';
        }
        else {
            // Creating the first TemplateElement instance for this element
            this.ID = this.templateElement.id || '';
            if (this.ID !== '') {
                this.publishID = true;
                this.templateElement.removeAttribute('id'); // eliminate the id from the template to make sure that id only exists on the running instance of the element
            }
            else {
                var generatedNumber = ++generatedIdNumber + '_' + new Date().getTime(); // make sure every ID is as unique as possible
                this.ID = '__gig_template_element_' + generatedNumber;
                this.publishID = false;
            }
            this.templateElement.setAttribute(exports.TemplateElement_CONSTS.elementId, this.ID);
            this.templateElement.setAttribute(exports.TemplateElement_CONSTS.publishElementId, String(this.publishID));
        }
        this.ID = this.ID.trim();
        // mark role on the element
        var currentRoles = TemplateElement.getRoles(this.templateElement);
        currentRoles.push(ElementRoles.template);
        TemplateElement.setRoles(this.templateElement, currentRoles);
        // link JS object to template element
        var templateFor = templateElement[exports.TemplateElement_CONSTS.templateForArray];
        if (!templateFor) {
            templateFor = new Array();
            templateElement[exports.TemplateElement_CONSTS.templateForArray] = templateFor;
        }
        this.conditionalExpressions = this.getConditionalExpression(this.templateElement);
        templateFor.push(this);
    }
    TemplateElement.prototype.unlinkTemplate = function () {
        // remove instance link
        var templateFor = this.templateElement[exports.TemplateElement_CONSTS.templateForArray];
        if (templateFor) {
            var i = utils_1.LastIndexOf(templateFor, this);
            templateFor.splice(i, 1);
        }
        // remove role
        var currentRoles = TemplateElement.getRoles(this.templateElement);
        var lastRole = currentRoles.pop();
        if (lastRole === ElementRoles.template)
            TemplateElement.setRoles(this.templateElement, currentRoles);
        else
            this.warn('unlinkTemplate without matching role');
    };
    TemplateElement.prototype.getConditionalExpression = function (el) {
        var conditionalExpressions = [];
        try {
            conditionalExpressions = utils_1.getConditionalAttributeExpressions(el);
        }
        catch (e) {
            this.warn('Error parsing conditional expressions.');
        }
        return conditionalExpressions;
    };
    TemplateElement.getRoles = function (element) {
        var roleNames = (element.getAttribute(exports.TemplateElement_CONSTS.screenSetRoles) || '').split(',');
        if (roleNames[0] === '')
            roleNames.pop();
        return utils_1.Map(roleNames, function (roleName) { return ElementRoles[roleName] || ElementRoles._undefined; });
    };
    TemplateElement.setRoles = function (element, roles) {
        var rolesNames = utils_1.Map(roles, function (role) { return ElementRoles[role]; });
        element.setAttribute(exports.TemplateElement_CONSTS.screenSetRoles, rolesNames.join(','));
    };
    TemplateElement.prototype.warn = function (msg, id) {
        this._parent.warn(msg, id ? this.ID + '.' + id : this.ID);
    };
    // Assumes that prepareTemplateInstance was called on the template instance before this call
    TemplateElement.prototype.linkInstanceElement = function (parent) {
        var _this = this;
        var instanceElements = window.gigya.utils.DOM.getElementsByAttribute(parent, '*', exports.TemplateElement_CONSTS.elementId, this.ID);
        if (!instanceElements || !instanceElements.length || !instanceElements[0]) {
            this.warn('Failed to find the instance element to link to');
            return;
        }
        this.instanceElement = instanceElements[0];
        // mark roles
        var currentRoles = TemplateElement.getRoles(this.instanceElement);
        currentRoles.push(ElementRoles.instance);
        TemplateElement.setRoles(this.instanceElement, currentRoles);
        // link JS object to instance element
        var instanceOf = this.instanceElement[exports.TemplateElement_CONSTS.instanceOfArray];
        if (!instanceOf) {
            instanceOf = new Array();
            this.instanceElement[exports.TemplateElement_CONSTS.instanceOfArray] = instanceOf;
        }
        // register event listeners
        utils_1.ForEachProp(this.eventHandlers, function (handlers, eventName) {
            return utils_1.ForEach(handlers, function (handler) { return window.gigya.utils.DOM.addEventListener(_this.instanceElement, eventName, handler); });
        });
        instanceOf.push(this);
        this.initFromInstanceElement();
    };
    TemplateElement.prototype.unlinkInstanceElement = function () {
        var _this = this;
        if (this.instanceElement) {
            // unregister event listeners
            utils_1.ForEachProp(this.eventHandlers, function (handlers, eventName) {
                return utils_1.ForEach(handlers, function (handler) { return window.gigya.utils.DOM.removeEventListener(_this.instanceElement, eventName, handler); });
            });
            // remove role
            var currentRoles = TemplateElement.getRoles(this.instanceElement);
            var lastRole = currentRoles.pop();
            if (lastRole === ElementRoles.instance)
                TemplateElement.setRoles(this.instanceElement, currentRoles);
            else
                this.warn('unlinkInstanceElement without matching role');
            // remove link to JS object from instance element
            var instanceOf = this.instanceElement[exports.TemplateElement_CONSTS.instanceOfArray];
            if (instanceOf)
                instanceOf.splice(window.gigya.utils.array.indexOf(instanceOf, this), 1);
            this.instanceElement = null;
        }
    };
    TemplateElement.isTemplateInstance = function (el) {
        return el.getAttribute(exports.TemplateElement_CONSTS.elementId);
    };
    TemplateElement.prepareTemplateInstanceElement = function (element, removeTemplateRole) {
        var ID = element.getAttribute(exports.TemplateElement_CONSTS.elementId);
        var publishId = element.getAttribute(exports.TemplateElement_CONSTS.publishElementId) === 'true';
        if (!ID) {
            Debug_1.warn('', 'Failed to find elementId'); // TODO perhaps message should include more information
            return;
        }
        if (publishId)
            element.setAttribute('id', ID);
        // remove the template role
        if (removeTemplateRole) {
            var roles = TemplateElement.getRoles(element);
            if (roles.pop() === ElementRoles.template)
                TemplateElement.setRoles(element, roles);
        }
    };
    TemplateElement.prepareTemplateInstances = function (templateRoot) {
        var els = templateRoot.querySelectorAll("*[" + exports.TemplateElement_CONSTS.elementId + "]");
        utils_1.ForEach(els, function (e) { return TemplateElement.prepareTemplateInstanceElement(e, true); });
    };
    //#region events
    TemplateElement.prototype.addEventListener = function (eventName, handler) {
        var handlers = this.eventHandlers[eventName];
        if (!handlers) {
            handlers = new Array();
            this.eventHandlers[eventName] = handlers;
        }
        handlers.push(handler);
        if (this.instanceElement)
            window.gigya.utils.DOM.addEventListener(this.instanceElement, eventName, handler);
    };
    TemplateElement.prototype.removeEventListener = function (eventName, handler) {
        if (this.instanceElement)
            window.gigya.utils.DOM.removeEventListener(this.instanceElement, eventName, handler);
        var handlers = this.eventHandlers[eventName];
        if (handlers) {
            var i = utils_1.LastIndexOf(handlers, handler);
            if (i > -1)
                handlers.splice(i, 1);
        }
    };
    TemplateElement.prototype.getLoggerName = function () {
        return '';
    };
    // Evaluate conditional attribute
    TemplateElement.prototype.evaluateConditionalAttributes = function () {
        var _this = this;
        this.conditionalExpressions = this.getConditionalExpression(this.instanceElement);
        if (!this.hasConditionalAttributes()) {
            return;
        }
        window.gigya.logger.group(("conditional expressions for " + (this.constructor['name'] || this.ID) + " " + this.getLoggerName()).trim()).endWhen(function () {
            window.gigya.logger.info('template element:', _this);
            utils_1.ForEach(_this.conditionalExpressions, function (conditionalAtt) {
                var evaluationResult = _this.evaluateExpression(conditionalAtt);
                _this.executeConditionalResult(evaluationResult, conditionalAtt, _this.instanceElement);
            });
        });
        this.initFromInstanceElement();
    };
    TemplateElement.prototype.initFromInstanceElement = function () {
        /// Virtual method to be overriden by derived class.
    };
    TemplateElement.prototype.hasConditionalAttributes = function () {
        return this.conditionalExpressions && this.conditionalExpressions.length > 0;
    };
    TemplateElement.prototype.evaluateExpression = function (conditionalExpression) {
        var expressionData = this.getExpressionData();
        window.gigya.logger.debug("evaluating:", { conditionalExpression: conditionalExpression, expressionData: expressionData });
        try {
            return conditionalFunction(expressionData.screenset, expressionData.viewport, expressionData.formData, expressionData.profile, expressionData.data, expressionData.subscriptions, expressionData.preferences, expressionData.accountInfo, expressionData.tfaProviders, expressionData.authMethods, expressionData.conflictingAccount, expressionData.schema, window.gigya.utils.object.expressionHelper(expressionData), conditionalExpression.condition);
        }
        catch (e) {
            if (!conditionalExpression.ignoreError) {
                window.gigya.logger.warn("Screenset exception in conditional expression!", {
                    condition: conditionalExpression.condition,
                    e: e,
                });
            }
            return conditionalExpression.defaultValue;
        }
    };
    TemplateElement.prototype.getExpressionData = function () {
        var apiData = this._screenSet.getApiData();
        var viewportSize = window.gigya.utils.viewport.getInnerSize();
        var expressionData = {
            // Form data contains special field values (like loginID) and local fields.
            formData: {},
            // This reflects the account info response (for logged in user) with the form data merged on top of it.
            // User is not logged in, start with blank account info.
            profile: {},
            data: {},
            preferences: {},
            subscriptions: {},
            authMethods: [],
            // api data
            schema: apiData.getSchema || {},
            accountInfo: apiData.getAccountInfo || {},
            tfaProviders: apiData.getProviders || {},
            conflictingAccount: apiData.getConflictingAccount || {},
            // Prepare screenset object.
            // Translations are made available specifically for attributes that need to be localized, such as the placeholder attribute.
            screenset: {
                width: this._screenSet.container.offsetWidth,
                height: this._screenSet.container.offsetHeight,
                translations: this._screenSet.params.customLang || {},
                lang: this._screenSet.lang,
                isModal: this._screenSet.isModal,
                isMobile: this._screenSet.isMobileUI,
            },
            viewport: {
                width: viewportSize.w,
                height: viewportSize.h,
                orientation: window.gigya.utils.viewport.getOrientation(),
            },
        };
        // First, attempt to get the account info. The user may not be logged in.
        if (apiData.getAccountInfo) {
            // Set merged data to account info.
            expressionData = window.gigya.utils.object.clone(window.gigya.utils.object.extractProperties(apiData.getAccountInfo, expressionData, 'profile|data|preferences|subscriptions|authMethods'), true);
        }
        // Populate form data if element is within form. Otherwise, profile/data fields are populated by API data.
        // Parent is typically either form or screen element.
        if ( /*this._parent instanceof BaseForm && */this._parent['isPopulated']) {
            // Generate flat form data in the same way it's generated for other events.
            expressionData.formData = this._parent.getFlatFormData(true, false);
            // Deep merge form data on top of account info API data.
            var formData = this._parent.getFormData(false, false);
            expressionData = window.gigya.utils.object.merge([expressionData, formData], true);
        }
        return expressionData;
    };
    TemplateElement.prototype.executeConditionalResult = function (evaluationResult, conditionalAtt, element) {
        evaluationResult = window.gigya.utils.validation.isExplicitFalse(evaluationResult) ? evaluationResult : evaluationResult || conditionalAtt.defaultValue;
        if (evaluationResult === conditionalAtt.lastAttributeValue) {
            window.gigya.logger.info("attribute '" + conditionalAtt.attributeName + "' remained the same: " + evaluationResult);
        }
        else {
            window.gigya.logger.info("attribute '" + conditionalAtt.attributeName + "' changed: " + JSON.stringify(conditionalAtt.lastAttributeValue) + " => " + JSON.stringify(evaluationResult));
            conditionalAtt.lastAttributeValue = evaluationResult;
            if (conditionalAtt.attributeName === 'class' && this.cssClass) {
                evaluationResult = ((evaluationResult || '') + " " + this.cssClass).trim();
            }
            if (!evaluationResult && // value is falsy and
                (!window.gigya.utils.validation.isExplicitFalse(evaluationResult) || // it's not explicit false (i.e null, undefined, '')
                    window.gigya.utils.DOM.isHTMLBooleanAttribute(conditionalAtt.attributeName))) {
                // or it's an html boolean attribute (false value requires to fully remove it)
                window.gigya._.plugins.utils.DOM.setAttribute(element, conditionalAtt.attributeName, null);
            }
            else {
                var attrVal = typeof evaluationResult == 'object' ? JSON.stringify(evaluationResult) : evaluationResult;
                window.gigya._.plugins.utils.DOM.setAttribute(element, conditionalAtt.attributeName, attrVal);
            }
        }
        return evaluationResult;
    };
    TemplateElement.prototype.resetLastConditionalValues = function () {
        utils_1.ForEach(this.conditionalExpressions, function (conditionalAtt) {
            conditionalAtt.lastAttributeValue = '';
        });
    };
    return TemplateElement;
}());
exports.TemplateElement = TemplateElement;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Templates.ts":
/*!******************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Templates.ts ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var ScreenSetResources_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetResources */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetResources.ts");
var TemplatesCache = /** @class */ (function () {
    function TemplatesCache() {
        this._map = {};
    }
    TemplatesCache.prototype.get = function (key) {
        return this._map[key];
    };
    TemplatesCache.prototype.set = function (key, value) {
        // TODO: value need to support both string and string array perhaps with templates this is not needed anymore
        this._map[key] = value instanceof Array ? value.join('') : value;
    };
    return TemplatesCache;
}());
exports.TemplatesCache = TemplatesCache;
function createDefaultTemplates() {
    var templates = new TemplatesCache();
    templates.set('passwordStrength', ScreenSetResources_1.passwordStrength);
    templates.set('passwordStrength-strengthMeter', ScreenSetResources_1.passwordStrength_strengthMeter);
    templates.set('passwordStrength-minimumRequirements', ScreenSetResources_1.passwordStrength_minimumRequirements);
    templates.set('screenSet-dialog', ScreenSetResources_1.screenSet_dialog);
    templates.set('screenSet', ScreenSetResources_1.screenSet);
    templates.set('photoUpload_ui', ScreenSetResources_1.photoUpload_ui);
    templates.set('photoUpload_form', ScreenSetResources_1.photoUpload_form);
    templates.set('inlinedPasswordStrength', ScreenSetResources_1.inlinedPasswordStrength);
    templates.set('consent', ScreenSetResources_1.consent);
    return templates;
}
exports.createDefaultTemplates = createDefaultTemplates;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ApiLinkWidget.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ApiLinkWidget.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var BaseScreenWidget_1 = __webpack_require__(/*! ../BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var ApiHandler_1 = __webpack_require__(/*! ../Handlers/ApiHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/index.ts");
var TranslatedWidget_1 = __webpack_require__(/*! ./TranslatedWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget.ts");
exports.ApiLink_CONSTS = {
    selector: '[data-gigya-api-link]',
    attributeName: 'data-gigya-api-link',
    disableTimeoutInSeconds: 'data-disable-timeout',
    disabledClass: 'gigya-disabled-text',
    deps: [TranslatedWidget_1.TranslatedWidget] //deps doesn't do anything, only make sure TranslatedWidget is registered before this one (by importing it)
};
var ApiLinkWidget = /** @class */ (function (_super) {
    tslib_1.__extends(ApiLinkWidget, _super);
    function ApiLinkWidget(_screen, el, _apiList, _domUtils, _config) {
        if (_apiList === void 0) { _apiList = window.gigya._.arApiList; }
        if (_domUtils === void 0) { _domUtils = window.gigya.utils.DOM; }
        if (_config === void 0) { _config = { defaultDisableTimeout: 10 }; }
        var _this = _super.call(this, _screen, el, false) || this;
        _this._apiList = _apiList;
        _this._domUtils = _domUtils;
        _this._config = _config;
        _this._clickHandler = function () {
            _this._disable();
            _this._apiHandler.send();
        };
        return _this;
    }
    ApiLinkWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this._apiHandler = this._getApiHandler();
        if (this._apiHandler) {
            this._setDisableTimeout();
            this._addClickHandler();
        }
    };
    ApiLinkWidget.prototype.unlinkInstanceElement = function () {
        this._removeClickHandler();
        _super.prototype.unlinkInstanceElement.call(this);
    };
    ApiLinkWidget.prototype._getApiHandler = function () {
        var methodName = this.instanceElement.getAttribute(exports.ApiLink_CONSTS.attributeName);
        if (!methodName) {
            window.gigya.logger.warn("[" + exports.ApiLink_CONSTS.attributeName + "]: missing api method name");
            return null;
        }
        var serverApis = this._apiList.filter(function (api) { return api instanceof window.gigya._.ServerApi; });
        return ApiHandler_1.BaseApiHandler.getHandler(methodName, this._screenSet.data, serverApis);
    };
    ApiLinkWidget.prototype._addClickHandler = function () {
        this._domUtils.addEventListener(this.instanceElement, 'click', this._clickHandler);
    };
    ApiLinkWidget.prototype._removeClickHandler = function () {
        this._domUtils.removeEventListener(this.instanceElement, 'click', this._clickHandler);
    };
    ApiLinkWidget.prototype._setDisableTimeout = function () {
        var disableTimeout = this.instanceElement.getAttribute(exports.ApiLink_CONSTS.disableTimeoutInSeconds);
        if (!disableTimeout || isNaN(Number(disableTimeout))) {
            disableTimeout = String(this._config.defaultDisableTimeout);
        }
        this._disableTimeout = Number(disableTimeout) * 1000;
    };
    ApiLinkWidget.prototype._disable = function () {
        var _this = this;
        this._removeClickHandler();
        this._domUtils.addClassToElement(this.instanceElement, exports.ApiLink_CONSTS.disabledClass);
        setTimeout(function () {
            _this._enable();
        }, this._disableTimeout);
    };
    ApiLinkWidget.prototype._enable = function () {
        this._addClickHandler();
        this._domUtils.removeClassFromElement(this.instanceElement, exports.ApiLink_CONSTS.disabledClass);
    };
    ApiLinkWidget.CONSTS = exports.ApiLink_CONSTS;
    return ApiLinkWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.ApiLinkWidget = ApiLinkWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(ApiLinkWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ArrayManagerWidget.ts":
/*!***********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ArrayManagerWidget.ts ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var ErrorDisplayElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement.ts");
exports.ArrayManager_CONST = {
    selector: '.gigya-composite-control-array-widget',
    containerSelector: '.gigya-array-manager',
    formElSelector: 'input,select,.gigya-array-manager',
    addButtonSelector: 'button.gigya-array-add-btn',
    removeButtonSelector: 'button.gigya-array-remove-btn',
    itemWrapperClass: 'gigya-array-template',
    inputsWrapperClass: 'inputs-wrapper',
    buttonsWrapperClass: 'buttons-wrapper',
    templateItemAttr: 'data-array-template-id',
    arrayManagerRootAttr: 'data-array-manager-root',
    deleteDisabledClass: 'disable-delete',
    indexMatcher: /\[([0-9])]/g,
};
utils_1.DeepFreeze(exports.ArrayManager_CONST);
var _idGenerator = 0;
var ArrayManagerItem = /** @class */ (function () {
    function ArrayManagerItem(arrayManager, _index) {
        this.arrayManager = arrayManager;
        this._index = _index;
        this._container = document.createElement('div');
        this._inputsWrapper = document.createElement('div');
        this._buttonsWrapper = document.createElement('div');
        this.onDispose = [];
        this.screenWidgets = [];
        this.formInputs = [];
        this.formWidgets = [];
        this.boundedErrors = [];
        this._form = arrayManager._form;
        this._screen = arrayManager._screen;
        this._uniqueItemID = "array-template-" + Date.now() + "-" + _index;
        this._buttonsWrapper.id = this._uniqueItemID + "_" + exports.ArrayManager_CONST.buttonsWrapperClass;
        window.gigya.utils.DOM.addClassToElement(this._buttonsWrapper, exports.ArrayManager_CONST.buttonsWrapperClass);
        window.gigya.utils.DOM.addClassToElement(this._inputsWrapper, exports.ArrayManager_CONST.inputsWrapperClass);
        this._inputsWrapper.appendChild(arrayManager.createInputsWrapper());
        var removeButton = arrayManager.attachRemoveButton(this);
        this._buttonsWrapper.appendChild(removeButton);
        this._container.appendChild(this._inputsWrapper);
        this._container.appendChild(this._buttonsWrapper);
        window.gigya.utils.DOM.addClassToElement(this._container, exports.ArrayManager_CONST.itemWrapperClass);
        this._container.setAttribute(exports.ArrayManager_CONST.templateItemAttr, this._uniqueItemID);
        // map old ids to the new ids, we have to do this since each id must always map to the same new id
        var idsMap = this._getAllElements()
            .filter(function (el) { return Boolean(el.id); })
            .reduce(function (obj, el) {
            obj[el.id] = el.id + "_" + ++_idGenerator;
            return obj;
        }, {});
        // replace any occurrence of the id with the newly generated id
        window.gigya.utils.DOM.manipulateAttributes(this._getAllElements(), new RegExp(Object.keys(idsMap).join('|'), 'g'), function (id) { return idsMap[id]; });
        this._indexNameBindings();
    }
    ArrayManagerItem.prototype.getID = function () {
        return this._uniqueItemID;
    };
    ArrayManagerItem.prototype.getIndex = function () {
        return this._index;
    };
    ArrayManagerItem.prototype.setIndex = function (index) {
        this._index = index;
        this.update();
    };
    ArrayManagerItem.prototype.attachAddButton = function (addButton) {
        this._buttonsWrapper.insertBefore(addButton, this._buttonsWrapper.firstChild);
    };
    ArrayManagerItem.prototype.linkInstance = function () {
        this._linkToScreen();
        this._linkToForm();
    };
    ArrayManagerItem.prototype.getContainer = function () {
        return this._container;
    };
    ArrayManagerItem.prototype.dispose = function () {
        this.onDispose.forEach(function (cb) { return cb(); });
        this._unlinkScreen();
        this._unlinkForm();
        if (this._container.parentNode) {
            this._container.parentNode.removeChild(this._container);
        }
    };
    ArrayManagerItem.prototype.update = function () {
        this._indexNameBindings();
        this._screen.removeSpecificErrorBinds(this.boundedErrors);
        this.boundedErrors = this._screen.addSpecificErrorBinds(getErrorBindings(this._inputsWrapper));
        this._form.registerBoundedErrorElements();
        this.formInputs.forEach(function (i) { return i.update(); });
        this.formWidgets.forEach(function (w) { return w.update(); });
    };
    ArrayManagerItem.prototype._getAllElements = function () {
        return Array.prototype.slice.call(this._inputsWrapper.querySelectorAll('*'));
    };
    ArrayManagerItem.prototype._indexNameBindings = function () {
        var _this = this;
        var namesToMap = this.arrayManager.getFieldsNames().concat(this.arrayManager.getStoreAsArrayRoots());
        var rootName = this.arrayManager.getRootName();
        var baseRootName = rootName.replace(exports.ArrayManager_CONST.indexMatcher, '');
        // match any occurrence of any binding, with or without index clause.
        // an example of the output: "ancestorRoot(index)?.root(index)?.fieldName1|ancestorRoot(index)?.root(index)?.fieldName2"
        var bindingMatcher = namesToMap
            .filter(function (name) { return Boolean(name); })
            .map(function (name) {
            return rootName.replace(exports.ArrayManager_CONST.indexMatcher, '(?:\\[[0-9]])?') + // convert any existing index in "rootName" to be optional match
                '(?:\\[[0-9]])?' + // optional current index
                name.substr(baseRootName.length);
        }) // actual field name
            .join('|');
        // add current index to each field name
        window.gigya.utils.DOM.manipulateAttributes(this._getAllElements(), new RegExp(bindingMatcher, 'g'), function (match) { return addIndex(match, rootName, _this._index); }, function (attr) { return /^name|^data-|^gigya/i.test(attr.name); });
    };
    ArrayManagerItem.prototype._linkToScreen = function () {
        this.screenWidgets = this._screen.addDynamicWidgets(this._container);
        this.boundedErrors = this._screen.addSpecificErrorBinds(getErrorBindings(this._inputsWrapper));
    };
    ArrayManagerItem.prototype._unlinkScreen = function () {
        this._screen.removeDynamicWidgets(this.screenWidgets);
    };
    ArrayManagerItem.prototype._linkToForm = function () {
        this.formInputs = this._form.addDynamicInputs(this._inputsWrapper);
        this._form.registerBoundedErrorElements();
        this.formWidgets = this._form.addDynamicWidgets(this._inputsWrapper);
    };
    ArrayManagerItem.prototype._unlinkForm = function () {
        this._form.removeDynamicWidgets(this.formWidgets);
        this._form.registerBoundedErrorElements();
        this._form.removeDynamicInputs(this.formInputs);
    };
    return ArrayManagerItem;
}());
exports.ArrayManagerItem = ArrayManagerItem;
var ArrayManagerWidget = /** @class */ (function (_super) {
    tslib_1.__extends(ArrayManagerWidget, _super);
    function ArrayManagerWidget(_form, el) {
        var _this = _super.call(this, _form, el, false) || this;
        _this.onDispose = new Array();
        _this._items = [];
        var templates = _this.templateElement.querySelectorAll('template');
        _this._inputsTemplate = templates[0];
        _this._buttonsTemplate = templates[1];
        if (!_this._inputsTemplate && console && console.warn)
            console.warn('gigya: Array Manager is provided with invalid template');
        _this._minimumItems = Number(_this.params['minimum']) || 1;
        _this._fieldsNames = Array.prototype.slice
            .call(_this._inputsTemplate.content.querySelectorAll(exports.ArrayManager_CONST.formElSelector))
            .map(function (i) { return _this._form.getNormalizedFieldName(i.getAttribute('name')); });
        _this._storeAsArrayRoots = Array.prototype.slice
            .call(_this._inputsTemplate.content.querySelectorAll("[" + FormInput_1.FormInput_CONSTS.arrayRootAttribute + "]"))
            .map(function (i) { return i.getAttribute(FormInput_1.FormInput_CONSTS.arrayRootAttribute); });
        return _this;
    }
    ArrayManagerWidget.prototype.createInputsWrapper = function () {
        return document.importNode(this._inputsTemplate.content, true);
    };
    ArrayManagerWidget.prototype.attachRemoveButton = function (item) {
        var _this = this;
        var listener = function () { return _this.removeItem(item.getID()); }, button = this._getButton('remove', listener);
        item.onDispose.push(function () { return button.removeEventListener('click', listener); });
        return button;
    };
    ArrayManagerWidget.prototype.linkInstanceElement = function (parent) {
        var _this = this;
        _super.prototype.linkInstanceElement.call(this, parent);
        this._arrayContainer = this.instanceElement.querySelector(exports.ArrayManager_CONST.containerSelector);
        var addListener = function () { return _this.addItem(); };
        this._addButton = this._getButton('add', addListener);
        this.onDispose.push(function () { return _this._addButton.removeEventListener('click', addListener); });
        this._arrayRootName = this._arrayContainer.getAttribute('name');
        //Arrange pre-populate data fields
        var populateData = this._form.prePopulateData(), arrayRoot = window.gigya.utils.object.getPropertyBySerializedName(populateData, this._arrayRootName, false);
        var len = this._minimumItems;
        if (arrayRoot && arrayRoot instanceof Array) {
            len = Math.max(this._minimumItems, arrayRoot.length);
        }
        for (var i = 0; i < len; i++) {
            this.addItem();
        }
    };
    ArrayManagerWidget.prototype.unlinkInstanceElement = function () {
        var _this = this;
        this._items.forEach(function (item) {
            _this._screen.removeSpecificErrorBinds(item.boundedErrors);
            _this._form.registerBoundedErrorElements();
            item.dispose();
        });
        this._items = [];
        this.onDispose.forEach(function (cb) { return cb(); });
        _super.prototype.unlinkInstanceElement.call(this);
    };
    ArrayManagerWidget.prototype.addItem = function () {
        var item = new ArrayManagerItem(this, this._items.length);
        this._arrayContainer.appendChild(item.getContainer());
        item.attachAddButton(this._addButton);
        item.linkInstance();
        this._items.push(item);
        this._applyCurrentState();
    };
    ArrayManagerWidget.prototype.removeItem = function (itemID) {
        var removeIndex = -1, itemToRemove = null;
        utils_1.Some(this._items, function (item, i) {
            if (item.getID() === itemID) {
                removeIndex = i;
                itemToRemove = item;
                return true;
            }
            return false;
        });
        if (!itemToRemove)
            return;
        this._screen.removeSpecificErrorBinds(itemToRemove.boundedErrors);
        this._form.registerBoundedErrorElements();
        this._items.splice(removeIndex, 1);
        this._reindexItems(removeIndex);
        itemToRemove.dispose();
        if (this._items.length > 0) {
            this._items[this._items.length - 1].attachAddButton(this._addButton);
        }
        this._applyCurrentState();
    };
    ArrayManagerWidget.prototype.getFieldsNames = function () {
        return this._fieldsNames;
    };
    ArrayManagerWidget.prototype.getStoreAsArrayRoots = function () {
        return this._storeAsArrayRoots;
    };
    ArrayManagerWidget.prototype._reindexItems = function (startIndex) {
        for (var i = startIndex; i < this._items.length; ++i) {
            this._items[i].setIndex(i);
        }
    };
    ArrayManagerWidget.prototype._applyCurrentState = function () {
        if (this._items.length <= this._minimumItems) {
            window.gigya.utils.DOM.addClassToElement(this._arrayContainer, exports.ArrayManager_CONST.deleteDisabledClass);
        }
        else {
            window.gigya.utils.DOM.removeClassFromElement(this._arrayContainer, exports.ArrayManager_CONST.deleteDisabledClass);
        }
        this._screenSet.centerModal();
    };
    ArrayManagerWidget.prototype.getRootName = function () {
        return this._arrayRootName;
    };
    ArrayManagerWidget.prototype.update = function () {
        this._arrayRootName = this._arrayContainer.getAttribute('name');
        this._items.forEach(function (item) { return item.update(); });
    };
    ArrayManagerWidget.prototype._getButton = function (type, listener) {
        var btn = document.importNode(this._buttonsTemplate.content.querySelectorAll(exports.ArrayManager_CONST[type + "ButtonSelector"])[0], true);
        if (listener) {
            btn.addEventListener('click', listener);
        }
        return btn;
    };
    ArrayManagerWidget.CONSTS = exports.ArrayManager_CONST;
    return ArrayManagerWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.ArrayManagerWidget = ArrayManagerWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(ArrayManagerWidget);
function getErrorBindings(container) {
    var boundedElements = [], binds = Array.prototype.slice
        .call(container.querySelectorAll("[" + ErrorDisplayElement_1.ErrorDisplayElement_CONSTS.boundedTo + "]"))
        .map(function (el) { return el.getAttribute(ErrorDisplayElement_1.ErrorDisplayElement_CONSTS.boundedTo); });
    utils_1.ForEach(ErrorDisplayElement_1.ErrorDisplayElement_CONSTS.gigyaClasses, function (gigyaClass) {
        var bindedSelectors = [];
        binds.forEach(function (bindID) {
            bindedSelectors.push("." + gigyaClass + "[" + ErrorDisplayElement_1.ErrorDisplayElement_CONSTS.boundedTo + "=\"" + bindID + "\"]");
        });
        boundedElements = boundedElements.concat(Array.prototype.slice.call(container.querySelectorAll(bindedSelectors.join(','))));
    });
    return boundedElements;
}
exports.getErrorBindings = getErrorBindings;
function addIndex(original, arrayRoot, index) {
    if (!original || !arrayRoot)
        return '';
    original = original.replace(exports.ArrayManager_CONST.indexMatcher, '');
    var baseArrayRoot = arrayRoot.replace(exports.ArrayManager_CONST.indexMatcher, '');
    return arrayRoot + "[" + index + "]." + original.substr(baseArrayRoot.length + 1);
}
exports.addIndex = addIndex;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/BindingWidget.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/BindingWidget.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var TranslatedWidget_1 = __webpack_require__(/*! ./TranslatedWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget.ts");
exports.Binding_CONSTS = {
    selector: '*[data-binding]',
    dataBindingAttribute: 'data-binding',
};
utils_1.DeepFreeze(exports.Binding_CONSTS);
var BindingWidget = /** @class */ (function (_super) {
    tslib_1.__extends(BindingWidget, _super);
    function BindingWidget(_screen, el) {
        var _this = 
        // Turn resetCSS off.
        _super.call(this, _screen, el, false) || this;
        _this.deps = [TranslatedWidget_1.TranslatedWidget];
        return _this;
    }
    BindingWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this.supportInterpolation = this.templateElement.getAttribute(BindingWidget.CONSTS.dataBindingAttribute) == 'true';
        this.originalString = this.instanceElement.innerHTML;
        this.lastValue = null;
        this.updateValue();
    };
    BindingWidget.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        this.updateValue();
    };
    BindingWidget.prototype.getBindingKey = function () {
        return this.originalString;
    };
    /**
     * Get Value from apiData
     */
    BindingWidget.prototype.getValue = function () {
        return this.evaluate(this.getBindingKey());
    };
    /**
     * Set bounded text.
     */
    BindingWidget.prototype.updateValue = function () {
        var value = this.getValue();
        if (value && this.lastValue !== value) {
            this.unlinkWidgets();
            this.lastValue = value.replace('undefined', '');
            this.instanceElement.innerHTML = this.lastValue;
            this.linkWidgets();
        }
    };
    BindingWidget.prototype.evaluate = function (text) {
        if (text === void 0) { text = ''; }
        var basicMatcher = /{{(.*?)}}/g, splitter = /({{.*?}})/g, placeholder = /'{{(.*?)}}'/g;
        if (!text.match(basicMatcher) || !this.supportInterpolation)
            return text;
        return this.evaluateExpression({
            ignoreError: true,
            condition: text
                .split(splitter)
                .map(function (p) { return "'" + p + "'"; })
                .join(' + ')
                .replace(/(\r\n|\n|\r)/gm, '')
                .replace(placeholder, '$1'),
        });
    };
    BindingWidget.CONSTS = exports.Binding_CONSTS;
    return BindingWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.BindingWidget = BindingWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(BindingWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CaptchaWidget.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CaptchaWidget.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var BaseCaptchaHandler_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler.ts");
var RegisterForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm.ts");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
exports.CaptchaWidget_CONSTS = {
    selector: 'div.gigya-captcha',
};
var CaptchaWidget = /** @class */ (function (_super) {
    tslib_1.__extends(CaptchaWidget, _super);
    function CaptchaWidget(form, el) {
        var _this = _super.call(this, form, el) || this;
        _this._index = form._screen._captchas.length;
        form._screen._captchas.push(_this);
        var handlerConfig = window.gigya.utils.object.merge([
            _this.params,
            {
                lang: _this._screenSet.params['lang'],
                mode: form instanceof RegisterForm_1.RegisterForm ? BaseCaptchaHandler_1.CaptchaMode.Invisible : BaseCaptchaHandler_1.CaptchaMode.Visible,
            },
        ]);
        var activeHandler = BaseCaptchaHandler_1.CaptchaHandlers[window.gigya.partnerSettings.captchaProvider];
        if (activeHandler && typeof activeHandler === 'function') {
            _this._captchaHandler = new activeHandler(handlerConfig);
        }
        else {
            throw new Error("[Gigya]: unsupported captcha provider");
        }
        return _this;
    }
    CaptchaWidget.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var initResponse;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _super.prototype.linkInstanceElement.call(this, parent);
                        return [4 /*yield*/, this._captchaHandler.init(this.instanceElement)];
                    case 1:
                        initResponse = _a.sent();
                        if (!initResponse) {
                            this.unlinkInstanceElement();
                            this._form._screen._captchas.splice(this._index, 1);
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    CaptchaWidget.prototype.isHidden = function () {
        return utils_1.isHidden(this.instanceElement);
    };
    CaptchaWidget.prototype.reload = function () {
        this._captchaHandler.reset();
    };
    CaptchaWidget.prototype.getToken = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_a) {
                return [2 /*return*/, this._captchaHandler.getToken()];
            });
        });
    };
    CaptchaWidget.CONSTS = exports.CaptchaWidget_CONSTS;
    return CaptchaWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.CaptchaWidget = CaptchaWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(CaptchaWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ConsentWidget.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ConsentWidget.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
exports.Consent_CONSTS = {
    selector: 'div.gigya-consent',
};
utils_1.DeepFreeze(exports.Consent_CONSTS);
var ConsentWidget = /** @class */ (function (_super) {
    tslib_1.__extends(ConsentWidget, _super);
    function ConsentWidget(_form, el) {
        // Turn resetCSS off.
        return _super.call(this, _form, el, false) || this;
    }
    ConsentWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this.loadWidget();
    };
    ConsentWidget.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        this.loadWidget();
    };
    ConsentWidget.prototype.loadWidget = function () {
        var accountInfo = this._screenSet.getApiData().getAccountInfo;
        var termName = this.instanceElement.getAttribute('name');
        var consent = window.gigya.utils.object.expressionHelper(accountInfo).getField(termName);
        if (consent && consent.isConsentGranted === true) {
            var docId = consent.docDate ? this.formatTime(consent.docDate) : consent.docVersion;
            var lastConsentModified = this.formatTime(consent.lastConsentModified);
            this.instanceElement.innerHTML = window.gigya.utils.templates.fill(this._screenSet.getTemplates().consent, {
                label: this.instanceElement.getAttribute('data-label'),
                docId: docId,
                approvedOnLabel: this.instanceElement.getAttribute('data-approved-on-label') || 'Approved on',
                approved: lastConsentModified,
            });
        }
    };
    ConsentWidget.prototype.formatTime = function (dateString) {
        var date = Date.parse(dateString); // returns NaN if it can't parse
        return isNaN(date) ? '' : new Date(date).toLocaleDateString();
    };
    ConsentWidget.CONSTS = exports.Consent_CONSTS;
    return ConsentWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.ConsentWidget = ConsentWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(ConsentWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ContainerWidget.ts":
/*!********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ContainerWidget.ts ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
exports.ContainerWidget_CONSTS = {
    selector: 'div.gigya-container',
    activeClass: 'gigya-container-enabled',
    emptyFields: 'data-empty-fields',
    displayCap: 'data-display-cap',
    displayFreq: 'data-display-freq',
    loginIdentities: 'data-login-idenities',
    conditionAttr: 'data-condition',
    onRenderAttr: 'data-on-render',
};
utils_1.DeepFreeze(exports.ContainerWidget_CONSTS);
var ContainerWidget = /** @class */ (function (_super) {
    tslib_1.__extends(ContainerWidget, _super);
    function ContainerWidget(_form, el) {
        var _this = _super.call(this, _form, el, false) || this;
        _this.onElementChange = function () { return _this.refresh(); };
        _this.name = el.getAttribute('name');
        _this.emptyFields = el.getAttribute(exports.ContainerWidget_CONSTS.emptyFields);
        if (_this.emptyFields)
            _form._autoSkipContainers.push(_this);
        if (_this.name && (el.getAttribute(exports.ContainerWidget_CONSTS.displayCap) || el.getAttribute(exports.ContainerWidget_CONSTS.displayFreq)))
            _form._needContainerHistory = true;
        _this.update(el);
        return _this;
    }
    ContainerWidget.prototype.update = function (el) {
        if (el === void 0) { el = this.instanceElement; }
        this.renderingConditions = registeredConditions(el, conditionSets.rendering);
        this.validationConditions = registeredConditions(el, conditionSets.validation);
    };
    ContainerWidget.prototype.checkAutoSkip = function () {
        return !dataEmptyFields(this.emptyFields, this);
    };
    ContainerWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        var shouldDisplay = this.testRendering();
        this.originalRenderingStatus = this.conditionStatus = shouldDisplay;
        if (this.originalRenderingStatus) {
            this.onElementChange();
        }
    };
    ContainerWidget.prototype.refresh = function () {
        var shouldDisplay = (this.validationPassed = this.testValidations());
        this.conditionStatus = this.originalRenderingStatus && shouldDisplay;
        if (this.conditionStatus) {
            window.gigya.utils.DOM.addClassToElement(this.instanceElement, exports.ContainerWidget_CONSTS.activeClass);
        }
        else {
            window.gigya.utils.DOM.removeClassFromElement(this.instanceElement, exports.ContainerWidget_CONSTS.activeClass);
        }
    };
    ContainerWidget.prototype.testRendering = function () {
        return this.testContainer(this.renderingConditions);
    };
    ContainerWidget.prototype.testValidations = function () {
        return this.testContainer(this.validationConditions);
    };
    ContainerWidget.prototype.testContainer = function (conditions) {
        var _this = this;
        // Testing if there's an empty required field in the container (stronger than all tests except those that override it)
        var fields = {
            hasRequiredEmptyFields: this.containsEmptyRequiredFields(),
        };
        var filterResults = utils_1.Every(conditions, function (cond) { return cond(_this, fields); });
        return fields.hasRequiredEmptyFields || filterResults;
    };
    ContainerWidget.prototype.containsEmptyRequiredFields = function () {
        var _this = this;
        if (!this._form.isPopulated)
            return false;
        var fields = utils_1.getElementsByHavingAttribute(this.instanceElement, '*', FormInput_1.FormInput_CONSTS.fieldName);
        var containsRequired = utils_1.Some(fields, function (field) {
            var fieldName = field.getAttribute(FormInput_1.FormInput_CONSTS.fieldName);
            if (fieldName) {
                var isRequired = _this._form.isRequiredField(fieldName);
                if (isRequired && !field.value)
                    return true;
            }
            return false;
        });
        return containsRequired;
    };
    ContainerWidget.prototype.getHistoryFromSettings = function () {
        var apiData = this._screenSet.getApiData();
        if (!this.name)
            return null;
        if (!apiData.getUserSettings || apiData.getUserSettings.errorCode > 0)
            return null;
        var containerHistories = apiData.getUserSettings.settings;
        if (!containerHistories)
            return null;
        var history = containerHistories[this.name] || {};
        if (!history.displayCount)
            history.displayCount = 0;
        if (!history.lastDisplay)
            history.lastDisplay = -1;
        return history;
    };
    ContainerWidget.prototype.saveHistoryInSettings = function (history) {
        var apiData = this._screenSet.getApiData();
        if (!apiData.getUserSettings || apiData.getUserSettings.errorCode > 0)
            return null;
        var containerHistories = apiData.getUserSettings.settings;
        if (!containerHistories)
            return null;
        containerHistories[this.name] = history;
        var settings = {};
        settings[this.name] = {
            displayCount: history.displayCount,
            lastDisplay: history.lastDisplay,
        };
        window.gigya.socialize.setUserSettings({
            group: 'gigya_container_history-' + this._form.ID,
            regToken: this._screenSet.data.regToken,
            settings: settings,
            disableLocalSettings: true,
        });
    };
    ContainerWidget.prototype.evaluateConditionalAttributes = function () {
        this.update(this.instanceElement);
        _super.prototype.evaluateConditionalAttributes.call(this);
        this.emptyFields = this.instanceElement.getAttribute(exports.ContainerWidget_CONSTS.emptyFields);
        if (this.originalRenderingStatus) {
            this.onElementChange();
        }
    };
    ContainerWidget.prototype.hasConditionalAttributes = function () {
        return true;
    };
    ContainerWidget.CONSTS = exports.ContainerWidget_CONSTS;
    return ContainerWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.ContainerWidget = ContainerWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(ContainerWidget);
function registeredConditions(el, conditionSet) {
    function bindCondition(value, condition, oneTime) {
        if (oneTime === void 0) { oneTime = false; }
        return function (container, fields) { return condition(value, container, oneTime); };
    }
    function bindOverriteFieldsCondition(value, condition) {
        return function (container, fields) {
            var result = condition(value, container);
            if (!result)
                fields.hasRequiredEmptyFields = false;
            return result;
        };
    }
    var selectedConditions = new Array();
    utils_1.ForEachProp(conditionSet, function (condition, attr) {
        if (el.getAttribute(attr)) {
            var value = el.getAttribute(attr);
            var oneTimeCondition = false;
            if (value && el.getAttribute(ContainerWidget.CONSTS.onRenderAttr) == 'true') {
                oneTimeCondition = true;
            }
            if (condition['overwriteFields'])
                selectedConditions.push(bindOverriteFieldsCondition(value, condition));
            else
                selectedConditions.push(bindCondition(value, condition, oneTimeCondition));
        }
    });
    return selectedConditions;
}
function dataDomains(value) {
    var allowedDomains = value.split(',');
    return utils_1.Some(allowedDomains, function (domain) { return window.gigya.pluginUtils.domain.isInDomain(domain); });
}
function dataApikeys(value) {
    var apikeys = value.split(',');
    return window.gigya.utils.array.indexOf(apikeys, window.gigya.thisScript.APIKey) != -1;
}
function dataProb(value, container) {
    // Show container based on probability
    return container._screenSet._random <= parseFloat(value);
}
function dataAfterDate(value) {
    var timeValue = window.gigya.global.date.getISODate(value); // Partner place date in ISO format
    return new Date().getTime() > timeValue.getTime();
}
function dataBeforeDate(value) {
    var timeValue = window.gigya.global.date.getISODate(value); // Partner place date in ISO format
    return new Date().getTime() <= timeValue.getTime();
}
function dataDisplayCap(value, container) {
    var containerHistory = container.getHistoryFromSettings();
    if (!containerHistory)
        return false;
    if (value <= containerHistory.displayCount)
        return false;
    if (!containerHistory.wasUpdated) {
        containerHistory.displayCount++;
        containerHistory.wasUpdated = true;
        container.saveHistoryInSettings(containerHistory);
    }
    return true;
}
function dataDisplayFreq(value, container) {
    var containerHistory = container.getHistoryFromSettings();
    if (!containerHistory)
        return false;
    var now = new Date().getTime();
    var timePassed = (now - containerHistory.lastDisplay) / 1000; // Miliseconds -> seconds
    if (containerHistory.lastDisplay !== -1 && value >= timePassed)
        return false;
    if (!containerHistory.wasUpdated) {
        containerHistory.lastDisplay = now;
        containerHistory.wasUpdated = true;
        container.saveHistoryInSettings(containerHistory);
    }
    return true;
}
function dataEmptyFields(value, container) {
    // TODO perhaps get the field instances from the form
    var checkEmptyFields = new Array();
    if (value === '*') {
        // all fields
        var inputs = utils_1.getElementsByHavingAttribute(container.instanceElement, '*', FormInput_1.FormInput_CONSTS.fieldName);
        utils_1.ForEach(inputs, function (i) {
            var name = i.getAttribute(FormInput_1.FormInput_CONSTS.fieldName);
            if (name)
                checkEmptyFields.push(i);
        });
    }
    else {
        // named fields
        utils_1.ForEach(value.split(','), function (fieldName) {
            var field = window.gigya.utils.DOM.getElementsByAttribute(container.instanceElement, '*', FormInput_1.FormInput_CONSTS.fieldName, fieldName)[0];
            checkEmptyFields.push(field);
        });
    }
    return utils_1.Some(checkEmptyFields, function (field) { return !field.value; });
}
var SpecialProviders;
(function (SpecialProviders) {
    SpecialProviders[SpecialProviders["social"] = 0] = "social";
    SpecialProviders[SpecialProviders["site"] = 1] = "site";
    SpecialProviders[SpecialProviders["siteOnly"] = 2] = "siteOnly";
    SpecialProviders[SpecialProviders["socialOnly"] = 3] = "socialOnly";
    SpecialProviders[SpecialProviders["siteAndSocial"] = 4] = "siteAndSocial";
    SpecialProviders[SpecialProviders["site-only"] = 2] = "site-only";
    SpecialProviders[SpecialProviders["social-only"] = 3] = "social-only";
    SpecialProviders[SpecialProviders["site-and-social"] = 4] = "site-and-social";
})(SpecialProviders = exports.SpecialProviders || (exports.SpecialProviders = {}));
utils_1.DeepFreeze(SpecialProviders);
loginIdentities['overwriteFields'] = true;
function loginIdentities(value, container) {
    var allowedProviders = value.split(',');
    var loginProvidersList = container._form.getLoginProviders();
    var site = utils_1.Some(allowedProviders, function (p) { return p === SpecialProviders[SpecialProviders.site]; });
    var anySocial = utils_1.Some(allowedProviders, function (p) { return p === SpecialProviders[SpecialProviders.social]; });
    var siteOnly = utils_1.Some(allowedProviders, function (p) { return p === SpecialProviders[SpecialProviders.siteOnly]; });
    var socialOnly = utils_1.Some(allowedProviders, function (p) { return p === SpecialProviders[SpecialProviders.socialOnly]; });
    var siteAndSocial = utils_1.Some(allowedProviders, function (p) { return p === SpecialProviders[SpecialProviders.siteAndSocial]; });
    var hasSocial;
    var hasSite;
    var loginProviders;
    if (typeof loginProvidersList !== 'string') {
        // no list everything is allowed, specific options will fail
        loginProviders = [];
        hasSocial = hasSite = true;
    }
    else {
        loginProviders = loginProvidersList.split(',');
        hasSocial = utils_1.Some(loginProviders, function (p) { return p !== SpecialProviders[SpecialProviders.site]; });
        hasSite = utils_1.Some(loginProviders, function (p) { return p === SpecialProviders[SpecialProviders.site]; });
    }
    if (siteOnly)
        return hasSite && !hasSocial;
    if (socialOnly)
        return hasSocial && !hasSite;
    if (siteAndSocial)
        return hasSite && hasSocial;
    if (anySocial)
        return hasSocial;
    if (site)
        return hasSite;
    var hasMatchingProvider = utils_1.Some(allowedProviders, function (ap) { return utils_1.Some(loginProviders, function (lp) { return lp === ap; }); });
    return hasMatchingProvider;
}
function dataCondition(value, container, oneTime) {
    if (oneTime === void 0) { oneTime = false; }
    if (oneTime && container.validationPassed) {
        return true;
    }
    return Boolean(container.evaluateExpression({ condition: value }));
}
var conditionSets = {
    rendering: {
        'data-domains': dataDomains,
        'data-apikeys': dataApikeys,
        'data-prob': dataProb,
        'data-after-date': dataAfterDate,
        'data-before-date': dataBeforeDate,
        'data-display-cap': dataDisplayCap,
        'data-display-freq': dataDisplayFreq,
        'data-empty-fields': dataEmptyFields,
        'data-login-identities': loginIdentities,
    },
    validation: {
        'data-condition': dataCondition,
    },
};


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ImageWidget.ts":
/*!****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ImageWidget.ts ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var ScreenSetPlugin_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin.ts");
exports.Image_CONSTS = {
    selector: 'div.gigya-image',
    srcAttribute: 'data-src',
    widthAttribute: 'data-width',
    heightAttribute: 'data-height',
    backgroundSizeAttribute: 'data-background-size',
};
utils_1.DeepFreeze(exports.Image_CONSTS);
var ImageWidget = /** @class */ (function (_super) {
    tslib_1.__extends(ImageWidget, _super);
    function ImageWidget(_form, el) {
        // Turn resetCSS off.
        return _super.call(this, _form, el, false) || this;
    }
    ImageWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this.setBackgroundImage();
    };
    ImageWidget.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        // Handle case where attributes are updated via conditional attr.
        this.setBackgroundImage();
    };
    /**
     * Set background image and handle HTTPS proxying.
     */
    ImageWidget.prototype.setBackgroundImage = function () {
        var el = this.instanceElement;
        // Get attributes from elements.
        var src = el.getAttribute(ImageWidget.CONSTS.srcAttribute);
        var width = el.getAttribute(ImageWidget.CONSTS.widthAttribute);
        var height = el.getAttribute(ImageWidget.CONSTS.heightAttribute);
        var backgroundSize = el.getAttribute(ImageWidget.CONSTS.backgroundSizeAttribute);
        // Hide element if no src provided.
        if (!src) {
            window.gigya.utils.DOM.addClassToElement(this.instanceElement, ScreenSetPlugin_1.ScreenSet_CONSTS.gigyaHidden);
            return;
        }
        window.gigya.utils.DOM.removeClassFromElement(this.instanceElement, ScreenSetPlugin_1.ScreenSet_CONSTS.gigyaHidden);
        // Set width and height.
        if (width) {
            el.style.width = this.getSize(width);
        }
        if (height) {
            el.style.height = this.getSize(height);
        }
        // Set default background size if none set.
        if (!backgroundSize) {
            el.setAttribute(ImageWidget.CONSTS.backgroundSizeAttribute, 'fit');
        }
        // Since this is processed on every conditional expression, we don't want to re-calculate secure photo URLs every time.
        // The CDN rotates and we'll get a new URL each time, leading to the image being reloaded.
        if (this.prevSrc !== src) {
            this.prevSrc = src;
            // Avoid both HTTPS and embedded images.
            if (window.gigya.localInfo.protocol === 'https' && src.indexOf('http://') === 0) {
                src = window.gigya.global.getPhotoURL(src);
            }
            // Set background image.
            el.style.backgroundImage = "url(\"" + src + "\")";
        }
    };
    /**
     * Translate width/height to CSS-ready value.
     */
    ImageWidget.prototype.getSize = function (size) {
        var sizeNumber = Number(size);
        if (isNaN(sizeNumber)) {
            // Size included dimension already.
            return size;
        }
        else {
            // Just a number was passed. Add "px" to it.
            return size + 'px';
        }
    };
    ImageWidget.CONSTS = exports.Image_CONSTS;
    return ImageWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.ImageWidget = ImageWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(ImageWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/LogInAvailabilityWidget.ts":
/*!****************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/LogInAvailabilityWidget.ts ***!
  \****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
exports.LoginAvailabilityWidget_CONSTS = {
    selector: 'div.gigya-loginID-availability',
    boundTo: 'data-bound-to',
};
utils_1.DeepFreeze(exports.LoginAvailabilityWidget_CONSTS);
var LoginAvailabilityWidget = /** @class */ (function (_super) {
    tslib_1.__extends(LoginAvailabilityWidget, _super);
    function LoginAvailabilityWidget(form, el) {
        var _this = _super.call(this, form, el) || this;
        _this.init(form, el);
        return _this;
    }
    LoginAvailabilityWidget.prototype.init = function (form, el) {
        var _this = this;
        this.loginIdStateListener = function (state) { return _this.onLoginIdStateChange(state, true); };
        this.originalDisplay = el.style.display;
        this.reset(el);
    };
    LoginAvailabilityWidget.prototype.reset = function (el) {
        this.boundedField =
            this._form.getField(el.getAttribute(LoginAvailabilityWidget.CONSTS.boundTo)) ||
                this._form.getField('loginID') ||
                this._form.getField('username') ||
                this._form.getField('email');
        if (this.boundedField) {
            this.boundedField['_serverValidateAvaliability'] = true; // trigger the server validation of the loginId
            this.boundedField.addValidityStateListener(this.loginIdStateListener);
        }
        else {
            this.warn(exports.LoginAvailabilityWidget_CONSTS.selector + ' is missing a field to bound to');
        }
    };
    LoginAvailabilityWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.boundedField)
            this.onLoginIdStateChange(this.boundedField.getValidityState(), false);
    };
    LoginAvailabilityWidget.prototype.unlinkTemplate = function () {
        if (this.boundedField)
            this.boundedField.removeValidityStateListener(this.loginIdStateListener);
        _super.prototype.unlinkTemplate.call(this);
    };
    LoginAvailabilityWidget.prototype.onLoginIdStateChange = function (state, fromServer) {
        if (!fromServer)
            // treat local validations as no relevant to widget
            state = FormInput_1.ValidityStates._undefined;
        if (!this.instanceElement)
            return;
        window.gigya.utils.DOM.removeClassFromElement(this.instanceElement, 'gigya-loginID-availability-progress');
        window.gigya.utils.DOM.removeClassFromElement(this.instanceElement, 'gigya-loginID-availability-not-available');
        window.gigya.utils.DOM.removeClassFromElement(this.instanceElement, 'gigya-loginID-availability-available');
        switch (state) {
            case FormInput_1.ValidityStates.valid:
                this.instanceElement.style.display = this.originalDisplay;
                this.instanceElement.innerHTML = this._screenSet.getText('available');
                window.gigya.utils.DOM.addClassToElement(this.instanceElement, 'gigya-loginID-availability-available');
                break;
            case FormInput_1.ValidityStates.error:
                this.instanceElement.style.display = this.originalDisplay;
                this.instanceElement.innerHTML = this._screenSet.getText('not_available');
                window.gigya.utils.DOM.addClassToElement(this.instanceElement, 'gigya-loginID-availability-not-available');
                break;
            case FormInput_1.ValidityStates.pending:
                this.instanceElement.style.display = this.originalDisplay;
                this.instanceElement.innerHTML = this._screenSet.getText('checking');
                window.gigya.utils.DOM.addClassToElement(this.instanceElement, 'gigya-loginID-availability-progress');
                break;
            default:
                this.instanceElement.innerHTML = '';
                this.instanceElement.style.display = 'none';
                break;
        }
    };
    LoginAvailabilityWidget.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        /// if [for some reason] this widget need to support conditional attrs...
        // this.reset(this.instanceElement);
    };
    LoginAvailabilityWidget.CONSTS = exports.LoginAvailabilityWidget_CONSTS;
    return LoginAvailabilityWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.LoginAvailabilityWidget = LoginAvailabilityWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(LoginAvailabilityWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/MyPhotoWidget.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/MyPhotoWidget.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var nextGeneratedContainerId = 0;
exports.MyPhotoWidget_CONSTS = {
    selector: 'div.gigya-myPhoto',
};
utils_1.DeepFreeze(exports.MyPhotoWidget_CONSTS);
var MyPhotoWidget = /** @class */ (function (_super) {
    tslib_1.__extends(MyPhotoWidget, _super);
    function MyPhotoWidget(_screen, el) {
        var _this = _super.call(this, _screen, el) || this;
        _this.containerId = _this._screenSet.containerID + '_myPhoto_' + nextGeneratedContainerId++;
        return _this;
    }
    MyPhotoWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.instanceElement) {
            if (this.instanceElement)
                this.instanceElement.innerHTML = '<div id="' + this.containerId + '"></div>';
            if (!this.params['containerID']) {
                this.widgetParams = this.params;
                this.renderWidget();
            }
        }
    };
    MyPhotoWidget.prototype.unlinkInstanceElement = function () {
        if (this.instanceElement)
            this.instanceElement.innerHTML = ''; // To make sure no ID conflicts will be generated
        if (this._instance)
            this._instance.dispose();
        _super.prototype.unlinkInstanceElement.call(this);
    };
    MyPhotoWidget.prototype.renderWidget = function () {
        var _this = this;
        //re-render the plugin with the new new conditional values.
        window.gigya.accounts.showMyPhotoUI(this.widgetParams, {
            containerID: this.containerId,
            lang: this._screenSet.lang,
            regToken: this._screenSet.params['regToken'],
            getInstance: function (instance) {
                _this._instance = instance;
            },
            onLoad: function () {
                _this._screenSet.centerModal();
            },
        });
        this.renderWidgetUI = false;
    };
    MyPhotoWidget.CONSTS = exports.MyPhotoWidget_CONSTS;
    return MyPhotoWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.MyPhotoWidget = MyPhotoWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(MyPhotoWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordStrengthWidget.ts":
/*!***************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordStrengthWidget.ts ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
exports.DisplayModes = {
    policy: {
        hasMinimumRequirements: true,
        hasStrengthMeter: false,
        getTemplate: function (templates) {
            return templates.passwordStrength_minimumRequirements;
        },
    },
    meter: {
        hasMinimumRequirements: false,
        hasStrengthMeter: true,
        getTemplate: function (templates) {
            return templates.passwordStrength_strengthMeter;
        },
    },
    combined: {
        hasMinimumRequirements: true,
        hasStrengthMeter: true,
        getTemplate: function (templates) {
            return templates.passwordStrength_strengthMeter + templates.passwordStrength_minimumRequirements;
        },
    },
};
var BubbleOrientations;
(function (BubbleOrientations) {
    BubbleOrientations[BubbleOrientations["right"] = 0] = "right";
    BubbleOrientations[BubbleOrientations["left"] = 1] = "left";
    BubbleOrientations[BubbleOrientations["up"] = 2] = "up";
    BubbleOrientations[BubbleOrientations["down"] = 3] = "down";
    BubbleOrientations[BubbleOrientations["none"] = 4] = "none";
})(BubbleOrientations = exports.BubbleOrientations || (exports.BubbleOrientations = {}));
utils_1.DeepFreeze(BubbleOrientations);
exports.PasswordStrengthWidget_CONSTS = {
    selector: 'div.gigya-password-strength',
    bubbleClass: 'gigya-password-strength-bubble',
    mobileClass: 'mobile-bubble',
    desktopClass: 'desktop-bubble',
    displayMode: 'data-display-mode',
    bubble: 'data-on-focus-bubble',
    bubbleOrientation: 'data-bubble-orientation',
};
utils_1.DeepFreeze(exports.PasswordStrengthWidget_CONSTS);
var PasswordStrengthWidget = /** @class */ (function (_super) {
    tslib_1.__extends(PasswordStrengthWidget, _super);
    function PasswordStrengthWidget(form, el) {
        var _this = _super.call(this, form, el) || this;
        _this.bubbleLastTop = '';
        _this.originalClass = el.className;
        _this.originalStyle = el.getAttribute('style');
        _this.originalDisplay = el.style.display;
        el.style.display = 'none';
        // Automatically bound to the form password field
        _this._passwordField = form.getField('newPassword') || form.getField('password');
        if (!_this._passwordField) {
            _this.warn(exports.PasswordStrengthWidget_CONSTS.selector + "'s form is missing password field to bound to");
            return _this;
        }
        _this.getText = function (t) { return _this._screenSet.getText(t); };
        _this.displayMode = exports.DisplayModes[el.getAttribute(exports.PasswordStrengthWidget_CONSTS.displayMode)] || exports.DisplayModes['combined'];
        _this.template = window.gigya.utils.templates.fill(_this._screenSet.getTemplates().passwordStrength, {
            content: _this.displayMode.getTemplate(_this._screenSet.getTemplates()),
        });
        _this.isBubble = Boolean(el.getAttribute(exports.PasswordStrengthWidget_CONSTS.bubble));
        if (_this.isBubble) {
            _this.bubbleOrientation = BubbleOrientations[el.getAttribute(exports.PasswordStrengthWidget_CONSTS.bubbleOrientation)];
            if (typeof _this.bubbleOrientation === 'undefined')
                _this.bubbleOrientation = _this._screenSet.isModal ? BubbleOrientations.left : BubbleOrientations.up;
            _this.bubbleID = _this._screenSet.params.containerID + '_bubble';
            _this.onBlur = function () { return _this.hideBubble(); };
            _this.onFocus = function () { return _this.showBubble(); };
            _this.onScroll = function () {
                var balloonDiv = window.gigya.global['divGMBalloon'];
                if (balloonDiv && balloonDiv.style.top == _this.bubbleLastTop)
                    _this.refreshBubble();
            };
        }
        _this.fnKeyUp = function () { return _this.onPasswordChange(); };
        window.gigya.utils.DOM.addEventListener(_this._passwordField, 'keyup', _this.fnKeyUp);
        if (_this.isBubble) {
            _this._passwordField.addEventListener('focus', _this.onFocus);
            _this._passwordField.addEventListener('blur', _this.onBlur);
            window.gigya.utils.DOM.addEventListener(document, 'scroll', _this.onScroll);
        }
        _this._screenSet.onRefreshExternalComponentsEvent().add(function () {
            _this.refreshBubble();
        });
        return _this;
    }
    PasswordStrengthWidget.prototype.unlinkTemplate = function () {
        window.gigya.utils.DOM.removeEventListener(document, 'scroll', this.onScroll);
        if (this._passwordField) {
            if (this.isBubble) {
                this._passwordField.removeEventListener('blur', this.onBlur);
                this._passwordField.removeEventListener('focus', this.onFocus);
            }
            this.hideBubble();
            window.gigya.utils.DOM.removeEventListener(this._passwordField, 'keyup', this.fnKeyUp);
        }
        _super.prototype.unlinkTemplate.call(this);
    };
    PasswordStrengthWidget.prototype.showBubble = function () {
        this.instanceElement.style.display = '';
        var bubbleW = this.instanceElement.offsetWidth || 250;
        this.instanceElement.style.display = 'none';
        var bubbleClasses = exports.PasswordStrengthWidget_CONSTS.bubbleClass +
            ' ' +
            (this._screenSet.isMobileUI ? exports.PasswordStrengthWidget_CONSTS.mobileClass : exports.PasswordStrengthWidget_CONSTS.desktopClass);
        var styleCalculator = document.createElement('div');
        styleCalculator.setAttribute('style', this.instanceElement.getAttribute('style'));
        if (styleCalculator.style.display === 'none')
            styleCalculator.style.display = '';
        var bubbleHTML = '<div id="' +
            this.bubbleID +
            '_content" class="' +
            this.instanceElement.className +
            '" style="' +
            styleCalculator.getAttribute('style') +
            '">' +
            this.getPasswordBubbleContent() +
            '</div>';
        window.gigya.global.putGMBalloonNextTo(this._passwordField.instanceElement, bubbleHTML, null, bubbleW, null, true, this.bubbleID, true, this.getBubbleOrientations(), bubbleClasses);
        this.isBubbleVisible = true;
        this.bubbleLastTop = window.gigya.global['divGMBalloon'].style.top;
    };
    PasswordStrengthWidget.prototype.getBubbleOrientations = function () {
        var orientations = [BubbleOrientations[this.bubbleOrientation]];
        var first = orientations[0];
        var up = BubbleOrientations[BubbleOrientations.up];
        var down = BubbleOrientations[BubbleOrientations.down];
        // add or set up orientation
        if (typeof first === 'undefined')
            first = up;
        else if (first !== up)
            orientations.push(up);
        // add down orientation
        if (first !== down)
            orientations.push(down);
        return orientations;
    };
    PasswordStrengthWidget.prototype.hideBubble = function () {
        window.gigya.global.removeGMBalloon();
        this.isBubbleVisible = false;
    };
    PasswordStrengthWidget.prototype.getPasswordBubbleContent = function () {
        var item = {
            TEXT: this.getText,
        };
        var oPassStrength = getPasswordStrengthData(String(this._passwordField.getValue()));
        var apiData = this._screenSet.getApiData();
        var oComplexity = apiData.getPolicies ? apiData.getPolicies.passwordComplexity : null;
        if (!oComplexity)
            oComplexity = {};
        oComplexity.minLength = oComplexity.minLength || 0;
        oComplexity.minCharGroups = oComplexity.minCharGroups || 0;
        if (this.displayMode.hasStrengthMeter) {
            var score = 0;
            var scoreTextID = 'too_weak';
            if (isPasswordStrengthValid(String(this._passwordField.getValue()), oPassStrength, oComplexity)) {
                scoreTextID = 'weak';
                if (oPassStrength.length > 4)
                    score += 40;
                if (oPassStrength.length > 5)
                    score += 21; // combines score = 61
                if (oPassStrength.length > 7)
                    score += 18; // combines score = 79
                if (oPassStrength.charGroups > 1)
                    score += 21;
                if (oPassStrength.charGroups > 2)
                    score += 17; // combines score += 38
                if (oPassStrength.charGroups > 3)
                    score += 23; // combines score += 61
                if (score > 60)
                    scoreTextID = 'fair';
                if (score > 80)
                    scoreTextID = 'strong';
                if (score > 100)
                    scoreTextID = 'very_strong';
            }
            item.score = score;
            item.scoreClass = 'gigya-passwordStrength-' + scoreTextID;
            item.scoreText = this._screenSet.getText(scoreTextID);
            item.barIndicatorClass = 'gigya-passwordStrength-bar-' + scoreTextID;
        }
        if (this.displayMode.hasMinimumRequirements) {
            var arRequirements = [];
            if (oComplexity.minLength > 0) {
                var minLengthText = this._screenSet.getText('num_characters_total', '%num', oComplexity.minLength);
                if (minLengthText)
                    arRequirements.push(minLengthText);
            }
            if (oComplexity.minCharGroups > 0) {
                var minCharGroupsText = this._screenSet.getText('num_of_the_following_groups', '%num', oComplexity.minCharGroups);
                if (minCharGroupsText)
                    arRequirements.push(minCharGroupsText);
            }
            item.requirements = '';
            if (arRequirements.length > 0) {
                var lastReq = arRequirements.pop();
                item.requirements = this._screenSet.getText('password_must_contain_at_least') + ' ';
                if (arRequirements.length > 0)
                    item.requirements += arRequirements.join(', ') + ' ' + this._screenSet.getText('and') + ' ';
                item.requirements += lastReq;
            }
            item.requirements = window.gigya.pluginUtils.text.fixTextWidows(item.requirements);
        }
        return window.gigya.utils.templates.fill(this.template, item);
    };
    PasswordStrengthWidget.prototype.onPasswordChange = function () {
        var html = this.getPasswordBubbleContent();
        if (this.isBubble) {
            document.getElementById(this.bubbleID + '_content').innerHTML = html;
        }
        else {
            // inline display
            this.instanceElement.innerHTML = html;
            this.instanceElement.style.display = this.originalDisplay;
        }
    };
    PasswordStrengthWidget.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        if (this.isBubble) {
            this.bubbleOrientation = BubbleOrientations[this.instanceElement.getAttribute(exports.PasswordStrengthWidget_CONSTS.bubbleOrientation)];
            if (typeof this.bubbleOrientation === 'undefined')
                this.bubbleOrientation = this._screenSet.isModal ? BubbleOrientations.left : BubbleOrientations.up;
        }
    };
    PasswordStrengthWidget.prototype.refreshBubble = function () {
        if (this.isBubbleVisible) {
            this.showBubble();
        }
    };
    PasswordStrengthWidget.CONSTS = exports.PasswordStrengthWidget_CONSTS;
    return PasswordStrengthWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.PasswordStrengthWidget = PasswordStrengthWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(PasswordStrengthWidget);
function passwordStrengthMatchToNumber(match) {
    if (match && match.length)
        return match.length;
    return 0;
}
function getPasswordStrengthData(pass) {
    if (!pass)
        pass = '';
    var oResult = {
        lower: passwordStrengthMatchToNumber(pass.match(/[a-z]/g)),
        upper: passwordStrengthMatchToNumber(pass.match(/[A-Z]/g)),
        digits: passwordStrengthMatchToNumber(pass.match(/\d/g)),
        specialChars: passwordStrengthMatchToNumber(pass.match(/[^\dA-Za-z]/g)),
        length: pass.length,
        charGroups: 0,
    };
    if (oResult.lower)
        oResult.charGroups++;
    if (oResult.upper)
        oResult.charGroups++;
    if (oResult.digits)
        oResult.charGroups++;
    if (oResult.specialChars)
        oResult.charGroups++;
    return oResult;
}
exports.getPasswordStrengthData = getPasswordStrengthData;
function isPasswordStrengthValid(pass, oPassStrength, oComplexityPolicy) {
    if (!pass || !oPassStrength || !oComplexityPolicy)
        return;
    if (oComplexityPolicy.regExp) {
        var regexFormat = new RegExp(oComplexityPolicy.regExp);
        return regexFormat.test(pass);
    }
    else {
        return !(oPassStrength.lower < oComplexityPolicy.minLowercase ||
            oPassStrength.upper < oComplexityPolicy.minUppercase ||
            oPassStrength.digits < oComplexityPolicy.minDigit ||
            oPassStrength.specialChars < oComplexityPolicy.minSpecialChars ||
            oPassStrength.charGroups < oComplexityPolicy.minCharGroups ||
            oPassStrength.length < oComplexityPolicy.minLength);
    }
}
exports.isPasswordStrengthValid = isPasswordStrengthValid;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhotoUploadWidget.ts":
/*!**********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhotoUploadWidget.ts ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseUploadWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseUploadWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseUploadWidget.ts");
var BaseServerWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var nextDownloadContext = 0;
exports.PhotoUploadWidget_CONSTS = {
    selector: 'div.gigya-photo-upload',
};
utils_1.DeepFreeze(exports.PhotoUploadWidget_CONSTS);
var PhotoUploadWidget = /** @class */ (function (_super) {
    tslib_1.__extends(PhotoUploadWidget, _super);
    function PhotoUploadWidget(_form, el) {
        var _this = _super.call(this, _form, el) || this;
        _this.photoElementID = _this._uploadIframeID + '_photo';
        _this.pathContainerID = _this._uploadIframeID + '_path';
        _this.defaultBGImage = window.gigya._.getCdnResource() + '/gs/i/accounts/avatar_64.png'; // TODO This should be replaced by CSS
        var template = _this._screenSet.getTemplates().photoUpload_ui;
        _this.uiHtml = window.gigya.utils.templates.fill(template, {
            pathContainerID: _this.pathContainerID,
            photoElementID: _this.photoElementID,
            choose_file: _this._screenSet.getText('choose_file'),
            no_file_chosen: _this._screenSet.getText('no_file_chosen'),
            tip: _this._screenSet.getText('maximum_size_of_3mb.') + ' JPG, GIF, PNG.',
        });
        el.innerHTML = '';
        if (window.gigya.localInfo.isIE9 || window.gigya.localInfo.isIE8) {
            _this._form.filters.push({
                filterOutWidgetsToSend: function (dataToFilter) {
                    if (dataToFilter.profile) {
                        delete dataToFilter.profile._profilePhoto;
                    }
                    return dataToFilter;
                },
            });
        }
        return _this;
    }
    PhotoUploadWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        // add instance ui
        this.uiDiv = document.createElement('div');
        this.uiDiv.innerHTML = this.uiHtml;
        this.instanceElement.appendChild(this.uiDiv);
        this.restoreDefaultBg();
    };
    PhotoUploadWidget.prototype.unlinkInstanceElement = function () {
        this.instanceElement.removeChild(this.uiDiv);
        this.uiDiv = null;
        _super.prototype.unlinkInstanceElement.call(this);
    };
    PhotoUploadWidget.prototype.restoreDefaultBg = function () {
        var elPhoto = document.getElementById(this.photoElementID);
        if (elPhoto)
            elPhoto.style.backgroundImage = "url('" + this.defaultBGImage + "')";
    };
    PhotoUploadWidget.prototype.getFormHtml = function () {
        return window.gigya.utils.templates.fill(this._screenSet.getTemplates().photoUpload_form, {
            formTarget: this._uploadIframeID,
        });
    };
    PhotoUploadWidget.prototype.getFormElement = function () {
        return this._formDiv.getElementsByTagName('form')[0];
    };
    PhotoUploadWidget.prototype.getFileElement = function () {
        return this._uploadForm.elements['_profilePhoto'];
    };
    PhotoUploadWidget.prototype.submitUploadForm = function () {
        // set up new action & responseId
        this.lastResponseId = this._uploadIframeID + '_' + this._lastQueryId;
        var formAction = window.gigya.utils.stringUtils.format("https://" + window.gigya._.getApiDomain('accounts') + "/accounts.uploadProfilePhoto?publish=true&context={0}&saveResponseID={0}&{1}", this.lastResponseId, window.gigya.utils.keyValue.serialize(this.getServerParameters()));
        this._uploadForm.action = formAction;
        // place upload image
        var pathElement = document.getElementById(this.pathContainerID);
        pathElement.style.backgroundImage = "url('" + window.gigya._.getCdnResource() + "/gs/i/accounts/smallLoader.gif')";
        _super.prototype.submitUploadForm.call(this);
    };
    PhotoUploadWidget.prototype.serverQueryDone = function (newState) {
        var _this = this;
        this.stopUploadCheck();
        // get last error from server since iframe does not report errors across domains
        var params = window.gigya.utils.object.removeUndefined(this.getServerParameters());
        params.saveResponseID = this.lastResponseId;
        params.noAuth = true;
        delete params.login_token;
        delete params.regToken;
        window.gigya._.apiAdapter.sendRequest('socialize.getSavedResponse', params, function (res) { return _this.onUploadSavedResponse(res); }, {
            jsSdkRequestId: this.lastResponseId,
        });
    };
    PhotoUploadWidget.prototype.onUploadSavedResponse = function (res) {
        var pathElement = document.getElementById(this.pathContainerID);
        pathElement.style.backgroundImage = '';
        switch (res.errorCode) {
            case GSErrors_1.GSErrors.OK:
                this.onUploadSuccess();
                break;
            case GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE: // Assume request did not reach the server due to IIS blocking large files
                this.onServerError({
                    errorCode: GSErrors_1.GSErrors.PROFILE_PHOTO_TOO_LARGE,
                    errorMessage: this._screenSet.getText('profilePhoto_fileSizeError'),
                });
                break;
            default:
                // Any other error
                this.onServerError(res);
                break;
        }
    };
    PhotoUploadWidget.prototype.onUploadSuccess = function () {
        var _this = this;
        // Get the new image from the server
        var elPath = document.getElementById(this.pathContainerID);
        if (elPath)
            elPath.style.backgroundImage = '';
        var getProfilePhotoParams = this.getServerParameters();
        getProfilePhotoParams.type = 'thumbnail';
        getProfilePhotoParams.context = this._uploadIframeID + ++nextDownloadContext;
        var img = new Image();
        var thumbnailUrlDomain = window.gigya._.getApiDomain('accounts');
        var thumbnailUrl = (getProfilePhotoParams.login_token || getProfilePhotoParams.regToken ? 'https' : window.gigya.localInfo.protocol) + "://" + thumbnailUrlDomain + "/accounts.getProfilePhoto?" + window.gigya.utils.keyValue.serialize(getProfilePhotoParams);
        img.onload = function () {
            var elPhoto = document.getElementById(_this.photoElementID);
            var imageUrl = img.src;
            if (elPhoto)
                elPhoto.style.backgroundImage = "url('" + imageUrl + "')";
            _this._form._screen.setProfilePhoto(imageUrl);
            img = img.onload = img.onerror = null; // remove memory leak
        };
        img.onerror = function () {
            _this.onServerError({
                errorCode: GSErrors_1.GSErrors.RESOURCE_NOT_FOUND,
                errorMessage: 'Profile photo inaccesible.',
            });
            _this._form._screen.setProfilePhoto('');
            img = img.onload = img.onerror = null; // remove memory leak
        };
        img.src = thumbnailUrl;
        _super.prototype.serverQueryDone.call(this, BaseServerWidget_1.ServerStates.Done);
    };
    PhotoUploadWidget.prototype.onServerError = function (response) {
        this.restoreDefaultBg();
        this._form._screen._screenSet.onScreenResponse(response, this._form);
        _super.prototype.serverQueryDone.call(this, BaseServerWidget_1.ServerStates.Error);
    };
    PhotoUploadWidget.CONSTS = exports.PhotoUploadWidget_CONSTS;
    return PhotoUploadWidget;
}(BaseUploadWidget_1.BaseUploadWidget));
exports.PhotoUploadWidget = PhotoUploadWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(PhotoUploadWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ProfilePhotoWidget.ts":
/*!***********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ProfilePhotoWidget.ts ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
exports.ProfilePhotoWidget_CONSTS = {
    selector: 'div.gigya-profile-photo',
};
utils_1.DeepFreeze(exports.ProfilePhotoWidget_CONSTS);
var ProfilePhotoWidget = /** @class */ (function (_super) {
    tslib_1.__extends(ProfilePhotoWidget, _super);
    function ProfilePhotoWidget(_screen, el) {
        var _this = _super.call(this, _screen, el) || this;
        _screen._profilePhotos.push(_this);
        return _this;
    }
    ProfilePhotoWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        var profile = this._screenSet.getProfile();
        var thumbnailURL = profile.thumbnailURL ? window.gigya.global.getPhotoURL(profile.thumbnailURL) : '';
        this.setThumbnailUrl(thumbnailURL);
    };
    ProfilePhotoWidget.prototype.setThumbnailUrl = function (thumbnailURL) {
        this.instanceElement.innerHTML = thumbnailURL ? '<img src="' + thumbnailURL + '" />' : '';
    };
    ProfilePhotoWidget.CONSTS = exports.ProfilePhotoWidget_CONSTS;
    return ProfilePhotoWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.ProfilePhotoWidget = ProfilePhotoWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(ProfilePhotoWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/RequiredDisplayWidget.ts":
/*!**************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/RequiredDisplayWidget.ts ***!
  \**************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var ScreenSetPlugin_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin.ts");
exports.RequiredDisplayWidget_CONSTS = {
    selector: '.gigya-required-display',
    boundTo: 'data-bound-to',
};
utils_1.DeepFreeze(exports.RequiredDisplayWidget_CONSTS);
var RequiredDisplayWidget = /** @class */ (function (_super) {
    tslib_1.__extends(RequiredDisplayWidget, _super);
    function RequiredDisplayWidget(form, el) {
        var _this = _super.call(this, form, el) || this;
        // The asterisk may be hidden by default. We'll replace this with the gigya-hidden class.
        if (el.style.display === 'none') {
            el.style.display = '';
        }
        // WCAG: Don't read the asterisk to user when using screen reader.
        // The form element has aria-required which will convey to the user that the field is required.
        el.setAttribute('aria-hidden', 'true');
        return _this;
    }
    RequiredDisplayWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this.updateVisibility();
    };
    RequiredDisplayWidget.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        this.updateVisibility();
    };
    RequiredDisplayWidget.prototype.updateBoundedField = function (field) {
        this.boundTo = this.instanceElement.getAttribute(exports.RequiredDisplayWidget_CONSTS.boundTo);
        this.boundToField = field;
    };
    RequiredDisplayWidget.prototype.updateVisibility = function () {
        var el = this.instanceElement;
        if (el) {
            this.boundTo = el.getAttribute(exports.RequiredDisplayWidget_CONSTS.boundTo);
            if (!this.boundTo) {
                this.warn(exports.RequiredDisplayWidget_CONSTS.selector + " is missing " + exports.RequiredDisplayWidget_CONSTS.boundTo + " attribute");
                this.hide();
                return;
            }
            this.boundToField = this._form.getField(this.boundTo, this.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.arrayKeyValueAttribute));
            if (!this.boundToField) {
                this.warn(exports.RequiredDisplayWidget_CONSTS.selector + "'s form is missing field " + this.boundTo + " to bound to");
                this.hide();
                return;
            }
        }
        if (this.boundToField && this.boundToField.required()) {
            this.show();
        }
        else {
            this.hide();
        }
    };
    RequiredDisplayWidget.prototype.show = function () {
        window.gigya.utils.DOM.removeClassFromElement(this.instanceElement, ScreenSetPlugin_1.ScreenSet_CONSTS.gigyaHidden);
    };
    RequiredDisplayWidget.prototype.hide = function () {
        window.gigya.utils.DOM.addClassToElement(this.instanceElement, ScreenSetPlugin_1.ScreenSet_CONSTS.gigyaHidden);
    };
    RequiredDisplayWidget.CONSTS = exports.RequiredDisplayWidget_CONSTS;
    return RequiredDisplayWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.RequiredDisplayWidget = RequiredDisplayWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(RequiredDisplayWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SecretQuestionWidget.ts":
/*!*************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SecretQuestionWidget.ts ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var TemplateElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
exports.SecretQuestionWidget_CONSTS = {
    selector: 'div.gigya-secret-question',
    allowEmpty: 'data-allow-empty',
};
utils_1.DeepFreeze(exports.SecretQuestionWidget_CONSTS);
var SecretQuestionWidget = /** @class */ (function (_super) {
    tslib_1.__extends(SecretQuestionWidget, _super);
    function SecretQuestionWidget(form, el) {
        var _this = _super.call(this, form, el, false) || this;
        _this.questions = new Array();
        form._secretQuestions.push(_this);
        var questionElements = el.querySelectorAll('*[name="secretQuestion"]');
        utils_1.ForEach(questionElements, function (questionEl) { return _this.questions.push(new QuestionElement(questionEl, _this)); });
        _this.answerField = form.getField('secretAnswer');
        if (!_this.answerField) {
            _this.warn(exports.SecretQuestionWidget_CONSTS.selector + "'s form is missing secretAnswer field to link to");
            return _this;
        }
        return _this;
    }
    SecretQuestionWidget.prototype.unlinkTemplate = function () {
        utils_1.ForEach(this.questions, function (q) { return q.unlinkTemplate(); });
        _super.prototype.unlinkTemplate.call(this);
    };
    SecretQuestionWidget.prototype.linkInstanceElement = function (parent) {
        var _this = this;
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.instanceElement) {
            if (this.answerField)
                this.answerField.instanceElement.setAttribute(exports.SecretQuestionWidget_CONSTS.allowEmpty, '1'); // TODO perhaps use a different value
            utils_1.ForEach(this.questions, function (q) { return q.linkInstanceElement(_this.instanceElement); });
        }
    };
    SecretQuestionWidget.prototype.unlinkInstanceElement = function () {
        if (this.instanceElement)
            utils_1.ForEach(this.questions, function (q) { return q.unlinkInstanceElement(); });
        _super.prototype.unlinkInstanceElement.call(this);
    };
    SecretQuestionWidget.prototype.setQuestion = function (question) {
        utils_1.ForEach(this.questions, function (q) { return (q.instanceElement.innerHTML = question); });
        if (this.answerField)
            this.answerField.instanceElement.removeAttribute(exports.SecretQuestionWidget_CONSTS.allowEmpty);
        this.instanceElement.style.display = 'inline'; // TODO why this is needed
    };
    SecretQuestionWidget.CONSTS = exports.SecretQuestionWidget_CONSTS;
    return SecretQuestionWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.SecretQuestionWidget = SecretQuestionWidget;
var QuestionElement = /** @class */ (function (_super) {
    tslib_1.__extends(QuestionElement, _super);
    function QuestionElement(el, parent) {
        return _super.call(this, el, parent) || this;
    }
    return QuestionElement;
}(TemplateElement_1.TemplateElement));
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(SecretQuestionWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SocialLoginWidget.ts":
/*!**********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SocialLoginWidget.ts ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var LoginModes_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var nextGeneratedContainerId = 0;
exports.SocialLoginWidget_CONSTS = {
    selector: 'div.gigya-social-login',
};
utils_1.DeepFreeze(exports.SocialLoginWidget_CONSTS);
var SocialLoginWidget = /** @class */ (function (_super) {
    tslib_1.__extends(SocialLoginWidget, _super);
    function SocialLoginWidget(_screen, el) {
        var _this = _super.call(this, _screen, el) || this;
        _this.bindID = _this.publishID ? _this.ID : exports.SocialLoginWidget_CONSTS.selector;
        _this.loginMode = LoginModes_1.LoginModes[_this.params['loginMode'] || 'standard'];
        _this.containerId = _this._screenSet.containerID + '_social_' + nextGeneratedContainerId++; // TODO Change use the same id for the same screenSet instance, regardless of how many times it is reused, unlike existing implementation that uses a new id each time
        _this.onErrorResponse = function (e) {
            // Hot fix for "no providers" error that goes into the infinite loop - see #44285
            // Hot fix for "invalid parameter" - see #56153
            if (e.errorCode !== GSErrors_1.GSErrors.NO_PROVIDERS && e.errorCode !== GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE) {
                return _this._screenSet.onScreenResponse(e, _this);
            }
        };
        _this.onLoginResponse = function (e) {
            _this._screenSet.removeRegToken();
            _this._screenSet.onScreenResponse({ errorCode: 0, event: e }, _this);
        };
        return _this;
    }
    SocialLoginWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.instanceElement) {
            while (this.instanceElement.firstChild) {
                // clearing the instance element. Notice this is faster than innerHTML=''.
                this.instanceElement.removeChild(this.instanceElement.firstChild);
            }
            this._container = document.createElement('div');
            this._container.className = 'gigya-social-login-container';
            this._container.id = this.containerId;
            this.instanceElement.appendChild(this._container);
            this.calculateEnabledProviders();
            this.apiParams = this.loginMode.filterParams(window.gigya.utils.object.clone(this._screenSet.params));
            if (!this.params['containerID']) {
                this.widgetParams = this.params;
                this.renderWidget();
            }
        }
    };
    /**
     * Surface errors in containing form.
     */
    SocialLoginWidget.prototype.getErrorDisplayForm = function () {
        return this._screen.getFormByElement(this.instanceElement);
    };
    /// Override from TemplateElement
    SocialLoginWidget.prototype.initFromInstanceElement = function () {
        this.successScreen = this._screenSet.chooseNextScreen(this.instanceElement.getAttribute(BaseForm_1.Form_CONSTS.successScreen));
    };
    SocialLoginWidget.prototype.calculateEnabledProviders = function () {
        var loginProviders = this.loginMode.getLoginProviders(this._screenSet.data.apiData, this.params, this._screenSet.data.regToken);
        if (loginProviders !== null && typeof loginProviders !== 'undefined')
            this.params['enabledProviders'] = loginProviders;
    };
    SocialLoginWidget.prototype.unlinkInstanceElement = function () {
        if (this.instanceElement)
            this.instanceElement.innerHTML = ''; // To make sure no ID conflicts will be generated
        if (this._instance)
            this._instance.dispose();
        _super.prototype.unlinkInstanceElement.call(this);
    };
    SocialLoginWidget.prototype.renderWidget = function () {
        var _this = this;
        // because rendering the widget is async, we set the container size to take room accordingly - so the screenset will center correctly.
        this.setContainerSize(this.widgetParams['width'], this.widgetParams['height']);
        //re-render plugin and call the plugin API again with the new parameters after the conditionals.
        window.gigya.socialize.showLoginUI(this.apiParams, this.widgetParams, {
            containerID: this.containerId,
            accountsSocialLogin: true,
            onLogin: this.onLoginResponse,
            onError: this.onErrorResponse,
            finalizeRegistration: true,
            dontHandleScreenSet: true,
            UIMode: this.loginMode !== LoginModes_1.LoginModes.link ? 'Login' : 'LinkAccount',
            include: window.gigya.utils.stringUtils.mergeCommaSeparatedValues('profile,data,emails,subscriptions,preferences', this._screenSet.params.include),
            regSource: this._screenSet.params.regSource || utils_1.firstPart(utils_1.firstPart(location.href, '?'), '#'),
            getInstance: function (instances) {
                _this._instance = instances;
            },
        });
        this.renderWidgetUI = false;
    };
    SocialLoginWidget.prototype.setContainerSize = function (width, height) {
        if (width) {
            var widthUnits = utils_1.getUnitMeasurementType(width);
            if (widthUnits != utils_1.UnitMeasurementType.auto)
                this._container.style.width = parseFloat(width) + widthUnits;
        }
        if (height) {
            var heightUnits = utils_1.getUnitMeasurementType(height);
            if (heightUnits != utils_1.UnitMeasurementType.auto)
                this._container.style.height = parseFloat(height) + heightUnits;
        }
    };
    SocialLoginWidget.CONSTS = exports.SocialLoginWidget_CONSTS;
    return SocialLoginWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.SocialLoginWidget = SocialLoginWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(SocialLoginWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SubscriptionWidget.ts":
/*!***********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SubscriptionWidget.ts ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var ProfileForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProfileForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProfileForm.ts");
exports.SubscriptionWidget_CONSTS = {
    selector: 'div.gigya-subscription',
    subscriptionName: 'name',
};
utils_1.DeepFreeze(exports.SubscriptionWidget_CONSTS);
var SubscriptionWidget = /** @class */ (function (_super) {
    tslib_1.__extends(SubscriptionWidget, _super);
    function SubscriptionWidget(form, el) {
        var _this = _super.call(this, form, el) || this;
        _this._shouldPopulate = form instanceof ProfileForm_1.ProfileForm;
        return _this;
    }
    SubscriptionWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.instanceElement) {
            // subscription name: subscription.<name>.<channel>
            var subscriptionName = this.instanceElement.getAttribute(SubscriptionWidget.CONSTS.subscriptionName).split('.');
            subscriptionName.shift(); // remove preceding subscriptions
            this.subscriptionObj = {
                channel: subscriptionName.pop(),
                name: subscriptionName.join('.'),
            };
            var checked = this.templateElement.hasAttribute('data-checked');
            if (this._shouldPopulate) {
                var subscriptionsInfo = this._screenSet.getApiData().getAccountInfo;
                if (subscriptionsInfo && subscriptionsInfo.subscriptions && subscriptionsInfo.subscriptions.hasOwnProperty(this.subscriptionObj.name)) {
                    var subscription = subscriptionsInfo.subscriptions[this.subscriptionObj.name];
                    var channel = subscription[this.subscriptionObj.channel];
                    if (channel) {
                        if (channel.hasOwnProperty('isSubscribed')) {
                            checked = channel['isSubscribed'];
                        }
                        if (channel.hasOwnProperty('doubleOptIn') && channel['doubleOptIn']['status'].toLowerCase() === 'pending') {
                            this._statusElement = document.createElement('div');
                            this._statusElement.className = 'subscription-status-label';
                            this._statusElement.style.paddingLeft = '18px';
                            this._statusElement.style.color = 'grey';
                            this._statusElement.style.fontStyle = 'italic';
                            this._statusElement.innerText = this._screenSet.getText('subscription_pending_confirmation');
                        }
                    }
                }
            }
            this._inuptElement = document.createElement('input');
            this._inuptElement.id = "subs-checkbox-" + this.subscriptionObj.name;
            this._inuptElement.name = "subscriptions." + this.subscriptionObj.name + "." + this.subscriptionObj.channel + ".isSubscribed";
            this._inuptElement.className = 'gigya-input-checkbox subscription-checkbox';
            this._inuptElement.type = 'checkbox';
            this._inuptElement.checked = checked;
            this._labelElement = document.createElement('label');
            this._labelElement.className = 'subscription-name-label';
            this._labelElement.style.display = 'inline-block';
            this._labelElement.style.verticalAlign = 'middle';
            this._labelElement.style.paddingLeft = '5px';
            this._labelElement.setAttribute('for', this._inuptElement.id);
            this._container = document.createElement('div');
            this._container.className = 'subs-widget-container';
            //add checkbox
            this._container.appendChild(this._inuptElement);
            //add label near checkbox
            this._container.appendChild(this._labelElement);
            //add 'pending' status element
            if (this._statusElement) {
                this._container.appendChild(this._statusElement);
            }
            this.instanceElement.appendChild(this._container);
            this.renderWidget();
        }
    };
    SubscriptionWidget.prototype.renderWidget = function () {
        _super.prototype.renderWidget.call(this);
        this._labelElement.innerHTML = !this.instanceElement ? '' : this.instanceElement.getAttribute('data-label');
    };
    SubscriptionWidget.CONSTS = exports.SubscriptionWidget_CONSTS;
    return SubscriptionWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.SubscriptionWidget = SubscriptionWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(SubscriptionWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaWidget.ts":
/*!**************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaWidget.ts ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var nextTfaContainerId = 0;
exports.TfaWidget_CONSTS = {
    selector: 'div.gigya-tfa',
};
utils_1.DeepFreeze(exports.TfaWidget_CONSTS);
var TfaWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TfaWidget, _super);
    function TfaWidget(_screen, el) {
        var _this = _super.call(this, _screen, el) || this;
        _this.bindID = _this.publishID ? _this.ID : exports.TfaWidget_CONSTS.selector;
        _screen._hasTfa = true;
        // TODO Change use the same id for the same screenSet instance, regardless of how many times it is reused, unlike existing implementation that uses a new id each time
        _this.tfaContainerId = (_this._screenSet.params.containerID || 'showScreenSet') + '_showTfaUI_' + nextTfaContainerId++;
        return _this;
    }
    TfaWidget.prototype.linkInstanceElement = function (parent) {
        var _this = this;
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.instanceElement) {
            this.instanceElement.innerHTML = '<div id="' + this.tfaContainerId + '"></div>';
            this._screen.dimScreen();
            if (!this.widgetParams) {
                this.widgetParams = this.params;
            }
            window.gigya.accounts.showTfaUI(this.params, this.widgetParams, {
                dontHandleScreenSet: false,
                regToken: this._screenSet.data.regToken,
                lang: this._screenSet.params.lang,
                containerID: this.tfaContainerId,
                cssPrefix: 'div.gigya-tfa',
                width: 'auto',
                source: this._screenSet.injectionInfo.methodName,
                onDone: function (e) {
                    _this._screen.dimScreen();
                    _this._screenSet.onScreenResponse(e.response, _this);
                },
                onLoad: function () {
                    _this._screen.undimScreen();
                },
                onAfterScreenLoad: function (e) {
                    if (e && e.caption && e.caption.length) {
                        _this._screen.overrideTemplateCaption(e.caption);
                        _this._screenSet.setCaption(e.caption);
                    }
                    _this._screenSet.centerModal();
                },
                ignoreApiQueue: this._screenSet.params['ignoreApiQueue'],
                customLang: this._screenSet.params.customLang,
            });
        }
    };
    TfaWidget.prototype.unlinkInstanceElement = function () {
        if (this.instanceElement)
            this.instanceElement.innerHTML = ''; // To make sure no ID conflicts will be generated
        if (this._instance)
            this._instance.dispose();
        _super.prototype.unlinkInstanceElement.call(this);
    };
    TfaWidget.prototype.renderWidget = function () {
        var _this = this;
        //re-render the plugin with the new new conditional values.
        window.gigya.accounts.showTfaUI(this.widgetParams, {
            dontHandleScreenSet: false,
            regToken: this._screenSet.data.regToken,
            containerID: this.tfaContainerId,
            cssPrefix: 'div.gigya-tfa',
            width: 'auto',
            deviceType: this._screenSet.params.deviceType,
            source: this._screenSet.injectionInfo.methodName,
            onDone: function (e) {
                _this._screen.dimScreen();
                _this._screenSet.onScreenResponse(e.response, _this);
            },
            onLoad: function () {
                _this._screen.undimScreen();
            },
            onAfterScreenLoad: function (e) {
                if (e && e.caption && e.caption.length) {
                    _this._screen.overrideTemplateCaption(e.caption);
                    _this._screenSet.setCaption(e.caption);
                }
                _this._screenSet.centerModal();
            },
            getInstance: function (instances) {
                _this._instance = instances;
            },
            ignoreApiQueue: this._screenSet.params['ignoreApiQueue'],
        });
        this.renderWidgetUI = false;
    };
    TfaWidget.CONSTS = exports.TfaWidget_CONSTS;
    return TfaWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.TfaWidget = TfaWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(TfaWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget.ts":
/*!*********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget.ts ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
exports.Translated_CONSTS = {
    selector: '*[data-translation-key]',
    translationKeyAttribute: 'data-translation-key',
};
utils_1.DeepFreeze(exports.Translated_CONSTS);
var TranslatedWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TranslatedWidget, _super);
    function TranslatedWidget(_screen, el) {
        // Turn resetCSS off.
        return _super.call(this, _screen, el, false) || this;
    }
    TranslatedWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this.updateTranslation();
    };
    TranslatedWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
    };
    /**
     * Handle case where translation key is updated via conditional attr.
     */
    TranslatedWidget.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        if (this.renderedTranslationKey !== this.instanceElement.getAttribute(TranslatedWidget.CONSTS.translationKeyAttribute).toLowerCase()) {
            this.updateTranslation();
        }
    };
    /**
     * Normalize translation key lowercase.
     */
    TranslatedWidget.prototype.getTranslationKey = function () {
        return this.instanceElement.getAttribute(TranslatedWidget.CONSTS.translationKeyAttribute).toLowerCase();
    };
    /**
     * Set translated text.
     */
    TranslatedWidget.prototype.updateTranslation = function () {
        this.renderedTranslationKey = this.getTranslationKey();
        if (this._screenSet.params.customLang && this._screenSet.params.customLang[this.renderedTranslationKey]) {
            // Unlink any widgets before HTML is cleared.
            this.unlinkWidgets();
            // Replace inner HTML.
            this.instanceElement.innerHTML = this._screenSet.params.customLang[this.renderedTranslationKey];
            this.linkWidgets();
        }
    };
    TranslatedWidget.CONSTS = exports.Translated_CONSTS;
    return TranslatedWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.TranslatedWidget = TranslatedWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(TranslatedWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/index.ts":
/*!**************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/index.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(__webpack_provided_Object_dot_assign) {Object.defineProperty(exports, "__esModule", { value: true });
var BaseForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var BaseFormWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var BaseScreenWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var BaseServerWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget.ts");
var BaseUploadWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseUploadWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseUploadWidget.ts");
var BaseWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget.ts");
var Consent = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent.ts");
var Debug = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Debug */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Debug.ts");
var ErrorDisplayElement = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement.ts");
var Errors = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors.ts");
var LoginModes = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts");
var Screen = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Screen */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Screen.ts");
var ScreenConsts = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts");
var ScreenOptions = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions.ts");
var ScreenSetData = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetData */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetData.ts");
var ScreenSetPlugin = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin.ts");
var ScreenSetHtmlResources = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetResources */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetResources.ts");
var TemplateElement = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
var Templates = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Templates */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Templates.ts");
var utils = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var LinkAccountsForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LinkAccountsForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LinkAccountsForm.ts");
var LoginForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LoginForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LoginForm.ts");
var PasswordlessLoginForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessLoginForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessLoginForm.ts");
var AuthMethodsForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/AuthMethodsForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/AuthMethodsForm.ts");
var PasswordAuthMethodForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordAuthMethodForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordAuthMethodForm.ts");
var PushAuthMethodForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PushAuthMethodForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PushAuthMethodForm.ts");
var NewsletterSignupForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/NewsletterSignupForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/NewsletterSignupForm.ts");
var ProfileForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProfileForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProfileForm.ts");
var ReAuthenticationForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ReauthenticationForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ReauthenticationForm.ts");
var RegisterForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm.ts");
var ResendVerificationCodeForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResendVerificationCodeForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResendVerificationCodeForm.ts");
var ResetPasswordForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResetPasswordForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResetPasswordForm.ts");
var OrgRegisterForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OrganizationRegistrationForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OrganizationRegistrationForm.ts");
var ButtonInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/ButtonInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/ButtonInput.ts");
var CheckboxInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CheckboxInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CheckboxInput.ts");
var EmailInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/EmailInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/EmailInput.ts");
var FormInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var LoginIdInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/LoginIdInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/LoginIdInput.ts");
var PasswordInputs = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PasswordInputs */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PasswordInputs.ts");
var PhoneNumberInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PhoneNumberInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PhoneNumberInput.ts");
var RadioInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RadioInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RadioInput.ts");
var RememberInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RememeberInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RememeberInput.ts");
var RetypePasswordInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RetypePasswordInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RetypePasswordInput.ts");
var ArrayManagerWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ArrayManagerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ArrayManagerWidget.ts");
var BindingWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/BindingWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/BindingWidget.ts");
var CaptchaWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CaptchaWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CaptchaWidget.ts");
var ConsentWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ConsentWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ConsentWidget.ts");
var ContainerWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ContainerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ContainerWidget.ts");
var ImageWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ImageWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ImageWidget.ts");
var LogInAvailabilityWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/LogInAvailabilityWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/LogInAvailabilityWidget.ts");
var MyPhotoWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/MyPhotoWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/MyPhotoWidget.ts");
var PasswordStrengthWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordStrengthWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordStrengthWidget.ts");
var PhotoUploadWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhotoUploadWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhotoUploadWidget.ts");
var ProfilePhotoWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ProfilePhotoWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ProfilePhotoWidget.ts");
var RequiredDisplayWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/RequiredDisplayWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/RequiredDisplayWidget.ts");
var SecretQuestionWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SecretQuestionWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SecretQuestionWidget.ts");
var SocialLoginWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SocialLoginWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SocialLoginWidget.ts");
var SubscriptionWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SubscriptionWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SubscriptionWidget.ts");
var TfaWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaWidget.ts");
var TranslatedWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget.ts");
var SwitchScreenWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/SwitchScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/SwitchScreenWidget.ts");
var BaseCaptchaHandler = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler.ts");
var FunCaptchaHandler = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/FunCaptchaHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/FunCaptchaHandler.ts");
var GoogleCaptchaHandler = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/GoogleCaptchaHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/GoogleCaptchaHandler.ts");
__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpSendCodeForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpSendCodeForm.ts");
__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpUpdateForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpUpdateForm.ts");
__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpLoginForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpLoginForm.ts");
__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ApiLinkWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ApiLinkWidget.ts");
__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Captcha */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Captcha.ts");
__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/index.ts");
if (!window.gigya._) {
    window.gigya._ = {};
}
if (!window.gigya._.plugins) {
    window.gigya._.plugins = {};
}
if (!window.gigya._.plugins.ScreenSet) {
    window.gigya._.plugins.ScreenSet = {};
}
if (!window.gigya._.plugins.ScreenSet.consent) {
    window.gigya._.plugins.ScreenSet.consent = {};
}
if (!window.gigya._.plugins.resources) {
    window.gigya._.plugins.resources = {};
}
if (!window.gigya._.plugins.resources.html) {
    window.gigya._.plugins.resources.html = {};
}
if (!window.gigya._.plugins.resources.html.screenSet) {
    window.gigya._.plugins.resources.html.screenSet = {};
}
__webpack_provided_Object_dot_assign(window.gigya._.plugins.ScreenSet, SwitchScreenWidget, BaseForm, BaseFormWidget, BaseScreenWidget, BaseServerWidget, BaseUploadWidget, BaseWidget, Debug, ErrorDisplayElement, Errors, LoginModes, Screen, ScreenConsts, ScreenOptions, ScreenSetData, ScreenSetPlugin, TemplateElement, Templates, utils, LinkAccountsForm, LoginForm, PasswordlessLoginForm, AuthMethodsForm, PasswordAuthMethodForm, PushAuthMethodForm, NewsletterSignupForm, ProfileForm, ReAuthenticationForm, RegisterForm, ResendVerificationCodeForm, ResetPasswordForm, OrgRegisterForm, ButtonInput, CheckboxInput, EmailInput, FormInput, LoginIdInput, PasswordInputs, PhoneNumberInput, RadioInput, RememberInput, RetypePasswordInput, ArrayManagerWidget, BindingWidget, CaptchaWidget, ConsentWidget, ContainerWidget, ImageWidget, LogInAvailabilityWidget, MyPhotoWidget, PasswordStrengthWidget, PhotoUploadWidget, ProfilePhotoWidget, RequiredDisplayWidget, SecretQuestionWidget, SocialLoginWidget, SubscriptionWidget, TfaWidget, TranslatedWidget, BaseCaptchaHandler, FunCaptchaHandler, GoogleCaptchaHandler);
__webpack_provided_Object_dot_assign(window.gigya._.plugins.ScreenSet.consent, Consent);
__webpack_provided_Object_dot_assign(window.gigya._.plugins.resources.html.screenSet, ScreenSetHtmlResources);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js")["__assign"]))

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/consent.html":
/*!****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/consent.html ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div  class=\"consent\">\r\n\r\n    <div class=\"gigya-consent-title\">${label}</div>\r\n    <div class=\"gigya-consent-subtitle\" >${docId}</div>\r\n    <span class=\"gigya-consent-text\">${approvedOnLabel}</span> <span class=\"gigya-consent-text\">${approved}</span>\r\n\r\n</div>";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/inlinedPasswordStrength.html":
/*!********************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/inlinedPasswordStrength.html ***!
  \********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"gigya-password-strength\" data-on-focus-bubble=\"true\" data-bubble-orientation=\"${orientation}\"></div>\r\n";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength.html":
/*!*************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength.html ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"${scoreClass}\" aria-atomic=\"true\" aria-live=\"polite\">${content}</div>\r\n";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength_minimumRequirements.html":
/*!*********************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength_minimumRequirements.html ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"gigya-passwordStrength-text-requirements\">$requirements</div>\r\n";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength_strengthMeter.html":
/*!***************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength_strengthMeter.html ***!
  \***************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"gigya-passwordStrength-text\">\r\n    <span class=\"gigya-passwordStrength-text\">$TEXT('password_strength_colon')</span>\r\n    <span class=\"gigya-passwordStrength-text gigya-passwordStrength-scoreText\">${scoreText}</span>\r\n</div>\r\n<div class=\"gigya-passwordStrength-bar\">\r\n    <div class=\"${barIndicatorClass}\"></div>\r\n</div>\r\n";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/photoUpload_form.html":
/*!*************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/photoUpload_form.html ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form enctype=\"multipart/form-data\" method=\"post\" class=\"gigya-photo-upload-form\" target=\"${formTarget}\" action=\"\">\r\n    <input type=\"file\" accept=\"image/*\" name=\"_profilePhoto\" />\r\n</form>\r\n";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/photoUpload_ui.html":
/*!***********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/photoUpload_ui.html ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"gigya-photo-upload-image\" id=\"${photoElementID}\"></div>\r\n<div>\r\n    <div class=\"gigya-photo-upload-button\">$choose_file</div>\r\n    <div class=\"gigya-photo-upload-path\" id=\"${pathContainerID}\">$no_file_chosen</div>\r\n    <div class=\"gigya-photo-upload-text\">$tip</div>\r\n</div>\r\n";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/screenSet.html":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/screenSet.html ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<h1 class=\"gigya-screen-caption\" id=\"${innerContainerID}_caption\"></h1>\r\n<div id=\"${childContainerID}\" class=\"gigya-hidden\"></div>\r\n<div id=\"${innerContainerID}\" class=\"gigya-screen-content\"></div>\r\n";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/screenSet_dialog.html":
/*!*************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/screenSet_dialog.html ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div id=\"${innerContainerID}\" class=\"gigya-screen-content\"></div>";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts":
/*!**************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var ScreenConsts_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts");
function isHidden(el) {
    while (el && el.parentElement) {
        if (el.style.visibility === 'hidden' || // hidden element
            el.style.display === 'none' || // hidden element
            (window.gigya.utils.DOM.isElementClass(el, 'gigya-error-display') && !window.gigya.utils.DOM.isElementClass(el, 'gigya-error-display-active')) || // hidden error message
            window.gigya.utils.DOM.isElementClass(el, 'ng-hide')) {
            // angular hidden element
            return true;
        }
        else {
            el = el.parentElement;
        }
    }
    return false;
}
exports.isHidden = isHidden;
function inIFrame() {
    try {
        return window.self !== window.top;
    }
    catch (e) {
        return true;
    }
}
exports.inIFrame = inIFrame;
function isFieldInHiddenContainer(el) {
    var curr = el;
    while (curr) {
        if (window.gigya.utils.DOM.isElementClass(curr, 'gigya-container') && !window.gigya.utils.DOM.isElementClass(curr, 'gigya-container-enabled'))
            return true;
        curr = curr.parentElement;
    }
    return false;
}
exports.isFieldInHiddenContainer = isFieldInHiddenContainer;
function firstPart(str, seperator) {
    var index = str.indexOf(seperator);
    return index > -1 ? str.substring(0, index) : str;
}
exports.firstPart = firstPart;
function LastIndexOf(arr, val, fromIndex) {
    if (fromIndex === void 0) { fromIndex = 0; }
    for (var i = arr.length; --i >= fromIndex;) {
        if (arr[i] === val)
            return i;
    }
    return -1;
}
exports.LastIndexOf = LastIndexOf;
function ForEach(arr, action) {
    for (var i = 0; i < arr.length; ++i) {
        action(arr[i], i, arr);
    }
}
exports.ForEach = ForEach;
function ForEachProp(obj, action) {
    for (var name in obj) {
        if (obj.hasOwnProperty(name))
            action(obj[name], name, obj);
    }
}
exports.ForEachProp = ForEachProp;
function Some(arr, condition) {
    for (var i = 0; i < arr.length; ++i) {
        if (condition(arr[i], i, arr))
            return true;
    }
    return false;
}
exports.Some = Some;
function Every(arr, condition) {
    for (var i = 0; i < arr.length; ++i) {
        if (!condition(arr[i], i, arr))
            return false;
    }
    return true;
}
exports.Every = Every;
function EveryProp(obj, condition) {
    for (var name in obj) {
        if (obj.hasOwnProperty(name) && !condition(obj[name], name, obj))
            return false;
    }
    return true;
}
exports.EveryProp = EveryProp;
function Map(arr, action) {
    var result = new Array();
    ForEach(arr, function (item, idx, arr) { return result.push(action(item, idx, arr)); });
    return result;
}
exports.Map = Map;
function DeepFreeze(obj) {
    // Only once IE9 is the minimum - currently IE7 is supported
    /*
        if (obj instanceof Object && !Object.isFrozen(obj[key])) {
            ForEachProp(obj, (prop) => DeepFreeze(prop));

            Object.freeze(obj);
        }
        */
}
exports.DeepFreeze = DeepFreeze;
function getElementsByHavingAttribute(parentElement, tagName, attributeName) {
    var arEls = new Array();
    var els = parentElement.getElementsByTagName(tagName);
    ForEach(els, function (el) {
        if (el.getAttribute(attributeName)) {
            arEls.push(el);
        }
    });
    return arEls;
}
exports.getElementsByHavingAttribute = getElementsByHavingAttribute;
function getElementsByHavingAttributePrefix(parentElement, attributePrefixes, tagNamesExceptions) {
    if (tagNamesExceptions === void 0) { tagNamesExceptions = []; }
    if (typeof attributePrefixes === 'string') {
        attributePrefixes = [attributePrefixes];
    }
    var elements = parentElement.getElementsByTagName('*');
    var matchingElements = new Array();
    for (var i = 0; i <= elements.length - 1; i++) {
        var el = elements.item(i);
        if (window.gigya.utils.array.indexOf(tagNamesExceptions, el.tagName.toLowerCase()) !== -1) {
            continue;
        }
        for (var _i = 0, attributePrefixes_1 = attributePrefixes; _i < attributePrefixes_1.length; _i++) {
            var attributePrefix = attributePrefixes_1[_i];
            if (isElementContainAttributePrefix(elements[i], attributePrefix)) {
                matchingElements.push(elements[i]);
                continue;
            }
        }
    }
    return matchingElements;
}
exports.getElementsByHavingAttributePrefix = getElementsByHavingAttributePrefix;
function isElementContainAttributePrefix(el, subString) {
    var elementAttributes = el.attributes;
    var containConditionalAttribute = false;
    if (elementAttributes) {
        for (var i = 0; i < elementAttributes.length; i++) {
            if (elementAttributes[i].nodeName.indexOf(subString) !== -1) {
                containConditionalAttribute = true;
                break;
            }
        }
    }
    return containConditionalAttribute;
}
exports.isElementContainAttributePrefix = isElementContainAttributePrefix;
function getConditionalAttributeExpressions(element, isWidgetContext) {
    if (isWidgetContext === void 0) { isWidgetContext = false; }
    var conditionalExpressions = new Array();
    var conditionalDefaultValue;
    var lastAttributeValue;
    var isParamTag = false;
    var attributes = getAttributesAsArray(element);
    ForEach(attributes, function (at) {
        try {
            // Check for conditional attribute prefix which determines if this attribute be evaluated.
            var isConditionalAttribute = at.nodeName.indexOf(ScreenConsts_1.Screen_CONSTS.conditionalAttributePrefix) !== -1;
            var isExpressionAttribute = at.nodeName.indexOf(ScreenConsts_1.Screen_CONSTS.expressionAttributePrefix) !== -1;
            if (isConditionalAttribute || isExpressionAttribute) {
                var colonIndex = at.nodeName.indexOf(':');
                if (colonIndex !== -1) {
                    var targetAttribute = void 0;
                    if (isWidgetContext) {
                        conditionalDefaultValue = window.gigya._.plugins.utils.DOM.getAttribute(element, 'value');
                        targetAttribute = window.gigya._.plugins.utils.DOM.getAttribute(element, 'name');
                        isParamTag = element.tagName.toLowerCase() === 'param';
                    }
                    else {
                        targetAttribute = at.nodeName.substring(colonIndex + 1, at.nodeName.length);
                        lastAttributeValue = window.gigya._.plugins.utils.DOM.getAttribute(element, targetAttribute);
                        var defaultValueAttribute = 'gigya-default-' + targetAttribute;
                        if (!window.gigya._.plugins.utils.DOM.getAttribute(element, defaultValueAttribute)) {
                            window.gigya._.plugins.utils.DOM.setAttribute(element, defaultValueAttribute, lastAttributeValue !== null ? lastAttributeValue : 'null');
                        }
                        var val = window.gigya._.plugins.utils.DOM.getAttribute(element, defaultValueAttribute);
                        conditionalDefaultValue = val !== 'null' ? val : null;
                    }
                    // Conditionals are always ternary with special escaping and parsing done.
                    // In: expression ? value : otherValue
                    // Out: expression ? 'value' : 'otherValue'
                    //
                    // Expressions are parsed as-is and the returned value is set.
                    var conditionalExpression = !isExpressionAttribute
                        ? setupConditionalExpressionValue(at.nodeValue, conditionalDefaultValue)
                        : at.nodeValue;
                    var conditional = {
                        attributeName: targetAttribute,
                        condition: conditionalExpression,
                        defaultValue: conditionalDefaultValue,
                        lastAttributeValue: lastAttributeValue,
                        isWidgetParamTag: isParamTag,
                    };
                    conditionalExpressions.push(conditional);
                }
            }
        }
        catch (e) {
            throw new Error('Conditional format error: ' + e);
        }
    });
    return conditionalExpressions;
}
exports.getConditionalAttributeExpressions = getConditionalAttributeExpressions;
function setupConditionalExpressionValue(conditionalValue, defaultValue) {
    var expressionWithFalseValue = setupConditionalFalseValue(conditionalValue, defaultValue);
    var expressionWithEscaping = escapeCharactersInConditionalValue(expressionWithFalseValue);
    var finalConditionalExpression = setUpLastFalseValue(expressionWithEscaping);
    if (!defaultValue) {
        // fix default value to be a falsy value instead of a string literal
        var defaultValueLocation = finalConditionalExpression.lastIndexOf(":'" + defaultValue + "'");
        if (defaultValueLocation > -1) {
            finalConditionalExpression = finalConditionalExpression.substring(0, defaultValueLocation) + ":null";
        }
    }
    return finalConditionalExpression;
}
exports.setupConditionalExpressionValue = setupConditionalExpressionValue;
function setupConditionalFalseValue(conditionalValue, defaultValue) {
    // Make sure that the last 'false' value has a ':' sign and if it doesn't, add it and assign the default value, if there's one.
    var indexOfLastConditionResults = conditionalValue.lastIndexOf('?');
    var subStringOfLastConditionResults = conditionalValue.substr(indexOfLastConditionResults + 1, conditionalValue.length);
    var indexOfLastConditionResultsDivider = subStringOfLastConditionResults.indexOf(':');
    if (indexOfLastConditionResultsDivider === -1) {
        conditionalValue += ':';
        if (defaultValue) {
            conditionalValue += defaultValue;
        }
    }
    else {
        // check if there's a 'false' value or just an empty string
        var emptyFalseValue = subStringOfLastConditionResults.substr(indexOfLastConditionResultsDivider + 1, subStringOfLastConditionResults.length);
        if (emptyFalseValue === '') {
            conditionalValue = conditionalValue.substr(0, conditionalValue.length) + defaultValue;
        }
    }
    return conditionalValue;
}
function escapeCharactersInConditionalValue(conditionalValue) {
    // Escape any "'" signs.
    conditionalValue = conditionalValue.replace(/\'/g, "'");
    // Enclose all the 'true' values in ''
    conditionalValue = conditionalValue.replace(/\?/g, "?'");
    conditionalValue = conditionalValue.replace(/:/g, "':");
    return conditionalValue;
}
function setUpLastFalseValue(conditionalValue) {
    // Set an aphostrophe in the last 'false' if there isn't one
    // First: trim the last 'false' value for the aphostrophe insertion
    var indexOfLastConditionResults = conditionalValue.lastIndexOf('?');
    var subStringOfLastConditionResults = conditionalValue.substr(indexOfLastConditionResults + 1, conditionalValue.length);
    var falseResultStartIndex = subStringOfLastConditionResults.indexOf(':') + 1;
    var lastFalseResultValue = subStringOfLastConditionResults.substr(falseResultStartIndex, subStringOfLastConditionResults.length);
    lastFalseResultValue = window.gigya.utils.stringUtils.trim(lastFalseResultValue);
    if (lastFalseResultValue[0] != "'") {
        lastFalseResultValue = "'" + lastFalseResultValue;
    }
    if (lastFalseResultValue[lastFalseResultValue.length] != "'") {
        lastFalseResultValue += "'";
    }
    var lastTrueResultValue = subStringOfLastConditionResults.substr(0, falseResultStartIndex - 1);
    conditionalValue = conditionalValue.substr(0, indexOfLastConditionResults + 1) + lastTrueResultValue + ':' + lastFalseResultValue;
    return conditionalValue;
}
function isKeyCodeDisplayable(keycode) {
    return ((keycode > 47 && keycode < 58) || // number keys
        (keycode == 32 || keycode == 13) || // spacebar & return key(s)
        (keycode > 64 && keycode < 91) || // letter keys
        (keycode > 95 && keycode < 112) || // numpad keys
        (keycode > 185 && keycode < 193) || // ;=,-./` (in order)
        (keycode > 218 && keycode < 223)); // [\]' (in order)
}
exports.isKeyCodeDisplayable = isKeyCodeDisplayable;
exports.UnitMeasurementType = {
    pixel: 'px',
    percentage: '%',
    auto: '',
};
function getUnitMeasurementType(value) {
    if (value === void 0) { value = ''; }
    var unitType;
    if (value === null || value == 'auto') {
        unitType = exports.UnitMeasurementType.auto;
    }
    else {
        unitType = value.indexOf('%') != -1 ? exports.UnitMeasurementType.percentage : exports.UnitMeasurementType.pixel;
    }
    return unitType;
}
exports.getUnitMeasurementType = getUnitMeasurementType;
function getAttributesAsArray(el) {
    var attributes = [];
    var elementAttributes = el.attributes;
    // A workaround for IE8
    for (var i = 0; i < elementAttributes.length; i++) {
        attributes.push(elementAttributes[i]);
    }
    return attributes;
}
exports.getAttributesAsArray = getAttributesAsArray;
function endsWith(s, suffix) {
    return s.indexOf(suffix, s.length - suffix.length) !== -1;
}
exports.endsWith = endsWith;
function hasIndex(key) {
    return /\[[0-9]]|\.[0-9]/.test(key);
}
exports.hasIndex = hasIndex;
function removeSerializedKeyLastEnumerator(key) {
    return key.replace(/[0-9]\.(?=[^.]*$)/, '').replace(/\[[0-9]](?=[^\[]*$)/, '');
}
exports.removeSerializedKeyLastEnumerator = removeSerializedKeyLastEnumerator;
function removeSerializedKeyEdgeProperty(key) {
    return key.substr(0, key.lastIndexOf('.'));
}
exports.removeSerializedKeyEdgeProperty = removeSerializedKeyEdgeProperty;
function IETemplateElementPolyfill(doc) {
    if (doc === void 0) { doc = document; }
    var support = 'content' in document.createElement('template');
    // Set the content property if missing
    if (!support) {
        var /**
             * Prefer an array to a NodeList
             * Otherwise, updating the content property of a node
             * will update the NodeList and we'll loose the nested <template>
             */ templates = Array.prototype.slice.call(document.getElementsByTagName('template')), template, content, fragment, node, i = 0, j;
        // For each <template> element get its content and wrap it in a document fragment
        while ((template = templates[i++]) && !template.content) {
            content = template.children;
            fragment = document.createDocumentFragment();
            while (content[0]) {
                fragment.appendChild(content[0]);
            }
            template.content = fragment;
        }
    }
    // // Prepare a clone function to allow nested <template> elements
    // function clone() {
    //     var
    //         templates = this.querySelectorAll("template"),
    //         fragments = [],
    //         template,
    //         i = 0;
    //
    //     // If the support is OK simply clone and return
    //     if (support) {
    //         template  = this.cloneNode(true);
    //         templates = template.content.querySelectorAll("template");
    //
    //         // Set the clone method for each nested <template> element
    //         for (; templates[i]; i++) {
    //             templates[i].clone = clone;
    //         }
    //
    //         return template;
    //     }
    //
    //     // Loop through nested <template> to retrieve the content property
    //     for (; templates[i]; i++) {
    //         fragments.push(templates[i].content);
    //     }
    //
    //     // Now, clone the document fragment
    //     template = this.cloneNode(true);
    //
    //     // Makes sure the clone have a "content" and "clone" properties
    //     template.content = this.content;
    //     template.clone   = clone;
    //
    //     /**
    //      * Retrieve the nested <template> once again
    //      * Since we just cloned the document fragment,
    //      * the content's property of the nested <template> might be undefined
    //      * We have to re-set it using the fragment array we previously got
    //      */
    //     templates = template.querySelectorAll("template");
    //
    //     // Loop to set the content property of each nested template
    //     for (i = 0; templates[i]; i++) {
    //         templates[i].content = fragments[i];
    //         templates[i].clone   = clone; // Makes sure to set the clone method as well
    //     }
    //
    //     return template;
    // }
    //
    // var
    //     templates = document.querySelectorAll("template") as any,
    //     template, i = 0;
    //
    // // Pollute the DOM with a "clone" method on each <template> element
    // while ((template = templates[i++])) {
    //     template.clone = clone;
    // }
}
exports.IETemplateElementPolyfill = IETemplateElementPolyfill;


/***/ }),

/***/ "./src/accounts/constants.ts":
/*!***********************************!*\
  !*** ./src/accounts/constants.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var EditableTfaProvidersTypes;
(function (EditableTfaProvidersTypes) {
    EditableTfaProvidersTypes[EditableTfaProvidersTypes["gigyaPhone"] = 0] = "gigyaPhone";
    EditableTfaProvidersTypes[EditableTfaProvidersTypes["gigyaTotp"] = 1] = "gigyaTotp";
    EditableTfaProvidersTypes[EditableTfaProvidersTypes["gigyaPush"] = 2] = "gigyaPush";
    EditableTfaProvidersTypes[EditableTfaProvidersTypes["livelink"] = 3] = "livelink";
})(EditableTfaProvidersTypes = exports.EditableTfaProvidersTypes || (exports.EditableTfaProvidersTypes = {}));
exports.gigyaAssertionExpiration = 60 * 5 * 1000;


/***/ }),

/***/ "./src/core/Gigya.Js.Plugin/app/CloseReasons.ts":
/*!******************************************************!*\
  !*** ./src/core/Gigya.Js.Plugin/app/CloseReasons.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var CloseReasons;
(function (CloseReasons) {
    CloseReasons[CloseReasons["pendingError"] = 0] = "pendingError";
    CloseReasons[CloseReasons["missing"] = 1] = "missing";
    CloseReasons[CloseReasons["finished"] = 2] = "finished";
    CloseReasons[CloseReasons["canceled"] = 3] = "canceled";
    CloseReasons[CloseReasons["backButton"] = 4] = "backButton";
    CloseReasons[CloseReasons["canceledByParent"] = 5] = "canceledByParent";
    CloseReasons[CloseReasons["skip"] = 6] = "skip";
    CloseReasons[CloseReasons["error"] = 7] = "error";
    CloseReasons[CloseReasons["cancel"] = 8] = "cancel";
})(CloseReasons = exports.CloseReasons || (exports.CloseReasons = {}));


/***/ }),

/***/ "./src/core/Gigya.Js.Plugin/app/PluginStyles.ts":
/*!******************************************************!*\
  !*** ./src/core/Gigya.Js.Plugin/app/PluginStyles.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var PluginStyle;
(function (PluginStyle) {
    PluginStyle[PluginStyle["_undefined"] = 0] = "_undefined";
    PluginStyle[PluginStyle["none"] = 1] = "none";
    PluginStyle[PluginStyle["legacy"] = 2] = "legacy";
    PluginStyle[PluginStyle["modern"] = 3] = "modern";
})(PluginStyle = exports.PluginStyle || (exports.PluginStyle = {}));
function getPluginStyleClass(style) {
    return 'gigya-style-' + PluginStyle[style];
}
exports.getPluginStyleClass = getPluginStyleClass;


/***/ }),

/***/ "./src/core/Gigya.Js/app/BaseObject/IBaseObjectConfig.ts":
/*!***************************************************************!*\
  !*** ./src/core/Gigya.Js/app/BaseObject/IBaseObjectConfig.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var DeviceTypes;
(function (DeviceTypes) {
    DeviceTypes[DeviceTypes["_undefined"] = 0] = "_undefined";
    DeviceTypes[DeviceTypes["desktop"] = 1] = "desktop";
    DeviceTypes[DeviceTypes["mobile"] = 2] = "mobile";
    DeviceTypes[DeviceTypes["auto"] = 3] = "auto";
})(DeviceTypes = exports.DeviceTypes || (exports.DeviceTypes = {}));


/***/ }),

/***/ "./src/core/Gigya.Js/app/GSErrors.ts":
/*!*******************************************!*\
  !*** ./src/core/Gigya.Js/app/GSErrors.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var GSErrors;
(function (GSErrors) {
    GSErrors[GSErrors["OK"] = 0] = "OK";
    GSErrors[GSErrors["Data_Pending"] = 100001] = "Data_Pending";
    GSErrors[GSErrors["NETWORK_ERROR"] = 500026] = "NETWORK_ERROR";
    GSErrors[GSErrors["DATA_PENDING"] = 100001] = "DATA_PENDING";
    GSErrors[GSErrors["OPERATION_CANCELED"] = 200001] = "OPERATION_CANCELED";
    GSErrors[GSErrors["PERMISSION_GRANTED"] = 200002] = "PERMISSION_GRANTED";
    GSErrors[GSErrors["PERMISSION_NOT_GRANTED"] = 200003] = "PERMISSION_NOT_GRANTED";
    GSErrors[GSErrors["REDIRECT"] = 200004] = "REDIRECT";
    GSErrors[GSErrors["NEW_USER"] = 200005] = "NEW_USER";
    GSErrors[GSErrors["OPERATION_DONE"] = 200006] = "OPERATION_DONE";
    GSErrors[GSErrors["UPDATE_USER"] = 200007] = "UPDATE_USER";
    GSErrors[GSErrors["OK_WITH_ERRORS"] = 200008] = "OK_WITH_ERRORS";
    GSErrors[GSErrors["ACCOUNTS_LINKED"] = 200009] = "ACCOUNTS_LINKED";
    GSErrors[GSErrors["OK_WITH_ERROR_LOGIN_IDENTIFIER_EXISTS"] = 200010] = "OK_WITH_ERROR_LOGIN_IDENTIFIER_EXISTS";
    GSErrors[GSErrors["ACCOUNT_PENDING_REGISTRATION"] = 206001] = "ACCOUNT_PENDING_REGISTRATION";
    GSErrors[GSErrors["ACCOUNT_PENDING_VERIFICATION"] = 206002] = "ACCOUNT_PENDING_VERIFICATION";
    GSErrors[GSErrors["ACCOUNT_MISSING_LOGINID"] = 206003] = "ACCOUNT_MISSING_LOGINID";
    GSErrors[GSErrors["IDENTITY_ALREADY_ASSIGNED"] = 206004] = "IDENTITY_ALREADY_ASSIGNED";
    GSErrors[GSErrors["AFTER_EMAIL_VERIFICATION"] = 206005] = "AFTER_EMAIL_VERIFICATION";
    GSErrors[GSErrors["PENDING_CODE_VERIFICATION"] = 206006] = "PENDING_CODE_VERIFICATION";
    GSErrors[GSErrors["CLIENT_LOG"] = 300001] = "CLIENT_LOG";
    GSErrors[GSErrors["INVALID_DATA_CENTER"] = 301001] = "INVALID_DATA_CENTER";
    GSErrors[GSErrors["INVALID_REQUEST_FORMAT"] = 400001] = "INVALID_REQUEST_FORMAT";
    GSErrors[GSErrors["MISSING_REQUIRED_PARAMETER"] = 400002] = "MISSING_REQUIRED_PARAMETER";
    GSErrors[GSErrors["UNIQUE_IDENTIFIER_EXISTS"] = 400003] = "UNIQUE_IDENTIFIER_EXISTS";
    GSErrors[GSErrors["INVALID_PARAMETER_FORMAT"] = 400004] = "INVALID_PARAMETER_FORMAT";
    GSErrors[GSErrors["INVALID_PARAMETER_VALUE"] = 400006] = "INVALID_PARAMETER_VALUE";
    GSErrors[GSErrors["DUPLICATE_VALUE"] = 400007] = "DUPLICATE_VALUE";
    GSErrors[GSErrors["INVALID_AUTHENTICATION_HEADER"] = 400008] = "INVALID_AUTHENTICATION_HEADER";
    GSErrors[GSErrors["VALIDATION_ERROR"] = 400009] = "VALIDATION_ERROR";
    GSErrors[GSErrors["INVALID_REDIRECT_URI"] = 400011] = "INVALID_REDIRECT_URI";
    GSErrors[GSErrors["INVALID_RESPONSE_TYPE"] = 400012] = "INVALID_RESPONSE_TYPE";
    GSErrors[GSErrors["UNSUPPORTED_GRANT_TYPE"] = 400013] = "UNSUPPORTED_GRANT_TYPE";
    GSErrors[GSErrors["INVALID_GRANT"] = 400014] = "INVALID_GRANT";
    GSErrors[GSErrors["CODE_EXPIRED"] = 400015] = "CODE_EXPIRED";
    GSErrors[GSErrors["SCHEMA_VALIDATION_FAILED"] = 400020] = "SCHEMA_VALIDATION_FAILED";
    GSErrors[GSErrors["CAPTCHA_VERIFICATION_FAILED"] = 400021] = "CAPTCHA_VERIFICATION_FAILED";
    GSErrors[GSErrors["UNIQUE_INDEX_VALIDATION_ERROR"] = 400022] = "UNIQUE_INDEX_VALIDATION_ERROR";
    GSErrors[GSErrors["INVALID_TYPE_VALIDATION_ERROR"] = 400023] = "INVALID_TYPE_VALIDATION_ERROR";
    GSErrors[GSErrors["DYNAMIC_FIELDS_VALIDATION_ERROR"] = 400024] = "DYNAMIC_FIELDS_VALIDATION_ERROR";
    GSErrors[GSErrors["WRITE_ACCESS_VALIDATION_ERROR"] = 400025] = "WRITE_ACCESS_VALIDATION_ERROR";
    GSErrors[GSErrors["INVALID_FORMAT_VALIDATION_ERROR"] = 400026] = "INVALID_FORMAT_VALIDATION_ERROR";
    GSErrors[GSErrors["REQUIRED_VALUE_VALIDATION_ERROR"] = 400027] = "REQUIRED_VALUE_VALIDATION_ERROR";
    GSErrors[GSErrors["EMAIL_NOT_VERIFIED"] = 400028] = "EMAIL_NOT_VERIFIED";
    GSErrors[GSErrors["SCHEMA_CONFLICT_ERROR"] = 400029] = "SCHEMA_CONFLICT_ERROR";
    GSErrors[GSErrors["OPERATION_NOT_ALLOWED"] = 400030] = "OPERATION_NOT_ALLOWED";
    GSErrors[GSErrors["SECURITY_VERIFICATION_FAILED"] = 400050] = "SECURITY_VERIFICATION_FAILED";
    GSErrors[GSErrors["INVALID_APIKEY_PARAMETER"] = 400093] = "INVALID_APIKEY_PARAMETER";
    GSErrors[GSErrors["NOT_SUPPORTED"] = 400096] = "NOT_SUPPORTED";
    GSErrors[GSErrors["UNSUPPORTED_USER_AGENT"] = 400097] = "UNSUPPORTED_USER_AGENT";
    GSErrors[GSErrors["NO_PROVIDERS"] = 400100] = "NO_PROVIDERS";
    GSErrors[GSErrors["POPUP_BLOCKED"] = 400101] = "POPUP_BLOCKED";
    GSErrors[GSErrors["INVALID_EVENT_HANDLER"] = 400102] = "INVALID_EVENT_HANDLER";
    GSErrors[GSErrors["INVALID_CONTAINERID"] = 400103] = "INVALID_CONTAINERID";
    GSErrors[GSErrors["NOT_CONNECTED"] = 400106] = "NOT_CONNECTED";
    GSErrors[GSErrors["INVALID_SITE_DOMAIN"] = 400120] = "INVALID_SITE_DOMAIN";
    GSErrors[GSErrors["PROVIDER_CONFIGURATION_ERROR"] = 400122] = "PROVIDER_CONFIGURATION_ERROR";
    GSErrors[GSErrors["LIMIT_REACHED"] = 400124] = "LIMIT_REACHED";
    GSErrors[GSErrors["FREQUENCY_LIMIT_REACHED"] = 400125] = "FREQUENCY_LIMIT_REACHED";
    GSErrors[GSErrors["INVALID_ACTION"] = 400126] = "INVALID_ACTION";
    GSErrors[GSErrors["INSUFFICIENT_POINTS_TO_REDEEM"] = 400127] = "INSUFFICIENT_POINTS_TO_REDEEM";
    GSErrors[GSErrors["SIGNATURE_TIMESTAMP_EXPIRED"] = 400128] = "SIGNATURE_TIMESTAMP_EXPIRED";
    GSErrors[GSErrors["INVALID_POLICY_CONFIGURATION"] = 401000] = "INVALID_POLICY_CONFIGURATION";
    GSErrors[GSErrors["SUSPECTED_SPAM"] = 401010] = "SUSPECTED_SPAM";
    GSErrors[GSErrors["LOGIN_FAILED_CAPTCHA_REQUIRED"] = 401020] = "LOGIN_FAILED_CAPTCHA_REQUIRED";
    GSErrors[GSErrors["LOGIN_FAILED_WRONG_CAPTCHA"] = 401021] = "LOGIN_FAILED_WRONG_CAPTCHA";
    GSErrors[GSErrors["OLD_PASSWORD_USED"] = 401030] = "OLD_PASSWORD_USED";
    GSErrors[GSErrors["FORBIDDEN"] = 403000] = "FORBIDDEN";
    GSErrors[GSErrors["INVALID_SESSION_TOKEN"] = 403001] = "INVALID_SESSION_TOKEN";
    GSErrors[GSErrors["REQUEST_HAS_EXPIRED"] = 403002] = "REQUEST_HAS_EXPIRED";
    GSErrors[GSErrors["INVALID_REQUEST_SIGNATURE"] = 403003] = "INVALID_REQUEST_SIGNATURE";
    GSErrors[GSErrors["DUPLICATE_NONCE"] = 403004] = "DUPLICATE_NONCE";
    GSErrors[GSErrors["UNAUTHORIZED_USER"] = 403005] = "UNAUTHORIZED_USER";
    GSErrors[GSErrors["SENSITIVE_DATA_SENT_OVER_HTTP"] = 403006] = "SENSITIVE_DATA_SENT_OVER_HTTP";
    GSErrors[GSErrors["PERMISSION_DENIED"] = 403007] = "PERMISSION_DENIED";
    GSErrors[GSErrors["INVALID_OPENID_URL"] = 403008] = "INVALID_OPENID_URL";
    GSErrors[GSErrors["PROVIDER_SESSION_EXPIRED"] = 403009] = "PROVIDER_SESSION_EXPIRED";
    GSErrors[GSErrors["INVALID_SECRET"] = 403010] = "INVALID_SECRET";
    GSErrors[GSErrors["SESSION_HAS_EXPIRED"] = 403011] = "SESSION_HAS_EXPIRED";
    GSErrors[GSErrors["NO_VALID_SESSION"] = 403012] = "NO_VALID_SESSION";
    GSErrors[GSErrors["UNVERIFIED_USER"] = 403013] = "UNVERIFIED_USER";
    GSErrors[GSErrors["MISSING_REQUEST_REFERRER"] = 403015] = "MISSING_REQUEST_REFERRER";
    GSErrors[GSErrors["UNEXPECTED_PROVIDER_USER"] = 403017] = "UNEXPECTED_PROVIDER_USER";
    GSErrors[GSErrors["PERMISSION_NOT_REQUESTED"] = 403022] = "PERMISSION_NOT_REQUESTED";
    GSErrors[GSErrors["NO_USER_PERMISSION"] = 403023] = "NO_USER_PERMISSION";
    GSErrors[GSErrors["PROVIDER_LIMIT_REACHED"] = 403024] = "PROVIDER_LIMIT_REACHED";
    GSErrors[GSErrors["INVALID_TOKEN"] = 403025] = "INVALID_TOKEN";
    GSErrors[GSErrors["UNAUTHORIZED_ACCESS_ERROR"] = 403026] = "UNAUTHORIZED_ACCESS_ERROR";
    GSErrors[GSErrors["DIFFERENT_USER_FOR_REAUTH"] = 403027] = "DIFFERENT_USER_FOR_REAUTH";
    GSErrors[GSErrors["SESSION_EXPIRED_RETRY"] = 403030] = "SESSION_EXPIRED_RETRY";
    GSErrors[GSErrors["APPROVED_BY_MODERATOR"] = 403031] = "APPROVED_BY_MODERATOR";
    GSErrors[GSErrors["TOKEN_HAS_RENEWED"] = 403032] = "TOKEN_HAS_RENEWED";
    GSErrors[GSErrors["NO_USER_COOKIE"] = 403035] = "NO_USER_COOKIE";
    GSErrors[GSErrors["UNAUTHORIZED_PARTNER"] = 403036] = "UNAUTHORIZED_PARTNER";
    GSErrors[GSErrors["POST_DENIED"] = 403037] = "POST_DENIED";
    GSErrors[GSErrors["NO_LOGIN_TICKET"] = 403040] = "NO_LOGIN_TICKET";
    GSErrors[GSErrors["ACCOUNT_DISABLED"] = 403041] = "ACCOUNT_DISABLED";
    GSErrors[GSErrors["INVALID_LOGINID"] = 403042] = "INVALID_LOGINID";
    GSErrors[GSErrors["LOGIN_IDENTIFIER_EXISTS"] = 403043] = "LOGIN_IDENTIFIER_EXISTS";
    GSErrors[GSErrors["UNDERAGE_USER"] = 403044] = "UNDERAGE_USER";
    GSErrors[GSErrors["INVALID_SITE_CONFIGURATION_ERROR"] = 403045] = "INVALID_SITE_CONFIGURATION_ERROR";
    GSErrors[GSErrors["LOGINID_DOES_NOT_EXIST"] = 403047] = "LOGINID_DOES_NOT_EXIST";
    GSErrors[GSErrors["API_RATE_LIMIT_EXCEEDED"] = 403048] = "API_RATE_LIMIT_EXCEEDED";
    GSErrors[GSErrors["PENDING_PASSWORD_CHANGE"] = 403100] = "PENDING_PASSWORD_CHANGE";
    GSErrors[GSErrors["ACCOUNT_PENDING_TFA_VERIFICATION"] = 403101] = "ACCOUNT_PENDING_TFA_VERIFICATION";
    GSErrors[GSErrors["ACCOUNT_PENDING_TFA_REGISTRATION"] = 403102] = "ACCOUNT_PENDING_TFA_REGISTRATION";
    GSErrors[GSErrors["ACCOUNT_PENDING_RECENT_LOGIN"] = 403110] = "ACCOUNT_PENDING_RECENT_LOGIN";
    GSErrors[GSErrors["ACCOUNT_TEMPORARILY_LOCKED_OUT"] = 403120] = "ACCOUNT_TEMPORARILY_LOCKED_OUT";
    GSErrors[GSErrors["REDUNDANT_OPERATION"] = 403200] = "REDUNDANT_OPERATION";
    GSErrors[GSErrors["INVALID_APPLICATION_ID"] = 403201] = "INVALID_APPLICATION_ID";
    GSErrors[GSErrors["NOT_FOUND"] = 404000] = "NOT_FOUND";
    GSErrors[GSErrors["FRIEND_NOT_FOUND"] = 404001] = "FRIEND_NOT_FOUND";
    GSErrors[GSErrors["CATEGORY_NOT_FOUND"] = 404002] = "CATEGORY_NOT_FOUND";
    GSErrors[GSErrors["UID_NOT_FOUND"] = 404003] = "UID_NOT_FOUND";
    GSErrors[GSErrors["RESOURCE_NOT_FOUND"] = 404004] = "RESOURCE_NOT_FOUND";
    GSErrors[GSErrors["INVALID_API_METHOD"] = 405001] = "INVALID_API_METHOD";
    GSErrors[GSErrors["IDENTITY_EXISTS"] = 409001] = "IDENTITY_EXISTS";
    GSErrors[GSErrors["GONE"] = 410000] = "GONE";
    GSErrors[GSErrors["REQUEST_ENTITY_TOO_LARGE"] = 413001] = "REQUEST_ENTITY_TOO_LARGE";
    GSErrors[GSErrors["COMMENT_TEXT_TOO_LARGE"] = 413002] = "COMMENT_TEXT_TOO_LARGE";
    GSErrors[GSErrors["OBJECT_TOO_LARGE"] = 413003] = "OBJECT_TOO_LARGE";
    GSErrors[GSErrors["PROFILE_PHOTO_TOO_LARGE"] = 413004] = "PROFILE_PHOTO_TOO_LARGE";
    GSErrors[GSErrors["REQUEST_URI_TOO_LONG"] = 414000] = "REQUEST_URI_TOO_LONG";
    GSErrors[GSErrors["MISSING_USER_PHOTO"] = 409010] = "MISSING_USER_PHOTO";
    GSErrors[GSErrors["COUNTER_NOT_REGISTERED"] = 409011] = "COUNTER_NOT_REGISTERED";
    GSErrors[GSErrors["INVALID_GMID_TICKET"] = 409012] = "INVALID_GMID_TICKET";
    GSErrors[GSErrors["SAML_MAPPED_ATTRIBUTE_NOT_FOUND"] = 409013] = "SAML_MAPPED_ATTRIBUTE_NOT_FOUND";
    GSErrors[GSErrors["SAML_CERTIFICATE_NOT_FOUND"] = 409014] = "SAML_CERTIFICATE_NOT_FOUND";
    GSErrors[GSErrors["SAML_MESSAGE_NOT_FOUND"] = 409015] = "SAML_MESSAGE_NOT_FOUND";
    GSErrors[GSErrors["GENERAL_SERVER_ERROR"] = 500001] = "GENERAL_SERVER_ERROR";
    GSErrors[GSErrors["SERVER_LOGIN_ERROR"] = 500002] = "SERVER_LOGIN_ERROR";
    GSErrors[GSErrors["DEFAULT_APPLICATION_CONFIGURATION_ERROR"] = 500003] = "DEFAULT_APPLICATION_CONFIGURATION_ERROR";
    GSErrors[GSErrors["SESSION_MIGRATION_ERROR"] = 500014] = "SESSION_MIGRATION_ERROR";
    GSErrors[GSErrors["PROVIDER_ERROR"] = 500023] = "PROVIDER_ERROR";
    GSErrors[GSErrors["DATABASE_ERROR"] = 500028] = "DATABASE_ERROR";
    GSErrors[GSErrors["USERNAME_REQUIRED"] = 500029] = "USERNAME_REQUIRED";
    GSErrors[GSErrors["NO_PROVIDER_APPLICATION"] = 500031] = "NO_PROVIDER_APPLICATION";
    GSErrors[GSErrors["LOAD_FAILED"] = 500032] = "LOAD_FAILED";
    GSErrors[GSErrors["INVALID_ENVIRONMENT_CONFIG"] = 500033] = "INVALID_ENVIRONMENT_CONFIG";
    GSErrors[GSErrors["ERROR_DURING_BACKEND_OPERATION"] = 500034] = "ERROR_DURING_BACKEND_OPERATION";
    GSErrors[GSErrors["TIMEOUT"] = 504001] = "TIMEOUT";
    GSErrors[GSErrors["CLIENTTIMEOUT"] = 504002] = "CLIENTTIMEOUT";
    GSErrors[GSErrors["INVALID_URL"] = 404004] = "INVALID_URL";
    GSErrors[GSErrors["MEDIA_ITEMS_NOT_SUPPORTED"] = 401001] = "MEDIA_ITEMS_NOT_SUPPORTED";
    GSErrors[GSErrors["MISSING_ERROR_CODE"] = 599999] = "MISSING_ERROR_CODE";
})(GSErrors = exports.GSErrors || (exports.GSErrors = {}));
var GSErrorDetails;
(function (GSErrorDetails) {
    GSErrorDetails[GSErrorDetails["None"] = 0] = "None";
    GSErrorDetails[GSErrorDetails["Same_password"] = 100001] = "Same_password";
    GSErrorDetails[GSErrorDetails["Invalid_password"] = 100002] = "Invalid_password";
    GSErrorDetails[GSErrorDetails["Invalid_counters_query_with_cursor"] = 100003] = "Invalid_counters_query_with_cursor";
})(GSErrorDetails = exports.GSErrorDetails || (exports.GSErrorDetails = {}));


/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm1XaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlU2NyZWVuV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZVNlcnZlcldpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VVcGxvYWRXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQ29uc2VudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0RlYnVnLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRXJyb3JEaXNwbGF5RWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Vycm9ycy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL0F1dGhNZXRob2RzRm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL0xpbmtBY2NvdW50c0Zvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9Mb2dpbkZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9OZXdzbGV0dGVyU2lnbnVwRm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL09yZ2FuaXphdGlvblJlZ2lzdHJhdGlvbkZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9PdHBMb2dpbkZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9PdHBTZW5kQ29kZUZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9PdHBVcGRhdGVGb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvT3RwVmVyaWZpY2F0aW9uQmFzZUZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9QYXNzd29yZEF1dGhNZXRob2RGb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvUGFzc3dvcmRsZXNzTG9naW5Gb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvUHJvZmlsZUZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9QdXNoQXV0aE1ldGhvZEZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9SZWF1dGhlbnRpY2F0aW9uRm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1JlZ2lzdGVyRm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1Jlc2VuZFZlcmlmaWNhdGlvbkNvZGVGb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvUmVzZXRQYXNzd29yZEZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9IYW5kbGVycy9BcGlIYW5kbGVyL0Jhc2VBcGlIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSGFuZGxlcnMvQXBpSGFuZGxlci9TZW5kT3RwQ29kZUhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9IYW5kbGVycy9BcGlIYW5kbGVyL1NlbmRWZXJpZmljYXRpb25IYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSGFuZGxlcnMvQXBpSGFuZGxlci9TdGFuZGFyZEhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9IYW5kbGVycy9BcGlIYW5kbGVyL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSGFuZGxlcnMvQ2FwdGNoYUhhbmRsZXIvQmFzZUNhcHRjaGFIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSGFuZGxlcnMvQ2FwdGNoYUhhbmRsZXIvRnVuQ2FwdGNoYUhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9IYW5kbGVycy9DYXB0Y2hhSGFuZGxlci9Hb29nbGVDYXB0Y2hhSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0hhbmRsZXJzL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0J1dHRvbklucHV0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0NoZWNrYm94SW5wdXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvRW1haWxJbnB1dC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Gb3JtSW5wdXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvTG9naW5JZElucHV0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL1Bhc3N3b3JkSW5wdXRzLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL1Bob25lTnVtYmVySW5wdXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvUmFkaW9JbnB1dC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9SZW1lbWViZXJJbnB1dC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9SZXR5cGVQYXNzd29yZElucHV0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvTG9naW5Nb2Rlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbkNvbnN0cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbk9wdGlvbnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5TZXREYXRhLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UGx1Z2luLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UmVzb3VyY2VzLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU3dpdGNoU2NyZWVuV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvVGVtcGxhdGVFbGVtZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvVGVtcGxhdGVzLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9BcGlMaW5rV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9BcnJheU1hbmFnZXJXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0JpbmRpbmdXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0NhcHRjaGFXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0NvbnNlbnRXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0NvbnRhaW5lcldpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvSW1hZ2VXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0xvZ0luQXZhaWxhYmlsaXR5V2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9NeVBob3RvV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9QYXNzd29yZFN0cmVuZ3RoV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9QaG90b1VwbG9hZFdpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvUHJvZmlsZVBob3RvV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9SZXF1aXJlZERpc3BsYXlXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1NlY3JldFF1ZXN0aW9uV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9Tb2NpYWxMb2dpbldpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvU3Vic2NyaXB0aW9uV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9UZmFXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1RyYW5zbGF0ZWRXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3RlbXBsYXRlcy9jb25zZW50Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC90ZW1wbGF0ZXMvaW5saW5lZFBhc3N3b3JkU3RyZW5ndGguaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3RlbXBsYXRlcy9wYXNzd29yZFN0cmVuZ3RoLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC90ZW1wbGF0ZXMvcGFzc3dvcmRTdHJlbmd0aF9taW5pbXVtUmVxdWlyZW1lbnRzLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC90ZW1wbGF0ZXMvcGFzc3dvcmRTdHJlbmd0aF9zdHJlbmd0aE1ldGVyLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC90ZW1wbGF0ZXMvcGhvdG9VcGxvYWRfZm9ybS5odG1sIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdGVtcGxhdGVzL3Bob3RvVXBsb2FkX3VpLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC90ZW1wbGF0ZXMvc2NyZWVuU2V0Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC90ZW1wbGF0ZXMvc2NyZWVuU2V0X2RpYWxvZy5odG1sIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL2NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL0Nsb3NlUmVhc29ucy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL1BsdWdpblN0eWxlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvQmFzZU9iamVjdC9JQmFzZU9iamVjdENvbmZpZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtRQUFBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBOzs7UUFHQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0EsMENBQTBDLGdDQUFnQztRQUMxRTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLHdEQUF3RCxrQkFBa0I7UUFDMUU7UUFDQSxpREFBaUQsY0FBYztRQUMvRDs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0EseUNBQXlDLGlDQUFpQztRQUMxRSxnSEFBZ0gsbUJBQW1CLEVBQUU7UUFDckk7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSwyQkFBMkIsMEJBQTBCLEVBQUU7UUFDdkQsaUNBQWlDLGVBQWU7UUFDaEQ7UUFDQTtRQUNBOztRQUVBO1FBQ0Esc0RBQXNELCtEQUErRDs7UUFFckg7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QUFlLEVBQUUsc0NBQXNDLENBQUMsQ0FBQztRQUVyRyxRQUFRLEtBQUssRUFBRTtZQUNYLEtBQUssMEJBQWMsQ0FBQyxLQUFLO2dCQUNyQixJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQztnQkFDMUQsSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQ3RFLFlBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsc0NBQXNDLENBQUMsQ0FBQztnQkFDaEcsTUFBTTtZQUNWLEtBQUssMEJBQWMsQ0FBQyxLQUFLO2dCQUNyQixJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQztnQkFDMUQsSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7Z0JBQzFFLFlBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsMENBQTBDLENBQUMsQ0FBQztnQkFDcEcsTUFBTTtZQUNWLEtBQUssMEJBQWMsQ0FBQyxPQUFPO2dCQUN2QixJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQztnQkFDMUQsSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7Z0JBQ3JFLFlBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUscUNBQXFDLENBQUMsQ0FBQztnQkFDL0YsTUFBTTtZQUNWO2dCQUNJLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztnQkFDcEMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztnQkFDNUMsTUFBTTtTQUNiO0lBQ0wsQ0FBQztJQUVNLCtEQUE2QixHQUFwQztRQUNJLGlCQUFNLDZCQUE2QixXQUFFLENBQUM7UUFDdEMseUVBQXlFO1FBQ3pFLG9DQUFvQztJQUN4QyxDQUFDO0lBL0VhLDhCQUFNLEdBQUcsc0NBQThCLENBQUM7SUFnRjFELDhCQUFDO0NBQUEsQ0FyRjRDLCtCQUFjLEdBcUYxRDtBQXJGWSwwREFBdUI7QUFzRnBDLCtCQUFjLENBQUMsa0JBQWtCLENBQUMsdUJBQXVCLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7QUNoRzNELHFKQUErRTtBQUMvRSxzTEFBZ0c7QUFPaEcsSUFBSSx3QkFBd0IsR0FBRyxDQUFDLENBQUM7QUFDdEIsNEJBQW9CLEdBQUc7SUFDOUIsUUFBUSxFQUFFLG1CQUFtQjtDQUNoQyxDQUFDO0FBQ0Ysa0JBQVUsQ0FBQyw0QkFBb0IsQ0FBQyxDQUFDO0FBQ2pDO0lBQW1DLHlDQUFnQztJQUsvRCx1QkFBWSxPQUFlLEVBQUUsRUFBa0I7UUFBL0MsWUFDSSxrQkFBTSxPQUFPLEVBQUUsRUFBRSxDQUFDLFNBRXJCO1FBREcsS0FBSSxDQUFDLFdBQVcsR0FBRyxLQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsR0FBRyxXQUFXLEdBQUcsd0JBQXdCLEVBQUUsQ0FBQzs7SUFDOUYsQ0FBQztJQUVNLDJDQUFtQixHQUExQixVQUEyQixNQUFtQjtRQUMxQyxpQkFBTSxtQkFBbUIsWUFBQyxNQUFNLENBQUMsQ0FBQztRQUVsQyxJQUFJLElBQUksQ0FBQyxlQUFlLEVBQUU7WUFDdEIsSUFBSSxJQUFJLENBQUMsZUFBZTtnQkFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLFNBQVMsR0FBRyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsR0FBRyxVQUFVLENBQUM7WUFDdkcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLEVBQUU7Z0JBQzdCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztnQkFDaEMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO2FBQ3ZCO1NBQ0o7SUFDTCxDQUFDO0lBRU0sNkNBQXFCLEdBQTVCO1FBQ0ksSUFBSSxJQUFJLENBQUMsZUFBZTtZQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQyxDQUFDLGlEQUFpRDtRQUVoSCxJQUFJLElBQUksQ0FBQyxTQUFTO1lBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUU3QyxpQkFBTSxxQkFBcUIsV0FBRSxDQUFDO0lBQ2xDLENBQUM7SUFFUyxvQ0FBWSxHQUF0QjtRQUFBLGlCQWNDO1FBYkcsMkRBQTJEO1FBQzNELFlBQUssQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUU7WUFDNUMsV0FBVyxFQUFFLElBQUksQ0FBQyxXQUFXO1lBQzdCLElBQUksRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUk7WUFDMUIsUUFBUSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQztZQUM1QyxXQUFXLEVBQUUsa0JBQVE7Z0JBQ2pCLEtBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO1lBQzlCLENBQUM7WUFDRCxNQUFNLEVBQUU7Z0JBQ0osS0FBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUNsQyxDQUFDO1NBQ0osQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7SUFDaEMsQ0FBQztJQTFDYSxvQkFBTSxHQUFHLDRCQUFvQixDQUFDO0lBMkNoRCxvQkFBQztDQUFBLENBN0NrQyxtQ0FBZ0IsR0E2Q2xEO0FBN0NZLHNDQUFhO0FBOEMxQixtQ0FBZ0IsQ0FBQyxrQkFBa0IsQ0FBQyxhQUFhLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7QUMxRG5ELHFKQUFxRjtBQUNyRixnTEFBNEY7QUFTakYsb0JBQVksR0FBdUI7SUFDMUMsTUFBTSxFQUFFO1FBQ0osc0JBQXNCLEVBQUUsSUFBSTtRQUM1QixnQkFBZ0IsRUFBRSxLQUFLO1FBQ3ZCLFdBQVcsRUFBRSxtQkFBUztZQUNsQixPQUFPLFNBQVMsQ0FBQyxvQ0FBb0MsQ0FBQztRQUMxRCxDQUFDO0tBQ0o7SUFDRCxLQUFLLEVBQUU7UUFDSCxzQkFBc0IsRUFBRSxLQUFLO1FBQzdCLGdCQUFnQixFQUFFLElBQUk7UUFDdEIsV0FBVyxFQUFFLG1CQUFTO1lBQ2xCLE9BQU8sU0FBUyxDQUFDLDhCQUE4QixDQUFDO1FBQ3BELENBQUM7S0FDSjtJQUNELFFBQVEsRUFBRTtRQUNOLHNCQUFzQixFQUFFLElBQUk7UUFDNUIsZ0JBQWdCLEVBQUUsSUFBSTtRQUN0QixXQUFXLEVBQUUsbUJBQVM7WUFDbEIsT0FBTyxTQUFTLENBQUMsOEJBQThCLEdBQUcsU0FBUyxDQUFDLG9DQUFvQyxDQUFDO1FBQ3JHLENBQUM7S0FDSjtDQUNKLENBQUM7QUFDRixJQUFZLGtCQU1YO0FBTkQsV0FBWSxrQkFBa0I7SUFDMUIsNkRBQUs7SUFDTCwyREFBSTtJQUNKLHVEQUFFO0lBQ0YsMkRBQUk7SUFDSiwyREFBSTtBQUNSLENBQUMsRUFOVyxrQkFBa0IsR0FBbEIsMEJBQWtCLEtBQWxCLDBCQUFrQixRQU03QjtBQUNELGtCQUFVLENBQUMsa0JBQWtCLENBQUMsQ0FBQztBQUNwQixxQ0FBNkIsR0FBRztJQUN2QyxRQUFRLEVBQUUsNkJBQTZCO0lBQ3ZDLFdBQVcsRUFBRSxnQ0FBZ0M7SUFDN0MsV0FBVyxFQUFFLGVBQWU7SUFDNUIsWUFBWSxFQUFFLGdCQUFnQjtJQUM5QixXQUFXLEVBQUUsbUJBQW1CO0lBQ2hDLE1BQU0sRUFBRSxzQkFBc0I7SUFDOUIsaUJBQWlCLEVBQUUseUJBQXlCO0NBQy9DLENBQUM7QUFDRixrQkFBVSxDQUFDLHFDQUE2QixDQUFDLENBQUM7QUFDMUM7SUFBNEMsa0RBQThCO0lBb0J0RSxnQ0FBWSxJQUFjLEVBQUUsRUFBa0I7UUFBOUMsWUFDSSxrQkFBTSxJQUFJLEVBQUUsRUFBRSxDQUFDLFNBcURsQjtRQXpETyxtQkFBYSxHQUFXLEVBQUUsQ0FBQztRQU0vQixLQUFJLENBQUMsYUFBYSxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUM7UUFDbEMsS0FBSSxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRTlDLEtBQUksQ0FBQyxlQUFlLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUM7UUFDeEMsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1FBRTFCLGlEQUFpRDtRQUNqRCxLQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUVoRixJQUFJLENBQUMsS0FBSSxDQUFDLGNBQWMsRUFBRTtZQUN0QixLQUFJLENBQUMsSUFBSSxDQUFDLHFDQUE2QixDQUFDLFFBQVEsR0FBRywrQ0FBK0MsQ0FBQyxDQUFDOztTQUV2RztRQUVELEtBQUksQ0FBQyxPQUFPLEdBQUcsV0FBQyxJQUFJLFlBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUExQixDQUEwQixDQUFDO1FBRS9DLEtBQUksQ0FBQyxXQUFXLEdBQUcsb0JBQVksQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLHFDQUE2QixDQUFDLFdBQVcsQ0FBQyxDQUFDLElBQUksb0JBQVksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUV4SCxLQUFJLENBQUMsUUFBUSxHQUFHLFlBQUssQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFJLENBQUMsVUFBVSxDQUFDLFlBQVksRUFBRSxDQUFDLGdCQUFnQixFQUFFO1lBQ3hGLE9BQU8sRUFBRSxLQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxLQUFJLENBQUMsVUFBVSxDQUFDLFlBQVksRUFBRSxDQUFDO1NBQ3hFLENBQUMsQ0FBQztRQUVILEtBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMscUNBQTZCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUUvRSxJQUFJLEtBQUksQ0FBQyxRQUFRLEVBQUU7WUFDZixLQUFJLENBQUMsaUJBQWlCLEdBQUcsa0JBQWtCLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxxQ0FBNkIsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7WUFDOUcsSUFBSSxPQUFPLEtBQUksQ0FBQyxpQkFBaUIsS0FBSyxXQUFXO2dCQUM3QyxLQUFJLENBQUMsaUJBQWlCLEdBQUcsS0FBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsRUFBRSxDQUFDO1lBRXZHLEtBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztZQUMvRCxLQUFJLENBQUMsTUFBTSxHQUFHLGNBQU0sWUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFqQixDQUFpQixDQUFDO1lBQ3RDLEtBQUksQ0FBQyxPQUFPLEdBQUcsY0FBTSxZQUFJLENBQUMsVUFBVSxFQUFFLEVBQWpCLENBQWlCLENBQUM7WUFDdkMsS0FBSSxDQUFDLFFBQVEsR0FBRztnQkFDWixJQUFJLFVBQVUsR0FBRyxZQUFLLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDO2dCQUM5QyxJQUFJLFVBQVUsSUFBSSxVQUFVLENBQUMsS0FBSyxDQUFDLEdBQUcsSUFBSSxLQUFJLENBQUMsYUFBYTtvQkFBRSxLQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDdkYsQ0FBQyxDQUFDO1NBQ0w7UUFFRCxLQUFJLENBQUMsT0FBTyxHQUFHLGNBQU0sWUFBSSxDQUFDLGdCQUFnQixFQUFFLEVBQXZCLENBQXVCLENBQUM7UUFFN0MsWUFBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsS0FBSSxDQUFDLGNBQWMsRUFBRSxPQUFPLEVBQUUsS0FBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRTdFLElBQUksS0FBSSxDQUFDLFFBQVEsRUFBRTtZQUNmLEtBQUksQ0FBQyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLEtBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUM1RCxLQUFJLENBQUMsY0FBYyxDQUFDLGdCQUFnQixDQUFDLE1BQU0sRUFBRSxLQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDMUQsWUFBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxLQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDdkU7UUFFRCxLQUFJLENBQUMsVUFBVSxDQUFDLGdDQUFnQyxFQUFFLENBQUMsR0FBRyxDQUFDO1lBQ25ELEtBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUN6QixDQUFDLENBQUMsQ0FBQzs7SUFDUCxDQUFDO0lBRU0sK0NBQWMsR0FBckI7UUFDSSxZQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUV2RSxJQUFJLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDckIsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUNmLElBQUksQ0FBQyxjQUFjLENBQUMsbUJBQW1CLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDN0QsSUFBSSxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2FBQ2xFO1lBQ0QsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ2xCLFlBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUNuRjtRQUVELGlCQUFNLGNBQWMsV0FBRSxDQUFDO0lBQzNCLENBQUM7SUFFTywyQ0FBVSxHQUFsQjtRQUNJLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7UUFDeEMsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLElBQUksR0FBRyxDQUFDO1FBQ3RELElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7UUFDNUMsSUFBSSxhQUFhLEdBQ2IscUNBQTZCLENBQUMsV0FBVztZQUN6QyxHQUFHO1lBQ0gsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMscUNBQTZCLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxxQ0FBNkIsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUUxSCxJQUFJLGVBQWUsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3BELGVBQWUsQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDbEYsSUFBSSxlQUFlLENBQUMsS0FBSyxDQUFDLE9BQU8sS0FBSyxNQUFNO1lBQUUsZUFBZSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO1FBRWpGLElBQUksVUFBVSxHQUNWLFdBQVc7WUFDWCxJQUFJLENBQUMsUUFBUTtZQUNiLG1CQUFtQjtZQUNuQixJQUFJLENBQUMsZUFBZSxDQUFDLFNBQVM7WUFDOUIsV0FBVztZQUNYLGVBQWUsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDO1lBQ3JDLElBQUk7WUFDSixJQUFJLENBQUMsd0JBQXdCLEVBQUU7WUFDL0IsUUFBUSxDQUFDO1FBRWIsWUFBSyxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsQ0FBQyxlQUFlLEVBQ25DLFVBQVUsRUFDVixJQUFJLEVBQ0osT0FBTyxFQUNQLElBQUksRUFDSixJQUFJLEVBQ0osSUFBSSxDQUFDLFFBQVEsRUFDYixJQUFJLEVBQ0osSUFBSSxDQUFDLHFCQUFxQixFQUFFLEVBQzVCLGFBQWEsQ0FDaEIsQ0FBQztRQUVGLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO1FBQzVCLElBQUksQ0FBQyxhQUFhLEdBQUcsWUFBSyxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO0lBQ2hFLENBQUM7SUFFTyxzREFBcUIsR0FBN0I7UUFDSSxJQUFJLFlBQVksR0FBRyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7UUFDaEUsSUFBSSxLQUFLLEdBQUcsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVCLElBQUksRUFBRSxHQUFHLGtCQUFrQixDQUFDLGtCQUFrQixDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ25ELElBQUksSUFBSSxHQUFHLGtCQUFrQixDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBRXZELDRCQUE0QjtRQUM1QixJQUFJLE9BQU8sS0FBSyxLQUFLLFdBQVc7WUFBRSxLQUFLLEdBQUcsRUFBRSxDQUFDO2FBQ3hDLElBQUksS0FBSyxLQUFLLEVBQUU7WUFBRSxZQUFZLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRTdDLHVCQUF1QjtRQUN2QixJQUFJLEtBQUssS0FBSyxJQUFJO1lBQUUsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUU1QyxPQUFPLFlBQVksQ0FBQztJQUN4QixDQUFDO0lBRU8sMkNBQVUsR0FBbEI7UUFDSSxZQUFLLENBQUMsTUFBTSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQy9CLElBQUksQ0FBQyxlQUFlLEdBQUcsS0FBSyxDQUFDO0lBQ2pDLENBQUM7SUFFTyx5REFBd0IsR0FBaEM7UUFDSSxJQUFJLElBQUksR0FBVTtZQUNkLElBQUksRUFBRSxJQUFJLENBQUMsT0FBTztTQUNyQixDQUFDO1FBRUYsSUFBSSxhQUFhLEdBQUcsdUJBQXVCLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3BGLElBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxFQUFFLENBQUM7UUFFM0MsSUFBSSxXQUFXLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO1FBRXRGLElBQUksQ0FBQyxXQUFXO1lBQUUsV0FBVyxHQUFHLEVBQUUsQ0FBQztRQUNuQyxXQUFXLENBQUMsU0FBUyxHQUFHLFdBQVcsQ0FBQyxTQUFTLElBQUksQ0FBQyxDQUFDO1FBQ25ELFdBQVcsQ0FBQyxhQUFhLEdBQUcsV0FBVyxDQUFDLGFBQWEsSUFBSSxDQUFDLENBQUM7UUFFM0QsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLGdCQUFnQixFQUFFO1lBQ25DLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztZQUNkLElBQUksV0FBVyxHQUFHLFVBQVUsQ0FBQztZQUU3QixJQUFJLHVCQUF1QixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUUsYUFBYSxFQUFFLFdBQVcsQ0FBQyxFQUFFO2dCQUM3RixXQUFXLEdBQUcsTUFBTSxDQUFDO2dCQUVyQixJQUFJLGFBQWEsQ0FBQyxNQUFNLEdBQUcsQ0FBQztvQkFBRSxLQUFLLElBQUksRUFBRSxDQUFDO2dCQUMxQyxJQUFJLGFBQWEsQ0FBQyxNQUFNLEdBQUcsQ0FBQztvQkFBRSxLQUFLLElBQUksRUFBRSxDQUFDLENBQUMsc0JBQXNCO2dCQUNqRSxJQUFJLGFBQWEsQ0FBQyxNQUFNLEdBQUcsQ0FBQztvQkFBRSxLQUFLLElBQUksRUFBRSxDQUFDLENBQUMsc0JBQXNCO2dCQUVqRSxJQUFJLGFBQWEsQ0FBQyxVQUFVLEdBQUcsQ0FBQztvQkFBRSxLQUFLLElBQUksRUFBRSxDQUFDO2dCQUM5QyxJQUFJLGFBQWEsQ0FBQyxVQUFVLEdBQUcsQ0FBQztvQkFBRSxLQUFLLElBQUksRUFBRSxDQUFDLENBQUMsdUJBQXVCO2dCQUN0RSxJQUFJLGFBQWEsQ0FBQyxVQUFVLEdBQUcsQ0FBQztvQkFBRSxLQUFLLElBQUksRUFBRSxDQUFDLENBQUMsdUJBQXVCO2dCQUV0RSxJQUFJLEtBQUssR0FBRyxFQUFFO29CQUFFLFdBQVcsR0FBRyxNQUFNLENBQUM7Z0JBQ3JDLElBQUksS0FBSyxHQUFHLEVBQUU7b0JBQUUsV0FBVyxHQUFHLFFBQVEsQ0FBQztnQkFDdkMsSUFBSSxLQUFLLEdBQUcsR0FBRztvQkFBRSxXQUFXLEdBQUcsYUFBYSxDQUFDO2FBQ2hEO1lBRUQsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7WUFDbkIsSUFBSSxDQUFDLFVBQVUsR0FBRyx5QkFBeUIsR0FBRyxXQUFXLENBQUM7WUFDMUQsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUN0RCxJQUFJLENBQUMsaUJBQWlCLEdBQUcsNkJBQTZCLEdBQUcsV0FBVyxDQUFDO1NBQ3hFO1FBRUQsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLHNCQUFzQixFQUFFO1lBQ3pDLElBQUksY0FBYyxHQUFHLEVBQUUsQ0FBQztZQUV4QixJQUFJLFdBQVcsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxFQUFFO2dCQUMzQixJQUFJLGFBQWEsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsRUFBRSxNQUFNLEVBQUUsV0FBVyxDQUFDLFNBQVMsQ0FBQyxDQUFDO2dCQUNuRyxJQUFJLGFBQWE7b0JBQUUsY0FBYyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQzthQUN6RDtZQUVELElBQUksV0FBVyxDQUFDLGFBQWEsR0FBRyxDQUFDLEVBQUU7Z0JBQy9CLElBQUksaUJBQWlCLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsNkJBQTZCLEVBQUUsTUFBTSxFQUFFLFdBQVcsQ0FBQyxhQUFhLENBQUMsQ0FBQztnQkFDbEgsSUFBSSxpQkFBaUI7b0JBQUUsY0FBYyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO2FBQ2pFO1lBRUQsSUFBSSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUM7WUFDdkIsSUFBSSxjQUFjLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtnQkFDM0IsSUFBSSxPQUFPLEdBQUcsY0FBYyxDQUFDLEdBQUcsRUFBRSxDQUFDO2dCQUNuQyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLGdDQUFnQyxDQUFDLEdBQUcsR0FBRyxDQUFDO2dCQUVwRixJQUFJLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQztvQkFBRSxJQUFJLENBQUMsWUFBWSxJQUFJLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsQ0FBQztnQkFFM0gsSUFBSSxDQUFDLFlBQVksSUFBSSxPQUFPLENBQUM7YUFDaEM7WUFDRCxJQUFJLENBQUMsWUFBWSxHQUFHLFlBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7U0FDL0U7UUFFRCxPQUFPLFlBQUssQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFFTyxpREFBZ0IsR0FBeEI7UUFDSSxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztRQUUzQyxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDZixRQUFRLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsVUFBVSxDQUFDLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztTQUN4RTthQUFNO1lBQ0gsaUJBQWlCO1lBQ2pCLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztZQUN0QyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQztTQUM3RDtJQUNMLENBQUM7SUFFTSw4REFBNkIsR0FBcEM7UUFDSSxpQkFBTSw2QkFBNkIsV0FBRSxDQUFDO1FBQ3RDLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNmLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxxQ0FBNkIsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7WUFDaEksSUFBSSxPQUFPLElBQUksQ0FBQyxpQkFBaUIsS0FBSyxXQUFXO2dCQUM3QyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsRUFBRSxDQUFDO1NBQzFHO0lBQ0wsQ0FBQztJQUVNLDhDQUFhLEdBQXBCO1FBQ0ksSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFO1lBQ3RCLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztTQUNyQjtJQUNMLENBQUM7SUFwT2EsNkJBQU0sR0FBRyxxQ0FBNkIsQ0FBQztJQXFPekQsNkJBQUM7Q0FBQSxDQXZQMkMsK0JBQWMsR0F1UHpEO0FBdlBZLHdEQUFzQjtBQXdQbkMsK0JBQWMsQ0FBQyxrQkFBa0IsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0FBaUIxRCxTQUFTLDZCQUE2QixDQUFDLEtBQWU7SUFDbEQsSUFBSSxLQUFLLElBQUksS0FBSyxDQUFDLE1BQU07UUFBRSxPQUFPLEtBQUssQ0FBQyxNQUFNLENBQUM7SUFFL0MsT0FBTyxDQUFDLENBQUM7QUFDYixDQUFDO0FBQ0QsU0FBZ0IsdUJBQXVCLENBQUMsSUFBWTtJQUNoRCxJQUFJLENBQUMsSUFBSTtRQUFFLElBQUksR0FBRyxFQUFFLENBQUM7SUFFckIsSUFBSSxPQUFPLEdBQXNCO1FBQzdCLEtBQUssRUFBRSw2QkFBNkIsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzFELEtBQUssRUFBRSw2QkFBNkIsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzFELE1BQU0sRUFBRSw2QkFBNkIsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3hELFlBQVksRUFBRSw2QkFBNkIsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ3ZFLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTTtRQUNuQixVQUFVLEVBQUUsQ0FBQztLQUNoQixDQUFDO0lBRUYsSUFBSSxPQUFPLENBQUMsS0FBSztRQUFFLE9BQU8sQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUN4QyxJQUFJLE9BQU8sQ0FBQyxLQUFLO1FBQUUsT0FBTyxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ3hDLElBQUksT0FBTyxDQUFDLE1BQU07UUFBRSxPQUFPLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDekMsSUFBSSxPQUFPLENBQUMsWUFBWTtRQUFFLE9BQU8sQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUUvQyxPQUFPLE9BQU8sQ0FBQztBQUNuQixDQUFDO0FBbEJELDBEQWtCQztBQVVELFNBQWdCLHVCQUF1QixDQUFDLElBQVksRUFBRSxhQUFnQyxFQUFFLGlCQUEwQztJQUM5SCxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsYUFBYSxJQUFJLENBQUMsaUJBQWlCO1FBQUUsT0FBTztJQUMxRCxJQUFJLGlCQUFpQixDQUFDLE1BQU0sRUFBRTtRQUMxQixJQUFJLFdBQVcsR0FBRyxJQUFJLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN2RCxPQUFPLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDakM7U0FBTTtRQUNILE9BQU8sQ0FBQyxDQUNKLGFBQWEsQ0FBQyxLQUFLLEdBQUcsaUJBQWlCLENBQUMsWUFBWTtZQUNwRCxhQUFhLENBQUMsS0FBSyxHQUFHLGlCQUFpQixDQUFDLFlBQVk7WUFDcEQsYUFBYSxDQUFDLE1BQU0sR0FBRyxpQkFBaUIsQ0FBQyxRQUFRO1lBQ2pELGFBQWEsQ0FBQyxZQUFZLEdBQUcsaUJBQWlCLENBQUMsZUFBZTtZQUM5RCxhQUFhLENBQUMsVUFBVSxHQUFHLGlCQUFpQixDQUFDLGFBQWE7WUFDMUQsYUFBYSxDQUFDLE1BQU0sR0FBRyxpQkFBaUIsQ0FBQyxTQUFTLENBQ3JELENBQUM7S0FDTDtBQUNMLENBQUM7QUFmRCwwREFlQzs7Ozs7Ozs7Ozs7Ozs7QUM3V0QscUpBQStFO0FBQy9FLHNMQUFnRztBQUVoRyxzTEFBNEY7QUFDNUYsZ0xBQTRGO0FBQzVGLDBIQUFrRTtBQUVsRSxJQUFJLG1CQUFtQixHQUFHLENBQUMsQ0FBQztBQUNmLGdDQUF3QixHQUFHO0lBQ3BDLFFBQVEsRUFBRSx3QkFBd0I7Q0FDckMsQ0FBQztBQUNGLGtCQUFVLENBQUMsZ0NBQXdCLENBQUMsQ0FBQztBQUNyQztJQUF1Qyw2Q0FBZ0M7SUFVbkUsMkJBQVksS0FBZSxFQUFFLEVBQWtCO1FBQS9DLFlBQ0ksa0JBQU0sS0FBSyxFQUFFLEVBQUUsQ0FBQyxTQTJCbkI7UUF6QkcsS0FBSSxDQUFDLGNBQWMsR0FBRyxLQUFJLENBQUMsZUFBZSxHQUFHLFFBQVEsQ0FBQztRQUN0RCxLQUFJLENBQUMsZUFBZSxHQUFHLEtBQUksQ0FBQyxlQUFlLEdBQUcsT0FBTyxDQUFDO1FBQ3RELEtBQUksQ0FBQyxjQUFjLEdBQUcsWUFBSyxDQUFDLENBQUMsQ0FBQyxjQUFjLEVBQUUsR0FBRyw4QkFBOEIsQ0FBQyxDQUFDLHNDQUFzQztRQUV2SCxJQUFJLFFBQVEsR0FBRyxLQUFJLENBQUMsVUFBVSxDQUFDLFlBQVksRUFBRSxDQUFDLGNBQWMsQ0FBQztRQUM3RCxLQUFJLENBQUMsTUFBTSxHQUFHLFlBQUssQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDL0MsZUFBZSxFQUFFLEtBQUksQ0FBQyxlQUFlO1lBQ3JDLGNBQWMsRUFBRSxLQUFJLENBQUMsY0FBYztZQUNuQyxXQUFXLEVBQUUsS0FBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDO1lBQ25ELGNBQWMsRUFBRSxLQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztZQUN6RCxHQUFHLEVBQUUsS0FBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsc0JBQXNCLENBQUMsR0FBRyxpQkFBaUI7U0FDM0UsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7UUFFbEIsSUFBSSxZQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssSUFBSSxZQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRTtZQUNoRCxLQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7Z0JBQ3BCLHNCQUFzQixFQUFFLHNCQUFZO29CQUNoQyxJQUFJLFlBQVksQ0FBQyxPQUFPLEVBQUU7d0JBQ3RCLE9BQU8sWUFBWSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUM7cUJBQzdDO29CQUNELE9BQU8sWUFBWSxDQUFDO2dCQUN4QixDQUFDO2FBQ0osQ0FBQyxDQUFDO1NBQ047O0lBQ0wsQ0FBQztJQUVNLCtDQUFtQixHQUExQixVQUEyQixNQUFtQjtRQUMxQyxpQkFBTSxtQkFBbUIsWUFBQyxNQUFNLENBQUMsQ0FBQztRQUVsQyxrQkFBa0I7UUFDbEIsSUFBSSxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzNDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDbkMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRTdDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQzVCLENBQUM7SUFFTSxpREFBcUIsR0FBNUI7UUFDSSxJQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDN0MsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7UUFFbEIsaUJBQU0scUJBQXFCLFdBQUUsQ0FBQztJQUNsQyxDQUFDO0lBRU8sNENBQWdCLEdBQXhCO1FBQ0ksSUFBSSxPQUFPLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7UUFFM0QsSUFBSSxPQUFPO1lBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxlQUFlLEdBQUcsT0FBTyxHQUFHLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO0lBQ3RGLENBQUM7SUFFTSx1Q0FBVyxHQUFsQjtRQUNJLE9BQU8sWUFBSyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBWSxFQUFFLENBQUMsZ0JBQWdCLEVBQUU7WUFDL0UsVUFBVSxFQUFFLElBQUksQ0FBQyxlQUFlO1NBQ25DLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFTSwwQ0FBYyxHQUFyQjtRQUNJLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBRU0sMENBQWMsR0FBckI7UUFDSSxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFFTSw0Q0FBZ0IsR0FBdkI7UUFDSSxpQ0FBaUM7UUFDakMsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsZUFBZSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1FBQ3JFLElBQUksVUFBVSxHQUFHLFlBQUssQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FDM0MsYUFBVyxZQUFLLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsaUZBQThFLEVBQ3pILElBQUksQ0FBQyxjQUFjLEVBQ25CLFlBQUssQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxDQUM3RCxDQUFDO1FBRUYsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEdBQUcsVUFBVSxDQUFDO1FBRXJDLHFCQUFxQjtRQUNyQixJQUFJLFdBQVcsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNoRSxXQUFXLENBQUMsS0FBSyxDQUFDLGVBQWUsR0FBRyxPQUFPLEdBQUcsWUFBSyxDQUFDLENBQUMsQ0FBQyxjQUFjLEVBQUUsR0FBRyxrQ0FBa0MsQ0FBQztRQUU1RyxpQkFBTSxnQkFBZ0IsV0FBRSxDQUFDO0lBQzdCLENBQUM7SUFFTSwyQ0FBZSxHQUF0QixVQUF1QixRQUFzQjtRQUE3QyxpQkFhQztRQVpHLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUV2QixnRkFBZ0Y7UUFDaEYsSUFBSSxNQUFNLEdBQVEsWUFBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLENBQUM7UUFDakYsTUFBTSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDO1FBQzVDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1FBQ3JCLE9BQU8sTUFBTSxDQUFDLFdBQVcsQ0FBQztRQUMxQixPQUFPLE1BQU0sQ0FBQyxRQUFRLENBQUM7UUFFdkIsWUFBSyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLDRCQUE0QixFQUFFLE1BQU0sRUFBRSxhQUFHLElBQUksWUFBSSxDQUFDLHFCQUFxQixDQUFDLEdBQUcsQ0FBQyxFQUEvQixDQUErQixFQUFFO1lBQ3pHLGNBQWMsRUFBRSxJQUFJLENBQUMsY0FBYztTQUN0QyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU8saURBQXFCLEdBQTdCLFVBQThCLEdBQUc7UUFDN0IsSUFBSSxXQUFXLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDaEUsV0FBVyxDQUFDLEtBQUssQ0FBQyxlQUFlLEdBQUcsRUFBRSxDQUFDO1FBRXZDLFFBQVEsR0FBRyxDQUFDLFNBQVMsRUFBRTtZQUNuQixLQUFLLG1CQUFRLENBQUMsRUFBRTtnQkFDWixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7Z0JBQ3ZCLE1BQU07WUFDVixLQUFLLG1CQUFRLENBQUMsdUJBQXVCLEVBQUUsMEVBQTBFO2dCQUM3RyxJQUFJLENBQUMsYUFBYSxDQUFDO29CQUNmLFNBQVMsRUFBRSxtQkFBUSxDQUFDLHVCQUF1QjtvQkFDM0MsWUFBWSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLDRCQUE0QixDQUFDO2lCQUN0RSxDQUFDLENBQUM7Z0JBQ0gsTUFBTTtZQUNWO2dCQUNJLGtCQUFrQjtnQkFDbEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDeEIsTUFBTTtTQUNiO0lBQ0wsQ0FBQztJQUVPLDJDQUFlLEdBQXZCO1FBQUEsaUJBd0NDO1FBdkNHLG9DQUFvQztRQUNwQyxJQUFJLE1BQU0sR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUMzRCxJQUFJLE1BQU07WUFBRSxNQUFNLENBQUMsS0FBSyxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7UUFFOUMsSUFBSSxxQkFBcUIsR0FBRyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztRQUN2RCxxQkFBcUIsQ0FBQyxJQUFJLEdBQUcsV0FBVyxDQUFDO1FBQ3pDLHFCQUFxQixDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsZUFBZSxHQUFHLEVBQUUsbUJBQW1CLENBQUM7UUFFN0UsSUFBSSxHQUFHLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztRQUN0QixJQUFJLGtCQUFrQixHQUFHLFlBQUssQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQzFELElBQUksWUFBWSxHQUFHLENBQ2YscUJBQXFCLENBQUMsV0FBVyxJQUFJLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxZQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsWUFDdEcsa0JBQWtCLGtDQUE2QixZQUFLLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMscUJBQXFCLENBQUcsQ0FBQztRQUU3RyxHQUFHLENBQUMsTUFBTSxHQUFHO1lBQ1QsSUFBSSxPQUFPLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxLQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDM0QsSUFBSSxRQUFRLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQztZQUV2QixJQUFJLE9BQU87Z0JBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxlQUFlLEdBQUcsT0FBTyxHQUFHLFFBQVEsR0FBRyxJQUFJLENBQUM7WUFFdkUsS0FBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRTdDLEdBQUcsR0FBRyxHQUFHLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLENBQUMscUJBQXFCO1FBQ2hFLENBQUMsQ0FBQztRQUVGLEdBQUcsQ0FBQyxPQUFPLEdBQUc7WUFDVixLQUFJLENBQUMsYUFBYSxDQUFDO2dCQUNmLFNBQVMsRUFBRSxtQkFBUSxDQUFDLGtCQUFrQjtnQkFDdEMsWUFBWSxFQUFFLDRCQUE0QjthQUM3QyxDQUFDLENBQUM7WUFFSCxLQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFdkMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsQ0FBQyxxQkFBcUI7UUFDaEUsQ0FBQyxDQUFDO1FBRUYsR0FBRyxDQUFDLEdBQUcsR0FBRyxZQUFZLENBQUM7UUFFdkIsaUJBQU0sZUFBZSxZQUFDLCtCQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0MsQ0FBQztJQUVPLHlDQUFhLEdBQXJCLFVBQXNCLFFBQVE7UUFDMUIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFFeEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFckUsaUJBQU0sZUFBZSxZQUFDLCtCQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQTVLYSx3QkFBTSxHQUFHLGdDQUF3QixDQUFDO0lBNktwRCx3QkFBQztDQUFBLENBckxzQyxtQ0FBZ0IsR0FxTHREO0FBckxZLDhDQUFpQjtBQXNMOUIsK0JBQWMsQ0FBQyxrQkFBa0IsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDOzs7Ozs7Ozs7Ozs7OztBQ2xNckQscUpBQStFO0FBQy9FLHNMQUFnRztBQUdyRixpQ0FBeUIsR0FBRztJQUNuQyxRQUFRLEVBQUUseUJBQXlCO0NBQ3RDLENBQUM7QUFDRixrQkFBVSxDQUFDLGlDQUF5QixDQUFDLENBQUM7QUFDdEM7SUFBd0MsOENBQWdDO0lBR3BFLDRCQUFZLE9BQWUsRUFBRSxFQUFrQjtRQUEvQyxZQUNJLGtCQUFNLE9BQU8sRUFBRSxFQUFFLENBQUMsU0FHckI7UUFERyxPQUFPLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxLQUFJLENBQUMsQ0FBQzs7SUFDdEMsQ0FBQztJQUVNLGdEQUFtQixHQUExQixVQUEyQixNQUFtQjtRQUMxQyxpQkFBTSxtQkFBbUIsWUFBQyxNQUFNLENBQUMsQ0FBQztRQUVsQyxJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQzNDLElBQUksWUFBWSxHQUFHLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLFlBQUssQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBRTlGLElBQUksQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUVNLDRDQUFlLEdBQXRCLFVBQXVCLFlBQW9CO1FBQ3ZDLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsWUFBWSxHQUFHLFlBQVksR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUM5RixDQUFDO0lBbkJhLHlCQUFNLEdBQUcsaUNBQXlCLENBQUM7SUFvQnJELHlCQUFDO0NBQUEsQ0FyQnVDLG1DQUFnQixHQXFCdkQ7QUFyQlksZ0RBQWtCO0FBc0IvQixtQ0FBZ0IsQ0FBQyxrQkFBa0IsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDOzs7Ozs7Ozs7Ozs7OztBQzlCeEQscUpBQStFO0FBQy9FLGdMQUE0RjtBQUM1RiwrS0FBNEc7QUFFNUcsbUxBQStGO0FBRWxGLG9DQUE0QixHQUFHO0lBQ3hDLFFBQVEsRUFBRSx5QkFBeUI7SUFDbkMsT0FBTyxFQUFFLGVBQWU7Q0FDM0IsQ0FBQztBQUNGLGtCQUFVLENBQUMsb0NBQTRCLENBQUMsQ0FBQztBQUN6QztJQUEyQyxpREFBOEI7SUFLckUsK0JBQVksSUFBYyxFQUFFLEVBQWtCO1FBQTlDLFlBQ0ksa0JBQU0sSUFBSSxFQUFFLEVBQUUsQ0FBQyxTQVVsQjtRQVJHLHlGQUF5RjtRQUN6RixJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxLQUFLLE1BQU0sRUFBRTtZQUM3QixFQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7U0FDekI7UUFFRCxrRUFBa0U7UUFDbEUsK0ZBQStGO1FBQy9GLEVBQUUsQ0FBQyxZQUFZLENBQUMsYUFBYSxFQUFFLE1BQU0sQ0FBQyxDQUFDOztJQUMzQyxDQUFDO0lBRU0sbURBQW1CLEdBQTFCLFVBQTJCLE1BQW1CO1FBQzFDLGlCQUFNLG1CQUFtQixZQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2xDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQzVCLENBQUM7SUFFTSw2REFBNkIsR0FBcEM7UUFDSSxpQkFBTSw2QkFBNkIsV0FBRSxDQUFDO1FBQ3RDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQzVCLENBQUM7SUFFTSxrREFBa0IsR0FBekIsVUFBMEIsS0FBaUI7UUFDdkMsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxvQ0FBNEIsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN2RixJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztJQUM5QixDQUFDO0lBRU8sZ0RBQWdCLEdBQXhCO1FBQ0ksSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQztRQUNoQyxJQUFJLEVBQUUsRUFBRTtZQUNKLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLFlBQVksQ0FBQyxvQ0FBNEIsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNyRSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtnQkFDZixJQUFJLENBQUMsSUFBSSxDQUFJLG9DQUE0QixDQUFDLFFBQVEsb0JBQWUsb0NBQTRCLENBQUMsT0FBTyxlQUFZLENBQUMsQ0FBQztnQkFDbkgsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUNaLE9BQU87YUFDVjtZQUVELElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyw0QkFBZ0IsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUM7WUFDbEksSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUU7Z0JBQ3BCLElBQUksQ0FBQyxJQUFJLENBQUksb0NBQTRCLENBQUMsUUFBUSxpQ0FBNEIsSUFBSSxDQUFDLE9BQU8saUJBQWMsQ0FBQyxDQUFDO2dCQUMxRyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQ1osT0FBTzthQUNWO1NBQ0o7UUFFRCxJQUFJLElBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsRUFBRTtZQUNuRCxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDZjthQUFNO1lBQ0gsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ2Y7SUFDTCxDQUFDO0lBRU8sb0NBQUksR0FBWjtRQUNJLFlBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsa0NBQWdCLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDL0YsQ0FBQztJQUVPLG9DQUFJLEdBQVo7UUFDSSxZQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLGtDQUFnQixDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQzFGLENBQUM7SUEvRGEsNEJBQU0sR0FBRyxvQ0FBNEIsQ0FBQztJQWdFeEQsNEJBQUM7Q0FBQSxDQWpFMEMsK0JBQWMsR0FpRXhEO0FBakVZLHNEQUFxQjtBQWtFbEMsK0JBQWMsQ0FBQyxrQkFBa0IsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDOzs7Ozs7Ozs7Ozs7OztBQzdFekQscUpBQXdGO0FBQ3hGLGdMQUE0RjtBQUc1RixtTEFBOEY7QUFFbkYsbUNBQTJCLEdBQUc7SUFDckMsUUFBUSxFQUFFLDJCQUEyQjtJQUNyQyxVQUFVLEVBQUUsa0JBQWtCO0NBQ2pDLENBQUM7QUFDRixrQkFBVSxDQUFDLG1DQUEyQixDQUFDLENBQUM7QUFDeEM7SUFBMEMsZ0RBQThCO0lBTXBFLDhCQUFZLElBQWMsRUFBRSxFQUFrQjtRQUE5QyxZQUNJLGtCQUFNLElBQUksRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDLFNBYXpCO1FBbkJPLGVBQVMsR0FBRyxJQUFJLEtBQUssRUFBbUIsQ0FBQztRQVE3QyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLEtBQUksQ0FBQyxDQUFDO1FBRWpDLElBQU0sZ0JBQWdCLEdBQUcsRUFBRSxDQUFDLGdCQUFnQixDQUFDLDBCQUEwQixDQUFDLENBQUM7UUFDekUsZUFBTyxDQUFDLGdCQUFnQixFQUFFLFVBQUMsVUFBdUIsSUFBSyxZQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLGVBQWUsQ0FBQyxVQUFVLEVBQUUsS0FBSSxDQUFDLENBQUMsRUFBMUQsQ0FBMEQsQ0FBQyxDQUFDO1FBRW5ILEtBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUVqRCxJQUFJLENBQUMsS0FBSSxDQUFDLFdBQVcsRUFBRTtZQUNuQixLQUFJLENBQUMsSUFBSSxDQUFDLG1DQUEyQixDQUFDLFFBQVEsR0FBRyxrREFBa0QsQ0FBQyxDQUFDOztTQUV4Rzs7SUFDTCxDQUFDO0lBRU0sNkNBQWMsR0FBckI7UUFDSSxlQUFPLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxXQUFDLElBQUksUUFBQyxDQUFDLGNBQWMsRUFBRSxFQUFsQixDQUFrQixDQUFDLENBQUM7UUFFakQsaUJBQU0sY0FBYyxXQUFFLENBQUM7SUFDM0IsQ0FBQztJQUVNLGtEQUFtQixHQUExQixVQUEyQixNQUFtQjtRQUE5QyxpQkFRQztRQVBHLGlCQUFNLG1CQUFtQixZQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRWxDLElBQUksSUFBSSxDQUFDLGVBQWUsRUFBRTtZQUN0QixJQUFJLElBQUksQ0FBQyxXQUFXO2dCQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxtQ0FBMkIsQ0FBQyxVQUFVLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxxQ0FBcUM7WUFFdkosZUFBTyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsV0FBQyxJQUFJLFFBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLEVBQTNDLENBQTJDLENBQUMsQ0FBQztTQUM3RTtJQUNMLENBQUM7SUFFTSxvREFBcUIsR0FBNUI7UUFDSSxJQUFJLElBQUksQ0FBQyxlQUFlO1lBQUUsZUFBTyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsV0FBQyxJQUFJLFFBQUMsQ0FBQyxxQkFBcUIsRUFBRSxFQUF6QixDQUF5QixDQUFDLENBQUM7UUFFbEYsaUJBQU0scUJBQXFCLFdBQUUsQ0FBQztJQUNsQyxDQUFDO0lBRU0sMENBQVcsR0FBbEIsVUFBbUIsUUFBZ0I7UUFDL0IsZUFBTyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsV0FBQyxJQUFJLFFBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDLEVBQXhDLENBQXdDLENBQUMsQ0FBQztRQUV2RSxJQUFJLElBQUksQ0FBQyxXQUFXO1lBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxlQUFlLENBQUMsZUFBZSxDQUFDLG1DQUEyQixDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBRS9HLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUMsQ0FBQywwQkFBMEI7SUFDN0UsQ0FBQztJQTlDYSwyQkFBTSxHQUFHLG1DQUEyQixDQUFDO0lBK0N2RCwyQkFBQztDQUFBLENBbkR5QywrQkFBYyxHQW1EdkQ7QUFuRFksb0RBQW9CO0FBb0RqQztJQUE4QiwyQ0FBNEI7SUFDdEQseUJBQVksRUFBZSxFQUFFLE1BQTRCO2VBQ3JELGtCQUFNLEVBQUUsRUFBRSxNQUFNLENBQUM7SUFDckIsQ0FBQztJQUNMLHNCQUFDO0FBQUQsQ0FBQyxDQUo2QixpQ0FBZSxHQUk1QztBQUNELCtCQUFjLENBQUMsa0JBQWtCLENBQUMsb0JBQW9CLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7QUNwRXhELHFKQUF1STtBQUN2SSxzTEFBZ0c7QUFFaEcsb0tBQWdHO0FBS2hHLDhKQUE2RjtBQUU3RiwwSEFBa0U7QUFFbEUsSUFBSSx3QkFBd0IsR0FBRyxDQUFDLENBQUM7QUFDcEIsZ0NBQXdCLEdBQUc7SUFDcEMsUUFBUSxFQUFFLHdCQUF3QjtDQUNyQyxDQUFDO0FBQ0Ysa0JBQVUsQ0FBQyxnQ0FBd0IsQ0FBQyxDQUFDO0FBQ3JDO0lBQXVDLDZDQUFnQztJQWNuRSwyQkFBWSxPQUFlLEVBQUUsRUFBa0I7UUFBL0MsWUFDSSxrQkFBTSxPQUFPLEVBQUUsRUFBRSxDQUFDLFNBaUJyQjtRQWZHLEtBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsS0FBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsZ0NBQXdCLENBQUMsUUFBUSxDQUFDO1FBQzNFLEtBQUksQ0FBQyxTQUFTLEdBQUcsdUJBQVUsQ0FBQyxLQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxDQUFDO1FBQ3BFLEtBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLEdBQUcsVUFBVSxHQUFHLHdCQUF3QixFQUFFLENBQUMsQ0FBQyxzS0FBc0s7UUFFaFEsS0FBSSxDQUFDLGVBQWUsR0FBRyxXQUFDO1lBQ3BCLGlGQUFpRjtZQUNqRiwrQ0FBK0M7WUFDL0MsSUFBSSxDQUFDLENBQUMsU0FBUyxLQUFLLG1CQUFRLENBQUMsWUFBWSxJQUFJLENBQUMsQ0FBQyxTQUFTLEtBQUssbUJBQVEsQ0FBQyx1QkFBdUIsRUFBRTtnQkFDM0YsT0FBTyxLQUFJLENBQUMsVUFBVSxDQUFDLGdCQUFnQixDQUFDLENBQUMsRUFBRSxLQUFJLENBQUMsQ0FBQzthQUNwRDtRQUNMLENBQUMsQ0FBQztRQUNGLEtBQUksQ0FBQyxlQUFlLEdBQUcsV0FBQztZQUNwQixLQUFJLENBQUMsVUFBVSxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ2pDLEtBQUksQ0FBQyxVQUFVLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxTQUFTLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRSxLQUFJLENBQUMsQ0FBQztRQUN2RSxDQUFDOztJQUNMLENBQUM7SUFFTSwrQ0FBbUIsR0FBMUIsVUFBMkIsTUFBbUI7UUFDMUMsaUJBQU0sbUJBQW1CLFlBQUMsTUFBTSxDQUFDLENBQUM7UUFFbEMsSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFO1lBQ3RCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxVQUFVLEVBQUU7Z0JBQ3BDLDBFQUEwRTtnQkFDMUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsQ0FBQzthQUNyRTtZQUVELElBQUksQ0FBQyxVQUFVLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNoRCxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsR0FBRyw4QkFBOEIsQ0FBQztZQUMzRCxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO1lBRXRDLElBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUVsRCxJQUFJLENBQUMseUJBQXlCLEVBQUUsQ0FBQztZQUVqQyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLFlBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDL0YsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLEVBQUU7Z0JBQzdCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztnQkFDaEMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO2FBQ3ZCO1NBQ0o7SUFDTCxDQUFDO0lBRUQ7O09BRUc7SUFDSSwrQ0FBbUIsR0FBMUI7UUFDSSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBQy9ELENBQUM7SUFFRCxpQ0FBaUM7SUFDdkIsbURBQXVCLEdBQWpDO1FBQ0ksSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLHNCQUFXLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztJQUN4SCxDQUFDO0lBRU8scURBQXlCLEdBQWpDO1FBQ0ksSUFBSSxjQUFjLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUVoSSxJQUFJLGNBQWMsS0FBSyxJQUFJLElBQUksT0FBTyxjQUFjLEtBQUssV0FBVztZQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsR0FBRyxjQUFjLENBQUM7SUFDM0gsQ0FBQztJQUVNLGlEQUFxQixHQUE1QjtRQUNJLElBQUksSUFBSSxDQUFDLGVBQWU7WUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUMsQ0FBQyxpREFBaUQ7UUFFaEgsSUFBSSxJQUFJLENBQUMsU0FBUztZQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUM7UUFFN0MsaUJBQU0scUJBQXFCLFdBQUUsQ0FBQztJQUNsQyxDQUFDO0lBRVMsd0NBQVksR0FBdEI7UUFBQSxpQkFzQkM7UUFyQkcsc0lBQXNJO1FBQ3RJLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUUvRSxnR0FBZ0c7UUFDaEcsWUFBSyxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsWUFBWSxFQUFFO1lBQzNELFdBQVcsRUFBRSxJQUFJLENBQUMsV0FBVztZQUM3QixtQkFBbUIsRUFBRSxJQUFJO1lBQ3pCLE9BQU8sRUFBRSxJQUFJLENBQUMsZUFBZTtZQUM3QixPQUFPLEVBQUUsSUFBSSxDQUFDLGVBQWU7WUFDN0Isb0JBQW9CLEVBQUUsSUFBSTtZQUMxQixtQkFBbUIsRUFBRSxJQUFJO1lBQ3pCLE1BQU0sRUFBRSxJQUFJLENBQUMsU0FBUyxLQUFLLHVCQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGFBQWE7WUFDcEUsT0FBTyxFQUFFLFlBQUssQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLHlCQUF5QixDQUN0RCwrQ0FBK0MsRUFDL0MsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDO1lBQ25DLFNBQVMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxTQUFTLElBQUksaUJBQVMsQ0FBQyxpQkFBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDO1lBQzVGLFdBQVcsRUFBRSxtQkFBUztnQkFDbEIsS0FBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7WUFDL0IsQ0FBQztTQUNKLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO0lBQ2hDLENBQUM7SUFFTyw0Q0FBZ0IsR0FBeEIsVUFBeUIsS0FBYSxFQUFFLE1BQWM7UUFDbEQsSUFBSSxLQUFLLEVBQUU7WUFDUCxJQUFJLFVBQVUsR0FBRyw4QkFBc0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUMvQyxJQUFJLFVBQVUsSUFBSSwyQkFBbUIsQ0FBQyxJQUFJO2dCQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxVQUFVLENBQUMsS0FBSyxDQUFDLEdBQUcsVUFBVSxDQUFDO1NBQzVHO1FBRUQsSUFBSSxNQUFNLEVBQUU7WUFDUixJQUFJLFdBQVcsR0FBRyw4QkFBc0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNqRCxJQUFJLFdBQVcsSUFBSSwyQkFBbUIsQ0FBQyxJQUFJO2dCQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLEdBQUcsV0FBVyxDQUFDO1NBQ2hIO0lBQ0wsQ0FBQztJQTNHYSx3QkFBTSxHQUFHLGdDQUF3QixDQUFDO0lBNEdwRCx3QkFBQztDQUFBLENBeEhzQyxtQ0FBZ0IsR0F3SHREO0FBeEhZLDhDQUFpQjtBQXlIOUIsbUNBQWdCLENBQUMsa0JBQWtCLENBQUMsaUJBQWlCLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7QUMxSXZELHFKQUErRTtBQUMvRSxnTEFBNEY7QUFFNUYsbUxBQTRGO0FBRWpGLGlDQUF5QixHQUFHO0lBQ25DLFFBQVEsRUFBRSx3QkFBd0I7SUFDbEMsZ0JBQWdCLEVBQUUsTUFBTTtDQUMzQixDQUFDO0FBQ0Ysa0JBQVUsQ0FBQyxpQ0FBeUIsQ0FBQyxDQUFDO0FBQ3RDO0lBQXdDLDhDQUE4QjtJQVVsRSw0QkFBWSxJQUFjLEVBQUUsRUFBa0I7UUFBOUMsWUFDSSxrQkFBTSxJQUFJLEVBQUUsRUFBRSxDQUFDLFNBRWxCO1FBREcsS0FBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLFlBQVkseUJBQVcsQ0FBQzs7SUFDdkQsQ0FBQztJQUVNLGdEQUFtQixHQUExQixVQUEyQixNQUFtQjtRQUMxQyxpQkFBTSxtQkFBbUIsWUFBQyxNQUFNLENBQUMsQ0FBQztRQUNsQyxJQUFJLElBQUksQ0FBQyxlQUFlLEVBQUU7WUFDdEIsbURBQW1EO1lBQ25ELElBQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxZQUFZLENBQUMsa0JBQWtCLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ2xILGdCQUFnQixDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsaUNBQWlDO1lBRTNELElBQUksQ0FBQyxlQUFlLEdBQUc7Z0JBQ25CLE9BQU8sRUFBRSxnQkFBZ0IsQ0FBQyxHQUFHLEVBQUU7Z0JBQy9CLElBQUksRUFBRSxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO2FBQ25DLENBQUM7WUFFRixJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUVoRSxJQUFJLElBQUksQ0FBQyxlQUFlLEVBQUU7Z0JBQ3RCLElBQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxjQUFjLENBQUM7Z0JBQ3RFLElBQUksaUJBQWlCLElBQUksaUJBQWlCLENBQUMsYUFBYSxJQUFJLGlCQUFpQixDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsRUFBRTtvQkFDbkksSUFBTSxZQUFZLEdBQUcsaUJBQWlCLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBRWhGLElBQU0sT0FBTyxHQUFHLFlBQVksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO29CQUUzRCxJQUFJLE9BQU8sRUFBRTt3QkFDVCxJQUFJLE9BQU8sQ0FBQyxjQUFjLENBQUMsY0FBYyxDQUFDLEVBQUU7NEJBQ3hDLE9BQU8sR0FBRyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7eUJBQ3JDO3dCQUVELElBQUksT0FBTyxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsSUFBSSxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsV0FBVyxFQUFFLEtBQUssU0FBUyxFQUFFOzRCQUN2RyxJQUFJLENBQUMsY0FBYyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7NEJBQ3BELElBQUksQ0FBQyxjQUFjLENBQUMsU0FBUyxHQUFHLDJCQUEyQixDQUFDOzRCQUM1RCxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDOzRCQUMvQyxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDOzRCQUN6QyxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDOzRCQUMvQyxJQUFJLENBQUMsY0FBYyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO3lCQUNoRztxQkFDSjtpQkFDSjthQUNKO1lBRUQsSUFBSSxDQUFDLGFBQWEsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3JELElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxHQUFHLG1CQUFpQixJQUFJLENBQUMsZUFBZSxDQUFDLElBQU0sQ0FBQztZQUNyRSxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksR0FBRyxtQkFBaUIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLFNBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLGtCQUFlLENBQUM7WUFDcEgsSUFBSSxDQUFDLGFBQWEsQ0FBQyxTQUFTLEdBQUcsNENBQTRDLENBQUM7WUFDNUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEdBQUcsVUFBVSxDQUFDO1lBQ3JDLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztZQUVyQyxJQUFJLENBQUMsYUFBYSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDckQsSUFBSSxDQUFDLGFBQWEsQ0FBQyxTQUFTLEdBQUcseUJBQXlCLENBQUM7WUFDekQsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLGNBQWMsQ0FBQztZQUNsRCxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxhQUFhLEdBQUcsUUFBUSxDQUFDO1lBQ2xELElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7WUFDN0MsSUFBSSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFOUQsSUFBSSxDQUFDLFVBQVUsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2hELElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxHQUFHLHVCQUF1QixDQUFDO1lBQ3BELGNBQWM7WUFDZCxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDaEQseUJBQXlCO1lBQ3pCLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUVoRCw4QkFBOEI7WUFDOUIsSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFO2dCQUNyQixJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7YUFDcEQ7WUFFRCxJQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDbEQsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1NBQ3ZCO0lBQ0wsQ0FBQztJQUVNLHlDQUFZLEdBQW5CO1FBQ0ksaUJBQU0sWUFBWSxXQUFFLENBQUM7UUFDckIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ2hILENBQUM7SUF0RmEseUJBQU0sR0FBRyxpQ0FBeUIsQ0FBQztJQXVGckQseUJBQUM7Q0FBQSxDQXhGdUMsK0JBQWMsR0F3RnJEO0FBeEZZLGdEQUFrQjtBQXlGL0IsK0JBQWMsQ0FBQyxrQkFBa0IsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDOzs7Ozs7Ozs7Ozs7OztBQ25HdEQscUpBQStFO0FBQy9FLHNMQUFnRztBQVFoRyxJQUFJLGtCQUFrQixHQUFHLENBQUMsQ0FBQztBQUNkLHdCQUFnQixHQUFHO0lBQzVCLFFBQVEsRUFBRSxlQUFlO0NBQzVCLENBQUM7QUFDRixrQkFBVSxDQUFDLHdCQUFnQixDQUFDLENBQUM7QUFDN0I7SUFBK0IscUNBQWdDO0lBTzNELG1CQUFZLE9BQWUsRUFBRSxFQUFrQjtRQUEvQyxZQUNJLGtCQUFNLE9BQU8sRUFBRSxFQUFFLENBQUMsU0FPckI7UUFMRyxLQUFJLENBQUMsTUFBTSxHQUFHLEtBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEtBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLHdCQUFnQixDQUFDLFFBQVEsQ0FBQztRQUNuRSxPQUFPLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztRQUV2QixzS0FBc0s7UUFDdEssS0FBSSxDQUFDLGNBQWMsR0FBRyxDQUFDLEtBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFdBQVcsSUFBSSxlQUFlLENBQUMsR0FBRyxhQUFhLEdBQUcsa0JBQWtCLEVBQUUsQ0FBQzs7SUFDekgsQ0FBQztJQUVNLHVDQUFtQixHQUExQixVQUEyQixNQUFtQjtRQUE5QyxpQkFvQ0M7UUFuQ0csaUJBQU0sbUJBQW1CLFlBQUMsTUFBTSxDQUFDLENBQUM7UUFFbEMsSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFO1lBQ3RCLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxHQUFHLFdBQVcsR0FBRyxJQUFJLENBQUMsY0FBYyxHQUFHLFVBQVUsQ0FBQztZQUVoRixJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3pCLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFO2dCQUNwQixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7YUFDbkM7WUFDRCxZQUFLLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUU7Z0JBQ3JELG1CQUFtQixFQUFFLEtBQUs7Z0JBQzFCLFFBQVEsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxRQUFRO2dCQUN2QyxJQUFJLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSTtnQkFDakMsV0FBVyxFQUFFLElBQUksQ0FBQyxjQUFjO2dCQUNoQyxTQUFTLEVBQUUsZUFBZTtnQkFDMUIsS0FBSyxFQUFFLE1BQU07Z0JBQ2IsTUFBTSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLFVBQVU7Z0JBQ2hELE1BQU0sRUFBRSxXQUFDO29CQUNMLEtBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLENBQUM7b0JBQ3pCLEtBQUksQ0FBQyxVQUFVLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxLQUFJLENBQUMsQ0FBQztnQkFDdkQsQ0FBQztnQkFDRCxNQUFNLEVBQUU7b0JBQ0osS0FBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDL0IsQ0FBQztnQkFDRCxpQkFBaUIsRUFBRSxXQUFDO29CQUNoQixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFO3dCQUNwQyxLQUFJLENBQUMsT0FBTyxDQUFDLHVCQUF1QixDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQzt3QkFDaEQsS0FBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO3FCQUN6QztvQkFDRCxLQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsRUFBRSxDQUFDO2dCQUNsQyxDQUFDO2dCQUNELGNBQWMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQztnQkFDeEQsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFVBQVU7YUFDaEQsQ0FBQyxDQUFDO1NBQ047SUFDTCxDQUFDO0lBRU0seUNBQXFCLEdBQTVCO1FBQ0ksSUFBSSxJQUFJLENBQUMsZUFBZTtZQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQyxDQUFDLGlEQUFpRDtRQUVoSCxJQUFJLElBQUksQ0FBQyxTQUFTO1lBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUU3QyxpQkFBTSxxQkFBcUIsV0FBRSxDQUFDO0lBQ2xDLENBQUM7SUFFUyxnQ0FBWSxHQUF0QjtRQUFBLGlCQThCQztRQTdCRywyREFBMkQ7UUFDM0QsWUFBSyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRTtZQUN4QyxtQkFBbUIsRUFBRSxLQUFLO1lBQzFCLFFBQVEsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxRQUFRO1lBQ3ZDLFdBQVcsRUFBRSxJQUFJLENBQUMsY0FBYztZQUNoQyxTQUFTLEVBQUUsZUFBZTtZQUMxQixLQUFLLEVBQUUsTUFBTTtZQUNiLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxVQUFVO1lBQzdDLE1BQU0sRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxVQUFVO1lBQ2hELE1BQU0sRUFBRSxXQUFDO2dCQUNMLEtBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLENBQUM7Z0JBQ3pCLEtBQUksQ0FBQyxVQUFVLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxLQUFJLENBQUMsQ0FBQztZQUN2RCxDQUFDO1lBQ0QsTUFBTSxFQUFFO2dCQUNKLEtBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDL0IsQ0FBQztZQUNELGlCQUFpQixFQUFFLFdBQUM7Z0JBQ2hCLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUU7b0JBQ3BDLEtBQUksQ0FBQyxPQUFPLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO29CQUNoRCxLQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7aUJBQ3pDO2dCQUNELEtBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDbEMsQ0FBQztZQUNELFdBQVcsRUFBRSxtQkFBUztnQkFDbEIsS0FBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7WUFDL0IsQ0FBQztZQUNELGNBQWMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQztTQUMzRCxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztJQUNoQyxDQUFDO0lBeEZhLGdCQUFNLEdBQUcsd0JBQWdCLENBQUM7SUF5RjVDLGdCQUFDO0NBQUEsQ0E5RjhCLG1DQUFnQixHQThGOUM7QUE5RlksOEJBQVM7QUErRnRCLG1DQUFnQixDQUFDLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxDQUFDOzs7Ozs7Ozs7Ozs7OztBQzdHL0MscUpBQStFO0FBQy9FLHNMQUE4RjtBQUdqRix5QkFBaUIsR0FBRztJQUM3QixRQUFRLEVBQUUseUJBQXlCO0lBQ25DLHVCQUF1QixFQUFFLHNCQUFzQjtDQUNsRCxDQUFDO0FBQ0Ysa0JBQVUsQ0FBQyx5QkFBaUIsQ0FBQyxDQUFDO0FBQzlCO0lBQXNDLDRDQUFnQztJQUlsRSwwQkFBWSxPQUFlLEVBQUUsRUFBa0I7UUFDM0MscUJBQXFCO2VBQ3JCLGtCQUFNLE9BQU8sRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDO0lBQzdCLENBQUM7SUFFTSw4Q0FBbUIsR0FBMUIsVUFBMkIsTUFBbUI7UUFDMUMsaUJBQU0sbUJBQW1CLFlBQUMsTUFBTSxDQUFDLENBQUM7UUFDbEMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7SUFDN0IsQ0FBQztJQUVNLGdEQUFxQixHQUE1QjtRQUNJLGlCQUFNLHFCQUFxQixXQUFFLENBQUM7SUFDbEMsQ0FBQztJQUVEOztPQUVHO0lBQ0ksd0RBQTZCLEdBQXBDO1FBQ0ksaUJBQU0sNkJBQTZCLFdBQUUsQ0FBQztRQUN0QyxJQUFJLElBQUksQ0FBQyxzQkFBc0IsS0FBSyxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxXQUFXLEVBQUUsRUFBRTtZQUNsSSxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztTQUM1QjtJQUNMLENBQUM7SUFFRDs7T0FFRztJQUNPLDRDQUFpQixHQUEzQjtRQUNJLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLHVCQUF1QixDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDNUcsQ0FBQztJQUVEOztPQUVHO0lBQ08sNENBQWlCLEdBQTNCO1FBQ0ksSUFBSSxDQUFDLHNCQUFzQixHQUFHLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3ZELElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsRUFBRTtZQUNyRyw2Q0FBNkM7WUFDN0MsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBRXJCLHNCQUFzQjtZQUN0QixJQUFJLENBQUMsZUFBZSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUM7WUFFaEcsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1NBQ3RCO0lBQ0wsQ0FBQztJQWhEYSx1QkFBTSxHQUFHLHlCQUFpQixDQUFDO0lBaUQ3Qyx1QkFBQztDQUFBLENBbERxQyxtQ0FBZ0IsR0FrRHJEO0FBbERZLDRDQUFnQjtBQW1EN0IsbUNBQWdCLENBQUMsa0JBQWtCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7OztBQzVEdEQsNEpBQWlGO0FBQ2pGLDhLQUE2RjtBQUM3RixvTEFBaUc7QUFDakcsb0xBQWlHO0FBQ2pHLG9MQUFpRztBQUNqRyxrS0FBcUY7QUFDckYseUpBQStFO0FBQy9FLG1KQUEyRTtBQUMzRSw2TEFBdUc7QUFDdkcsc0pBQTZFO0FBQzdFLGtLQUFxRjtBQUNyRixzSkFBNkU7QUFDN0Usd0tBQXlGO0FBQ3pGLDJLQUEyRjtBQUMzRiwyS0FBMkY7QUFDM0YsaUxBQStGO0FBQy9GLDhMQUF5RztBQUN6RyxpTEFBK0Y7QUFDL0YsK0pBQW1GO0FBQ25GLG1KQUEyRTtBQUMzRSxnTUFBdUc7QUFDdkcsMktBQXlGO0FBQ3pGLCtNQUFpSDtBQUNqSCw2TEFBcUc7QUFDckcsa05BQW1IO0FBQ25ILHNNQUEyRztBQUMzRyw0TUFBK0c7QUFDL0csaUxBQTZGO0FBQzdGLDRNQUErRztBQUMvRyxvTEFBK0Y7QUFDL0YsOE5BQTJIO0FBQzNILG1NQUF5RztBQUN6Ryx1TkFBa0g7QUFDbEgsbUxBQThGO0FBQzlGLHlMQUFrRztBQUNsRyxnTEFBNEY7QUFDNUYsNktBQTBGO0FBQzFGLHNMQUFnRztBQUNoRyw0TEFBb0c7QUFDcEcsa01BQXdHO0FBQ3hHLGdMQUE0RjtBQUM1RiwyTEFBbUc7QUFDbkcsMk1BQThHO0FBQzlHLDBNQUE2RztBQUM3RywyTEFBbUc7QUFDbkcsMkxBQW1HO0FBQ25HLDJMQUFtRztBQUNuRyxpTUFBdUc7QUFDdkcscUxBQStGO0FBQy9GLHlOQUF1SDtBQUN2SCwyTEFBbUc7QUFDbkcsc05BQXFIO0FBQ3JILHVNQUEyRztBQUMzRywwTUFBNkc7QUFDN0csbU5BQW1IO0FBQ25ILGdOQUFpSDtBQUNqSCx1TUFBMkc7QUFDM0csME1BQTZHO0FBQzdHLCtLQUEyRjtBQUMzRixvTUFBeUc7QUFDekcsMExBQXFHO0FBQ3JHLDBPQUE2SDtBQUM3SCx1T0FBMkg7QUFDM0gsZ1BBQWlJO0FBQ2pJLHVLQUEyRTtBQUMzRSxtS0FBeUU7QUFDekUsaUtBQXdFO0FBQ3hFLHVLQUEyRTtBQUMzRSwySUFBNkQ7QUFDN0QsbUpBQThEO0FBRzlELElBQUksQ0FBQyxZQUFLLENBQUMsQ0FBQyxFQUFFO0lBQ1YsWUFBSyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7Q0FDaEI7QUFDRCxJQUFJLENBQUMsWUFBSyxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUU7SUFDbEIsWUFBSyxDQUFDLENBQUMsQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO0NBQ3hCO0FBQ0QsSUFBSSxDQUFDLFlBQUssQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRTtJQUM1QixZQUFLLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0NBQ2xDO0FBQ0QsSUFBSSxDQUFDLFlBQUssQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUU7SUFDcEMsWUFBSyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7Q0FDMUM7QUFDRCxJQUFJLENBQUMsWUFBSyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFO0lBQzVCLFlBQUssQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7Q0FDbEM7QUFDRCxJQUFJLENBQUMsWUFBSyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRTtJQUNqQyxZQUFLLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztDQUN2QztBQUNELElBQUksQ0FBQyxZQUFLLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtJQUMzQyxZQUFLLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7Q0FDakQ7QUFFRCxvQ0FBYSxDQUNULFlBQUssQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFDekIsa0JBQWtCLEVBQ2xCLFFBQVEsRUFDUixjQUFjLEVBQ2QsZ0JBQWdCLEVBQ2hCLGdCQUFnQixFQUNoQixnQkFBZ0IsRUFDaEIsVUFBVSxFQUNWLEtBQUssRUFDTCxtQkFBbUIsRUFDbkIsTUFBTSxFQUNOLFVBQVUsRUFDVixNQUFNLEVBQ04sWUFBWSxFQUNaLGFBQWEsRUFDYixhQUFhLEVBQ2IsZUFBZSxFQUNmLGVBQWUsRUFDZixTQUFTLEVBQ1QsS0FBSyxFQUNMLGdCQUFnQixFQUNoQixTQUFTLEVBQ1QscUJBQXFCLEVBQ3JCLGVBQWUsRUFDZixzQkFBc0IsRUFDdEIsa0JBQWtCLEVBQ2xCLG9CQUFvQixFQUNwQixXQUFXLEVBQ1gsb0JBQW9CLEVBQ3BCLFlBQVksRUFDWiwwQkFBMEIsRUFDMUIsaUJBQWlCLEVBQ2pCLGVBQWUsRUFDZixXQUFXLEVBQ1gsYUFBYSxFQUNiLFVBQVUsRUFDVixTQUFTLEVBQ1QsWUFBWSxFQUNaLGNBQWMsRUFDZCxnQkFBZ0IsRUFDaEIsVUFBVSxFQUNWLGFBQWEsRUFDYixtQkFBbUIsRUFDbkIsa0JBQWtCLEVBQ2xCLGFBQWEsRUFDYixhQUFhLEVBQ2IsYUFBYSxFQUNiLGVBQWUsRUFDZixXQUFXLEVBQ1gsdUJBQXVCLEVBQ3ZCLGFBQWEsRUFDYixzQkFBc0IsRUFDdEIsaUJBQWlCLEVBQ2pCLGtCQUFrQixFQUNsQixxQkFBcUIsRUFDckIsb0JBQW9CLEVBQ3BCLGlCQUFpQixFQUNqQixrQkFBa0IsRUFDbEIsU0FBUyxFQUNULGdCQUFnQixFQUNoQixrQkFBa0IsRUFDbEIsaUJBQWlCLEVBQ2pCLG9CQUFvQixDQUN2QixDQUFDO0FBQ0Ysb0NBQWEsQ0FBQyxZQUFLLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQzFELG9DQUFhLENBQUMsWUFBSyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsc0JBQXNCLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7OztBQ2hLaEYsMkZBQTJGLE1BQU0sdURBQXVELE1BQU0sbURBQW1ELGdCQUFnQiw2Q0FBNkMsU0FBUyx1Qjs7Ozs7Ozs7Ozs7QUNBdlIsbUhBQW1ILFlBQVksZTs7Ozs7Ozs7Ozs7QUNBL0gsaUNBQWlDLFdBQVcsK0NBQStDLFFBQVEsWTs7Ozs7Ozs7Ozs7QUNBbkcsbUc7Ozs7Ozs7Ozs7O0FDQUEsK09BQStPLFVBQVUsc0ZBQXNGLGtCQUFrQix5Qjs7Ozs7Ozs7Ozs7QUNBalcscUhBQXFILFdBQVcseUc7Ozs7Ozs7Ozs7O0FDQWhJLGlFQUFpRSxlQUFlLDJJQUEySSxnQkFBZ0IsaUc7Ozs7Ozs7Ozs7O0FDQTNPLDREQUE0RCxpQkFBaUIsZ0NBQWdDLGlCQUFpQixnREFBZ0QsaUJBQWlCLDhDOzs7Ozs7Ozs7OztBQ0EvTCw4QkFBOEIsaUJBQWlCLDBDOzs7Ozs7Ozs7Ozs7QUNDL0MsMEtBQXlGO0FBRXpGLFNBQWdCLFFBQVEsQ0FBQyxFQUFlO0lBQ3BDLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxhQUFhLEVBQUU7UUFDM0IsSUFDSSxFQUFFLENBQUMsS0FBSyxDQUFDLFVBQVUsS0FBSyxRQUFRLElBQUksaUJBQWlCO1lBQ3JELEVBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxLQUFLLE1BQU0sSUFBSSxpQkFBaUI7WUFDaEQsQ0FBQyxZQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsRUFBRSxFQUFFLHFCQUFxQixDQUFDLElBQUksQ0FBQyxZQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsRUFBRSxFQUFFLDRCQUE0QixDQUFDLENBQUMsSUFBSSx1QkFBdUI7WUFDM0osWUFBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsRUFDL0M7WUFDRSx5QkFBeUI7WUFDekIsT0FBTyxJQUFJLENBQUM7U0FDZjthQUFNO1lBQ0gsRUFBRSxHQUFHLEVBQUUsQ0FBQyxhQUFhLENBQUM7U0FDekI7S0FDSjtJQUVELE9BQU8sS0FBSyxDQUFDO0FBQ2pCLENBQUM7QUFoQkQsNEJBZ0JDO0FBQ0QsU0FBZ0IsUUFBUTtJQUNwQixJQUFJO1FBQ0EsT0FBTyxNQUFNLENBQUMsSUFBSSxLQUFLLE1BQU0sQ0FBQyxHQUFHLENBQUM7S0FDckM7SUFBQyxPQUFPLENBQUMsRUFBRTtRQUNSLE9BQU8sSUFBSSxDQUFDO0tBQ2Y7QUFDTCxDQUFDO0FBTkQsNEJBTUM7QUFDRCxTQUFnQix3QkFBd0IsQ0FBQyxFQUFlO0lBQ3BELElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQztJQUVkLE9BQU8sSUFBSSxFQUFFO1FBQ1QsSUFBSSxZQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLGlCQUFpQixDQUFDLElBQUksQ0FBQyxZQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLHlCQUF5QixDQUFDO1lBQUUsT0FBTyxJQUFJLENBQUM7UUFFN0ksSUFBSSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7S0FDN0I7SUFFRCxPQUFPLEtBQUssQ0FBQztBQUNqQixDQUFDO0FBVkQsNERBVUM7QUFLRCxTQUFnQixTQUFTLENBQUMsR0FBVyxFQUFFLFNBQWlCO0lBQ3BELElBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7SUFFbkMsT0FBTyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7QUFDdEQsQ0FBQztBQUpELDhCQUlDO0FBV0QsU0FBZ0IsV0FBVyxDQUFJLEdBQW1CLEVBQUUsR0FBTSxFQUFFLFNBQWE7SUFBYix5Q0FBYTtJQUNyRSxLQUFLLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLElBQUksU0FBUyxHQUFJO1FBQ3pDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUc7WUFBRSxPQUFPLENBQUMsQ0FBQztLQUNoQztJQUVELE9BQU8sQ0FBQyxDQUFDLENBQUM7QUFDZCxDQUFDO0FBTkQsa0NBTUM7QUFDRCxTQUFnQixPQUFPLENBQUksR0FBbUIsRUFBRSxNQUFrRTtJQUM5RyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRTtRQUNqQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztLQUMxQjtBQUNMLENBQUM7QUFKRCwwQkFJQztBQUdELFNBQWdCLFdBQVcsQ0FBQyxHQUFXLEVBQUUsTUFBc0Q7SUFDM0YsS0FBSyxJQUFJLElBQUksSUFBSSxHQUFHLEVBQUU7UUFDbEIsSUFBSSxHQUFHLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQztZQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0tBQzlEO0FBQ0wsQ0FBQztBQUpELGtDQUlDO0FBQ0QsU0FBZ0IsSUFBSSxDQUFJLEdBQW1CLEVBQUUsU0FBd0U7SUFDakgsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUU7UUFDakMsSUFBSSxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUM7WUFBRSxPQUFPLElBQUksQ0FBQztLQUM5QztJQUVELE9BQU8sS0FBSyxDQUFDO0FBQ2pCLENBQUM7QUFORCxvQkFNQztBQUNELFNBQWdCLEtBQUssQ0FBSSxHQUFtQixFQUFFLFNBQXdFO0lBQ2xILEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFO1FBQ2pDLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUM7WUFBRSxPQUFPLEtBQUssQ0FBQztLQUNoRDtJQUVELE9BQU8sSUFBSSxDQUFDO0FBQ2hCLENBQUM7QUFORCxzQkFNQztBQUdELFNBQWdCLFNBQVMsQ0FBQyxHQUFXLEVBQUUsU0FBdUQ7SUFDMUYsS0FBSyxJQUFJLElBQUksSUFBSSxHQUFHLEVBQUU7UUFDbEIsSUFBSSxHQUFHLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsR0FBRyxDQUFDO1lBQUUsT0FBTyxLQUFLLENBQUM7S0FDbEY7SUFFRCxPQUFPLElBQUksQ0FBQztBQUNoQixDQUFDO0FBTkQsOEJBTUM7QUFDRCxTQUFnQixHQUFHLENBQU8sR0FBbUIsRUFBRSxNQUErRDtJQUMxRyxJQUFJLE1BQU0sR0FBRyxJQUFJLEtBQUssRUFBSyxDQUFDO0lBRTVCLE9BQU8sQ0FBQyxHQUFHLEVBQUUsVUFBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSyxhQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQW5DLENBQW1DLENBQUMsQ0FBQztJQUV0RSxPQUFPLE1BQU0sQ0FBQztBQUNsQixDQUFDO0FBTkQsa0JBTUM7QUFDRCxTQUFnQixVQUFVLENBQUMsR0FBVztJQUNsQyw0REFBNEQ7SUFDNUQ7Ozs7OztVQU1NO0FBQ1YsQ0FBQztBQVRELGdDQVNDO0FBQ0QsU0FBZ0IsNEJBQTRCLENBQUMsYUFBMEIsRUFBRSxPQUFlLEVBQUUsYUFBcUI7SUFDM0csSUFBSSxLQUFLLEdBQUcsSUFBSSxLQUFLLEVBQWUsQ0FBQztJQUNyQyxJQUFJLEdBQUcsR0FBNEIsYUFBYSxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBUSxDQUFDO0lBRXRGLE9BQU8sQ0FBQyxHQUFHLEVBQUUsWUFBRTtRQUNYLElBQUksRUFBRSxDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUNoQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQ2xCO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxPQUFPLEtBQUssQ0FBQztBQUNqQixDQUFDO0FBWEQsb0VBV0M7QUFDRCxTQUFnQixrQ0FBa0MsQ0FDOUMsYUFBMEIsRUFDMUIsaUJBQXlDLEVBQ3pDLGtCQUFzQztJQUF0Qyw0REFBc0M7SUFFdEMsSUFBSSxPQUFPLGlCQUFpQixLQUFLLFFBQVEsRUFBRTtRQUN2QyxpQkFBaUIsR0FBRyxDQUFDLGlCQUFpQixDQUFDLENBQUM7S0FDM0M7SUFDRCxJQUFNLFFBQVEsR0FBNEIsYUFBYSxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBUSxDQUFDO0lBQ3pGLElBQU0sZ0JBQWdCLEdBQUcsSUFBSSxLQUFLLEVBQWUsQ0FBQztJQUNsRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDM0MsSUFBTSxFQUFFLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM1QixJQUFJLFlBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUU7WUFDaEYsU0FBUztTQUNaO1FBQ0QsS0FBOEIsVUFBaUIsRUFBakIsdUNBQWlCLEVBQWpCLCtCQUFpQixFQUFqQixJQUFpQixFQUFFO1lBQTVDLElBQU0sZUFBZTtZQUN0QixJQUFJLCtCQUErQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxlQUFlLENBQUMsRUFBRTtnQkFDL0QsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNuQyxTQUFTO2FBQ1o7U0FDSjtLQUNKO0lBQ0QsT0FBTyxnQkFBZ0IsQ0FBQztBQUM1QixDQUFDO0FBdkJELGdGQXVCQztBQUNELFNBQWdCLCtCQUErQixDQUFDLEVBQWUsRUFBRSxTQUFpQjtJQUM5RSxJQUFJLGlCQUFpQixHQUFpQixFQUFFLENBQUMsVUFBVSxDQUFDO0lBQ3BELElBQUksMkJBQTJCLEdBQVksS0FBSyxDQUFDO0lBQ2pELElBQUksaUJBQWlCLEVBQUU7UUFDbkIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLGlCQUFpQixDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUMvQyxJQUFJLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUU7Z0JBQ3pELDJCQUEyQixHQUFHLElBQUksQ0FBQztnQkFDbkMsTUFBTTthQUNUO1NBQ0o7S0FDSjtJQUNELE9BQU8sMkJBQTJCLENBQUM7QUFDdkMsQ0FBQztBQVpELDBFQVlDO0FBQ0QsU0FBZ0Isa0NBQWtDLENBQUMsT0FBb0IsRUFBRSxlQUFnQztJQUFoQyx5REFBZ0M7SUFDckcsSUFBSSxzQkFBc0IsR0FBRyxJQUFJLEtBQUssRUFBeUIsQ0FBQztJQUNoRSxJQUFJLHVCQUErQixDQUFDO0lBQ3BDLElBQUksa0JBQTBCLENBQUM7SUFDL0IsSUFBSSxVQUFVLEdBQVksS0FBSyxDQUFDO0lBQ2hDLElBQUksVUFBVSxHQUFHLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBRS9DLE9BQU8sQ0FBQyxVQUFVLEVBQUUsWUFBRTtRQUNsQixJQUFJO1lBQ0EsMEZBQTBGO1lBQzFGLElBQU0sc0JBQXNCLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsNEJBQWEsQ0FBQywwQkFBMEIsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ3BHLElBQU0scUJBQXFCLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsNEJBQWEsQ0FBQyx5QkFBeUIsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBRWxHLElBQUksc0JBQXNCLElBQUkscUJBQXFCLEVBQUU7Z0JBQ2pELElBQU0sVUFBVSxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUM1QyxJQUFJLFVBQVUsS0FBSyxDQUFDLENBQUMsRUFBRTtvQkFDbkIsSUFBSSxlQUFlLFVBQUM7b0JBQ3BCLElBQUksZUFBZSxFQUFFO3dCQUNqQix1QkFBdUIsR0FBRyxZQUFLLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7d0JBQ25GLGVBQWUsR0FBRyxZQUFLLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7d0JBQzFFLFVBQVUsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxLQUFLLE9BQU8sQ0FBQztxQkFDMUQ7eUJBQU07d0JBQ0gsZUFBZSxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQzt3QkFDNUUsa0JBQWtCLEdBQUcsWUFBSyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLGVBQWUsQ0FBQyxDQUFDO3dCQUN0RixJQUFNLHFCQUFxQixHQUFHLGdCQUFnQixHQUFHLGVBQWUsQ0FBQzt3QkFDakUsSUFBSSxDQUFDLFlBQUssQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxxQkFBcUIsQ0FBQyxFQUFFOzRCQUN6RSxZQUFLLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUscUJBQXFCLEVBQUUsa0JBQWtCLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7eUJBQ3JJO3dCQUNELElBQU0sR0FBRyxHQUFHLFlBQUssQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxxQkFBcUIsQ0FBQyxDQUFDO3dCQUNuRix1QkFBdUIsR0FBRyxHQUFHLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztxQkFDekQ7b0JBRUQsMEVBQTBFO29CQUMxRSxzQ0FBc0M7b0JBQ3RDLDJDQUEyQztvQkFDM0MsRUFBRTtvQkFDRiw4REFBOEQ7b0JBQzlELElBQU0scUJBQXFCLEdBQUcsQ0FBQyxxQkFBcUI7d0JBQ2hELENBQUMsQ0FBQywrQkFBK0IsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLHVCQUF1QixDQUFDO3dCQUN4RSxDQUFDLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQztvQkFFbkIsSUFBTSxXQUFXLEdBQTBCO3dCQUN2QyxhQUFhLEVBQUUsZUFBZTt3QkFDOUIsU0FBUyxFQUFFLHFCQUFxQjt3QkFDaEMsWUFBWSxFQUFFLHVCQUF1Qjt3QkFDckMsa0JBQWtCLEVBQUUsa0JBQWtCO3dCQUN0QyxnQkFBZ0IsRUFBRSxVQUFVO3FCQUMvQixDQUFDO29CQUNGLHNCQUFzQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztpQkFDNUM7YUFDSjtTQUNKO1FBQUMsT0FBTyxDQUFDLEVBQUU7WUFDUixNQUFNLElBQUksS0FBSyxDQUFDLDRCQUE0QixHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQ3JEO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDSCxPQUFPLHNCQUFzQixDQUFDO0FBQ2xDLENBQUM7QUF4REQsZ0ZBd0RDO0FBQ0QsU0FBZ0IsK0JBQStCLENBQUMsZ0JBQXdCLEVBQUUsWUFBb0I7SUFDMUYsSUFBTSx3QkFBd0IsR0FBRywwQkFBMEIsQ0FBQyxnQkFBZ0IsRUFBRSxZQUFZLENBQUMsQ0FBQztJQUM1RixJQUFNLHNCQUFzQixHQUFHLGtDQUFrQyxDQUFDLHdCQUF3QixDQUFDLENBQUM7SUFDNUYsSUFBSSwwQkFBMEIsR0FBRyxtQkFBbUIsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0lBQzdFLElBQUksQ0FBQyxZQUFZLEVBQUU7UUFDZixvRUFBb0U7UUFDcEUsSUFBTSxvQkFBb0IsR0FBRywwQkFBMEIsQ0FBQyxXQUFXLENBQUMsT0FBSyxZQUFZLE1BQUcsQ0FBQyxDQUFDO1FBQzFGLElBQUksb0JBQW9CLEdBQUcsQ0FBQyxDQUFDLEVBQUU7WUFDM0IsMEJBQTBCLEdBQU0sMEJBQTBCLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxvQkFBb0IsQ0FBQyxVQUFPLENBQUM7U0FDeEc7S0FDSjtJQUNELE9BQU8sMEJBQTBCLENBQUM7QUFDdEMsQ0FBQztBQVpELDBFQVlDO0FBQ0QsU0FBUywwQkFBMEIsQ0FBQyxnQkFBd0IsRUFBRSxZQUFvQjtJQUM5RSwrSEFBK0g7SUFDL0gsSUFBSSwyQkFBMkIsR0FBRyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDcEUsSUFBSSwrQkFBK0IsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsMkJBQTJCLEdBQUcsQ0FBQyxFQUFFLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRXhILElBQUksa0NBQWtDLEdBQUcsK0JBQStCLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3RGLElBQUksa0NBQWtDLEtBQUssQ0FBQyxDQUFDLEVBQUU7UUFDM0MsZ0JBQWdCLElBQUksR0FBRyxDQUFDO1FBQ3hCLElBQUksWUFBWSxFQUFFO1lBQ2QsZ0JBQWdCLElBQUksWUFBWSxDQUFDO1NBQ3BDO0tBQ0o7U0FBTTtRQUNILDJEQUEyRDtRQUMzRCxJQUFJLGVBQWUsR0FBRywrQkFBK0IsQ0FBQyxNQUFNLENBQUMsa0NBQWtDLEdBQUcsQ0FBQyxFQUFFLCtCQUErQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzdJLElBQUksZUFBZSxLQUFLLEVBQUUsRUFBRTtZQUN4QixnQkFBZ0IsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxHQUFHLFlBQVksQ0FBQztTQUN6RjtLQUNKO0lBQ0QsT0FBTyxnQkFBZ0IsQ0FBQztBQUM1QixDQUFDO0FBQ0QsU0FBUyxrQ0FBa0MsQ0FBQyxnQkFBZ0I7SUFDeEQsd0JBQXdCO0lBQ3hCLGdCQUFnQixHQUFHLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDeEQsc0NBQXNDO0lBQ3RDLGdCQUFnQixHQUFHLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDekQsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN4RCxPQUFPLGdCQUFnQixDQUFDO0FBQzVCLENBQUM7QUFDRCxTQUFTLG1CQUFtQixDQUFDLGdCQUFnQjtJQUN6Qyw0REFBNEQ7SUFDNUQsbUVBQW1FO0lBQ25FLElBQUksMkJBQTJCLEdBQUcsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3BFLElBQUksK0JBQStCLEdBQUcsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLDJCQUEyQixHQUFHLENBQUMsRUFBRSxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN4SCxJQUFJLHFCQUFxQixHQUFHLCtCQUErQixDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDN0UsSUFBSSxvQkFBb0IsR0FBRywrQkFBK0IsQ0FBQyxNQUFNLENBQUMscUJBQXFCLEVBQUUsK0JBQStCLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDakksb0JBQW9CLEdBQUcsWUFBSyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQUM7SUFDMUUsSUFBSSxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLEVBQUU7UUFDaEMsb0JBQW9CLEdBQUcsR0FBRyxHQUFHLG9CQUFvQixDQUFDO0tBQ3JEO0lBQ0QsSUFBSSxvQkFBb0IsQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsSUFBSSxHQUFHLEVBQUU7UUFDMUQsb0JBQW9CLElBQUksR0FBRyxDQUFDO0tBQy9CO0lBQ0QsSUFBSSxtQkFBbUIsR0FBRywrQkFBK0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLHFCQUFxQixHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQy9GLGdCQUFnQixHQUFHLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsMkJBQTJCLEdBQUcsQ0FBQyxDQUFDLEdBQUcsbUJBQW1CLEdBQUcsR0FBRyxHQUFHLG9CQUFvQixDQUFDO0lBQ2xJLE9BQU8sZ0JBQWdCLENBQUM7QUFDNUIsQ0FBQztBQUNELFNBQWdCLG9CQUFvQixDQUFDLE9BQWU7SUFDaEQsT0FBTyxDQUNILENBQUMsT0FBTyxHQUFHLEVBQUUsSUFBSSxPQUFPLEdBQUcsRUFBRSxDQUFDLElBQUksY0FBYztRQUNoRCxDQUFDLE9BQU8sSUFBSSxFQUFFLElBQUksT0FBTyxJQUFJLEVBQUUsQ0FBQyxJQUFJLDJCQUEyQjtRQUMvRCxDQUFDLE9BQU8sR0FBRyxFQUFFLElBQUksT0FBTyxHQUFHLEVBQUUsQ0FBQyxJQUFJLGNBQWM7UUFDaEQsQ0FBQyxPQUFPLEdBQUcsRUFBRSxJQUFJLE9BQU8sR0FBRyxHQUFHLENBQUMsSUFBSSxjQUFjO1FBQ2pELENBQUMsT0FBTyxHQUFHLEdBQUcsSUFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLElBQUkscUJBQXFCO1FBQ3pELENBQUMsT0FBTyxHQUFHLEdBQUcsSUFBSSxPQUFPLEdBQUcsR0FBRyxDQUFDLENBQ25DLENBQUMsQ0FBQyxrQkFBa0I7QUFDekIsQ0FBQztBQVRELG9EQVNDO0FBQ1UsMkJBQW1CLEdBQUc7SUFDN0IsS0FBSyxFQUFFLElBQUk7SUFDWCxVQUFVLEVBQUUsR0FBRztJQUNmLElBQUksRUFBRSxFQUFFO0NBQ1gsQ0FBQztBQUNGLFNBQWdCLHNCQUFzQixDQUFDLEtBQVU7SUFBVixrQ0FBVTtJQUM3QyxJQUFJLFFBQWdCLENBQUM7SUFFckIsSUFBSSxLQUFLLEtBQUssSUFBSSxJQUFJLEtBQUssSUFBSSxNQUFNLEVBQUU7UUFDbkMsUUFBUSxHQUFHLDJCQUFtQixDQUFDLElBQUksQ0FBQztLQUN2QztTQUFNO1FBQ0gsUUFBUSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLDJCQUFtQixDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsMkJBQW1CLENBQUMsS0FBSyxDQUFDO0tBQ3BHO0lBQ0QsT0FBTyxRQUFRLENBQUM7QUFDcEIsQ0FBQztBQVRELHdEQVNDO0FBQ0QsU0FBZ0Isb0JBQW9CLENBQUMsRUFBZTtJQUNoRCxJQUFNLFVBQVUsR0FBRyxFQUFFLENBQUM7SUFDdEIsSUFBTSxpQkFBaUIsR0FBaUIsRUFBRSxDQUFDLFVBQVUsQ0FBQztJQUV0RCx1QkFBdUI7SUFDdkIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLGlCQUFpQixDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUMvQyxVQUFVLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDekM7SUFFRCxPQUFPLFVBQVUsQ0FBQztBQUN0QixDQUFDO0FBVkQsb0RBVUM7QUFDRCxTQUFnQixRQUFRLENBQUMsQ0FBUyxFQUFFLE1BQWM7SUFDOUMsT0FBTyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUM5RCxDQUFDO0FBRkQsNEJBRUM7QUFDRCxTQUFnQixRQUFRLENBQUMsR0FBVztJQUNoQyxPQUFPLGtCQUFrQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUN4QyxDQUFDO0FBRkQsNEJBRUM7QUFDRCxTQUFnQixpQ0FBaUMsQ0FBQyxHQUFXO0lBQ3pELE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsRUFBRSxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMscUJBQXFCLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDbkYsQ0FBQztBQUZELDhFQUVDO0FBQ0QsU0FBZ0IsK0JBQStCLENBQUMsR0FBVztJQUN2RCxPQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUMvQyxDQUFDO0FBRkQsMEVBRUM7QUFDRCxTQUFnQix5QkFBeUIsQ0FBQyxHQUFjO0lBQWQsb0NBQWM7SUFDcEQsSUFBSSxPQUFPLEdBQUcsU0FBUyxJQUFJLFFBQVEsQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUM7SUFFOUQsc0NBQXNDO0lBQ3RDLElBQUksQ0FBQyxPQUFPLEVBQUU7UUFDVixJQUFJOzs7O2VBSUcsQ0FDSCxTQUFTLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxVQUFVLENBQUMsQ0FBUSxFQUN4RixRQUFRLEVBQ1IsT0FBTyxFQUNQLFFBQVEsRUFDUixJQUFJLEVBQ0osQ0FBQyxHQUFHLENBQUMsRUFDTCxDQUFDLENBQUM7UUFFTixpRkFBaUY7UUFDakYsT0FBTyxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRTtZQUNyRCxPQUFPLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQztZQUM1QixRQUFRLEdBQUcsUUFBUSxDQUFDLHNCQUFzQixFQUFFLENBQUM7WUFFN0MsT0FBTyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQ2YsUUFBUSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNwQztZQUVELFFBQVEsQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDO1NBQy9CO0tBQ0o7SUFFRCxrRUFBa0U7SUFDbEUscUJBQXFCO0lBQ3JCLFVBQVU7SUFDVix5REFBeUQ7SUFDekQsMEJBQTBCO0lBQzFCLG9CQUFvQjtJQUNwQixpQkFBaUI7SUFDakIsRUFBRTtJQUNGLHNEQUFzRDtJQUN0RCxxQkFBcUI7SUFDckIsNENBQTRDO0lBQzVDLHFFQUFxRTtJQUNyRSxFQUFFO0lBQ0YscUVBQXFFO0lBQ3JFLHNDQUFzQztJQUN0QywwQ0FBMEM7SUFDMUMsWUFBWTtJQUNaLEVBQUU7SUFDRiwyQkFBMkI7SUFDM0IsUUFBUTtJQUNSLEVBQUU7SUFDRix5RUFBeUU7SUFDekUsa0NBQWtDO0lBQ2xDLGdEQUFnRDtJQUNoRCxRQUFRO0lBQ1IsRUFBRTtJQUNGLDBDQUEwQztJQUMxQyx1Q0FBdUM7SUFDdkMsRUFBRTtJQUNGLHNFQUFzRTtJQUN0RSx1Q0FBdUM7SUFDdkMsZ0NBQWdDO0lBQ2hDLEVBQUU7SUFDRixVQUFVO0lBQ1YsbURBQW1EO0lBQ25ELHFEQUFxRDtJQUNyRCw0RUFBNEU7SUFDNUUseUVBQXlFO0lBQ3pFLFVBQVU7SUFDVix5REFBeUQ7SUFDekQsRUFBRTtJQUNGLGtFQUFrRTtJQUNsRSx1Q0FBdUM7SUFDdkMsK0NBQStDO0lBQy9DLHNGQUFzRjtJQUN0RixRQUFRO0lBQ1IsRUFBRTtJQUNGLHVCQUF1QjtJQUN2QixJQUFJO0lBQ0osRUFBRTtJQUNGLE1BQU07SUFDTixnRUFBZ0U7SUFDaEUsdUJBQXVCO0lBQ3ZCLEVBQUU7SUFDRixzRUFBc0U7SUFDdEUsd0NBQXdDO0lBQ3hDLDhCQUE4QjtJQUM5QixJQUFJO0FBQ1IsQ0FBQztBQXpGRCw4REF5RkM7Ozs7Ozs7Ozs7Ozs7QUNsYUQsSUFBWSx5QkFLWDtBQUxELFdBQVkseUJBQXlCO0lBQ2pDLHFGQUFVO0lBQ1YsbUZBQVM7SUFDVCxtRkFBUztJQUNULGlGQUFRO0FBQ1osQ0FBQyxFQUxXLHlCQUF5QixHQUF6QixpQ0FBeUIsS0FBekIsaUNBQXlCLFFBS3BDO0FBQ1ksZ0NBQXdCLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUM7Ozs7Ozs7Ozs7Ozs7QUNOdEQsSUFBWSxZQVVYO0FBVkQsV0FBWSxZQUFZO0lBQ3BCLCtEQUFZO0lBQ1oscURBQU87SUFDUCx1REFBUTtJQUNSLHVEQUFRO0lBQ1IsMkRBQVU7SUFDVix1RUFBZ0I7SUFDaEIsK0NBQUk7SUFDSixpREFBSztJQUNMLG1EQUFNO0FBQ1YsQ0FBQyxFQVZXLFlBQVksR0FBWixvQkFBWSxLQUFaLG9CQUFZLFFBVXZCOzs7Ozs7Ozs7Ozs7O0FDVkQsSUFBWSxXQUtYO0FBTEQsV0FBWSxXQUFXO0lBQ25CLHlEQUFjO0lBQ2QsNkNBQUk7SUFDSixpREFBTTtJQUNOLGlEQUFNO0FBQ1YsQ0FBQyxFQUxXLFdBQVcsR0FBWCxtQkFBVyxLQUFYLG1CQUFXLFFBS3RCO0FBQ0QsU0FBZ0IsbUJBQW1CLENBQUMsS0FBa0I7SUFDbEQsT0FBTyxjQUFjLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQy9DLENBQUM7QUFGRCxrREFFQzs7Ozs7Ozs7Ozs7OztBQ05ELElBQVksV0FLWDtBQUxELFdBQVksV0FBVztJQUNuQix5REFBVTtJQUNWLG1EQUFPO0lBQ1AsaURBQU07SUFDTiw2Q0FBSTtBQUNSLENBQUMsRUFMVyxXQUFXLEdBQVgsbUJBQVcsS0FBWCxtQkFBVyxRQUt0Qjs7Ozs7Ozs7Ozs7OztBQ1BELElBQWtCLFFBa0pqQjtBQWxKRCxXQUFrQixRQUFRO0lBQ3RCLG1DQUFNO0lBQ04sNERBQXFCO0lBQ3JCLDhEQUFzQjtJQUN0Qiw0REFBcUI7SUFDckIsd0VBQTJCO0lBQzNCLHdFQUEyQjtJQUMzQixnRkFBK0I7SUFDL0Isb0RBQWlCO0lBQ2pCLG9EQUFpQjtJQUNqQixnRUFBdUI7SUFDdkIsMERBQW9CO0lBQ3BCLGdFQUF1QjtJQUN2QixrRUFBd0I7SUFDeEIsOEdBQThDO0lBQzlDLDRGQUFxQztJQUNyQyw0RkFBcUM7SUFDckMsa0ZBQWdDO0lBQ2hDLHNGQUFrQztJQUNsQyxvRkFBaUM7SUFDakMsc0ZBQWtDO0lBQ2xDLHdEQUFtQjtJQUNuQiwwRUFBNEI7SUFDNUIsZ0ZBQStCO0lBQy9CLHdGQUFtQztJQUNuQyxvRkFBaUM7SUFDakMsb0ZBQWlDO0lBQ2pDLGtGQUFnQztJQUNoQyxrRUFBd0I7SUFDeEIsOEZBQXNDO0lBQ3RDLG9FQUF5QjtJQUN6Qiw0RUFBNkI7SUFDN0IsOEVBQThCO0lBQzlCLGdGQUErQjtJQUMvQiw4REFBc0I7SUFDdEIsNERBQXFCO0lBQ3JCLG9GQUFpQztJQUNqQywwRkFBb0M7SUFDcEMsOEZBQXNDO0lBQ3RDLDhGQUFzQztJQUN0QyxrR0FBd0M7SUFDeEMsOEZBQXNDO0lBQ3RDLGtHQUF3QztJQUN4QyxrR0FBd0M7SUFDeEMsd0VBQTJCO0lBQzNCLDhFQUE4QjtJQUM5Qiw4RUFBOEI7SUFDOUIsNEZBQXFDO0lBQ3JDLG9GQUFpQztJQUNqQyw4REFBc0I7SUFDdEIsZ0ZBQStCO0lBQy9CLDREQUFxQjtJQUNyQiw4REFBc0I7SUFDdEIsOEVBQThCO0lBQzlCLDBFQUE0QjtJQUM1Qiw4REFBc0I7SUFDdEIsMEVBQTRCO0lBQzVCLDRGQUFxQztJQUNyQyw4REFBc0I7SUFDdEIsa0ZBQWdDO0lBQ2hDLGdFQUF1QjtJQUN2Qiw4RkFBc0M7SUFDdEMsMEZBQW9DO0lBQ3BDLDRGQUFxQztJQUNyQyxnRUFBdUI7SUFDdkIsOEZBQXNDO0lBQ3RDLHdGQUFtQztJQUNuQyxzRUFBMEI7SUFDMUIsc0RBQWtCO0lBQ2xCLDhFQUE4QjtJQUM5QiwwRUFBNEI7SUFDNUIsc0ZBQWtDO0lBQ2xDLGtFQUF3QjtJQUN4QixzRUFBMEI7SUFDMUIsOEZBQXNDO0lBQ3RDLHNFQUEwQjtJQUMxQix3RUFBMkI7SUFDM0Isb0ZBQWlDO0lBQ2pDLGdFQUF1QjtJQUN2QiwwRUFBNEI7SUFDNUIsb0VBQXlCO0lBQ3pCLGtFQUF3QjtJQUN4QixvRkFBaUM7SUFDakMsb0ZBQWlDO0lBQ2pDLG9GQUFpQztJQUNqQyx3RUFBMkI7SUFDM0IsZ0ZBQStCO0lBQy9CLDhEQUFzQjtJQUN0QixzRkFBa0M7SUFDbEMsc0ZBQWtDO0lBQ2xDLDhFQUE4QjtJQUM5Qiw4RUFBOEI7SUFDOUIsc0VBQTBCO0lBQzFCLGdFQUF1QjtJQUN2Qiw0RUFBNkI7SUFDN0IsMERBQW9CO0lBQ3BCLGtFQUF3QjtJQUN4QixvRUFBeUI7SUFDekIsa0VBQXdCO0lBQ3hCLGtGQUFnQztJQUNoQyw4REFBc0I7SUFDdEIsb0dBQXlDO0lBQ3pDLGdGQUErQjtJQUMvQixrRkFBZ0M7SUFDaEMsa0ZBQWdDO0lBQ2hDLG9HQUF5QztJQUN6QyxvR0FBeUM7SUFDekMsNEZBQXFDO0lBQ3JDLGdHQUF1QztJQUN2QywwRUFBNEI7SUFDNUIsZ0ZBQStCO0lBQy9CLHNEQUFrQjtJQUNsQixvRUFBeUI7SUFDekIsd0VBQTJCO0lBQzNCLDhEQUFzQjtJQUN0Qix3RUFBMkI7SUFDM0Isd0VBQTJCO0lBQzNCLGtFQUF3QjtJQUN4Qiw0Q0FBYTtJQUNiLG9GQUFpQztJQUNqQyxnRkFBK0I7SUFDL0Isb0VBQXlCO0lBQ3pCLGtGQUFnQztJQUNoQyw0RUFBNkI7SUFDN0Isd0VBQTJCO0lBQzNCLGdGQUErQjtJQUMvQiwwRUFBNEI7SUFDNUIsa0dBQXdDO0lBQ3hDLHdGQUFtQztJQUNuQyxnRkFBK0I7SUFDL0IsNEVBQTZCO0lBQzdCLHdFQUEyQjtJQUMzQixrSEFBZ0Q7SUFDaEQsa0ZBQWdDO0lBQ2hDLGdFQUF1QjtJQUN2QixnRUFBdUI7SUFDdkIsc0VBQTBCO0lBQzFCLGtGQUFnQztJQUNoQywwREFBb0I7SUFDcEIsd0ZBQW1DO0lBQ25DLGdHQUF1QztJQUN2QyxrREFBZ0I7SUFDaEIsOERBQXNCO0lBQ3RCLDBEQUFvQjtJQUNwQixzRkFBa0M7SUFDbEMsd0VBQTJCO0FBQy9CLENBQUMsRUFsSmlCLFFBQVEsR0FBUixnQkFBUSxLQUFSLGdCQUFRLFFBa0p6QjtBQUNELElBQWtCLGNBS2pCO0FBTEQsV0FBa0IsY0FBYztJQUM1QixtREFBUTtJQUNSLDBFQUFzQjtJQUN0QixnRkFBeUI7SUFDekIsb0hBQTJDO0FBQy9DLENBQUMsRUFMaUIsY0FBYyxHQUFkLHNCQUFjLEtBQWQsc0JBQWMsUUFLL0IiLCJmaWxlIjoiZ2lneWEuc2VydmljZXMuYWNjb3VudHMucGx1Z2lucy5zY3JlZW5TZXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gXCIuL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvaW5kZXgudHNcIik7XG4iLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCJpbXBvcnQge1xyXG4gICAgSU1hcCxcclxuICAgIERlZXBGcmVlemUsXHJcbiAgICBGb3JFYWNoUHJvcCxcclxuICAgIEZvckVhY2gsXHJcbiAgICBmaXJzdFBhcnQsXHJcbiAgICBTb21lLFxyXG4gICAgaGFzSW5kZXgsXHJcbiAgICByZW1vdmVTZXJpYWxpemVkS2V5RWRnZVByb3BlcnR5LFxyXG4gICAgcmVtb3ZlU2VyaWFsaXplZEtleUxhc3RFbnVtZXJhdG9yLFxyXG59IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xyXG5pbXBvcnQgeyBTY3JlZW4gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbic7XHJcbmltcG9ydCB7IFRlbXBsYXRlRWxlbWVudCwgVGVtcGxhdGVFbGVtZW50X0NPTlNUUyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvVGVtcGxhdGVFbGVtZW50JztcclxuaW1wb3J0IHsgSUVycm9ySW5mbyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRXJyb3JzJztcclxuaW1wb3J0IHtcclxuICAgIElGb3JtSW5wdXQsXHJcbiAgICBGb3JtSW5wdXQsXHJcbiAgICBGb3JtSW5wdXRfQ09OU1RTLFxyXG4gICAgSVZhbGlkYXRpb25JbmZvLFxyXG4gICAgSUZpZWxkU2NoZW1hLFxyXG4gICAgSVNjaGVtYUZpZWxkcyxcclxuICAgIFZhbGlkaXR5U3RhdGVzLFxyXG59IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0Zvcm1JbnB1dCc7XHJcbmltcG9ydCB7IEVycm9yRGlzcGxheUVsZW1lbnQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Vycm9yRGlzcGxheUVsZW1lbnQnO1xyXG5pbXBvcnQgeyBJRm9ybVdpZGdldCwgQmFzZUZvcm1XaWRnZXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtV2lkZ2V0JztcclxuaW1wb3J0IHsgUmV0eXBlUGFzc3dvcmRJbnB1dCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL1JldHlwZVBhc3N3b3JkSW5wdXQnO1xyXG5pbXBvcnQgeyBSZW1lbWViZXJJbnB1dCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL1JlbWVtZWJlcklucHV0JztcclxuaW1wb3J0IHsgU2VjcmV0UXVlc3Rpb25XaWRnZXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvU2VjcmV0UXVlc3Rpb25XaWRnZXQnO1xyXG5pbXBvcnQgeyBDb250YWluZXJXaWRnZXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvQ29udGFpbmVyV2lkZ2V0JztcclxuaW1wb3J0IHsgQmFzZVNlcnZlcldpZGdldCwgU2VydmVyU3RhdGVzIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlU2VydmVyV2lkZ2V0JztcclxuaW1wb3J0IHsgTG9naW5Nb2RlcyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvTG9naW5Nb2Rlcyc7XHJcbmltcG9ydCB7IEJhc2VQYXNzd29yZElucHV0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvUGFzc3dvcmRJbnB1dHMnO1xyXG5pbXBvcnQgeyBJRmllbGRDaGFuZ2VFdmVudCwgSUJlZm9yZVZhbGlkYXRpb25FdmVudCwgSUFmdGVyVmFsaWRhdGlvbkV2ZW50LCBJQmVmb3JlU3VibWl0RXZlbnQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0V2ZW50cy5kJztcclxuaW1wb3J0IHsgcG9zdFByb2Nlc3NGb3JtLCBuYW1lc3BhY2UgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0NvbnNlbnQnO1xyXG5pbXBvcnQgeyBJRm9ybVJlc3BvbnNlLCBJU2NyZWVuU2V0UGFyYW1zIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5TZXRQbHVnaW4nO1xyXG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gJy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcclxuaW1wb3J0IHsgSUZvcm1Db250ZXh0IH0gZnJvbSBcIi4vSUZvcm1Db250ZXh0XCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElQYXJhbWV0ZXJzRGF0YSB7XHJcbiAgICBmaW5hbGl6ZVJlZ2lzdHJhdGlvbj86IGJvb2xlYW47XHJcbn1cclxuaW50ZXJmYWNlIElGb3JtRGF0YUZ1bmNQYXJhbXMge1xyXG4gICAgcGFyYW1zOiBJUGFyYW1ldGVyc0RhdGE7XHJcbiAgICBjYWNoZT86IGJvb2xlYW47XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBJRm9ybURhdGEgZXh0ZW5kcyBJTWFwPGFueT4ge1xyXG4gICAgcmVtZW1iZXJNZT86IGJvb2xlYW47XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBJRm9ybURhdGFGaWx0ZXIge1xyXG4gICAgZmlsdGVyT3V0V2lkZ2V0c1RvU2VuZDogKElGb3JtRGF0YSkgPT4gSUZvcm1EYXRhO1xyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgSUZvcm1UeXBlIHtcclxuICAgIG5ldyAoc2NyZWVuOiBTY3JlZW4sIGVsOiBIVE1MRm9ybUVsZW1lbnQsIGdpZ3lhQ2xhc3M6IHN0cmluZyk6IEJhc2VGb3JtO1xyXG5cclxuICAgIENPTlNUUzoge1xyXG4gICAgICAgIGdpZ3lhQ2xhc3M6IHN0cmluZztcclxuICAgIH07XHJcbn1cclxuZXhwb3J0IGNvbnN0IEZvcm1fQ09OU1RTID0ge1xyXG4gICAgb3JpZ2luYWxTdWNjZXNzU2NyZWVuOiAnZGF0YS1vcmlnaW5hbC1zdWNjZXNzLXNjcmVlbicsXHJcbiAgICBzdWNjZXNzU2NyZWVuOiAnZGF0YS1vbi1zdWNjZXNzLXNjcmVlbicsXHJcbiAgICBhdXRvU2tpcFNjcmVlbjogJ2RhdGEtb24tYXV0by1za2lwLXNjcmVlbicsXHJcbiAgICBhdXRvU2tpcEZsYWc6ICdkYXRhLWF1dG8tc2tpcCcsXHJcbiAgICBzY3JlZW5TZXRTa2lwcGVkU2NyZWVuOiAnZGF0YS1vbi1zY3JlZW5zZXQtc2tpcHBlZC1zY3JlZW4nLFxyXG4gICAgZm9ybUVycm9yQ2xhc3M6ICdnaWd5YS1mb3JtLWVycm9yJyxcclxuICAgIGRlZmF1bHRDaGVja2VkQXR0cmlidXRlOiAnZGF0YS1jaGVja2VkJyxcclxufTtcclxuZXhwb3J0IGNvbnN0IENVU1RPTV9WQUxJREFUSU9OX1RJTUVPVVRfV0FSTklORyA9IDEwMDAwO1xyXG5EZWVwRnJlZXplKEZvcm1fQ09OU1RTKTtcclxuY29uc3QgTk9UX0lNUExFTUVOVEVEID0gJ05vdCBpbXBsZW1lbnRlZCc7XHJcbmV4cG9ydCB0eXBlIFNjaGVtYU5hbWUgPSAnZGF0YScgfCAncHJvZmlsZScgfCAnc3Vic2NyaXB0aW9ucycgfCAncHJlZmVyZW5jZXMnIHwgJ29yZ2FuaXphdGlvbicgfCAncmVxdWVzdGVyJztcclxuZXhwb3J0IGNsYXNzIEJhc2VGb3JtIGV4dGVuZHMgVGVtcGxhdGVFbGVtZW50PEhUTUxGb3JtRWxlbWVudD4ge1xyXG4gICAgLy8jcmVnaW9uIEZvcm0gbGlicmFyeVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIEZvcm1zTGlicmFyeTogSU1hcDxJRm9ybVR5cGU+ID0ge307XHJcblxyXG4gICAgcHJpdmF0ZSBfc3VibWl0QnV0dG9uQ2xpY2tlZDogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBnZXQgc3VibWl0QnV0dG9uQ2xpY2tlZCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1Ym1pdEJ1dHRvbkNsaWNrZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFkZEZvcm1Ub0xpYnJhcnkoZm9ybTogSUZvcm1UeXBlKSB7XHJcbiAgICAgICAgQmFzZUZvcm0uRm9ybXNMaWJyYXJ5W2Zvcm0uQ09OU1RTLmdpZ3lhQ2xhc3NdID0gZm9ybTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmVnaXN0ZXJGb3JtcyhwYXJlbnQ6IFNjcmVlbikge1xyXG4gICAgICAgIGNvbnN0IGZvcm1zID0gbmV3IEFycmF5PEJhc2VGb3JtPigpO1xyXG5cclxuICAgICAgICBGb3JFYWNoUHJvcChCYXNlRm9ybS5Gb3Jtc0xpYnJhcnksIChmb3JtVHlwZSwgZ2lneWFDbGFzcykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IHBhcmVudC50ZW1wbGF0ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChgZm9ybS4ke2dpZ3lhQ2xhc3N9YCk7XHJcbiAgICAgICAgICAgIEZvckVhY2goZWxlbWVudHMsIChlbDogSFRNTEZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyAjNDM5MDQgLSBFbnN1cmUgZm9ybSBpcyBuZXZlciBzdWJtaXR0ZWQsIGV2ZW4gaW4gY2FzZSBvZiBpbml0aWFsaXphdGlvbiBlcnJvci5cclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgd29ya3MgYnkgbW9kaWZ5aW5nIHRoZSBIVE1MIGF0dHJpYnV0ZSBvZiB0aGUgaW5zdGFuY2UgZWxlbWVudCBiZWZvcmUgaW5pdGlhbGl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBlbGVtZW50IGlzIGNsb25lZCBpbnRvIGFuIGluc3RhbmNlLCBhbGwgc3VibWlzc2lvbnMgd2lsbCBiZSBjYW5jZWxsZWQgYnkgZGVmYXVsdC5cclxuICAgICAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnb25zdWJtaXQnLCAncmV0dXJuIGZhbHNlOycpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcm1zLnB1c2gobmV3IGZvcm1UeXBlKHBhcmVudCwgZWwsIGdpZ3lhQ2xhc3MpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBmb3JtcztcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwcml2YXRlIGF1dG9Ta2lwOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBmb3JtRXJyb3JzOiB7IFtrZXk6IHN0cmluZ106IElFcnJvckluZm8gfSA9IHt9O1xyXG4gICAgcHVibGljIG9yaWdpbmFsU3VjY2Vzc1NjcmVlbjogc3RyaW5nO1xyXG4gICAgcHVibGljIHN1Y2Nlc3NTY3JlZW46IHN0cmluZztcclxuICAgIHB1YmxpYyBhdXRvU2tpcFNjcmVlbjogc3RyaW5nO1xyXG4gICAgcHVibGljIHNjcmVlblNldFNraXBwZWRTY3JlZW46IHN0cmluZztcclxuICAgIHByaXZhdGUgc3VibWl0SGFuZGxlcjogKGUpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIGZpZWxkQ2hhbmdlZEhhbmRsZXI6IChlKSA9PiB2b2lkO1xyXG5cclxuICAgIC8vIEZvcm0gaW5wdXRzXHJcbiAgICBwdWJsaWMgZGF0YVRvU2VydmVyID0gbmV3IEFycmF5PElGb3JtSW5wdXQ+KCk7XHJcblxyXG4gICAgcHJpdmF0ZSBfZHluYW1pY0lucHV0cyA9IG5ldyBBcnJheTxGb3JtSW5wdXQ+KCk7XHJcbiAgICBwcml2YXRlIF9pbnB1dHMgPSBuZXcgQXJyYXk8Rm9ybUlucHV0PigpO1xyXG4gICAgcHJpdmF0ZSBfZXJyb3JEaXNwbGF5RWxlbWVudHM6IElNYXA8QXJyYXk8RXJyb3JEaXNwbGF5RWxlbWVudD4+ID0ge307XHJcbiAgICBwcml2YXRlIF93aWRnZXRzID0gbmV3IEFycmF5PElGb3JtV2lkZ2V0PigpO1xyXG5cclxuICAgIHB1YmxpYyBfdmFsaWRhdGVkUGFzc3dvcmQ6IEZvcm1JbnB1dDtcclxuICAgIHB1YmxpYyBfcGFzc3dvcmRJbnB1dHMgPSBuZXcgQXJyYXk8Rm9ybUlucHV0PigpO1xyXG4gICAgcHVibGljIF9wYXNzd29yZFJldHlwZXMgPSBuZXcgQXJyYXk8UmV0eXBlUGFzc3dvcmRJbnB1dD4oKTtcclxuICAgIHB1YmxpYyBfcmVtZW1iZXJNZTogUmVtZW1lYmVySW5wdXQ7XHJcbiAgICBwdWJsaWMgX3NlY3JldFF1ZXN0aW9ucyA9IG5ldyBBcnJheTxTZWNyZXRRdWVzdGlvbldpZGdldD4oKTtcclxuICAgIHB1YmxpYyBfYXV0b1NraXBDb250YWluZXJzID0gbmV3IEFycmF5PENvbnRhaW5lcldpZGdldD4oKTtcclxuICAgIHB1YmxpYyBfc2VydmVyV2lkZ2V0cyA9IG5ldyBBcnJheTxCYXNlU2VydmVyV2lkZ2V0PGFueT4+KCk7XHJcbiAgICBwdWJsaWMgX25lZWRDb250YWluZXJIaXN0b3J5ID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgYmluZElEOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgZmlsdGVycyA9IG5ldyBBcnJheTxJRm9ybURhdGFGaWx0ZXI+KCk7XHJcbiAgICBwdWJsaWMgaXNQb3B1bGF0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgZGF0YVN0b3JlID0gdGhpcy5fc2NyZWVuU2V0LmRhdGE7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIF9zY3JlZW46IFNjcmVlbiwgZWxGb3JtOiBIVE1MRm9ybUVsZW1lbnQsIHByaXZhdGUgZ2lneWFDbGFzczogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIoZWxGb3JtLCBfc2NyZWVuKTtcclxuXHJcbiAgICAgICAgdGhpcy5iaW5kSUQgPSB0aGlzLnB1Ymxpc2hJRCA/IHRoaXMuSUQgOiBnaWd5YUNsYXNzO1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWxTdWNjZXNzU2NyZWVuID0gZWxGb3JtLmdldEF0dHJpYnV0ZShGb3JtX0NPTlNUUy5zdWNjZXNzU2NyZWVuKTtcclxuICAgICAgICB0aGlzLnN1Y2Nlc3NTY3JlZW4gPSB0aGlzLl9zY3JlZW5TZXQuY2hvb3NlTmV4dFNjcmVlbih0aGlzLm9yaWdpbmFsU3VjY2Vzc1NjcmVlbik7XHJcblxyXG4gICAgICAgIHRoaXMuYXV0b1NraXAgPSBlbEZvcm0uZ2V0QXR0cmlidXRlKEZvcm1fQ09OU1RTLmF1dG9Ta2lwRmxhZykgPT0gJ3RydWUnO1xyXG4gICAgICAgIHRoaXMuYXV0b1NraXBTY3JlZW4gPSBlbEZvcm0uZ2V0QXR0cmlidXRlKEZvcm1fQ09OU1RTLmF1dG9Ta2lwU2NyZWVuKSB8fCB0aGlzLnN1Y2Nlc3NTY3JlZW47XHJcbiAgICAgICAgdGhpcy5zY3JlZW5TZXRTa2lwcGVkU2NyZWVuID0gZWxGb3JtLmdldEF0dHJpYnV0ZShGb3JtX0NPTlNUUy5zY3JlZW5TZXRTa2lwcGVkU2NyZWVuKSB8fCB0aGlzLnN1Y2Nlc3NTY3JlZW47XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJGb3JtSW5wdXRzKCk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckJvdW5kZWRFcnJvckVsZW1lbnRzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3dpZGdldHMgPSBCYXNlRm9ybVdpZGdldC5yZWdpc3RlcldpZGdldHModGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3VibWl0SGFuZGxlciA9IGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmRpc2FibGVEZWZhdWx0RXZlbnRIYW5kbGluZyhldmVudCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3VibWl0KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuc3VibWl0SGFuZGxlcik7XHJcblxyXG4gICAgICAgIHRoaXMuZmllbGRDaGFuZ2VkSGFuZGxlciA9IGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZWdpc3RlckZvcm1JbnB1dHMoKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRzID0gRm9ybUlucHV0LnJlZ2lzdGVyRm9ybUlucHV0cyh0aGlzLnRlbXBsYXRlRWxlbWVudC5lbGVtZW50cywgdGhpcyk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9wYXNzd29yZElucHV0cy5sZW5ndGggPiAwKSB0aGlzLl92YWxpZGF0ZWRQYXNzd29yZCA9IHRoaXMuX3Bhc3N3b3JkSW5wdXRzWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGREYXRhRmllbGQoZmllbGQ6IElGb3JtSW5wdXQpIHtcclxuICAgICAgICB0aGlzLmRhdGFUb1NlcnZlci5wdXNoKGZpZWxkKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkRHluYW1pY1dpZGdldHMocm9vdEVsOiBIVE1MRWxlbWVudCk6IEFycmF5PElGb3JtV2lkZ2V0PiB7XHJcbiAgICAgICAgY29uc3QgbmV3V2lkZ2V0cyA9IEJhc2VGb3JtV2lkZ2V0LnJlZ2lzdGVyRHluYW1pY1dpZGdldHModGhpcywgcm9vdEVsKTtcclxuICAgICAgICBGb3JFYWNoKG5ld1dpZGdldHMsIHcgPT4gdy5saW5rSW5zdGFuY2VFbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50KSk7XHJcbiAgICAgICAgdGhpcy5fd2lkZ2V0cyA9IHRoaXMuX3dpZGdldHMuY29uY2F0KG5ld1dpZGdldHMpO1xyXG4gICAgICAgIHJldHVybiBuZXdXaWRnZXRzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVEeW5hbWljV2lkZ2V0cyh3aWRnZXRzVG9SZW1vdmU6IEFycmF5PElGb3JtV2lkZ2V0Pikge1xyXG4gICAgICAgIGlmICghdGhpcy5fd2lkZ2V0cyB8fCAhdGhpcy5fd2lkZ2V0cy5sZW5ndGgpIHJldHVybjtcclxuICAgICAgICB0aGlzLl93aWRnZXRzID0gdGhpcy5fd2lkZ2V0cy5maWx0ZXIodyA9PiB3aWRnZXRzVG9SZW1vdmUuaW5kZXhPZih3KSA8IDApO1xyXG4gICAgICAgIHdpZGdldHNUb1JlbW92ZS5mb3JFYWNoKHdpZGdldCA9PiB7XHJcbiAgICAgICAgICAgIHdpZGdldC51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcclxuICAgICAgICAgICAgd2lkZ2V0LnVubGlua1RlbXBsYXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc0Zvcm1Cb3VuZGVkRWxlbWVudChib3VuZGVkRWxlbWVudDogRXJyb3JEaXNwbGF5RWxlbWVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChib3VuZGVkRWxlbWVudC5ib3VuZGVkVG8gPT09IHRoaXMuYmluZElEKSByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgbGV0IGVsID0gYm91bmRlZEVsZW1lbnQuaW5zdGFuY2VFbGVtZW50IHx8IGJvdW5kZWRFbGVtZW50LnRlbXBsYXRlRWxlbWVudDtcclxuICAgICAgICBjb25zdCB0aGlzRWwgPSB0aGlzLmluc3RhbmNlRWxlbWVudCB8fCB0aGlzLnRlbXBsYXRlRWxlbWVudDtcclxuICAgICAgICB3aGlsZSAoZWwgJiYgZWwgIT09IHRoaXNFbCAmJiBlbCAhPT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSBlbCA9IGVsLnBhcmVudEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHJldHVybiBlbCA9PT0gdGhpc0VsO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbGlua0FuZFBvcHVsYXRlRWxlbWVudHMoaXRlbXM6IEFycmF5PEZvcm1JbnB1dD4gfCBBcnJheTxJRm9ybVdpZGdldD4pIHtcclxuICAgICAgICB2YXIgbGlua0l0ZW0gPSBpID0+IGkubGlua0luc3RhbmNlRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCk7XHJcbiAgICAgICAgRm9yRWFjaChpdGVtcywgbGlua0l0ZW0pO1xyXG4gICAgICAgIHRoaXMucHJlUG9wdWxhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaWdub3JlZEZpZWxkcygpOiBJTWFwPGJvb2xlYW4+IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAnZy1yZWNhcHRjaGEtcmVzcG9uc2UnOiB0cnVlLFxyXG4gICAgICAgICAgICAnZmMtdG9rZW4nOiB0cnVlLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlZ2lzdGVyQm91bmRlZEVycm9yRWxlbWVudHMoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gRmluZCBhbGwgZXJyb3IgZGlzcGxheSBlbGVtZW50cyBvbiB0aGUgc2NyZWVuIGluIHRoaXMgZm9ybS5cclxuICAgICAgICBjb25zdCBmb3JtQm91bmRlZEVsZW1lbnRzID0gbmV3IEFycmF5PEVycm9yRGlzcGxheUVsZW1lbnQ+KCk7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JEaXNwbGF5RWxlbWVudHMgPSB7fTtcclxuICAgICAgICBGb3JFYWNoUHJvcCh0aGlzLl9zY3JlZW4uX2Vycm9yRGlzcGxheUVsZW1lbnRzLCBib3VuZGVkRWxlbWVudHMgPT4ge1xyXG4gICAgICAgICAgICBGb3JFYWNoKGJvdW5kZWRFbGVtZW50cywgYm91bmRlZEVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNGb3JtQm91bmRlZEVsZW1lbnQoYm91bmRlZEVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybUJvdW5kZWRFbGVtZW50cy5wdXNoKGJvdW5kZWRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBlYWNoIGVycm9yIGVsZW1lbnQgb24gdGhpcyBmb3JtLlxyXG4gICAgICAgIEZvckVhY2goZm9ybUJvdW5kZWRFbGVtZW50cywgYm91bmRlZEVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICBib3VuZGVkRWxlbWVudC5fZm9ybSA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAvLyBVbmxlc3MgYm91bmQgdG8gdGhpcyBmb3JtLCBub3JtYWxpemUgZmllbGQgbmFtZSAoZm9yIGV4YW1wbGUsIFwiYmlydGhZZWFyXCIgYmVjb21lcyBcInByb2ZpbGUuYmlydGhZZWFyXCIpLlxyXG4gICAgICAgICAgICBjb25zdCBib3VuZGVkVG8gPSBib3VuZGVkRWxlbWVudC5ib3VuZGVkVG8gPT09IHRoaXMuYmluZElEID8gdGhpcy5iaW5kSUQgOiB0aGlzLmdldE5vcm1hbGl6ZWRGaWVsZE5hbWUoYm91bmRlZEVsZW1lbnQuYm91bmRlZFRvKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCB0byBsaXN0IG9mIGVsZW1lbnRzIGJvdW5kIHRvIHNwZWNpZmljIElELlxyXG4gICAgICAgICAgICBsZXQgYm91bmRlZExpc3QgPSB0aGlzLl9lcnJvckRpc3BsYXlFbGVtZW50c1tib3VuZGVkVG9dO1xyXG4gICAgICAgICAgICBpZiAoIWJvdW5kZWRMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICBib3VuZGVkTGlzdCA9IHRoaXMuX2Vycm9yRGlzcGxheUVsZW1lbnRzW2JvdW5kZWRUb10gPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBib3VuZGVkTGlzdC5wdXNoKGJvdW5kZWRFbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdW5saW5rVGVtcGxhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnN1Ym1pdEhhbmRsZXIpO1xyXG5cclxuICAgICAgICB2YXIgdW5saW5rSXRlbSA9IGkgPT4gaS51bmxpbmtUZW1wbGF0ZSgpO1xyXG5cclxuICAgICAgICBGb3JFYWNoKHRoaXMuX3dpZGdldHMsIHVubGlua0l0ZW0pO1xyXG5cclxuICAgICAgICBGb3JFYWNoKHRoaXMuX2lucHV0cywgdW5saW5rSXRlbSk7XHJcblxyXG4gICAgICAgIHN1cGVyLnVubGlua1RlbXBsYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlua0FuZFBvcHVsYXRlRWxlbWVudHModGhpcy5faW5wdXRzKTtcclxuICAgICAgICAgICAgdGhpcy5saW5rQW5kUG9wdWxhdGVFbGVtZW50cyh0aGlzLl93aWRnZXRzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBldmVudCBsaXN0ZW5lciBhZnRlciBsaW5rIHRvIGluc3RhbmNlIGVsZW1lbnRzLlxyXG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2ZpZWxkQ2hhbmdlZCcsIHRoaXMuZmllbGRDaGFuZ2VkSGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRMb2dpblByb3ZpZGVycygpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBMb2dpbk1vZGVzLnN0YW5kYXJkLmdldExvZ2luUHJvdmlkZXJzKHRoaXMuX3NjcmVlblNldC5kYXRhLmFwaURhdGEsIHRoaXMuX3NjcmVlblNldC5wYXJhbXMsIHRoaXMuX3NjcmVlblNldC5kYXRhLnJlZ1Rva2VuKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xyXG4gICAgICAgIC8vIFRoZSBldmVudCBsaXN0ZW5lciBuZWVkcyB0byBiZSByZW1vdmVkIHNvIHRoYXQgaXQgY2FuJ3QgYmUgdHJpZ2dlcmVkIHdoZW4gaW5zdGFuY2UgZWxlbWVudHMgZG9uJ3QgZXhpc3QuXHJcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdmaWVsZENoYW5nZWQnLCB0aGlzLmZpZWxkQ2hhbmdlZEhhbmRsZXIpO1xyXG5cclxuICAgICAgICB0aGlzLmNsZWFyRHluYW1pY0ZpZWxkcyh0aGlzLl9keW5hbWljSW5wdXRzKTtcclxuICAgICAgICB0aGlzLl9keW5hbWljSW5wdXRzID0gW107XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkge1xyXG4gICAgICAgICAgICB2YXIgdW5saW5rSXRlbSA9IGkgPT4gaS51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcclxuXHJcbiAgICAgICAgICAgIEZvckVhY2godGhpcy5fd2lkZ2V0cywgdW5saW5rSXRlbSk7XHJcblxyXG4gICAgICAgICAgICBGb3JFYWNoKHRoaXMuX2lucHV0cywgdW5saW5rSXRlbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gcHJlLXBvcHVsYXRlIGZvcm1cclxuXHJcbiAgICBwdWJsaWMgcHJlUG9wdWxhdGVEYXRhRnJvbSgpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwcmVQb3B1bGF0ZURhdGEoKTogYW55IHtcclxuICAgICAgICB2YXIgYXBpRGF0YSA9IHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCk7XHJcbiAgICAgICAgdmFyIGFwaURhdGFGb3JGb3JtID0gW3t9XTtcclxuXHJcbiAgICAgICAgRm9yRWFjaCh0aGlzLnByZVBvcHVsYXRlRGF0YUZyb20oKSwgZmllbGQgPT4ge1xyXG4gICAgICAgICAgICBhcGlEYXRhRm9yRm9ybS5wdXNoKGdpZ3lhLnV0aWxzLm9iamVjdC5nZXRQcm9wZXJ0eUJ5U2VyaWFsaXplZE5hbWUoYXBpRGF0YSwgZmllbGQsIGZhbHNlKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoYXBpRGF0YUZvckZvcm0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRFcnJvcktleShyZXNwb25zZTogSUZvcm1SZXNwb25zZSk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JDb2RlID0gcmVzcG9uc2UuZXJyb3JDb2RlO1xyXG4gICAgICAgIHN3aXRjaCAoZXJyb3JDb2RlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuQUNDT1VOVF9URU1QT1JBUklMWV9MT0NLRURfT1VUOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdhY2NvdW50X3RlbXBvcmFyaWx5X2xvY2tlZF9vdXQnO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5BQ0NPVU5UX0RJU0FCTEVEOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdhY2NvdW50X2lzX2Rpc2FibGVkJztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuTE9HSU5fRkFJTEVEX0NBUFRDSEFfUkVRVUlSRUQ6XHJcbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuTE9HSU5fRkFJTEVEX1dST05HX0NBUFRDSEE6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2xvZ2luX2NhcHRjaGFfZXJyb3InO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5MT0dJTl9JREVOVElGSUVSX0VYSVNUUzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnbG9naW5faWRlbnRpZmllcl9leGlzdHMnO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5VTklRVUVfSURFTlRJRklFUl9FWElTVFM6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3VuaXF1ZV9pZGVudGlmaWVyX2V4aXN0cyc7XHJcblxyXG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLlVOREVSQUdFX1VTRVI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3NvcnJ5X3dlX2FyZV9ub3RfYWJsZV90b19wcm9jZXNzX3lvdXJfcmVnaXN0cmF0aW9uJzsvL0NPUFBBXHJcblxyXG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLklOVkFMSURfTE9HSU5JRDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnaW52YWxpZF9sb2dpbl9vcl9wYXNzd29yZCc7XHJcblxyXG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLkxPR0lOSURfRE9FU19OT1RfRVhJU1Q6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3RoZXJlX2lzX25vX3VzZXJfd2l0aF90aGF0X3VzZXJuYW1lX29yX2VtYWlsJztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuSU5WQUxJRF9QQVJBTUVURVJfVkFMVUU6IC8vIGludmFsaWQgcGFyYW1ldGVyIHZhbHVlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3RoZXJlX2FyZV9lcnJvcnNfaW5feW91cl9mb3JtX3BsZWFzZV90cnlfYWdhaW4nO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5PTERfUEFTU1dPUkRfVVNFRDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnb2xkX3Bhc3N3b3JkX2Nhbm5vdF9iZV90aGVfc2FtZV9hc19uZXdfcGFzc3dvcmQnO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5ORVRXT1JLX0VSUk9SOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICduZXR3b3JrX2Vycm9yJztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuVkFMSURBVElPTl9FUlJPUjogLy8gVmFsaWRhdGlvbl9lcnJvclxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FwdGNoYUVycm9yID0gcmVzcG9uc2UudmFsaWRhdGlvbkVycm9ycy5maWx0ZXIoZXJyID0+IGVyci5lcnJvckNvZGUgPT09IEdTRXJyb3JzLkNBUFRDSEFfVkVSSUZJQ0FUSU9OX0ZBSUxFRClbMF07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FwdGNoYUVycm9yID8gJ3JlZ2lzdGVyX2NhcHRjaGFfZXJyb3InIDogJ3RoZXJlX2FyZV9lcnJvcnNfaW5feW91cl9mb3JtX3BsZWFzZV90cnlfYWdhaW4nO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5PSzpcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIC8vIE5vdGhpbmcgdG8gZG8gZm9yIHRoZSBlcnJvciBtZXNzYWdlIGhlcmVcclxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUHJlLXBvcHVsYXRlIGZvcm0gZGF0YSBmcm9tIHNlcnZlciBvciBkZWZhdWx0IHZhbHVlcy5cclxuICAgIHB1YmxpYyBwcmVQb3B1bGF0ZSgpIHtcclxuICAgICAgICBjb25zdCBwb3B1bGF0ZURhdGEgPSB0aGlzLnByZVBvcHVsYXRlRGF0YSgpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUR5bmFtaWNGaWVsZHMoKTtcclxuXHJcbiAgICAgICAgY29uc3QgdXBkYXRlRmllbGQgPSAoZmllbGQ6IEZvcm1JbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmaWVsZE5hbWUgPSBmaWVsZC5nZXROYW1lKHRydWUpO1xyXG4gICAgICAgICAgICBpZiAoZmllbGROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGF0YVZhbHVlOiBzdHJpbmcgfCBib29sZWFuIHwgbnVsbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcnJheVJvb3RGaWVsZCA9IGZpZWxkLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybUlucHV0X0NPTlNUUy5hcnJheVJvb3RBdHRyaWJ1dGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFhcnJheVJvb3RGaWVsZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFWYWx1ZSA9IGdpZ3lhLnV0aWxzLm9iamVjdC5nZXRQcm9wZXJ0eUJ5U2VyaWFsaXplZE5hbWUocG9wdWxhdGVEYXRhLCBmaWVsZE5hbWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJyYXlLZXlGaWVsZCA9IGZpZWxkLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybUlucHV0X0NPTlNUUy5hcnJheUtleUZpZWxkQXR0cmlidXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJheUtleVZhbHVlID0gZmllbGQuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLmFycmF5S2V5VmFsdWVBdHRyaWJ1dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYXJyYXlLZXlGaWVsZCB8fCAhYXJyYXlLZXlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhcm4oJ0ZpZWxkIG5vdCBwb3B1bGF0ZWQgYmVjYXVzZSBkYXRhLWFycmF5LXJvb3QgcHJvdmlkZWQgd2l0aG91dCBkYXRhLWFycmF5LWtleS1maWVsZCBhbmQgZGF0YS1hcnJheS1rZXktdmFsdWUnLCBmaWVsZE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5Um9vdCA9IGdpZ3lhLnV0aWxzLm9iamVjdC5nZXRQcm9wZXJ0eUJ5U2VyaWFsaXplZE5hbWUocG9wdWxhdGVEYXRhLCBhcnJheVJvb3RGaWVsZCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJyYXlSb290ICYmIGFycmF5Um9vdC5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgJiYgYXJyYXlSb290Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmluZCBlbGVtZW50LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBvIG9mIGFycmF5Um9vdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5S2V5RmllbGRWYWx1ZSA9IGdpZ3lhLnV0aWxzLm9iamVjdC5nZXRQcm9wZXJ0eUJ5U2VyaWFsaXplZE5hbWUobywgYXJyYXlLZXlGaWVsZCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcnJheUtleVZhbHVlID09PSBTdHJpbmcoYXJyYXlLZXlGaWVsZFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmFsdWUgPSBnaWd5YS51dGlscy5vYmplY3QuZ2V0UHJvcGVydHlCeVNlcmlhbGl6ZWROYW1lKG8sIGZpZWxkTmFtZS5zdWJzdHIoYXJyYXlSb290RmllbGQubGVuZ3RoICsgMSksIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkYXRhVmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZC5wcmVQb3B1bGF0ZShkYXRhVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmaWVsZC50eXBlID09PSAnY2hlY2tib3gnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hlY2tib3hJbnN0YW5jZUVsZW1lbnQgPSBmaWVsZC5pbnN0YW5jZUVsZW1lbnQgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0Q2hlY2tlZENvbmRpdGlvbiA9IGZpZWxkLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybV9DT05TVFMuZGVmYXVsdENoZWNrZWRBdHRyaWJ1dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWZhdWx0Q2hlY2tlZENvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2JveEluc3RhbmNlRWxlbWVudC5jaGVja2VkID0gQm9vbGVhbihmaWVsZC5ldmFsdWF0ZUV4cHJlc3Npb24oeyBjb25kaXRpb246IGRlZmF1bHRDaGVja2VkQ29uZGl0aW9uIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNldCBkZWZhdWx0IHZhbHVlIHRvIGNoZWNrZWQgcHJvcGVydHkuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgdG8gdHJpZ2dlciBjb25kaXRpb25hbHMgdGhhdCByZWx5IG9uIHRoZSBjaGVja2JveCdzIHZhbHVlLlxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLnNldFZhbHVlKGNoZWNrYm94SW5zdGFuY2VFbGVtZW50LmNoZWNrZWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBGb3JFYWNoKHRoaXMuX2lucHV0cywgdXBkYXRlRmllbGQpO1xyXG4gICAgICAgIEZvckVhY2godGhpcy5fZHluYW1pY0lucHV0cywgdXBkYXRlRmllbGQpO1xyXG4gICAgICAgIHRoaXMuaXNQb3B1bGF0ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRFeHRyYVByb2ZpbGVGaWVsZHMobWlzc2luZ09ubHk6IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zdCBhbHJlYWR5SGFuZGxlZEZpZWxkczogSU1hcDxib29sZWFuPiA9IHt9O1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhVG9TZXJ2ZXJcclxuICAgICAgICAgICAgLm1hcChmaWVsZCA9PiBmaWVsZC5ub3JtYWxpemVkRmllbGROYW1lKVxyXG4gICAgICAgICAgICAuY29uY2F0KHRoaXMuX3dpZGdldHMucmVkdWNlKChyZXMsIHdpZGdldCkgPT4gcmVzLmNvbmNhdCh3aWRnZXQuZ2V0RmllbGRzTmFtZXMoKSksIFtdKSkgLy8gZ2V0IGFsc28gZmllbGROYW1lcyBmcm9tIHdpZGdldHMgdGhhdCBtYXkgbm90IGJlIGZpbGxlZCBpbiBkYXRhVG9TZXJ2ZXJcclxuICAgICAgICAgICAgLmZpbHRlcihuID0+IGZpcnN0UGFydChuLCAnLicpID09PSB0aGlzLnByb2ZpbGVPYmplY3ROYW1lKCkpIC8vIG1ha2Ugc3VyZSBpdCBpcyBpbiBwcm9maWxlIG5hbWVzcGFjZVxyXG4gICAgICAgICAgICAubWFwKG4gPT4gZmlyc3RQYXJ0KG4ucmVwbGFjZSh0aGlzLnByb2ZpbGVPYmplY3ROYW1lKCkgKyAnLicsICcnKSwgJy4nKSkgLy8gZ2V0IHRoZSBwcm9wZXJ0eSBuYW1lIGl0c2VsZlxyXG4gICAgICAgICAgICAucmVkdWNlKChmaWVsZE5hbWVzLCBmbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFscmVhZHlIYW5kbGVkRmllbGRzW2ZuXSkgcmV0dXJuIGZpZWxkTmFtZXM7XHJcbiAgICAgICAgICAgICAgICBhbHJlYWR5SGFuZGxlZEZpZWxkc1tmbl0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvZmlsZSA9IHRoaXMuX3NjcmVlblNldC5nZXRQcm9maWxlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1pc3NpbmdPbmx5IHx8ICFwcm9maWxlIHx8ICFwcm9maWxlW2ZuXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkTmFtZXMucHVzaChmbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmllbGROYW1lcztcclxuICAgICAgICAgICAgfSwgW10pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXROZWVkZWREYXRhKGZvcm1Db250ZXh0PzogSUZvcm1Db250ZXh0KSB7XHJcbiAgICAgICAgY29uc3QgbmVlZGVkRGF0YSA9IHt9O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fbmVlZENvbnRhaW5lckhpc3RvcnkpIHtcclxuICAgICAgICAgICAgbmVlZGVkRGF0YVsnZ2V0VXNlclNldHRpbmdzJ10gPSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBncm91cDogJ2dpZ3lhX2NvbnRhaW5lcl9oaXN0b3J5LScgKyB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmNvbnRhaW5lcklELFxyXG4gICAgICAgICAgICAgICAgICAgIHJlZ1Rva2VuOiB0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlTG9jYWxTZXR0aW5nczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjYWNoZTogZmFsc2UsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGZXRjaCBwYXNzd29yZCBjb21wbGV4aXR5IGZvciB0aGUgcGFzc3dvcmQgd2lkZ2V0IGFuZCB2YWxpZGF0aW9uIGlmIHBhc3N3b3JkIGZpZWxkIGV4aXN0cyBvbiBzY3JlZW4uXHJcbiAgICAgICAgY29uc3QgaXNQYXNzd29yZFBvbGljaWVzTmVlZGVkID0gU29tZSh0aGlzLmRhdGFUb1NlcnZlciwgdGhpcy5pc1Bhc3N3b3JkUG9saWN5TmVlZGVkRm9yRmllbGQpO1xyXG4gICAgICAgIGlmIChpc1Bhc3N3b3JkUG9saWNpZXNOZWVkZWQpIHtcclxuICAgICAgICAgICAgbmVlZGVkRGF0YVsnZ2V0UG9saWNpZXMnXSA9IHtcclxuICAgICAgICAgICAgICAgIHBhcmFtczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25zOiAncGFzc3dvcmRDb21wbGV4aXR5JyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjYWNoZTogdHJ1ZSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZWVkZWREYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpc1Bhc3N3b3JkUG9saWN5TmVlZGVkRm9yRmllbGQoZmllbGQ6IElGb3JtSW5wdXQpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZmllbGQgaW5zdGFuY2VvZiBCYXNlUGFzc3dvcmRJbnB1dCAmJiAoZmllbGQuaXNQYXNzd29yZFNjaGVtYVZhbGlkYXRlZCgpIHx8IGZpZWxkLmlzUGFzc3dvcmRTdHJlbmd0aFdpZGdldEJvdW5kKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBEeW5hbWljIGZpZWxkc1xyXG5cclxuICAgIC8vIGV4cGxpY2l0bHkgYWRkIGR5bmFtaWMgaW5wdXRzLCBtb3JlIGVmZmljaWVudFxyXG4gICAgcHVibGljIGFkZER5bmFtaWNJbnB1dHMocm9vdEVsOiBFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgaW5wdXRzRWxlbWVudHMgPSByb290RWwucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQsc2VsZWN0LGZpZWxkc2V0Jyk7XHJcbiAgICAgICAgY29uc3QgaW5wdXRzID0gRm9ybUlucHV0LnJlZ2lzdGVyRm9ybUlucHV0cyhpbnB1dHNFbGVtZW50cywgdGhpcyk7XHJcbiAgICAgICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICAgICAgICBUZW1wbGF0ZUVsZW1lbnQucHJlcGFyZVRlbXBsYXRlSW5zdGFuY2VFbGVtZW50KGlucHV0LnRlbXBsYXRlRWxlbWVudCwgZmFsc2UpO1xyXG4gICAgICAgICAgICBpbnB1dC5saW5rSW5zdGFuY2VFbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9pbnB1dHMuY29uY2F0KGlucHV0cyk7XHJcbiAgICAgICAgcmV0dXJuIGlucHV0cztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlRHluYW1pY0lucHV0cyhpbnB1dHNUb1JlbW92ZTogQXJyYXk8Rm9ybUlucHV0Pikge1xyXG4gICAgICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX2lucHV0cy5maWx0ZXIoaSA9PiBpbnB1dHNUb1JlbW92ZS5pbmRleE9mKGkpIDwgMCk7XHJcbiAgICAgICAgaW5wdXRzVG9SZW1vdmUuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFJbmRleCA9IGdpZ3lhLnV0aWxzLmFycmF5LmluZGV4T2YodGhpcy5kYXRhVG9TZXJ2ZXIsIGlucHV0KTtcclxuICAgICAgICAgICAgaWYgKGRhdGFJbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVRvU2VydmVyLnNwbGljZShkYXRhSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlucHV0LnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xyXG4gICAgICAgICAgICBpbnB1dC51bmxpbmtUZW1wbGF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2xlYXJEeW5hbWljRmllbGRzKGR5bmFtaWNzOiBGb3JtSW5wdXRbXSkge1xyXG4gICAgICAgIEZvckVhY2goZHluYW1pY3MsIG9sZCA9PiB7XHJcbiAgICAgICAgICAgIG9sZC51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcclxuICAgICAgICAgICAgb2xkLnVubGlua1RlbXBsYXRlKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YUluZGV4ID0gZ2lneWEudXRpbHMuYXJyYXkuaW5kZXhPZih0aGlzLmRhdGFUb1NlcnZlciwgb2xkKTtcclxuICAgICAgICAgICAgaWYgKGRhdGFJbmRleCAhPT0gLTEpIHRoaXMuZGF0YVRvU2VydmVyLnNwbGljZShkYXRhSW5kZXgsIDEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBpc0R5bmFtaWNGaWVsZE9ic29sZXRlKGR5bmFtaWNFbGVtZW50OiBGb3JtSW5wdXQpOiBib29sZWFuIHtcclxuICAgICAgICB2YXIgcGFyZW50ID0gZHluYW1pY0VsZW1lbnQudGVtcGxhdGVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgd2hpbGUgKHBhcmVudCAmJiBwYXJlbnQgIT09IHRoaXMuaW5zdGFuY2VFbGVtZW50ICYmIHBhcmVudCAhPT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBhcmVudCAhPT0gdGhpcy5pbnN0YW5jZUVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc0R5bmFtaWNGaWVsZFRvQWRkKGVsOiBFbGVtZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgdmFyIGlnbm9yZWRGaWVsZHMgPSB0aGlzLmlnbm9yZWRGaWVsZHMoKTtcclxuICAgICAgICB2YXIgaW5zdGFuY2VPZkFycmF5ID0gZWxbVGVtcGxhdGVFbGVtZW50X0NPTlNUUy5pbnN0YW5jZU9mQXJyYXldO1xyXG4gICAgICAgIGlmIChpbnN0YW5jZU9mQXJyYXkgJiYgU29tZShpbnN0YW5jZU9mQXJyYXksIChpbnN0YW5jZTogRm9ybUlucHV0KSA9PiBpbnN0YW5jZSBpbnN0YW5jZW9mIEZvcm1JbnB1dCAmJiBpbnN0YW5jZS5fZm9ybSA9PT0gdGhpcykpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIG5hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcclxuICAgICAgICBpZiAoaWdub3JlZEZpZWxkc1tuYW1lXSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlRHluYW1pY0ZpZWxkcygpIHtcclxuICAgICAgICB2YXIgb2xkRHluYW1pY0lucHV0cyA9IG5ldyBBcnJheTxGb3JtSW5wdXQ+KCk7XHJcbiAgICAgICAgdmFyIHZhbGlkRHluYW1pY0lucHV0cyA9IG5ldyBBcnJheTxGb3JtSW5wdXQ+KCk7XHJcblxyXG4gICAgICAgIC8vIHNlcGFyYXRlIHZhbGlkIGZyb20gaW52YWxpZCBleGlzdGluZyBkeW5hbWljc1xyXG4gICAgICAgIEZvckVhY2godGhpcy5fZHluYW1pY0lucHV0cywgZXhpc3RpbmdEeW5hbWljSW5wdXQgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0R5bmFtaWNGaWVsZE9ic29sZXRlKGV4aXN0aW5nRHluYW1pY0lucHV0KSkgb2xkRHluYW1pY0lucHV0cy5wdXNoKGV4aXN0aW5nRHluYW1pY0lucHV0KTtcclxuICAgICAgICAgICAgZWxzZSB2YWxpZER5bmFtaWNJbnB1dHMucHVzaChleGlzdGluZ0R5bmFtaWNJbnB1dCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIHJlbW92ZSBpbnZhbGlkIGR5bmFtaWNzXHJcbiAgICAgICAgdGhpcy5jbGVhckR5bmFtaWNGaWVsZHMob2xkRHluYW1pY0lucHV0cyk7XHJcblxyXG4gICAgICAgIC8vIGFkZCBuZXcgZHluYW1pY3NcclxuICAgICAgICB2YXIgbmV3RHluYW1pY3MgPSBuZXcgQXJyYXk8RWxlbWVudD4oKTtcclxuICAgICAgICAvLyBmaW5kIG5ldyBkeW5hbWljIGVsZW1lbnRzXHJcbiAgICAgICAgRm9yRWFjaCh0aGlzLmluc3RhbmNlRWxlbWVudC5lbGVtZW50cywgZWwgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0R5bmFtaWNGaWVsZFRvQWRkKGVsKSkgbmV3RHluYW1pY3MucHVzaChlbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gY3JlYXRlIGluc3RhbmNlcyBmb3IgbmV3IGR5bmFtaWNzXHJcbiAgICAgICAgdmFyIG5ld0R5bmFtaWNJbnB1dHMgPSBGb3JtSW5wdXQucmVnaXN0ZXJGb3JtSW5wdXRzKG5ld0R5bmFtaWNzLCB0aGlzKTtcclxuICAgICAgICBGb3JFYWNoKG5ld0R5bmFtaWNJbnB1dHMsIG5ld0R5bmFtaWNJbnB1dCA9PiB7XHJcbiAgICAgICAgICAgIFRlbXBsYXRlRWxlbWVudC5wcmVwYXJlVGVtcGxhdGVJbnN0YW5jZUVsZW1lbnQobmV3RHluYW1pY0lucHV0LnRlbXBsYXRlRWxlbWVudCwgZmFsc2UpO1xyXG4gICAgICAgICAgICBuZXdEeW5hbWljSW5wdXQubGlua0luc3RhbmNlRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIG5ld0R5bmFtaWNJbnB1dC5keW5hbWljRmllbGQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdmFsaWREeW5hbWljSW5wdXRzLnB1c2gobmV3RHluYW1pY0lucHV0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gc3RvcmUgbmV3IGR5bmFtaWNzIGxpc3RcclxuICAgICAgICB0aGlzLl9keW5hbWljSW5wdXRzID0gdmFsaWREeW5hbWljSW5wdXRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiB2YWxpZGF0aW9uXHJcblxyXG4gICAgcHVibGljIHJlcXVpcmVkRmllbGRzKCk6IElNYXA8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNwZWNpYWxGaWVsZHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25JbnB1dENoYW5nZShpbnB1dDogSUZvcm1JbnB1dCwgc2V0QnlTY3JpcHQ6IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAoc2V0QnlTY3JpcHQpIHtcclxuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmRpc3BhdGNoKHRoaXMuaW5zdGFuY2VFbGVtZW50LCAnZmllbGRDaGFuZ2VkJyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZnRlcklucHV0Q2hhbmdlKHtcclxuICAgICAgICAgICAgICAgIGZpZWxkOiBpbnB1dCxcclxuICAgICAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuT0ssXHJcbiAgICAgICAgICAgICAgICBzZXRCeVNjcmlwdDogc2V0QnlTY3JpcHQsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGlucHV0LmdldFZhbHVlKCk7XHJcblxyXG4gICAgICAgICAgICBpbnB1dC52YWxpZGF0ZSh2YWxpZGF0aW9uaW5mbyA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmllbGRDaGFuZ2VFdmVudDogSUZpZWxkQ2hhbmdlRXZlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnZmllbGRDaGFuZ2VkJyxcclxuICAgICAgICAgICAgICAgICAgICBzY3JlZW46IHRoaXMuX3NjcmVlbi5JRCxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtOiB0aGlzLmJpbmRJRCxcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZDogaW5wdXQuZmllbGROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzVmFsaWQ6ICF2YWxpZGF0aW9uaW5mby5lcnJvckNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyTXNnOiB2YWxpZGF0aW9uaW5mby5lcnJvckNvZGUsIC8vIFRPRE8gc2hvdWxkbid0IHRoaXMgYmUgYW4gZXJyb3IgbWVzc2FnZT9cclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlbi5kaXNwYXRjaEV2ZW50KCdmaWVsZENoYW5nZWQnLCBmaWVsZENoYW5nZUV2ZW50KTtcclxuICAgICAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5kaXNwYXRjaCh0aGlzLmluc3RhbmNlRWxlbWVudCwgJ2ZpZWxkQ2hhbmdlZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuYWZ0ZXJJbnB1dENoYW5nZSh2YWxpZGF0aW9uaW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFmdGVySW5wdXRDaGFuZ2UodmFsaWRhdGlvbkluZm86IElWYWxpZGF0aW9uSW5mbykge1xyXG4gICAgICAgIGlmICh2YWxpZGF0aW9uSW5mby5maWVsZC5maWVsZE5hbWUgPT09ICduZXdQYXNzd29yZCcgfHwgdmFsaWRhdGlvbkluZm8uZmllbGQuZmllbGROYW1lID09PSAncGFzc3dvcmQnKSB7XHJcbiAgICAgICAgICAgIEZvckVhY2godGhpcy5fcGFzc3dvcmRSZXR5cGVzLCBwID0+IHtcclxuICAgICAgICAgICAgICAgIHAuc2V0VmFsdWUoJycsIHZhbGlkYXRpb25JbmZvLnNldEJ5U2NyaXB0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNob3dGaWVsZEVycm9yKHZhbGlkYXRpb25JbmZvLmZpZWxkLCB2YWxpZGF0aW9uSW5mby5lcnJvckNvZGUsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc1Bhc3N3b3JkU2NoZW1hVmFsaWRhdGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNjaGVtYVZhbGlkYXRlZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzY2hlbWFWYWxpZGF0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRGaWVsZFNjaGVtYShmaWVsZDogSUZvcm1JbnB1dCkge1xyXG4gICAgICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuZ2V0U2NoZW1hT2Y8SUZpZWxkU2NoZW1hPihmaWVsZC5maWVsZE5hbWVzcGFjZSB8fCAncHJvZmlsZScpO1xyXG4gICAgICAgIHJldHVybiBzY2hlbWEgJiYgc2NoZW1hW2ZpZWxkLmZpZWxkQmFzZU5hbWVdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0U2NoZW1hT2Y8VCBleHRlbmRzIElGaWVsZFNjaGVtYT4oc2NoZW1hTmFtZTogU2NoZW1hTmFtZSk6IElTY2hlbWFGaWVsZHM8VD4gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGNvbnN0IGFwaURhdGEgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpO1xyXG4gICAgICAgIGNvbnN0IHNjaGVtYVJvb3QgPSB0aGlzLmdldFNjaGVtYVJvb3Qoc2NoZW1hTmFtZSk7XHJcblxyXG4gICAgICAgIHJldHVybiBhcGlEYXRhLmdldFNjaGVtYSAmJiBhcGlEYXRhLmdldFNjaGVtYVtzY2hlbWFSb290XSAmJiBhcGlEYXRhLmdldFNjaGVtYVtzY2hlbWFSb290XS5maWVsZHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRTY2hlbWFSb290KG5hbWVzcGFjZTogU2NoZW1hTmFtZSk6IHN0cmluZyB7XHJcbiAgICAgICAgc3dpdGNoIChuYW1lc3BhY2UpIHtcclxuICAgICAgICAgICAgY2FzZSAnZGF0YSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2RhdGFTY2hlbWEnO1xyXG4gICAgICAgICAgICBjYXNlICdwcm9maWxlJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAncHJvZmlsZVNjaGVtYSc7XHJcbiAgICAgICAgICAgIGNhc2UgJ3N1YnNjcmlwdGlvbnMnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdzdWJzY3JpcHRpb25zU2NoZW1hJztcclxuICAgICAgICAgICAgY2FzZSAncHJlZmVyZW5jZXMnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdwcmVmZXJlbmNlc1NjaGVtYSc7XHJcbiAgICAgICAgICAgIGNhc2UgJ29yZ2FuaXphdGlvbic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ29yZ2FuaXphdGlvblNjaGVtYSc7XHJcbiAgICAgICAgICAgIGNhc2UgJ3JlcXVlc3Rlcic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3JlcXVlc3RlclNjaGVtYSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93RmllbGRFcnJvcihmaWVsZDogSUZvcm1JbnB1dCwgZXJyb3JDb2RlOiBHU0Vycm9ycywgaXNCb3VuZFRvRmllbGQ6IGJvb2xlYW4sIGN1c3RvbUVyck1zZz86IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGN1c3RvbUVyck1zZyB8fCB0aGlzLl9zY3JlZW4uZ2V0RXJyb3JNZXNzYWdlKGVycm9yQ29kZSwgaXNCb3VuZFRvRmllbGQsIGZpZWxkKTtcclxuICAgICAgICBjb25zdCBlcnJvckluZm86IElFcnJvckluZm8gPSB7XHJcbiAgICAgICAgICAgIGVycm9yQ29kZSxcclxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKGVycm9yQ29kZSAhPT0gR1NFcnJvcnMuT0sgJiYgZXJyb3JDb2RlICE9PSBHU0Vycm9ycy5EYXRhX1BlbmRpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5mb3JtRXJyb3JzW2ZpZWxkLmZpZWxkTmFtZV0gPSBlcnJvckluZm87XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBzaG91bGRIYW5kbGVFcnJvciA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIGRpc3BsYXkgZXJyb3Igb24gYm91bmRlZCBlcnJvciBlbGVtZW50c1xyXG4gICAgICAgIGlmIChpc0JvdW5kVG9GaWVsZCkge1xyXG4gICAgICAgICAgICBsZXQgZmllbGRWYWxpZGl0eTogVmFsaWRpdHlTdGF0ZXM7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZXJyb3JDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRWYWxpZGl0eSA9IFZhbGlkaXR5U3RhdGVzLnZhbGlkO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5EYXRhX1BlbmRpbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRWYWxpZGl0eSA9IFZhbGlkaXR5U3RhdGVzLnBlbmRpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkSGFuZGxlRXJyb3IgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRWYWxpZGl0eSA9IFZhbGlkaXR5U3RhdGVzLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBEaXNwbGF5IGVycm9yIG9uIHRoZSBmaWVsZCBpdHNlbGYuXHJcbiAgICAgICAgICAgIGZpZWxkLnNldFZhbGlkaXR5U3RhdGUoZmllbGRWYWxpZGl0eSk7XHJcblxyXG4gICAgICAgICAgICAvLyBEZWFsaW5nIHdpdGggZ2lneWEtZXJyb3ItbXNnIGFuZCBnaWd5YS1lcnJvci1kaXNwbGF5IHdpdGhpbiB0aGUgc2FtZSBmb3JtIGFzIHRoZSBpbnB1dC5cclxuICAgICAgICAgICAgY29uc3QgYXJCb3VuZEVsZW1lbnRzID0gdGhpcy5fZXJyb3JEaXNwbGF5RWxlbWVudHNbZmllbGQubm9ybWFsaXplZEZpZWxkTmFtZV0gfHwgW107XHJcbiAgICAgICAgICAgIEZvckVhY2goYXJCb3VuZEVsZW1lbnRzLCBlbEJvdW5kID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIERvIG5vdCBjb25zaWRlciB0aGUgZmllbGQgYm91bmQgaWYgaXQncyBhIGRpZmZlcmVudCBhcnJheSBlbGVtZW50LlxyXG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRBcnJheUtleVZhbHVlID0gZmllbGQuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLmFycmF5S2V5VmFsdWVBdHRyaWJ1dGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkQXJyYXlLZXlWYWx1ZSAmJiBmaWVsZEFycmF5S2V5VmFsdWUgIT09IGVsQm91bmQuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLmFycmF5S2V5VmFsdWVBdHRyaWJ1dGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlcnJvckluZm8uZXJyb3JNZXNzYWdlICYmIGVsQm91bmQuaXNFcnJvckNvZGVBbGxvd2VkKGVycm9yQ29kZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbEJvdW5kLnNob3dFcnJvcihlcnJvckluZm8pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBlbEJvdW5kLmhpZGVFcnJvcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzaG91bGRIYW5kbGVFcnJvcjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dDdXN0b21Gb3JtRXJyb3IoZXJyTXNnOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBlcnJvckluZm86IElFcnJvckluZm8gPSB7XHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyTXNnLFxyXG4gICAgICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLlZBTElEQVRJT05fRVJST1IsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmZvcm1FcnJvcnNbJ2Zvcm0nXSA9IGVycm9ySW5mbztcclxuICAgICAgICB0aGlzLnNob3dFcnJvcnMoW2Vycm9ySW5mb10sIHRydWUpOyAvLyBpc1NlcnZlckVycm9yID0gdHJ1ZSAoZm9yY2UgdGhlIGRpc3BsYXkgb2YgdGhlIGVycm9yIG1lc3NhZ2UpXHJcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZENsYXNzVG9FbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50LCBGb3JtX0NPTlNUUy5mb3JtRXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVPbkJlZm9yZVZhbGlkYXRpb25FdmVudChmb3JtRGF0YSk6IElCZWZvcmVWYWxpZGF0aW9uRXZlbnQge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRhdGE6IHRoaXMuX3NjcmVlblNldC5nZXRTY2hlbWFEYXRhKCksXHJcbiAgICAgICAgICAgIHByb2ZpbGU6IHRoaXMuX3NjcmVlblNldC5nZXRQcm9maWxlKCksXHJcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbnM6IHRoaXMuX3NjcmVlblNldC5nZXRTdWJTY3JpcHRpb25zKCksXHJcbiAgICAgICAgICAgIHByZWZlcmVuY2VzOiB0aGlzLl9zY3JlZW5TZXQuZ2V0UHJlZmVyZW5jZXMoKSxcclxuICAgICAgICAgICAgZXZlbnROYW1lOiAnYmVmb3JlVmFsaWRhdGlvbicsXHJcbiAgICAgICAgICAgIGZvcm06IHRoaXMuYmluZElELFxyXG4gICAgICAgICAgICBmb3JtRGF0YSxcclxuICAgICAgICAgICAgc2NyZWVuOiB0aGlzLl9zY3JlZW4uSUQsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZU9uQWZ0ZXJWYWxpZGF0aW9uRXZlbnQoZm9ybURhdGEpOiBJQWZ0ZXJWYWxpZGF0aW9uRXZlbnQge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRhdGE6IHRoaXMuX3NjcmVlblNldC5nZXRTY2hlbWFEYXRhKCksXHJcbiAgICAgICAgICAgIHByb2ZpbGU6IHRoaXMuX3NjcmVlblNldC5nZXRQcm9maWxlKCksXHJcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbnM6IHRoaXMuX3NjcmVlblNldC5nZXRTdWJTY3JpcHRpb25zKCksXHJcbiAgICAgICAgICAgIHByZWZlcmVuY2VzOiB0aGlzLl9zY3JlZW5TZXQuZ2V0UHJlZmVyZW5jZXMoKSxcclxuICAgICAgICAgICAgZXZlbnROYW1lOiAnYWZ0ZXJWYWxpZGF0aW9uJyxcclxuICAgICAgICAgICAgZm9ybTogdGhpcy5iaW5kSUQsXHJcbiAgICAgICAgICAgIGZvcm1EYXRhLFxyXG4gICAgICAgICAgICBzY3JlZW46IHRoaXMuX3NjcmVlbi5JRCxcclxuICAgICAgICAgICAgZm9ybUVycm9yczogT2JqZWN0LmtleXModGhpcy5mb3JtRXJyb3JzKS5sZW5ndGggPiAwID8gdGhpcy5mb3JtRXJyb3JzIDogdW5kZWZpbmVkLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBhcHBseUN1c3RvbVZhbGlkYXRpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgbGV0IGlzVmFsaWQgPSB0cnVlO1xyXG4gICAgICAgIGxldCBjdXN0b21FcnJNc2dzID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGltU2NyZWVuU2V0KCk7XHJcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSB0aGlzLmdldEZsYXRGb3JtRGF0YSh0cnVlLCBmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgYmVmb3JlVmFsaWRhdGlvbkV2ZW50ID0gdGhpcy5jcmVhdGVPbkJlZm9yZVZhbGlkYXRpb25FdmVudChmb3JtRGF0YSk7XHJcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvblJlc3VsdCA9IHRoaXMuX3NjcmVlbi5kaXNwYXRjaEV2ZW50KGJlZm9yZVZhbGlkYXRpb25FdmVudC5ldmVudE5hbWUsIGJlZm9yZVZhbGlkYXRpb25FdmVudCk7XHJcblxyXG4gICAgICAgIGxldCBfY3VzdG9tVmFsaWRhdGlvblRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBbR2lneWFdOiBjdXN0b20gdmFsaWRhdGlvbiBkaWQgbm90IHJlc29sdmUgYWZ0ZXIgbW9yZSB0aGFuICR7Q1VTVE9NX1ZBTElEQVRJT05fVElNRU9VVF9XQVJOSU5HfSBzZWNvbmRzYCk7XHJcbiAgICAgICAgfSwgQ1VTVE9NX1ZBTElEQVRJT05fVElNRU9VVF9XQVJOSU5HKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY3VzdG9tRXJyTXNncyA9IGdpZ3lhLnV0aWxzLm9iamVjdC51bmZsYXR0ZW4oYXdhaXQgUHJvbWlzZS5yZXNvbHZlKHZhbGlkYXRpb25SZXN1bHQpKTtcclxuICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFtHaWd5YV06IGN1c3RvbSB2YWxpZGF0aW9uIHRocmV3IGFuIGVycm9yYCwgZXgpO1xyXG4gICAgICAgICAgICBjdXN0b21FcnJNc2dzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC51bmRpbVNjcmVlblNldCgpO1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoX2N1c3RvbVZhbGlkYXRpb25UaW1lb3V0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZvciBhcnJheXMsIHdlIG5lZWQgdG8gc3VwcG9ydCBib3RoIGtpbmQgb2YgbWFwcGVkIGZpZWxkIFwiZGF0YS5hcnJheVJvb3RbMF0uZmllbGRcIiBhbmQgXCJkYXRhLmFycmF5Um9vdC4wLmZpZWxkXCJcclxuICAgICAgICBjb25zdCBlcnJvcnMgPSBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW2dpZ3lhLnV0aWxzLm9iamVjdC5mbGF0dGVuKGN1c3RvbUVyck1zZ3MsIHRydWUpLCBnaWd5YS51dGlscy5vYmplY3QuZmxhdHRlbihjdXN0b21FcnJNc2dzKV0pO1xyXG4gICAgICAgIGlmIChlcnJvcnMgJiYgdHlwZW9mIGVycm9ycyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgRm9yRWFjaChPYmplY3Qua2V5cyhlcnJvcnMpLCBmaWVsZE5hbWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9ycy5oYXNPd25Qcm9wZXJ0eShmaWVsZE5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyTXNnID0gZXJyb3JzW2ZpZWxkTmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkTmFtZSA9PT0gJ2Zvcm0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q3VzdG9tRm9ybUVycm9yKGVyck1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGQgPSB0aGlzLmdldEZpZWxkQnlEYXRhKGZpZWxkTmFtZSwgZm9ybURhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0ZpZWxkRXJyb3IoZmllbGQsIEdTRXJyb3JzLlZBTElEQVRJT05fRVJST1IsIHRydWUsIGVyck1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGlzVmFsaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRGaWVsZEJ5RGF0YShmaWVsZE5hbWU6IHN0cmluZywgZm9ybURhdGE6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fSk6IElGb3JtSW5wdXQge1xyXG4gICAgICAgIGlmICghT2JqZWN0LmtleXMoZm9ybURhdGEpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGaWVsZChmaWVsZE5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9Gb3Igc3RvcmUgYXMgYXJyYXkgZmllbGRzLCBsb29wIHRocm91Z2ggYWxsIGZpZWxkcyB0byBmaW5kIHRoZSBjb3JyZWN0IG1hdGNoXHJcbiAgICAgICAgY29uc3QgZm9ybU1vZGVsID0gZ2lneWEudXRpbHMub2JqZWN0LnVuZmxhdHRlbihmb3JtRGF0YSk7XHJcbiAgICAgICAgY29uc3QgZm9ybURhdGFXaXRoQWxsS2V5cyA9IGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbZ2lneWEudXRpbHMub2JqZWN0LmZsYXR0ZW4oZm9ybU1vZGVsLCB0cnVlKSwgZ2lneWEudXRpbHMub2JqZWN0LmZsYXR0ZW4oZm9ybU1vZGVsKV0pO1xyXG4gICAgICAgIGNvbnN0IHN0b3JlQXNBcnJheUZpZWxkID0gT2JqZWN0LmtleXMoZm9ybURhdGFXaXRoQWxsS2V5cylcclxuICAgICAgICAgICAgLmZpbHRlcihrZXkgPT4ga2V5ICE9PSBmaWVsZE5hbWUgJiYgaGFzSW5kZXgoa2V5KSAmJiByZW1vdmVTZXJpYWxpemVkS2V5RWRnZVByb3BlcnR5KGtleSkgPT09IHJlbW92ZVNlcmlhbGl6ZWRLZXlFZGdlUHJvcGVydHkoZmllbGROYW1lKSlcclxuICAgICAgICAgICAgLm1hcChrZXkgPT4gdGhpcy5nZXRGaWVsZChyZW1vdmVTZXJpYWxpemVkS2V5TGFzdEVudW1lcmF0b3IoZmllbGROYW1lKSwgZm9ybURhdGFXaXRoQWxsS2V5c1trZXldKSlcclxuICAgICAgICAgICAgLmZpbHRlcihmaWVsZCA9PiBCb29sZWFuKGZpZWxkKSlbMF07XHJcblxyXG4gICAgICAgIGNvbnN0IGZpZWxkID0gc3RvcmVBc0FycmF5RmllbGQgfHwgdGhpcy5nZXRGaWVsZChmaWVsZE5hbWUpO1xyXG4gICAgICAgIHJldHVybiBmaWVsZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25BZnRlclZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSB0aGlzLmdldEZsYXRGb3JtRGF0YSh0cnVlLCBmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgYWZ0ZXJWYWxpZGF0aW9uRXZlbnQgPSB0aGlzLmNyZWF0ZU9uQWZ0ZXJWYWxpZGF0aW9uRXZlbnQoZm9ybURhdGEpO1xyXG4gICAgICAgIHRoaXMuX3NjcmVlbi5kaXNwYXRjaEV2ZW50KGFmdGVyVmFsaWRhdGlvbkV2ZW50LmV2ZW50TmFtZSwgYWZ0ZXJWYWxpZGF0aW9uRXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgdmFsaWRhdGUoY2FsbGJhY2s6IChpc1ZhbGlkOiBib29sZWFuKSA9PiB2b2lkKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdGhpcy5mb3JtRXJyb3JzID0ge307XHJcbiAgICAgICAgbGV0IGlzVmFsaWQgPSBhd2FpdCB0aGlzLmFwcGx5Q3VzdG9tVmFsaWRhdGlvbigpO1xyXG4gICAgICAgIGlmICghaXNWYWxpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbkFmdGVyVmFsaWRhdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBmbGF0Rm9ybURhdGEgPSB0aGlzLmdldEZsYXRGb3JtRGF0YSh0cnVlLCB0cnVlKTtcclxuICAgICAgICBsZXQgZmllbGRzTGVmdCA9IHRoaXMuZGF0YVRvU2VydmVyLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBhclZhbGlkYXRpb25FcnJvcnMgPSBuZXcgQXJyYXk8SUVycm9ySW5mbz4oKTtcclxuICAgICAgICBjb25zdCBmaWVsZFZhbGlkYXRpb25DYWxsYmFjayA9ICh2YWxpZGF0aW9uSW5mbzogSVZhbGlkYXRpb25JbmZvKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uSW5mby5lcnJvckNvZGUgIT09IEdTRXJyb3JzLk9LKSB7XHJcbiAgICAgICAgICAgICAgICBpc1ZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXJyb3JJbmZvOiBJRXJyb3JJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkTmFtZTogdmFsaWRhdGlvbkluZm8uZmllbGQuZmllbGROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogdmFsaWRhdGlvbkluZm8uZXJyb3JDb2RlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGFyVmFsaWRhdGlvbkVycm9ycy5wdXNoKGVycm9ySW5mbyk7XHJcblxyXG4gICAgICAgICAgICAgICAgZXJyb3JJbmZvLmhhbmRsZWQgPSB0aGlzLnNob3dGaWVsZEVycm9yKHZhbGlkYXRpb25JbmZvLmZpZWxkLCB2YWxpZGF0aW9uSW5mby5lcnJvckNvZGUsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoLS1maWVsZHNMZWZ0IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RXJyb3JzKGFyVmFsaWRhdGlvbkVycm9ycywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkFmdGVyVmFsaWRhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGlzVmFsaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgRm9yRWFjaCh0aGlzLmRhdGFUb1NlcnZlciwgZmllbGQgPT4gZmllbGQudmFsaWRhdGUoZmllbGRWYWxpZGF0aW9uQ2FsbGJhY2ssIGZsYXRGb3JtRGF0YSkpO1xyXG4gICAgICAgIGZpZWxkVmFsaWRhdGlvbkNhbGxiYWNrKHsgZXJyb3JDb2RlOiBHU0Vycm9ycy5PSywgZmllbGQ6IG51bGwgfSk7IC8vIHRyaWdnZXIgYXQgbGVhc3Qgb25jZSB0byBlbnN1cmUgY2FsbGJhY2sgdHJpZ2dlclxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93RXJyb3JzKGFyRXJyb3JzOiBJRXJyb3JJbmZvW10sIGlzU2VydmVyRXJyb3I6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9zY3JlZW4uc2hvd0Vycm9ycyh0aGlzLCBhckVycm9ycywgaXNTZXJ2ZXJFcnJvcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzUmVxdWlyZWRGaWVsZChmaWVsZE5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIHZhciBmaWVsZE5hbWVzcGFjZSA9IGZpcnN0UGFydChmaWVsZE5hbWUsICcuJyk7XHJcbiAgICAgICAgdmFyIHNjaGVtYU5hbWUgPSBmaWVsZE5hbWVzcGFjZSA9PSAnZGF0YScgPyAnZGF0YVNjaGVtYScgOiAncHJvZmlsZVNjaGVtYSc7XHJcbiAgICAgICAgaWYgKGZpZWxkTmFtZXNwYWNlID09ICdkYXRhJyB8fCBmaWVsZE5hbWVzcGFjZSA9PSAncHJvZmlsZScpIHtcclxuICAgICAgICAgICAgZmllbGROYW1lID0gZmllbGROYW1lLnN1YnN0cmluZyhmaWVsZE5hbWVzcGFjZS5sZW5ndGggKyAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJlcXVpcmVkRmllbGRzID0gdGhpcy5yZXF1aXJlZEZpZWxkcygpO1xyXG4gICAgICAgIGlmIChyZXF1aXJlZEZpZWxkc1tmaWVsZE5hbWVdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGFwaURhdGEgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpOyAvLyBUT0RPIHNob3VsZG4ndCB0aGlzIGJlIGRlcGVuZGFudCBvbiBpcyBzY2hlbWFWYWxpZGF0ZWQ/XHJcblxyXG4gICAgICAgIGlmIChhcGlEYXRhLmdldFNjaGVtYSAmJiBhcGlEYXRhLmdldFNjaGVtYVtzY2hlbWFOYW1lXSAmJiBhcGlEYXRhLmdldFNjaGVtYVtzY2hlbWFOYW1lXS5maWVsZHMpIHtcclxuICAgICAgICAgICAgdmFyIHNjaGVtYSA9IGFwaURhdGEuZ2V0U2NoZW1hW3NjaGVtYU5hbWVdLmZpZWxkc1tmaWVsZE5hbWVdO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNjaGVtYSAmJiBzY2hlbWEucmVxdWlyZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHVibGljIGNoZWNrQXV0b1NraXAoZm9ybUNvbnRleHQ6IElGb3JtQ29udGV4dCwgY2FsbGJhY2s6IChjYW5Ta2lwOiBib29sZWFuKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmF1dG9Ta2lwIHx8IFNvbWUodGhpcy5fYXV0b1NraXBDb250YWluZXJzLCBjID0+ICFjLmNoZWNrQXV0b1NraXAoKSkpIHJldHVybiBjYWxsYmFjayhmYWxzZSk7XHJcblxyXG4gICAgICAgIHRoaXMudmFsaWRhdGUoY2FsbGJhY2spO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBmb3JtIGRhdGFcclxuXHJcbiAgICBwdWJsaWMgZ2V0Tm9ybWFsaXplZEZpZWxkTmFtZShmaWVsZE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKCFmaWVsZE5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZpZWxkTmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIHNwZWNpYWwgZmllbGQgb3IgbG9jYWwgZmllbGQsIHVzZSBhcy1pcy5cclxuICAgICAgICBjb25zdCBzcGVjaWFsRmllbGRzID0gdGhpcy5zcGVjaWFsRmllbGRzKCk7XHJcbiAgICAgICAgaWYgKHNwZWNpYWxGaWVsZHNbZmllbGROYW1lXSB8fCBmaWVsZE5hbWUuaW5kZXhPZignbG9jYWwuJykgPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZpZWxkTmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdldCBkYXRhIGFuZCBwcm9maWxlIG5hbWVzcGFjZS5cclxuICAgICAgICBjb25zdCBwcm9maWxlTmFtZXNwYWNlID0gdGhpcy5wcm9maWxlT2JqZWN0TmFtZSgpO1xyXG4gICAgICAgIGNvbnN0IGRhdGFOYW1lc3BhY2UgPSB0aGlzLmRhdGFPYmplY3ROYW1lKCk7XHJcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uTmFtZXNwYWNlID0gdGhpcy5zdWJzY3JpcHRpb25PYmplY3ROYW1lKCk7XHJcbiAgICAgICAgY29uc3QgcHJlZmVyZW5jZXNOYW1lc3BhY2UgPSB0aGlzLnByZWZlcmVuY2VzT2JqZWN0TmFtZSgpO1xyXG4gICAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbk5hbWVzcGFjZSA9IHRoaXMub3JnYW5pemF0aW9uT2JqZWN0TmFtZSgpO1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3Rlck5hbWVzcGFjZSA9IHRoaXMucmVxdWVzdGVyT2JqZWN0TmFtZSgpO1xyXG5cclxuICAgICAgICAvLyBEZWZhdWx0IHRvIHByb2ZpbGUgbmFtZXNwYWNlIGlmIG5vdCBwcm92aWRlZCBhbmQgbm90IHNwZWNpYWwgZmllbGQuXHJcbiAgICAgICAgY29uc3QgbmFtZVBhcnRzID0gZmllbGROYW1lLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgbGV0IG5zID0gbmFtZVBhcnRzLmxlbmd0aCA+IDEgPyBuYW1lUGFydHMuc2hpZnQoKSA6IHByb2ZpbGVOYW1lc3BhY2U7XHJcblxyXG4gICAgICAgIC8vIENoYW5nZSBcInByb2ZpbGUuZGF0YS5maWVsZFwiIHRvIFwiZGF0YS5maWVsZFwiLlxyXG4gICAgICAgIGlmIChucyA9PT0gcHJvZmlsZU5hbWVzcGFjZSAmJiBuYW1lUGFydHMubGVuZ3RoID4gMSAmJiBuYW1lUGFydHNbMF0gPT09IGRhdGFOYW1lc3BhY2UpIHtcclxuICAgICAgICAgICAgbnMgPSBuYW1lUGFydHMuc2hpZnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIERlZmF1bHQgdG8gcHJvZmlsZSBuYW1lc3BhY2UgaWYgdW5rbm93biBuYW1lc3BhY2Ugd2FzIHByb3ZpZGVkLlxyXG4gICAgICAgIGlmIChbZGF0YU5hbWVzcGFjZSwgcHJvZmlsZU5hbWVzcGFjZSwgc3Vic2NyaXB0aW9uTmFtZXNwYWNlLCBwcmVmZXJlbmNlc05hbWVzcGFjZSwgb3JnYW5pemF0aW9uTmFtZXNwYWNlLCByZXF1ZXN0ZXJOYW1lc3BhY2VdLmluZGV4T2YobnMpID09IC0xKSB7XHJcbiAgICAgICAgICAgIG5zID0gcHJvZmlsZU5hbWVzcGFjZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFB1c2ggbmFtZXNwYWNlIGJhY2sgb250byBhcnJheSBvZiBzdHJpbmdzLlxyXG4gICAgICAgIGlmIChucykge1xyXG4gICAgICAgICAgICBuYW1lUGFydHMudW5zaGlmdChucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZXR1cm4gc3RyaW5nLlxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRGaWVsZE5hbWUgPSBuYW1lUGFydHMuam9pbignLicpO1xyXG4gICAgICAgIHJldHVybiBub3JtYWxpemVkRmllbGROYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRGaWVsZChmaWVsZE5hbWU6IHN0cmluZywgYXJyYXlLZXlWYWx1ZT86IHN0cmluZykge1xyXG4gICAgICAgIHZhciByZXN1bHQ6IElGb3JtSW5wdXQ7XHJcblxyXG4gICAgICAgIGZpZWxkTmFtZSA9IHRoaXMuZ2V0Tm9ybWFsaXplZEZpZWxkTmFtZShmaWVsZE5hbWUpO1xyXG5cclxuICAgICAgICBTb21lKHRoaXMuZGF0YVRvU2VydmVyLCBmaWVsZCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZC5ub3JtYWxpemVkRmllbGROYW1lID09PSBmaWVsZE5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICghYXJyYXlLZXlWYWx1ZSB8fCBhcnJheUtleVZhbHVlID09PSBmaWVsZC5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEZvcm1JbnB1dF9DT05TVFMuYXJyYXlLZXlWYWx1ZUF0dHJpYnV0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmaWVsZDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc1NwZWNpYWxGaWVsZChmaWVsZDogSUZvcm1JbnB1dCkge1xyXG4gICAgICAgIHJldHVybiAhIXRoaXMuc3BlY2lhbEZpZWxkcygpW2ZpZWxkLmZpZWxkTmFtZV07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEZvcm1EYXRhKGlnbm9yZUhpZGRlbkNvbnRhaW5lcnM6IGJvb2xlYW4sIG5vcm1hbGl6ZUZpZWxkczogYm9vbGVhbiwgcmVwbGFjZUVtcHR5U3RyaW5nV2l0aE51bGw6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICAgIGxldCBvRGF0YTogSU1hcDxhbnk+ID0ge307XHJcblxyXG4gICAgICAgIC8vIEdldCBleGlzdGluZyBhY2NvdW50IGZvciBhcnJheSBtZXJnaW5nLlxyXG4gICAgICAgIGNvbnN0IGFjY291bnRJbmZvID0gdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKS5nZXRBY2NvdW50SW5mbyB8fCB7fTtcclxuICAgICAgICBjb25zdCB0cmFja0NyZWF0ZWRPYmpLZXlzOiB7IFtrZXk6IHN0cmluZ106IEFycmF5PHN0cmluZz4gfSA9IHt9O1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgZm9ybSBkYXRhLlxyXG4gICAgICAgIEZvckVhY2godGhpcy5kYXRhVG9TZXJ2ZXIsIGZpZWxkID0+IHtcclxuICAgICAgICAgICAgaWYgKCghZmllbGQuZGlzYWJsZWQoKSB8fCB0aGlzLmlzU3BlY2lhbEZpZWxkKGZpZWxkKSkgJiYgKCFpZ25vcmVIaWRkZW5Db250YWluZXJzIHx8ICFmaWVsZC5pc0luSGlkZGVuQ29udGFpbmVyKCkpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZEtleSA9IGZpZWxkLmdldE5hbWUobm9ybWFsaXplRmllbGRzLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IGdpZ3lhLnV0aWxzLm9iamVjdC5nZXRQcm9wZXJ0eUJ5U2VyaWFsaXplZE5hbWUoYWNjb3VudEluZm8sIGZpZWxkS2V5LCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcnJheVJvb3RGaWVsZCA9IGZpZWxkLmdldEFycmF5Um9vdCh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGxldCBmaWVsZFZhbHVlOiBzdHJpbmcgfCBPYmplY3QgPSBmaWVsZC5nZXRWYWx1ZShmaWVsZC5pbnN0YW5jZUVsZW1lbnQsIGN1cnJlbnRWYWx1ZSB8fCBvRGF0YVtmaWVsZEtleV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChmaWVsZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3VycmVudGx5IHdlIGRvIG5vdCBzdXBwb3J0IHRoZSBmaWVsZCdzIG9yaWdpbmFsIGRhdGEtdHlwZS5cclxuICAgICAgICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gZ2lneWEudXRpbHMub2JqZWN0LnBhcnNlVG9PYmplY3QoZmllbGRWYWx1ZS50b1N0cmluZygpKSB8fCBmaWVsZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFR5cGljYWwgcGF0aCBmb3Igbm9uLWFycmF5IGZpZWxkcy5cclxuICAgICAgICAgICAgICAgIGlmICghYXJyYXlSb290RmllbGQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGRWYWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdXNlZCB3aGVuIGdhdGhlcmluZyBwYXJhbWV0ZXJzIHRvIHNlbmQgdG8gdGhlIHNlcnZlci4gZG8gbm90IGNvbnZlcnQgZW1wdHkgYXJyYXkgdG8gbnVsbC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcGxhY2VFbXB0eVN0cmluZ1dpdGhOdWxsICYmIFN0cmluZyhmaWVsZFZhbHVlKSA9PT0gJycgJiYgZmllbGRWYWx1ZS5jb25zdHJ1Y3RvciAhPT0gQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvRGF0YVtmaWVsZEtleV0gPSBmaWVsZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQXJyYXkgcm9vdCBpcyBwcm92aWRlZCwgc3dpdGNoIHRvIGFycmF5IG1vZGUuIFZlcmlmeSBhbGwgcmVxdWlyZWQgYXR0cmlidXRlcyBhcmUgcHJvdmlkZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJyYXlLZXlGaWVsZCA9IGZpZWxkLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybUlucHV0X0NPTlNUUy5hcnJheUtleUZpZWxkQXR0cmlidXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJheUtleVZhbHVlID0gZmllbGQuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLmFycmF5S2V5VmFsdWVBdHRyaWJ1dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYXJyYXlLZXlGaWVsZCB8fCAhYXJyYXlLZXlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhcm4oJ0ZpZWxkIGlnbm9yZWQgYmVjYXVzZSBkYXRhLWFycmF5LXJvb3QgcHJvdmlkZWQgd2l0aG91dCBkYXRhLWFycmF5LWtleS1maWVsZCBhbmQgZGF0YS1hcnJheS1rZXktdmFsdWUnLCBmaWVsZEtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvRGF0YVthcnJheVJvb3RGaWVsZF0gfHwgb0RhdGFbYXJyYXlSb290RmllbGRdLmNvbnN0cnVjdG9yICE9PSBBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXJyOiBBcnJheTxhbnk+O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjb3VudEluZm8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyciA9IGdpZ3lhLnV0aWxzLm9iamVjdC5jbG9uZShnaWd5YS51dGlscy5vYmplY3QuZ2V0UHJvcGVydHlCeVNlcmlhbGl6ZWROYW1lKGFjY291bnRJbmZvLCBhcnJheVJvb3RGaWVsZCwgZmFsc2UpLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhcnIgfHwgYXJyLmNvbnN0cnVjdG9yICE9PSBBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb0RhdGFbYXJyYXlSb290RmllbGRdID0gYXJyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJheVJvb3Q6IEFycmF5PGFueT4gPSBvRGF0YVthcnJheVJvb3RGaWVsZF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgb3IgY3JlYXRlIG9iamVjdCBpbnNpZGUgb2YgYXJyYXkuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9iajtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Um9vdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvID0gYXJyYXlSb290W2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob1thcnJheUtleUZpZWxkXSAmJiBTdHJpbmcob1thcnJheUtleUZpZWxkXSkgPT09IGFycmF5S2V5VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG9iamVjdCB3YXMgZm91bmQgZnJvbSBzZXJ2ZXIsIHJlbW92ZSBvYmplY3QgZnJvbSBhcnJheSByb290IGFuZCByZS1jcmVhdGUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgbWVyZ2UgbG9naWMgcmVwbGFjZXMgZW50aXJlIG9iamVjdHMgYnV0IGtlZXBzIHRoZSBvdGhlciBlbGVtZW50cyBpbiB0aGUgYXJyYXkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRyYWNrQ3JlYXRlZE9iaktleXNbYXJyYXlSb290RmllbGRdIHx8IGdpZ3lhLnV0aWxzLmFycmF5LmluZGV4T2YodHJhY2tDcmVhdGVkT2JqS2V5c1thcnJheVJvb3RGaWVsZF0sIGFycmF5S2V5VmFsdWUpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5Um9vdC5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IG87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyBvYmplY3Qgb3IgYXBwZW5kIGtleSB0byBleGlzdGluZyBvYmplY3Qgb25seSBpZiBhIGZpZWxkIHZhbHVlIGlzIHByZXNlbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB3aGF0IGFsbG93cyBhbiBvYmplY3QgdG8gYmUgZGVsZXRlZCBmcm9tIHRoZSBhcnJheS5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFthcnJheUtleUZpZWxkXTogYXJyYXlLZXlWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJheVJvb3QucHVzaChvYmopO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdHJhY2tDcmVhdGVkT2JqS2V5c1thcnJheVJvb3RGaWVsZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFja0NyZWF0ZWRPYmpLZXlzW2FycmF5Um9vdEZpZWxkXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tDcmVhdGVkT2JqS2V5c1thcnJheVJvb3RGaWVsZF0ucHVzaChhcnJheUtleVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHZhbHVlIHRvIG9iamVjdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ViS2V5ID0gZmllbGRLZXkuc3Vic3RyKGFycmF5Um9vdEZpZWxkLmxlbmd0aCArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmpbc3ViS2V5XSA9IGZpZWxkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG9EYXRhID0gdGhpcy5wb3N0UHJvY2Vzc0Zvcm1EYXRhKG9EYXRhKTtcclxuXHJcbiAgICAgICAgLy8gVGhlIGZvcm0gZGF0YSBtYXkgYmUgYSBtaXggb2YgZmxhdHRlbmVkIGFuZCB1bmZsYXR0ZW5lZCBkYXRhLiBFbnN1cmUgaXQgaXMgdW5mbGF0dGVuZWQuXHJcbiAgICAgICAgb0RhdGEgPSBnaWd5YS51dGlscy5vYmplY3QudW5mbGF0dGVuKG9EYXRhKTtcclxuXHJcbiAgICAgICAgLy8gRmlsdGVyIHRoZSBkYXRhLlxyXG4gICAgICAgIEZvckVhY2godGhpcy5maWx0ZXJzLCB3aWQgPT4ge1xyXG4gICAgICAgICAgICBvRGF0YSA9IHdpZC5maWx0ZXJPdXRXaWRnZXRzVG9TZW5kKG9EYXRhKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG9EYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcG9zdFByb2Nlc3NGb3JtRGF0YShvRGF0YSkge1xyXG4gICAgICAgIGxldCByZXMgPSBnaWd5YS51dGlscy5vYmplY3QuY2xvbmUob0RhdGEpO1xyXG4gICAgICAgIHJlcyA9IHBvc3RQcm9jZXNzRm9ybShyZXMsIHRoaXMuZ2V0U2NoZW1hT2YobmFtZXNwYWNlKSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RmxhdEZvcm1EYXRhKGlnbm9yZUhpZGRlbkNvbnRhaW5lcnM6IGJvb2xlYW4sIG5vcm1hbGl6ZUZpZWxkczogYm9vbGVhbiwgcmVwbGFjZUVtcHR5U3RyaW5nV2l0aE51bGw6IGJvb2xlYW4gPSBmYWxzZSk6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0ge1xyXG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5vYmplY3QuZmxhdHRlbih0aGlzLmdldEZvcm1EYXRhKGlnbm9yZUhpZGRlbkNvbnRhaW5lcnMsIG5vcm1hbGl6ZUZpZWxkcywgcmVwbGFjZUVtcHR5U3RyaW5nV2l0aE51bGwpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3BlY2lhbEZpZWxkcygpIHtcclxuICAgICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN1YnNjcmlwdGlvbk9iamVjdE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuICdzdWJzY3JpcHRpb25zJztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGF0YU9iamVjdE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuICdkYXRhJztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcHJvZmlsZU9iamVjdE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuICdwcm9maWxlJztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcHJlZmVyZW5jZXNPYmplY3ROYW1lKCkge1xyXG4gICAgICAgIHJldHVybiAncHJlZmVyZW5jZXMnO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvcmdhbml6YXRpb25PYmplY3ROYW1lKCkge1xyXG4gICAgICAgIHJldHVybiAnb3JnYW5pemF0aW9uJztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVxdWVzdGVyT2JqZWN0TmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gJ3JlcXVlc3Rlcic7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHF1ZXJ5U3RyaW5nVG9TdWJtaXRQYXJhbU1hcCgpIHtcclxuICAgICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlZmF1bHRTdWJtaXRQYXJhbXMoKSB7XHJcbiAgICAgICAgY29uc3QgcXNQYXJhbXMgPSB0aGlzLnF1ZXJ5U3RyaW5nVG9TdWJtaXRQYXJhbU1hcCgpO1xyXG4gICAgICAgIGNvbnN0IHJldCA9IHt9O1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHFzUGFyYW1zKS5mb3JFYWNoKHAgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzdWJtaXRQYXJhbSA9IHFzUGFyYW1zW3BdO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGdpZ3lhLnV0aWxzLlVSTC5nZXRQYXJhbVZhbHVlRnJvbVVSTChwLCBsb2NhdGlvbi5zZWFyY2gsIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0W3N1Ym1pdFBhcmFtXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gc3VibWl0XHJcblxyXG4gICAgcHVibGljIHN1Ym1pdEFwaSgpOiAocGFyYW1zOiBJU2NyZWVuU2V0UGFyYW1zLCBkYXRhLCBvcHRpb25zLCBkZWZhdWx0UGFyYW1zKSA9PiB2b2lkIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoTk9UX0lNUExFTUVOVEVEKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgX2dldFN1Ym1pdEFwaVBhcmFtcyhwYXJhbXM6IElTY3JlZW5TZXRQYXJhbXMpOiBJU2NyZWVuU2V0UGFyYW1zIHtcclxuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0LnJlbW92ZVVuZGVmaW5lZChwYXJhbXMpIGFzIElTY3JlZW5TZXRQYXJhbXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBlcmZvcm1TdWJtaXQoZm9ybURhdGE6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHN1Ym1pdEFwaSA9IHRoaXMuc3VibWl0QXBpKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGV4dHJhRXZlbnREYXRhID0gdGhpcy5fc2NyZWVuU2V0LmRhdGEuZXh0cmFFdmVudERhdGE7XHJcbiAgICAgICAgaWYgKHRoaXMuX3JlbWVtYmVyTWUpIHtcclxuICAgICAgICAgICAgZXh0cmFFdmVudERhdGEucmVtZW1iZXJNZSA9IEJvb2xlYW4odGhpcy5fcmVtZW1iZXJNZS5nZXRWYWx1ZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJlbWVtYmVyID0gZXh0cmFFdmVudERhdGEucmVtZW1iZXJNZTtcclxuXHJcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRvIHVzZSB0aGUgbGF0ZXN0IHJlZ3Rva2VuIGlmIGl0IHdhcyBzZXQgYnkgYSBjaGlsZCBzY3JlZW5zZXRcclxuICAgICAgICBpZiAodGhpcy5fc2NyZWVuU2V0LmRhdGEucmVnVG9rZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5yZWdUb2tlbiA9IHRoaXMuX3NjcmVlblNldC5kYXRhLnJlZ1Rva2VuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYXBpUGFyYW1zID0gdGhpcy5fZ2V0U3VibWl0QXBpUGFyYW1zKGdpZ3lhLnV0aWxzLm9iamVjdC5jbG9uZSh0aGlzLl9zY3JlZW5TZXQucGFyYW1zLCB0cnVlKSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NjcmVlbi5kaW1TY3JlZW4oKTtcclxuXHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgZG9udEhhbmRsZVNjcmVlblNldDogdHJ1ZSxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IHJlc3BvbnNlID0+IHRoaXMub25BZnRlclN1Ym1pdChyZXNwb25zZSksXHJcbiAgICAgICAgICAgIHJlbWVtYmVyOiByZW1lbWJlcixcclxuICAgICAgICAgICAgc2Vzc2lvbkV4cGlyYXRpb246XHJcbiAgICAgICAgICAgICAgICByZW1lbWJlciAmJiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLnJlbWVtYmVyU2Vzc2lvbkV4cGlyYXRpb25cclxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMuX3NjcmVlblNldC5wYXJhbXMucmVtZW1iZXJTZXNzaW9uRXhwaXJhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5fc2NyZWVuLl9zY3JlZW5TZXQucGFyYW1zLnNlc3Npb25FeHBpcmF0aW9uLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHN1Ym1pdEFwaShhcGlQYXJhbXMsIGZvcm1EYXRhLCBvcHRpb25zLCB0aGlzLmRlZmF1bHRTdWJtaXRQYXJhbXMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN1Ym1pdCgpIHtcclxuXHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uQ2xpY2tlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vI3JlZ2lvbiAtIGNvZGUgdG8gYmUgcmVtb3ZlZDogdGhlIGZvbGxvd2luZyBjb2RlIGJsb2NrIHNob3VsZCBiZSByZW1vdmVkIHdoZW4gdGhlIG9sZCBwaG90byB1cGxvYWQgd2lkZ2V0IHdpbGwgbm90IGJlIHN1cHBvcnRlZCBhbG9uZyB3aXRoIEJhc2VTZXJ2ZXJXaWRnZXRcclxuICAgICAgICB2YXIgd2FpdEZvclNlcnZlclJlc3BvbnNlID0gU29tZSh0aGlzLl9zZXJ2ZXJXaWRnZXRzLCB3ID0+IHtcclxuICAgICAgICAgICAgaWYgKHcuc2VydmVyU3RhdGUgPT09IFNlcnZlclN0YXRlcy5JblByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICB3LnJ1bk9uU2VydmVyRG9uZSh0aGlzLnN1Ym1pdEhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh3YWl0Rm9yU2VydmVyUmVzcG9uc2UpIHJldHVybjtcclxuICAgICAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVEeW5hbWljRmllbGRzKCk7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZShpc1ZhbGlkID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkFmdGVyVmFsaWRhdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAoaXNWYWxpZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDYXB0Y2hhVG9rZW4oKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNhcHRjaGFUb2tlbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIG9iamVjdCB0byBwYXNzIGFzIHBhcmFtcy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGFGb3JTZXJ2ZXIgPSB0aGlzLmdldEZvcm1EYXRhKHRydWUsIHRydWUsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBmbGF0IGZvcm0gZGF0YSBmb3IgZXZlbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZsYXRGb3JtRGF0YUZvckV2ZW50ID0gdGhpcy5nZXRGbGF0Rm9ybURhdGEodHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZsYXRGb3JtRGF0YUZvckV2ZW50WydwYXNzd29yZCddICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZsYXRGb3JtRGF0YUZvckV2ZW50WydwYXNzd29yZCddOyAvLyBtZWFuaW5nbGVzcyBpbiB0ZXJtcyBvZiBzZWN1cml0eSBidXQgbGVzcyBzaG9ja2luZyBmb3IgY2xpZW50cyA6KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBldmVudDogSUJlZm9yZVN1Ym1pdEV2ZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnYmVmb3JlU3VibWl0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcmVlbjogdGhpcy5fc2NyZWVuLklELFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybTogdGhpcy5iaW5kSUQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlOiB0aGlzLl9zY3JlZW5TZXQuZ2V0UHJvZmlsZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy5fc2NyZWVuU2V0LmdldFNjaGVtYURhdGEoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZlcmVuY2VzOiB0aGlzLl9zY3JlZW5TZXQuZ2V0UHJlZmVyZW5jZXMoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnM6IHRoaXMuX3NjcmVlblNldC5nZXRTdWJTY3JpcHRpb25zKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YTogZmxhdEZvcm1EYXRhRm9yRXZlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50UmVzdWx0ID0gdGhpcy5fc2NyZWVuLmRpc3BhdGNoRXZlbnQoJ2JlZm9yZVN1Ym1pdCcsIGV2ZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBzdWJtaXQgd2FzIGNhbmNlbGxlZCBiZWZvcmUgcHJvY2VlZGluZy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50UmVzdWx0ICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VibWl0RXZlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnc3VibWl0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JlZW46IHRoaXMuX3NjcmVlbi5JRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtOiB0aGlzLmJpbmRJRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SW5mbzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlOiB0aGlzLl9zY3JlZW5TZXQuZ2V0UHJvZmlsZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLl9zY3JlZW5TZXQuZ2V0U2NoZW1hRGF0YSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJlbmNlczogdGhpcy5fc2NyZWVuU2V0LmdldFByZWZlcmVuY2VzKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnM6IHRoaXMuX3NjcmVlblNldC5nZXRTdWJTY3JpcHRpb25zKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtTW9kZWw6IGZvcm1EYXRhRm9yU2VydmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3VibWl0UmVzdWx0ID0gdGhpcy5fc2NyZWVuLmRpc3BhdGNoRXZlbnQoJ3N1Ym1pdCcsIHN1Ym1pdEV2ZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhcHRjaGFUb2tlbiA9PT0gJ3N0cmluZycpIGZvcm1EYXRhRm9yU2VydmVyWydjYXB0Y2hhVG9rZW4nXSA9IGNhcHRjaGFUb2tlbjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VibWl0UmVzdWx0ICYmIHR5cGVvZiBzdWJtaXRSZXN1bHQudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1pdFJlc3VsdC50aGVuKHggPT4gdGhpcy5wZXJmb3JtU3VibWl0KGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbZm9ybURhdGFGb3JTZXJ2ZXIsIHhdKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1TdWJtaXQoZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtmb3JtRGF0YUZvclNlcnZlciwgc3VibWl0UmVzdWx0XSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsbCBvdGhlciBleGNlcHRpb25zIGdldHMgc3dhbGxvd2VkLCBhbHNvIGlmIGl0IGhhcHBlbmVkIGZvciBleGFtcGxlIGluc2lkZSBmb3JtJ3Mgb25BZnRlclN1Ym1pdCBtZXRob2QgKCEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5lcnJvcignZXhjZXB0aW9uIHdoZW4gc3VibWl0dGluZyBhIGZvcm0nLCB7ZSwgZm9ybTogdGhpcy5naWd5YUNsYXNzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlICYmIGUubWVzc2FnZSA9PT0gJ2NhcHRjaGFOZWVkZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JJbmZvOiBJRXJyb3JJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogdGhpcy5fc2NyZWVuU2V0LmdldFRleHQoJ2xvZ2luX2NhcHRjaGFfZXJyb3InKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLlZBTElEQVRJT05fRVJST1IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JGbGFnczogZS5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9ycyhbZXJyb3JJbmZvXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByaXZhdGUgZ2V0Q2FwdGNoYVRva2VuKCk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgY29uc3QgY2FwdGNoYXMgPSB0aGlzLl9zY3JlZW4uX2NhcHRjaGFzLmZpbHRlcihjYXB0Y2hhID0+IEJvb2xlYW4oY2FwdGNoYSkgJiYgIWNhcHRjaGEuaXNIaWRkZW4oKSk7XHJcblxyXG4gICAgICAgIHJldHVybiBjYXB0Y2hhcy5sZW5ndGggPyBjYXB0Y2hhc1swXS5nZXRUb2tlbigpIDogUHJvbWlzZS5yZXNvbHZlKHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uQWZ0ZXJTdWJtaXQocmVzcG9uc2UpIHtcclxuICAgICAgICB0aGlzLl9zY3JlZW4udW5kaW1TY3JlZW4oKTtcclxuXHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBHU0Vycm9ycy5PSykge1xyXG4gICAgICAgICAgICBnaWd5YS51dGlscy5ET00ucmVtb3ZlQ2xhc3NGcm9tRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCwgRm9ybV9DT05TVFMuZm9ybUVycm9yQ2xhc3MpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCwgRm9ybV9DT05TVFMuZm9ybUVycm9yQ2xhc3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fc2NyZWVuU2V0Lm9uU2NyZWVuUmVzcG9uc2UocmVzcG9uc2UsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaGFzQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2lneWEubG9nZ2VyLmdyb3VwKGBmb3JtIGNvbmRpdGlvbmFsIGF0dHJpYnV0ZXMgZXZhbHVhdGlvbmApLmVuZFdoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBzdXBlci5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xyXG5cclxuICAgICAgICAgICAgRm9yRWFjaCh0aGlzLl9keW5hbWljSW5wdXRzLCBkeW5hbWljSW5wdXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgZHluYW1pY0lucHV0LmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgRm9yRWFjaCh0aGlzLl93aWRnZXRzLCB3aWRnZXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgd2lkZ2V0LmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgRm9yRWFjaCh0aGlzLl9pbnB1dHMsIGlucHV0ID0+IHtcclxuICAgICAgICAgICAgICAgIGlucHV0LmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgRm9yRWFjaCh0aGlzLl9wYXNzd29yZElucHV0cywgcGFzc3dvcmRJbnB1dCA9PiB7XHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZElucHV0LmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgRm9yRWFjaCh0aGlzLl9wYXNzd29yZFJldHlwZXMsIHBhc3N3b3JkUmV0eXBlID0+IHtcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkUmV0eXBlLmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgRm9yRWFjaCh0aGlzLl9zZWNyZXRRdWVzdGlvbnMsIHNlYyA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZWMuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBGb3JFYWNoKHRoaXMuX2F1dG9Ta2lwQ29udGFpbmVycywgYXV0byA9PiB7XHJcbiAgICAgICAgICAgICAgICBhdXRvLmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgRm9yRWFjaCh0aGlzLl9zZXJ2ZXJXaWRnZXRzLCBzZXJ2ID0+IHtcclxuICAgICAgICAgICAgICAgIHNlcnYuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9yZW1lbWJlck1lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW1lbWJlck1lLmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9yaWdpbmFsU3VjY2Vzc1NjcmVlbiA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtX0NPTlNUUy5zdWNjZXNzU2NyZWVuKTtcclxuICAgICAgICB0aGlzLnN1Y2Nlc3NTY3JlZW4gPSB0aGlzLl9zY3JlZW5TZXQuY2hvb3NlTmV4dFNjcmVlbih0aGlzLm9yaWdpbmFsU3VjY2Vzc1NjcmVlbik7XHJcblxyXG4gICAgICAgIHRoaXMuYXV0b1NraXAgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybV9DT05TVFMuYXV0b1NraXBGbGFnKSA9PSAndHJ1ZSc7XHJcbiAgICAgICAgdGhpcy5hdXRvU2tpcFNjcmVlbiA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtX0NPTlNUUy5hdXRvU2tpcFNjcmVlbikgfHwgdGhpcy5zdWNjZXNzU2NyZWVuO1xyXG4gICAgICAgIHRoaXMuc2NyZWVuU2V0U2tpcHBlZFNjcmVlbiA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtX0NPTlNUUy5zY3JlZW5TZXRTa2lwcGVkU2NyZWVuKSB8fCB0aGlzLnN1Y2Nlc3NTY3JlZW47XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhhc0NvbmRpdGlvbmFsQXR0cmlidXRlcygpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoc3VwZXIuaGFzQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCkpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICB2YXIgY2hpbGRyZW46IEFycmF5PFRlbXBsYXRlRWxlbWVudDxIVE1MRGl2RWxlbWVudD4+ID0gW10uY29uY2F0KFxyXG4gICAgICAgICAgICB0aGlzLl93aWRnZXRzLFxyXG4gICAgICAgICAgICB0aGlzLl9pbnB1dHMsXHJcbiAgICAgICAgICAgIHRoaXMuX2R5bmFtaWNJbnB1dHMsXHJcbiAgICAgICAgICAgIHRoaXMuX3Bhc3N3b3JkSW5wdXRzLFxyXG4gICAgICAgICAgICB0aGlzLl9wYXNzd29yZFJldHlwZXMsXHJcbiAgICAgICAgICAgIHRoaXMuX3NlY3JldFF1ZXN0aW9ucyxcclxuICAgICAgICAgICAgdGhpcy5fYXV0b1NraXBDb250YWluZXJzLFxyXG4gICAgICAgICAgICB0aGlzLl9zZXJ2ZXJXaWRnZXRzLFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5hcnJheS5zb21lKGNoaWxkcmVuLCBjaGlsZCA9PiBjaGlsZC5oYXNDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCkge1xyXG4gICAgICAgIHN1cGVyLnJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCk7XHJcblxyXG4gICAgICAgIEZvckVhY2godGhpcy5fZHluYW1pY0lucHV0cywgZHluYW1pY0lucHV0ID0+IHtcclxuICAgICAgICAgICAgZHluYW1pY0lucHV0LnJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIEZvckVhY2godGhpcy5fd2lkZ2V0cywgd2lkZ2V0ID0+IHtcclxuICAgICAgICAgICAgd2lkZ2V0LnJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIEZvckVhY2godGhpcy5faW5wdXRzLCBpbnB1dCA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0LnJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIEZvckVhY2godGhpcy5fcGFzc3dvcmRJbnB1dHMsIHBhc3N3b3JkSW5wdXQgPT4ge1xyXG4gICAgICAgICAgICBwYXNzd29yZElucHV0LnJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIEZvckVhY2godGhpcy5fcGFzc3dvcmRSZXR5cGVzLCBwYXNzd29yZFJldHlwZSA9PiB7XHJcbiAgICAgICAgICAgIHBhc3N3b3JkUmV0eXBlLnJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIEZvckVhY2godGhpcy5fc2VjcmV0UXVlc3Rpb25zLCBzZWMgPT4ge1xyXG4gICAgICAgICAgICBzZWMucmVzZXRMYXN0Q29uZGl0aW9uYWxWYWx1ZXMoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgRm9yRWFjaCh0aGlzLl9hdXRvU2tpcENvbnRhaW5lcnMsIGF1dG8gPT4ge1xyXG4gICAgICAgICAgICBhdXRvLnJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIEZvckVhY2godGhpcy5fc2VydmVyV2lkZ2V0cywgc2VydiA9PiB7XHJcbiAgICAgICAgICAgIHNlcnYucmVzZXRMYXN0Q29uZGl0aW9uYWxWYWx1ZXMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJV2lkZ2V0VHlwZSwgSVdpZGdldCwgQmFzZVdpZGdldCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZVdpZGdldCc7XHJcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XHJcbmltcG9ydCB7IElNYXAgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUZvcm1XaWRnZXRUeXBlPFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4gZXh0ZW5kcyBJV2lkZ2V0VHlwZTxUPiB7XHJcbiAgICBuZXcgKGZvcm06IEJhc2VGb3JtLCBlbDogSFRNTEVsZW1lbnQpOiBJRm9ybVdpZGdldDtcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIElGb3JtV2lkZ2V0IGV4dGVuZHMgSVdpZGdldCB7XHJcbiAgICBfZm9ybTogQmFzZUZvcm07XHJcbiAgICBnZXRGaWVsZHNOYW1lcygpOiBzdHJpbmdbXTtcclxuICAgIHVwZGF0ZSgpOiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQmFzZUZvcm1XaWRnZXQ8VCBleHRlbmRzIEhUTUxFbGVtZW50PiBleHRlbmRzIEJhc2VXaWRnZXQ8VD4gaW1wbGVtZW50cyBJRm9ybVdpZGdldCB7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgX2Zvcm06IEJhc2VGb3JtLCBlbDogVCwgcmVzZXRDU1M/OiBib29sZWFuKSB7XHJcbiAgICAgICAgc3VwZXIoZWwsIF9mb3JtLCBfZm9ybS5fc2NyZWVuLCByZXNldENTUyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgRm9ybVdpZGdldHNMaWJyYXJ5OiBJTWFwPElGb3JtV2lkZ2V0VHlwZTxIVE1MRWxlbWVudD4+ID0ge307XHJcblxyXG4gICAgc3RhdGljIGFkZFdpZGdldFRvTGlicmFyeSh3aWRnZXQ6IElGb3JtV2lkZ2V0VHlwZTxIVE1MRWxlbWVudD4pIHtcclxuICAgICAgICBCYXNlRm9ybVdpZGdldC5Gb3JtV2lkZ2V0c0xpYnJhcnlbd2lkZ2V0LkNPTlNUUy5zZWxlY3Rvcl0gPSB3aWRnZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlZ2lzdGVyV2lkZ2V0cyhwYXJlbnQ6IEJhc2VGb3JtKSB7XHJcbiAgICAgICAgcmV0dXJuIEJhc2VXaWRnZXQucmVnaXN0ZXJUeXBlZFdpZGdldHMocGFyZW50LnRlbXBsYXRlRWxlbWVudCwgQmFzZUZvcm1XaWRnZXQuRm9ybVdpZGdldHNMaWJyYXJ5LCAodHlwZSwgZWwpID0+IG5ldyB0eXBlKHBhcmVudCwgZWwpKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmVnaXN0ZXJEeW5hbWljV2lkZ2V0cyhwYXJlbnQ6IEJhc2VGb3JtLCByb290RWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIEJhc2VXaWRnZXQucmVnaXN0ZXJUeXBlZFdpZGdldHMocm9vdEVsLCBCYXNlRm9ybVdpZGdldC5Gb3JtV2lkZ2V0c0xpYnJhcnksICh0eXBlLCBlbCkgPT4gbmV3IHR5cGUocGFyZW50LCBlbCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRGaWVsZHNOYW1lcygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoKTogdm9pZCB7fVxyXG59XHJcbiIsImltcG9ydCB7IElXaWRnZXRUeXBlLCBJV2lkZ2V0LCBCYXNlV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlV2lkZ2V0JztcclxuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xyXG5pbXBvcnQge0ZvckVhY2gsIElNYXB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU2NyZWVuV2lkZ2V0VHlwZTxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+IGV4dGVuZHMgSVdpZGdldFR5cGU8VD4ge1xyXG4gICAgbmV3IChzY3JlZW46IFNjcmVlbiwgZWw6IEhUTUxFbGVtZW50KTogSVNjcmVlbldpZGdldDtcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIElTY3JlZW5XaWRnZXQgZXh0ZW5kcyBJV2lkZ2V0IHt9XHJcbmV4cG9ydCBjbGFzcyBCYXNlU2NyZWVuV2lkZ2V0PFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4gZXh0ZW5kcyBCYXNlV2lkZ2V0PFQ+IGltcGxlbWVudHMgSVNjcmVlbldpZGdldCB7XHJcbiAgICBwdWJsaWMgZGVwcz86IEFycmF5PElXaWRnZXRUeXBlPEhUTUxFbGVtZW50Pj47XHJcbiAgICBwcml2YXRlIF9jaGlsZFdpZGdldHM6IEFycmF5PElTY3JlZW5XaWRnZXQ+ID0gW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoX3NjcmVlbjogU2NyZWVuLCBlbDogVCwgcmVzZXRDU1M/OiBib29sZWFuKSB7XHJcbiAgICAgICAgc3VwZXIoZWwsIF9zY3JlZW4sIF9zY3JlZW4sIHJlc2V0Q1NTKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xyXG4gICAgICAgIHN1cGVyLnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xyXG4gICAgICAgIHRoaXMudW5saW5rV2lkZ2V0cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCB1bmxpbmtXaWRnZXRzKCkge1xyXG4gICAgICAgIEZvckVhY2godGhpcy5fY2hpbGRXaWRnZXRzLCB3aWRnZXQgPT4ge1xyXG4gICAgICAgICAgICB3aWRnZXQudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fY2hpbGRXaWRnZXRzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgU2NyZWVuV2lkZ2V0c0xpYnJhcnk6IElNYXA8SVNjcmVlbldpZGdldFR5cGU8SFRNTEVsZW1lbnQ+PiA9IHt9O1xyXG5cclxuICAgIHByb3RlY3RlZCBsaW5rV2lkZ2V0cygpIHtcclxuICAgICAgICAvLyBXaWRnZXRzIHRoYXQgcmVuZGVyIGh0bWwgaW5zaWRlIHRoZW0sIG11c3QgcmVnaXN0ZXIgaW50ZXJuYWwgd2lkZ2V0c1xyXG4gICAgICAgIGlmICghdGhpcy5fc2NyZWVuIHx8ICF0aGlzLl9zY3JlZW4uaW5zdGFuY2VFbGVtZW50KSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5fY2hpbGRXaWRnZXRzID1cclxuICAgICAgICAgICAgQmFzZVNjcmVlbldpZGdldC5yZWdpc3RlckR5bmFtaWNXaWRnZXRzKHRoaXMuX3NjcmVlbiwgdGhpcy5pbnN0YW5jZUVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGNoaWxkV2lkZ2V0ID0+ICF0aGlzLmRlcHMgfHwgIXRoaXMuZGVwcy5zb21lKGRlcCA9PiBjaGlsZFdpZGdldCBpbnN0YW5jZW9mIGRlcCkpO1xyXG5cclxuICAgICAgICBGb3JFYWNoKHRoaXMuX2NoaWxkV2lkZ2V0cywgd2lkZ2V0ID0+IHtcclxuICAgICAgICAgICAgd2lkZ2V0LmxpbmtJbnN0YW5jZUVsZW1lbnQodGhpcy5fc2NyZWVuLmluc3RhbmNlRWxlbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFkZFdpZGdldFRvTGlicmFyeSh3aWRnZXQ6IElTY3JlZW5XaWRnZXRUeXBlPEhUTUxFbGVtZW50Pikge1xyXG4gICAgICAgIEJhc2VTY3JlZW5XaWRnZXQuU2NyZWVuV2lkZ2V0c0xpYnJhcnlbd2lkZ2V0LkNPTlNUUy5zZWxlY3Rvcl0gPSB3aWRnZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlZ2lzdGVyV2lkZ2V0cyhwYXJlbnQ6IFNjcmVlbikge1xyXG4gICAgICAgIHJldHVybiBCYXNlV2lkZ2V0LnJlZ2lzdGVyVHlwZWRXaWRnZXRzKHBhcmVudC50ZW1wbGF0ZUVsZW1lbnQsIEJhc2VTY3JlZW5XaWRnZXQuU2NyZWVuV2lkZ2V0c0xpYnJhcnksICh0eXBlLCBlbCkgPT4gbmV3IHR5cGUocGFyZW50LCBlbCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZWdpc3RlckR5bmFtaWNXaWRnZXRzKHBhcmVudDogU2NyZWVuLCByb290RWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIEJhc2VXaWRnZXQucmVnaXN0ZXJUeXBlZFdpZGdldHMocm9vdEVsLCBCYXNlU2NyZWVuV2lkZ2V0LlNjcmVlbldpZGdldHNMaWJyYXJ5LCAodHlwZSwgZWwpID0+IG5ldyB0eXBlKHBhcmVudCwgZWwpKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplLCBGb3JFYWNoIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XHJcbmltcG9ydCB7IEJhc2VGb3JtV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybVdpZGdldCc7XHJcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XHJcblxyXG5leHBvcnQgZW51bSBTZXJ2ZXJTdGF0ZXMge1xyXG4gICAgTm90U3RhcnRlZCxcclxuICAgIEluUHJvZ3Jlc3MsXHJcbiAgICBEb25lLFxyXG4gICAgRXJyb3IsXHJcbn1cclxuRGVlcEZyZWV6ZShTZXJ2ZXJTdGF0ZXMpO1xyXG5leHBvcnQgaW50ZXJmYWNlIFNlcnZlckRvbmVDYWxsYmFjayBleHRlbmRzIEZ1bmN0aW9uIHtcclxuICAgIChzdGF0dXM6IFNlcnZlclN0YXRlcywgd2lkZ2V0OiBCYXNlU2VydmVyV2lkZ2V0PGFueT4pOiB2b2lkO1xyXG59XHJcbmV4cG9ydCBjbGFzcyBCYXNlU2VydmVyV2lkZ2V0PFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4gZXh0ZW5kcyBCYXNlRm9ybVdpZGdldDxUPiB7XHJcbiAgICBwcml2YXRlIG5leHRTZXJ2ZXJRdWVyeUlkID0gMDtcclxuICAgIHB1YmxpYyBzZXJ2ZXJTdGF0ZSA9IFNlcnZlclN0YXRlcy5Ob3RTdGFydGVkO1xyXG4gICAgcHJpdmF0ZSBjYWxsYmFja3MgPSBuZXcgQXJyYXk8U2VydmVyRG9uZUNhbGxiYWNrPigpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGZvcm06IEJhc2VGb3JtLCBlbDogVCwgcmVzZXRDU1M/OiBib29sZWFuKSB7XHJcbiAgICAgICAgc3VwZXIoZm9ybSwgZWwsIHJlc2V0Q1NTKTtcclxuXHJcbiAgICAgICAgZm9ybS5fc2VydmVyV2lkZ2V0cy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGFydFNlcnZlclF1ZXJ5KCkge1xyXG4gICAgICAgIHRoaXMuc2VydmVyU3RhdGUgPSBTZXJ2ZXJTdGF0ZXMuSW5Qcm9ncmVzcztcclxuXHJcbiAgICAgICAgcmV0dXJuICsrdGhpcy5uZXh0U2VydmVyUXVlcnlJZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25TZXJ2ZXJRdWVyeUVuZDxEPihzZXJ2ZXJRdWVyeUlkOiBudW1iZXIsIG5ld1N0YXRlOiBTZXJ2ZXJTdGF0ZXMsIGRhdGE/OiBEKSB7XHJcbiAgICAgICAgaWYgKHNlcnZlclF1ZXJ5SWQgPT09IHRoaXMubmV4dFNlcnZlclF1ZXJ5SWQpIHRoaXMuc2VydmVyUXVlcnlEb25lKG5ld1N0YXRlLCBkYXRhKTtcclxuICAgICAgICBlbHNlIHRoaXMud2FybignSWdub3Jpbmcgc2VydmVyIHJlc3BvbnNlICMnICsgc2VydmVyUXVlcnlJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlcnZlclF1ZXJ5RG9uZTxEPihuZXdTdGF0ZTogU2VydmVyU3RhdGVzLCBkYXRhPzogRCkge1xyXG4gICAgICAgIHRoaXMuc2VydmVyU3RhdGUgPSBuZXdTdGF0ZTtcclxuXHJcbiAgICAgICAgRm9yRWFjaCh0aGlzLmNhbGxiYWNrcywgY2FsbGJhY2sgPT4gY2FsbGJhY2sobmV3U3RhdGUsIHRoaXMpKTtcclxuICAgICAgICB0aGlzLmNhbGxiYWNrcyA9IG5ldyBBcnJheTxTZXJ2ZXJEb25lQ2FsbGJhY2s+KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJ1bk9uU2VydmVyRG9uZShjYWxsYmFjazogU2VydmVyRG9uZUNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VydmVyU3RhdGUgIT09IFNlcnZlclN0YXRlcy5JblByb2dyZXNzKSBjYWxsYmFjayh0aGlzLnNlcnZlclN0YXRlLCB0aGlzKTtcclxuICAgICAgICBlbHNlIHRoaXMuY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERlZXBGcmVlemUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcclxuaW1wb3J0IHsgQmFzZVNlcnZlcldpZGdldCwgU2VydmVyU3RhdGVzIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlU2VydmVyV2lkZ2V0JztcclxuaW1wb3J0IHsgQmFzZUZvcm0gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtJztcclxuXHJcbnZhciBOT1RfSU1QTEVNRU5URUQgPSAnTm90IEltcGxlbWVudGVkJztcclxuZXhwb3J0IHZhciBCYXNlVXBsb2FkV2lkZ2V0X0NPTlNUUyA9IHtcclxuICAgIHNldERpbWVudGlvbnNEZWxheTogNTAwLFxyXG4gICAgdXBsb2FkQ2hlY2tJbnRlcnZhbDogNTAwLFxyXG4gICAgdXBsb2FkaW5nOiAnZGF0YS11cGxvYWQtc3RhdHVzJyxcclxuICAgIHVwbG9hZEZvcm06ICdzY3JlZW5TZXRVcGxvYWRGb3JtJyxcclxufTtcclxuRGVlcEZyZWV6ZShCYXNlVXBsb2FkV2lkZ2V0X0NPTlNUUyk7XHJcbnZhciBuZXh0R2VuZXJhdGVkSWQgPSAwO1xyXG5leHBvcnQgY2xhc3MgQmFzZVVwbG9hZFdpZGdldDxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+IGV4dGVuZHMgQmFzZVNlcnZlcldpZGdldDxUPiB7XHJcbiAgICBwdWJsaWMgX3VwbG9hZElmcmFtZUlEOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIGZvcm1EaXZJRDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBsaXN0ZW5PbklmcmFtZTogKCkgPT4gdm9pZDtcclxuICAgIHByaXZhdGUgdXBsb2FkSWZyYW1lOiBIVE1MSUZyYW1lRWxlbWVudDtcclxuICAgIHB1YmxpYyBfbGFzdFF1ZXJ5SWQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdXBsb2FkQ2hlY2tJbnRlcnZhbDogbnVtYmVyO1xyXG4gICAgcHVibGljIF9mb3JtRGl2OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgc2V0Rm9ybURpbWVudGlvbnNJbnRlcnZhbDogbnVtYmVyO1xyXG4gICAgcHVibGljIF91cGxvYWRGb3JtOiBIVE1MRm9ybUVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGZpbGVJbnB1dDogSFRNTElucHV0RWxlbWVudDtcclxuICAgIHByaXZhdGUgZmlsZUlucHV0Q2hhbmdlZDogKCkgPT4gdm9pZDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihmb3JtOiBCYXNlRm9ybSwgZWw6IFQsIHJlc2V0Q1NTPzogYm9vbGVhbikge1xyXG4gICAgICAgIHN1cGVyKGZvcm0sIGVsLCByZXNldENTUyk7XHJcblxyXG4gICAgICAgIHZhciB1cGxvYWRJZCA9IG5leHRHZW5lcmF0ZWRJZCsrO1xyXG5cclxuICAgICAgICB0aGlzLl91cGxvYWRJZnJhbWVJRCA9IHRoaXMuX3NjcmVlblNldC5wYXJhbXMuY29udGFpbmVySUQgKyAnX3VwbG9hZCcgKyB1cGxvYWRJZCArICdfdGFyZ2V0JztcclxuICAgICAgICB0aGlzLmZvcm1EaXZJRCA9IHRoaXMuX3NjcmVlblNldC5wYXJhbXMuY29udGFpbmVySUQgKyAnX3VwbG9hZCcgKyB1cGxvYWRJZCArICdfZm9ybSc7XHJcblxyXG4gICAgICAgIHRoaXMubGlzdGVuT25JZnJhbWUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBpZnJhbWVTdGF0ZU5hbWUgPSB0aGlzLnVwbG9hZElmcmFtZS5nZXRBdHRyaWJ1dGUoQmFzZVVwbG9hZFdpZGdldF9DT05TVFMudXBsb2FkaW5nKTtcclxuICAgICAgICAgICAgdmFyIGlmcmFtZVN0YXRlID0gU2VydmVyU3RhdGVzW2lmcmFtZVN0YXRlTmFtZV07XHJcblxyXG4gICAgICAgICAgICBpZiAoaWZyYW1lU3RhdGUgIT09IHRoaXMuc2VydmVyU3RhdGUpIHRoaXMub25TZXJ2ZXJRdWVyeUVuZCh0aGlzLl9sYXN0UXVlcnlJZCwgaWZyYW1lU3RhdGUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZmlsZUlucHV0Q2hhbmdlZCA9ICgpID0+IHRoaXMub25GaWxlSW5wdXRDaGFuZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25GaWxlSW5wdXRDaGFuZ2UoKSB7XHJcbiAgICAgICAgdGhpcy5zdGFydFNlcnZlclF1ZXJ5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIC8vIGFkZCB1cGxvYWQgaWZyYW1lXHJcbiAgICAgICAgICAgIHRoaXMudXBsb2FkSWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XHJcbiAgICAgICAgICAgIHRoaXMudXBsb2FkSWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIHRoaXMudXBsb2FkSWZyYW1lLmlkID0gdGhpcy5fdXBsb2FkSWZyYW1lSUQ7XHJcbiAgICAgICAgICAgIHRoaXMudXBsb2FkSWZyYW1lLnNldEF0dHJpYnV0ZSgnbmFtZScsIHRoaXMuX3VwbG9hZElmcmFtZUlEKTtcclxuICAgICAgICAgICAgdGhpcy51cGxvYWRJZnJhbWUuc2V0QXR0cmlidXRlKEJhc2VVcGxvYWRXaWRnZXRfQ09OU1RTLnVwbG9hZGluZywgU2VydmVyU3RhdGVzW1NlcnZlclN0YXRlcy5Ob3RTdGFydGVkXSk7XHJcbiAgICAgICAgICAgIHRoaXMudXBsb2FkSWZyYW1lLnNldEF0dHJpYnV0ZShcclxuICAgICAgICAgICAgICAgICdvbmxvYWQnLFxyXG4gICAgICAgICAgICAgICAgXCJ0aGlzLnNldEF0dHJpYnV0ZSgnXCIgKyBCYXNlVXBsb2FkV2lkZ2V0X0NPTlNUUy51cGxvYWRpbmcgKyBcIicsJ1wiICsgU2VydmVyU3RhdGVzW1NlcnZlclN0YXRlcy5Eb25lXSArIFwiJylcIixcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy51cGxvYWRJZnJhbWUpO1xyXG5cclxuICAgICAgICAgICAgLy8gcGxhY2UgZm9ybSBmb3IgdGhlIHVzZXIgdG8gaW50ZXJmYWN0IHdpdGhcclxuICAgICAgICAgICAgdGhpcy5fZm9ybURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICB0aGlzLl9mb3JtRGl2LmlkID0gdGhpcy5mb3JtRGl2SUQ7XHJcbiAgICAgICAgICAgIHRoaXMuX2Zvcm1EaXYuY2xhc3NOYW1lID0gJ2dpZ3lhLWF0dGFjaC1maWxlLXVwbG9hZC1mb3JtJztcclxuICAgICAgICAgICAgdGhpcy5fZm9ybURpdi5pbm5lckhUTUwgPSB0aGlzLmdldEZvcm1IdG1sKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2Zvcm1EaXYuc3R5bGUuekluZGV4ID0gJycgKyBnaWd5YS51dGlscy5ET00uZ2V0TmV4dFpJbmRleCgpO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9mb3JtRGl2KTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNldCBkaW1lbnRpb25zXHJcbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuc2V0Rm9ybURpbWVudGlvbnMoKSwgQmFzZVVwbG9hZFdpZGdldF9DT05TVFMuc2V0RGltZW50aW9uc0RlbGF5KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3VwbG9hZEZvcm0gPSB0aGlzLmdldEZvcm1FbGVtZW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsZUlucHV0ID0gdGhpcy5fdXBsb2FkRm9ybS5lbGVtZW50c1snX3Byb2ZpbGVQaG90byddO1xyXG5cclxuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZENsYXNzVG9FbGVtZW50KHRoaXMuZmlsZUlucHV0LCAnZ2lneWEtYXR0YWNoLWZpbGUtdXBsb2FkLWZpbGUtaW5wdXQnKTsgLy8gVE9ETyBDaGFuZ2UgdXNlcyBjc3MgZm9yIGllIHBhdGNoIGluc3RlYWQgb2Ygc3R5bGVcclxuXHJcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRFdmVudExpc3RlbmVyKHRoaXMuZmlsZUlucHV0LCAnY2hhbmdlJywgdGhpcy5maWxlSW5wdXRDaGFuZ2VkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEZvcm1IdG1sKCk6IHN0cmluZyB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKE5PVF9JTVBMRU1FTlRFRCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEZvcm1FbGVtZW50KCk6IEhUTUxGb3JtRWxlbWVudCB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKE5PVF9JTVBMRU1FTlRFRCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEZpbGVFbGVtZW50KCk6IEhUTUxJbnB1dEVsZW1lbnQge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihOT1RfSU1QTEVNRU5URUQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Rm9ybURpbWVudGlvbnMoKSB7XHJcbiAgICAgICAgLy8gVE9ETyBiZWhhdmlvciBjaGFuZ2U6IHVzZXMgdGltZW91dCByYXRoZXIgdGhhbiBpbnRlcnZhbFxyXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQub2Zmc2V0SGVpZ2h0ICE9IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Zvcm1EaXYuc3R5bGUuaGVpZ2h0ID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Zvcm1EaXYuc3R5bGUud2lkdGggPSB0aGlzLmluc3RhbmNlRWxlbWVudC5vZmZzZXRXaWR0aCArICdweCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudXBsb2FkQ2hlY2tJbnRlcnZhbCkgdGhpcy5vblNlcnZlclF1ZXJ5RW5kKHRoaXMuX2xhc3RRdWVyeUlkLCBTZXJ2ZXJTdGF0ZXMuRXJyb3IpO1xyXG5cclxuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5maWxlSW5wdXQsICdjaGFuZ2UnLCB0aGlzLm9uRmlsZUlucHV0Q2hhbmdlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZmlsZUlucHV0ID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fdXBsb2FkRm9ybSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9mb3JtRGl2LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5fZm9ybURpdik7XHJcbiAgICAgICAgICAgIHRoaXMuX2Zvcm1EaXYgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy51cGxvYWRJZnJhbWUpO1xyXG4gICAgICAgICAgICB0aGlzLnVwbG9hZElmcmFtZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RvcFVwbG9hZENoZWNrKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnVwbG9hZENoZWNrSW50ZXJ2YWwpIHtcclxuICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy51cGxvYWRDaGVja0ludGVydmFsKTtcclxuICAgICAgICAgICAgdGhpcy51cGxvYWRDaGVja0ludGVydmFsID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlcnZlclF1ZXJ5RG9uZShuZXdTdGF0ZTogU2VydmVyU3RhdGVzKSB7XHJcbiAgICAgICAgdGhpcy5zdG9wVXBsb2FkQ2hlY2soKTtcclxuXHJcbiAgICAgICAgc3VwZXIuc2VydmVyUXVlcnlEb25lKG5ld1N0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3VibWl0VXBsb2FkRm9ybSgpIHtcclxuICAgICAgICB0aGlzLl91cGxvYWRGb3JtLnN1Ym1pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGFydFNlcnZlclF1ZXJ5KCkge1xyXG4gICAgICAgIHRoaXMuX2xhc3RRdWVyeUlkID0gc3VwZXIuc3RhcnRTZXJ2ZXJRdWVyeSgpO1xyXG5cclxuICAgICAgICB0aGlzLnVwbG9hZElmcmFtZS5zZXRBdHRyaWJ1dGUoQmFzZVVwbG9hZFdpZGdldF9DT05TVFMudXBsb2FkaW5nLCBTZXJ2ZXJTdGF0ZXNbdGhpcy5zZXJ2ZXJTdGF0ZV0pO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMudXBsb2FkQ2hlY2tJbnRlcnZhbCkgdGhpcy51cGxvYWRDaGVja0ludGVydmFsID0gd2luZG93LnNldEludGVydmFsKHRoaXMubGlzdGVuT25JZnJhbWUsIEJhc2VVcGxvYWRXaWRnZXRfQ09OU1RTLnVwbG9hZENoZWNrSW50ZXJ2YWwpO1xyXG5cclxuICAgICAgICB0aGlzLnN1Ym1pdFVwbG9hZEZvcm0oKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhc3RRdWVyeUlkO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRTZXJ2ZXJQYXJhbWV0ZXJzKCkge1xyXG4gICAgICAgIHZhciBwYXJhbXM6IGFueSA9IGdpZ3lhLnV0aWxzLm9iamVjdC5leHRyYWN0UHJvcGVydGllcyh0aGlzLl9zY3JlZW5TZXQucGFyYW1zLCB7fSwgJ0FQSUtleXxjaWR8b2F1dGhfdG9rZW58bG9naW5fdG9rZW58c291cmNlfHNvdXJjZURhdGF8cmVnVG9rZW4nKTsgLy8gVE9ETzogcmVtb3ZlIHRoZSBhbnkgdHlwZVxyXG4gICAgICAgIHBhcmFtcy5hdXRoTW9kZSA9IHBhcmFtc1snb2F1dGhfdG9rZW4nXSA/ICd0b2tlbicgOiAnY29va2llJztcclxuXHJcbiAgICAgICAgdmFyIHdlYkFkYXB0ZXIgPSBnaWd5YS5fLmFwaUFkYXB0ZXJzLndlYjtcclxuICAgICAgICBpZiAod2ViQWRhcHRlcikge1xyXG4gICAgICAgICAgICAvLyBUT0RPOiByZW1vdmUgY2FzdGluZ1xyXG4gICAgICAgICAgICBwYXJhbXMubG9naW5fdG9rZW4gPSBnaWd5YS5fLmFwaUFkYXB0ZXJzLndlYi50b2tlblN0b3JlLmdldChwYXJhbXNbJ0FQSUtleSddKTtcclxuICAgICAgICAgICAgcGFyYW1zLmdtaWRUaWNrZXQgPSBnaWd5YS5fLmFwaUFkYXB0ZXIuZ2V0R21pZFRpY2tldCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFwYXJhbXMuQVBJS2V5KSBwYXJhbXMuQVBJS2V5ID0gZ2lneWEudGhpc1NjcmlwdC5BUElLZXk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbikgcGFyYW1zLnJlZ1Rva2VuID0gdGhpcy5fc2NyZWVuU2V0LmRhdGEucmVnVG9rZW47XHJcblxyXG4gICAgICAgIHJldHVybiBwYXJhbXM7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSVRlbXBsYXRlRWxlbWVudCwgVGVtcGxhdGVFbGVtZW50LCBJQ29uZGl0aW9uYWxBdHRyaWJ1dGUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1RlbXBsYXRlRWxlbWVudCc7XHJcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcclxuaW1wb3J0IHsgSU1hcCwgRm9yRWFjaFByb3AsIEZvckVhY2gsIGdldENvbmRpdGlvbmFsQXR0cmlidXRlRXhwcmVzc2lvbnMgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcclxuXHJcbmV4cG9ydCB0eXBlIElXaWRnZXRUeXBlPFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4gPSAobmV3KC4uLmFyZ3MpID0+IEJhc2VXaWRnZXQ8VD4pICYge1xyXG4gICAgQ09OU1RTOiB7XHJcbiAgICAgICAgc2VsZWN0b3I6IHN0cmluZztcclxuICAgIH07XHJcbn07XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElXaWRnZXQgZXh0ZW5kcyBJVGVtcGxhdGVFbGVtZW50IHtcclxuICAgIF9zY3JlZW46IFNjcmVlbjtcclxufVxyXG5leHBvcnQgY2xhc3MgQmFzZVdpZGdldDxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+IGV4dGVuZHMgVGVtcGxhdGVFbGVtZW50PFQ+IHtcclxuICAgIHB1YmxpYyBkZXBzPzogQXJyYXk8SVdpZGdldFR5cGU8SFRNTEVsZW1lbnQ+PjtcclxuICAgIHB1YmxpYyBwYXJhbXM6IElNYXA8c3RyaW5nPiA9IHt9O1xyXG4gICAgcHJvdGVjdGVkIHdpZGdldFBhcmFtczogSU1hcDxzdHJpbmc+O1xyXG4gICAgcHVibGljIHJlbmRlcldpZGdldFVJOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZWw6IFQsIHBhcmVudDogSVRlbXBsYXRlRWxlbWVudCwgcHVibGljIF9zY3JlZW46IFNjcmVlbiwgcmVzZXRDc3M6IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICAgICAgc3VwZXIoZWwsIHBhcmVudCk7XHJcblxyXG4gICAgICAgIHRoaXMucGFyYW1zID0gdGhpcy5nZXRFbGVtZW50UGFyYW1zKGVsKTtcclxuXHJcbiAgICAgICAgaWYgKHJlc2V0Q3NzKSBnaWd5YS51dGlscy5ET00uYWRkQ2xhc3NUb0VsZW1lbnQoZWwsICdnaWd5YS1yZXNldCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZWdpc3RlclR5cGVkV2lkZ2V0czxULCBXVCBleHRlbmRzIElXaWRnZXRUeXBlPEhUTUxFbGVtZW50Pj4ocGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQsIHdpZGdldExpYnJhcnk6IElNYXA8V1Q+LCBmYWN0b3J5OiAodHlwZTogV1QsIGVsOiBIVE1MRWxlbWVudCkgPT4gVCkge1xyXG4gICAgICAgIGNvbnN0IHdpZGdldHMgPSBuZXcgQXJyYXk8VD4oKTtcclxuXHJcbiAgICAgICAgRm9yRWFjaFByb3Aod2lkZ2V0TGlicmFyeSwgKHR5cGUsIGdpZ3lhQ2xhc3MpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudHMgPSBwYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodHlwZS5DT05TVFMuc2VsZWN0b3IpO1xyXG4gICAgICAgICAgICBGb3JFYWNoKGVsZW1lbnRzLCAoZWw6IEhUTUxEaXZFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB3aWRnZXRzLnB1c2goZmFjdG9yeSh0eXBlLCBlbCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHdpZGdldHM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJpdmF0ZSBnZXRFbGVtZW50UGFyYW1zKGVsOiBIVE1MRWxlbWVudCk6IElNYXA8c3RyaW5nPiB7XHJcbiAgICAgICAgdmFyIHBhcmFtczogSU1hcDxzdHJpbmc+ID0ge307XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIEZvckVhY2goZWwucXVlcnlTZWxlY3RvckFsbCgncGFyYW0nKSwgcGFyYW0gPT4ge1xyXG4gICAgICAgICAgICBwYXJhbXNbcGFyYW0ubmFtZV0gPSBwYXJhbS52YWx1ZTtcclxuICAgICAgICAgICAgdmFyIHdpZGdldEV4cHJlc3Npb25zO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHdpZGdldEV4cHJlc3Npb25zID0gZ2V0Q29uZGl0aW9uYWxBdHRyaWJ1dGVFeHByZXNzaW9ucyhwYXJhbSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2FybignRXJyb3IgaW4gcGFyYW0gY29uZGl0aW9uYWxzLCBjb25kaXRpb25hbHMgaWdub3JlZCcpO1xyXG4gICAgICAgICAgICAgICAgd2lkZ2V0RXhwcmVzc2lvbnMgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHdpZGdldEV4cHJlc3Npb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY29uZGl0aW9uYWxFeHByZXNzaW9ucyA9IHNlbGYuY29uZGl0aW9uYWxFeHByZXNzaW9ucy5jb25jYXQod2lkZ2V0RXhwcmVzc2lvbnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHBhcmFtcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLndpZGdldFBhcmFtcykge1xyXG4gICAgICAgICAgICAvLyBmaXJzdCB0aW1lIHRoZSB3aWRnZXQgaXMgbG9hZGVkLlxyXG4gICAgICAgICAgICB0aGlzLndpZGdldFBhcmFtcyA9IHRoaXMucGFyYW1zO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcldpZGdldFVJID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN1cGVyLmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnJlbmRlcldpZGdldFVJKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyV2lkZ2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIG92ZXJyaWRlcyAnZXhlY3V0ZUNvbmRpdGlvbmFsUmVzdWx0JyBpbiBUZW1wbGF0ZUVsZW1lbnRcclxuICAgIHByb3RlY3RlZCBleGVjdXRlQ29uZGl0aW9uYWxSZXN1bHQoZXZhbHVhdGlvblJlc3VsdDogc3RyaW5nLCBjb25kaXRpb25hbEF0dDogSUNvbmRpdGlvbmFsQXR0cmlidXRlLCBlbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGlmICghY29uZGl0aW9uYWxBdHQuaXNXaWRnZXRQYXJhbVRhZykge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuZXhlY3V0ZUNvbmRpdGlvbmFsUmVzdWx0KGV2YWx1YXRpb25SZXN1bHQsIGNvbmRpdGlvbmFsQXR0LCBlbGVtZW50KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZXZhbHVhdGlvblJlc3VsdCA9PT0gJycgJiYgY29uZGl0aW9uYWxBdHQuZGVmYXVsdFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBldmFsdWF0aW9uUmVzdWx0ID0gY29uZGl0aW9uYWxBdHQuZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIWV2YWx1YXRpb25SZXN1bHQgJiYgIWNvbmRpdGlvbmFsQXR0LmRlZmF1bHRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uYWxBdHQubGFzdEF0dHJpYnV0ZVZhbHVlID0gZXZhbHVhdGlvblJlc3VsdDtcclxuICAgICAgICAgICAgICAgIC8vIEZpcnN0IGNoZWNrIHRoYXQgdGhlIHBhcmFtIGlzIGluc2lkZSB0aGUgd2lkZ2V0IHBhcmFtcyBzb1xyXG4gICAgICAgICAgICAgICAgLy8gSSBjYW4gc2V0IHRoZSAncmVSZW5kZXJXaWRnZXQnIGZsYWcuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy53aWRnZXRQYXJhbXNbY29uZGl0aW9uYWxBdHQuYXR0cmlidXRlTmFtZV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy53aWRnZXRQYXJhbXNbY29uZGl0aW9uYWxBdHQuYXR0cmlidXRlTmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJXaWRnZXRVSSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZhbHVhdGlvblJlc3VsdCAhPT0gY29uZGl0aW9uYWxBdHQubGFzdEF0dHJpYnV0ZVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25kaXRpb25hbEF0dC5sYXN0QXR0cmlidXRlVmFsdWUgPSBldmFsdWF0aW9uUmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy53aWRnZXRQYXJhbXNbY29uZGl0aW9uYWxBdHQuYXR0cmlidXRlTmFtZV0gPSBldmFsdWF0aW9uUmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJXaWRnZXRVSSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBldmFsdWF0aW9uUmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVuZGVyV2lkZ2V0KCkge1xyXG4gICAgICAgIC8vdmlydHVhbCBtZXRob2QgLSBpbXBsZW1lbnRlZCBvbmx5IGJ5IHdpZGdldHMgd2hvIGFyZSAncGx1Z2luV2lkZ2V0cydcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBJU2NoZW1hRmllbGRzLCBJQ29uc2VudEZpZWxkU2NoZWFtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvRm9ybUlucHV0JztcclxuXHJcbmV4cG9ydCBjb25zdCBjb25zZW50RmllbGROYW1lID0gJ2lzQ29uc2VudEdyYW50ZWQnO1xyXG5leHBvcnQgY29uc3QgbmFtZXNwYWNlID0gJ3ByZWZlcmVuY2VzJztcclxuZXhwb3J0IGZ1bmN0aW9uIHBvc3RQcm9jZXNzRm9ybShmb3JtRGF0YSwgcHJlZmVyZW5jZXNTY2hlbWEpIHtcclxuICAgIGNvbnN0IGRpc3BsYXllZFByZWZlcmVuY2VzID0gZ2V0RGlzcGxheWVkUHJlZmVyZW5jZXMoZm9ybURhdGEsIHByZWZlcmVuY2VzU2NoZW1hKTtcclxuXHJcbiAgICBpZiAoZGlzcGxheWVkUHJlZmVyZW5jZXMpIHtcclxuICAgICAgICBmb3JtRGF0YSA9IGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbZm9ybURhdGEsIHsgZGlzcGxheWVkUHJlZmVyZW5jZXMgfV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmb3JtRGF0YTtcclxufVxyXG5mdW5jdGlvbiBnZXREaXNwbGF5ZWRQcmVmZXJlbmNlcyhmb3JtRGF0YSwgcHJlZmVyZW5jZXNTY2hlbWE6IElTY2hlbWFGaWVsZHM8SUNvbnNlbnRGaWVsZFNjaGVhbT4pIHtcclxuICAgIGlmICghZm9ybURhdGEpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICBpZiAoIXByZWZlcmVuY2VzU2NoZW1hKSB7XHJcbiAgICAgICAgLy8gZ2lneWEubG9nZ2VyLmVycm9yKGBmb3JtIGhhcyBwcmVmZXJlbmNlcyAtIGJ1dCBpdCBkb2Vzbid0IGV4aXN0IGluIHNjaGVtYWApO1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29uc2VudHM6IHN0cmluZ1tdID0gT2JqZWN0LmtleXMoZm9ybURhdGEpXHJcbiAgICAgICAgLmZpbHRlcihpc0NvbnNlbnRGaWVsZClcclxuICAgICAgICAubWFwKHRvQ29uc2VudE5hbWUpO1xyXG5cclxuICAgIGlmICghY29uc2VudHMubGVuZ3RoKSByZXR1cm4gdW5kZWZpbmVkO1xyXG5cclxuICAgIHJldHVybiBjb25zZW50cy5yZWR1Y2UoKHJlcywgY3VycikgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbnNlbnQgPSBwcmVmZXJlbmNlc1NjaGVtYVtjdXJyXTtcclxuXHJcbiAgICAgICAgaWYgKCFjb25zZW50KSB7XHJcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci53YXJuKGBmb3JtIGlucHV0IGJvdW5kIHRvICR7bmFtZXNwYWNlfS4ke2N1cnJ9IGJ1dCBpdCBkb2Vzbid0IGV4aXN0IG9uIHNjaGVtYWApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc1tjdXJyXSA9IHtcclxuICAgICAgICAgICAgICAgIGRvY1ZlcnNpb246IGNvbnNlbnQuY3VycmVudERvY1ZlcnNpb24sXHJcbiAgICAgICAgICAgICAgICBkb2NEYXRlOiBjb25zZW50LmN1cnJlbnREb2NEYXRlLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH0sIHt9KTtcclxufVxyXG5mdW5jdGlvbiBpc0NvbnNlbnRGaWVsZChmaWVsZE5hbWU6IHN0cmluZykge1xyXG4gICAgLy8gdG9kbzogYWZ0ZXIgaWUxMSBkZXByZWNhdGlvbiwgcmVwbGFjZSB3aXRoIHN0YXJ0c1dpdGggJiBlbmRzV2l0aC5cclxuICAgIHJldHVybiBmaWVsZE5hbWUuaW5kZXhPZihgJHtuYW1lc3BhY2V9LmApID09IDAgJiYgZmllbGROYW1lLnN1YnN0cihmaWVsZE5hbWUubGVuZ3RoIC0gY29uc2VudEZpZWxkTmFtZS5sZW5ndGgsIGZpZWxkTmFtZS5sZW5ndGgpID09PSBjb25zZW50RmllbGROYW1lO1xyXG59XHJcbmZ1bmN0aW9uIHRvQ29uc2VudE5hbWUoY29uc2VudEZpZWxkTmFtZTogc3RyaW5nKSB7XHJcbiAgICAvLyByZW1vdmluZyBwcmVmZXJlbmNlcyBuYW1lc3BhY2UgYW5kIGlzQ29uc2VudEdyYW50ZWRcclxuICAgIGNvbnN0IGZpZWxkUGFydHMgPSBjb25zZW50RmllbGROYW1lLnNwbGl0KCcuJyk7XHJcbiAgICByZXR1cm4gZmllbGRQYXJ0cy5zbGljZSgxLCBmaWVsZFBhcnRzLmxlbmd0aCAtIDEpLmpvaW4oJy4nKTtcclxufVxyXG4iLCJleHBvcnQgaW50ZXJmYWNlIElXYXJuYWJsZSB7XHJcbiAgICB3YXJuPyhtc2c6IHN0cmluZywgaWQ/OiBzdHJpbmcpOiB2b2lkO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiB3YXJuKHNjcmVlbnNldElELCBtc2cpIHtcclxuICAgIC8vIFRPRE86IHRoaXMgcHJvYmFibHkgc2hvdWxkIHVzZSBzb21lIGdlbmVyYWwgZGVidWcgd2FybiBtZXRob2Qgb3IgaW4gdGhlIGJhc2UgcGx1Z2luXHJcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgPT0gJ29iamVjdCcgJiYgY29uc29sZS53YXJuKSBjb25zb2xlLndhcm4oJ0dpZ3lhIFNjcmVlbnNldCAoJyArIHNjcmVlbnNldElEICsgJykgLSAnICsgbXNnKTtcclxufVxyXG4iLCJpbXBvcnQgeyBJTWFwLCBEZWVwRnJlZXplLCBNYXAsIFNvbWUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcclxuaW1wb3J0IHsgVGVtcGxhdGVFbGVtZW50IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9UZW1wbGF0ZUVsZW1lbnQnO1xyXG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xyXG5pbXBvcnQgeyBJRXJyb3JJbmZvIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9FcnJvcnMnO1xyXG5pbXBvcnQgeyBTY3JlZW4gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbic7XHJcbmltcG9ydCB7IEdTRXJyb3JzIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMnO1xyXG5cclxuaW50ZXJmYWNlIElFcnJvckVsZW1lbnRQb2xpY3kge1xyXG4gICAgc2hvd0Vycm9yOiAoZWw6IEhUTUxFbGVtZW50LCBlcnJvck1lc3NhZ2U6IHN0cmluZykgPT4gdm9pZDtcclxuICAgIGhpZGVFcnJvcjogKGVsOiBIVE1MRWxlbWVudCkgPT4gdm9pZDtcclxufVxyXG52YXIgRXJyb3JFbGVtZW50UG9saWNpZXM6IElNYXA8SUVycm9yRWxlbWVudFBvbGljeT4gPSB7XHJcbiAgICAnZ2lneWEtZXJyb3ItZGlzcGxheSc6IHtcclxuICAgICAgICBzaG93RXJyb3I6IChlbDogSFRNTEVsZW1lbnQsIGVycm9yTWVzc2FnZTogc3RyaW5nKSA9PiBnaWd5YS51dGlscy5ET00uYWRkQ2xhc3NUb0VsZW1lbnQoZWwsICdnaWd5YS1lcnJvci1kaXNwbGF5LWFjdGl2ZScpLFxyXG4gICAgICAgIGhpZGVFcnJvcjogKGVsOiBIVE1MRWxlbWVudCkgPT4gZ2lneWEudXRpbHMuRE9NLnJlbW92ZUNsYXNzRnJvbUVsZW1lbnQoZWwsICdnaWd5YS1lcnJvci1kaXNwbGF5LWFjdGl2ZScpLFxyXG4gICAgfSxcclxuICAgICdnaWd5YS1lcnJvci1tc2cnOiB7XHJcbiAgICAgICAgc2hvd0Vycm9yOiAoZWw6IEhUTUxFbGVtZW50LCBlcnJvck1lc3NhZ2U6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBnaWd5YS51dGlscy5ET00uYWRkQ2xhc3NUb0VsZW1lbnQoZWwsICdnaWd5YS1lcnJvci1tc2ctYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGVsLmlubmVySFRNTCA9IGVycm9yTWVzc2FnZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGhpZGVFcnJvcjogKGVsOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBnaWd5YS51dGlscy5ET00ucmVtb3ZlQ2xhc3NGcm9tRWxlbWVudChlbCwgJ2dpZ3lhLWVycm9yLW1zZy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbn07XHJcbkRlZXBGcmVlemUoRXJyb3JFbGVtZW50UG9saWNpZXMpO1xyXG5leHBvcnQgZW51bSBFcnJvclNjb3BlcyB7XHJcbiAgICBib3VuZE9iamVjdEVycm9yLFxyXG4gICAgZmlyc3RFcnJvcixcclxuICAgIGFueUVycm9yLFxyXG4gICAgYWxsRXJyb3JzLFxyXG4gICAgJ2JvdW5kLW9iamVjdC1lcnJvcicgPSBib3VuZE9iamVjdEVycm9yLFxyXG4gICAgJ2ZpcnN0LWVycm9yJyA9IGZpcnN0RXJyb3IsXHJcbiAgICAnYW55LWVycm9yJyA9IGFueUVycm9yLFxyXG4gICAgJ2FsbC1lcnJvcnMnID0gYWxsRXJyb3JzLFxyXG59XHJcbkRlZXBGcmVlemUoRXJyb3JTY29wZXMpO1xyXG5leHBvcnQgdmFyIEVycm9yRGlzcGxheUVsZW1lbnRfQ09OU1RTID0ge1xyXG4gICAgZ2lneWFDbGFzc2VzOiBbJ2dpZ3lhLWVycm9yLWRpc3BsYXknLCAnZ2lneWEtZXJyb3ItbXNnJ10sXHJcbiAgICBib3VuZGVkVG86ICdkYXRhLWJvdW5kLXRvJyxcclxuICAgIGVycm9yQ29kZXM6ICdkYXRhLWVycm9yLWNvZGVzJyxcclxuICAgIHNjb3BlOiAnZGF0YS1zY29wZScsXHJcbiAgICBmbGFnczogJ2RhdGEtZXJyb3ItZmxhZ3MnLFxyXG4gICAgZXJyb3JDbGFzc1ByZWZpeDogJ2dpZ3lhLWVycm9yLWNvZGUtJyxcclxufTtcclxuRGVlcEZyZWV6ZShFcnJvckRpc3BsYXlFbGVtZW50X0NPTlNUUyk7XHJcbmV4cG9ydCBjbGFzcyBFcnJvckRpc3BsYXlFbGVtZW50IGV4dGVuZHMgVGVtcGxhdGVFbGVtZW50PEhUTUxFbGVtZW50PiB7XHJcbiAgICAvLyBUT0RPIE5lZWQgdG8gYmUgY29udmVydGVkIHRvIHR3byB3aWRnZXRzXHJcbiAgICBwdWJsaWMgYm91bmRlZFRvOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgc2NvcGU6IEVycm9yU2NvcGVzO1xyXG4gICAgcHJpdmF0ZSBhbGxvd2VkRXJyb3JDb2RlczogR1NFcnJvcnNbXTtcclxuICAgIHByaXZhdGUgYWxsb3dlZEZsYWdzOiBzdHJpbmdbXTtcclxuICAgIHByaXZhdGUgcG9saWN5OiBJRXJyb3JFbGVtZW50UG9saWN5O1xyXG4gICAgcHVibGljIF9mb3JtOiBCYXNlRm9ybTtcclxuICAgIHByaXZhdGUgbGFzdEVycm9yOiBJRXJyb3JJbmZvO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGVsOiBIVE1MRWxlbWVudCwgcHJpdmF0ZSBfc2NyZWVuOiBTY3JlZW4pIHtcclxuICAgICAgICBzdXBlcihlbCwgX3NjcmVlbik7XHJcblxyXG4gICAgICAgIHRoaXMuYm91bmRlZFRvID0gZWwuZ2V0QXR0cmlidXRlKEVycm9yRGlzcGxheUVsZW1lbnRfQ09OU1RTLmJvdW5kZWRUbyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2NvcGUgPSBFcnJvclNjb3Blc1tlbC5nZXRBdHRyaWJ1dGUoRXJyb3JEaXNwbGF5RWxlbWVudF9DT05TVFMuc2NvcGUpXSB8fCBFcnJvclNjb3Blcy5ib3VuZE9iamVjdEVycm9yO1xyXG5cclxuICAgICAgICB2YXIgZXJyb3JDb2RlcyA9IGVsLmdldEF0dHJpYnV0ZShFcnJvckRpc3BsYXlFbGVtZW50X0NPTlNUUy5lcnJvckNvZGVzKTtcclxuICAgICAgICBpZiAoZXJyb3JDb2RlcykgdGhpcy5hbGxvd2VkRXJyb3JDb2RlcyA9IE1hcChlcnJvckNvZGVzLnNwbGl0KCcsJyksIGNvZGUgPT4gcGFyc2VJbnQoY29kZSkpO1xyXG4gICAgICAgIGVsc2UgdGhpcy5hbGxvd2VkRXJyb3JDb2RlcyA9IFtdO1xyXG5cclxuICAgICAgICB2YXIgZmxhZ3MgPSBlbC5nZXRBdHRyaWJ1dGUoRXJyb3JEaXNwbGF5RWxlbWVudF9DT05TVFMuZmxhZ3MpO1xyXG4gICAgICAgIGlmIChmbGFncykgdGhpcy5hbGxvd2VkRmxhZ3MgPSBmbGFncy5zcGxpdCgnLCcpO1xyXG4gICAgICAgIGVsc2UgdGhpcy5hbGxvd2VkRmxhZ3MgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgY2xhc3NOYW1lIGluIEVycm9yRWxlbWVudFBvbGljaWVzKSB7XHJcbiAgICAgICAgICAgIGlmIChnaWd5YS51dGlscy5ET00uaXNFbGVtZW50Q2xhc3MoZWwsIGNsYXNzTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9saWN5ID0gRXJyb3JFbGVtZW50UG9saWNpZXNbY2xhc3NOYW1lXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnBvbGljeS5oaWRlRXJyb3IoZWwpOyAvLyBjbGVhciBlcnJvciBhcyBpbml0aWFsIGFwcGVhcmFuY2VcclxuXHJcbiAgICAgICAgLy8gV0NBRzogU2V0IHJvbGU9YWxlcnQgYW5kIGFyaWEtYXRvbWljIHNvIHRoYXQgc2NyZWVuIHJlYWRlcnMgd2lsbCBhdXRvbWF0aWNhbGx5IHJlYWQgdXBkYXRlZCBlcnJvciB0ZXh0LlxyXG4gICAgICAgIC8vIFNlZTogaHR0cHM6Ly93d3cudzMub3JnL1RSL1dDQUcyMC1URUNIUy9BUklBMTkuaHRtbFxyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnYXJpYS1hdG9taWMnLCAndHJ1ZScpO1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgncm9sZScsICdhbGVydCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0Vycm9yQ29kZUFsbG93ZWQoZXJyb3JDb2RlOiBHU0Vycm9ycywgZmxhZ3M6IHN0cmluZyA9IG51bGwpIHtcclxuICAgICAgICB2YXIgYWxsb3dlZENvZGUgPVxyXG4gICAgICAgICAgICAodGhpcy5hbGxvd2VkRXJyb3JDb2Rlcy5sZW5ndGggPT09IDAgJiYgZXJyb3JDb2RlICE9PSBHU0Vycm9ycy5EYXRhX1BlbmRpbmcpIHx8IGdpZ3lhLnV0aWxzLmFycmF5LmluZGV4T2YodGhpcy5hbGxvd2VkRXJyb3JDb2RlcywgZXJyb3JDb2RlKSAhPT0gLTE7XHJcblxyXG4gICAgICAgIHZhciBhbGxvd2VkRmxhZyA9IHRoaXMuYWxsb3dlZEZsYWdzLmxlbmd0aCA9PT0gMDsgLy8gQWxsb3cgYWxsIGZsYWdzIGlmIGZsYWdzIGFyZSBub3Qgc3BlY2lmaWVkXHJcblxyXG4gICAgICAgIGlmICh0aGlzLmFsbG93ZWRGbGFncy5sZW5ndGggJiYgZmxhZ3MpIHtcclxuICAgICAgICAgICAgdmFyIGFyRmxhZ3MgPSBmbGFncy5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICBhbGxvd2VkRmxhZyA9IFNvbWUoYXJGbGFncywgZmxhZyA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ2lneWEudXRpbHMuYXJyYXkuaW5kZXhPZih0aGlzLmFsbG93ZWRGbGFncywgZmxhZykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dlZEZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhbGxvd2VkQ29kZSAmJiBhbGxvd2VkRmxhZztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2hvd0Vycm9yKGVycm9yOiBJRXJyb3JJbmZvKSB7XHJcbiAgICAgICAgdGhpcy5zZXRMYXN0RXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIHRoaXMucG9saWN5LnNob3dFcnJvcih0aGlzLmluc3RhbmNlRWxlbWVudCwgZXJyb3IuZXJyb3JNZXNzYWdlKTtcclxuICAgICAgICB0aGlzLl9zY3JlZW5TZXQuY2VudGVyTW9kYWwoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGlkZUVycm9yKCkge1xyXG4gICAgICAgIHRoaXMucG9saWN5LmhpZGVFcnJvcih0aGlzLmluc3RhbmNlRWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVMYXN0RXJyb3IoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldExhc3RFcnJvcihlcnJvcjogSUVycm9ySW5mbykge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlTGFzdEVycm9yKCk7XHJcbiAgICAgICAgdGhpcy5sYXN0RXJyb3IgPSBlcnJvcjtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCwgRXJyb3JEaXNwbGF5RWxlbWVudF9DT05TVFMuZXJyb3JDbGFzc1ByZWZpeCArIGVycm9yLmVycm9yQ29kZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5jZW50ZXJNb2RhbCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbW92ZUxhc3RFcnJvcigpIHtcclxuICAgICAgICBpZiAodGhpcy5sYXN0RXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBnaWd5YS51dGlscy5ET00ucmVtb3ZlQ2xhc3NGcm9tRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCwgRXJyb3JEaXNwbGF5RWxlbWVudF9DT05TVFMuZXJyb3JDbGFzc1ByZWZpeCArIHRoaXMubGFzdEVycm9yLmVycm9yQ29kZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuY2VudGVyTW9kYWwoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5sYXN0RXJyb3IgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSB7XHJcbiAgICAgICAgc3VwZXIuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5ib3VuZGVkVG8gPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRXJyb3JEaXNwbGF5RWxlbWVudF9DT05TVFMuYm91bmRlZFRvKTtcclxuXHJcbiAgICAgICAgdmFyIGVycm9yQ29kZXMgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRXJyb3JEaXNwbGF5RWxlbWVudF9DT05TVFMuZXJyb3JDb2Rlcyk7XHJcbiAgICAgICAgaWYgKGVycm9yQ29kZXMpIHRoaXMuYWxsb3dlZEVycm9yQ29kZXMgPSBNYXAoZXJyb3JDb2Rlcy5zcGxpdCgnLCcpLCBjb2RlID0+IHBhcnNlSW50KGNvZGUpKTtcclxuICAgICAgICBlbHNlIHRoaXMuYWxsb3dlZEVycm9yQ29kZXMgPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5zY29wZSA9IEVycm9yU2NvcGVzW3RoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShFcnJvckRpc3BsYXlFbGVtZW50X0NPTlNUUy5zY29wZSldIHx8IEVycm9yU2NvcGVzLmJvdW5kT2JqZWN0RXJyb3I7XHJcbiAgICAgICAgdmFyIGZsYWdzID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEVycm9yRGlzcGxheUVsZW1lbnRfQ09OU1RTLmZsYWdzKTtcclxuICAgICAgICBpZiAoZmxhZ3MpIHRoaXMuYWxsb3dlZEZsYWdzID0gZmxhZ3Muc3BsaXQoJywnKTtcclxuICAgICAgICBlbHNlIHRoaXMuYWxsb3dlZEZsYWdzID0gW107XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUZvcm0gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlblNldFBsdWdpbic7XHJcbmltcG9ydCB7IElOdW1lcmljTWFwLCBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XHJcbmltcG9ydCB7IFNjcmVlbk9wdGlvbnNfQ09OU1RTIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5PcHRpb25zJztcclxuaW1wb3J0IHsgR1NFcnJvcnMgfSBmcm9tICcuLi8uLi8uLi9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9ycyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElFcnJvckluZm8ge1xyXG4gICAgZmllbGROYW1lPzogc3RyaW5nOyAvLyBub3QgYWxsIGVycm9ycyBhcmUgZmllbGQgYm91bmRlZFxyXG4gICAgZXJyb3JDb2RlOiBHU0Vycm9ycztcclxuICAgIGVycm9yTWVzc2FnZT86IHN0cmluZztcclxuICAgIGN1c3RvbU1lc3NhZ2U/OiBzdHJpbmc7XHJcbiAgICBlcnJvckZsYWdzPzogc3RyaW5nO1xyXG4gICAgaGFuZGxlZD86IGJvb2xlYW47XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBJRXJyb3JBdHRyaWJ1dGVJbmZvIHtcclxuICAgIG5hbWU/OiBzdHJpbmc7XHJcbiAgICBuZXh0U2NyZWVuPzogKGZvcm06IElGb3JtKSA9PiBQcm9taXNlPHN0cmluZz4gfCBzdHJpbmc7XHJcbiAgICByZXF1aXJlc0ZpbmFsaXplPzogYm9vbGVhbjtcclxuICAgIHJlc2V0RmluYWxpemVOZWVkZWRTdGF0ZT86IGJvb2xlYW47XHJcbn1cclxuZXhwb3J0IHZhciBQZW5kaW5nRXJyb3JBdHRyaWJ1dGVzOiBJTnVtZXJpY01hcDxJRXJyb3JBdHRyaWJ1dGVJbmZvPiA9IHt9O1xyXG5QZW5kaW5nRXJyb3JBdHRyaWJ1dGVzW0dTRXJyb3JzLkFDQ09VTlRTX0xJTktFRF0gPSB7XHJcbiAgICBuYW1lOiBTY3JlZW5PcHRpb25zX0NPTlNUUy5hY2NvdW50c0xpbmtlZFNjcmVlbixcclxuICAgIG5leHRTY3JlZW46IGZvcm0gPT4gZm9ybS5fc2NyZWVuLmFjY291bnRzTGlua2VkU2NyZWVuIHx8ICdfZmluaXNoJywgLy8gQWxsb3cgb2xkIHNjcmVlbnNldHMgdG8gYXV0b21hdGljYWxseSBmaW5hbGl6ZSB0aGUgcmVnaXN0cmF0aW9uIG9mIHRoZSBuZXdseSBsaW5rZWQgYWNjb3VudFxyXG4gICAgcmVxdWlyZXNGaW5hbGl6ZTogdHJ1ZSxcclxufTtcclxuUGVuZGluZ0Vycm9yQXR0cmlidXRlc1tHU0Vycm9ycy5BQ0NPVU5UX1BFTkRJTkdfUkVHSVNUUkFUSU9OXSA9IHtcclxuICAgIG5hbWU6IFNjcmVlbk9wdGlvbnNfQ09OU1RTLnBlbmRpbmdSZWdpc3RyYXRpb25TY3JlZW4sXHJcbiAgICBuZXh0U2NyZWVuOiBmb3JtID0+IHtcclxuICAgICAgICBjb25zdCBhcGlEYXRhID0gZm9ybS5fc2NyZWVuU2V0LmdldEFwaURhdGEoKTtcclxuICAgICAgICBkZWxldGUgYXBpRGF0YS5nZXRTY2hlbWE7IC8vIGNsZWFuaW5nIGNhY2hlZCBzY2hlbWFcclxuICAgICAgICByZXR1cm4gZm9ybS5fc2NyZWVuLnBlbmRpbmdSZWdpc3RyYXRpb25TY3JlZW47XHJcbiAgICB9LFxyXG4gICAgcmVxdWlyZXNGaW5hbGl6ZTogdHJ1ZSxcclxufTtcclxuUGVuZGluZ0Vycm9yQXR0cmlidXRlc1tHU0Vycm9ycy5MT0dJTl9JREVOVElGSUVSX0VYSVNUU10gPSBQZW5kaW5nRXJyb3JBdHRyaWJ1dGVzW0dTRXJyb3JzLk9LX1dJVEhfRVJST1JfTE9HSU5fSURFTlRJRklFUl9FWElTVFNdID0ge1xyXG4gICAgbmFtZTogU2NyZWVuT3B0aW9uc19DT05TVFMuZXhpc3RpbmdMb2dpbklkZW50aWZpZXJTY3JlZW4sXHJcbiAgICBuZXh0U2NyZWVuOiBmb3JtID0+IGZvcm0uX3NjcmVlblNldC5kYXRhLnJlZ1Rva2VuICYmIGZvcm0uX3NjcmVlbi5leGlzdGluZ0xvZ2luSWRlbnRpZmllclNjcmVlbixcclxuICAgIHJlcXVpcmVzRmluYWxpemU6IHRydWUsXHJcbn07XHJcblBlbmRpbmdFcnJvckF0dHJpYnV0ZXNbR1NFcnJvcnMuQUNDT1VOVF9QRU5ESU5HX1ZFUklGSUNBVElPTl0gPSB7XHJcbiAgICBuYW1lOiBTY3JlZW5PcHRpb25zX0NPTlNUUy5wZW5kaW5nVmVyaWZpY2F0aW9uU2NyZWVuLFxyXG4gICAgbmV4dFNjcmVlbjogZm9ybSA9PiBmb3JtLl9zY3JlZW4ucGVuZGluZ1ZlcmlmaWNhdGlvblNjcmVlbixcclxuICAgIHJlc2V0RmluYWxpemVOZWVkZWRTdGF0ZTogdHJ1ZSxcclxufTtcclxuUGVuZGluZ0Vycm9yQXR0cmlidXRlc1tHU0Vycm9ycy5BQ0NPVU5UX01JU1NJTkdfTE9HSU5JRF0gPSB7XHJcbiAgICBuYW1lOiBTY3JlZW5PcHRpb25zX0NPTlNUUy5taXNzaW5nTG9naW5JZFNjcmVlbixcclxuICAgIG5leHRTY3JlZW46IGZvcm0gPT4gZm9ybS5fc2NyZWVuLm1pc3NpbmdMb2dpbklkU2NyZWVuLFxyXG59O1xyXG5QZW5kaW5nRXJyb3JBdHRyaWJ1dGVzW0dTRXJyb3JzLlBFTkRJTkdfUEFTU1dPUkRfQ0hBTkdFXSA9IHtcclxuICAgIG5hbWU6IFNjcmVlbk9wdGlvbnNfQ09OU1RTLnBlbmRpbmdQYXNzd29yZENoYW5nZVNjcmVlbixcclxuICAgIG5leHRTY3JlZW46IGZvcm0gPT4gZm9ybS5fc2NyZWVuLnBlbmRpbmdQYXNzd29yZENoYW5nZVNjcmVlbixcclxuICAgIHJlcXVpcmVzRmluYWxpemU6IHRydWUsXHJcbn07XHJcblBlbmRpbmdFcnJvckF0dHJpYnV0ZXNbR1NFcnJvcnMuQUNDT1VOVF9QRU5ESU5HX1RGQV9WRVJJRklDQVRJT05dID0ge1xyXG4gICAgbmFtZTogU2NyZWVuT3B0aW9uc19DT05TVFMucGVuZGluZ1RmYVZlcmlmaWNhdGlvblNjcmVlbixcclxuICAgIG5leHRTY3JlZW46IGZvcm0gPT4gZm9ybS5fc2NyZWVuLnBlbmRpbmdUZmFWZXJpZmljYXRpb25TY3JlZW4sXHJcbiAgICByZXF1aXJlc0ZpbmFsaXplOiB0cnVlLFxyXG59O1xyXG5QZW5kaW5nRXJyb3JBdHRyaWJ1dGVzW0dTRXJyb3JzLkFDQ09VTlRfUEVORElOR19URkFfUkVHSVNUUkFUSU9OXSA9IHtcclxuICAgIG5hbWU6IFNjcmVlbk9wdGlvbnNfQ09OU1RTLnBlbmRpbmdUZmFSZWdpc3RyYXRpb25TY3JlZW4sXHJcbiAgICBuZXh0U2NyZWVuOiBmb3JtID0+IGZvcm0uX3NjcmVlbi5wZW5kaW5nVGZhUmVnaXN0cmF0aW9uU2NyZWVuLFxyXG4gICAgcmVxdWlyZXNGaW5hbGl6ZTogdHJ1ZSxcclxufTtcclxuUGVuZGluZ0Vycm9yQXR0cmlidXRlc1tHU0Vycm9ycy5BQ0NPVU5UX1BFTkRJTkdfUkVDRU5UX0xPR0lOXSA9IHtcclxuICAgIG5hbWU6IFNjcmVlbk9wdGlvbnNfQ09OU1RTLnBlbmRpbmdSZUF1dGhlbnRpY2F0aW9uU2NyZWVuLFxyXG4gICAgbmV4dFNjcmVlbjogZm9ybSA9PiBmb3JtLl9zY3JlZW4ucGVuZGluZ1JlQXV0aGVudGljYXRpb25TY3JlZW4sXHJcbn07XHJcblBlbmRpbmdFcnJvckF0dHJpYnV0ZXNbR1NFcnJvcnMuUEVORElOR19DT0RFX1ZFUklGSUNBVElPTl0gPSB7XHJcbiAgICBuYW1lOiBTY3JlZW5PcHRpb25zX0NPTlNUUy5wZW5kaW5nQ29kZVZlcmlmaWNhdGlvblNjcmVlbixcclxuICAgIHJlcXVpcmVzRmluYWxpemU6IHRydWUsXHJcbiAgICBuZXh0U2NyZWVuOiBhc3luYyBmb3JtID0+IHtcclxuICAgICAgICBjb25zdCBhcGlEYXRhID0gZm9ybS5fc2NyZWVuU2V0LmdldEFwaURhdGEoKTtcclxuICAgICAgICBsZXQgYWNjb3VudEluZm8gPSBhcGlEYXRhLmdldEFjY291bnRJbmZvID0gYXBpRGF0YS5nZXRBY2NvdW50SW5mbyB8fCB7fTtcclxuICAgICAgICBpZighYWNjb3VudEluZm8uZW1haWwgJiYgIShhY2NvdW50SW5mby5wcm9maWxlICYmIGFjY291bnRJbmZvLnByb2ZpbGUuZW1haWwpKSB7XHJcbiAgICAgICAgICAgIGFjY291bnRJbmZvID0gYXdhaXQgbmV3IFByb21pc2UociA9PiBmb3JtLl9zY3JlZW5TZXQudXBkYXRlQWNjb3VudEluZm8ocikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhY2NvdW50SW5mby5lbWFpbCA9IGFjY291bnRJbmZvLmVtYWlsIHx8IChhY2NvdW50SW5mby5wcm9maWxlICYmIGFjY291bnRJbmZvLnByb2ZpbGUuZW1haWwpO1xyXG4gICAgICAgIGdpZ3lhLmFjY291bnRzLm90cC5zZW5kQ29kZShcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVnVG9rZW46IGZvcm0uX3NjcmVlblNldC5kYXRhLnJlZ1Rva2VuLFxyXG4gICAgICAgICAgICAgICAgZW1haWw6IGFjY291bnRJbmZvLmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXMuZXJyb3JDb2RlID09IEdTRXJyb3JzLk9LKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0uX3NjcmVlblNldC5kYXRhLm90cERhdGEudlRva2VuID0gcmVzLnZUb2tlbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZm9ybS5fc2NyZWVuLnBlbmRpbmdDb2RlVmVyaWZpY2F0aW9uU2NyZWVuO1xyXG4gICAgfVxyXG59O1xyXG5EZWVwRnJlZXplKFBlbmRpbmdFcnJvckF0dHJpYnV0ZXMpO1xyXG5leHBvcnQgZnVuY3Rpb24gbm90SW1wbGVtZW50ZXJBYnN0cmFjdCgpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignTk9UIElNUExFTUVOVEVEJyk7XHJcbn1cclxuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSB9IGZyb20gXCIuLi91dGlsc1wiO1xyXG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gXCIuLi9CYXNlRm9ybVwiO1xyXG5pbXBvcnQgeyBJRm9ybUNvbnRleHQgfSBmcm9tIFwiLi4vSUZvcm1Db250ZXh0XCI7XHJcblxyXG5jb25zdCBnZXRBdHRyaWJ1dGUgPSBnaWd5YS5fLnBsdWdpbnMudXRpbHMuRE9NLmdldEF0dHJpYnV0ZTtcclxuXHJcbmV4cG9ydCB2YXIgQXV0aE1ldGhvZHNGb3JtX0NPTlNUUyA9IHtcclxuICAgIGdpZ3lhQ2xhc3M6ICdnaWd5YS1hdXRoLW1ldGhvZHMtZm9ybScsXHJcbn07XHJcblxyXG5EZWVwRnJlZXplKEF1dGhNZXRob2RzRm9ybV9DT05TVFMpO1xyXG5cclxuZXhwb3J0IGNsYXNzIEF1dGhNZXRob2RzRm9ybSBleHRlbmRzIEJhc2VGb3JtIHtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IEF1dGhNZXRob2RzRm9ybV9DT05TVFM7XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYXV0aE1ldGhvZEJ1dHRvbnM6IEhUTUxFbGVtZW50W10gPSBbXTtcclxuXHJcbiAgICBwdWJsaWMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KCdbZGF0YS1hdXRoLW1ldGhvZF0nKVxyXG4gICAgICAgICAgICAuZm9yRWFjaChlbCA9PiB0aGlzLl9hdXRoTWV0aG9kQnV0dG9ucy5wdXNoKGVsKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNoZWNrQXV0b1NraXAoZm9ybUNvbnRleHQ6IElGb3JtQ29udGV4dCwgY2FsbGJhY2s6IChjYW5Ta2lwOiBib29sZWFuKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgc3VwZXIuY2hlY2tBdXRvU2tpcChmb3JtQ29udGV4dCwgZm9ybUNhblNraXAgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZm9ybUNhblNraXApIHsgLy8gYXV0by1za2lwIGlzIGVuYWJsZWRcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuYWJsZWRBdXRoTWV0aG9kcyA9IHRoaXMuZ2V0RW5hYmxlZEF1dGhNZXRob2RzKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5hYmxlZEF1dGhNZXRob2RzLmxlbmd0aCA9PSAxIC8vIG9ubHkgMSBhY3RpdmUgYXV0aCBtZXRob2RcclxuICAgICAgICAgICAgICAgICAgICB8fCAhZm9ybUNvbnRleHQuZXhwbGljaXRTd2l0Y2hTY3JlZW4pIHsgLy8gbmF2aWdhdGlvbiB0byBzY3JlZW4gd2Fzbid0IGV4cGxpY2l0IChleHBsaWNpdCBtZWFuczogY2xpY2tpbmcgb24gYSBsaW5rIHRoYXQgc2F5cyBcIkNoYW5nZSBhdXRoIG1ldGhvZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0b1NraXBTY3JlZW4gPSB0aGlzLmdldERlZmF1bHRBdXRoU2NyZWVuKGVuYWJsZWRBdXRoTWV0aG9kcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXREZWZhdWx0QXV0aFNjcmVlbihlbmFibGVkQXV0aE1ldGhvZHM6IHN0cmluZ1tdKTogc3RyaW5nIHtcclxuXHJcbiAgICAgICAgaWYgKCFlbmFibGVkQXV0aE1ldGhvZHMgfHwgIWVuYWJsZWRBdXRoTWV0aG9kcy5sZW5ndGgpe1xyXG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIud2FybignY291bGQgbm90IGZpbmQgZGVmYXVsdCBhdXRoIG1ldGhvZCcpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRBdXRoTWV0aG9kID0gZW5hYmxlZEF1dGhNZXRob2RzW2VuYWJsZWRBdXRoTWV0aG9kcy5sZW5ndGggLSAxXTsgLy8gZ2V0IGxhc3QgZW5hYmxlZCBhdXRoIG1ldGhvZFxyXG4gICAgICAgIGNvbnN0IGF1dGhNZXRob2RCdXR0b24gPSB0aGlzLl9hdXRoTWV0aG9kQnV0dG9ucy5maW5kKHggPT4gZ2V0QXR0cmlidXRlKHgsICdkYXRhLWF1dGgtbWV0aG9kJykgPT09IGRlZmF1bHRBdXRoTWV0aG9kKTtcclxuXHJcbiAgICAgICAgaWYgKCFhdXRoTWV0aG9kQnV0dG9uKXtcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBsYXN0IGF1dGgtbWV0aG9kIGZyb20gdGhlIGxpc3QgKHRoZSBvbmUgd2UgY291bGQnbnQgZmluZCBhIG1hdGNoIGZvcilcclxuICAgICAgICAgICAgZW5hYmxlZEF1dGhNZXRob2RzLnBvcCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREZWZhdWx0QXV0aFNjcmVlbihlbmFibGVkQXV0aE1ldGhvZHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZGVmYXVsdEF1dGhTY3JlZW4gPSBnZXRBdHRyaWJ1dGUoYXV0aE1ldGhvZEJ1dHRvbiwgJ2RhdGEtc3dpdGNoLXNjcmVlbicpO1xyXG4gICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKCdmb3VuZCBkZWZhdWx0IGF1dGgtc2NyZWVuJywge3N1Y2Nlc3NTY3JlZW46IGRlZmF1bHRBdXRoU2NyZWVufSk7XHJcblxyXG4gICAgICAgIHJldHVybiBkZWZhdWx0QXV0aFNjcmVlbjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEVuYWJsZWRBdXRoTWV0aG9kcygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgY29uc3QgYXBpRGF0YSA9IHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCk7XHJcbiAgICAgICAgcmV0dXJuIGFwaURhdGEuZ2V0QWNjb3VudEluZm8/LmF1dGhNZXRob2RzPy5zbGljZSgpIHx8IFtdO1xyXG4gICAgfVxyXG59XHJcblxyXG5CYXNlRm9ybS5hZGRGb3JtVG9MaWJyYXJ5KEF1dGhNZXRob2RzRm9ybSk7XHJcbiIsImltcG9ydCB7IERlZXBGcmVlemUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcclxuaW1wb3J0IHsgQmFzZUZvcm0gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtJztcclxuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xyXG5pbXBvcnQgeyBMb2dpbk1vZGVzIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Mb2dpbk1vZGVzJztcclxuaW1wb3J0IHsgSUZvcm1SZXNwb25zZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UGx1Z2luJztcclxuXHJcbmV4cG9ydCB2YXIgTGlua0FjY291bnRzRm9ybV9DT05TVFMgPSB7XHJcbiAgICBnaWd5YUNsYXNzOiAnZ2lneWEtbGluay1hY2NvdW50cy1mb3JtJyxcclxufTtcclxuRGVlcEZyZWV6ZShMaW5rQWNjb3VudHNGb3JtX0NPTlNUUyk7XHJcbmV4cG9ydCBjbGFzcyBMaW5rQWNjb3VudHNGb3JtIGV4dGVuZHMgQmFzZUZvcm0ge1xyXG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBMaW5rQWNjb3VudHNGb3JtX0NPTlNUUztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzY3JlZW46IFNjcmVlbiwgZWxGb3JtOiBIVE1MRm9ybUVsZW1lbnQsIGdpZ3lhQ2xhc3M6IHN0cmluZykge1xyXG4gICAgICAgIHN1cGVyKHNjcmVlbiwgZWxGb3JtLCBnaWd5YUNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcHJlUG9wdWxhdGVEYXRhKCkge1xyXG4gICAgICAgIHZhciBwb3B1bGF0ZURhdGEgPSBzdXBlci5wcmVQb3B1bGF0ZURhdGEoKTtcclxuXHJcbiAgICAgICAgdmFyIGFwaURhdGEgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpO1xyXG4gICAgICAgIHZhciBjb25mbGljdGluZ0FjY291bnQgPSBhcGlEYXRhICYmIGFwaURhdGEuZ2V0Q29uZmxpY3RpbmdBY2NvdW50ICYmIGFwaURhdGEuZ2V0Q29uZmxpY3RpbmdBY2NvdW50LmNvbmZsaWN0aW5nQWNjb3VudDtcclxuXHJcbiAgICAgICAgaWYgKGNvbmZsaWN0aW5nQWNjb3VudCkgcG9wdWxhdGVEYXRhLmxvZ2luSUQgPSBjb25mbGljdGluZ0FjY291bnQubG9naW5JRCB8fCAoY29uZmxpY3RpbmdBY2NvdW50LmVtYWlscyAmJiBjb25mbGljdGluZ0FjY291bnQuZW1haWxzWzBdKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBvcHVsYXRlRGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3BlY2lhbEZpZWxkcygpIHtcclxuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcclxuICAgICAgICAgICAgc3VwZXIuc3BlY2lhbEZpZWxkcygpLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2dpbklEOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN1Ym1pdEFwaSgpIHtcclxuICAgICAgICByZXR1cm4gZ2lneWEuYWNjb3VudHMubG9naW47XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE5lZWRlZERhdGEoKSB7XHJcbiAgICAgICAgdmFyIG5lZWRlZERhdGEgPSBzdXBlci5nZXROZWVkZWREYXRhKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbikge1xyXG4gICAgICAgICAgICBuZWVkZWREYXRhID0gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcclxuICAgICAgICAgICAgICAgIC8vIG9ubHkgYnJpbmcgaW4gY29uZmxpY3RpbmcgYWNjb3VudHMgaWYgdGhlcmUgaXMgYSByZWdUb2tlbiBwcmVzZW50XHJcbiAgICAgICAgICAgICAgICBuZWVkZWREYXRhLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGdldENvbmZsaWN0aW5nQWNjb3VudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ1Rva2VuOiB0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmVlZGVkRGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVmYXVsdFN1Ym1pdFBhcmFtcygpIHtcclxuICAgICAgICB2YXIgYXBpRGF0YSA9IHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCk7XHJcbiAgICAgICAgdmFyIGNvbmZsaWN0aW5nQWNjb3VudCA9IGFwaURhdGEgJiYgYXBpRGF0YS5nZXRDb25mbGljdGluZ0FjY291bnQgJiYgYXBpRGF0YS5nZXRDb25mbGljdGluZ0FjY291bnQuY29uZmxpY3RpbmdBY2NvdW50O1xyXG5cclxuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcclxuICAgICAgICAgICAgc3VwZXIuZGVmYXVsdFN1Ym1pdFBhcmFtcygpLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2dpbk1vZGU6IExvZ2luTW9kZXMubGluay5uYW1lLFxyXG4gICAgICAgICAgICAgICAgbG9naW5JRDogY29uZmxpY3RpbmdBY2NvdW50ICYmIChjb25mbGljdGluZ0FjY291bnQubG9naW5JRCB8fCAoY29uZmxpY3RpbmdBY2NvdW50LmVtYWlscyAmJiBjb25mbGljdGluZ0FjY291bnQuZW1haWxzWzBdKSksXHJcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiBnaWd5YS51dGlscy5zdHJpbmdVdGlscy5tZXJnZUNvbW1hU2VwYXJhdGVkVmFsdWVzKFxyXG4gICAgICAgICAgICAgICAgICAgICdwcm9maWxlLGRhdGEsc3Vic2NyaXB0aW9ucyxwcmVmZXJlbmNlcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5pbmNsdWRlKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRMb2dpblByb3ZpZGVycygpIHtcclxuICAgICAgICByZXR1cm4gTG9naW5Nb2Rlcy5saW5rLmdldExvZ2luUHJvdmlkZXJzKHRoaXMuX3NjcmVlblNldC5kYXRhLmFwaURhdGEsIHRoaXMuX3NjcmVlblNldC5wYXJhbXMsIHRoaXMuX3NjcmVlblNldC5kYXRhLnJlZ1Rva2VuKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25Ta2lwcGVkKHJlc3BvbnNlOiBJRm9ybVJlc3BvbnNlKSB7XHJcbiAgICAgICAgdGhpcy5fc2NyZWVuU2V0LmRhdGEuZXh0cmFFdmVudERhdGEuYWxsb3dBY2NvdW50c0xpbmtpbmcgPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcbkJhc2VGb3JtLmFkZEZvcm1Ub0xpYnJhcnkoTGlua0FjY291bnRzRm9ybSk7XHJcbiIsImltcG9ydCB7IERlZXBGcmVlemUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcclxuaW1wb3J0IHsgQmFzZUZvcm0gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtJztcclxuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xyXG5pbXBvcnQgeyBJRm9ybVJlc3BvbnNlLCBJU2NyZWVuU2V0UGFyYW1zIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5TZXRQbHVnaW4nO1xyXG5pbXBvcnQgeyBMb2dpbk1vZGVzIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Mb2dpbk1vZGVzJztcclxuaW1wb3J0IHtHU0Vycm9yc30gZnJvbSBcIi4uLy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzXCI7XHJcblxyXG5leHBvcnQgdmFyIExvZ2luRm9ybV9DT05TVFMgPSB7XHJcbiAgICBnaWd5YUNsYXNzOiAnZ2lneWEtbG9naW4tZm9ybScsXHJcbn07XHJcbkRlZXBGcmVlemUoTG9naW5Gb3JtX0NPTlNUUyk7XHJcbmV4cG9ydCBjbGFzcyBMb2dpbkZvcm0gZXh0ZW5kcyBCYXNlRm9ybSB7XHJcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IExvZ2luRm9ybV9DT05TVFM7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2NyZWVuOiBTY3JlZW4sIGVsRm9ybTogSFRNTEZvcm1FbGVtZW50LCBnaWd5YUNsYXNzOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcihzY3JlZW4sIGVsRm9ybSwgZ2lneWFDbGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNwZWNpYWxGaWVsZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXHJcbiAgICAgICAgICAgIHN1cGVyLnNwZWNpYWxGaWVsZHMoKSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9naW5JRDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2FwdGNoYVRleHQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjYXB0Y2hhVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN1Ym1pdEFwaSgpIHtcclxuICAgICAgICByZXR1cm4gZ2lneWEuYWNjb3VudHMubG9naW47XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEVycm9yS2V5KHJlc3BvbnNlOiBJRm9ybVJlc3BvbnNlKTogc3RyaW5nIHtcclxuICAgICAgICBpZihyZXNwb25zZS5lcnJvckNvZGUgPT09IEdTRXJyb3JzLk9MRF9QQVNTV09SRF9VU0VEKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnb2xkX3Bhc3N3b3JkX3VzZWQnO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3VwZXIuZ2V0RXJyb3JLZXkocmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBfZ2V0U3VibWl0QXBpUGFyYW1zKHBhcmFtczogSVNjcmVlblNldFBhcmFtcyk6IElTY3JlZW5TZXRQYXJhbXMge1xyXG4gICAgICAgIHBhcmFtcyA9IExvZ2luTW9kZXMuc3RhbmRhcmQuZmlsdGVyUGFyYW1zKHBhcmFtcyk7XHJcblxyXG4gICAgICAgIHJldHVybiBzdXBlci5fZ2V0U3VibWl0QXBpUGFyYW1zKHBhcmFtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlZmF1bHRTdWJtaXRQYXJhbXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXHJcbiAgICAgICAgICAgIHN1cGVyLmRlZmF1bHRTdWJtaXRQYXJhbXMoKSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9naW5Nb2RlOiBMb2dpbk1vZGVzLnN0YW5kYXJkLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiBnaWd5YS51dGlscy5zdHJpbmdVdGlscy5tZXJnZUNvbW1hU2VwYXJhdGVkVmFsdWVzKFxyXG4gICAgICAgICAgICAgICAgICAgICdwcm9maWxlLGRhdGEsZW1haWxzLHN1YnNjcmlwdGlvbnMscHJlZmVyZW5jZXMnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5wYXJhbXMuaW5jbHVkZSlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICBdKTtcclxuICAgIH1cclxufVxyXG5CYXNlRm9ybS5hZGRGb3JtVG9MaWJyYXJ5KExvZ2luRm9ybSk7XHJcbiIsImltcG9ydCB7IERlZXBGcmVlemUsIElNYXAgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcclxuaW1wb3J0IHsgQmFzZUZvcm0gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtJztcclxuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xyXG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gJy4uLy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcclxuXHJcbmV4cG9ydCB2YXIgTmV3c2xldHRlclNpZ251cF9DT05TVFMgPSB7XHJcbiAgICBnaWd5YUNsYXNzOiAnZ2lneWEtc3Vic2NyaWJlLXdpdGgtZW1haWwtZm9ybScsXHJcbn07XHJcbmV4cG9ydCB0eXBlIE5ld3NsZXR0ZXJEYXRhID0ge1xyXG4gICAgZ2V0U2NoZW1hOiB7IHBhcmFtczogYW55IH07XHJcbiAgICBnZXRBY2NvdW50SW5mbzogeyBwYXJhbXM6IGFueSB9O1xyXG4gICAgaW5pdFJlZ2lzdHJhdGlvbj86IHsgcGFyYW1zOiBhbnk7IGNhY2hlOiBib29sZWFuIH07XHJcbn07XHJcbkRlZXBGcmVlemUoTmV3c2xldHRlclNpZ251cF9DT05TVFMpO1xyXG5leHBvcnQgY2xhc3MgTmV3c2xldHRlclNpZ251cEZvcm0gZXh0ZW5kcyBCYXNlRm9ybSB7XHJcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IE5ld3NsZXR0ZXJTaWdudXBfQ09OU1RTO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNjcmVlbjogU2NyZWVuLCBlbEZvcm06IEhUTUxGb3JtRWxlbWVudCwgZ2lneWFDbGFzczogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIoc2NyZWVuLCBlbEZvcm0sIGdpZ3lhQ2xhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwcmVQb3B1bGF0ZURhdGFGcm9tKCkge1xyXG4gICAgICAgIHJldHVybiBbJ2dldEFjY291bnRJbmZvJywgJ2dldEFjY291bnRJbmZvLnByb2ZpbGUnXTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXROZWVkZWREYXRhKCkge1xyXG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW1xyXG4gICAgICAgICAgICBzdXBlci5nZXROZWVkZWREYXRhKCksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdldFNjaGVtYToge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczoge30sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZ2V0QWNjb3VudEluZm86IHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZTogJ2VtYWlscyxwcm9maWxlLHN1YnNjcmlwdGlvbnMscHJlZmVyZW5jZXMnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF0pIGFzIE5ld3NsZXR0ZXJEYXRhO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHBlcmZvcm1TdWJtaXQob1BhcmFtczogYW55KSB7XHJcbiAgICAgICAgbGV0IHJlZ1RvayA9IHRoaXMuX3NjcmVlblNldC5wYXJhbXMucmVnVG9rZW4gfHwgdGhpcy5fc2NyZWVuU2V0LmRhdGEucmVnVG9rZW47XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpLmdldEFjY291bnRJbmZvLnN0YXR1cyA9PT0gJ09LJyB8fCByZWdUb2spIHtcclxuICAgICAgICAgICAgb1BhcmFtcyA9IHRoaXMuc2V0U3Vic2NyaXB0aW9ucyhvUGFyYW1zLCByZWdUb2spO1xyXG4gICAgICAgICAgICBzdXBlci5wZXJmb3JtU3VibWl0KG9QYXJhbXMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGdpZ3lhLmFjY291bnRzLmluaXRSZWdpc3RyYXRpb24oe1xyXG4gICAgICAgICAgICAgICAgaXNMaXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5yZWdUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvUGFyYW1zID0gdGhpcy5zZXRTdWJzY3JpcHRpb25zKG9QYXJhbXMsIHJlcy5yZWdUb2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHN1cGVyLnBlcmZvcm1TdWJtaXQob1BhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRTdWJzY3JpcHRpb25zKG9QYXJhbXM6IGFueSwgcmVnVG9rZW4/OiBhbnkpIHtcclxuICAgICAgICBpZiAocmVnVG9rZW4pIHtcclxuICAgICAgICAgICAgb1BhcmFtc1sncmVnVG9rZW4nXSA9IHJlZ1Rva2VuO1xyXG4gICAgICAgICAgICAvLyB0aGlzIHNob3VsZCBzdG9yZSB0aGUgcmVnVG9rZW4gZm9yIGZ1dHVyZSBzY3JlZW5zIGluIHRoZSBzYW1lIHNjcmVlbiBzZXQuLi5cclxuICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5yZWdUb2tlbiA9IHJlZ1Rva2VuO1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbiA9IHJlZ1Rva2VuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9QYXJhbXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN1Ym1pdEFwaSgpIHtcclxuICAgICAgICByZXR1cm4gZ2lneWEuYWNjb3VudHMuc2V0QWNjb3VudEluZm87XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uQWZ0ZXJTdWJtaXQocmVzcG9uc2UpIHtcclxuICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09IEdTRXJyb3JzLk9LKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhOiBhbnkgPSB0aGlzLmdldEZvcm1EYXRhKHRydWUsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmb3JtRGF0YS5lbWFpbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmb3JtRGF0YS5wcm9maWxlKSBmb3JtRGF0YS5wcm9maWxlID0ge307XHJcbiAgICAgICAgICAgICAgICBmb3JtRGF0YS5wcm9maWxlLmVtYWlsID0gZm9ybURhdGEuZW1haWw7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgZm9ybURhdGEuZW1haWw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5vbkFjY291bnRJbmZvKGZvcm1EYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN1cGVyLm9uQWZ0ZXJTdWJtaXQocmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXF1aXJlZEZpZWxkcygpOiBJTWFwPGJvb2xlYW4+IHtcclxuICAgICAgICBsZXQgcmVxdWlyZWRGaWVsZHMgPSBzdXBlci5yZXF1aXJlZEZpZWxkcygpO1xyXG4gICAgICAgIHJlcXVpcmVkRmllbGRzWydlbWFpbCddID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcXVpcmVkRmllbGRzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzY2hlbWFWYWxpZGF0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuQmFzZUZvcm0uYWRkRm9ybVRvTGlicmFyeShOZXdzbGV0dGVyU2lnbnVwRm9ybSk7XHJcbiIsImltcG9ydCB7IERlZXBGcmVlemUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcclxuaW1wb3J0IHsgQmFzZUZvcm0gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtJztcclxuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xyXG5cclxuZXhwb3J0IHZhciBPcmdSZWdpc3RlckZvcm1fQ09OU1RTID0ge1xyXG4gICAgZ2lneWFDbGFzczogJ2dpZ3lhLW9yZy1yZWdpc3Rlci1mb3JtJyxcclxufTtcclxuXHJcbkRlZXBGcmVlemUoT3JnUmVnaXN0ZXJGb3JtX0NPTlNUUyk7XHJcblxyXG5leHBvcnQgY2xhc3MgT3JnUmVnaXN0ZXJGb3JtIGV4dGVuZHMgQmFzZUZvcm0ge1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gT3JnUmVnaXN0ZXJGb3JtX0NPTlNUUztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzY3JlZW46IFNjcmVlbiwgZWxGb3JtOiBIVE1MRm9ybUVsZW1lbnQsIGdpZ3lhQ2xhc3M6IHN0cmluZykge1xyXG4gICAgICAgIHN1cGVyKHNjcmVlbiwgZWxGb3JtLCBnaWd5YUNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBtZXJnZXMgdGhlIFwib3JnYW5pemF0aW9uU2NoZW1hXCIgYW5kIFwicmVxdWVzdGVyU2NoZW1hXCIgZmllbGRzXHJcbiAgICAvLyBmcm9tIHRoZSBnZXRPcmdhbml6YXRpb25TY2hlbWEgcmVzcG9uc2VcclxuICAgIC8vIGludG8gdGhlIFwiZ2VuZXJhbFwiIHNjaGVtYSAoZ2V0U2NoZW1hIHJlc3BvbnNlKVxyXG4gICAgcHJpdmF0ZSBtZXJnZU9yZ1NjaGVtYUludG9NYWluU2NoZW1hKG1haW5TY2hlbWEsIG9yZ1NjaGVtYSl7XHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbbWFpblNjaGVtYSwge1xyXG4gICAgICAgICAgICBvcmdhbml6YXRpb25TY2hlbWE6IG9yZ1NjaGVtYS5vcmdhbml6YXRpb25TY2hlbWEsXHJcbiAgICAgICAgICAgIHJlcXVlc3RlclNjaGVtYTogb3JnU2NoZW1hLnJlcXVlc3RlclNjaGVtYVxyXG4gICAgICAgIH1dLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcHJlUG9wdWxhdGVEYXRhRnJvbSgpIHtcclxuICAgICAgICByZXR1cm4gWydnZXRPcmdhbml6YXRpb25TY2hlbWEnXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TmVlZGVkRGF0YSgpIHtcclxuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcclxuICAgICAgICAgICAgc3VwZXIuZ2V0TmVlZGVkRGF0YSgpLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBnZXRPcmdhbml6YXRpb25TY2hlbWE6IHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSGFuZGxlcjogb3JnU2NoZW1hID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFpblNjaGVtYSA9IHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCkuZ2V0U2NoZW1hO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFpblNjaGVtYSkgdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKS5nZXRTY2hlbWEgPSB0aGlzLm1lcmdlT3JnU2NoZW1hSW50b01haW5TY2hlbWEobWFpblNjaGVtYSwgb3JnU2NoZW1hKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yZ1NjaGVtYTsgLy8gcmV0dXJuIGdldE9yZ1NjaGVtYVJlc3BvbnNlXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBnZXRTY2hlbWE6IHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSGFuZGxlcjogbWFpblNjaGVtYSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yZ1NjaGVtYSA9IHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCkuZ2V0T3JnYW5pemF0aW9uU2NoZW1hO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tZXJnZU9yZ1NjaGVtYUludG9NYWluU2NoZW1hKG1haW5TY2hlbWEsIG9yZ1NjaGVtYSB8fCB7fSk7IC8vIHJldHVybiB0aGUgbWVyZ2VkIHNjaGVtYVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2NoZW1hVmFsaWRhdGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdWJtaXRBcGkoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLmFjY291bnRzLmIyYi5yZWdpc3Rlck9yZ2FuaXphdGlvbjtcclxuICAgIH1cclxufVxyXG5cclxuQmFzZUZvcm0uYWRkRm9ybVRvTGlicmFyeShPcmdSZWdpc3RlckZvcm0pO1xyXG4iLCJpbXBvcnQge0RlZXBGcmVlemV9IGZyb20gXCIuLi91dGlsc1wiO1xyXG5pbXBvcnQge0Jhc2VGb3JtfSBmcm9tIFwiLi4vQmFzZUZvcm1cIjtcclxuaW1wb3J0IHtPdHBWZXJpZmljYXRpb25CYXNlRm9ybX0gZnJvbSBcIi4vT3RwVmVyaWZpY2F0aW9uQmFzZUZvcm1cIjtcclxuZXhwb3J0IHZhciBPdHBMb2dpbkZvcm1fQ09OU1RTID0ge1xyXG4gICAgZ2lneWFDbGFzczogJ2dpZ3lhLW90cC1sb2dpbi1mb3JtJyxcclxufTtcclxuXHJcbkRlZXBGcmVlemUoT3RwTG9naW5Gb3JtX0NPTlNUUyk7XHJcblxyXG5leHBvcnQgY2xhc3MgT3RwTG9naW5Gb3JtIGV4dGVuZHMgT3RwVmVyaWZpY2F0aW9uQmFzZUZvcm0ge1xyXG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBPdHBMb2dpbkZvcm1fQ09OU1RTO1xyXG4gICAgcHVibGljIHN1Ym1pdEFwaSgpIHtcclxuICAgICAgICByZXR1cm4gZ2lneWEuYWNjb3VudHMub3RwLmxvZ2luO1xyXG4gICAgfVxyXG59XHJcblxyXG5CYXNlRm9ybS5hZGRGb3JtVG9MaWJyYXJ5KE90cExvZ2luRm9ybSk7XHJcblxyXG4vLyByZWdpb24gbW9iaWxlLWxvZ2luIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcclxuLy8gZm9yIG9sZCBzY3JlZW4gc2V0cyB0aGF0IHVzZXMgJ2dpZ3lhLW1vYmlsZS12ZXJpZmljYXRpb24tZm9ybSdcclxuZXhwb3J0IHZhciBNb2JpbGVMb2dpblZlcmlmaWNhdGlvbkZvcm1fQ09OU1RTID0ge1xyXG4gICAgZ2lneWFDbGFzczogJ2dpZ3lhLW1vYmlsZS12ZXJpZmljYXRpb24tZm9ybScsXHJcbn07XHJcblxyXG5EZWVwRnJlZXplKE1vYmlsZUxvZ2luVmVyaWZpY2F0aW9uRm9ybV9DT05TVFMpO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1vYmlsZUxvZ2luVmVyaWZpY2F0aW9uRm9ybSBleHRlbmRzIE90cExvZ2luRm9ybSB7XHJcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IE1vYmlsZUxvZ2luVmVyaWZpY2F0aW9uRm9ybV9DT05TVFM7XHJcbn1cclxuXHJcbkJhc2VGb3JtLmFkZEZvcm1Ub0xpYnJhcnkoTW9iaWxlTG9naW5WZXJpZmljYXRpb25Gb3JtKTtcclxuLy8gZW5kcmVnaW9uIiwiaW1wb3J0IHtEZWVwRnJlZXplfSBmcm9tIFwiLi4vdXRpbHNcIjtcclxuaW1wb3J0IHtCYXNlRm9ybX0gZnJvbSBcIi4uL0Jhc2VGb3JtXCI7XHJcblxyXG5leHBvcnQgdmFyIE90cFNlbmRDb2RlRm9ybV9DT05TVFMgPSB7XHJcbiAgICBnaWd5YUNsYXNzOiAnZ2lneWEtb3RwLXNlbmQtY29kZS1mb3JtJyxcclxufTtcclxuXHJcbkRlZXBGcmVlemUoT3RwU2VuZENvZGVGb3JtX0NPTlNUUyk7XHJcblxyXG5leHBvcnQgY2xhc3MgT3RwU2VuZENvZGVGb3JtIGV4dGVuZHMgQmFzZUZvcm0ge1xyXG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBPdHBTZW5kQ29kZUZvcm1fQ09OU1RTO1xyXG5cclxuICAgIHB1YmxpYyBzdWJtaXRBcGkoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLmFjY291bnRzLm90cC5zZW5kQ29kZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcHJlUG9wdWxhdGVEYXRhRnJvbSgpOiBhbnkge1xyXG4gICAgICAgIHJldHVybiBbJ2dldEFjY291bnRJbmZvJywgJ2dldEFjY291bnRJbmZvLnByb2ZpbGUnXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25BZnRlclN1Ym1pdChyZXNwb25zZSkge1xyXG4gICAgICAgIHRoaXMuX3NjcmVlblNldC5kYXRhLm90cERhdGEudlRva2VuID0gcmVzcG9uc2VbJ3ZUb2tlbiddO1xyXG4gICAgICAgIHN1cGVyLm9uQWZ0ZXJTdWJtaXQocmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzcGVjaWFsRmllbGRzKCkge1xyXG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW1xyXG4gICAgICAgICAgICBzdXBlci5zcGVjaWFsRmllbGRzKCksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZW1haWw6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcGVyZm9ybVN1Ym1pdChvUGFyYW1zOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9zYXZlU3BlY2lhbEZpZWxkc0luQ2FjaGUoKTtcclxuICAgICAgICBzdXBlci5wZXJmb3JtU3VibWl0KG9QYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3NhdmVTcGVjaWFsRmllbGRzSW5DYWNoZSgpIHtcclxuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IHRoaXMuZ2V0Rm9ybURhdGEodHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKS5nZXRBY2NvdW50SW5mbyA9IHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCkuZ2V0QWNjb3VudEluZm8gfHwge307XHJcbiAgICAgICAgY29uc3Qgc3BlY2lhbEZpZWxkcyA9IHRoaXMuc3BlY2lhbEZpZWxkcygpO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHNwZWNpYWxGaWVsZHMpXHJcbiAgICAgICAgICAgIC5maWx0ZXIoc3BlY2lhbEZpZWxkID0+IEJvb2xlYW4oc3BlY2lhbEZpZWxkc1tzcGVjaWFsRmllbGRdKSlcclxuICAgICAgICAgICAgLmZvckVhY2goc3BlY2lhbEZpZWxkID0+IHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKS5nZXRBY2NvdW50SW5mbywge1tzcGVjaWFsRmllbGRdOiBmb3JtRGF0YVtzcGVjaWFsRmllbGRdfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5CYXNlRm9ybS5hZGRGb3JtVG9MaWJyYXJ5KE90cFNlbmRDb2RlRm9ybSk7XHJcblxyXG4vLyByZWdpb24gbW9iaWxlLWxvZ2luIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcclxuLy8gZm9yIG9sZCBzY3JlZW4gc2V0cyB0aGF0IHVzZXMgJ2dpZ3lhLW1vYmlsZS12ZXJpZmljYXRpb24tZm9ybSdcclxuZXhwb3J0IHZhciBNb2JpbGVMb2dpbkZvcm1fQ09OU1RTID0ge1xyXG4gICAgZ2lneWFDbGFzczogJ2dpZ3lhLW1vYmlsZS1sb2dpbi1mb3JtJyxcclxufTtcclxuXHJcbkRlZXBGcmVlemUoTW9iaWxlTG9naW5Gb3JtX0NPTlNUUyk7XHJcblxyXG5leHBvcnQgY2xhc3MgTW9iaWxlTG9naW5Gb3JtIGV4dGVuZHMgT3RwU2VuZENvZGVGb3JtIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gTW9iaWxlTG9naW5Gb3JtX0NPTlNUUztcclxufVxyXG5cclxuQmFzZUZvcm0uYWRkRm9ybVRvTGlicmFyeShNb2JpbGVMb2dpbkZvcm0pO1xyXG4vLyBlbmRyZWdpb25cclxuIiwiaW1wb3J0IHtEZWVwRnJlZXplfSBmcm9tIFwiLi4vdXRpbHNcIjtcclxuaW1wb3J0IHtCYXNlRm9ybX0gZnJvbSBcIi4uL0Jhc2VGb3JtXCI7XHJcbmltcG9ydCB7T3RwVmVyaWZpY2F0aW9uQmFzZUZvcm19IGZyb20gXCIuL090cFZlcmlmaWNhdGlvbkJhc2VGb3JtXCI7XHJcblxyXG5leHBvcnQgdmFyIE90cFVwZGF0ZUZvcm1fQ09OU1RTID0ge1xyXG4gICAgZ2lneWFDbGFzczogJ2dpZ3lhLW90cC11cGRhdGUtZm9ybScsXHJcbn07XHJcblxyXG5EZWVwRnJlZXplKE90cFVwZGF0ZUZvcm1fQ09OU1RTKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBPdHBVcGRhdGVGb3JtIGV4dGVuZHMgT3RwVmVyaWZpY2F0aW9uQmFzZUZvcm0ge1xyXG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBPdHBVcGRhdGVGb3JtX0NPTlNUUztcclxuXHJcbiAgICBwdWJsaWMgc3VibWl0QXBpKCkge1xyXG4gICAgICAgIHJldHVybiBnaWd5YS5hY2NvdW50cy5vdHAudXBkYXRlO1xyXG4gICAgfVxyXG59XHJcblxyXG5CYXNlRm9ybS5hZGRGb3JtVG9MaWJyYXJ5KE90cFVwZGF0ZUZvcm0pO1xyXG4iLCJpbXBvcnQge0Jhc2VGb3JtfSBmcm9tIFwiLi4vQmFzZUZvcm1cIjtcclxuaW1wb3J0IHtHU0Vycm9yc30gZnJvbSBcIi4uLy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzXCI7XHJcbmltcG9ydCB7IElGb3JtUmVzcG9uc2UgfSBmcm9tIFwiLi4vU2NyZWVuU2V0UGx1Z2luXCI7XHJcbmltcG9ydCB7ZW5kc1dpdGh9IGZyb20gXCIuLi91dGlsc1wiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIE90cFZlcmlmaWNhdGlvbkJhc2VGb3JtIGV4dGVuZHMgQmFzZUZvcm0ge1xyXG5cclxuICAgIHB1YmxpYyBzcGVjaWFsRmllbGRzKCkge1xyXG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW1xyXG4gICAgICAgICAgICBzdXBlci5zcGVjaWFsRmllbGRzKCksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvZGU6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RXJyb3JLZXkocmVzcG9uc2U6IElGb3JtUmVzcG9uc2UpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmKHJlc3BvbnNlLmVycm9yQ29kZSA9PT0gR1NFcnJvcnMuSU5WQUxJRF9QQVJBTUVURVJfVkFMVUUgJiYgcmVzcG9uc2UuZXJyb3JEZXRhaWxzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlbmRzV2l0aChyZXNwb25zZS5lcnJvckRldGFpbHMsICdUb2tlbiBoYXMgYmVlbiByZXZva2VkJykgP1xyXG4gICAgICAgICAgICAgICAgJ290cF9jb2RlX2V4cGlyZWQnIDpcclxuICAgICAgICAgICAgICAgIGVuZHNXaXRoKHJlc3BvbnNlLmVycm9yRGV0YWlscywgJ3Bob25lTnVtYmVyIGFscmVhZHkgZXhpc3RzJykgP1xyXG4gICAgICAgICAgICAgICAgJ3Bob25lX251bWJlcl9leGlzdHMnIDpcclxuICAgICAgICAgICAgICAgIGVuZHNXaXRoKHJlc3BvbnNlLmVycm9yRGV0YWlscywgJ2NvZGUnKSA/XHJcbiAgICAgICAgICAgICAgICAncGxlYXNlX2VudGVyX2FfdmFsaWRfY29kZScgOlxyXG4gICAgICAgICAgICAgICAgc3VwZXIuZ2V0RXJyb3JLZXkocmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3VwZXIuZ2V0RXJyb3JLZXkocmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZWZhdWx0U3VibWl0UGFyYW1zKCk6IHt9IHtcclxuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcclxuICAgICAgICAgICAgc3VwZXIuZGVmYXVsdFN1Ym1pdFBhcmFtcygpLFxyXG4gICAgICAgICAgICB7dlRva2VuOiB0aGlzLl9zY3JlZW5TZXQuZGF0YS5vdHBEYXRhLnZUb2tlbn1cclxuICAgICAgICBdKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSBcIi4uL3V0aWxzXCI7XHJcbmltcG9ydCB7IElTY3JlZW5TZXRQYXJhbXMgfSBmcm9tIFwiLi4vU2NyZWVuU2V0UGx1Z2luXCI7XHJcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSBcIi4uL0Jhc2VGb3JtXCI7XHJcbmltcG9ydCB7IExvZ2luRm9ybSB9IGZyb20gXCIuL0xvZ2luRm9ybVwiO1xyXG5cclxuZXhwb3J0IHZhciBQYXNzd29yZEF1dGhNZXRob2RGb3JtX0NPTlNUUyA9IHtcclxuICAgIGdpZ3lhQ2xhc3M6ICdnaWd5YS1wYXNzd29yZC1hdXRoLW1ldGhvZC1mb3JtJyxcclxufTtcclxuXHJcbkRlZXBGcmVlemUoUGFzc3dvcmRBdXRoTWV0aG9kRm9ybV9DT05TVFMpO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhc3N3b3JkQXV0aE1ldGhvZEZvcm0gZXh0ZW5kcyBMb2dpbkZvcm0ge1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gUGFzc3dvcmRBdXRoTWV0aG9kRm9ybV9DT05TVFM7XHJcblxyXG4gICAgcHVibGljIHN1Ym1pdEFwaSgpOiAocGFyYW1zOiBJU2NyZWVuU2V0UGFyYW1zLCBmb3JtRGF0YSwgb3B0aW9ucywgZGVmYXVsdFBhcmFtcykgPT4gdm9pZCB7XHJcbiAgICAgICAgcmV0dXJuIChwYXJhbXMsIGZvcm1EYXRhLCBvcHRpb25zLCBkZWZhdWx0UGFyYW1zKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjY291bnRJbmZvID0gdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKS5nZXRBY2NvdW50SW5mbyB8fCB7fTtcclxuICAgICAgICAgICAgZm9ybURhdGEgPSBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW2Zvcm1EYXRhLCB7XHJcbiAgICAgICAgICAgICAgICBsb2dpbklEOiBhY2NvdW50SW5mby5pZGVudGlmaWVyLFxyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGZvcm1EYXRhLnBhc3N3b3JkXHJcbiAgICAgICAgICAgIH1dKTtcclxuICAgICAgICAgICAgZ2lneWEuYWNjb3VudHMubG9naW4ocGFyYW1zLCBmb3JtRGF0YSwgb3B0aW9ucywgZGVmYXVsdFBhcmFtcyk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG5cclxuQmFzZUZvcm0uYWRkRm9ybVRvTGlicmFyeShQYXNzd29yZEF1dGhNZXRob2RGb3JtKTtcclxuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSB9IGZyb20gXCIuLi91dGlsc1wiO1xyXG5pbXBvcnQgeyBJRm9ybVJlc3BvbnNlLCBJU2NyZWVuU2V0UGFyYW1zIH0gZnJvbSBcIi4uL1NjcmVlblNldFBsdWdpblwiO1xyXG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gXCIuLi9CYXNlRm9ybVwiO1xyXG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gXCIuLi8uLi8uLi8uLi9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9yc1wiO1xyXG5cclxuZXhwb3J0IHZhciBQYXNzd29yZGxlc3NMb2dpbkZvcm1fQ09OU1RTID0ge1xyXG4gICAgZ2lneWFDbGFzczogJ2dpZ3lhLXBhc3N3b3JkbGVzcy1sb2dpbi1mb3JtJyxcclxufTtcclxuXHJcbkRlZXBGcmVlemUoUGFzc3dvcmRsZXNzTG9naW5Gb3JtX0NPTlNUUyk7XHJcblxyXG5leHBvcnQgY2xhc3MgUGFzc3dvcmRsZXNzTG9naW5Gb3JtIGV4dGVuZHMgQmFzZUZvcm0ge1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gUGFzc3dvcmRsZXNzTG9naW5Gb3JtX0NPTlNUUztcclxuXHJcbiAgICBwdWJsaWMgc3BlY2lhbEZpZWxkcygpIHtcclxuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcclxuICAgICAgICAgICAgc3VwZXIuc3BlY2lhbEZpZWxkcygpLFxyXG4gICAgICAgICAgICB7bG9naW5JRDogdHJ1ZX1cclxuICAgICAgICBdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3VibWl0QXBpKCk6IChwYXJhbXM6IElTY3JlZW5TZXRQYXJhbXMsIGZvcm1EYXRhLCBvcHRpb25zLCBkZWZhdWx0UGFyYW1zKSA9PiB2b2lkIHtcclxuICAgICAgICByZXR1cm4gKHBhcmFtcywgZm9ybURhdGEsIG9wdGlvbnMsIGRlZmF1bHRQYXJhbXMpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgZ2lneWEuYWNjb3VudHMuYXV0aC5nZXRNZXRob2RzKHtcclxuICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IGZvcm1EYXRhLmxvZ2luSUQsXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogb3B0aW9ucy5jYWxsYmFja1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRFcnJvcktleShyZXNwb25zZTogSUZvcm1SZXNwb25zZSk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmVycm9yQ29kZSA9PT0gR1NFcnJvcnMuTk9UX0ZPVU5EXHJcbiAgICAgICAgICAgID8gJ2ludmFsaWRfbG9naW5faWRlbnRpZmllcidcclxuICAgICAgICAgICAgOiBzdXBlci5nZXRFcnJvcktleShyZXNwb25zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uQWZ0ZXJTdWJtaXQocmVzcG9uc2UpIHtcclxuICAgICAgICB0aGlzLnNhdmVJbkFjY291bnRJbmZvKHtcclxuICAgICAgICAgICAgaWRlbnRpZmllcjogcmVzcG9uc2UucmVxdWVzdFBhcmFtcy5pZGVudGlmaWVyLFxyXG4gICAgICAgICAgICBhdXRoTWV0aG9kczogcmVzcG9uc2UubWV0aG9kc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN1cGVyLm9uQWZ0ZXJTdWJtaXQocmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2F2ZUluQWNjb3VudEluZm8ob2JqOiB7W2tleTogc3RyaW5nXTogYW55fSkge1xyXG4gICAgICAgIGNvbnN0IGFwaURhdGEgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpO1xyXG4gICAgICAgIGFwaURhdGEuZ2V0QWNjb3VudEluZm8gPSBhcGlEYXRhLmdldEFjY291bnRJbmZvIHx8IHt9O1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24oYXBpRGF0YS5nZXRBY2NvdW50SW5mbywgb2JqKTtcclxuICAgIH1cclxufVxyXG5cclxuQmFzZUZvcm0uYWRkRm9ybVRvTGlicmFyeShQYXNzd29yZGxlc3NMb2dpbkZvcm0pO1xyXG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XHJcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XHJcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcclxuaW1wb3J0IHsgTG9naW5Nb2RlcywgQ29uZmxpY3RIYW5kbGluZyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvTG9naW5Nb2Rlcyc7XHJcblxyXG5leHBvcnQgdmFyIFByb2ZpbGVGb3JtX0NPTlNUUyA9IHtcclxuICAgIGdpZ3lhQ2xhc3M6ICdnaWd5YS1wcm9maWxlLWZvcm0nLFxyXG4gICAgc3BlY2lhbEZpZWxkczoge1xyXG4gICAgICAgIHVzZXJuYW1lOiB0cnVlLFxyXG4gICAgICAgIG9sZFBhc3N3b3JkOiB0cnVlLFxyXG4gICAgICAgIHBhc3N3b3JkOiB0cnVlLFxyXG4gICAgICAgIG5ld1Bhc3N3b3JkOiB0cnVlLFxyXG4gICAgICAgIHBhc3N3b3JkUmV0eXBlOiB0cnVlLFxyXG4gICAgICAgIHNlY3JldFF1ZXN0aW9uOiB0cnVlLFxyXG4gICAgICAgIHNlY3JldEFuc3dlcjogdHJ1ZSxcclxuICAgICAgICBhZGRMb2dpbkVtYWlsczogdHJ1ZSxcclxuICAgICAgICByZW1vdmVMb2dpbkVtYWlsczogdHJ1ZSxcclxuICAgIH0sXHJcbn07XHJcbkRlZXBGcmVlemUoUHJvZmlsZUZvcm1fQ09OU1RTKTtcclxuZXhwb3J0IGNsYXNzIFByb2ZpbGVGb3JtIGV4dGVuZHMgQmFzZUZvcm0ge1xyXG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBQcm9maWxlRm9ybV9DT05TVFM7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2NyZWVuOiBTY3JlZW4sIGVsRm9ybTogSFRNTEZvcm1FbGVtZW50LCBnaWd5YUNsYXNzOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcihzY3JlZW4sIGVsRm9ybSwgZ2lneWFDbGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHByZVBvcHVsYXRlRGF0YUZyb20oKSB7XHJcbiAgICAgICAgcmV0dXJuIFsnZ2V0QWNjb3VudEluZm8nLCAnZ2V0QWNjb3VudEluZm8ucHJvZmlsZScsICdnZXRBY2NvdW50SW5mby5zdWJzY3JpcHRpb25zJywgJ2dldEFjY291bnRJbmZvLmxvZ2luSURzJywgJ2dldEFjY291bnRJbmZvLnByZWZlcmVuY2VzJ107XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE5lZWRlZERhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXHJcbiAgICAgICAgICAgIHN1cGVyLmdldE5lZWRlZERhdGEoKSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZ2V0U2NoZW1hOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7fSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBnZXRBY2NvdW50SW5mbzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlOiAnbG9naW5JRHMsZW1haWxzLHByb2ZpbGUsZGF0YSxzdWJzY3JpcHRpb25zLHByZWZlcmVuY2VzJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGdldFByb3ZpZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uczogJ2FjdGl2ZVByb3ZpZGVycycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNjaGVtYVZhbGlkYXRlZCgpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNQYXNzd29yZFNjaGVtYVZhbGlkYXRlZCgpIHtcclxuICAgICAgICBpZihnaWd5YS50aGlzU2NyaXB0Lmdsb2JhbENvbmZbJ3RvZ2dsZXMnXSAmJiB0eXBlb2YgZ2lneWEudGhpc1NjcmlwdC5nbG9iYWxDb25mWyd0b2dnbGVzJ11bJ2Fsd2F5c1ZhbGlkYXRlUGFzc3dvcmQnXSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2lneWEudGhpc1NjcmlwdC5nbG9iYWxDb25mWyd0b2dnbGVzJ11bJ2Fsd2F5c1ZhbGlkYXRlUGFzc3dvcmQnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5yZXBvcnQoJ2Fsd2F5c1ZhbGlkYXRlUGFzc3dvcmQgbm90IGFkb3B0ZWQgY29tcGxldGVseScsIHtnbG9iYWxDb25mOiBKU09OLnN0cmluZ2lmeShnaWd5YS50aGlzU2NyaXB0Lmdsb2JhbENvbmYpfSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNwZWNpYWxGaWVsZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbc3VwZXIuc3BlY2lhbEZpZWxkcygpLCBQcm9maWxlRm9ybV9DT05TVFMuc3BlY2lhbEZpZWxkc10pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRMb2dpblByb3ZpZGVycygpIHtcclxuICAgICAgICByZXR1cm4gTG9naW5Nb2Rlcy5yZUF1dGguZ2V0TG9naW5Qcm92aWRlcnModGhpcy5fc2NyZWVuU2V0LmRhdGEuYXBpRGF0YSwgdGhpcy5fc2NyZWVuU2V0LnBhcmFtcywgdGhpcy5fc2NyZWVuU2V0LmRhdGEucmVnVG9rZW4pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdWJtaXRBcGkoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLmFjY291bnRzLnNldEFjY291bnRJbmZvO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZWZhdWx0U3VibWl0UGFyYW1zKCkge1xyXG4gICAgICAgIGNvbnN0IGNvbmZsaWN0SGFuZGxpbmcgPVxyXG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmNvbmZsaWN0SGFuZGxpbmdcclxuICAgICAgICAgICAgfHwgQ29uZmxpY3RIYW5kbGluZ1t0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbiA/IENvbmZsaWN0SGFuZGxpbmcuc2F2ZVByb2ZpbGVBbmRGYWlsIDogQ29uZmxpY3RIYW5kbGluZy5mYWlsXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXHJcbiAgICAgICAgICAgIHN1cGVyLmRlZmF1bHRTdWJtaXRQYXJhbXMoKSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uZmxpY3RIYW5kbGluZyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RXh0cmFQcm9maWxlRmllbGRzKG1pc3NpbmdPbmx5OiBib29sZWFuKSB7XHJcbiAgICAgICAgdmFyIG1pc3NpbmdGaWVsZHMgPSBzdXBlci5nZXRFeHRyYVByb2ZpbGVGaWVsZHMobWlzc2luZ09ubHkpO1xyXG5cclxuICAgICAgICBpZiAoZ2lneWEudXRpbHMuYXJyYXkuaW5kZXhPZihtaXNzaW5nRmllbGRzLCAnc2FtbERhdGEnKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgbWlzc2luZ0ZpZWxkcy5wdXNoKCdzYW1sRGF0YScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG1pc3NpbmdGaWVsZHM7XHJcbiAgICB9XHJcbn1cclxuQmFzZUZvcm0uYWRkRm9ybVRvTGlicmFyeShQcm9maWxlRm9ybSk7XHJcbiIsImltcG9ydCB7IERlZXBGcmVlemUgfSBmcm9tIFwiLi4vdXRpbHNcIjtcclxuaW1wb3J0IHsgSUdpZ3lhUmVzcG9uc2UsIElTY3JlZW5TZXRQYXJhbXMgfSBmcm9tIFwiLi4vU2NyZWVuU2V0UGx1Z2luXCI7XHJcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSBcIi4uL0Jhc2VGb3JtXCI7XHJcbmltcG9ydCB7IEdTRXJyb3JzIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTZW5kVmVyaWZpY2F0aW9uUmVzcG9uc2UgZXh0ZW5kcyBJR2lneWFSZXNwb25zZSB7XHJcbiAgICB2VG9rZW4/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUlzVmVyaWZpZWRSZXNwb25zZSBleHRlbmRzIElHaWd5YVJlc3BvbnNlIHtcclxuICAgIGFjY2Vzc1Rva2VuPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIFB1c2hBdXRoTWV0aG9kRm9ybV9DT05TVFMgPSB7XHJcbiAgICBnaWd5YUNsYXNzOiAnZ2lneWEtcHVzaC1hdXRoLW1ldGhvZC1mb3JtJ1xyXG59O1xyXG5cclxuRGVlcEZyZWV6ZShQdXNoQXV0aE1ldGhvZEZvcm1fQ09OU1RTKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBQdXNoQXV0aE1ldGhvZEZvcm0gZXh0ZW5kcyBCYXNlRm9ybSB7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBQdXNoQXV0aE1ldGhvZEZvcm1fQ09OU1RTO1xyXG5cclxuICAgIHByaXZhdGUgX3RpbWVvdXRJZDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfYWNjZXNzVG9rZW46IHN0cmluZztcclxuICAgIHByaXZhdGUgX3BvbGxpbmdTdGFydFRpbWUgPSAwO1xyXG4gICAgcHJpdmF0ZSBfcG9sbGluZ0xpbWl0ID0gdGhpcy5fc2NyZWVuU2V0LnBhcmFtc1snaXNWZXJpZmllZFBvbGxpbmdMaW1pdCddIHx8IDEwMDAgKiA2MCAqIDI7IC8vIGRlZmF1bHQgMiBtaW5cclxuICAgIHByaXZhdGUgX3BvbGxpbmdJbnRlcnZhbCA9IHRoaXMuX3NjcmVlblNldC5wYXJhbXNbJ2lzVmVyaWZpZWRQb2xsaW5nSW50ZXJ2YWwnXSB8fCAxMDAwICogMzsgLy8gZGVmYXVsdCAzIHNlY1xyXG5cclxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTERpdkVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XHJcbiAgICAgICAgdGhpcy5zdGFydFB1c2hWZXJpZmljYXRpb25GbG93KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcclxuICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGFydFB1c2hWZXJpZmljYXRpb25GbG93KCkge1xyXG4gICAgICAgIGNvbnN0IGFjY291bnRJbmZvID0gdGhpcy5kYXRhU3RvcmUuYXBpRGF0YS5nZXRBY2NvdW50SW5mbyB8fCB7fTtcclxuICAgICAgICBnaWd5YS5hY2NvdW50cy5hdXRoLnB1c2guc2VuZFZlcmlmaWNhdGlvbih7XHJcbiAgICAgICAgICAgIGlkZW50aWZpZXI6IGFjY291bnRJbmZvLmlkZW50aWZpZXIsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiByZXMgPT4gdGhpcy5vblNlbmRWZXJpZmljYXRpb25SZXNwb25zZShyZXMpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdGFydFBvbGxpbmcoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3VibWl0QXBpKCk6IChwYXJhbXM6IElTY3JlZW5TZXRQYXJhbXMsIGRhdGEsIG9wdGlvbnMsIGRlZmF1bHRQYXJhbXMpID0+IHZvaWQge1xyXG4gICAgICAgIHJldHVybiAocGFyYW1zLCBkYXRhLCBvcHRpb25zLCBkZWZhdWx0UGFyYW1zKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIGdpZ3lhLmFjY291bnRzLmF1dGgubG9naW4oe1xyXG4gICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuX2FjY2Vzc1Rva2VuLFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IG9wdGlvbnMuY2FsbGJhY2tcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0b3BQb2xsaW5nKCl7XHJcbiAgICAgICAgdGhpcy5fcG9sbGluZ1N0YXJ0VGltZSA9IDA7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXRJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblNlbmRWZXJpZmljYXRpb25SZXNwb25zZShyZXM6IElTZW5kVmVyaWZpY2F0aW9uUmVzcG9uc2UpIHtcclxuICAgICAgICBpZiAocmVzLmVycm9yQ29kZSA9PSAwICYmIHJlcy52VG9rZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhU3RvcmUucHVzaERhdGEudlRva2VuID0gcmVzLnZUb2tlbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuZXJyb3IoJ2dpZ3lhLmFjY291bnRzLmF1dGgucHVzaC5zZW5kVmVyaWZpY2F0aW9uIGZhaWxlZCcsIHtyZXN9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja0lzVmVyaWZpZWQoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gdlRva2VuIG1heSBjaGFuZ2UgaW4gdGhlIGRhdGEtc3RvcmUgYnkgdGhlIGZvcm0ncyBjb250cm9scyAoXCJyZXNlbmRcIiBidXR0b24pXHJcbiAgICAgICAgY29uc3QgdlRva2VuID0gdGhpcy5kYXRhU3RvcmUucHVzaERhdGEudlRva2VuO1xyXG4gICAgICAgIGlmICh2VG9rZW4pIHtcclxuICAgICAgICAgICAgZ2lneWEuYWNjb3VudHMuYXV0aC5wdXNoLmlzVmVyaWZpZWQoe3ZUb2tlbiwgY2FsbGJhY2s6IHJlcyA9PiB0aGlzLm9uSXNWZXJpZmllZFJlc3BvbnNlKHJlcyl9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm9uSXNWZXJpZmllZFJlc3BvbnNlKHtlcnJvckNvZGU6IEdTRXJyb3JzLk9LfSlcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgb25QdXNoVmVyaWZpZWQoYWNjZXNzVG9rZW4pe1xyXG4gICAgICAgIHRoaXMuX2FjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47XHJcbiAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIHRoaXMuc3VibWl0KCk7IC8vIGF1dG9tYXRpY2FsbHkgc3VibWl0cyB0aGUgZm9ybSBzbyBpdCdsbCBzZW5kIHRoZSBhY2NvdW50cy5hdXRoLmxvZ2luIHJlcXVlc3RcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uSXNWZXJpZmllZFJlc3BvbnNlKHJlczogSUlzVmVyaWZpZWRSZXNwb25zZSk6IHZvaWQge1xyXG5cclxuICAgICAgICAvLyBzdWNjZXNzXHJcbiAgICAgICAgaWYgKHJlcy5hY2Nlc3NUb2tlbilcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub25QdXNoVmVyaWZpZWQocmVzLmFjY2Vzc1Rva2VuKTtcclxuXHJcbiAgICAgICAgLy8gZXJyb3JcclxuICAgICAgICBpZiAocmVzLmVycm9yQ29kZSAhPSBHU0Vycm9ycy5PSylcclxuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmVycm9yKCdnaWd5YS5hY2NvdW50cy5hdXRoLnB1c2guaXNWZXJpZmllZCBmYWlsZWQnLCB7cmVzfSk7XHJcblxyXG4gICAgICAgIC8vIGtlZXAgcG9sbGluZ1xyXG4gICAgICAgIHRoaXMuX3RpbWVvdXRJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkQ29udGludWVQb2xsaW5nKCkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrSXNWZXJpZmllZCgpO1xyXG4gICAgICAgIH0sIHRoaXMuX3BvbGxpbmdJbnRlcnZhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG91bGRDb250aW51ZVBvbGxpbmcoKXtcclxuICAgICAgICBjb25zdCBub3cgPSBnaWd5YS51dGlscy5kYXRlLm5vdygpO1xyXG4gICAgICAgIHJldHVybiAobm93IC0gdGhpcy5fcG9sbGluZ1N0YXJ0VGltZSkgPCB0aGlzLl9wb2xsaW5nTGltaXQ7IC8vIHBvbGxpbmcgbGltaXQgbm90IHJlYWNoZWRcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXJ0UG9sbGluZygpe1xyXG4gICAgICAgIHRoaXMuX3BvbGxpbmdTdGFydFRpbWUgPSBnaWd5YS51dGlscy5kYXRlLm5vdygpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tJc1ZlcmlmaWVkKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkJhc2VGb3JtLmFkZEZvcm1Ub0xpYnJhcnkoUHVzaEF1dGhNZXRob2RGb3JtKTtcclxuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xyXG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xyXG5pbXBvcnQgeyBTY3JlZW4gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbic7XHJcbmltcG9ydCB7IExvZ2luTW9kZXMgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0xvZ2luTW9kZXMnO1xyXG5cclxuZXhwb3J0IHZhciBSZWF1dGhlbnRpY2F0aW9uRm9ybV9DT05TVFMgPSB7XHJcbiAgICBnaWd5YUNsYXNzOiAnZ2lneWEtcmVhdXRoZW50aWNhdGlvbi1mb3JtJyxcclxufTtcclxuRGVlcEZyZWV6ZShSZWF1dGhlbnRpY2F0aW9uRm9ybV9DT05TVFMpO1xyXG5leHBvcnQgY2xhc3MgUmVhdXRoZW50aWNhdGlvbkZvcm0gZXh0ZW5kcyBCYXNlRm9ybSB7XHJcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFJlYXV0aGVudGljYXRpb25Gb3JtX0NPTlNUUztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzY3JlZW46IFNjcmVlbiwgZWxGb3JtOiBIVE1MRm9ybUVsZW1lbnQsIGdpZ3lhQ2xhc3M6IHN0cmluZykge1xyXG4gICAgICAgIHN1cGVyKHNjcmVlbiwgZWxGb3JtLCBnaWd5YUNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcHJlUG9wdWxhdGVEYXRhKCkge1xyXG4gICAgICAgIHZhciBwb3B1bGF0ZURhdGEgPSBzdXBlci5wcmVQb3B1bGF0ZURhdGEoKTtcclxuXHJcbiAgICAgICAgdmFyIGFwaURhdGEgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpO1xyXG4gICAgICAgIHZhciBsb2dpbklEcyA9IGFwaURhdGEgJiYgYXBpRGF0YS5nZXRBY2NvdW50SW5mbyAmJiBhcGlEYXRhLmdldEFjY291bnRJbmZvLmxvZ2luSURzO1xyXG5cclxuICAgICAgICBpZiAobG9naW5JRHMpIHBvcHVsYXRlRGF0YS5sb2dpbklEID0gbG9naW5JRHMudXNlcm5hbWUgfHwgKGxvZ2luSURzLmVtYWlscyAmJiBsb2dpbklEcy5lbWFpbHNbMF0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcG9wdWxhdGVEYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdWJtaXRBcGkoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLmFjY291bnRzLmxvZ2luO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXROZWVkZWREYXRhKCkge1xyXG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW1xyXG4gICAgICAgICAgICBzdXBlci5nZXROZWVkZWREYXRhKCksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdldFNjaGVtYToge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczoge30sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZ2V0QWNjb3VudEluZm86IHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZTogJ2lkZW50aXRpZXMtYWN0aXZlLGxvZ2luSURzJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldExvZ2luUHJvdmlkZXJzKCkge1xyXG4gICAgICAgIHJldHVybiBMb2dpbk1vZGVzLnJlQXV0aC5nZXRMb2dpblByb3ZpZGVycyh0aGlzLl9zY3JlZW5TZXQuZGF0YS5hcGlEYXRhLCB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLCB0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlZmF1bHRTdWJtaXRQYXJhbXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXHJcbiAgICAgICAgICAgIHN1cGVyLmRlZmF1bHRTdWJtaXRQYXJhbXMoKSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9naW5Nb2RlOiBMb2dpbk1vZGVzLnJlQXV0aC5uYW1lLFxyXG4gICAgICAgICAgICAgICAgbG9naW5JRDogJ25vLW9uZScsIC8vIFRPRE86IHJlbW92ZSBhcyBzb29uIGFzIHRoZSBzZXJ2ZXIgc2lkZSBzdG9wIHJlcXVpcmluZyB0aGlzIHBhcmFtZXRlclxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzcGVjaWFsRmllbGRzKCkge1xyXG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW1xyXG4gICAgICAgICAgICBzdXBlci5zcGVjaWFsRmllbGRzKCksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2FwdGNoYVRleHQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjYXB0Y2hhVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICBsb2dpbklEOiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG59XHJcbkJhc2VGb3JtLmFkZEZvcm1Ub0xpYnJhcnkoUmVhdXRoZW50aWNhdGlvbkZvcm0pO1xyXG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplLCBJTWFwIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XHJcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XHJcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcclxuXHJcbmV4cG9ydCB2YXIgUmVnaXN0ZXJGb3JtX0NPTlNUUyA9IHtcclxuICAgIGdpZ3lhQ2xhc3M6ICdnaWd5YS1yZWdpc3Rlci1mb3JtJyxcclxufTtcclxuRGVlcEZyZWV6ZShSZWdpc3RlckZvcm1fQ09OU1RTKTtcclxuZXhwb3J0IGNsYXNzIFJlZ2lzdGVyRm9ybSBleHRlbmRzIEJhc2VGb3JtIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gUmVnaXN0ZXJGb3JtX0NPTlNUUztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzY3JlZW46IFNjcmVlbiwgZWxGb3JtOiBIVE1MRm9ybUVsZW1lbnQsIGdpZ3lhQ2xhc3M6IHN0cmluZykge1xyXG4gICAgICAgIHN1cGVyKHNjcmVlbiwgZWxGb3JtLCBnaWd5YUNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVxdWlyZWRGaWVsZHMoKTogSU1hcDxib29sZWFuPiB7XHJcbiAgICAgICAgdmFyIHJlcXVpcmVkRmllbGRzID0gc3VwZXIucmVxdWlyZWRGaWVsZHMoKTtcclxuICAgICAgICByZXF1aXJlZEZpZWxkcyA9IDxJTWFwPGJvb2xlYW4+PmdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbcmVxdWlyZWRGaWVsZHMsIHRoaXMuc3BlY2lhbEZpZWxkcygpXSk7XHJcbiAgICAgICAgcmVxdWlyZWRGaWVsZHNbJ3VzZXJuYW1lJ10gPSByZXF1aXJlZEZpZWxkc1snZW1haWwnXSA9IHRydWU7XHJcblxyXG4gICAgICAgIHJldHVybiByZXF1aXJlZEZpZWxkcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcHJlUG9wdWxhdGVEYXRhRnJvbSgpIHtcclxuICAgICAgICByZXR1cm4gWydnZXRBY2NvdW50SW5mbycsICdnZXRBY2NvdW50SW5mby5wcm9maWxlJywgJ2dldEFjY291bnRJbmZvLmxvZ2luSURzJ107XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE5lZWRlZERhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXHJcbiAgICAgICAgICAgIHN1cGVyLmdldE5lZWRlZERhdGEoKSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW5pdFJlZ2lzdHJhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSGFuZGxlcjogcmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYGNsZWFyaW5nIGFjY291bnQgaW5mbyBmcm9tIHNjcmVlbnNldCBjYWNoZWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXBpRGF0YSA9IHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhcGlEYXRhLmdldEFjY291bnRJbmZvO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlczsgLy8gcGFzcyByZXN1bHQgb24gdG8gdGhlIHNjcmVlblNldFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZ2V0U2NoZW1hOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7fSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNjaGVtYVZhbGlkYXRlZCgpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3BlY2lhbEZpZWxkcygpIHtcclxuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcclxuICAgICAgICAgICAgc3VwZXIuc3BlY2lhbEZpZWxkcygpLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1c2VybmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGVtYWlsOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZFJldHlwZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNlY3JldFF1ZXN0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc2VjcmV0QW5zd2VyOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2FwdGNoYVRleHQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjYXB0Y2hhVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICByZWdTb3VyY2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzaXRlVUlEOiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwZXJmb3JtU3VibWl0KG9QYXJhbXM6IGFueSkge1xyXG4gICAgICAgIGlmICghdGhpcy5fc2NyZWVuU2V0LmRvZXNTY3JlZW5IYXZlRm9ybXModGhpcy5zdWNjZXNzU2NyZWVuKSkge1xyXG4gICAgICAgICAgICBvUGFyYW1zLmZpbmFsaXplUmVnaXN0cmF0aW9uID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGF0YS5maW5hbGl6ZVJlZ2lzdHJhdGlvbk5lZWRlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc3VwZXIucGVyZm9ybVN1Ym1pdChvUGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3VibWl0QXBpKCkge1xyXG4gICAgICAgIHJldHVybiBnaWd5YS5hY2NvdW50cy5yZWdpc3RlcjtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcXVlcnlTdHJpbmdUb1N1Ym1pdFBhcmFtTWFwKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGdpZ19lbWFpbDogJ2VtYWlsJyxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZWZhdWx0U3VibWl0UGFyYW1zKCkge1xyXG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW1xyXG4gICAgICAgICAgICBzdXBlci5kZWZhdWx0U3VibWl0UGFyYW1zKCksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IGdpZ3lhLnV0aWxzLnN0cmluZ1V0aWxzLm1lcmdlQ29tbWFTZXBhcmF0ZWRWYWx1ZXMoXHJcbiAgICAgICAgICAgICAgICAgICAgJ3Byb2ZpbGUsZGF0YSxlbWFpbHMsbG9naW5JRHMsc3Vic2NyaXB0aW9ucyxwcmVmZXJlbmNlcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5pbmNsdWRlKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG59XHJcbkJhc2VGb3JtLmFkZEZvcm1Ub0xpYnJhcnkoUmVnaXN0ZXJGb3JtKTtcclxuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xyXG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xyXG5pbXBvcnQgeyBTY3JlZW4gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbic7XHJcblxyXG5leHBvcnQgdmFyIFJlc2VuZFZlcmlmaWNhdGlvbkNvZGVGb3JtX0NPTlNUUyA9IHtcclxuICAgIGdpZ3lhQ2xhc3M6ICdnaWd5YS1yZXNlbmQtdmVyaWZpY2F0aW9uLWNvZGUtZm9ybScsXHJcbn07XHJcbkRlZXBGcmVlemUoUmVzZW5kVmVyaWZpY2F0aW9uQ29kZUZvcm1fQ09OU1RTKTtcclxuZXhwb3J0IGNsYXNzIFJlc2VuZFZlcmlmaWNhdGlvbkNvZGVGb3JtIGV4dGVuZHMgQmFzZUZvcm0ge1xyXG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBSZXNlbmRWZXJpZmljYXRpb25Db2RlRm9ybV9DT05TVFM7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2NyZWVuOiBTY3JlZW4sIGVsRm9ybTogSFRNTEZvcm1FbGVtZW50LCBnaWd5YUNsYXNzOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcihzY3JlZW4sIGVsRm9ybSwgZ2lneWFDbGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE5lZWRlZERhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXHJcbiAgICAgICAgICAgIHN1cGVyLmdldE5lZWRlZERhdGEoKSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZ2V0QWNjb3VudEluZm86IHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZTogJ2VtYWlscycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNwZWNpYWxGaWVsZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXHJcbiAgICAgICAgICAgIHN1cGVyLnNwZWNpYWxGaWVsZHMoKSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZW1haWw6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN1Ym1pdEFwaSgpIHtcclxuICAgICAgICByZXR1cm4gZ2lneWEuYWNjb3VudHMucmVzZW5kVmVyaWZpY2F0aW9uQ29kZTtcclxuICAgIH1cclxufVxyXG5CYXNlRm9ybS5hZGRGb3JtVG9MaWJyYXJ5KFJlc2VuZFZlcmlmaWNhdGlvbkNvZGVGb3JtKTtcclxuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xyXG5pbXBvcnQgeyBCYXNlRm9ybSwgSUZvcm1EYXRhIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XHJcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcclxuaW1wb3J0IHtHU0Vycm9yc30gZnJvbSBcIi4uLy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzXCI7XHJcbmltcG9ydCB7IElGb3JtUmVzcG9uc2UgfSBmcm9tIFwiLi4vU2NyZWVuU2V0UGx1Z2luXCI7XHJcblxyXG5leHBvcnQgdmFyIFJlc2V0UGFzc3dvcmRGb3JtX0NPTlNUUyA9IHtcclxuICAgIGdpZ3lhQ2xhc3M6ICdnaWd5YS1yZXNldC1wYXNzd29yZC1mb3JtJyxcclxufTtcclxuRGVlcEZyZWV6ZShSZXNldFBhc3N3b3JkRm9ybV9DT05TVFMpO1xyXG5leHBvcnQgY2xhc3MgUmVzZXRQYXNzd29yZEZvcm0gZXh0ZW5kcyBCYXNlRm9ybSB7XHJcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFJlc2V0UGFzc3dvcmRGb3JtX0NPTlNUUztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzY3JlZW46IFNjcmVlbiwgZWxGb3JtOiBIVE1MRm9ybUVsZW1lbnQsIGdpZ3lhQ2xhc3M6IHN0cmluZykge1xyXG4gICAgICAgIHN1cGVyKHNjcmVlbiwgZWxGb3JtLCBnaWd5YUNsYXNzKTtcclxuICAgICAgICB0aGlzLmZpbHRlcnMucHVzaCh7XHJcbiAgICAgICAgICAgIGZpbHRlck91dFdpZGdldHNUb1NlbmQ6IChmb3JtRGF0YTogSUZvcm1EYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZm9ybURhdGFbJ3NlY3VyaXR5RmllbGRzJ10gJiYgZm9ybURhdGFbJ3NlY3VyaXR5RmllbGRzJ11bJ3Bhc3N3b3JkUmV0eXBlJ10pIGRlbGV0ZSBmb3JtRGF0YVsnc2VjdXJpdHlGaWVsZHMnXVsncGFzc3dvcmRSZXR5cGUnXTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmb3JtRGF0YTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3BlY2lhbEZpZWxkcygpIHtcclxuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcclxuICAgICAgICAgICAgc3VwZXIuc3BlY2lhbEZpZWxkcygpLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2dpbklEOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbmV3UGFzc3dvcmQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBlbWFpbDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNlY3JldEFuc3dlcjogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RXJyb3JLZXkocmVzcG9uc2U6IElGb3JtUmVzcG9uc2UpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmKHJlc3BvbnNlLmVycm9yQ29kZSA9PT0gR1NFcnJvcnMuSU5WQUxJRF9UT0tFTikge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2ludmFsaWRfcGFzc3dvcmRfcmVzZXRfdG9rZW4nO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3VwZXIuZ2V0RXJyb3JLZXkocmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzY2hlbWFWYWxpZGF0ZWQoKSB7XHJcbiAgICAgICAgLy8gTmVjZXNzYXJ5IHRvIHNob3cgZXJyb3IgbWVzc2FnZSBmb3IgcGFzc3dvcmQgY29tcGxleGl0eS5cclxuICAgICAgICAvLyBQYXNzd29yZElucHV0cy50cyB3aWxsIG5vdCBnZW5lcmF0ZSBwYXNzd29yZCBjb21wbGV4aXR5IGVycm9yIGNhbGxiYWNrIGlmIHNjaGVtYVZhbGlkYXRlZCByZXR1cm5zIGZhbHNlLlxyXG4gICAgICAgIHJldHVybiAhIXRoaXMuZ2V0RmllbGQoJ25ld1Bhc3N3b3JkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHByb2ZpbGVPYmplY3ROYW1lKCkge1xyXG4gICAgICAgIHJldHVybiAnc2VjdXJpdHlGaWVsZHMnO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdWJtaXRBcGkoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLmFjY291bnRzLnJlc2V0UGFzc3dvcmQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcclxuICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGF0YS5maW5hbGl6ZVJlZ2lzdHJhdGlvbk5lZWRlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwcmVQb3B1bGF0ZURhdGEoKSB7XHJcbiAgICAgICAgdmFyIHBvcHVsYXRlRGF0YSA9IHN1cGVyLnByZVBvcHVsYXRlRGF0YSgpO1xyXG5cclxuICAgICAgICB2YXIgYXBpRGF0YSA9IHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCk7XHJcblxyXG4gICAgICAgIC8vIGlmIGxvZ2luIGFscmVhZHkgZXhpc3RzXHJcbiAgICAgICAgdmFyIGxvZ2luSURzID0gYXBpRGF0YSAmJiBhcGlEYXRhLmdldEFjY291bnRJbmZvICYmIGFwaURhdGEuZ2V0QWNjb3VudEluZm8ubG9naW5JRHM7XHJcbiAgICAgICAgaWYgKGxvZ2luSURzKSB7XHJcbiAgICAgICAgICAgIHBvcHVsYXRlRGF0YS5sb2dpbklEID0gbG9naW5JRHMudXNlcm5hbWUgfHwgKGxvZ2luSURzLmVtYWlscyAmJiBsb2dpbklEcy5lbWFpbHNbMF0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZm9yIGxpbmsgYWNjb3VudHNcclxuICAgICAgICB2YXIgY29uZmxpY3RpbmdBY2NvdW50ID0gYXBpRGF0YSAmJiBhcGlEYXRhLmdldENvbmZsaWN0aW5nQWNjb3VudCAmJiBhcGlEYXRhLmdldENvbmZsaWN0aW5nQWNjb3VudC5jb25mbGljdGluZ0FjY291bnQ7XHJcbiAgICAgICAgaWYgKGNvbmZsaWN0aW5nQWNjb3VudCkge1xyXG4gICAgICAgICAgICBwb3B1bGF0ZURhdGEubG9naW5JRCA9IGNvbmZsaWN0aW5nQWNjb3VudC5sb2dpbklEIHx8IChjb25mbGljdGluZ0FjY291bnQuZW1haWxzICYmIGNvbmZsaWN0aW5nQWNjb3VudC5lbWFpbHNbMF0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHBvcHVsYXRlRGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVmYXVsdFN1Ym1pdFBhcmFtcygpOiB7IHBhc3N3b3JkUmVzZXRUb2tlbj86IHN0cmluZyB9IHtcclxuICAgICAgICB2YXIgcGFyYW1zOiB7IHBhc3N3b3JkUmVzZXRUb2tlbj86IHN0cmluZyB9ID0gc3VwZXIuZGVmYXVsdFN1Ym1pdFBhcmFtcygpO1xyXG5cclxuICAgICAgICAvLyBDaGVjayBmb3IgcGFzc3dvcmQgZmllbGQgaW4gZm9ybS4gUmV0dXJuIGRlZmF1bHQgc3VibWl0IHBhcmFtcyBpZiBwYXNzd29yZCBmaWVsZCBpcyBub3QgcHJlc2VudCBpbiBmb3JtLlxyXG4gICAgICAgIC8vIEluIHRoZSBmdXR1cmUsIHdlIG1heSBkaXZpZGUgaW50byBzZXBhcmF0ZSBmb3Jtcy5cclxuICAgICAgICBpZiAoIXRoaXMuZ2V0RmllbGQoJ25ld1Bhc3N3b3JkJykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcmFtcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFBhc3N3b3JkIGZpZWxkIGlzIGluIGZvcm0sIHNvIHdlIGNhcmUgYWJvdXQgdGhlIHBhc3N3b3JkIHJlc2V0IHRva2VuLlxyXG4gICAgICAgIHZhciBwYXNzd29yZFJlc2V0VG9rZW4gPVxyXG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQucGFyYW1zICYmIHRoaXMuX3NjcmVlblNldC5wYXJhbXMucGFzc3dvcmRSZXNldFRva2VuXHJcbiAgICAgICAgICAgICAgICA/IHRoaXMuX3NjcmVlblNldC5wYXJhbXMucGFzc3dvcmRSZXNldFRva2VuXHJcbiAgICAgICAgICAgICAgICA6IGdpZ3lhLnV0aWxzLlVSTC5nZXRQYXJhbVZhbHVlRnJvbVVSTCgncHdydCcsIHdpbmRvdy5sb2NhdGlvbi50b1N0cmluZygpLCB1bmRlZmluZWQpO1xyXG4gICAgICAgIGlmIChwYXNzd29yZFJlc2V0VG9rZW4pIHtcclxuICAgICAgICAgICAgcGFyYW1zLnBhc3N3b3JkUmVzZXRUb2tlbiA9IHBhc3N3b3JkUmVzZXRUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhcmFtcztcclxuICAgIH1cclxufVxyXG5CYXNlRm9ybS5hZGRGb3JtVG9MaWJyYXJ5KFJlc2V0UGFzc3dvcmRGb3JtKTtcclxuIiwiaW1wb3J0IHtTY3JlZW5TZXREYXRhfSBmcm9tIFwiLi4vLi4vU2NyZWVuU2V0RGF0YVwiO1xyXG5pbXBvcnQge0FwaUxpbmtfQ09OU1RTfSBmcm9tIFwiLi4vLi4vV2lkZ2V0cy9BcGlMaW5rV2lkZ2V0XCI7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZUFwaUhhbmRsZXIge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgX2hhbmRsZXJzID0ge307XHJcbiAgICBwcml2YXRlIHN0YXRpYyBfZGVmYXVsdEhhbmRsZXI6IHR5cGVvZiBCYXNlQXBpSGFuZGxlcjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHJvdGVjdGVkIGRhdGFTdG9yZTogU2NyZWVuU2V0RGF0YSwgcHJpdmF0ZSBfc2VydmVyQXBpOiBnaWd5YS5fLlNlcnZlckFwaSkge31cclxuXHJcbiAgICBwdWJsaWMgc2VuZCgpOiBQcm9taXNlPE9iamVjdD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcVBhcmFtcyA9IE9iamVjdC5hc3NpZ24odGhpcy5kYXRhU3RvcmUucGFyYW1zIHx8IHt9LCB0aGlzLmdldFJlcXVlc3RQYXJhbXMoKSk7XHJcbiAgICAgICAgICAgIHJlcVBhcmFtc1snY2FsbGJhY2snXSA9IHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVzcG9uc2UocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXJ2ZXJBcGkucnVuKHJlcVBhcmFtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2goZSkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBtZXRob2ROYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlcnZlckFwaS5tZXRob2ROYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0SGFuZGxlcihtZXRob2ROYW1lOiBzdHJpbmcsIGhhbmRsZXJEYXRhU3RvcmU6IFNjcmVlblNldERhdGEsIHNlcnZlckFwaXM6IGdpZ3lhLl8uU2VydmVyQXBpW10pOiBCYXNlQXBpSGFuZGxlciB7XHJcbiAgICAgICAgY29uc3QgaGFuZGxlciA9IHRoaXMuX2hhbmRsZXJzW21ldGhvZE5hbWVdIHx8IHRoaXMuX2RlZmF1bHRIYW5kbGVyO1xyXG4gICAgICAgIGlmKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VydmVyQXBpID0gc2VydmVyQXBpcy5maWx0ZXIoYXBpID0+IGFwaS5tZXRob2ROYW1lID09PSBtZXRob2ROYW1lKVswXTtcclxuICAgICAgICAgICAgaWYoIXNlcnZlckFwaSkge1xyXG4gICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLndhcm4oYFske0FwaUxpbmtfQ09OU1RTLmF0dHJpYnV0ZU5hbWV9XTogdW5hYmxlIHRvIGNyZWF0ZSBhcGkgbGluayBmb3I6IFwiJHttZXRob2ROYW1lfVwiLCB0aGUgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWRgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgaGFuZGxlcihoYW5kbGVyRGF0YVN0b3JlLCBzZXJ2ZXJBcGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFkZEhhbmRsZXIobWV0aG9kTmFtZTogc3RyaW5nLCBoYW5kbGVyOiB0eXBlb2YgQmFzZUFwaUhhbmRsZXIpIHtcclxuICAgICAgICBpZih0aGlzLl9oYW5kbGVyc1ttZXRob2ROYW1lXSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IHJlLXJlZ2lzdGVyIGFwaSBsaW5rIGhhbmRsZXIsICR7bWV0aG9kTmFtZX0gaGFuZGxlciBhbHJlYWR5IGV4aXN0YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2hhbmRsZXJzW21ldGhvZE5hbWVdID0gaGFuZGxlcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFkZERlZmF1bHRIYW5kbGVyKGhhbmRsZXI6IHR5cGVvZiBCYXNlQXBpSGFuZGxlcikge1xyXG4gICAgICAgIGlmKHRoaXMuX2RlZmF1bHRIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5lcnJvcihgQ2FuJ3QgcmVnaXN0ZXIgZGVmYXVsdCBBUEkgaGFuZGxlciwgb25lIGlzIGFscmVhZHkgcmVnaXN0ZXJlZGApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2RlZmF1bHRIYW5kbGVyID0gaGFuZGxlcjtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0UmVxdWVzdFBhcmFtcygpOiBvYmplY3Q7XHJcblxyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGhhbmRsZVJlc3BvbnNlKHJlc3BvbnNlOiBvYmplY3QpO1xyXG5cclxufVxyXG4iLCJpbXBvcnQge0Jhc2VBcGlIYW5kbGVyfSBmcm9tIFwiLi9CYXNlQXBpSGFuZGxlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNlbmRPdHBDb2RlSGFuZGxlciBleHRlbmRzIEJhc2VBcGlIYW5kbGVyIHtcclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0UmVxdWVzdFBhcmFtcygpOiB7fSB7XHJcbiAgICAgICAgdGhpcy5kYXRhU3RvcmUuYXBpRGF0YS5nZXRBY2NvdW50SW5mbyA9IHRoaXMuZGF0YVN0b3JlLmFwaURhdGEuZ2V0QWNjb3VudEluZm8gfHwge307XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHRoaXMuZGF0YVN0b3JlLmFwaURhdGEuZ2V0QWNjb3VudEluZm8ucGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgIGVtYWlsOiB0aGlzLmRhdGFTdG9yZS5hcGlEYXRhLmdldEFjY291bnRJbmZvLmVtYWlsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaGFuZGxlUmVzcG9uc2UocmVzcG9uc2U6IHt9KSB7XHJcbiAgICAgICAgdGhpcy5kYXRhU3RvcmUub3RwRGF0YS52VG9rZW4gPSByZXNwb25zZVsndlRva2VuJ107XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5CYXNlQXBpSGFuZGxlci5hZGRIYW5kbGVyKCdhY2NvdW50cy5vdHAuc2VuZENvZGUnLCBTZW5kT3RwQ29kZUhhbmRsZXIpO1xyXG4iLCJpbXBvcnQge0Jhc2VBcGlIYW5kbGVyfSBmcm9tIFwiLi9CYXNlQXBpSGFuZGxlclwiO1xyXG5pbXBvcnQgeyBJU2VuZFZlcmlmaWNhdGlvblJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL0Zvcm1zL1B1c2hBdXRoTWV0aG9kRm9ybVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNlbmRWZXJpZmljYXRpb25IYW5kbGVyIGV4dGVuZHMgQmFzZUFwaUhhbmRsZXIge1xyXG5cclxuICAgIHByb3RlY3RlZCBnZXRSZXF1ZXN0UGFyYW1zKCk6IHtpZGVudGlmaWVyOiBzdHJpbmd9IHtcclxuICAgICAgICBjb25zdCBhY2NvdW50SW5mbyA9IHRoaXMuZGF0YVN0b3JlLmFwaURhdGEuZ2V0QWNjb3VudEluZm8gfHwge307XHJcbiAgICAgICAgcmV0dXJuIHtpZGVudGlmaWVyOiBhY2NvdW50SW5mby5pZGVudGlmaWVyfTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaGFuZGxlUmVzcG9uc2UocmVzcG9uc2U6IElTZW5kVmVyaWZpY2F0aW9uUmVzcG9uc2UpIHtcclxuICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09IDAgJiYgcmVzcG9uc2UudlRva2VuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVN0b3JlLnB1c2hEYXRhLnZUb2tlbiA9IHJlc3BvbnNlLnZUb2tlbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuZXJyb3IoJ2dpZ3lhLmFjY291bnRzLmF1dGgucHVzaC5zZW5kVmVyaWZpY2F0aW9uIGZhaWxlZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuQmFzZUFwaUhhbmRsZXIuYWRkSGFuZGxlcignYWNjb3VudHMuYXV0aC5wdXNoLnNlbmRWZXJpZmljYXRpb24nLCBTZW5kVmVyaWZpY2F0aW9uSGFuZGxlcik7XHJcbiIsImltcG9ydCB7QmFzZUFwaUhhbmRsZXJ9IGZyb20gXCIuL0Jhc2VBcGlIYW5kbGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU3RhbmRhcmRBcGlIYW5kbGVyIGV4dGVuZHMgQmFzZUFwaUhhbmRsZXIge1xyXG5cclxuICAgIHByb3RlY3RlZCBnZXRSZXF1ZXN0UGFyYW1zKCk6IHt9IHtcclxuICAgICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGhhbmRsZVJlc3BvbnNlKHJlc3BvbnNlOiB7fSkgeyB9XHJcblxyXG59XHJcbkJhc2VBcGlIYW5kbGVyLmFkZERlZmF1bHRIYW5kbGVyKFN0YW5kYXJkQXBpSGFuZGxlcik7XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vQmFzZUFwaUhhbmRsZXInO1xyXG5leHBvcnQgKiBmcm9tICcuL1N0YW5kYXJkSGFuZGxlcic7XHJcbmV4cG9ydCAqIGZyb20gJy4vU2VuZE90cENvZGVIYW5kbGVyJztcclxuZXhwb3J0ICogZnJvbSAnLi9TZW5kVmVyaWZpY2F0aW9uSGFuZGxlcic7XHJcbiIsImltcG9ydCB7IElNYXAgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcclxuXHJcbmV4cG9ydCBjb25zdCBlbnVtIENhcHRjaGFQcm92aWRlciB7XHJcbiAgICBHT09HTEUgPSAnR29vZ2xlJyxcclxuICAgIEZVTkNBUFRDSEEgPSAnRnVuQ2FwdGNoYScsXHJcbn1cclxuZXhwb3J0IGNvbnN0IENhcHRjaGFIYW5kbGVycyA9IHt9O1xyXG5leHBvcnQgZW51bSBDYXB0Y2hhTW9kZSB7XHJcbiAgICBWaXNpYmxlLFxyXG4gICAgSW52aXNpYmxlLFxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgSUNhcHRjaGFIYW5kbGVyU2V0dGluZ3Mge1xyXG4gICAgbGFuZzogc3RyaW5nO1xyXG4gICAgbW9kZTogQ2FwdGNoYU1vZGU7XHJcbn1cclxuZXhwb3J0IHR5cGUgQ2FwdGNoYVBhcmFtcyA9IElDYXB0Y2hhSGFuZGxlclNldHRpbmdzICYgSU1hcDxzdHJpbmc+O1xyXG5leHBvcnQgaW50ZXJmYWNlIElDYXB0Y2hhSGFuZGxlciB7XHJcbiAgICBpbml0KGhvc3RFbGVtZW50OiBIVE1MRWxlbWVudCk6IFByb21pc2U8Ym9vbGVhbj47XHJcbiAgICByZXNldCgpOiB2b2lkO1xyXG4gICAgZ2V0VG9rZW4oKTogUHJvbWlzZTxzdHJpbmc+O1xyXG59XHJcbmxldCBuZXh0Q2FwdGNoYUlEID0gMDtcclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VDYXB0Y2hhSGFuZGxlciBpbXBsZW1lbnRzIElDYXB0Y2hhSGFuZGxlciB7XHJcbiAgICBwcm90ZWN0ZWQgY2hhbGxlbmdlRXhlY3V0b3I6IFByb21pc2U8c3RyaW5nPjtcclxuICAgIHByb3RlY3RlZCBjaGFsbGVuZ2VSZWY6IGFueTtcclxuICAgIHByb3RlY3RlZCBjYXB0Y2hhVG9rZW46IHN0cmluZztcclxuXHJcbiAgICBwcml2YXRlIF9JRCA9IGBnaWdfY2FwdGNoYV8keysrbmV4dENhcHRjaGFJRH1gO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBwYXJhbXM6IENhcHRjaGFQYXJhbXMgPSB7fSBhcyBDYXB0Y2hhUGFyYW1zKSB7fVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBpbml0KGhvc3RFbGVtZW50OiBIVE1MRWxlbWVudCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIGlmICghdGhpcy5zaXRlS2V5KSB7XHJcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci53YXJuKCdNaXNzaW5nIGNhcHRjaGEgY29uZmlndXJhdGlvbicpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQcm92aWRlcigpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcihob3N0RWxlbWVudCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLndhcm4oZS5tZXNzYWdlIHx8IGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXRJRCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9JRDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0VG9rZW4oKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYXB0Y2hhVG9rZW4gfHwgKGF3YWl0IHRoaXMubGF6eUV4ZWN1dGVPckZhaWwoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2FwdGNoYVRva2VuID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IHNpdGVLZXkoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0ludmlzaWJsZSA/IHRoaXMuaW52aXNpYmxlU2l0ZUtleSA6IHRoaXMudmlzaWJsZVNpdGVLZXk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGxvYWRQcm92aWRlcigpOiBQcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCByZW5kZXIoaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgbGF6eUV4ZWN1dGVPckZhaWwoKTogUHJvbWlzZTxzdHJpbmc+O1xyXG5cclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBnZXQgcHJvdmlkZXJVUkwoKTogc3RyaW5nO1xyXG5cclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBnZXQgaW52aXNpYmxlU2l0ZUtleSgpOiBzdHJpbmc7XHJcblxyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGdldCB2aXNpYmxlU2l0ZUtleSgpOiBzdHJpbmc7XHJcblxyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGdldCBwcm92aWRlcigpOiBDYXB0Y2hhUHJvdmlkZXI7XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldCBpc0ludmlzaWJsZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXJhbXMubW9kZSA9PT0gQ2FwdGNoYU1vZGUuSW52aXNpYmxlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXQgY2FsbGJhY2tJRCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgZ2lnXyR7dGhpcy5wcm92aWRlcn1fb25Mb2FkYDtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBCYXNlQ2FwdGNoYUhhbmRsZXIsIENhcHRjaGFQcm92aWRlciwgQ2FwdGNoYUhhbmRsZXJzIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9IYW5kbGVycy9DYXB0Y2hhSGFuZGxlci9CYXNlQ2FwdGNoYUhhbmRsZXInO1xyXG5pbXBvcnQgeyBDYXB0Y2hhIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9DYXB0Y2hhJztcclxuXHJcbmRlY2xhcmUgbGV0IEZ1bkNhcHRjaGE6IENhcHRjaGE7XHJcbmxldCBmdW5DYXB0Y2hhTG9hZDogUHJvbWlzZTx2b2lkPjtcclxuZXhwb3J0IGNsYXNzIEZ1bkNhcHRjaGFIYW5kbGVyIGV4dGVuZHMgQmFzZUNhcHRjaGFIYW5kbGVyIHtcclxuICAgIHByb3RlY3RlZCByZW5kZXIoaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5jaGFsbGVuZ2VFeGVjdXRvciA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuSW5wdXQgPSBob3N0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbbmFtZT1cImZjLXRva2VuXCJdJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FwdGNoYVRva2VuID0gdG9rZW5JbnB1dCAmJiB0b2tlbklucHV0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLmNhcHRjaGFUb2tlbik7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpZCA9IGAke3RoaXMuZ2V0SUQoKX1fJHtEYXRlLm5vdygpfWA7XHJcbiAgICAgICAgICAgIGhvc3RFbGVtZW50LmlubmVySFRNTCA9IGA8ZGl2IGlkPVwiJHtpZH1cIj48L2Rpdj5gO1xyXG4gICAgICAgICAgICB0aGlzLmNoYWxsZW5nZVJlZiA9IG5ldyBGdW5DYXB0Y2hhKHtcclxuICAgICAgICAgICAgICAgIHB1YmxpY19rZXk6IHRoaXMuc2l0ZUtleSxcclxuICAgICAgICAgICAgICAgIGxhbmd1YWdlOiB0aGlzLnBhcmFtcy5sYW5nLFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0X2h0bWw6IGlkLFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2ssXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodHlwZW9mIEZ1bkNhcHRjaGEgIT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5jaGFsbGVuZ2VSZWYgJiYgdGhpcy5jYXB0Y2hhVG9rZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFsbGVuZ2VSZWYucmVmcmVzaF9zZXNzaW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN1cGVyLnJlc2V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGxvYWRQcm92aWRlcigpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAodHlwZW9mIEZ1bkNhcHRjaGEgIT09ICd1bmRlZmluZWQnKSByZXR1cm47XHJcbiAgICAgICAgZWxzZSBpZiAoIWZ1bkNhcHRjaGFMb2FkKSB7XHJcbiAgICAgICAgICAgIGZ1bkNhcHRjaGFMb2FkID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgd2luZG93W3RoaXMuY2FsbGJhY2tJRF0gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHdpbmRvd1t0aGlzLmNhbGxiYWNrSURdO1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiBGdW5DYXB0Y2hhICE9PSAndW5kZWZpbmVkJyA/IHJlc29sdmUoKSA6IHJlamVjdChgZXJyb3Igd2hpbGUgdHJ5aW5nIHRvIGxvYWQgRnVuQ2FwdGNoYWApO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGdpZ3lhLnV0aWxzLnNjcmlwdC5sb2FkKHRoaXMucHJvdmlkZXJVUkwsIHJlamVjdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZnVuQ2FwdGNoYUxvYWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGxhenlFeGVjdXRlT3JGYWlsKCk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgLy8gRnVuQ2FwdGNoYSBkb24ndCBoYXZlIGxhenkgZXhlY3V0aW9uIGFzIC0gZm9yIGV4YW1wbGUgLSBnb29nbGUncyBpbnZpc2libGUgY2FwdGNoYVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignY2FwdGNoYU5lZWRlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXQgcHJvdmlkZXIoKTogQ2FwdGNoYVByb3ZpZGVyIHtcclxuICAgICAgICByZXR1cm4gQ2FwdGNoYVByb3ZpZGVyLkZVTkNBUFRDSEE7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldCBwcm92aWRlclVSTCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgLy9mdW5jYXB0Y2hhLmNvbS9mYy9hcGkvP29ubG9hZD0ke3RoaXMuY2FsbGJhY2tJRH1gO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXQgaW52aXNpYmxlU2l0ZUtleSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBnaWd5YS5wYXJ0bmVyU2V0dGluZ3MuZnVuQ2FwdGNoYSAmJiBnaWd5YS5wYXJ0bmVyU2V0dGluZ3MuZnVuQ2FwdGNoYS5zaXRlS2V5O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXQgdmlzaWJsZVNpdGVLZXkoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gZ2lneWEucGFydG5lclNldHRpbmdzLmZ1bkNhcHRjaGEgJiYgZ2lneWEucGFydG5lclNldHRpbmdzLmZ1bkNhcHRjaGEuc2l0ZUtleTtcclxuICAgIH1cclxufVxyXG5DYXB0Y2hhSGFuZGxlcnNbQ2FwdGNoYVByb3ZpZGVyLkZVTkNBUFRDSEFdID0gRnVuQ2FwdGNoYUhhbmRsZXI7XHJcbiIsImltcG9ydCB7IEJhc2VDYXB0Y2hhSGFuZGxlciwgQ2FwdGNoYVByb3ZpZGVyLCBDYXB0Y2hhSGFuZGxlcnMgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0hhbmRsZXJzL0NhcHRjaGFIYW5kbGVyL0Jhc2VDYXB0Y2hhSGFuZGxlcic7XHJcbmltcG9ydCAqIGFzIHNjcmVlblNldFV0aWxzIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xyXG5pbXBvcnQgeyBSZUNhcHRjaGEsIFBhcmFtZXRlcnMsIEJhZGdlIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9DYXB0Y2hhJztcclxuXHJcbmRlY2xhcmUgbGV0IGdyZWNhcHRjaGE6IFJlQ2FwdGNoYTtcclxuZXhwb3J0IGxldCBncmVDYXB0Y2hhTG9hZDogUHJvbWlzZTx2b2lkPjtcclxuY29uc3QgdW5pcXVlR29vZ2xlTG9jYWxlQ29kZXMgPSB7XHJcbiAgICBicjogJ2JnJyxcclxuICAgIGhlOiAnaXcnLFxyXG4gICAgJ2VzLW14JzogJ2VzLTQxOScsXHJcbiAgICB0bDogJ2ZpbCcsXHJcbn07XHJcbmV4cG9ydCBjbGFzcyBHb29nbGVDYXB0Y2hhSGFuZGxlciBleHRlbmRzIEJhc2VDYXB0Y2hhSGFuZGxlciB7XHJcblxyXG4gICAgcHJpdmF0ZSBfY2hhbGxlbmdlUmVzb2x2ZXI6ICh0b2tlbjogc3RyaW5nKSA9PiB2b2lkO1xyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIFJFQ0FQVENIQV9ET01BSU4gPSAnd3d3LnJlY2FwdGNoYS5uZXQnO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgR09PR0xFX0RPTUFJTiA9ICd3d3cuZ29vZ2xlLmNvbSc7XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgUkVUUllfRlJPTV9SRUNBUFRDSEFfVElNRU9VVCA9IDMgKiAxMDAwO1xyXG5cclxuICAgIHByb3RlY3RlZCByZW5kZXIoaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzSW52aXNpYmxlICYmIHNjcmVlblNldFV0aWxzLmluSUZyYW1lKCkpIHtcclxuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLndhcm4oJ3JlQ0FQVENIQSB2MiBjYW5ub3QgYmUgbG9hZGVkIGluc2lkZSBpRnJhbWUnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY2FsbGJhY2sgPSAodG9rZW46IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNhcHRjaGFUb2tlbiA9IHRva2VuO1xyXG4gICAgICAgICAgICB0aGlzLl9jaGFsbGVuZ2VSZXNvbHZlcih0b2tlbik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCByZWNhcHRjaGFQYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIHNpdGVrZXk6IHRoaXMuc2l0ZUtleSxcclxuICAgICAgICAgICAgY2FsbGJhY2ssXHJcbiAgICAgICAgICAgIHR5cGU6IHRoaXMucGFyYW1zWyd0eXBlJ10sXHJcbiAgICAgICAgICAgIHRoZW1lOiB0aGlzLnBhcmFtc1sndGhlbWUnXSxcclxuICAgICAgICAgICAgc2l6ZTogdGhpcy5wYXJhbXNbJ3NpemUnXSxcclxuICAgICAgICB9IGFzIFBhcmFtZXRlcnM7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzSW52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHJlY2FwdGNoYVBhcmFtcy5iYWRnZSA9IHRoaXMucGFyYW1zWydiYWRnZSddIGFzIEJhZGdlO1xyXG4gICAgICAgICAgICByZWNhcHRjaGFQYXJhbXMuc2l6ZSA9ICdpbnZpc2libGUnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaWQgPSBgJHt0aGlzLmdldElEKCl9XyR7RGF0ZS5ub3coKX1gO1xyXG4gICAgICAgIGhvc3RFbGVtZW50LmlubmVySFRNTCA9IGA8ZGl2IGlkPVwiJHtpZH1cIj48L2Rpdj5gO1xyXG4gICAgICAgIHRoaXMuX2NyZWF0ZUNoYWxsZW5nZUV4ZWN1dG9yKCk7XHJcbiAgICAgICAgdGhpcy5jaGFsbGVuZ2VSZWYgPSBncmVjYXB0Y2hhLnJlbmRlcihpZCwgcmVjYXB0Y2hhUGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBncmVjYXB0Y2hhICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgdGhpcy5jaGFsbGVuZ2VSZWYgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIGdyZWNhcHRjaGEucmVzZXQodGhpcy5jaGFsbGVuZ2VSZWYpO1xyXG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVDaGFsbGVuZ2VFeGVjdXRvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdXBlci5yZXNldCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBsb2FkUHJvdmlkZXIoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBncmVjYXB0Y2hhICE9PSAndW5kZWZpbmVkJykgcmV0dXJuO1xyXG4gICAgICAgIGVsc2UgaWYgKCFncmVDYXB0Y2hhTG9hZCkge1xyXG4gICAgICAgICAgICBsZXQgdGltZW91dElkO1xyXG4gICAgICAgICAgICBncmVDYXB0Y2hhTG9hZCA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbG9hZEZyb21SZWNhcHRjaGFEb21haW4gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmRlYnVnKGBMb2FkaW5nIGdvb2dsZSBjYXB0Y2hhIGZyb20gJHtHb29nbGVDYXB0Y2hhSGFuZGxlci5SRUNBUFRDSEFfRE9NQUlOfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBncmVjYXB0Y2hhICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIuZGVidWcoJ0Fib3J0aW5nLiBHb29nbGUgY2FwdGNoYSBhbHJlYWR5IGxvYWRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnBhcmFtc1snZ29vZ2xlQ2FwdGNoYURvbWFpbiddID09PSBHb29nbGVDYXB0Y2hhSGFuZGxlci5SRUNBUFRDSEFfRE9NQUlOKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5kZWJ1ZyhgQWJvcnRpbmcuIEFscmVhZHkgdHJpZWQgdG8gbG9hZCBmcm9tICR7R29vZ2xlQ2FwdGNoYUhhbmRsZXIuUkVDQVBUQ0hBX0RPTUFJTn0gYW5kIGZhaWxlZCdgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChgRmFpbGVkIHRvIGxvYWQgZ29vZ2xlJ3MgY2FwdGNoYSBmcm9tICR7R29vZ2xlQ2FwdGNoYUhhbmRsZXIuUkVDQVBUQ0hBX0RPTUFJTn1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJhbXNbJ2dvb2dsZUNhcHRjaGFEb21haW4nXSA9IEdvb2dsZUNhcHRjaGFIYW5kbGVyLlJFQ0FQVENIQV9ET01BSU47XHJcbiAgICAgICAgICAgICAgICAgICAgZ2lneWEudXRpbHMuc2NyaXB0LmxvYWQodGhpcy5wcm92aWRlclVSTCwgcmVqZWN0KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KHJlbG9hZEZyb21SZWNhcHRjaGFEb21haW4sIEdvb2dsZUNhcHRjaGFIYW5kbGVyLlJFVFJZX0ZST01fUkVDQVBUQ0hBX1RJTUVPVVQpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93W3RoaXMuY2FsbGJhY2tJRF0gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHdpbmRvd1t0aGlzLmNhbGxiYWNrSURdO1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiBncmVjYXB0Y2hhICE9PSAndW5kZWZpbmVkJyA/IHJlc29sdmUoKSA6IHJlamVjdChgRXJyb3Igd2hpbGUgdHJ5aW5nIHRvIGxvYWQgZ3JlY2FwdGNoYWApO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5kZWJ1ZyhgTG9hZGluZyBncmVjYXB0Y2hhIGZyb20gJHt0aGlzLl9kb21haW59YCk7XHJcbiAgICAgICAgICAgICAgICBnaWd5YS51dGlscy5zY3JpcHQubG9hZCh0aGlzLnByb3ZpZGVyVVJMLCByZWxvYWRGcm9tUmVjYXB0Y2hhRG9tYWluKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBncmVDYXB0Y2hhTG9hZDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgbGF6eUV4ZWN1dGVPckZhaWwoKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICBpZiAodGhpcy5pc0ludmlzaWJsZSkge1xyXG4gICAgICAgICAgICBncmVjYXB0Y2hhLmV4ZWN1dGUodGhpcy5jaGFsbGVuZ2VSZWYpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGFsbGVuZ2VFeGVjdXRvcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYXB0Y2hhTmVlZGVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldCBwcm92aWRlcigpOiBDYXB0Y2hhUHJvdmlkZXIge1xyXG4gICAgICAgIHJldHVybiBDYXB0Y2hhUHJvdmlkZXIuR09PR0xFO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXQgcHJvdmlkZXJVUkwoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gYC8vJHt0aGlzLl9kb21haW59L3JlY2FwdGNoYS9hcGkuanM/cmVuZGVyPWV4cGxpY2l0Jm9ubG9hZD0ke3RoaXMuY2FsbGJhY2tJRH0maGw9JHt0aGlzLl9sYW5nfWA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldCBpbnZpc2libGVTaXRlS2V5KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5pbnZpc2libGVSZWNhcHRjaGEgJiYgZ2lneWEucGFydG5lclNldHRpbmdzLmludmlzaWJsZVJlY2FwdGNoYS5zaXRlS2V5O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXQgdmlzaWJsZVNpdGVLZXkoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gZ2lneWEucGFydG5lclNldHRpbmdzLnJlY2FwdGNoYVYyICYmIGdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5yZWNhcHRjaGFWMi5zaXRlS2V5O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2NyZWF0ZUNoYWxsZW5nZUV4ZWN1dG9yKCkge1xyXG4gICAgICAgIHRoaXMuY2hhbGxlbmdlRXhlY3V0b3IgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fY2hhbGxlbmdlUmVzb2x2ZXIgPSByZXNvbHZlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0IF9kb21haW4oKSB7XHJcbiAgICAgICAgY29uc3QgaXNDTkRhdGFDZW50ZXIgPSBnaWd5YS5kYXRhQ2VudGVyLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignY24xJykgPT09IDAgfHwgZ2lneWEudXRpbHMuc3RyaW5nVXRpbHMuZW5kc1dpdGgoZ2lneWEuZGF0YUNlbnRlciwgJ2dpZ2F5LWFwaS5jbicpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBhcmFtc1snZ29vZ2xlQ2FwdGNoYURvbWFpbiddIHx8IChpc0NORGF0YUNlbnRlciA/IEdvb2dsZUNhcHRjaGFIYW5kbGVyLlJFQ0FQVENIQV9ET01BSU4gOiBHb29nbGVDYXB0Y2hhSGFuZGxlci5HT09HTEVfRE9NQUlOKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldCBfbGFuZygpIHtcclxuICAgICAgICByZXR1cm4gdW5pcXVlR29vZ2xlTG9jYWxlQ29kZXNbdGhpcy5wYXJhbXMubGFuZ10gfHwgdGhpcy5wYXJhbXMubGFuZztcclxuICAgIH1cclxufVxyXG5DYXB0Y2hhSGFuZGxlcnNbQ2FwdGNoYVByb3ZpZGVyLkdPT0dMRV0gPSBHb29nbGVDYXB0Y2hhSGFuZGxlcjtcclxuIiwiZXhwb3J0ICogZnJvbSAnLi9BcGlIYW5kbGVyJztcclxuIiwiaW1wb3J0IHsgRm9ybUlucHV0LCBJRm9ybUlucHV0Q29udGV4dCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0Zvcm1JbnB1dCc7XHJcblxyXG5leHBvcnQgY2xhc3MgQnV0dG9uSW5wdXQgZXh0ZW5kcyBGb3JtSW5wdXQge1xyXG4gICAgcHVibGljIHN0YXRpYyBGT1JNX1RZUEVfQ1JJVEVSSUEoY29udGV4dDogSUZvcm1JbnB1dENvbnRleHQpIHtcclxuICAgICAgICByZXR1cm4gY29udGV4dC50eXBlID09PSAnc3VibWl0JyB8fCBjb250ZXh0LnR5cGUgPT09ICdyZXNldCcgfHwgY29udGV4dC50eXBlID09PSAnYnV0dG9uJyB8fCBjb250ZXh0LmVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2J1dHRvbic7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogSUZvcm1JbnB1dENvbnRleHQpIHtcclxuICAgICAgICBzdXBlcihjb250ZXh0LCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybjsgLy8gb3VyIGZvcm0gc2hvdWxkIG5ldmVyIHNldCB2YWx1ZSB0byBidXR0b25zXHJcbiAgICB9XHJcbn1cclxuRm9ybUlucHV0LmFkZElucHV0VG9MaWJyYXJ5KEJ1dHRvbklucHV0KTtcclxuIiwiaW1wb3J0IHsgRm9ybUlucHV0LCBJRm9ybUlucHV0Q29udGV4dCwgSVZhbGlkYXRpb25DYWxsYmFjayB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0Zvcm1JbnB1dCc7XHJcbmltcG9ydCB7IEdTRXJyb3JzIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMnO1xyXG5cclxuZXhwb3J0IHZhciBDaGVja2JveElucHV0X0NPTlNUUyA9IHtcclxuICAgIGVycm9yQ2xhc3M6ICdnaWd5YS10ZXJtcy1lcnJvcicsXHJcbiAgICB2YWxpZENsYXNzOiAnZ2lneWEtdGVybXMtdmFsaWQnLFxyXG4gICAgZGF0YVZhbHVlSW5BcnJheTogJ2RhdGEtdmFsdWUtaW4tYXJyYXknLFxyXG59O1xyXG5leHBvcnQgY2xhc3MgQ2hlY2tib3hJbnB1dCBleHRlbmRzIEZvcm1JbnB1dCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIEZPUk1fVFlQRV9DUklURVJJQShjb250ZXh0OiBJRm9ybUlucHV0Q29udGV4dCkge1xyXG4gICAgICAgIHJldHVybiBjb250ZXh0LnR5cGUgPT09ICdjaGVja2JveCc7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogSUZvcm1JbnB1dENvbnRleHQpIHtcclxuICAgICAgICBzdXBlcihjb250ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVxdWlyZWQoKSB7XHJcbiAgICAgICAgLy8gU2VlICM0NDAzMC5cclxuICAgICAgICBpZiAoL14oLitcXC4pP3Rlcm1zJC8udGVzdCh0aGlzLmZpZWxkTmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnJlcXVpcmVkKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNDbGllbnRSZXF1aXJlZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzQ2xpZW50UmVxdWlyZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjaGVtYSAmJiB0aGlzLl9zY2hlbWEuZm9ybWF0ICYmIHRoaXMuX3NjaGVtYS5mb3JtYXQudG9Mb3dlckNhc2UoKSA9PSAndHJ1ZSc7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9pc1ZhbHVlRW1wdHkodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gIXZhbHVlOyAvLyBvdmVycmlkZSBkZWZhdWx0IGhhbmRsaW5nIG9mIGNoZWNrYm94ZXNcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdmFsaWRhdGVWYWx1ZShmb3JtRGF0YTogYW55LCBmaWVsZFZhbHVlOiBhbnksIGNhbGxiYWNrOiBJVmFsaWRhdGlvbkNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVxdWlyZWQoKSAmJiAhZmllbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5SRVFVSVJFRF9WQUxVRV9WQUxJREFUSU9OX0VSUk9SLFxyXG4gICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3VwZXIudmFsaWRhdGVWYWx1ZShmb3JtRGF0YSwgZmllbGRWYWx1ZSwgY2FsbGJhY2spO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBfc2hvd1ZhbGlkaXR5T25JbnB1dCgpIHtcclxuICAgICAgICB0aGlzLnNldFZhbGl0aWR5Q2xhc3ModGhpcy5pbnN0YW5jZUVsZW1lbnQucGFyZW50RWxlbWVudCwgdGhpcy5fdmFsaWRpdHlTdGF0ZSwgQ2hlY2tib3hJbnB1dF9DT05TVFMudmFsaWRDbGFzcywgQ2hlY2tib3hJbnB1dF9DT05TVFMuZXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCkge1xyXG4gICAgICAgIHN1cGVyLmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0VmFsaXRpZHlDbGFzcyh0aGlzLmluc3RhbmNlRWxlbWVudC5wYXJlbnRFbGVtZW50LCB0aGlzLl92YWxpZGl0eVN0YXRlLCBDaGVja2JveElucHV0X0NPTlNUUy52YWxpZENsYXNzLCBDaGVja2JveElucHV0X0NPTlNUUy5lcnJvckNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcHJlUG9wdWxhdGUodmFsdWU6IHN0cmluZyB8IGJvb2xlYW4gfCBzdHJpbmdbXSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGVsID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgZGF0YVZhbHVlSW5BcnJheSA9IGVsLmdldEF0dHJpYnV0ZShDaGVja2JveElucHV0X0NPTlNUUy5kYXRhVmFsdWVJbkFycmF5KTtcclxuICAgICAgICBpZiAoIWRhdGFWYWx1ZUluQXJyYXkpIHN1cGVyLnByZVBvcHVsYXRlKHZhbHVlIGFzIHN0cmluZyB8IGJvb2xlYW4pO1xyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgY29uc3QgcG9zID0gdmFsdWUuaW5kZXhPZihkYXRhVmFsdWVJbkFycmF5KTtcclxuICAgICAgICAgICAgc3VwZXIucHJlUG9wdWxhdGUocG9zID49IDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vdG9kbyA6IHdhcm4gYWJvdXQgaWxsZWdhbCB2YWx1ZSAodW5kZWZpZW5kLCBudWxsLi4pXHJcbiAgICAgICAgICAgIHN1cGVyLnByZVBvcHVsYXRlKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFZhbHVlKGRhdGFWYWx1ZTogc3RyaW5nIHwgYm9vbGVhbiwgc2V0QnlTY3JpcHQ6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XHJcbiAgICAgICAgLy8gU2V0IG5ldyB2YWx1ZSBkaXJlY3RseSBvbiB0aGUgRE9NLlxyXG4gICAgICAgIGNvbnN0IGVsID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICBlbC5jaGVja2VkID0gZGF0YVZhbHVlICYmIGRhdGFWYWx1ZSAhPT0gJ2ZhbHNlJzsgLy8gQm9vbGVhbiBjYW4gYmUgc2F2ZWQgYXMgXCJ0cnVlXCIgb3IgXCJmYWxzZVwiIChzdHJpbmcpLlxyXG5cclxuICAgICAgICAvLyBUcmlnZ2VyIGNoYW5nZS5cclxuICAgICAgICB0aGlzLm9uRmllbGRDaGFuZ2Uoc2V0QnlTY3JpcHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRWYWx1ZShlbCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnQsIGN1cnJlbnRWYWx1ZT86IGFueSkge1xyXG4gICAgICAgIGxldCB2YWx1ZTogc3RyaW5nW10gfCBib29sZWFuID0gZWwuY2hlY2tlZDtcclxuICAgICAgICBsZXQgYXJyYXlJdGVtVmFsdWUgPSBlbC5nZXRBdHRyaWJ1dGUoQ2hlY2tib3hJbnB1dF9DT05TVFMuZGF0YVZhbHVlSW5BcnJheSk7XHJcblxyXG4gICAgICAgIGlmIChhcnJheUl0ZW1WYWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRWYWx1ZSkgY3VycmVudFZhbHVlID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IHBvcyA9IGN1cnJlbnRWYWx1ZS5pbmRleE9mKGFycmF5SXRlbVZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKGVsLmNoZWNrZWQgJiYgcG9zIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFZhbHVlLnB1c2goYXJyYXlJdGVtVmFsdWUpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFlbC5jaGVja2VkICYmIHBvcyA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUuc3BsaWNlKHBvcywgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFsdWUgPSBjdXJyZW50VmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxufVxyXG5Gb3JtSW5wdXQuYWRkSW5wdXRUb0xpYnJhcnkoQ2hlY2tib3hJbnB1dCk7XHJcbiIsImltcG9ydCB7IEZvcm1JbnB1dCwgSUZvcm1JbnB1dENvbnRleHQsIElWYWxpZGF0aW9uQ2FsbGJhY2sgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Gb3JtSW5wdXQnO1xyXG5pbXBvcnQgeyBMb2dpbkZvcm0gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL0xvZ2luRm9ybSc7XHJcbmltcG9ydCB7IEdTRXJyb3JzIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEVtYWlsSW5wdXQgZXh0ZW5kcyBGb3JtSW5wdXQge1xyXG4gICAgcHVibGljIHN0YXRpYyBGT1JNX1RZUEVfQ1JJVEVSSUEoY29udGV4dDogSUZvcm1JbnB1dENvbnRleHQpIHtcclxuICAgICAgICByZXR1cm4gIShjb250ZXh0LmZvcm0gaW5zdGFuY2VvZiBMb2dpbkZvcm0pICYmIChjb250ZXh0LmZpZWxkTmFtZSA9PT0gJ2VtYWlsJyB8fCBjb250ZXh0LnR5cGUgPT09ICdlbWFpbCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIoY29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHZhbGlkYXRlVmFsdWUoZm9ybURhdGE6IGFueSwgZmllbGRWYWx1ZTogYW55LCBjYWxsYmFjazogSVZhbGlkYXRpb25DYWxsYmFjayk6IHZvaWQge1xyXG4gICAgICAgIGlmIChmaWVsZFZhbHVlICYmICFnaWd5YS5wbHVnaW5VdGlscy52YWxpZGF0aW9uLmlzVmFsaWRFbWFpbExvZ2luSUQoZmllbGRWYWx1ZSkpXHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLklOVkFMSURfUEFSQU1FVEVSX1ZBTFVFLFxyXG4gICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gc3VwZXIudmFsaWRhdGVWYWx1ZShmb3JtRGF0YSwgZmllbGRWYWx1ZSwgY2FsbGJhY2spO1xyXG4gICAgfVxyXG59XHJcbkZvcm1JbnB1dC5hZGRJbnB1dFRvTGlicmFyeShFbWFpbElucHV0KTtcclxuIiwiaW1wb3J0IHtcclxuICAgIERlZXBGcmVlemUsXHJcbiAgICBJTWFwLFxyXG4gICAgSU51bWVyaWNNYXAsXHJcbiAgICBJRW51bWVyYWJsZSxcclxuICAgIEZvckVhY2gsXHJcbiAgICBTb21lLFxyXG4gICAgaXNIaWRkZW4sXHJcbiAgICBpc0ZpZWxkSW5IaWRkZW5Db250YWluZXIsXHJcbiAgICBpc0tleUNvZGVEaXNwbGF5YWJsZSxcclxufSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcclxuaW1wb3J0IHsgQmFzZUZvcm0sIFNjaGVtYU5hbWUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtJztcclxuaW1wb3J0IHsgSVNjcmVlblNldFBhcmFtcyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UGx1Z2luJztcclxuaW1wb3J0IHsgVGVtcGxhdGVFbGVtZW50LCBJQ29uZGl0aW9uYWxBdHRyaWJ1dGUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1RlbXBsYXRlRWxlbWVudCc7XHJcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcclxuaW1wb3J0IHsgbmFtZXNwYWNlLCBjb25zZW50RmllbGROYW1lIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Db25zZW50JztcclxuaW1wb3J0IHsgQXJyYXlNYW5hZ2VyX0NPTlNUIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0FycmF5TWFuYWdlcldpZGdldCc7XHJcbmltcG9ydCB7IG5vdEltcGxlbWVudGVyQWJzdHJhY3QgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Vycm9ycyc7XHJcbmltcG9ydCB7IEdTRXJyb3JzIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJRmllbGROYW1lcyB7XHJcbiAgICBhdXRvRmlsbE5hbWU6IHN0cmluZztcclxuICAgIHBhcmFtTmFtZTogc3RyaW5nO1xyXG59XHJcbmV4cG9ydCBlbnVtIFZhbGlkaXR5U3RhdGVzIHtcclxuICAgIF91bmRlZmluZWQsXHJcbiAgICB2YWxpZCxcclxuICAgIGVycm9yLFxyXG4gICAgcGVuZGluZyxcclxufVxyXG5EZWVwRnJlZXplKFZhbGlkaXR5U3RhdGVzKTtcclxuZXhwb3J0IGludGVyZmFjZSBJVmFsaWRhdGlvbkluZm8ge1xyXG4gICAgZXJyb3JDb2RlOiBHU0Vycm9ycztcclxuICAgIGZpZWxkOiBJRm9ybUlucHV0O1xyXG4gICAgc2V0QnlTY3JpcHQ/OiBib29sZWFuO1xyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgSVZhbGlkYXRpb25DYWxsYmFjayBleHRlbmRzIEZ1bmN0aW9uIHtcclxuICAgICh2YWxpZGF0aW9uSW5mbzogSVZhbGlkYXRpb25JbmZvKTogdm9pZDtcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIElWYWxpZGl0eVN0YXRlTGlzdGVuZXIgZXh0ZW5kcyBGdW5jdGlvbiB7XHJcbiAgICAodmFsaWRpdHlTdGF0ZXM6IFZhbGlkaXR5U3RhdGVzLCBmcm9tU2VydmVyOiBib29sZWFuLCBmb3JtSW5wdXQ6IEZvcm1JbnB1dCk6IHZvaWQ7XHJcbn1cclxuZXhwb3J0IHZhciBmaWVsZHNOYW1lRGF0YTogSU1hcDxJRmllbGROYW1lcz4gPSB7XHJcbiAgICBsb2dpbklEOiB7IGF1dG9GaWxsTmFtZTogJ3VzZXJuYW1lJywgcGFyYW1OYW1lOiAnbG9naW5JRCcgfSxcclxuICAgIHBhc3N3b3JkUmV0eXBlOiB7IGF1dG9GaWxsTmFtZTogJycsIHBhcmFtTmFtZTogJycgfSxcclxufTtcclxuRGVlcEZyZWV6ZShmaWVsZHNOYW1lRGF0YSk7XHJcbnZhciBmaWVsZHNEaXNwbGF5TmFtZXMgPSB7XHJcbiAgICBsb2dpbklEOiAndXNlcm5hbWUnLFxyXG4gICAgc2VjcmV0UXVlc3Rpb246ICdzZWNyZXQgcXVlc3Rpb24nLFxyXG4gICAgc2VjcmV0QW5zd2VyOiAnc2VjcmV0IGFuc3dlcicsXHJcbn07XHJcbkRlZXBGcmVlemUoZmllbGRzRGlzcGxheU5hbWVzKTtcclxuZXhwb3J0IGludGVyZmFjZSBJRm9ybUlucHV0IHtcclxuICAgIGlzQ2FwdGNoYTogYm9vbGVhbjtcclxuICAgIGdldFZhbHVlKGVsPzogSFRNTEVsZW1lbnQsIGN1cnJlbnRWYWx1ZT86IGFueSk6IHN0cmluZyB8IHN0cmluZ1tdIHwgYm9vbGVhbiB8IG51bGw7XHJcbiAgICBnZXROYW1lKGlzTm9ybWFsaXplZDogYm9vbGVhbiwgZmxhdHRlbj86IGJvb2xlYW4pOiBzdHJpbmc7XHJcbiAgICBnZXRBcnJheVJvb3QoZmxhdHRlbj86IGJvb2xlYW4pOiBzdHJpbmc7XHJcbiAgICBmaWVsZE5hbWU6IHN0cmluZztcclxuICAgIG5vcm1hbGl6ZWRGaWVsZE5hbWU6IHN0cmluZztcclxuICAgIGZpZWxkQmFzZU5hbWU6IHN0cmluZztcclxuICAgIGZpZWxkTmFtZXNwYWNlOiBTY2hlbWFOYW1lO1xyXG4gICAgZGlzcGxheU5hbWU6IHN0cmluZztcclxuICAgIGlzSW5IaWRkZW5Db250YWluZXIoKTogYm9vbGVhbjtcclxuICAgIGlzSGlkZGVuKCk6IGJvb2xlYW47XHJcbiAgICByZXF1aXJlZCgpOiBib29sZWFuO1xyXG4gICAgZGlzYWJsZWQoKTogYm9vbGVhbjtcclxuICAgIGFsbG93RW1wdHkoKTogYm9vbGVhbjtcclxuICAgIGluc3RhbmNlRWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgICB2YWxpZGF0ZShjYWxsYmFjazogSVZhbGlkYXRpb25DYWxsYmFjaywgZm9ybURhdGE/OiBhbnkpOiB2b2lkO1xyXG4gICAgYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWU6IHN0cmluZywgaGFuZGxlcjogRnVuY3Rpb24pO1xyXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWU6IHN0cmluZywgaGFuZGxlcjogRnVuY3Rpb24pO1xyXG4gICAgZ2V0VmFsaWRpdHlTdGF0ZSgpOiBWYWxpZGl0eVN0YXRlcztcclxuICAgIHNldFZhbGlkaXR5U3RhdGUodmFsaWRpdHlTdGF0ZTogVmFsaWRpdHlTdGF0ZXMpO1xyXG4gICAgYWRkVmFsaWRpdHlTdGF0ZUxpc3RlbmVyKGxpc3RlbmVyOiBJVmFsaWRpdHlTdGF0ZUxpc3RlbmVyKTtcclxuICAgIHJlbW92ZVZhbGlkaXR5U3RhdGVMaXN0ZW5lcihsaXN0ZW5lcjogSVZhbGlkaXR5U3RhdGVMaXN0ZW5lcik7XHJcbiAgICB1cGRhdGUoZWxlbWVudD86IEhUTUxFbGVtZW50LCBmaWVsZE5hbWU/OiBzdHJpbmcsIGlzRGF0YUZpZWxkPzogYm9vbGVhbik6IHZvaWQ7XHJcbn1cclxuZXhwb3J0IGVudW0gV3JpdGVBY2Nlc3NNb2RlcyB7XHJcbiAgICBjbGllbnRNb2RpZnksXHJcbiAgICBjbGllbnRDcmVhdGUsXHJcbn1cclxuZXhwb3J0IHZhciBGb3JtSW5wdXRfQ09OU1RTID0ge1xyXG4gICAgZmllbGROYW1lOiAnZGF0YS1naWd5YS1uYW1lJyxcclxuICAgIGRpc3BsYXlOYW1lOiAnZGF0YS1kaXNwbGF5LW5hbWUnLFxyXG4gICAgY2FwdGNoYTogJ2dpZ3lhLWNhcHRjaGEnLFxyXG4gICAgYWxsb3dFbXB0eTogJ2RhdGEtYWxsb3ctZW1wdHknLFxyXG4gICAgcmVxdWlyZWQ6ICdkYXRhLXJlcXVpcmVkJyxcclxuICAgIG9yaWdpbmFsVmFsdWU6ICdkYXRhLW9yaWdpbmFsLXZhbHVlJyxcclxuICAgIHNlcnZlclZhbGlkYXRpb246ICdkYXRhLWludmFsaWQtZXJyb3ItY29kZScsXHJcbiAgICBzaG93VmFsaWRDaGVja21hcms6ICdzaG93LXZhbGlkLWNoZWNrbWFyaycsXHJcbiAgICBzaG93Q2hlY2ttYXJrQ2xhc3M6ICdnaWd5YS1zaG93LWNoZWNrbWFyaycsXHJcbiAgICBlcnJvckNsYXNzOiAnZ2lneWEtZXJyb3InLFxyXG4gICAgdmFsaWRDbGFzczogJ2dpZ3lhLXZhbGlkJyxcclxuICAgIHBlbmRpbmdDbGFzczogJ2dpZ3lhLXBlbmRpbmcnLFxyXG4gICAgZW1wdHlDbGFzczogJ2dpZ3lhLWVtcHR5JyxcclxuICAgIHBsYWNlaG9sZGVyQXR0cmlidXRlOiAnZGF0YS1naWd5YS1wbGFjZWhvbGRlcicsXHJcbiAgICBhcnJheVJvb3RBdHRyaWJ1dGU6ICdkYXRhLWFycmF5LXJvb3QnLFxyXG4gICAgYXJyYXlLZXlGaWVsZEF0dHJpYnV0ZTogJ2RhdGEtYXJyYXkta2V5LWZpZWxkJyxcclxuICAgIGFycmF5S2V5VmFsdWVBdHRyaWJ1dGU6ICdkYXRhLWFycmF5LWtleS12YWx1ZScsXHJcbn07XHJcbkRlZXBGcmVlemUoRm9ybUlucHV0X0NPTlNUUyk7XHJcbmludGVyZmFjZSBTY2hlbWFDaGVjayBleHRlbmRzIEZ1bmN0aW9uIHtcclxuICAgICh2YWx1ZTogYW55KTogR1NFcnJvcnM7XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBJRm9ybUlucHV0Q29udGV4dCB7XHJcbiAgICBmb3JtOiBCYXNlRm9ybTtcclxuICAgIGZpZWxkTmFtZTogc3RyaW5nO1xyXG4gICAgdHlwZTogc3RyaW5nO1xyXG4gICAgZWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwYXJhbXM6IElTY3JlZW5TZXRQYXJhbXM7XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBJRm9ybUlucHV0VHlwZSB7XHJcbiAgICBuZXcgKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KTogRm9ybUlucHV0O1xyXG5cclxuICAgIEZPUk1fVFlQRV9DUklURVJJQTogKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KSA9PiBib29sZWFuO1xyXG59XHJcbnZhciBGb3JtSW5wdXRzTGlicmFyeTogSU51bWVyaWNNYXA8SUZvcm1JbnB1dFR5cGVbXT4gPSB7fTtcclxuZXhwb3J0IGVudW0gRm9ybUlucHV0UHJpb3JpdGllcyB7XHJcbiAgICBfc3RhcnQsXHJcbiAgICBJbXBvcnRhbnQsXHJcbiAgICBOb3JtYWwsXHJcbiAgICBGYWxsYmFjayxcclxuICAgIF9lbmQsXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBJU2NoZW1hRmllbGRzPFQgZXh0ZW5kcyBJRmllbGRTY2hlbWE+IHtcclxuICAgIFtmaWVsZE5hbWU6IHN0cmluZ106IFQ7XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBJRmllbGRTY2hlbWEge1xyXG4gICAgd3JpdGVBY2Nlc3M/OiBzdHJpbmc7XHJcbiAgICB0eXBlPzogc3RyaW5nO1xyXG4gICAgcmVxdWlyZWQ/OiBib29sZWFuO1xyXG4gICAgZm9ybWF0Pzogc3RyaW5nO1xyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgSUNvbnNlbnRGaWVsZFNjaGVhbSBleHRlbmRzIElGaWVsZFNjaGVtYSB7XHJcbiAgICBjdXJyZW50RG9jVmVyc2lvbj86IG51bWJlcjtcclxuICAgIGN1cnJlbnREb2NEYXRlPzogc3RyaW5nO1xyXG59XHJcbmV4cG9ydCBjbGFzcyBGb3JtSW5wdXQgZXh0ZW5kcyBUZW1wbGF0ZUVsZW1lbnQ8SFRNTEVsZW1lbnQ+IGltcGxlbWVudHMgSUZvcm1JbnB1dCB7XHJcbiAgICBwdWJsaWMgX2Zvcm06IEJhc2VGb3JtO1xyXG4gICAgcHVibGljIGZpZWxkTmFtZTogc3RyaW5nO1xyXG4gICAgcHVibGljIGR5bmFtaWNGaWVsZCA9IGZhbHNlO1xyXG4gICAgcHVibGljIG5vcm1hbGl6ZWRGaWVsZE5hbWU6IHN0cmluZztcclxuICAgIHB1YmxpYyBmaWVsZEJhc2VOYW1lOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgZmllbGROYW1lc3BhY2U6IFNjaGVtYU5hbWU7XHJcbiAgICBwdWJsaWMgcGFyYW1OYW1lOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgZGlzcGxheU5hbWU6IHN0cmluZztcclxuICAgIHB1YmxpYyB0eXBlOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgaXNDYXB0Y2hhID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIG9uRmllbGRDaGFuZ2VEZWJvdW5jZWQ6ICgpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIGtleVVwSGFuZGxlcjogKGU6IEtleWJvYXJkRXZlbnQpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIGNoYW5nZUhhbmRsZXI6ICgpID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgX3NjaGVtYTogSUZpZWxkU2NoZW1hO1xyXG4gICAgcHJpdmF0ZSBzY2hlbWFDaGVja3M6IFNjaGVtYUNoZWNrW107XHJcbiAgICBwcml2YXRlIF9zY2hlbWFSZXF1aXJlZDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgX3NjaGVtYVdyaXRlQWNjZXNzTW9kZTogV3JpdGVBY2Nlc3NNb2RlcztcclxuICAgIHB1YmxpYyBfc2NyZWVuOiBTY3JlZW47XHJcbiAgICBwdWJsaWMgX3ZhbGlkaXR5U3RhdGUgPSBWYWxpZGl0eVN0YXRlcy5fdW5kZWZpbmVkO1xyXG4gICAgcHVibGljIHBsYWNlSG9sZGVyRWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcclxuICAgIHByaXZhdGUgX3Nob3dWYWxpZGl0eU1hcmtlcjogSU51bWVyaWNNYXA8Ym9vbGVhbj4gPSB7fTtcclxuICAgIHB1YmxpYyBwbGFjZWhvbGRlckF0dHJpYnV0ZVZhbHVlOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIGlzQ3Vycm5ldFZhbHVlUGxhY2Vob2xkZXJUZXh0OiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHByaXZhdGUgaXNDdHJsS2V5VXA6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgaXNUZXh0U2VsZWN0ZWQ6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIEtFWV9DT0RFX0RFTEVURSA9IDQ2O1xyXG4gICAgcHJpdmF0ZSBLRVlfQ09ERV9CQUNLU1BBQ0UgPSA4O1xyXG4gICAgcHJvdGVjdGVkIEtFWUNPREVfTEVUVEVSX1g6IG51bWJlciA9IDg4O1xyXG4gICAgcHJvdGVjdGVkIHByZXZpb3VzVmFsdWU6IHN0cmluZyB8IHN0cmluZ1tdIHwgYm9vbGVhbiB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBpbnRlcnZhbElEOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIC8vI3JlZ2lvbiBmb3JtSW5wdXQgbGlicmFyeVxyXG5cclxuICAgIHN0YXRpYyBhZGRJbnB1dFRvTGlicmFyeSh0eXBlOiBJRm9ybUlucHV0VHlwZSwgcHJpb3JpdHkgPSBGb3JtSW5wdXRQcmlvcml0aWVzLk5vcm1hbCkge1xyXG4gICAgICAgIHZhciBpbnB1dExpc3QgPSBGb3JtSW5wdXRzTGlicmFyeVtwcmlvcml0eV0gfHwgW107XHJcbiAgICAgICAgaW5wdXRMaXN0LnB1c2godHlwZSk7XHJcbiAgICAgICAgRm9ybUlucHV0c0xpYnJhcnlbcHJpb3JpdHldID0gaW5wdXRMaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBpbnB1dExpYnJhcnlCeVByaW9yaXR5KCkge1xyXG4gICAgICAgIHZhciBsaWIgPSBuZXcgQXJyYXk8SUZvcm1JbnB1dFR5cGU+KCk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIHByaW9yaXR5ID0gRm9ybUlucHV0UHJpb3JpdGllcy5fc3RhcnQ7IHByaW9yaXR5IDw9IEZvcm1JbnB1dFByaW9yaXRpZXMuX2VuZDsgKytwcmlvcml0eSkge1xyXG4gICAgICAgICAgICB2YXIgcHJpb3JpdHlMaXN0ID0gRm9ybUlucHV0c0xpYnJhcnlbcHJpb3JpdHldO1xyXG4gICAgICAgICAgICBpZiAocHJpb3JpdHlMaXN0KSBsaWIgPSBsaWIuY29uY2F0KHByaW9yaXR5TGlzdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbGliO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZWdpc3RlckZvcm1JbnB1dHMoZWxlbWVudHM6IElFbnVtZXJhYmxlPEVsZW1lbnQ+LCBwYXJlbnQ6IEJhc2VGb3JtKSB7XHJcbiAgICAgICAgdmFyIGlucHV0cyA9IG5ldyBBcnJheTxGb3JtSW5wdXQ+KCk7XHJcbiAgICAgICAgdmFyIGxpYiA9IEZvcm1JbnB1dC5pbnB1dExpYnJhcnlCeVByaW9yaXR5KCk7XHJcbiAgICAgICAgdmFyIGlnbm9yZWRGaWVsZHMgPSBwYXJlbnQuaWdub3JlZEZpZWxkcygpO1xyXG5cclxuICAgICAgICBGb3JFYWNoKGVsZW1lbnRzLCAoZWw6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHZhciB0eXBlOiBJRm9ybUlucHV0VHlwZTtcclxuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZSA9IGVsLmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLmZpZWxkTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCduYW1lJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBpZ25vcmUgZmllbGRzIHRoYXQgYXJlIG9uIHRoZSBmb3JtIGlnbm9yZSBsaXN0XHJcbiAgICAgICAgICAgIGlmIChpZ25vcmVkRmllbGRzW2ZpZWxkTmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaWdub3JlIGZpZWxkcyB0aGF0IGFyZSBwYXJ0IG9mIGEgZmllbGRzZXQgKGluIGNhc2Ugb2YgY29tcG9zaXRpb24gb2YgaW5wdXRzIHRoZSBmaWVsZHNldCB3aWxsIHJlcHJlc2VudCBpdHMgaW5wdXRzIGFzIGEgd2hvbGUpXHJcbiAgICAgICAgICAgIGlmKGdpZ3lhLnV0aWxzLkRPTS5pc0JlbG9uZ1RvR2lneWFGaWVsZHNldChlbCkpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IHtcclxuICAgICAgICAgICAgICAgIGZvcm06IHBhcmVudCxcclxuICAgICAgICAgICAgICAgIGZpZWxkTmFtZTogZmllbGROYW1lLFxyXG4gICAgICAgICAgICAgICAgZWxlbWVudDogZWwsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBlbC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSxcclxuICAgICAgICAgICAgICAgIHBhcmFtczogcGFyZW50Ll9zY3JlZW5TZXQucGFyYW1zLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgU29tZShsaWIsIHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gdC5GT1JNX1RZUEVfQ1JJVEVSSUEoY29udGV4dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB0eXBlID0gdDtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2g7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGUpIGlucHV0cy5wdXNoKG5ldyB0eXBlKGNvbnRleHQpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGlucHV0cztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIEZPUk1fVFlQRV9DUklURVJJQShjb250ZXh0OiBJRm9ybUlucHV0Q29udGV4dCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0LCBwdWJsaWMgaXNEYXRhRmllbGQgPSB0cnVlLCBrZXlwcmVzc1ZhbGlkYXRpb25EZWxheSA9IDEwMDApIHtcclxuICAgICAgICBzdXBlcihjb250ZXh0LmVsZW1lbnQsIGNvbnRleHQuZm9ybSk7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IGNvbnRleHQuZm9ybTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBjb250ZXh0LnR5cGU7XHJcblxyXG4gICAgICAgIHRoaXMuX3NjcmVlbiA9IHRoaXMuX2Zvcm0uX3NjcmVlbjtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGUoY29udGV4dC5lbGVtZW50LCBjb250ZXh0LmZpZWxkTmFtZSwgaXNEYXRhRmllbGQpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG93VmFsaWRDaGVja21hcmsodGhpcy50ZW1wbGF0ZUVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dWYWxpZGl0eU1hcmtlcltWYWxpZGl0eVN0YXRlcy52YWxpZF0gPSB0aGlzLl9zaG93VmFsaWRpdHlNYXJrZXJbVmFsaWRpdHlTdGF0ZXMucGVuZGluZ10gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRW5zdXJlIHRoZSBvbkZpZWxkQ2hhbmdlZCBldmVudCBpc24ndCBmaXJlZCBmb3IgZXZlcnkga2V5cHJlc3MuXHJcbiAgICAgICAgdGhpcy5vbkZpZWxkQ2hhbmdlRGVib3VuY2VkID0gZ2lneWEudXRpbHMuZnVuY3Rpb25zLmRlYm91bmNlKFxyXG4gICAgICAgICAgICAoKSA9PiB0aGlzLm9uRmllbGRDaGFuZ2UoKSxcclxuICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LnBhcmFtc1snZGVib3VuY2VEZWxheSddIHx8IGtleXByZXNzVmFsaWRhdGlvbkRlbGF5LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIG9uS2V5VXAoZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIC8vIElnbm9yZSB0YWIsIGN0cmwsIHdpbmRvd3Mga2V5LCBlc2NhcGUsIGNhcHMgbG9jaywgZXRjLlxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgZS5rZXlDb2RlICE9PSA5ICYmXHJcbiAgICAgICAgICAgIGUua2V5Q29kZSAhPT0gMTMgJiZcclxuICAgICAgICAgICAgZS5rZXlDb2RlICE9PSAxNiAmJlxyXG4gICAgICAgICAgICBlLmtleUNvZGUgIT09IDE3ICYmXHJcbiAgICAgICAgICAgIGUua2V5Q29kZSAhPT0gOTEgJiZcclxuICAgICAgICAgICAgZS5rZXlDb2RlICE9PSA5MiAmJlxyXG4gICAgICAgICAgICBlLmtleUNvZGUgIT09IDIwICYmXHJcbiAgICAgICAgICAgIGUua2V5Q29kZSAhPT0gMjdcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5vbkZpZWxkQ2hhbmdlRGVib3VuY2VkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIHdoZW4gYW4gZWxlbWVudCdzIHZhbHVlIE1BWSBoYXZlIGNoYW5nZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvbkZpZWxkQ2hhbmdlKHNldEJ5U2NyaXB0OiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcclxuICAgICAgICAvLyBNYXkgYmUgY2FsbGVkIGFmdGVyIGEgc21hbGwgZGVsYXksIGVuc3VyZSB0aGUgZWxlbWVudCBzdGlsbCBleGlzdHMuXHJcbiAgICAgICAgLy8gU3BlY2lmaWNhbGx5IGNoZWNrIHRvIGVuc3VyZSB0aGUgc2NyZWVuLXNldCBjb250YWluZXIgc3RpbGwgZXhpc3RzIHRvIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSBjb250YWluZXIgaXMga2lsbGVkIHdpdGggdGhlIGVzY2FwZSBrZXkuXHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlRWxlbWVudCB8fCAhdGhpcy5fc2NyZWVuU2V0LmNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBdm9pZCB0cmlnZ2VyaW5nIHR3aWNlIHdoZW4gYSB1c2VyIGZpbmlzaGVzIHR5cGluZyAodHJpZ2dlcmluZyBrZXlkb3duKSBhbmQgdGhlbiBsZWF2ZXMgdGhlIGZpZWxkICh0cmlnZ2VyaW5nIGNoYW5nZSkuXHJcbiAgICAgICAgLy8gRXhlbXB0IHJhZGlvIHR5cGUgYmVjYXVzZSBlYWNoIGluZGl2aWR1YWwgZWxlbWVudCBpcyB1bmlxdWUgaW5zdGFuY2UsIHNvIGl0IGNhbid0IHRyYWNrIHN0YXRlLiBSZWdhcmRsZXNzLCBpdCdzIG5vdCBuZWNlc3NhcnkuXHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMucHJldmlvdXNWYWx1ZSA9PT0gdmFsdWUgJiYgdGhpcy50eXBlICE9PSAncmFkaW8nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1ZhbHVlID0gdmFsdWU7XHJcblxyXG4gICAgICAgIC8vIFRyaWdnZXJlZCB3aGVuIGZpZWxkIGlzIGNoYW5nZWQ6XHJcbiAgICAgICAgdGhpcy51cGRhdGVDc3NDbGFzc2VzKCk7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5vbklucHV0Q2hhbmdlKHRoaXMsIHNldEJ5U2NyaXB0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlQ3NzQ2xhc3NlcygpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZENsYXNzVG9FbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50LCBGb3JtSW5wdXRfQ09OU1RTLmVtcHR5Q2xhc3MpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVDbGFzc0Zyb21FbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50LCBGb3JtSW5wdXRfQ09OU1RTLmVtcHR5Q2xhc3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQsIGZpZWxkTmFtZTogc3RyaW5nID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCduYW1lJyksIGlzRGF0YUZpZWxkPzogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuZmllbGROYW1lID0gZmllbGROYW1lO1xyXG4gICAgICAgIHRoaXMubm9ybWFsaXplZEZpZWxkTmFtZSA9IHRoaXMuX2Zvcm0uZ2V0Tm9ybWFsaXplZEZpZWxkTmFtZSh0aGlzLmZpZWxkTmFtZSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm5vcm1hbGl6ZWRGaWVsZE5hbWUpIHtcclxuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGZpZWxkIG5hbWUgcGFydHNcclxuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZVBhcnRzID0gdGhpcy5ub3JtYWxpemVkRmllbGROYW1lLnNwbGl0KCcuJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZmllbGROYW1lUGFydHMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maWVsZE5hbWVzcGFjZSA9IGZpZWxkTmFtZVBhcnRzLnNoaWZ0KCkgYXMgU2NoZW1hTmFtZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gd2hlbiBiaW5kaW5nIHRvIHRoZSBjb25zZW50J3MgZ3JhbnQgZmllbGQsIHdlIG5lZWQgdG8gdHJlYXQgdGhlIGJhc2UgbmFtZSBhcyB0aGUgY29uc2VudCBpdHNlbGYgKHNjaGVtYSB2YWxpZGF0aW9ucyBtYWlubHkpXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZpZWxkTmFtZXNwYWNlID09IG5hbWVzcGFjZSAmJiBmaWVsZE5hbWVQYXJ0c1tmaWVsZE5hbWVQYXJ0cy5sZW5ndGggLSAxXSA9PSBjb25zZW50RmllbGROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZE5hbWVQYXJ0cy5wb3AoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5maWVsZEJhc2VOYW1lID0gZmllbGROYW1lUGFydHMuam9pbignLicpLnJlcGxhY2UoQXJyYXlNYW5hZ2VyX0NPTlNULmluZGV4TWF0Y2hlciwgJycpO1xyXG5cclxuICAgICAgICAgICAgLy8gS2VlcCBuYW1lIHNhdmVkIGZvciBmdXR1cmUgc2NyZWVuc2V0IGluc3RhbmNlc1xyXG4gICAgICAgICAgICBpZiAodGhpcy5maWVsZE5hbWUgIT09IGVsZW1lbnQuZ2V0QXR0cmlidXRlKEZvcm1JbnB1dF9DT05TVFMuZmllbGROYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoRm9ybUlucHV0X0NPTlNUUy5maWVsZE5hbWUsIHRoaXMuZmllbGROYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGZpZWxkRGF0YSA9IGZpZWxkc05hbWVEYXRhW3RoaXMuZmllbGRCYXNlTmFtZV07XHJcblxyXG4gICAgICAgIHRoaXMucGFyYW1OYW1lID0gZmllbGREYXRhID8gZmllbGREYXRhLnBhcmFtTmFtZSA6IHRoaXMubm9ybWFsaXplZEZpZWxkTmFtZTtcclxuXHJcbiAgICAgICAgaWYgKGZpZWxkRGF0YSAmJiBmaWVsZERhdGEuYXV0b0ZpbGxOYW1lKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCduYW1lJywgZmllbGREYXRhLmF1dG9GaWxsTmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaXNEYXRhRmllbGQgJiYgdGhpcy5ub3JtYWxpemVkRmllbGROYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Zvcm0uYWRkRGF0YUZpZWxkKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gc2F2ZSB0aGUgb3JpZ2luYWwgdmFsdWVcclxuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoRm9ybUlucHV0X0NPTlNUUy5vcmlnaW5hbFZhbHVlLCBTdHJpbmcodGhpcy5nZXRWYWx1ZShlbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnQpKSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmtleVVwSGFuZGxlciA9IGUgPT4gdGhpcy5vbktleVVwKGUpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5rZXlVcEhhbmRsZXIpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VIYW5kbGVyID0gKCkgPT4gdGhpcy5vbkZpZWxkQ2hhbmdlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5jaGFuZ2VIYW5kbGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlRGlzcGxheU5hbWUoZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHVwZGF0ZURpc3BsYXlOYW1lKGVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gdGhpcy50ZW1wbGF0ZUVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybUlucHV0X0NPTlNUUy5kaXNwbGF5TmFtZSkgfHwgdGhpcy5maWVsZEJhc2VOYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRBcnJheVJvb3QoZmxhdHRlbjogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICAgICAgbGV0IGFycmF5Um9vdCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50ID8gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEZvcm1JbnB1dF9DT05TVFMuYXJyYXlSb290QXR0cmlidXRlKSA6ICcnO1xyXG4gICAgICAgIGlmIChhcnJheVJvb3QgJiYgZmxhdHRlbikge1xyXG4gICAgICAgICAgICBhcnJheVJvb3QgPSBhcnJheVJvb3QucmVwbGFjZShBcnJheU1hbmFnZXJfQ09OU1QuaW5kZXhNYXRjaGVyLCAnLiQxJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnJheVJvb3Q7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE5hbWUoaXNOb3JtYWxpemVkOiBib29sZWFuLCBmbGF0dGVuOiBib29sZWFuID0gZmFsc2UpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IG5hbWUgPSAhaXNOb3JtYWxpemVkID8gdGhpcy5maWVsZE5hbWUgOiB0aGlzLm5vcm1hbGl6ZWRGaWVsZE5hbWU7XHJcbiAgICAgICAgcmV0dXJuIGZsYXR0ZW4gPyBuYW1lLnJlcGxhY2UoQXJyYXlNYW5hZ2VyX0NPTlNULmluZGV4TWF0Y2hlciwgJy4kMScpIDogbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNFbXB0eSh2YWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc1ZhbHVlRW1wdHkodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBfaXNWYWx1ZUVtcHR5KHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuICF2YWx1ZSB8fCB2YWx1ZSA9PT0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFsbG93RW1wdHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5pbnN0YW5jZUVsZW1lbnQgJiYgdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEZvcm1JbnB1dF9DT05TVFMuYWxsb3dFbXB0eSkpOyAvLyBoYXNBdHRyaWJ1dGUgaXMgbm90IHN1cHBvcnRlZCBpbiBJRTlcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0VHJ1bmNhdGVkVmFsdWUodmFsKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMuc3RyaW5nVXRpbHMudHJpbShTdHJpbmcodmFsKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHZhbGlkYXRlKGNhbGxiYWNrOiBJVmFsaWRhdGlvbkNhbGxiYWNrLCBmb3JtRGF0YSA9IHRoaXMuX2Zvcm0uZ2V0RmxhdEZvcm1EYXRhKGZhbHNlLCB0cnVlKSkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5IaWRkZW5Db250YWluZXIoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5PSyxcclxuICAgICAgICAgICAgICAgIGZpZWxkOiB0aGlzLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudmFsaWRhdGVWYWx1ZShmb3JtRGF0YSwgdGhpcy5nZXRWYWxpZGF0ZVZhbHVlKGZvcm1EYXRhKSwgY2FsbGJhY2spO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRWYWxpZGF0ZVZhbHVlKGZvcm1EYXRhOiBhbnkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGVhclNlcnZlckVycm9yKCkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLnNlcnZlclZhbGlkYXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRTZXJ2ZXJFcnJvcigpOiBHU0Vycm9ycyB7XHJcbiAgICAgICAgdmFyIGNvZGUgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybUlucHV0X0NPTlNUUy5zZXJ2ZXJWYWxpZGF0aW9uKTtcclxuICAgICAgICBpZiAoY29kZSkgcmV0dXJuIHBhcnNlSW50KGNvZGUpO1xyXG5cclxuICAgICAgICByZXR1cm4gR1NFcnJvcnMuT0s7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFNlcnZlckVycm9yKGVycm9yQ29kZTogR1NFcnJvcnMpIHtcclxuICAgICAgICB2YXIgdmFsaWRpdHlTdGF0ZSA9IGVycm9yQ29kZSA9PSBHU0Vycm9ycy5PSyA/IFZhbGlkaXR5U3RhdGVzLnZhbGlkIDogVmFsaWRpdHlTdGF0ZXMuZXJyb3I7XHJcblxyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnNldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLnNlcnZlclZhbGlkYXRpb24sIGVycm9yQ29kZSArICcnKTtcclxuICAgICAgICB0aGlzLnNldFZhbGlkaXR5U3RhdGUodmFsaWRpdHlTdGF0ZSwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHZhbGlkYXRlVmFsdWUoZm9ybURhdGE6IGFueSwgZmllbGRWYWx1ZTogYW55LCBjYWxsYmFjazogSVZhbGlkYXRpb25DYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBmaWVsZElzRW1wdHkgPSBmaWVsZFZhbHVlID09IG51bGwgfHwgdGhpcy5nZXRUcnVuY2F0ZWRWYWx1ZShmaWVsZFZhbHVlKSA9PT0gJyc7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnJlcXVpcmVkKCkgJiYgZmllbGRJc0VtcHR5KVxyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5SRVFVSVJFRF9WQUxVRV9WQUxJREFUSU9OX0VSUk9SLFxyXG4gICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBzY2hlbWEgdmFsaWRhdGlvblxyXG4gICAgICAgIGlmICh0aGlzLl9zY2hlbWEpIHtcclxuICAgICAgICAgICAgdmFyIHNjaGVtYUVycm9yID0gR1NFcnJvcnMuT0s7XHJcblxyXG4gICAgICAgICAgICBTb21lKHRoaXMuc2NoZW1hQ2hlY2tzLCBjaGVjayA9PiB7XHJcbiAgICAgICAgICAgICAgICBzY2hlbWFFcnJvciA9IGNoZWNrKGZpZWxkVmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBzY2hlbWFFcnJvciAhPSBHU0Vycm9ycy5PSztcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2NoZW1hRXJyb3IgIT09IEdTRXJyb3JzLk9LKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvckNvZGU6IHNjaGVtYUVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTZXJ2ZXIgdmFsaWRhdGlvblxyXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkge1xyXG4gICAgICAgICAgICB2YXIgc2VydmVyQ29kZSA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLnNlcnZlclZhbGlkYXRpb24pOyAvLyBoYXNBdHRyaWJ1dGUgaXMgbm90IHN1cHBvcnRlZCBpbiBJRTlcclxuICAgICAgICAgICAgaWYgKHNlcnZlckNvZGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHNlcnZlclZhbGlkYXRpb24gYWxyZWFkeSByZXR1cm5lZFxyXG4gICAgICAgICAgICAgICAgdmFyIHNlcnZlclZhbGlkYXRpb25FcnJvckNvZGUgPSB0aGlzLmdldFNlcnZlckVycm9yKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNlcnZlclZhbGlkYXRpb25FcnJvckNvZGUgIT0gR1NFcnJvcnMuT0spXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBzZXJ2ZXJWYWxpZGF0aW9uRXJyb3JDb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYXRlIHNlcnZlciB2YWxpZGF0aW9uXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXJ2ZXJWYWxpZGF0ZWQoKSkgcmV0dXJuIHRoaXMuc3RhcnRTZXJ2ZXJWYWxpZGF0aW9uKGZpZWxkVmFsdWUsIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHtcclxuICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5PSyxcclxuICAgICAgICAgICAgZmllbGQ6IHRoaXMsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlcnZlclZhbGlkYXRlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXJ0U2VydmVyVmFsaWRhdGlvbihmaWVsZFZhbHVlOiBhbnksIGNhbGxiYWNrOiBJVmFsaWRhdGlvbkNhbGxiYWNrKTogdm9pZCB7XHJcbiAgICAgICAgbm90SW1wbGVtZW50ZXJBYnN0cmFjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXF1aXJlZCgpOiBib29sZWFuIHtcclxuICAgICAgICAvLyBTY2hlbWEgcmVxdWlyZXMgdGhpcyBmaWVsZC5cclxuICAgICAgICBpZiAodGhpcy5fc2NoZW1hUmVxdWlyZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGb3JtIHJlcXVpcmVzIHRoaXMgZmllbGQuXHJcbiAgICAgICAgaWYgKCF0aGlzLmFsbG93RW1wdHkoKSAmJiB0aGlzLl9mb3JtLnJlcXVpcmVkRmllbGRzKClbdGhpcy5maWVsZE5hbWVdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRmllbGQgaXMgcmVxdWlyZWQgb24gdGhpcyBzY3JlZW4uXHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLnJlcXVpcmVkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gc2hvdyBlcnJvclxyXG5cclxuICAgIHB1YmxpYyBzaG93VmFsaWRDaGVja21hcmsoZWxlbWVudCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgQm9vbGVhbihlbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLnNob3dWYWxpZENoZWNrbWFyaykpICYmIC8vIGllOSBoYXMgbm8gaGFzQXR0cmlidXRlXHJcbiAgICAgICAgICAgICFnaWd5YS51dGlscy52YWxpZGF0aW9uLmlzRXhwbGljaXRGYWxzZShlbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLnNob3dWYWxpZENoZWNrbWFyaykpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHZhbGlkaXR5U3RhdGVMaXN0ZW5lcnMgPSBuZXcgQXJyYXk8SVZhbGlkaXR5U3RhdGVMaXN0ZW5lcj4oKTtcclxuXHJcbiAgICBwdWJsaWMgYWRkVmFsaWRpdHlTdGF0ZUxpc3RlbmVyKGxpc3RlbmVyOiBJVmFsaWRpdHlTdGF0ZUxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKGxpc3RlbmVyKSB0aGlzLnZhbGlkaXR5U3RhdGVMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZVZhbGlkaXR5U3RhdGVMaXN0ZW5lcihsaXN0ZW5lcjogSVZhbGlkaXR5U3RhdGVMaXN0ZW5lcikge1xyXG4gICAgICAgIGlmIChsaXN0ZW5lcikgdGhpcy52YWxpZGl0eVN0YXRlTGlzdGVuZXJzLnNwbGljZShnaWd5YS51dGlscy5hcnJheS5pbmRleE9mKHRoaXMudmFsaWRpdHlTdGF0ZUxpc3RlbmVycywgbGlzdGVuZXIpLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRyaWdnZXJWYWxpZGl0eVN0YXRlQ2hhbmdlKHZhbGlkaXR5U3RhdGU6IFZhbGlkaXR5U3RhdGVzLCBmcm9tU2VydmVyOiBib29sZWFuKSB7XHJcbiAgICAgICAgRm9yRWFjaCh0aGlzLnZhbGlkaXR5U3RhdGVMaXN0ZW5lcnMsIGxpc3RlbmVyID0+IGxpc3RlbmVyKHZhbGlkaXR5U3RhdGUsIGZyb21TZXJ2ZXIsIHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0VmFsaWRpdHlTdGF0ZSgpOiBWYWxpZGl0eVN0YXRlcyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbGlkaXR5U3RhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFZhbGlkaXR5U3RhdGUodmFsaWRpdHlTdGF0ZTogVmFsaWRpdHlTdGF0ZXMsIGZyb21TZXJ2ZXIgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICh2YWxpZGl0eVN0YXRlICE9PSB0aGlzLl92YWxpZGl0eVN0YXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbGlkaXR5U3RhdGUgPSB2YWxpZGl0eVN0YXRlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc2hvd1ZhbGlkaXR5T25JbnB1dCgpO1xyXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJWYWxpZGl0eVN0YXRlQ2hhbmdlKHRoaXMuX3ZhbGlkaXR5U3RhdGUsIGZyb21TZXJ2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgX3Nob3dWYWxpZGl0eU9uSW5wdXQoZWxlbWVudDogSFRNTEVsZW1lbnQgPSB0aGlzLmluc3RhbmNlRWxlbWVudCwgdmFsaWRpdHlTdGF0ZTogVmFsaWRpdHlTdGF0ZXMgPSB0aGlzLl92YWxpZGl0eVN0YXRlLCBhbGxvd1ZhbGlkaXR5TWFya2VyID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuc2V0VmFsaXRpZHlDbGFzcyhlbGVtZW50LCB2YWxpZGl0eVN0YXRlKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3Nob3dWYWxpZGl0eU1hcmtlclt2YWxpZGl0eVN0YXRlXSAmJiBhbGxvd1ZhbGlkaXR5TWFya2VyKVxyXG4gICAgICAgICAgICBnaWd5YS51dGlscy5ET00uYWRkQ2xhc3NUb0VsZW1lbnQoZWxlbWVudCwgRm9ybUlucHV0X0NPTlNUUy5zaG93Q2hlY2ttYXJrQ2xhc3MpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUNsYXNzRnJvbUVsZW1lbnQoZWxlbWVudCwgRm9ybUlucHV0X0NPTlNUUy5zaG93Q2hlY2ttYXJrQ2xhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRWYWxpdGlkeUNsYXNzKFxyXG4gICAgICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxyXG4gICAgICAgIHZhbGlkaXR5U3RhdGU6IFZhbGlkaXR5U3RhdGVzLFxyXG4gICAgICAgIHZhbGlkQ2xhc3MgPSBGb3JtSW5wdXRfQ09OU1RTLnZhbGlkQ2xhc3MsXHJcbiAgICAgICAgZXJyb3JDbGFzcyA9IEZvcm1JbnB1dF9DT05TVFMuZXJyb3JDbGFzcyxcclxuICAgICAgICBwZW5kaW5nQ2xhc3MgPSBGb3JtSW5wdXRfQ09OU1RTLnBlbmRpbmdDbGFzcyxcclxuICAgICkge1xyXG4gICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuO1xyXG5cclxuICAgICAgICB2YXIgY3VycmVudENsYXNzOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIHN3aXRjaCAodmFsaWRpdHlTdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFZhbGlkaXR5U3RhdGVzLnZhbGlkOlxyXG4gICAgICAgICAgICAgICAgY3VycmVudENsYXNzID0gdmFsaWRDbGFzcztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFZhbGlkaXR5U3RhdGVzLmVycm9yOlxyXG4gICAgICAgICAgICAgICAgY3VycmVudENsYXNzID0gZXJyb3JDbGFzcztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFZhbGlkaXR5U3RhdGVzLnBlbmRpbmc6XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2xhc3MgPSBwZW5kaW5nQ2xhc3M7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0RWxlbWVudFZhbGlkYXRpb25DbGFzcyhlbGVtZW50LCBjdXJyZW50Q2xhc3MsIHZhbGlkQ2xhc3MsIGVycm9yQ2xhc3MsIHBlbmRpbmdDbGFzcyk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBsYWNlSG9sZGVyRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldEVsZW1lbnRWYWxpZGF0aW9uQ2xhc3ModGhpcy5wbGFjZUhvbGRlckVsZW1lbnQsIGN1cnJlbnRDbGFzcywgdmFsaWRDbGFzcywgZXJyb3JDbGFzcywgcGVuZGluZ0NsYXNzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRFbGVtZW50VmFsaWRhdGlvbkNsYXNzKFxyXG4gICAgICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxyXG4gICAgICAgIHZhbGlkYXRpb25DbGFzczogc3RyaW5nLFxyXG4gICAgICAgIHZhbGlkQ2xhc3MgPSBGb3JtSW5wdXRfQ09OU1RTLnZhbGlkQ2xhc3MsXHJcbiAgICAgICAgZXJyb3JDbGFzcyA9IEZvcm1JbnB1dF9DT05TVFMuZXJyb3JDbGFzcyxcclxuICAgICAgICBwZW5kaW5nQ2xhc3MgPSBGb3JtSW5wdXRfQ09OU1RTLnBlbmRpbmdDbGFzcyxcclxuICAgICkge1xyXG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVDbGFzc0Zyb21FbGVtZW50KGVsZW1lbnQsIHZhbGlkQ2xhc3MpO1xyXG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVDbGFzc0Zyb21FbGVtZW50KGVsZW1lbnQsIGVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVDbGFzc0Zyb21FbGVtZW50KGVsZW1lbnQsIHBlbmRpbmdDbGFzcyk7XHJcblxyXG4gICAgICAgIGlmICh2YWxpZGF0aW9uQ2xhc3MpIHtcclxuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZENsYXNzVG9FbGVtZW50KGVsZW1lbnQsIHZhbGlkYXRpb25DbGFzcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodmFsaWRhdGlvbkNsYXNzID09PSBlcnJvckNsYXNzKSB7XHJcbiAgICAgICAgICAgIC8vIFZhbGlkYXRpb24gZmFpbGVkLlxyXG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJywgJ3RydWUnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBObyBlcnJvcnMgZGV0ZWN0ZWQuXHJcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAnZmFsc2UnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHVibGljIHVubGlua1RlbXBsYXRlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNoYW5nZUhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLmNoYW5nZUhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5rZXlVcEhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5rZXlVcEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdXBlci51bmxpbmtUZW1wbGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEZvcm1FbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xyXG5cclxuICAgICAgICB0aGlzLl9zY2hlbWFXcml0ZUFjY2Vzc01vZGUgPSBXcml0ZUFjY2Vzc01vZGVzLmNsaWVudE1vZGlmeTtcclxuICAgICAgICB0aGlzLl9zY2hlbWFSZXF1aXJlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2Zvcm0uc2NoZW1hVmFsaWRhdGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NjaGVtYSA9IHRoaXMuX2Zvcm0uZ2V0RmllbGRTY2hlbWEodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NjaGVtYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NoZW1hQ2hlY2tzID0gbmV3IEFycmF5PFNjaGVtYUNoZWNrPigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2NoZW1hLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGVDaGVjayA9IFNjaGVtYVR5cGVDaGVja3NbdGhpcy5fc2NoZW1hLnR5cGVdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVDaGVjaykgdGhpcy5zY2hlbWFDaGVja3MucHVzaCh0eXBlQ2hlY2spO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3VycmVudGx5IHdlIHN1cHBvcnQgb25seSByZWdleCBmb3JtYXQgY2hlY2tzIC0gd2lsbCBjaGFuZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NjaGVtYS5mb3JtYXQgJiYgdGhpcy5fc2NoZW1hLmZvcm1hdC5tYXRjaChmb3JtYXRQYXR0ZXJuKSkgdGhpcy5zY2hlbWFDaGVja3MucHVzaChzY2hlbWFGb3JtYXRDaGVjayh0aGlzLl9zY2hlbWEuZm9ybWF0KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjaGVtYVJlcXVpcmVkID0gdGhpcy5fc2NoZW1hLnJlcXVpcmVkIHx8IFNvbWUodGhpcy5zY2hlbWFDaGVja3MsIGNoZWNrID0+IGNoZWNrKCcnKSAhPSBHU0Vycm9ycy5PSyk7IC8vIHNjaGVtYSBkZWZpbmUgdGhpcyBmaWVsZCBhcyByZXF1aXJlZCAvLyBzY2hlbWEgY2hlY2tzIGRvIG5vdCBwYXNzIGlmIHRoZXJlIGlzIG5vIHZhbHVlXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjaGVtYVdyaXRlQWNjZXNzTW9kZSA9IFdyaXRlQWNjZXNzTW9kZXNbdGhpcy5fc2NoZW1hLndyaXRlQWNjZXNzXSB8fCBXcml0ZUFjY2Vzc01vZGVzLmNsaWVudE1vZGlmeTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNldFBsYWNlaG9sZGVyVmFsdWUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0QXJpYVJlcXVpcmVkKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgaW5wdXQncyBkZWZhdWx0IHZhbHVlIGFzIHByZXZpb3VzIHZhbHVlLlxyXG4gICAgICAgICAgICAvLyBwcmVQb3B1bGF0ZSB3aWxsIG92ZXJyaWRlIHRoaXMgaWYgYSB2YWx1ZSBleGlzdHMuXHJcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIGZvciBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IG5hdGl2ZSBwbGFjZWhvbGRlcnMuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY3JlYXRlUGxhY2Vob2xkZXJFbGVtZW50KGVsTmFtZTogc3RyaW5nLCBlbFR5cGU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGlmIChlbE5hbWUgPT09ICdpbnB1dCcgJiYgZWxUeXBlICE9PSAnY2hlY2tib3gnICYmIGVsVHlwZSAhPT0gJ3JhZGlvJykge1xyXG4gICAgICAgICAgICB0aGlzLnBsYWNlSG9sZGVyRWxlbWVudCA9IGdpZ3lhLnV0aWxzLkRPTS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsICcnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZWxOYW1lID09PSAndGV4dGFyZWEnKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxhY2VIb2xkZXJFbGVtZW50ID0gZ2lneWEudXRpbHMuRE9NLmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJywgJycpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChnaWd5YS5sb2NhbEluZm8uaXNJRTgpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGFjZUhvbGRlckVsZW1lbnQuc3R5bGUud2lkdGggPSB0aGlzLmluc3RhbmNlRWxlbWVudFsnY3VycmVudFN0eWxlJ10ud2lkdGg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wbGFjZUhvbGRlckVsZW1lbnQuc3R5bGUud2lkdGggPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmluc3RhbmNlRWxlbWVudCkud2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbE5hbWUgPT09ICdpbnB1dCcgfHwgZWxOYW1lID09PSAndGV4dGFyZWEnKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxhY2VIb2xkZXJFbGVtZW50WydzY3JlZW5TZXRJbnN0YW5jZU9mJ10gPSBbdGhpc107XHJcbiAgICAgICAgICAgIHRoaXMucGxhY2VIb2xkZXJFbGVtZW50LnNldEF0dHJpYnV0ZSgndmFsdWUnLCB0aGlzLnBsYWNlaG9sZGVyQXR0cmlidXRlVmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYWNlSG9sZGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgZ2lneWEuXy5wbHVnaW5zLnV0aWxzLkRPTS5nZXRBdHRyaWJ1dGUodGhpcy5pbnN0YW5jZUVsZW1lbnQsICdzdHlsZScpKTtcclxuICAgICAgICAgICAgdGhpcy5wbGFjZUhvbGRlckVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsIGdpZ3lhLl8ucGx1Z2lucy51dGlscy5ET00uZ2V0QXR0cmlidXRlKHRoaXMuaW5zdGFuY2VFbGVtZW50LCAnY2xhc3MnKSArICcgZ2lneWEtcGxhY2Vob2xkZXInKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5wbGFjZUhvbGRlckVsZW1lbnQsIHRoaXMuaW5zdGFuY2VFbGVtZW50KTtcclxuICAgICAgICAgICAgLy8gdGhlIGZvbGxvd2luZyBsaW5lIGlzIGZvciB2ZXJ0aWNhbGx5IGFsaWduaW5nIHRoZSB0ZXh0IGluc2lkZSB0aGUgZWxlbWVudFxyXG4gICAgICAgICAgICBnaWd5YS5wbHVnaW5VdGlscy5ET00uaGlkZUVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXR0YWNoIGV2ZW50cy5cclxuICAgICAgICBpZiAoZWxOYW1lID09PSAndGV4dGFyZWEnIHx8IChlbE5hbWUgPT09ICdpbnB1dCcgJiYgZWxUeXBlICE9PSAnY2hlY2tib3gnICYmIGVsVHlwZSAhPT0gJ3JhZGlvJykpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGFjZUhvbGRlckVsZW1lbnRbJ2F0dGFjaEV2ZW50J10oJ29ua2V5ZG93bicsIHRoaXMub25QbGFjZWhvbGRlcktleURvd24pO1xyXG4gICAgICAgICAgICAvL3RoaXMucGxhY2VIb2xkZXJFbGVtZW50LmF0dGFjaEV2ZW50KCdvbnNlbGVjdHN0YXJ0JywgdGhpcy5vblRleHRTZWxlY3Rpb25TdGFydCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlEb3duRm9yUGxhY2Vob2xkZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLm9uQmx1ckZvclBsYWNlaG9sZGVyKTtcclxuICAgICAgICAgICAgdGhpcy5wbGFjZUhvbGRlckVsZW1lbnRbJ2F0dGFjaEV2ZW50J10oJ29uY29udGV4dG1lbnUnLCB0aGlzLm9uQ29udGV4dE1lbnVPcGVuZWQpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYWNlSG9sZGVyRWxlbWVudFsnYXR0YWNoRXZlbnQnXSgnb25mb2N1cycsIHRoaXMub25QbGFjZWhvbGRlckZvY3VzZWQpO1xyXG4gICAgICAgICAgICAvL3RoaXMuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0JywgdGhpcy5vblRleHRTZWxlY3RlZCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLm9uS2V5VXBGb3JQbGFjZWhvbGRlcik7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxhY2Vob2xkZXJTdGF0ZVZpZXcodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBXQ0FHOiBIaWRlIHBsYWNlaG9sZGVyIGlucHV0IGZyb20gc2NyZWVuIHJlYWRlcnMuXHJcbiAgICAgICAgdGhpcy5wbGFjZUhvbGRlckVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2NoZW1hUmVxdWlyZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zY2hlbWFDaGVja3MgPSB0aGlzLl9zY2hlbWEgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZSgnJyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsaWRpdHlTdGF0ZShWYWxpZGl0eVN0YXRlcy5fdW5kZWZpbmVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN1cGVyLnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRWYWx1ZShlbCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnQsIGN1cnJlbnRWYWx1ZT86IGFueSk6IHN0cmluZyB8IHN0cmluZ1tdIHwgYm9vbGVhbiB8IG51bGwge1xyXG4gICAgICAgIGlmIChlbC52YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gJyc7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09ICdwYXNzd29yZCcgPyBlbC52YWx1ZSA6IGdpZ3lhLnV0aWxzLnN0cmluZ1V0aWxzLnRyaW0oZWwudmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwcmVQb3B1bGF0ZSh2YWx1ZTogc3RyaW5nIHwgYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAvLyBIaWRkZW4gZmllbGRzIGFyZSBub3QgcHJlLXBvcHVsYXRlZCBiZWNhdXNlIGl0IG1heSBvdmVyd3JpdGUgYSBzdGF0aWMgdmFsdWUuXHJcbiAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gJ2hpZGRlbicpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fc2NoZW1hV3JpdGVBY2Nlc3NNb2RlID09PSBXcml0ZUFjY2Vzc01vZGVzLmNsaWVudENyZWF0ZSAmJiAhdGhpcy5pc0VtcHR5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkaXNhYmxlZCgpIHtcclxuICAgICAgICByZXR1cm4gQm9vbGVhbih0aGlzLmluc3RhbmNlRWxlbWVudCAmJiB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRWYWx1ZShkYXRhVmFsdWU6IHN0cmluZyB8IGJvb2xlYW4sIHNldEJ5U2NyaXB0OiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xyXG4gICAgICAgIC8vIFNldCBuZXcgdmFsdWUgZGlyZWN0bHkgb24gdGhlIERPTS5cclxuICAgICAgICBjb25zdCBlbCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGlmIChlbC52YWx1ZSAhPT0gZGF0YVZhbHVlKSB7XHJcbiAgICAgICAgICAgIGVsLnZhbHVlID0gU3RyaW5nKGRhdGFWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBUcmlnZ2VyIGNoYW5nZS5cclxuICAgICAgICB0aGlzLm9uRmllbGRDaGFuZ2Uoc2V0QnlTY3JpcHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0hpZGRlbigpIHtcclxuICAgICAgICByZXR1cm4gaXNIaWRkZW4odGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0luSGlkZGVuQ29udGFpbmVyKCkge1xyXG4gICAgICAgIHJldHVybiBpc0ZpZWxkSW5IaWRkZW5Db250YWluZXIodGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZURpc3BsYXlOYW1lKHRoaXMuaW5zdGFuY2VFbGVtZW50IHx8IHRoaXMudGVtcGxhdGVFbGVtZW50KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd1ZhbGlkQ2hlY2ttYXJrKHRoaXMudGVtcGxhdGVFbGVtZW50KSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93VmFsaWRpdHlNYXJrZXJbVmFsaWRpdHlTdGF0ZXMudmFsaWRdID0gdGhpcy5fc2hvd1ZhbGlkaXR5TWFya2VyW1ZhbGlkaXR5U3RhdGVzLnBlbmRpbmddID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd1ZhbGlkaXR5T25JbnB1dCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXhlY3V0ZUNvbmRpdGlvbmFsUmVzdWx0KGV2YWx1YXRpb25SZXN1bHQ6IHN0cmluZywgY29uZGl0aW9uYWxBdHQ6IElDb25kaXRpb25hbEF0dHJpYnV0ZSwgZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAvLyBHcmFiIHRoZSBsYXN0IGF0dHJpYnV0ZSB2YWx1ZSBiZWZvcmUgaXQncyBzZXQgdG8gdGhlIG5ldyB2YWx1ZS5cclxuICAgICAgICBjb25zdCBsYXN0QXR0cmlidXRlVmFsdWUgPSBjb25kaXRpb25hbEF0dC5sYXN0QXR0cmlidXRlVmFsdWU7XHJcblxyXG4gICAgICAgIC8vIFNldCBuZXcgYXR0cmlidXRlcyBpbiB0aGUgRE9NLlxyXG4gICAgICAgIGV2YWx1YXRpb25SZXN1bHQgPSBzdXBlci5leGVjdXRlQ29uZGl0aW9uYWxSZXN1bHQoZXZhbHVhdGlvblJlc3VsdCwgY29uZGl0aW9uYWxBdHQsIGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAvLyBPbmx5IGludGVyZXN0ZWQgaW4gY2hhbmdlcy5cclxuICAgICAgICBpZiAoZXZhbHVhdGlvblJlc3VsdCA9PT0gbGFzdEF0dHJpYnV0ZVZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsYXN0QXR0cmlidXRlVmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29uZGl0aW9uYWxBdHQuYXR0cmlidXRlTmFtZSA9PT0gRm9ybUlucHV0X0NPTlNUUy5yZXF1aXJlZCkge1xyXG4gICAgICAgICAgICAvLyBUaGUgZmllbGQgbWF5IGhhdmUgYmVlbiBtYXJrZWQgYXMgcmVxdWlyZWQgaW4gdGhlIFVJIGFuZCB0cmlnZ2VyZWQgYW4gZXJyb3IuXHJcbiAgICAgICAgICAgIC8vIFRyaWdnZXJpbmcgdGhlIGZpZWxkIGNoYW5nZSBldmVudCB3aWxsIGNsZWFyIHRoZSBlcnJvciBpZiBpdCB3YXMgY2F1c2VkIGJ5IHRoZSByZXF1aXJlZCBzdGF0dXMuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdldFZhbGlkaXR5U3RhdGUoKSA9PT0gVmFsaWRpdHlTdGF0ZXMuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25GaWVsZENoYW5nZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBUaGUgcGxhY2Vob2xkZXIgdmFsdWUgbmVlZHMgdGhlIGFzdGVyaXNrIGFwcGVuZGVkIHRvIGl0LlxyXG4gICAgICAgICAgICB0aGlzLnNldFBsYWNlaG9sZGVyVmFsdWUoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFdDQUcgY29tcGxpYW5jZS5cclxuICAgICAgICAgICAgdGhpcy5zZXRBcmlhUmVxdWlyZWQoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvbmRpdGlvbmFsQXR0LmF0dHJpYnV0ZU5hbWUgPT09IEZvcm1JbnB1dF9DT05TVFMucGxhY2Vob2xkZXJBdHRyaWJ1dGUpIHtcclxuICAgICAgICAgICAgLy8gUGxhY2Vob2xkZXIgdmFsdWUgdXBkYXRlZCB2aWEgY29uZGl0aW9uYWwgYXR0cmlidXRlLlxyXG4gICAgICAgICAgICB0aGlzLnNldFBsYWNlaG9sZGVyVmFsdWUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBldmFsdWF0aW9uUmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRBcmlhUmVxdWlyZWQoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gIzY5NTMzXHJcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ3N1Ym1pdCcgfHwgdGhpcy50eXBlID09PSAnYnV0dG9uJykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtcmVxdWlyZWQnLCB0aGlzLnJlcXVpcmVkKCkgPyAndHJ1ZScgOiAnZmFsc2UnKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UGxhY2Vob2xkZXJWYWx1ZSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBwbGFjZWhvbGRlclRleHQgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybUlucHV0X0NPTlNUUy5wbGFjZWhvbGRlckF0dHJpYnV0ZSk7XHJcbiAgICAgICAgaWYgKHBsYWNlaG9sZGVyVGV4dCkge1xyXG4gICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyQXR0cmlidXRlVmFsdWUgPSBwbGFjZWhvbGRlclRleHQgPyBgJHtwbGFjZWhvbGRlclRleHR9JHt0aGlzLnJlcXVpcmVkKCkgPyAnIConIDogJyd9YCA6ICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGxhY2Vob2xkZXJBdHRyaWJ1dGVWYWx1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50TmFtZSA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudFR5cGUgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKTtcclxuICAgICAgICAgICAgaWYgKGdpZ3lhLmxvY2FsSW5mby5pc0lFOCB8fCBnaWd5YS5sb2NhbEluZm8uaXNJRTkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wbGFjZUhvbGRlckVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVBsYWNlaG9sZGVyRWxlbWVudChlbGVtZW50TmFtZSwgZWxlbWVudFR5cGUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBnaWd5YS5fLnBsdWdpbnMudXRpbHMuRE9NLnNldEF0dHJpYnV0ZSh0aGlzLnBsYWNlSG9sZGVyRWxlbWVudCwgJ3ZhbHVlJywgdGhpcy5wbGFjZWhvbGRlckF0dHJpYnV0ZVZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICgoZWxlbWVudE5hbWUgPT09ICdpbnB1dCcgJiYgZWxlbWVudFR5cGUgIT09ICdjaGVja2JveCcgJiYgZWxlbWVudFR5cGUgIT09ICdyYWRpbycpIHx8IGVsZW1lbnROYW1lID09PSAndGV4dGFyZWEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsIHRoaXMucGxhY2Vob2xkZXJBdHRyaWJ1dGVWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uS2V5VXBGb3JQbGFjZWhvbGRlcihlOiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gZS5zcmNFbGVtZW50WydzY3JlZW5TZXRJbnN0YW5jZU9mJ11bMF0gYXMgRm9ybUlucHV0O1xyXG4gICAgICAgIGlmIChpbnB1dC5pc0N0cmxLZXlVcCkge1xyXG4gICAgICAgICAgICB2YXIga2V5Y29kZSA9IGUua2V5Q29kZTtcclxuICAgICAgICAgICAgaWYgKGtleWNvZGUgPT09IHRoaXMuS0VZQ09ERV9MRVRURVJfWCkge1xyXG4gICAgICAgICAgICAgICAgLy8geCBjaGFyYWN0ZXIsIGJhY2tzcGFjZSBvciBkZWxldGVcclxuICAgICAgICAgICAgICAgIGlucHV0LnRvZ2dsZVBsYWNlaG9sZGVyU3RhdGVWaWV3KHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbkJsdXJGb3JQbGFjZWhvbGRlcihldmVudDogS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgICAgIGNvbnN0IGVsID0gZXZlbnQuc3JjRWxlbWVudDtcclxuICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBlbFsndmFsdWUnXTtcclxuICAgICAgICBjb25zdCBpbnB1dCA9IGV2ZW50LnNyY0VsZW1lbnRbJ3NjcmVlblNldEluc3RhbmNlT2YnXVswXSBhcyBGb3JtSW5wdXQ7XHJcbiAgICAgICAgaWYgKCFjdXJyZW50VmFsdWUpIHtcclxuICAgICAgICAgICAgaW5wdXQudG9nZ2xlUGxhY2Vob2xkZXJTdGF0ZVZpZXcodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHRoaXMgaGFuZGxlciBpcyBmb3Igc3VwcHJlc3NpbmcgdGhlIHRleHQgc2VsZWN0aW9uIG9uIHRoZSBwbGFjZWhvbGRlclxyXG4gICAgLy9wdWJsaWMgb25UZXh0U2VsZWN0aW9uU3RhcnQoZSlcclxuICAgIC8ve1xyXG4gICAgLy8gICAgdmFyIGlucHV0ID0gZS5zcmNFbGVtZW50WydzY3JlZW5TZXRJbnN0YW5jZU9mJ11bMF0gYXMgRm9ybUlucHV0O1xyXG4gICAgLy8gICAgaWYgKGlucHV0LmlzQ3Vycm5ldFZhbHVlUGxhY2Vob2xkZXJUZXh0KSB7XHJcbiAgICAvLyAgICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcclxuICAgIC8vICAgIH1cclxuICAgIC8vfVxyXG4gICAgcHVibGljIG9uQ29udGV4dE1lbnVPcGVuZWQoZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uUGxhY2Vob2xkZXJGb2N1c2VkKGU6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gZS5zcmNFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IGlucHV0ID0gZWxlbWVudFsnc2NyZWVuU2V0SW5zdGFuY2VPZiddWzBdIGFzIEZvcm1JbnB1dDtcclxuICAgICAgICBpbnB1dC50b2dnbGVQbGFjZWhvbGRlclN0YXRlVmlldyhmYWxzZSwgZSk7XHJcbiAgICAgICAgZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgICAgICBpZiAoaW5wdXQuX3NjcmVlblNldC5fcGxhY2Vob2xkZXJJbnRlcnZhbElEID09PSAtMSkge1xyXG4gICAgICAgICAgICBpbnB1dC50b2dnbGVQbGFjZWhvbGRlclN0YXRlVmlldyhmYWxzZSwgZSk7XHJcbiAgICAgICAgICAgIGlucHV0Ll9zY3JlZW5TZXQuX3BsYWNlaG9sZGVySW50ZXJ2YWxJRCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5fc2NyZWVuU2V0Ll9wbGFjZWhvbGRlckludGVydmFsSUQgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQudG9nZ2xlUGxhY2Vob2xkZXJTdGF0ZVZpZXcoZmFsc2UsIGUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGlucHV0Ll9zY3JlZW5TZXQuX3BsYWNlaG9sZGVySW50ZXJ2YWxJRCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDEwMCkgYXMgYW55O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvL3RoaXMgaGFuZGxlciBpcyBmb3IgY2FzZXMgd2hlcmUgdGhlIHVzZXIgc2VsZWN0cyB0aGUgdGV4dCBpbnNpZGUgdGhlIGVsZW1lbnQgKGluIG9yZGVyIHRvIGRlbGV0ZSBwYXJ0IG9mIGl0KVxyXG4gICAgLy9wdWJsaWMgb25UZXh0U2VsZWN0ZWQoKSB7XHJcbiAgICAvLyAgICB2YXIgZWwgPSBldmVudC5zcmNFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xyXG4gICAgLy8gICAgdmFyIGlucHV0ID0gZXZlbnQuc3JjRWxlbWVudFsnc2NyZWVuU2V0SW5zdGFuY2VPZiddWzBdIGFzIEZvcm1JbnB1dDtcclxuICAgIC8vICAgIGlucHV0LmlzVGV4dFNlbGVjdGVkID0gdHJ1ZTtcclxuICAgIC8vfVxyXG5cclxuICAgIHB1YmxpYyBvblBsYWNlaG9sZGVyS2V5RG93bihlOiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGtleWNvZGUgPSBlLmtleUNvZGU7XHJcbiAgICAgICAgdmFyIGlzRW50ZXJlZFZhbHVlRGlzcGxheWFibGU6IGJvb2xlYW4gPSBpc0tleUNvZGVEaXNwbGF5YWJsZShrZXljb2RlKTtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGUuc3JjRWxlbWVudCBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50WydzY3JlZW5TZXRJbnN0YW5jZU9mJ11bMF0gYXMgRm9ybUlucHV0O1xyXG4gICAgICAgIGlmIChpc0VudGVyZWRWYWx1ZURpc3BsYXlhYmxlKSB7XHJcbiAgICAgICAgICAgIC8vIGhpZGUgdGhlIHBsYWNlaG9sZGVyIGVsZW1lbnQgYW5kIHNob3cgdGhlIGFjdHVhbCBlbGVtZW50XHJcbiAgICAgICAgICAgIGlucHV0LnRvZ2dsZVBsYWNlaG9sZGVyU3RhdGVWaWV3KGZhbHNlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGtleWNvZGUgPT09IGlucHV0LktFWV9DT0RFX0JBQ0tTUEFDRSB8fCBrZXljb2RlID09PSBpbnB1dC5LRVlfQ09ERV9ERUxFVEUpIHtcclxuICAgICAgICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uS2V5RG93bkZvclBsYWNlaG9sZGVyKGU6IEtleWJvYXJkRXZlbnQpIHtcclxuICAgICAgICB2YXIga2V5Y29kZTogbnVtYmVyID0gZS5rZXlDb2RlO1xyXG4gICAgICAgIHZhciBpc0VudGVyZWRWYWx1ZURpc3BsYXlhYmxlOiBib29sZWFuID0gaXNLZXlDb2RlRGlzcGxheWFibGUoa2V5Y29kZSk7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gZS5zcmNFbGVtZW50WydzY3JlZW5TZXRJbnN0YW5jZU9mJ11bMF0gYXMgRm9ybUlucHV0O1xyXG4gICAgICAgIHZhciBsYXN0VmFsdWUgPSBpbnB1dC5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpO1xyXG5cclxuICAgICAgICBpZiAoIWlzRW50ZXJlZFZhbHVlRGlzcGxheWFibGUgJiYgaW5wdXQuaXNDdXJybmV0VmFsdWVQbGFjZWhvbGRlclRleHQgJiYga2V5Y29kZSA9PSBpbnB1dC5LRVlfQ09ERV9CQUNLU1BBQ0UpIHtcclxuICAgICAgICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGxhc3RWYWx1ZSAmJiBsYXN0VmFsdWUubGVuZ3RoID09IDEgJiYga2V5Y29kZSA9PSBpbnB1dC5LRVlfQ09ERV9CQUNLU1BBQ0UpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBlLnNyY0VsZW1lbnQuc2V0QXR0cmlidXRlKCd2YWx1ZScsICcnKTtcclxuICAgICAgICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlucHV0LmlzVGV4dFNlbGVjdGVkICYmIChrZXljb2RlID09IGlucHV0LktFWV9DT0RFX0RFTEVURSB8fCBrZXljb2RlID09IGlucHV0LktFWV9DT0RFX0JBQ0tTUEFDRSkpIHtcclxuICAgICAgICAgICAgaW5wdXQuaXNUZXh0U2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgaW5wdXQudG9nZ2xlUGxhY2Vob2xkZXJTdGF0ZVZpZXcodHJ1ZSwgZXZlbnQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5jdHJsS2V5KSB7XHJcbiAgICAgICAgICAgIGlucHV0LmlzQ3RybEtleVVwID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlzRW50ZXJlZFZhbHVlRGlzcGxheWFibGUgJiYgaW5wdXQuaXNDdXJybmV0VmFsdWVQbGFjZWhvbGRlclRleHQpIHtcclxuICAgICAgICAgICAgaW5wdXQudG9nZ2xlUGxhY2Vob2xkZXJTdGF0ZVZpZXcoZmFsc2UpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQuaXNDdXJybmV0VmFsdWVQbGFjZWhvbGRlclRleHQgJiYga2V5Y29kZSA9PSBpbnB1dC5LRVlfQ09ERV9ERUxFVEUpIHtcclxuICAgICAgICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0b2dnbGVQbGFjZWhvbGRlclN0YXRlVmlldyhzaG93UGxhY2Vob2xkZXI6IGJvb2xlYW4sIGU6IGFueSA9IG51bGwpIHtcclxuICAgICAgICAvLyBlOiBNU0V2ZW50T2JqXHJcbiAgICAgICAgaWYgKHNob3dQbGFjZWhvbGRlcikge1xyXG4gICAgICAgICAgICBpZiAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy90aGlzIGlzIHRvIGhhbmRsZSB0aGUgc2VsZWN0IGV2ZW50IHdoZXJlIHRoZSB0ZXh0IGlzIGVyYXNlZCBhbmQgdGhlIHBsYWNlaG9sZGVyIHZhbHVlIGlzbid0IHNldFxyXG4gICAgICAgICAgICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdpZ3lhLnBsdWdpblV0aWxzLkRPTS5zaG93RWxlbWVudCh0aGlzLnBsYWNlSG9sZGVyRWxlbWVudCk7XHJcbiAgICAgICAgICAgIGdpZ3lhLnBsdWdpblV0aWxzLkRPTS5oaWRlRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIGdpZ3lhLl8ucGx1Z2lucy51dGlscy5ET00uc2V0QXR0cmlidXRlKHRoaXMuaW5zdGFuY2VFbGVtZW50LCAndmFsdWUnLCAnJyk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5wbGFjZUhvbGRlckVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxhY2VIb2xkZXJFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGdpZ3lhLnBsdWdpblV0aWxzLkRPTS5oaWRlRWxlbWVudCh0aGlzLnBsYWNlSG9sZGVyRWxlbWVudCk7XHJcbiAgICAgICAgICAgIGdpZ3lhLnBsdWdpblV0aWxzLkRPTS5zaG93RWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIGdpZ3lhLl8ucGx1Z2lucy51dGlscy5ET00uc2V0QXR0cmlidXRlKHRoaXMucGxhY2VIb2xkZXJFbGVtZW50LCAndmFsdWUnLCB0aGlzLnBsYWNlaG9sZGVyQXR0cmlidXRlVmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlzQ3Vycm5ldFZhbHVlUGxhY2Vob2xkZXJUZXh0ID0gc2hvd1BsYWNlaG9sZGVyO1xyXG4gICAgICAgIHRoaXMuaXNDdHJsS2V5VXAgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzVGV4dFNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldExvZ2dlck5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGROYW1lIHx8IHN1cGVyLmdldExvZ2dlck5hbWUoKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpbnRlZ2VyQ2hlY2soZmllbGRWYWx1ZSkge1xyXG4gICAgaWYgKGZpZWxkVmFsdWUgJiYgaXNOYU4ocGFyc2VJbnQoZmllbGRWYWx1ZSkpKSByZXR1cm4gR1NFcnJvcnMuVkFMSURBVElPTl9FUlJPUjtcclxuXHJcbiAgICByZXR1cm4gR1NFcnJvcnMuT0s7XHJcbn1cclxuZnVuY3Rpb24gZmxvYXRDaGVjayhmaWVsZFZhbHVlKSB7XHJcbiAgICBpZiAoZmllbGRWYWx1ZSAmJiBpc05hTihwYXJzZUZsb2F0KGZpZWxkVmFsdWUpKSkgcmV0dXJuIEdTRXJyb3JzLlZBTElEQVRJT05fRVJST1I7XHJcblxyXG4gICAgcmV0dXJuIEdTRXJyb3JzLk9LO1xyXG59XHJcbmZ1bmN0aW9uIGJvb2xlYW5DaGVjayhmaWVsZFZhbHVlKSB7XHJcbiAgICBpZiAoZmllbGRWYWx1ZSA9PSBudWxsKSByZXR1cm4gR1NFcnJvcnMuVkFMSURBVElPTl9FUlJPUjtcclxuXHJcbiAgICByZXR1cm4gR1NFcnJvcnMuT0s7XHJcbn1cclxuZnVuY3Rpb24gZGF0ZUNoZWNrKGZpZWxkVmFsdWUpIHtcclxuICAgIGlmIChmaWVsZFZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGRhdGVSZXN1bHQgPSBnaWd5YS5nbG9iYWwuZGF0ZS5nZXRJU09EYXRlKGZpZWxkVmFsdWUpOyAvLyBGb3JtYXQgaXMgYWx3YXlzIElTT1xyXG5cclxuICAgICAgICBpZiAoIWRhdGVSZXN1bHQpIHJldHVybiBHU0Vycm9ycy5WQUxJREFUSU9OX0VSUk9SO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBHU0Vycm9ycy5PSztcclxufVxyXG52YXIgU2NoZW1hVHlwZUNoZWNrczogSU1hcDxTY2hlbWFDaGVjaz4gPSB7XHJcbiAgICBpbnRlZ2VyOiBpbnRlZ2VyQ2hlY2ssXHJcbiAgICBsb25nOiBpbnRlZ2VyQ2hlY2ssXHJcbiAgICBmbG9hdDogZmxvYXRDaGVjayxcclxuICAgIGJvb2xlYW46IGJvb2xlYW5DaGVjayxcclxuICAgIGRhdGU6IGRhdGVDaGVjayxcclxufTtcclxuRGVlcEZyZWV6ZShTY2hlbWFUeXBlQ2hlY2tzKTtcclxudmFyIGZvcm1hdFBhdHRlcm4gPSAvKC4qPylcXChbXFwnXFxcIl0oLio/KVtcXCdcXFwiXVxcKSQvO1xyXG5mdW5jdGlvbiBzY2hlbWFGb3JtYXRDaGVjayhmb3JtYXQ6IHN0cmluZyk6IFNjaGVtYUNoZWNrIHtcclxuICAgIHZhciBhckZvcm1hdCA9IGZvcm1hdC5tYXRjaChmb3JtYXRQYXR0ZXJuKTtcclxuICAgIGlmIChhckZvcm1hdCkge1xyXG4gICAgICAgIHZhciBmb3JtYXRUeXBlID0gYXJGb3JtYXRbMV07XHJcbiAgICAgICAgdmFyIGZvcm1hdFZhbHVlID0gYXJGb3JtYXRbMl07XHJcbiAgICAgICAgaWYgKGZvcm1hdFR5cGUgJiYgZm9ybWF0VmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKGZvcm1hdFR5cGUgPT09ICdyZWdleCcpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnZXhGb3JtYXQgPSBuZXcgUmVnRXhwKGZvcm1hdFZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICByZWdleEZvcm1hdC50ZXN0KCcnKTsgLy8gUnVuIHJlZ2V4IHRvIG1ha2Ugc3VyZSB0aGF0IHJlZ2V4IHdpbGwgY3J1c2ggaWYgbmVjZXNhcnkgZHVyaW5nIHNjaGVtYSBsb2FkXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkVmFsdWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGRWYWx1ZSAmJiAhcmVnZXhGb3JtYXQudGVzdChmaWVsZFZhbHVlKSkgcmV0dXJuIEdTRXJyb3JzLlZBTElEQVRJT05fRVJST1I7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gR1NFcnJvcnMuT0s7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHJlZ0V4IHBhdHRlcm46ICcgKyBlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGZvcm1hdDogJyArIGZvcm1hdCk7XHJcbn1cclxuRm9ybUlucHV0LmFkZElucHV0VG9MaWJyYXJ5KEZvcm1JbnB1dCwgRm9ybUlucHV0UHJpb3JpdGllcy5GYWxsYmFjayk7XHJcbiIsImltcG9ydCB7XHJcbiAgICBGb3JtSW5wdXQsXHJcbiAgICBJRm9ybUlucHV0Q29udGV4dCxcclxuICAgIElWYWxpZGF0aW9uQ2FsbGJhY2ssXHJcbiAgICBGb3JtSW5wdXRfQ09OU1RTLFxyXG4gICAgVmFsaWRpdHlTdGF0ZXMsXHJcbiAgICBGb3JtSW5wdXRQcmlvcml0aWVzLFxyXG59IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0Zvcm1JbnB1dCc7XHJcbmltcG9ydCB7IFJlZ2lzdGVyRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvUmVnaXN0ZXJGb3JtJztcclxuaW1wb3J0IHsgR1NFcnJvcnMgfSBmcm9tICcuLi8uLi8uLi8uLi9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9ycyc7XHJcblxyXG5leHBvcnQgY2xhc3MgTG9naW5JZElucHV0IGV4dGVuZHMgRm9ybUlucHV0IHtcclxuICAgIHByaXZhdGUgX3NlcnZlclZhbGlkYXRlQXZhbGlhYmlsaXR5OiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBsYXN0Q2hlY2s6IHN0cmluZztcclxuICAgIHByaXZhdGUgaXNTZXJ2ZXJWYWxpZGF0aW9uRW5hYmxlZDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgbG9naW5JZE11c3RCZUVtYWlsOiBib29sZWFuO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgRk9STV9UWVBFX0NSSVRFUklBKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuZm9ybSBpbnN0YW5jZW9mIFJlZ2lzdGVyRm9ybSAmJiAoY29udGV4dC5maWVsZE5hbWUgPT09ICdlbWFpbCcgfHwgY29udGV4dC5maWVsZE5hbWUgPT09ICd1c2VybmFtZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIoY29udGV4dCk7XHJcblxyXG4gICAgICAgIHRoaXMuaXNTZXJ2ZXJWYWxpZGF0aW9uRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fc2VydmVyVmFsaWRhdGVBdmFsaWFiaWxpdHkgPSB0aGlzLnNob3dWYWxpZENoZWNrbWFyayhjb250ZXh0LmVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMubG9naW5JZE11c3RCZUVtYWlsID0gY29udGV4dC5maWVsZE5hbWUgPT09ICdlbWFpbCc7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHNob3dEYXRhUGVuZGluZygpIHtcclxuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5fZm9ybS5zaG93RmllbGRFcnJvcih0aGlzLCBHU0Vycm9ycy5EYXRhX1BlbmRpbmcsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgb25LZXlVcChlOiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0VmFsdWUoKSAhPT0gdGhpcy5wcmV2aW91c1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIEZvcmNlIGFsbCBldmVudHMgdG8gYmUgZmlyZWQgYmVjYXVzZSB3ZSd2ZSB0b3VjaGVkIHRoZSBmaWVsZCBlcnJvciBzdGF0dXMuXHJcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5sYXN0Q2hlY2sgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNob3dEYXRhUGVuZGluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdXBlci5vbktleVVwKGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEZvcm1FbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xyXG4gICAgICAgIGNvbnN0IGVtYWlsID0gdGhpcy5nZXRFbWFpbEZyb21RdWVyeVBhcmFtcygpO1xyXG4gICAgICAgIGlmIChlbWFpbCkge1xyXG4gICAgICAgICAgICB0aGlzLnByZVBvcHVsYXRlKGVtYWlsKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VydmVyVmFsaWRhdGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZXJ2ZXJWYWxpZGF0ZUF2YWxpYWJpbGl0eTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhcnRTZXJ2ZXJWYWxpZGF0aW9uKGZpZWxkVmFsdWU6IGFueSwgY2FsbGJhY2s6IElWYWxpZGF0aW9uQ2FsbGJhY2spOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChmaWVsZFZhbHVlID09PSB0aGlzLmxhc3RDaGVjaykge1xyXG4gICAgICAgICAgICAvLyBOb3RoaW5nIGhhcyBjaGFuZ2VkIHNpbmNlIGxhc3QgY2hlY2ssIG5vIG5lZWQgdG8gcXVlcnkgdGhlIHNlcnZlciBhZ2FpblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNob3dEYXRhUGVuZGluZygpO1xyXG5cclxuICAgICAgICB0aGlzLmxhc3RDaGVjayA9IGZpZWxkVmFsdWU7XHJcbiAgICAgICAgdGhpcy5jbGVhclNlcnZlckVycm9yKCk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLnNlcnZlclZhbGlkYXRpb24pO1xyXG4gICAgICAgIHRoaXMuc2V0VmFsaWRpdHlTdGF0ZShWYWxpZGl0eVN0YXRlcy5wZW5kaW5nKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNTZXJ2ZXJWYWxpZGF0aW9uRW5hYmxlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgLy8gV2UndmUgYWxyZWFkeSB0cmllZCB0byB1c2UgdGhlIHNlcnZlci1zaWRlIHZhbGlkYXRpb24gYW5kIGRpc2NvdmVyZWQgdGhhdCBpdCdzIGRpc2FibGVkLlxyXG4gICAgICAgICAgICAvLyBTYXZlIEFQSSBjYWxscyBhbmQgZG9uJ3QgdHJ5IGFnYWluLlxyXG4gICAgICAgICAgICBjYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLk9LLFxyXG4gICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGdpZ3lhLmFjY291bnRzLmlzQXZhaWxhYmxlTG9naW5JRCh7XHJcbiAgICAgICAgICAgICAgICBsb2dpbklEOiBmaWVsZFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IHJlcyA9PiB0aGlzLnNlcnZlclF1ZXJ5RG9uZShyZXMsIGZpZWxkVmFsdWUsIGNhbGxiYWNrKSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXJ2ZXJRdWVyeURvbmUocmVzOiBhbnksIGNoZWNrZWRWYWx1ZSwgY2FsbGJhY2s6IElWYWxpZGF0aW9uQ2FsbGJhY2spIHtcclxuICAgICAgICAvLyByZXNwb25zZSBpcyBubyBsb25nZXIgcmVsZXZhbnQgZHVlIHRvIHNjcmVlbiBnb2luZyBvdXQgb2Ygdmlld1xyXG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gcmVzcG9uc2UgaXMgbm8gbG9uZ2VyIHJlbGV2YW50IGR1ZSB0byB2YWx1ZSBjaGFuZ2VcclxuICAgICAgICBpZiAodGhpcy5nZXRWYWx1ZSgpICE9PSBjaGVja2VkVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGVycm9yQ29kZTogR1NFcnJvcnMgPSByZXMuZXJyb3JDb2RlO1xyXG4gICAgICAgIHN3aXRjaCAoZXJyb3JDb2RlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuT0s6XHJcbiAgICAgICAgICAgICAgICBpZiAoIWdpZ3lhLnV0aWxzLnZhbGlkYXRpb24uaXNFeHBsaWNpdFRydWUocmVzLmlzQXZhaWxhYmxlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZSA9IEdTRXJyb3JzLlVOSVFVRV9JREVOVElGSUVSX0VYSVNUUztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgLy8gQ29uc29sZSBTaXRlIFNldHRpbmdzIGhhcyBcIlByb3RlY3QgYWdhaW5zdCBsb2dpbiBpZGVudGlmaWVyIGhhcnZlc3RpbmdcIiBvcHRpb24uXHJcbiAgICAgICAgICAgIC8vIFRoaXMgY2F1c2VzIGVycm9yIGNvZGUgNDAzMDI2IHRvIGJlIHJldHVybmVkIGZvciBhbGwgaXNBdmFpbGFibGVMb2dpbklEIGNhbGxzLlxyXG4gICAgICAgICAgICAvLyBUaGlzIHNob3VsZG4ndCBzaG93IGFueSBlcnJvciB0byB0aGUgY2xpZW50LCBzbyB0cmFuc2Zvcm0gdG8gYW4gXCJPS1wiIHJlc3BvbnNlLlxyXG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLlVOQVVUSE9SSVpFRF9BQ0NFU1NfRVJST1I6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzU2VydmVyVmFsaWRhdGlvbkVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGVycm9yQ29kZSA9IEdTRXJyb3JzLk9LO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldFNlcnZlckVycm9yKGVycm9yQ29kZSk7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5vbklucHV0Q2hhbmdlKHRoaXMsIGZhbHNlKTsgLy8gdHJpZ2dlcnMgcmV2YWxpZGF0aW9uXHJcbiAgICAgICAgY2FsbGJhY2soe1xyXG4gICAgICAgICAgICBlcnJvckNvZGU6IGVycm9yQ29kZSxcclxuICAgICAgICAgICAgZmllbGQ6IHRoaXMsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHZhbGlkYXRlVmFsdWUoZm9ybURhdGE6IGFueSwgZmllbGRWYWx1ZTogYW55LCBjYWxsYmFjazogSVZhbGlkYXRpb25DYWxsYmFjayk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmlzU2VydmVyVmFsaWRhdGlvbkVuYWJsZWQgJiZcclxuICAgICAgICAgICAgZmllbGRWYWx1ZSAhPT0gdGhpcy5sYXN0Q2hlY2spIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhclNlcnZlckVycm9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZmllbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2luSWRNdXN0QmVFbWFpbCAmJlxyXG4gICAgICAgICAgICAgICAgKCF0aGlzLl9zY2hlbWEgfHwgIXRoaXMuX3NjaGVtYS5mb3JtYXQpICYmIC8vIGNvbnRpbnVlIHRvIGhhcmQgY29kZWQgZW1haWwgdmFsaWRhdGlvbiBvbmx5IGlmIHNjaGVtYSBsYWNrcyBmb3JtYXRcclxuICAgICAgICAgICAgICAgICFnaWd5YS5wbHVnaW5VdGlscy52YWxpZGF0aW9uLmlzVmFsaWRFbWFpbExvZ2luSUQoZmllbGRWYWx1ZSlcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogNDAwMDA2IC8qIElOVkFMSURfUEFSQU1FVEVSX1ZBTFVFICovLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLnZhbGlkYXRlVmFsdWUoZm9ybURhdGEsIGZpZWxkVmFsdWUsIGNhbGxiYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEVtYWlsRnJvbVF1ZXJ5UGFyYW1zKCkge1xyXG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5VUkwuZ2V0UGFyYW1WYWx1ZUZyb21VUkwoJ2dpZ19lbWFpbCcsIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gsIHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcbn1cclxuRm9ybUlucHV0LmFkZElucHV0VG9MaWJyYXJ5KExvZ2luSWRJbnB1dCwgRm9ybUlucHV0UHJpb3JpdGllcy5JbXBvcnRhbnQpO1xyXG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplLCBGb3JFYWNoIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XHJcbmltcG9ydCB7IEZvcm1JbnB1dCwgSUZvcm1JbnB1dENvbnRleHQsIElWYWxpZGF0aW9uQ2FsbGJhY2sgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Gb3JtSW5wdXQnO1xyXG5pbXBvcnQge1xyXG4gICAgQnViYmxlT3JpZW50YXRpb25zLFxyXG4gICAgUGFzc3dvcmRTdHJlbmd0aFdpZGdldCxcclxuICAgIGdldFBhc3N3b3JkU3RyZW5ndGhEYXRhLFxyXG4gICAgaXNQYXNzd29yZFN0cmVuZ3RoVmFsaWQsXHJcbn0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1Bhc3N3b3JkU3RyZW5ndGhXaWRnZXQnO1xyXG5pbXBvcnQgeyBJQ29uZGl0aW9uYWxBdHRyaWJ1dGUsIFRlbXBsYXRlRWxlbWVudCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvVGVtcGxhdGVFbGVtZW50JztcclxuaW1wb3J0IHsgU2NyZWVuX0NPTlNUUyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuQ29uc3RzJztcclxuaW1wb3J0IHsgR1NFcnJvcnMgfSBmcm9tICcuLi8uLi8uLi8uLi9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9ycyc7XHJcblxyXG5leHBvcnQgdmFyIEJhc2VQYXNzd29yZElucHV0X0NPTlNUUyA9IHtcclxuICAgIHNob3dQYXNzd29yZFN0cmVuZ3RoOiAnc2hvdy1wYXNzd29yZC1zdHJlbmd0aCcsXHJcbn07XHJcbkRlZXBGcmVlemUoQmFzZVBhc3N3b3JkSW5wdXRfQ09OU1RTKTtcclxuZXhwb3J0IGNsYXNzIEJhc2VQYXNzd29yZElucHV0IGV4dGVuZHMgRm9ybUlucHV0IHtcclxuICAgIHByaXZhdGUgc2hvd1Bhc3N3b3JkU3RyZW5ndGg6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIHBhc3N3b3JkU3RyZW5ndGhPcmllbnRhdGlvbjogQnViYmxlT3JpZW50YXRpb25zO1xyXG4gICAgcHJpdmF0ZSBwYXNzd29yZFN0cmVuZ3RoV2lkZ2V0OiBQYXNzd29yZFN0cmVuZ3RoV2lkZ2V0O1xyXG4gICAgcHJpdmF0ZSBzaG93UGFzc3dvcmRTdHJlbmd0aENvbmRpdGlvbmFsRXhpc3RzID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIHNob3dQYXNzd29yZFN0cmVuZ3RoQ29uZGl0aW9uYWw6IElDb25kaXRpb25hbEF0dHJpYnV0ZTtcclxuICAgIHByaXZhdGUgc2hvd1Bhc3N3b3JkU3RyZW5ndGhBdHRyaWJ1dGU6IHN0cmluZyA9ICcnO1xyXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogSUZvcm1JbnB1dENvbnRleHQpIHtcclxuICAgICAgICBzdXBlcihjb250ZXh0KTtcclxuXHJcbiAgICAgICAgRm9yRWFjaCh0aGlzLmNvbmRpdGlvbmFsRXhwcmVzc2lvbnMsIChlbDogSUNvbmRpdGlvbmFsQXR0cmlidXRlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlbC5hdHRyaWJ1dGVOYW1lID09IEJhc2VQYXNzd29yZElucHV0X0NPTlNUUy5zaG93UGFzc3dvcmRTdHJlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93UGFzc3dvcmRTdHJlbmd0aENvbmRpdGlvbmFsRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1Bhc3N3b3JkU3RyZW5ndGhDb25kaXRpb25hbCA9IGVsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2hvd1Bhc3N3b3JkU3RyZW5ndGhBdHRyaWJ1dGUgPSBnaWd5YS5fLnBsdWdpbnMudXRpbHMuRE9NLmdldEF0dHJpYnV0ZSh0aGlzLnRlbXBsYXRlRWxlbWVudCwgQmFzZVBhc3N3b3JkSW5wdXRfQ09OU1RTLnNob3dQYXNzd29yZFN0cmVuZ3RoKTtcclxuICAgICAgICBpZiAodGhpcy5zaG93UGFzc3dvcmRTdHJlbmd0aEF0dHJpYnV0ZSAhPSBudWxsICYmIHRoaXMuc2hvd1Bhc3N3b3JkU3RyZW5ndGhBdHRyaWJ1dGUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFzc3dvcmRTdHJlbmd0aE9yaWVudGF0aW9uID0gQnViYmxlT3JpZW50YXRpb25zW3RoaXMuc2hvd1Bhc3N3b3JkU3RyZW5ndGhBdHRyaWJ1dGVdO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFzc3dvcmRTdHJlbmd0aE9yaWVudGF0aW9uID09PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmRTdHJlbmd0aE9yaWVudGF0aW9uID0gdGhpcy5fc2NyZWVuU2V0LmlzTW9kYWwgPyBCdWJibGVPcmllbnRhdGlvbnMubGVmdCA6IEJ1YmJsZU9yaWVudGF0aW9ucy51cDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2hvd1Bhc3N3b3JkU3RyZW5ndGggPVxyXG4gICAgICAgICAgICAgICAgKHR5cGVvZiB0aGlzLnBhc3N3b3JkU3RyZW5ndGhPcmllbnRhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5wYXNzd29yZFN0cmVuZ3RoT3JpZW50YXRpb24gIT0gQnViYmxlT3JpZW50YXRpb25zLm5vbmUpIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dQYXNzd29yZFN0cmVuZ3RoQ29uZGl0aW9uYWxFeGlzdHM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93UGFzc3dvcmRTdHJlbmd0aCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxGb3JtRWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd1Bhc3N3b3JkU3RyZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIGJ1YmJsZUh0bWwgPSAnJztcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93UGFzc3dvcmRTdHJlbmd0aEF0dHJpYnV0ZSAmJlxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIHRoaXMucGFzc3dvcmRTdHJlbmd0aE9yaWVudGF0aW9uICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXNzd29yZFN0cmVuZ3RoT3JpZW50YXRpb24gIT09IEJ1YmJsZU9yaWVudGF0aW9ucy5ub25lXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgYnViYmxlSHRtbCA9IGdpZ3lhLnV0aWxzLnRlbXBsYXRlcy5maWxsKHRoaXMuX3NjcmVlblNldC5nZXRUZW1wbGF0ZXMoKS5pbmxpbmVkUGFzc3dvcmRTdHJlbmd0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uOiBCdWJibGVPcmllbnRhdGlvbnNbdGhpcy5wYXNzd29yZFN0cmVuZ3RoT3JpZW50YXRpb25dLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBidWJibGVIdG1sID0gZ2lneWEudXRpbHMudGVtcGxhdGVzLmZpbGwodGhpcy5fc2NyZWVuU2V0LmdldFRlbXBsYXRlcygpLmlubGluZWRQYXNzd29yZFN0cmVuZ3RoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZW50YXRpb246IEJ1YmJsZU9yaWVudGF0aW9uc1tCdWJibGVPcmllbnRhdGlvbnMubm9uZV0sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsIGJ1YmJsZUh0bWwpO1xyXG4gICAgICAgICAgICB2YXIgYnViYmxlRWxlbWVudCA9ICh0aGlzLmluc3RhbmNlRWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmdcclxuICAgICAgICAgICAgICAgID8gdGhpcy5pbnN0YW5jZUVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuaW5zdGFuY2VFbGVtZW50Lm5leHRTaWJsaW5nKSBhcyBIVE1MRGl2RWxlbWVudDsgLy8gSUU4IGNvbXBhdGFiaWxpdHlcclxuXHJcbiAgICAgICAgICAgIHRoaXMucGFzc3dvcmRTdHJlbmd0aFdpZGdldCA9IG5ldyBQYXNzd29yZFN0cmVuZ3RoV2lkZ2V0KHRoaXMuX2Zvcm0sIGJ1YmJsZUVsZW1lbnQpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93UGFzc3dvcmRTdHJlbmd0aENvbmRpdGlvbmFsRXhpc3RzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhc3N3b3JkU3RyZW5ndGhXaWRnZXQudGVtcGxhdGVFbGVtZW50LnNldEF0dHJpYnV0ZShcclxuICAgICAgICAgICAgICAgICAgICBTY3JlZW5fQ09OU1RTLmNvbmRpdGlvbmFsQXR0cmlidXRlUHJlZml4ICsgJ2RhdGEtYnViYmxlLW9yaWVudGF0aW9uJyxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dQYXNzd29yZFN0cmVuZ3RoQ29uZGl0aW9uYWwuY29uZGl0aW9uLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHZhciBjb25kaXRpb25hbDogSUNvbmRpdGlvbmFsQXR0cmlidXRlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWU6ICdkYXRhLWJ1YmJsZS1vcmllbnRhdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uOiB0aGlzLnNob3dQYXNzd29yZFN0cmVuZ3RoQ29uZGl0aW9uYWwuY29uZGl0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGhpcy5zaG93UGFzc3dvcmRTdHJlbmd0aENvbmRpdGlvbmFsLmRlZmF1bHRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0QXR0cmlidXRlVmFsdWU6IHRoaXMuc2hvd1Bhc3N3b3JkU3RyZW5ndGhDb25kaXRpb25hbC5kZWZhdWx0VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNXaWRnZXRQYXJhbVRhZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXNzd29yZFN0cmVuZ3RoV2lkZ2V0LmNvbmRpdGlvbmFsRXhwcmVzc2lvbnMucHVzaChjb25kaXRpb25hbCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucGFzc3dvcmRTdHJlbmd0aFdpZGdldC5fcGFzc3dvcmRGaWVsZCA9IHRoaXM7IC8vIGJpbmQgdG8gdGhpcyBwYXNzd29yZCBmaWVsZFxyXG4gICAgICAgICAgICBUZW1wbGF0ZUVsZW1lbnQucHJlcGFyZVRlbXBsYXRlSW5zdGFuY2VFbGVtZW50KGJ1YmJsZUVsZW1lbnQsIGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy5wYXNzd29yZFN0cmVuZ3RoV2lkZ2V0LmxpbmtJbnN0YW5jZUVsZW1lbnQoYnViYmxlRWxlbWVudC5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcclxuICAgICAgICBpZiAodGhpcy5zaG93UGFzc3dvcmRTdHJlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhc3N3b3JkU3RyZW5ndGhXaWRnZXQudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMucGFzc3dvcmRTdHJlbmd0aFdpZGdldC51bmxpbmtUZW1wbGF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnBhc3N3b3JkU3RyZW5ndGhXaWRnZXQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldFRydW5jYXRlZFZhbHVlKHZhbCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFN0cmluZyh2YWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB2YWxpZGF0ZVZhbHVlKGZvcm1EYXRhOiBhbnksIGZpZWxkVmFsdWU6IGFueSwgY2FsbGJhY2s6IElWYWxpZGF0aW9uQ2FsbGJhY2spIHtcclxuICAgICAgICBzdXBlci52YWxpZGF0ZVZhbHVlKGZvcm1EYXRhLCBmaWVsZFZhbHVlLCB2YWxpZGF0aW9uSW5mbyA9PiB7XHJcbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uSW5mby5lcnJvckNvZGUgIT09IEdTRXJyb3JzLk9LKSByZXR1cm4gY2FsbGJhY2sodmFsaWRhdGlvbkluZm8pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQYXNzd29yZFNjaGVtYVZhbGlkYXRlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXBpRGF0YSA9IHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGFwaURhdGEuZ2V0UG9saWNpZXMgJiYgYXBpRGF0YS5nZXRQb2xpY2llcy5wYXNzd29yZENvbXBsZXhpdHkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb0NvbXBsZXhpdHkgPSBhcGlEYXRhLmdldFBvbGljaWVzLnBhc3N3b3JkQ29tcGxleGl0eSB8fCB7fTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb1Bhc3NTdHJlbmd0aCA9IGdldFBhc3N3b3JkU3RyZW5ndGhEYXRhKGZpZWxkVmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUGFzc3dvcmRTdHJlbmd0aFZhbGlkKGZpZWxkVmFsdWUsIG9QYXNzU3RyZW5ndGgsIG9Db21wbGV4aXR5KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuVkFMSURBVElPTl9FUlJPUixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY2FsbGJhY2sodmFsaWRhdGlvbkluZm8pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc1Bhc3N3b3JkU2NoZW1hVmFsaWRhdGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtLmlzUGFzc3dvcmRTY2hlbWFWYWxpZGF0ZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSB7XHJcbiAgICAgICAgc3VwZXIuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGFzc3dvcmRTdHJlbmd0aFdpZGdldCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhc3N3b3JkU3RyZW5ndGhXaWRnZXQuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzUGFzc3dvcmRTdHJlbmd0aFdpZGdldEJvdW5kKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNob3dQYXNzd29yZFN0cmVuZ3RoO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBjbGFzcyBQYXNzd29yZElucHV0IGV4dGVuZHMgQmFzZVBhc3N3b3JkSW5wdXQge1xyXG4gICAgcHVibGljIHN0YXRpYyBGT1JNX1RZUEVfQ1JJVEVSSUEoY29udGV4dDogSUZvcm1JbnB1dENvbnRleHQpIHtcclxuICAgICAgICByZXR1cm4gY29udGV4dC5maWVsZE5hbWUgPT09ICdwYXNzd29yZCc7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogSUZvcm1JbnB1dENvbnRleHQpIHtcclxuICAgICAgICBzdXBlcihjb250ZXh0KTtcclxuXHJcbiAgICAgICAgdGhpcy5fZm9ybS5fcGFzc3dvcmRJbnB1dHMucHVzaCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNQYXNzd29yZFNjaGVtYVZhbGlkYXRlZCgpIHtcclxuICAgICAgICByZXR1cm4gc3VwZXIuaXNQYXNzd29yZFNjaGVtYVZhbGlkYXRlZCgpO1xyXG4gICAgfVxyXG59XHJcbkZvcm1JbnB1dC5hZGRJbnB1dFRvTGlicmFyeShQYXNzd29yZElucHV0KTtcclxuZXhwb3J0IGNsYXNzIE5ld1Bhc3N3b3JkSW5wdXQgZXh0ZW5kcyBCYXNlUGFzc3dvcmRJbnB1dCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIEZPUk1fVFlQRV9DUklURVJJQShjb250ZXh0OiBJRm9ybUlucHV0Q29udGV4dCkge1xyXG4gICAgICAgIHJldHVybiBjb250ZXh0LmZpZWxkTmFtZSA9PT0gJ25ld1Bhc3N3b3JkJztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBJRm9ybUlucHV0Q29udGV4dCkge1xyXG4gICAgICAgIHN1cGVyKGNvbnRleHQpO1xyXG5cclxuICAgICAgICB0aGlzLl9mb3JtLl9wYXNzd29yZElucHV0cy51bnNoaWZ0KHRoaXMpO1xyXG4gICAgfVxyXG59XHJcbkZvcm1JbnB1dC5hZGRJbnB1dFRvTGlicmFyeShOZXdQYXNzd29yZElucHV0KTtcclxuIiwiaW1wb3J0IHsgRm9ybUlucHV0LCBJRm9ybUlucHV0Q29udGV4dCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0Zvcm1JbnB1dCc7XHJcbmltcG9ydCB7IElWYWxpZGF0aW9uQ2FsbGJhY2ssIElWYWxpZGF0aW9uSW5mbywgVmFsaWRpdHlTdGF0ZXMgfSBmcm9tIFwiLi9Gb3JtSW5wdXRcIjtcclxuaW1wb3J0IHsgR1NFcnJvcnMgfSBmcm9tIFwiLi4vLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnNcIjtcclxuXHJcbmNvbnN0IHJlZ0V4TWF0Y2hpbmdGb3JFMTY0ID0gL15cXCs/WzEtOV1cXGR7MSwxNH0kLztcclxuZXhwb3J0IGNvbnN0IGdpZ3lhUGhvbmVOdW1iZXJJbnB1dCA9ICdnaWd5YS1waG9uZS1udW1iZXItaW5wdXQnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBob25lTnVtYmVySW5wdXQgZXh0ZW5kcyBGb3JtSW5wdXQge1xyXG5cclxuICAgIHByaXZhdGUgY291bnRyeUNvZGVTZWxlY3Q6IEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzdWJzY3JpYmVyTnVtYmVyOiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBjb3VudHJ5Q29kZXNEYXRhU3RydWN0dXJlID0ge307XHJcbiAgICBwcml2YXRlIGNvdW50cnlDb2RlU2VsZWN0UHJldmlvdXNWYWx1ZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBzdWJzY3JpYmVyTnVtYmVyUHJldmlvdXNWYWx1ZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBjb3VudHJ5Q29kZVNlbGVjdEhhZENoYW5nZWQ6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIHN1YnNjcmliZXJOdW1iZXJIYWRDaGFuZ2VkOiBib29sZWFuO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgRk9STV9UWVBFX0NSSVRFUklBKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxGaWVsZFNldEVsZW1lbnRcclxuICAgICAgICAgICAgJiYgY29udGV4dC50eXBlID09PSBnaWd5YVBob25lTnVtYmVySW5wdXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUNvdW50cnlDb2Rlc0RhdGFTdHJ1Y3R1cmUoKSB7XHJcbiAgICAgICAgLy8gZ2V0IGFsbCBvcHRpb24gd2l0aCB2YWx1ZSBhdHRyIGV4Y2VwdCB0aGUgb25lIHdpdGggdmFsdWUgXCIwXCJcclxuICAgICAgICBjb25zdCBjb3VudHJ5Q29kZU9wdGlvbnMgPSB0aGlzLmNvdW50cnlDb2RlU2VsZWN0LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTE9wdGlvbkVsZW1lbnQ+KCdvcHRpb25bdmFsdWVdOm5vdChbdmFsdWU9XCIwXCJdKScpO1xyXG4gICAgICAgIGNvdW50cnlDb2RlT3B0aW9ucy5mb3JFYWNoKGNvdW50cnlDb2RlT3B0aW9uICA9PiB7XHJcbiAgICAgICAgICAgIGxldCBkcyA9IHRoaXMuY291bnRyeUNvZGVzRGF0YVN0cnVjdHVyZTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkaWdpdCBvZiBjb3VudHJ5Q29kZU9wdGlvbi52YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICBpZighZHNbZGlnaXRdKXtcclxuICAgICAgICAgICAgICAgICAgICBkc1tkaWdpdF0gPSB7fVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZHMgPSBkc1tkaWdpdF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldENvdW50cnlDb2RlKHBob25lTnVtYmVyOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgcmVzID0gXCJcIjsgLy8gaW5pdGlhbGl6ZSBhcyBhbiBlbXB0eSBzdHJpbmdcclxuICAgICAgICBsZXQgZHMgPSB0aGlzLmNvdW50cnlDb2Rlc0RhdGFTdHJ1Y3R1cmU7XHJcbiAgICAgICAgZm9yIChjb25zdCBkaWdpdCBvZiBwaG9uZU51bWJlcil7XHJcbiAgICAgICAgICAgIGlmKCFkc1tkaWdpdF0pe1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzID0gYCR7cmVzfSR7ZGlnaXR9YDtcclxuICAgICAgICAgICAgZHMgPSBkc1tkaWdpdF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRTdWJzY3JpYmVyTnVtYmVyKHBob25lTnVtYmVyOiBzdHJpbmcsIGNvdW50cnlDb2RlOiBzdHJpbmcpIHtcclxuICAgICAgICBjb3VudHJ5Q29kZSA9IGNvdW50cnlDb2RlLnJlcGxhY2UoJ1xcKycsICdcXFxcKycpO1xyXG4gICAgICAgIGNvbnN0IHJlZ0V4cCA9IG5ldyBSZWdFeHAoYF4ke2NvdW50cnlDb2RlfWApO1xyXG4gICAgICAgIHJldHVybiBwaG9uZU51bWJlci5yZXBsYWNlKHJlZ0V4cCwnJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbkNvdW50cnlDb2RlU2VsZWN0ZWQgPSAoc2V0QnlTY3JpcHQpID0+IHtcclxuXHJcbiAgICAgICAgdGhpcy5jb3VudHJ5Q29kZVNlbGVjdEhhZENoYW5nZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBjb25zdCBzZWxlY3RlZFZhbHVlID0gdGhpcy5jb3VudHJ5Q29kZVNlbGVjdC52YWx1ZTtcclxuICAgICAgICBpZihzZWxlY3RlZFZhbHVlID09PSAnMCcpIC8vIHRoZSBkZWZhdWx0IHZhbHVlIC0gaXQgcmVwcmVzZW50cyBubyB2YWx1ZVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMuY291bnRyeUNvZGVTZWxlY3Qub3B0aW9uc1swXS52YWx1ZSA9IHNlbGVjdGVkVmFsdWU7XHJcbiAgICAgICAgdGhpcy5jb3VudHJ5Q29kZVNlbGVjdC5vcHRpb25zWzBdLnRleHQgPSBzZWxlY3RlZFZhbHVlO1xyXG4gICAgICAgIHRoaXMuY291bnRyeUNvZGVTZWxlY3Quc2VsZWN0ZWRJbmRleCA9IDA7XHJcblxyXG4gICAgICAgIC8vIFRyaWdnZXIgY2hhbmdlLlxyXG4gICAgICAgIHRoaXMub25GaWVsZENoYW5nZShzZXRCeVNjcmlwdCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgb25TdWJzY3JpYmVyTnVtYmVyQ2hhbmdlZCA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLnN1YnNjcmliZXJOdW1iZXJIYWRDaGFuZ2VkID0gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSBzZXR1cENoYW5nZUV2ZW50SGFuZGxlcigpIHtcclxuICAgICAgICB0aGlzLmNvdW50cnlDb2RlU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMub25Db3VudHJ5Q29kZVNlbGVjdGVkKTtcclxuICAgICAgICB0aGlzLnN1YnNjcmliZXJOdW1iZXIuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB0aGlzLm9uU3Vic2NyaWJlck51bWJlckNoYW5nZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVtb3ZlQ2hhbmdlRXZlbnRIYW5kbGVyKCkge1xyXG4gICAgICAgIHRoaXMuY291bnRyeUNvZGVTZWxlY3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5vbkNvdW50cnlDb2RlU2VsZWN0ZWQpO1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaWJlck51bWJlci5yZW1vdmVFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMub25TdWJzY3JpYmVyTnVtYmVyQ2hhbmdlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRm9ybUVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XHJcblxyXG4gICAgICAgIHRoaXMuY291bnRyeUNvZGVTZWxlY3QgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdzZWxlY3QnKTtcclxuICAgICAgICB0aGlzLnN1YnNjcmliZXJOdW1iZXIgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpO1xyXG4gICAgICAgIGlmKCF0aGlzLmNvdW50cnlDb2RlU2VsZWN0IHx8ICF0aGlzLnN1YnNjcmliZXJOdW1iZXIpIHtcclxuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLndhcm4oYFBob25lIE51bWJlciBJbnB1dDogbWlzc2luZyBjb3VudHJ5IHNlbGVjdCBvciBtb2JpbGUgcGhvbmUgdGV4dCBib3hgKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZUNvdW50cnlDb2Rlc0RhdGFTdHJ1Y3R1cmUoKTtcclxuICAgICAgICB0aGlzLnNldHVwQ2hhbmdlRXZlbnRIYW5kbGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIF9zaG93VmFsaWRpdHlPbklucHV0KGVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQpIHtcclxuXHJcbiAgICAgICAgaWYoIXRoaXMuc2hvdWxkVmFsaWRhdGUoKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBjb3VudHJ5Q29kZVZhbGlkaXR5U3RhdGUgPSB0aGlzLmdldENvdW50cnlDb2RlVmFsaWRpdHlTdGF0ZSgpO1xyXG4gICAgICAgIHN1cGVyLl9zaG93VmFsaWRpdHlPbklucHV0KHRoaXMuY291bnRyeUNvZGVTZWxlY3QsIGNvdW50cnlDb2RlVmFsaWRpdHlTdGF0ZSwgZmFsc2UpO1xyXG4gICAgICAgIGlmKGNvdW50cnlDb2RlVmFsaWRpdHlTdGF0ZSA9PT0gVmFsaWRpdHlTdGF0ZXMuZXJyb3Ipe1xyXG4gICAgICAgICAgICB0aGlzLmNvdW50cnlDb2RlU2VsZWN0LmJsdXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHN1YnNjcmliZXJOdW1iZXJWYWxpZGl0eVN0YXRlID0gdGhpcy5nZXRTdWJzY3JpYmVyTnVtYmVyVmFsaWRpdHlTdGF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGFsbG93VmFsaWRpdHlNYXJrZXIgPSAoY291bnRyeUNvZGVWYWxpZGl0eVN0YXRlID09PSAgVmFsaWRpdHlTdGF0ZXMudmFsaWQgJiYgc3Vic2NyaWJlck51bWJlclZhbGlkaXR5U3RhdGUgPT09ICBWYWxpZGl0eVN0YXRlcy52YWxpZCk7XHJcbiAgICAgICAgc3VwZXIuX3Nob3dWYWxpZGl0eU9uSW5wdXQodGhpcy5zdWJzY3JpYmVyTnVtYmVyLCBzdWJzY3JpYmVyTnVtYmVyVmFsaWRpdHlTdGF0ZSwgYWxsb3dWYWxpZGl0eU1hcmtlcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcclxuICAgICAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcclxuICAgICAgICB0aGlzLnJlbW92ZUNoYW5nZUV2ZW50SGFuZGxlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRWYWxpZGl0eVN0YXRlKHZhbGlkaXR5U3RhdGU6IFZhbGlkaXR5U3RhdGVzLCBmcm9tU2VydmVyID0gZmFsc2UpIHtcclxuXHJcbiAgICAgICAgaWYodGhpcy5jb3VudHJ5Q29kZVNlbGVjdC52YWx1ZSAhPT0gdGhpcy5jb3VudHJ5Q29kZVNlbGVjdFByZXZpb3VzVmFsdWVcclxuICAgICAgICB8fCB0aGlzLnN1YnNjcmliZXJOdW1iZXIudmFsdWUgIT09IHRoaXMuc3Vic2NyaWJlck51bWJlclByZXZpb3VzVmFsdWUpe1xyXG4gICAgICAgICAgICB0aGlzLmNvdW50cnlDb2RlU2VsZWN0UHJldmlvdXNWYWx1ZSA9IHRoaXMuY291bnRyeUNvZGVTZWxlY3QudmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlck51bWJlclByZXZpb3VzVmFsdWUgPSB0aGlzLnN1YnNjcmliZXJOdW1iZXIudmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbGlkaXR5U3RhdGUgPSBWYWxpZGl0eVN0YXRlcy5fdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3VwZXIuc2V0VmFsaWRpdHlTdGF0ZSh2YWxpZGl0eVN0YXRlLCBmcm9tU2VydmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdmFsaWRhdGVWYWx1ZShmb3JtRGF0YTogYW55LCBmaWVsZFZhbHVlOiBzdHJpbmcsIGNhbGxiYWNrOiBJVmFsaWRhdGlvbkNhbGxiYWNrKSB7XHJcblxyXG4gICAgICAgIGlmKCF0aGlzLnNob3VsZFZhbGlkYXRlKCkpXHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh7ZXJyb3JDb2RlOiBHU0Vycm9ycy5PSywgZmllbGQ6IHRoaXN9KTtcclxuXHJcbiAgICAgICAgaWYoIXRoaXMuY291bnRyeUNvZGVTZWxlY3QudmFsdWUgfHwgdGhpcy5jb3VudHJ5Q29kZVNlbGVjdC52YWx1ZSA9PT0gJzAnIHx8ICF0aGlzLnN1YnNjcmliZXJOdW1iZXIudmFsdWUpXHJcbiAgICAgICAgICAgIGZpZWxkVmFsdWUgPSAnJztcclxuXHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLnZhbGlkYXRlVmFsdWUoZm9ybURhdGEsIGZpZWxkVmFsdWUsICh2YWxpZGF0aW9uSW5mbzogSVZhbGlkYXRpb25JbmZvKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsaWRhdGlvbkluZm8uZXJyb3JDb2RlICE9PSBHU0Vycm9ycy5PSylcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh2YWxpZGF0aW9uSW5mbyk7IC8vIGJhc2ljIHZhbGlkYXRpb24gZmFpbGVkXHJcblxyXG4gICAgICAgICAgICBjb25zdCBlcnJvckNvZGUgPSByZWdFeE1hdGNoaW5nRm9yRTE2NC50ZXN0KGZpZWxkVmFsdWUpID9cclxuICAgICAgICAgICAgICAgIEdTRXJyb3JzLk9LIDogLy8gdmFsaWQgcGhvbmUgbnVtYmVyIGluIGUuMTY0IGZvcm1hdFxyXG4gICAgICAgICAgICAgICAgR1NFcnJvcnMuSU5WQUxJRF9QQVJBTUVURVJfVkFMVUU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlLCBmaWVsZDogdGhpcyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFZhbHVlKGVsOiBIVE1MSW5wdXRFbGVtZW50ID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQgYXMgSFRNTElucHV0RWxlbWVudCwgY3VycmVudFZhbHVlPzogYW55KTogc3RyaW5nIHtcclxuXHJcbiAgICAgICAgaWYoIXRoaXMuY291bnRyeUNvZGVTZWxlY3QgfHwgIXRoaXMuc3Vic2NyaWJlck51bWJlcilcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG5cclxuICAgICAgICBjb25zdCBjb3VudHJ5Q29kZSA9IHRoaXMuY291bnRyeUNvZGVTZWxlY3QudmFsdWUgPT09ICcwJyA/IFwiXCIgOiB0aGlzLmNvdW50cnlDb2RlU2VsZWN0LnZhbHVlO1xyXG4gICAgICAgIGxldCBzdWJzY3JpYmVyTnVtYmVyID0gdGhpcy5zdWJzY3JpYmVyTnVtYmVyLnZhbHVlLnJlcGxhY2UoL1xccy9nbSwnJyk7IC8vIHJlbW92ZXMgYW55IHdoaXRlc3BhY2UgY2hhcmFjdGVyXHJcbiAgICAgICAgaWYoY291bnRyeUNvZGUgIT09ICcrMzknKSB7IC8vIEl0YWx5IChwaG9uZSBtdXN0IHN0YXJ0IHdpdGggMClcclxuICAgICAgICAgICAgc3Vic2NyaWJlck51bWJlciA9IHN1YnNjcmliZXJOdW1iZXIucmVwbGFjZSgvXjArLywnJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYCR7Y291bnRyeUNvZGV9JHtzdWJzY3JpYmVyTnVtYmVyfWA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFZhbHVlKHBob25lTnVtYmVyOiBzdHJpbmcsIHNldEJ5U2NyaXB0OiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xyXG5cclxuICAgICAgICBpZighdGhpcy5jb3VudHJ5Q29kZVNlbGVjdCB8fCAhdGhpcy5zdWJzY3JpYmVyTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdldFZhbHVlKCkgIT09IHBob25lTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvdW50cnlDb2RlID0gdGhpcy5nZXRDb3VudHJ5Q29kZShwaG9uZU51bWJlcik7XHJcbiAgICAgICAgICAgIGNvbnN0IHN1YnNjcmliZXJOdW1iZXIgPSB0aGlzLmdldFN1YnNjcmliZXJOdW1iZXIocGhvbmVOdW1iZXIsIGNvdW50cnlDb2RlKTtcclxuICAgICAgICAgICAgdGhpcy5jb3VudHJ5Q29kZVNlbGVjdC52YWx1ZSA9IGNvdW50cnlDb2RlO1xyXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmliZXJOdW1iZXIudmFsdWUgPSBzdWJzY3JpYmVyTnVtYmVyO1xyXG4gICAgICAgICAgICB0aGlzLm9uQ291bnRyeUNvZGVTZWxlY3RlZChzZXRCeVNjcmlwdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0Q291bnRyeUNvZGVWYWxpZGl0eVN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiAoIXRoaXMuY291bnRyeUNvZGVTZWxlY3QudmFsdWUgfHwgdGhpcy5jb3VudHJ5Q29kZVNlbGVjdC52YWx1ZSA9PT0gJzAnKVxyXG4gICAgICAgICAgICAgICAgPyBWYWxpZGl0eVN0YXRlcy5lcnJvclxyXG4gICAgICAgICAgICAgICAgOiBWYWxpZGl0eVN0YXRlcy52YWxpZDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFN1YnNjcmliZXJOdW1iZXJWYWxpZGl0eVN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiAoIXRoaXMuc3Vic2NyaWJlck51bWJlci52YWx1ZSB8fFxyXG4gICAgICAgICAgICAodGhpcy5nZXRDb3VudHJ5Q29kZVZhbGlkaXR5U3RhdGUoKSA9PT0gVmFsaWRpdHlTdGF0ZXMudmFsaWQgJiZcclxuICAgICAgICAgICAgICAgICFyZWdFeE1hdGNoaW5nRm9yRTE2NC50ZXN0KHRoaXMuZ2V0VmFsdWUoKSkpKVxyXG4gICAgICAgICAgICAgICAgPyBWYWxpZGl0eVN0YXRlcy5lcnJvclxyXG4gICAgICAgICAgICAgICAgOiBWYWxpZGl0eVN0YXRlcy52YWxpZDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3VsZFZhbGlkYXRlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtLnN1Ym1pdEJ1dHRvbkNsaWNrZWQgfHxcclxuICAgICAgICAgICAgKHRoaXMuY291bnRyeUNvZGVTZWxlY3RIYWRDaGFuZ2VkICYmIHRoaXMuc3Vic2NyaWJlck51bWJlckhhZENoYW5nZWQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5Gb3JtSW5wdXQuYWRkSW5wdXRUb0xpYnJhcnkoUGhvbmVOdW1iZXJJbnB1dCk7XHJcbiIsImltcG9ydCB7IEZvcm1JbnB1dCwgSUZvcm1JbnB1dENvbnRleHQsIEZvcm1JbnB1dF9DT05TVFMgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Gb3JtSW5wdXQnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJhZGlvSW5wdXQgZXh0ZW5kcyBGb3JtSW5wdXQge1xyXG4gICAgcHVibGljIHN0YXRpYyBGT1JNX1RZUEVfQ1JJVEVSSUEoY29udGV4dDogSUZvcm1JbnB1dENvbnRleHQpIHtcclxuICAgICAgICByZXR1cm4gY29udGV4dC50eXBlID09PSAncmFkaW8nO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIoY29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFZhbGlkYXRlVmFsdWUoZm9ybURhdGE6IGFueSkge1xyXG4gICAgICAgIHJldHVybiBmb3JtRGF0YVt0aGlzLmdldE5hbWUoZmFsc2UsIHRydWUpXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxGb3JtRWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2NoZW1hID0gdW5kZWZpbmVkOyAvLyBkaXNhYmxlIHNjaGVtYSBjaGVja3MgZm9yIHJhZGlvIGJ1dHRvbnNcclxuICAgICAgICB0aGlzLmdyb3VwUmFkaW9CdXR0b25BcnJheUZpZWxkcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRWYWx1ZShkYXRhVmFsdWU6IHN0cmluZyB8IGJvb2xlYW4sIHNldEJ5U2NyaXB0OiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xyXG4gICAgICAgIC8vIFNldCBuZXcgdmFsdWUgZGlyZWN0bHkgb24gdGhlIERPTS5cclxuICAgICAgICBjb25zdCBlbCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgZWwuY2hlY2tlZCA9IGRhdGFWYWx1ZS50b1N0cmluZygpID09PSBlbC52YWx1ZTtcclxuICAgICAgICAvLyBUcmlnZ2VyIGNoYW5nZS5cclxuICAgICAgICB0aGlzLm9uRmllbGRDaGFuZ2Uoc2V0QnlTY3JpcHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRWYWx1ZShlbCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHN1cGVyLmdldFZhbHVlKGVsKTtcclxuICAgICAgICByZXR1cm4gZWwuY2hlY2tlZCA/IHZhbHVlIDogbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ3JvdXBSYWRpb0J1dHRvbkFycmF5RmllbGRzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkge1xyXG4gICAgICAgICAgICAvLyAjNDQzNjYgLSBHcm91cCByYWRpbyBidXR0b25zIGJ5IHNjaGVtYSBmaWVsZCBuYW1lIGFuZCBhcnJheSBrZXkgZmllbGQuXHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcclxuICAgICAgICAgICAgY29uc3QgYXJyYXlLZXlWYWx1ZSA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLmFycmF5S2V5VmFsdWVBdHRyaWJ1dGUpO1xyXG4gICAgICAgICAgICBpZiAobmFtZSAmJiBhcnJheUtleVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBgJHtuYW1lfVske2FycmF5S2V5VmFsdWV9XWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbkZvcm1JbnB1dC5hZGRJbnB1dFRvTGlicmFyeShSYWRpb0lucHV0KTtcclxuIiwiaW1wb3J0IHsgQ2hlY2tib3hJbnB1dCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0NoZWNrYm94SW5wdXQnO1xyXG5pbXBvcnQgeyBJRm9ybUlucHV0Q29udGV4dCwgRm9ybUlucHV0LCBGb3JtSW5wdXRQcmlvcml0aWVzIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvRm9ybUlucHV0JztcclxuXHJcbmV4cG9ydCBjbGFzcyBSZW1lbWViZXJJbnB1dCBleHRlbmRzIENoZWNrYm94SW5wdXQge1xyXG4gICAgcHVibGljIHN0YXRpYyBGT1JNX1RZUEVfQ1JJVEVSSUEoY29udGV4dDogSUZvcm1JbnB1dENvbnRleHQpIHtcclxuICAgICAgICByZXR1cm4gY29udGV4dC5maWVsZE5hbWUgPT09ICdyZW1lbWJlcic7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogSUZvcm1JbnB1dENvbnRleHQpIHtcclxuICAgICAgICBzdXBlcihjb250ZXh0KTtcclxuXHJcbiAgICAgICAgdGhpcy5fZm9ybS5fcmVtZW1iZXJNZSA9IHRoaXM7XHJcbiAgICB9XHJcbn1cclxuRm9ybUlucHV0LmFkZElucHV0VG9MaWJyYXJ5KFJlbWVtZWJlcklucHV0LCBGb3JtSW5wdXRQcmlvcml0aWVzLkltcG9ydGFudCk7XHJcbiIsImltcG9ydCB7IEZvcm1JbnB1dCwgSUZvcm1JbnB1dENvbnRleHQsIElWYWxpZGF0aW9uQ2FsbGJhY2sgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Gb3JtSW5wdXQnO1xyXG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gJy4uLy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBSZXR5cGVQYXNzd29yZElucHV0IGV4dGVuZHMgRm9ybUlucHV0IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgRk9STV9UWVBFX0NSSVRFUklBKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuZmllbGROYW1lID09PSAncGFzc3dvcmRSZXR5cGUnO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIoY29udGV4dCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2Zvcm0uX3Bhc3N3b3JkUmV0eXBlcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB2YWxpZGF0ZVZhbHVlKGZvcm1EYXRhOiBhbnksIGZpZWxkVmFsdWU6IGFueSwgY2FsbGJhY2s6IElWYWxpZGF0aW9uQ2FsbGJhY2spOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5fZm9ybS5fdmFsaWRhdGVkUGFzc3dvcmQpIHtcclxuICAgICAgICAgICAgdmFyIHBhc3N3b3JkVmFsdWUgPSB0aGlzLl9mb3JtLl92YWxpZGF0ZWRQYXNzd29yZC5nZXRWYWx1ZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBhc3N3b3JkVmFsdWUgIT09ICcnICYmIHBhc3N3b3JkVmFsdWUgIT09IGZpZWxkVmFsdWUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuVkFMSURBVElPTl9FUlJPUixcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3VwZXIudmFsaWRhdGVWYWx1ZShmb3JtRGF0YSwgZmllbGRWYWx1ZSwgY2FsbGJhY2spO1xyXG4gICAgfVxyXG59XHJcbkZvcm1JbnB1dC5hZGRJbnB1dFRvTGlicmFyeShSZXR5cGVQYXNzd29yZElucHV0KTtcclxuIiwiaW1wb3J0IHsgSVNjcmVlblNldFBhcmFtcyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UGx1Z2luJztcclxuaW1wb3J0IHsgRm9yRWFjaCwgRGVlcEZyZWV6ZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xyXG5cclxuZXhwb3J0IGVudW0gQ29uZmxpY3RIYW5kbGluZyB7XHJcbiAgICBmYWlsLFxyXG4gICAgc2F2ZVByb2ZpbGVBbmRGYWlsLFxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgSUxvZ2luTW9kZSB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBnZXRMb2dpblByb3ZpZGVycyhhcGlEYXRhOiBhbnksIHBhcmFtczogYW55LCByZWdUb2tlbjogc3RyaW5nKTogc3RyaW5nO1xyXG4gICAgZmlsdGVyUGFyYW1zKHBhcmFtczogSVNjcmVlblNldFBhcmFtcyk6IElTY3JlZW5TZXRQYXJhbXM7XHJcbn1cclxuaW50ZXJmYWNlIElJZGVudGl0eSB7XHJcbiAgICBhbGxvd3NMb2dpbjogYm9vbGVhbjtcclxuICAgIHByb3ZpZGVyOiBzdHJpbmc7XHJcbn1cclxuZXhwb3J0IHZhciBMb2dpbk1vZGVzID0ge1xyXG4gICAgc3RhbmRhcmQ6IHtcclxuICAgICAgICBuYW1lOiAnc3RhbmRhcmQnLFxyXG4gICAgICAgIGdldExvZ2luUHJvdmlkZXJzOiAoYXBpRGF0YSwgcGFyYW1zLCByZWdUb2tlbik6IHN0cmluZyA9PiB7XHJcbiAgICAgICAgICAgIHZhciBlbmFibGVkUHJvdmlkZXJzOiBzdHJpbmcgPSBwYXJhbXNbJ2VuYWJsZWRQcm92aWRlcnMnXTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZW5hYmxlZFByb3ZpZGVycyAhPT0gJ3N0cmluZycpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGVuYWJsZWRQcm92aWRlcnMudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZpbHRlclBhcmFtczogcGFyYW1zID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlIHBhcmFtcy5yZWdUb2tlbjtcclxuICAgICAgICAgICAgZGVsZXRlIHBhcmFtcy5pbnN0YW5jZUlEO1xyXG4gICAgICAgICAgICBkZWxldGUgcGFyYW1zLmdldEluc3RhbmNlO1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyYW1zO1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgcmVBdXRoOiB7XHJcbiAgICAgICAgbmFtZTogJ3JlQXV0aCcsXHJcbiAgICAgICAgZ2V0TG9naW5Qcm92aWRlcnM6IChhcGlEYXRhLCBwYXJhbXMsIHJlZ1Rva2VuKTogc3RyaW5nID0+IHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRQcm92aWRlcnM6IHN0cmluZyA9IGFwaURhdGEuZ2V0QWNjb3VudEluZm8gJiYgYXBpRGF0YS5nZXRBY2NvdW50SW5mby5zb2NpYWxQcm92aWRlcnM7XHJcbiAgICAgICAgICAgIHZhciBpZGVudGl0aWVzOiBBcnJheTxJSWRlbnRpdHk+ID0gYXBpRGF0YS5nZXRBY2NvdW50SW5mbyAmJiBhcGlEYXRhLmdldEFjY291bnRJbmZvLmlkZW50aXRpZXM7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRQcm92aWRlcnMpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgY3VycmVudFByb3ZpZGVycyA9IGN1cnJlbnRQcm92aWRlcnMudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm92aWRlcnMgPSBjdXJyZW50UHJvdmlkZXJzLnNwbGl0KCcsJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaWRlbnRpdGllcykge1xyXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGlkZW50aXRpZXMgdGhhdCBhcmUgYWxsb3dMb2dpbiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgRm9yRWFjaChpZGVudGl0aWVzLCBpZGVudGl0eSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpZGVudGl0eS5hbGxvd3NMb2dpbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gcHJvdmlkZXJzLmluZGV4T2YoaWRlbnRpdHkucHJvdmlkZXIudG9Mb3dlckNhc2UoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ID4gLTEpIHByb3ZpZGVycy5zcGxpY2UoaWR4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHByb3ZpZGVycy5qb2luKCcsJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBmaWx0ZXJQYXJhbXM6IHBhcmFtcyA9PiB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBwYXJhbXMuaW5zdGFuY2VJRDtcclxuICAgICAgICAgICAgZGVsZXRlIHBhcmFtcy5nZXRJbnN0YW5jZTtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcmFtcztcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIGxpbms6IHtcclxuICAgICAgICBuYW1lOiAnbGluaycsXHJcbiAgICAgICAgZ2V0TG9naW5Qcm92aWRlcnM6IChhcGlEYXRhLCBwYXJhbXMsIHJlZ1Rva2VuKTogc3RyaW5nID0+IHtcclxuICAgICAgICAgICAgaWYgKCFyZWdUb2tlbikgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgYXBpRGF0YS5nZXRDb25mbGljdGluZ0FjY291bnQgJiZcclxuICAgICAgICAgICAgICAgIGFwaURhdGEuZ2V0Q29uZmxpY3RpbmdBY2NvdW50LmNvbmZsaWN0aW5nQWNjb3VudCAmJlxyXG4gICAgICAgICAgICAgICAgYXBpRGF0YS5nZXRDb25mbGljdGluZ0FjY291bnQuY29uZmxpY3RpbmdBY2NvdW50LmxvZ2luUHJvdmlkZXJzICYmXHJcbiAgICAgICAgICAgICAgICBhcGlEYXRhLmdldENvbmZsaWN0aW5nQWNjb3VudC5jb25mbGljdGluZ0FjY291bnQubG9naW5Qcm92aWRlcnMuam9pbignLCcpLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZpbHRlclBhcmFtczogcGFyYW1zID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlIHBhcmFtcy5pbnN0YW5jZUlEO1xyXG4gICAgICAgICAgICBkZWxldGUgcGFyYW1zLmdldEluc3RhbmNlO1xyXG4gICAgICAgICAgICByZXR1cm4gcGFyYW1zO1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG59O1xyXG5EZWVwRnJlZXplKExvZ2luTW9kZXMpO1xyXG4iLCJpbXBvcnQgeyBUZW1wbGF0ZUVsZW1lbnQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1RlbXBsYXRlRWxlbWVudCc7XHJcbmltcG9ydCB7IElTY3JlZW5PcHRpb25zLCBTY3JlZW5PcHRpb25zLCBTY3JlZW5PcHRpb25zX0NPTlNUUyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuT3B0aW9ucyc7XHJcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XHJcbmltcG9ydCB7XHJcbiAgICBJTWFwLFxyXG4gICAgRm9yRWFjaCxcclxuICAgIGdldEVsZW1lbnRzQnlIYXZpbmdBdHRyaWJ1dGUsXHJcbiAgICBnZXRFbGVtZW50c0J5SGF2aW5nQXR0cmlidXRlUHJlZml4LFxyXG4gICAgRm9yRWFjaFByb3AsXHJcbiAgICBTb21lLFxyXG4gICAgZ2V0VW5pdE1lYXN1cmVtZW50VHlwZSxcclxuICAgIFVuaXRNZWFzdXJlbWVudFR5cGUsXHJcbn0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XHJcbmltcG9ydCB7IEVycm9yRGlzcGxheUVsZW1lbnQsIEVycm9yRGlzcGxheUVsZW1lbnRfQ09OU1RTLCBFcnJvclNjb3BlcyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRXJyb3JEaXNwbGF5RWxlbWVudCc7XHJcbmltcG9ydCB7IFByb2ZpbGVQaG90b1dpZGdldCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9Qcm9maWxlUGhvdG9XaWRnZXQnO1xyXG5pbXBvcnQgeyBDYXB0Y2hhV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0NhcHRjaGFXaWRnZXQnO1xyXG5pbXBvcnQgeyBJU2NyZWVuV2lkZ2V0LCBCYXNlU2NyZWVuV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlU2NyZWVuV2lkZ2V0JztcclxuaW1wb3J0IHsgU2NyZWVuU2V0UGx1Z2luIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5TZXRQbHVnaW4nO1xyXG5pbXBvcnQgeyBTY3JlZW5fQ09OU1RTIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5Db25zdHMnO1xyXG5pbXBvcnQgeyBJRm9ybUlucHV0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvRm9ybUlucHV0JztcclxuaW1wb3J0IHsgSUJhc2VGb3JtRXZlbnQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0V2ZW50cy5kJztcclxuaW1wb3J0IHsgSUVycm9ySW5mbyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRXJyb3JzJztcclxuaW1wb3J0IHsgSUVsZW1lbnRTaXplIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0ludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBQbHVnaW5TdHlsZSB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvUGx1Z2luU3R5bGVzJztcclxuaW1wb3J0IHsgR1NFcnJvcnMgfSBmcm9tICcuLi8uLi8uLi9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9ycyc7XHJcbmltcG9ydCB7IElGb3JtQ29udGV4dCB9IGZyb20gXCIuL0lGb3JtQ29udGV4dFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNjcmVlbiBleHRlbmRzIFRlbXBsYXRlRWxlbWVudDxIVE1MRGl2RWxlbWVudD4gaW1wbGVtZW50cyBJU2NyZWVuT3B0aW9ucyB7XHJcbiAgICBwdWJsaWMgYWNjb3VudHNMaW5rZWRTY3JlZW46IHN0cmluZztcclxuICAgIHB1YmxpYyBwZW5kaW5nVGZhUmVnaXN0cmF0aW9uU2NyZWVuOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgcGVuZGluZ1RmYVZlcmlmaWNhdGlvblNjcmVlbjogc3RyaW5nO1xyXG4gICAgcHVibGljIHBlbmRpbmdSZWdpc3RyYXRpb25TY3JlZW46IHN0cmluZztcclxuICAgIHB1YmxpYyBleGlzdGluZ0xvZ2luSWRlbnRpZmllclNjcmVlbjogc3RyaW5nO1xyXG4gICAgcHVibGljIHBlbmRpbmdWZXJpZmljYXRpb25TY3JlZW46IHN0cmluZztcclxuICAgIHB1YmxpYyBtaXNzaW5nTG9naW5JZFNjcmVlbjogc3RyaW5nO1xyXG4gICAgcHVibGljIHBlbmRpbmdQYXNzd29yZENoYW5nZVNjcmVlbjogc3RyaW5nO1xyXG4gICAgcHVibGljIHBlbmRpbmdSZUF1dGhlbnRpY2F0aW9uU2NyZWVuOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgcGVuZGluZ0NvZGVWZXJpZmljYXRpb25TY3JlZW46IHN0cmluZztcclxuXHJcbiAgICBwdWJsaWMgX2hhc1RmYTogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgX2Zvcm1zOiBCYXNlRm9ybVtdO1xyXG4gICAgcHVibGljIF9lcnJvckRpc3BsYXlFbGVtZW50czogSU1hcDxBcnJheTxFcnJvckRpc3BsYXlFbGVtZW50Pj4gPSB7fTtcclxuICAgIHB1YmxpYyBfcHJvZmlsZVBob3RvcyA9IG5ldyBBcnJheTxQcm9maWxlUGhvdG9XaWRnZXQ+KCk7XHJcbiAgICBwdWJsaWMgX2NhcHRjaGFzID0gbmV3IEFycmF5PENhcHRjaGFXaWRnZXQ+KCk7XHJcbiAgICBwcml2YXRlIF93aWRnZXRzOiBJU2NyZWVuV2lkZ2V0W107XHJcbiAgICBwcml2YXRlIF9vdGhlcnMgPSBuZXcgQXJyYXk8VGVtcGxhdGVFbGVtZW50PEhUTUxFbGVtZW50Pj4oKTtcclxuXHJcbiAgICBwdWJsaWMgd2lkdGg6IHN0cmluZztcclxuICAgIHB1YmxpYyBoZWlnaHQ6IHN0cmluZztcclxuICAgIHB1YmxpYyBjYXB0aW9uOiBzdHJpbmc7XHJcblxyXG4gICAgLy8gT3ZlcnJpZGFibGUgZGVwZW5kZW5jaWVzIC8vL1xyXG4gICAgcHVibGljIHN0YXRpYyB1dGlscyA9IHtcclxuICAgICAgICBGb3JFYWNoLFxyXG4gICAgICAgIGdldEVsZW1lbnRzQnlIYXZpbmdBdHRyaWJ1dGUsXHJcbiAgICAgICAgZ2V0RWxlbWVudHNCeUhhdmluZ0F0dHJpYnV0ZVByZWZpeCxcclxuICAgICAgICBGb3JFYWNoUHJvcCxcclxuICAgICAgICBTb21lLFxyXG4gICAgICAgIGdldFVuaXRNZWFzdXJlbWVudFR5cGUsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBfc2NyZWVuU2V0OiBTY3JlZW5TZXRQbHVnaW4sIHB1YmxpYyB0ZW1wbGF0ZUVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIodGVtcGxhdGVFbGVtZW50LCBfc2NyZWVuU2V0IGFzIGFueSk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5JRCkgdGhpcy53YXJuKCdzY3JlZW4gaXMgbWlzc2luZyBhbiBpZCcpO1xyXG5cclxuICAgICAgICBpZiAoL1teLV8wLTlhLXpBLVpdLy50ZXN0KHRoaXMuSUQpKSB0aGlzLndhcm4oJ3NjcmVlbiBpZCBjb250YWlucyBzcGVjaWFsIGNoYXJhY3RlcnMgdGhhdCBtYXkgY29udGFpbiBzcGVjaWFsIG1lYW5pbmcnKTtcclxuXHJcbiAgICAgICAgU2NyZWVuT3B0aW9ucy5jYWxsKHRoaXMsIHRlbXBsYXRlRWxlbWVudCwgX3NjcmVlblNldC5zY3JlZW5PcHRpb25zKTtcclxuXHJcbiAgICAgICAgdGhpcy5wcmVwYXJlQm91bmRlZFRvRm9ybUVsZW1lbnRzKCk7XHJcbiAgICAgICAgdGhpcy5fZm9ybXMgPSBCYXNlRm9ybS5yZWdpc3RlckZvcm1zKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX3dpZGdldHMgPSBCYXNlU2NyZWVuV2lkZ2V0LnJlZ2lzdGVyV2lkZ2V0cyh0aGlzKTtcclxuXHJcbiAgICAgICAgLy8gaGFuZGxpbmcgb2Ygbm9ybWFsIERPTSBlbGVtZW50cyB0aGF0IHVzZSBnaWd5YSBsb2dpY1xyXG4gICAgICAgIHRoaXMucHJlcGFyZU90aGVyRWxlbWVudHMoKTtcclxuICAgICAgICB0aGlzLnNldENzc0NsYXNzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwcmVwYXJlQm91bmRlZFRvRm9ybUVsZW1lbnRzKCkge1xyXG4gICAgICAgIHZhciBib3VuZGVkRWxlbWVudHMgPSBuZXcgQXJyYXk8SFRNTEVsZW1lbnQ+KCk7XHJcbiAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2goRXJyb3JEaXNwbGF5RWxlbWVudF9DT05TVFMuZ2lneWFDbGFzc2VzLCBnaWd5YUNsYXNzID0+IHtcclxuICAgICAgICAgICAgYm91bmRlZEVsZW1lbnRzID0gYm91bmRlZEVsZW1lbnRzLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLnRlbXBsYXRlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtnaWd5YUNsYXNzfWApKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKGJvdW5kZWRFbGVtZW50cywgZWwgPT4ge1xyXG4gICAgICAgICAgICB2YXIgYm91bmRlZEVsZW1lbnQgPSBuZXcgRXJyb3JEaXNwbGF5RWxlbWVudChlbCwgdGhpcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYm91bmRlZExpc3QgPSB0aGlzLl9lcnJvckRpc3BsYXlFbGVtZW50c1tib3VuZGVkRWxlbWVudC5ib3VuZGVkVG9dO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFib3VuZGVkTGlzdCkgYm91bmRlZExpc3QgPSB0aGlzLl9lcnJvckRpc3BsYXlFbGVtZW50c1tib3VuZGVkRWxlbWVudC5ib3VuZGVkVG9dID0gW107XHJcblxyXG4gICAgICAgICAgICBib3VuZGVkTGlzdC5wdXNoKGJvdW5kZWRFbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkU3BlY2lmaWNFcnJvckJpbmRzKGJvdW5kZWRFbGVtZW50czogQXJyYXk8SFRNTEVsZW1lbnQ+ID0gW10pOiBBcnJheTxFcnJvckRpc3BsYXlFbGVtZW50PiB7XHJcbiAgICAgICAgbGV0IGJvdW5kZWRFcnJvckVsZW1lbnRzOiBBcnJheTxFcnJvckRpc3BsYXlFbGVtZW50PiA9IFtdO1xyXG4gICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKGJvdW5kZWRFbGVtZW50cywgZWwgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBib3VuZGVkRWxlbWVudCA9IG5ldyBFcnJvckRpc3BsYXlFbGVtZW50KGVsLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5fZXJyb3JEaXNwbGF5RWxlbWVudHNbYm91bmRlZEVsZW1lbnQuYm91bmRlZFRvXSA9ICh0aGlzLl9lcnJvckRpc3BsYXlFbGVtZW50c1tib3VuZGVkRWxlbWVudC5ib3VuZGVkVG9dIHx8IFtdKS5jb25jYXQoW2JvdW5kZWRFbGVtZW50XSk7XHJcbiAgICAgICAgICAgIGJvdW5kZWRFcnJvckVsZW1lbnRzLnB1c2goYm91bmRlZEVsZW1lbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJvdW5kZWRFcnJvckVsZW1lbnRzLmZvckVhY2goZWwgPT4gZWwubGlua0luc3RhbmNlRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCkpO1xyXG4gICAgICAgIHJldHVybiBib3VuZGVkRXJyb3JFbGVtZW50cztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlU3BlY2lmaWNFcnJvckJpbmRzKGJvdW5kZWRFcnJvcnM6IEFycmF5PEVycm9yRGlzcGxheUVsZW1lbnQ+ID0gW10pIHtcclxuICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaChib3VuZGVkRXJyb3JzLCBlcnJvckRpc3BsYXkgPT4ge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fZXJyb3JEaXNwbGF5RWxlbWVudHNbZXJyb3JEaXNwbGF5LmJvdW5kZWRUb107XHJcbiAgICAgICAgICAgIGVycm9yRGlzcGxheS51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkRHluYW1pY1dpZGdldHMocm9vdEVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IG5ld1dpZGdldHMgPSBCYXNlU2NyZWVuV2lkZ2V0LnJlZ2lzdGVyRHluYW1pY1dpZGdldHModGhpcywgcm9vdEVsKTtcclxuICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaChuZXdXaWRnZXRzLCB3ID0+IHcubGlua0luc3RhbmNlRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCkpO1xyXG4gICAgICAgIHRoaXMuX3dpZGdldHMgPSB0aGlzLl93aWRnZXRzLmNvbmNhdChuZXdXaWRnZXRzKTtcclxuICAgICAgICByZXR1cm4gbmV3V2lkZ2V0cztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlRHluYW1pY1dpZGdldHMod2lkZ2V0c1RvUmVtb3ZlOiBBcnJheTxJU2NyZWVuV2lkZ2V0Pikge1xyXG4gICAgICAgIGlmICghdGhpcy5fd2lkZ2V0cyB8fCAhdGhpcy5fd2lkZ2V0cy5sZW5ndGgpIHJldHVybjtcclxuICAgICAgICB0aGlzLl93aWRnZXRzID0gdGhpcy5fd2lkZ2V0cy5maWx0ZXIodyA9PiB3aWRnZXRzVG9SZW1vdmUuaW5kZXhPZih3KSA8IDApO1xyXG4gICAgICAgIHdpZGdldHNUb1JlbW92ZS5mb3JFYWNoKHdpZGdldCA9PiB7XHJcbiAgICAgICAgICAgIHdpZGdldC51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcclxuICAgICAgICAgICAgd2lkZ2V0LnVubGlua1RlbXBsYXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwcmVwYXJlT3RoZXJFbGVtZW50cygpIHtcclxuICAgICAgICAvLyBUaGVzZSBlbGVtZW50cyBhcmUgZXZhbHVhdGVkIGJlY2F1c2UgdGhleSBoYXZlIGFuIElELlxyXG4gICAgICAgIGNvbnN0IG90aGVyRWxlbWVudHMgPSBTY3JlZW4udXRpbHMuZ2V0RWxlbWVudHNCeUhhdmluZ0F0dHJpYnV0ZSh0aGlzLnRlbXBsYXRlRWxlbWVudCwgJyonLCAnaWQnKTtcclxuXHJcbiAgICAgICAgLy8gVGhlc2UgZWxlbWVudHMgYXJlIGV2YWx1YXRlZCBiZWNhdXNlIHRoZXkgaGF2ZSBjb25kaXRpb25hbCBhdHRyaWJ1dGVzLlxyXG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZVByZWZpeGVzID0gW1NjcmVlbl9DT05TVFMuY29uZGl0aW9uYWxBdHRyaWJ1dGVQcmVmaXgsIFNjcmVlbl9DT05TVFMuZXhwcmVzc2lvbkF0dHJpYnV0ZVByZWZpeF07XHJcbiAgICAgICAgY29uc3QgY29uZGl0aW9uYWxFbGVtZW50cyA9IFNjcmVlbi51dGlscy5nZXRFbGVtZW50c0J5SGF2aW5nQXR0cmlidXRlUHJlZml4KHRoaXMudGVtcGxhdGVFbGVtZW50LCBhdHRyaWJ1dGVQcmVmaXhlcywgWydwYXJhbSddKTtcclxuXHJcbiAgICAgICAgLy8gQ29tYmluZSBhbmQgZGUtZHVwIGFycmF5cy5cclxuICAgICAgICBmb3IgKGNvbnN0IGNvbmRpdGlvbmFsRWxlbWVudCBvZiBjb25kaXRpb25hbEVsZW1lbnRzKSB7XHJcbiAgICAgICAgICAgIGlmIChnaWd5YS51dGlscy5hcnJheS5pbmRleE9mKG90aGVyRWxlbWVudHMsIGNvbmRpdGlvbmFsRWxlbWVudCkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBvdGhlckVsZW1lbnRzLnB1c2goY29uZGl0aW9uYWxFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWRkIFRlbXBsYXRlRWxlbWVudCB0byBvdGhlciBlbGVtZW50cy5cclxuICAgICAgICBmb3IgKGNvbnN0IGVsIG9mIG90aGVyRWxlbWVudHMpIHtcclxuICAgICAgICAgICAgaWYgKCFUZW1wbGF0ZUVsZW1lbnQuaXNUZW1wbGF0ZUluc3RhbmNlKGVsKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3RoZXJzLnB1c2gobmV3IFRlbXBsYXRlRWxlbWVudChlbCwgdGhpcykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvdmVycmlkZVRlbXBsYXRlQ2FwdGlvbihjYXB0aW9uOiBzdHJpbmcpIHtcclxuICAgICAgICAvLyBvdmVycmlkZSBjYXB0aW9uIGF0dHJpYnV0ZXMgYW5kIHJlbW92ZSB0aGUgY2FwdGlvbiBleHByZXNzaW9uLCBOT1RJQ0U6IHRoaXMgbWVhbiB0aGF0IGl0IHdpbGwgbm8gbG9uZ2VyIGJlIGV2YWx1YXRlZFxyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShgJHtTY3JlZW5fQ09OU1RTLmV4cHJlc3Npb25BdHRyaWJ1dGVQcmVmaXh9OiR7U2NyZWVuT3B0aW9uc19DT05TVFMuY2FwdGlvbn1gKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5zZXRBdHRyaWJ1dGUoU2NyZWVuT3B0aW9uc19DT05TVFMuY2FwdGlvbiwgY2FwdGlvbik7XHJcbiAgICAgICAgdGhpcy5jYXB0aW9uID0gY2FwdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGF2ZUZvcm1zKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3Jtcy5sZW5ndGggfHwgdGhpcy5faGFzVGZhO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRGb3JtQnlFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogQmFzZUZvcm0gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGZvciAoY29uc3QgZm9ybSBvZiB0aGlzLl9mb3Jtcykge1xyXG4gICAgICAgICAgICBpZiAoZm9ybS5pbnN0YW5jZUVsZW1lbnQuY29udGFpbnMoZWxlbWVudCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmb3JtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRDc3NDbGFzcygpIHtcclxuICAgICAgICB0aGlzLmNzc0NsYXNzID0gdGhpcy50ZW1wbGF0ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKFNjcmVlbl9DT05TVFMuY3NzQ2xhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1bmxpbmtUZW1wbGF0ZSgpIHtcclxuICAgICAgICB2YXIgdW5saW5rSXRlbSA9IGkgPT4gaS51bmxpbmtUZW1wbGF0ZSgpO1xyXG5cclxuICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaCh0aGlzLl9mb3JtcywgdW5saW5rSXRlbSk7XHJcblxyXG4gICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoUHJvcCh0aGlzLl9lcnJvckRpc3BsYXlFbGVtZW50cywgYm91bmRlZEVsZW1lbnRzID0+IHtcclxuICAgICAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2goYm91bmRlZEVsZW1lbnRzLCB1bmxpbmtJdGVtKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2godGhpcy5fb3RoZXJzLCB1bmxpbmtJdGVtKTtcclxuXHJcbiAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2godGhpcy5fd2lkZ2V0cywgdW5saW5rSXRlbSk7XHJcblxyXG4gICAgICAgIHN1cGVyLnVubGlua1RlbXBsYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rSXRlbSA9IGkgPT4gaS5saW5rSW5zdGFuY2VFbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKHRoaXMuX3dpZGdldHMsIGxpbmtJdGVtKTtcclxuXHJcbiAgICAgICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKHRoaXMuX290aGVycywgbGlua0l0ZW0pO1xyXG5cclxuICAgICAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2hQcm9wKHRoaXMuX2Vycm9yRGlzcGxheUVsZW1lbnRzLCBib3VuZGVkRWxlbWVudHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2goYm91bmRlZEVsZW1lbnRzLCBsaW5rSXRlbSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2godGhpcy5fZm9ybXMsIGxpbmtJdGVtKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZ2lneWEubG9jYWxJbmZvLmlzSUU5IHx8IGdpZ3lhLmxvY2FsSW5mby5pc0lFOCkge1xyXG4gICAgICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaCh0aGlzLl9mb3JtcywgKGZvcm06IEJhc2VGb3JtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3JtLmZpbHRlcnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3V0V2lkZ2V0c1RvU2VuZDogZGF0YVRvRmlsdGVyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFUb0ZpbHRlci5wcm9maWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZGF0YVRvRmlsdGVyLnByb2ZpbGUuX3Byb2ZpbGVQaG90bztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVRvRmlsdGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwbGFjZUNvbnRlbnRJbkVsZW1lbnQoaW5zdGFuY2VFbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKHRoaXMudGVtcGxhdGVFbGVtZW50LmF0dHJpYnV0ZXMsIGEgPT4gaW5zdGFuY2VFbGVtZW50LnNldEF0dHJpYnV0ZShhLm5hbWUsIGEudmFsdWUpKTtcclxuICAgICAgICBpbnN0YW5jZUVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy50ZW1wbGF0ZUVsZW1lbnQuaW5uZXJIVE1MO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1bmxpbmtJbnN0YW5jZUVsZW1lbnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciB1bmxpbmtJdGVtID0gaSA9PiBpLnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xyXG5cclxuICAgICAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2godGhpcy5fZm9ybXMsIHVubGlua0l0ZW0pO1xyXG5cclxuICAgICAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2hQcm9wKHRoaXMuX2Vycm9yRGlzcGxheUVsZW1lbnRzLCBib3VuZGVkRWxlbWVudHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2goYm91bmRlZEVsZW1lbnRzLCB1bmxpbmtJdGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaCh0aGlzLl9vdGhlcnMsIHVubGlua0l0ZW0pO1xyXG5cclxuICAgICAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2godGhpcy5fd2lkZ2V0cywgdW5saW5rSXRlbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RXJyb3JNZXNzYWdlKGVycm9yQ29kZTogR1NFcnJvcnMsIGlzQm91bmRUb0ZpZWxkOiBib29sZWFuLCBmaWVsZDogSUZvcm1JbnB1dCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjcmVlblNldC5nZXRFcnJvck1lc3NhZ2UoZXJyb3JDb2RlLCBpc0JvdW5kVG9GaWVsZCwgZmllbGQuZmllbGROYW1lLCBmaWVsZC5kaXNwbGF5TmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRpc3BhdGNoRXZlbnQoZXZlbnROYW1lOiBzdHJpbmcsIGV2ZW50OiBJQmFzZUZvcm1FdmVudCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zY3JlZW5TZXQuZGlzcGF0Y2hTY3JlZW5TZXRFdmVudChldmVudE5hbWUsIGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUT0RPOiBtYWtlIGFzeW5jIHN0YWNrXHJcbiAgICBwdWJsaWMgcGVyZm9ybUF1dG9Ta2lwKGZvcm1Db250ZXh0OiBJRm9ybUNvbnRleHQpOiBQcm9taXNlPEJhc2VGb3JtPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9mb3Jtcy5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKG51bGwpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGZvcm1zTGVmdCA9IHRoaXMuX2Zvcm1zLmxlbmd0aDtcclxuICAgICAgICAgICAgbGV0IHNjcmVlbkNhblNraXAgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSAoZm9ybUNhblNraXA6IGJvb2xlYW4pID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWZvcm1DYW5Ta2lwKVxyXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlbkNhblNraXAgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoLS1mb3Jtc0xlZnQgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHNjcmVlbkNhblNraXAgPyB0aGlzLl9mb3Jtc1swXSA6IG51bGwpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2godGhpcy5fZm9ybXMsIGYgPT5cclxuICAgICAgICAgICAgICAgIGYuY2hlY2tBdXRvU2tpcChmb3JtQ29udGV4dCwgY2FsbGJhY2spLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBoaWRlRXJyb3JzKCl7XHJcbiAgICAgICAgdGhpcy5fZm9ybXMubWFwKChmOkJhc2VGb3JtKT0+XHJcbiAgICAgICAgICAgICh0aGlzLl9lcnJvckRpc3BsYXlFbGVtZW50c1tmLmJpbmRJRF0gfHwgW10pLmZvckVhY2goZWxCb3VuZCA9PlxyXG4gICAgICAgICAgICAgICAgZWxCb3VuZC5oaWRlRXJyb3IoKSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93RXJyb3JzKGZvcm06IEJhc2VGb3JtLCBhckVycm9yczogSUVycm9ySW5mb1tdLCBpc1NlcnZlckVycm9yOiBib29sZWFuKSB7XHJcbiAgICAgICAgdmFyIGFyQm91bmRFbGVtZW50cyA9IHRoaXMuX2Vycm9yRGlzcGxheUVsZW1lbnRzW2Zvcm0uYmluZElEXSB8fCBbXTtcclxuICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaChhckJvdW5kRWxlbWVudHMsIGVsQm91bmQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWlzU2VydmVyRXJyb3IgJiYgZWxCb3VuZC5zY29wZSAhPT0gRXJyb3JTY29wZXMuZmlyc3RFcnJvciAmJiBlbEJvdW5kLnNjb3BlICE9PSBFcnJvclNjb3Blcy5hbnlFcnJvciAmJiBlbEJvdW5kLnNjb3BlICE9PSBFcnJvclNjb3Blcy5hbGxFcnJvcnMpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB2YXIgZmlyc3RFcnJvcjogR1NFcnJvcnM7XHJcbiAgICAgICAgICAgIHZhciBhckVycm9yTWVzc2FnZXMgPSBuZXcgQXJyYXk8c3RyaW5nPigpO1xyXG4gICAgICAgICAgICB2YXIgc2hvdWxkRGlzcGxheSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaChhckVycm9ycywgZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsQm91bmQuaXNFcnJvckNvZGVBbGxvd2VkKGVycm9yLmVycm9yQ29kZSwgZXJyb3IuZXJyb3JGbGFncykpIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvci5oYW5kbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gZXJyb3IuY3VzdG9tTWVzc2FnZSB8fCBlcnJvci5lcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdEVycm9yKSBmaXJzdEVycm9yID0gZXJyb3IuZXJyb3JDb2RlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSBmb3JtLmdldEZpZWxkKGVycm9yLmZpZWxkTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZCkgZXJyb3JNZXNzYWdlID0gdGhpcy5fc2NyZWVuU2V0LmdldEVycm9yTWVzc2FnZShlcnJvci5lcnJvckNvZGUsIGZhbHNlLCBmaWVsZC5maWVsZE5hbWUsIGZpZWxkLmRpc3BsYXlOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkRGlzcGxheSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyRXJyb3JNZXNzYWdlcy5wdXNoKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzaG91bGREaXNwbGF5KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3JNc2c6IHN0cmluZztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZWxCb3VuZC5zY29wZSA9PT0gRXJyb3JTY29wZXMuZmlyc3RFcnJvciB8fCBpc1NlcnZlckVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2cgPSBhckVycm9yTWVzc2FnZXNbMF07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTXNnID0gJzx1bD48bGk+JyArIGFyRXJyb3JNZXNzYWdlcy5qb2luKCc8L2xpPjxsaT4nKSArICc8L2xpPjwvdWw+JztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlbEJvdW5kLnNob3dFcnJvcih7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBmaXJzdEVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3JNc2csXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsQm91bmQuaGlkZUVycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKFNjcmVlbi51dGlscy5Tb21lKGFyRXJyb3JzLCBlcnJvciA9PiAhZXJyb3IuaGFuZGxlZCkpIHtcclxuICAgICAgICAgICAgZm9ybS53YXJuKCdNaXNzaW5nIGVycm9yLW1zZyBvciBlcnJvci1kaXNwbGF5IGZvciBmb3JtJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkaW1TY3JlZW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjcmVlblNldC5kaW1TY3JlZW5TZXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdW5kaW1TY3JlZW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjcmVlblNldC51bmRpbVNjcmVlblNldCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRQcm9maWxlUGhvdG8odGh1bWJuYWlsVXJsOiBzdHJpbmcpIHtcclxuICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaCh0aGlzLl9wcm9maWxlUGhvdG9zLCBwUGhvdG8gPT4gcFBob3RvLnNldFRodW1ibmFpbFVybCh0aHVtYm5haWxVcmwpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RXh0cmFQcm9maWxlRmllbGRzKG1pc3NpbmdPbmx5OiBib29sZWFuKSB7XHJcbiAgICAgICAgdmFyIG1pc3NpbmdGaWVsZHMgPSBuZXcgQXJyYXk8c3RyaW5nPigpO1xyXG5cclxuICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaCh0aGlzLl9mb3JtcywgZiA9PiAobWlzc2luZ0ZpZWxkcyA9IG1pc3NpbmdGaWVsZHMuY29uY2F0KGYuZ2V0RXh0cmFQcm9maWxlRmllbGRzKG1pc3NpbmdPbmx5KSkpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1pc3NpbmdGaWVsZHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE5lZWRlZERhdGEoZm9ybUNvbnRleHQ6IElGb3JtQ29udGV4dCkge1xyXG4gICAgICAgIHZhciBuZWVkZWREYXRhOiBJTWFwPGFueT4gPSB7fTtcclxuXHJcbiAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2godGhpcy5fZm9ybXMsIGYgPT4ge1xyXG4gICAgICAgICAgICB2YXIgZm9ybU5lZWRlZERhdGEgPSBmLmdldE5lZWRlZERhdGEoZm9ybUNvbnRleHQpO1xyXG5cclxuICAgICAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2hQcm9wKGZvcm1OZWVkZWREYXRhLCAodmFsLCBuYW1lKSA9PiAobmVlZGVkRGF0YVtuYW1lXSA9IHZhbCkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gbmVlZGVkRGF0YTtcclxuICAgIH1cclxuXHJcbiAgICAvLy8gT3ZlcnJpZGUgVGVtcGxhdGVFbGVtZW50J3MgaGFzQ29uZGl0aW9uYWxBdHRyaWJ1dGVzXHJcbiAgICBwdWJsaWMgaGFzQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChzdXBlci5oYXNDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSkgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgIHZhciBjaGlsZHJlbjogVGVtcGxhdGVFbGVtZW50PEhUTUxFbGVtZW50PltdID0gW10uY29uY2F0KHRoaXMuX2Zvcm1zLCB0aGlzLl93aWRnZXRzLCB0aGlzLl9jYXB0Y2hhcywgdGhpcy5fcHJvZmlsZVBob3RvcywgdGhpcy5fb3RoZXJzKTtcclxuXHJcbiAgICAgICAgZ2lneWEudXRpbHMuYXJyYXkuZm9yRWFjaFByb3AodGhpcy5fZXJyb3JEaXNwbGF5RWxlbWVudHMsIHRlbXBsYXRlRWxlbWVudHMgPT4gY2hpbGRyZW4uY29uY2F0KHRlbXBsYXRlRWxlbWVudHMpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLmFycmF5LnNvbWUoY2hpbGRyZW4sIGNoaWxkID0+IGNoaWxkLmhhc0NvbmRpdGlvbmFsQXR0cmlidXRlcygpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhc0NvbmRpdGlvbmFsQXR0cmlidXRlcygpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdpZ3lhLmxvZ2dlci5ncm91cChgc2NyZWVuIGNvbmRpdGlvbmFsIGF0dHJpYnV0ZXMgZXZhbHVhdGlvbmApLmVuZFdoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgbGFzdERhdGFXaWR0aEF0dHJpYnV0ZVZhbHVlID0gdGhpcy53aWR0aDtcclxuICAgICAgICAgICAgdmFyIGxhc3REYXRhSGVpZ2h0QXR0cmlidXRlVmFsdWUgPSB0aGlzLmhlaWdodDtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XHJcbiAgICAgICAgICAgIFNjcmVlbk9wdGlvbnMuY2FsbCh0aGlzLCB0aGlzLmluc3RhbmNlRWxlbWVudCwgdGhpcy5fc2NyZWVuU2V0LnNjcmVlbk9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgLy8gQXNzaWduIHRoZSAnZGF0YS0nIGF0dHJpYnV0ZXMgb2YgdGhlIHNjcmVlbi5cclxuICAgICAgICAgICAgLy8gTm90ZTogdGhlIHNjcmVlbidzICdkYXRhLScgYXR0cmlidXRlcyB3aWxsIG92ZXJyaWRlIENTUyBwcm9wZXJ0aWVzIGFuZCB3aWxsIHRha2UgcHJlY2VkZW5jZVxyXG4gICAgICAgICAgICAvLyBpbiBjYXNlIHRoZSBjdXJyZW50IGRhdGEtd2lkdGggaXMgJ2F1dG8nLCBubyB3aWR0aCB2YWx1ZSB3aWxsIGJlIHNldCB0byB0aGUgJ1NjcmVlbicgZWxlbWVudC5cclxuICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRhV2lkdGhBdHRyaWJ1dGVWYWx1ZSA9IHRoaXMud2lkdGg7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50RGF0YUhlaWdodEF0dHJpYnV0ZVZhbHVlID0gdGhpcy5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGxpbmUgaXMgZm9yIGEgc2NlbmFyaW8gdGhhdCBjb25kaXRpb25hbCBhdHRyaWJ1dGVzIHdlcmUgZXZhbHVhdGVkIG9uIHRoZSBzY3JlZW4gbGV2ZWxcclxuICAgICAgICAgICAgLy8gYW5kIHRoZXJlJ3MgYSBjaGFuY2UgdGhhdCB0aGUgbW9kYWwgYWxzbyBuZWVkcyB0byBiZSByZXNpemVkIGFjY29yZGluZ2x5XHJcbiAgICAgICAgICAgIHZhciBzY3JlZW5EaW1lbnNpb25zOiBJRWxlbWVudFNpemUgPSB0aGlzLmdldFNjcmVlbkRpbWVuc2lvbnNXaXRoVW5pdFR5cGUoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChsYXN0RGF0YVdpZHRoQXR0cmlidXRlVmFsdWUgIT0gY3VycmVudERhdGFXaWR0aEF0dHJpYnV0ZVZhbHVlIHx8IGxhc3REYXRhSGVpZ2h0QXR0cmlidXRlVmFsdWUgIT0gY3VycmVudERhdGFIZWlnaHRBdHRyaWJ1dGVWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LnJlc2l6ZU1vZGFsKHsgd2lkdGg6IHNjcmVlbkRpbWVuc2lvbnMud2lkdGgsIGhlaWdodDogc2NyZWVuRGltZW5zaW9ucy5oZWlnaHQgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBjYXB0aW9uV2lkdGggPSB0aGlzLmluc3RhbmNlRWxlbWVudCA/IHRoaXMuaW5zdGFuY2VFbGVtZW50Lm9mZnNldFdpZHRoICsgJ3B4JyA6ICcnO1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuc2V0Q2FwdGlvbih0aGlzLmNhcHRpb24sIGNhcHRpb25XaWR0aCk7XHJcblxyXG4gICAgICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaCh0aGlzLl9mb3JtcywgZm9ybSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3JtLmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2hQcm9wKHRoaXMuX2Vycm9yRGlzcGxheUVsZW1lbnRzLCBib3VuZGVkRWxlbWVudHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2goYm91bmRlZEVsZW1lbnRzLCBib3VuZGVkRWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm91bmRlZEVsZW1lbnQuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKHRoaXMuX290aGVycywgb3RoID0+IHtcclxuICAgICAgICAgICAgICAgIG90aC5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKHRoaXMuX3dpZGdldHMsIHdpZGdldCA9PiB7XHJcbiAgICAgICAgICAgICAgICB3aWRnZXQuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCkge1xyXG4gICAgICAgIGdpZ3lhLmxvZ2dlci5kZWJ1ZyhgcmVzZXR0aW5nIGNvbmRpdGlvbmFsIHZhbHVlc2ApO1xyXG5cclxuICAgICAgICBzdXBlci5yZXNldExhc3RDb25kaXRpb25hbFZhbHVlcygpO1xyXG5cclxuICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaCh0aGlzLl9mb3JtcywgZm9ybSA9PiB7XHJcbiAgICAgICAgICAgIGZvcm0ucmVzZXRMYXN0Q29uZGl0aW9uYWxWYWx1ZXMoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2hQcm9wKHRoaXMuX2Vycm9yRGlzcGxheUVsZW1lbnRzLCBib3VuZGVkRWxlbWVudHMgPT4ge1xyXG4gICAgICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaChib3VuZGVkRWxlbWVudHMsIGJvdW5kZWRFbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIGJvdW5kZWRFbGVtZW50LnJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKHRoaXMuX290aGVycywgb3RoID0+IHtcclxuICAgICAgICAgICAgb3RoLnJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2godGhpcy5fd2lkZ2V0cywgd2lkZ2V0ID0+IHtcclxuICAgICAgICAgICAgd2lkZ2V0LnJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRTY3JlZW5EaW1lbnNpb25zV2l0aFVuaXRUeXBlKCk6IElFbGVtZW50U2l6ZSB7XHJcbiAgICAgICAgdmFyIGlzTGVnYWN5ID0gdGhpcy5fc2NyZWVuU2V0LmdldFBsdWdpblN0eWxlKCkgPT0gUGx1Z2luU3R5bGUubGVnYWN5O1xyXG5cclxuICAgICAgICB2YXIgd2lkdGhWYWw6IHN0cmluZztcclxuICAgICAgICBpZiAodGhpcy53aWR0aCkge1xyXG4gICAgICAgICAgICB2YXIgd2lkdGhVbml0czogc3RyaW5nO1xyXG4gICAgICAgICAgICB3aWR0aFVuaXRzID0gU2NyZWVuLnV0aWxzLmdldFVuaXRNZWFzdXJlbWVudFR5cGUodGhpcy53aWR0aCk7XHJcbiAgICAgICAgICAgIGlmICh3aWR0aFVuaXRzICE9PSBVbml0TWVhc3VyZW1lbnRUeXBlLmF1dG8gJiYgKCFpc0xlZ2FjeSB8fCB3aWR0aFVuaXRzICE9IFVuaXRNZWFzdXJlbWVudFR5cGUucGVyY2VudGFnZSkpIHtcclxuICAgICAgICAgICAgICAgIHdpZHRoVmFsID0gcGFyc2VGbG9hdCh0aGlzLndpZHRoKSArIHdpZHRoVW5pdHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBoZWlnaHRWYWw6IHN0cmluZztcclxuICAgICAgICBpZiAodGhpcy5oZWlnaHQpIHtcclxuICAgICAgICAgICAgdmFyIGhlaWdodFVuaXRzOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIGhlaWdodFVuaXRzID0gU2NyZWVuLnV0aWxzLmdldFVuaXRNZWFzdXJlbWVudFR5cGUodGhpcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICBpZiAoaGVpZ2h0VW5pdHMgIT09IFVuaXRNZWFzdXJlbWVudFR5cGUuYXV0byAmJiAoIWlzTGVnYWN5IHx8IGhlaWdodFVuaXRzICE9IFVuaXRNZWFzdXJlbWVudFR5cGUucGVyY2VudGFnZSkpIHtcclxuICAgICAgICAgICAgICAgIGhlaWdodFZhbCA9IHBhcnNlRmxvYXQodGhpcy5oZWlnaHQpICsgaGVpZ2h0VW5pdHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgd2lkdGg6IHdpZHRoVmFsLCBoZWlnaHQ6IGhlaWdodFZhbCB9O1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCB2YXIgU2NyZWVuX0NPTlNUUyA9IHtcclxuICAgIGdpZ3lhQ2xhc3M6ICdnaWd5YS1zY3JlZW4nLFxyXG4gICAgY29uZGl0aW9uYWxBdHRyaWJ1dGVQcmVmaXg6ICdnaWd5YS1jb25kaXRpb25hbCcsXHJcbiAgICBleHByZXNzaW9uQXR0cmlidXRlUHJlZml4OiAnZ2lneWEtZXhwcmVzc2lvbicsXHJcbiAgICBjc3NDbGFzczogJ2RhdGEtY3NzLWNsYXNzJyxcclxufTtcclxuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU2NyZWVuT3B0aW9ucyB7XHJcbiAgICBhY2NvdW50c0xpbmtlZFNjcmVlbj86IHN0cmluZztcclxuICAgIHBlbmRpbmdSZWdpc3RyYXRpb25TY3JlZW4/OiBzdHJpbmc7XHJcbiAgICBleGlzdGluZ0xvZ2luSWRlbnRpZmllclNjcmVlbj86IHN0cmluZztcclxuICAgIHBlbmRpbmdWZXJpZmljYXRpb25TY3JlZW4/OiBzdHJpbmc7XHJcbiAgICBwZW5kaW5nQ29kZVZlcmlmaWNhdGlvblNjcmVlbj86IHN0cmluZztcclxuICAgIG1pc3NpbmdMb2dpbklkU2NyZWVuPzogc3RyaW5nO1xyXG4gICAgcGVuZGluZ1Bhc3N3b3JkQ2hhbmdlU2NyZWVuPzogc3RyaW5nO1xyXG4gICAgcGVuZGluZ1JlQXV0aGVudGljYXRpb25TY3JlZW4/OiBzdHJpbmc7XHJcbiAgICBwZW5kaW5nVGZhUmVnaXN0cmF0aW9uU2NyZWVuPzogc3RyaW5nO1xyXG4gICAgcGVuZGluZ1RmYVZlcmlmaWNhdGlvblNjcmVlbj86IHN0cmluZztcclxuXHJcbiAgICB3aWR0aD86IHN0cmluZztcclxuICAgIGhlaWdodD86IHN0cmluZztcclxuICAgIGNhcHRpb24/OiBzdHJpbmc7XHJcbn1cclxuZXhwb3J0IHZhciBTY3JlZW5PcHRpb25zX0NPTlNUUyA9IHtcclxuICAgIGFjY291bnRzTGlua2VkU2NyZWVuOiAnZGF0YS1vbi1hY2NvdW50cy1saW5rZWQtc2NyZWVuJyxcclxuICAgIHBlbmRpbmdUZmFSZWdpc3RyYXRpb25TY3JlZW46ICdkYXRhLW9uLXBlbmRpbmctdGZhLXJlZ2lzdHJhdGlvbi1zY3JlZW4nLFxyXG4gICAgcGVuZGluZ1RmYVZlcmlmaWNhdGlvblNjcmVlbjogJ2RhdGEtb24tcGVuZGluZy10ZmEtdmVyaWZpY2F0aW9uLXNjcmVlbicsXHJcbiAgICBwZW5kaW5nUmVnaXN0cmF0aW9uU2NyZWVuOiAnZGF0YS1vbi1wZW5kaW5nLXJlZ2lzdHJhdGlvbi1zY3JlZW4nLFxyXG4gICAgZXhpc3RpbmdMb2dpbklkZW50aWZpZXJTY3JlZW46ICdkYXRhLW9uLWV4aXN0aW5nLWxvZ2luLWlkZW50aWZpZXItc2NyZWVuJyxcclxuICAgIHBlbmRpbmdWZXJpZmljYXRpb25TY3JlZW46ICdkYXRhLW9uLXBlbmRpbmctdmVyaWZpY2F0aW9uLXNjcmVlbicsXHJcbiAgICBwZW5kaW5nQ29kZVZlcmlmaWNhdGlvblNjcmVlbjogJ2RhdGEtb24tcGVuZGluZy1lbWFpbC12ZXJpZmljYXRpb24tY29kZScsXHJcbiAgICBtaXNzaW5nTG9naW5JZFNjcmVlbjogJ2RhdGEtb24tbWlzc2luZy1sb2dpbmlkLXNjcmVlbicsXHJcbiAgICBwZW5kaW5nUGFzc3dvcmRDaGFuZ2VTY3JlZW46ICdkYXRhLW9uLXBlbmRpbmctcGFzc3dvcmQtY2hhbmdlLXNjcmVlbicsXHJcbiAgICBwZW5kaW5nUmVBdXRoZW50aWNhdGlvblNjcmVlbjogJ2RhdGEtb24tcGVuZGluZy1yZWNlbnQtbG9naW4tc2NyZWVuJyxcclxuXHJcbiAgICB3aWR0aDogJ2RhdGEtd2lkdGgnLFxyXG4gICAgaGVpZ2h0OiAnZGF0YS1oZWlnaHQnLFxyXG4gICAgY2FwdGlvbjogJ2RhdGEtY2FwdGlvbicsXHJcbn07XHJcbkRlZXBGcmVlemUoU2NyZWVuT3B0aW9uc19DT05TVFMpO1xyXG5leHBvcnQgY2xhc3MgU2NyZWVuT3B0aW9ucyBpbXBsZW1lbnRzIElTY3JlZW5PcHRpb25zIHtcclxuICAgIHB1YmxpYyBhY2NvdW50c0xpbmtlZFNjcmVlbjogc3RyaW5nO1xyXG4gICAgcHVibGljIHBlbmRpbmdUZmFSZWdpc3RyYXRpb25TY3JlZW46IHN0cmluZztcclxuICAgIHB1YmxpYyBwZW5kaW5nVGZhVmVyaWZpY2F0aW9uU2NyZWVuOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgcGVuZGluZ1JlZ2lzdHJhdGlvblNjcmVlbjogc3RyaW5nO1xyXG4gICAgcHVibGljIGV4aXN0aW5nTG9naW5JZGVudGlmaWVyU2NyZWVuOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgcGVuZGluZ1ZlcmlmaWNhdGlvblNjcmVlbjogc3RyaW5nO1xyXG4gICAgcHVibGljIHBlbmRpbmdDb2RlVmVyaWZpY2F0aW9uU2NyZWVuOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgbWlzc2luZ0xvZ2luSWRTY3JlZW46IHN0cmluZztcclxuICAgIHB1YmxpYyBwZW5kaW5nUGFzc3dvcmRDaGFuZ2VTY3JlZW46IHN0cmluZztcclxuICAgIHB1YmxpYyBwZW5kaW5nUmVBdXRoZW50aWNhdGlvblNjcmVlbjogc3RyaW5nO1xyXG5cclxuICAgIHB1YmxpYyB3aWR0aDogc3RyaW5nO1xyXG4gICAgcHVibGljIGhlaWdodDogc3RyaW5nO1xyXG4gICAgcHVibGljIGNhcHRpb246IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihlbDogSFRNTEVsZW1lbnQsIHBhcmVudD86IElTY3JlZW5PcHRpb25zKSB7XHJcbiAgICAgICAgcGFyZW50ID0gcGFyZW50IHx8IHt9O1xyXG5cclxuICAgICAgICB0aGlzLmFjY291bnRzTGlua2VkU2NyZWVuID0gZWwuZ2V0QXR0cmlidXRlKFNjcmVlbk9wdGlvbnNfQ09OU1RTLmFjY291bnRzTGlua2VkU2NyZWVuKSB8fCBwYXJlbnQuYWNjb3VudHNMaW5rZWRTY3JlZW47XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nVGZhUmVnaXN0cmF0aW9uU2NyZWVuID0gZWwuZ2V0QXR0cmlidXRlKFNjcmVlbk9wdGlvbnNfQ09OU1RTLnBlbmRpbmdUZmFSZWdpc3RyYXRpb25TY3JlZW4pIHx8IHBhcmVudC5wZW5kaW5nVGZhUmVnaXN0cmF0aW9uU2NyZWVuO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1RmYVZlcmlmaWNhdGlvblNjcmVlbiA9IGVsLmdldEF0dHJpYnV0ZShTY3JlZW5PcHRpb25zX0NPTlNUUy5wZW5kaW5nVGZhVmVyaWZpY2F0aW9uU2NyZWVuKSB8fCBwYXJlbnQucGVuZGluZ1RmYVZlcmlmaWNhdGlvblNjcmVlbjtcclxuICAgICAgICB0aGlzLnBlbmRpbmdSZWdpc3RyYXRpb25TY3JlZW4gPSBlbC5nZXRBdHRyaWJ1dGUoU2NyZWVuT3B0aW9uc19DT05TVFMucGVuZGluZ1JlZ2lzdHJhdGlvblNjcmVlbikgfHwgcGFyZW50LnBlbmRpbmdSZWdpc3RyYXRpb25TY3JlZW47XHJcbiAgICAgICAgdGhpcy5leGlzdGluZ0xvZ2luSWRlbnRpZmllclNjcmVlbiA9IGVsLmdldEF0dHJpYnV0ZShTY3JlZW5PcHRpb25zX0NPTlNUUy5leGlzdGluZ0xvZ2luSWRlbnRpZmllclNjcmVlbikgfHwgcGFyZW50LmV4aXN0aW5nTG9naW5JZGVudGlmaWVyU2NyZWVuO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1ZlcmlmaWNhdGlvblNjcmVlbiA9IGVsLmdldEF0dHJpYnV0ZShTY3JlZW5PcHRpb25zX0NPTlNUUy5wZW5kaW5nVmVyaWZpY2F0aW9uU2NyZWVuKSB8fCBwYXJlbnQucGVuZGluZ1ZlcmlmaWNhdGlvblNjcmVlbjtcclxuICAgICAgICB0aGlzLnBlbmRpbmdDb2RlVmVyaWZpY2F0aW9uU2NyZWVuID0gZWwuZ2V0QXR0cmlidXRlKFNjcmVlbk9wdGlvbnNfQ09OU1RTLnBlbmRpbmdDb2RlVmVyaWZpY2F0aW9uU2NyZWVuKSB8fCBwYXJlbnQucGVuZGluZ0NvZGVWZXJpZmljYXRpb25TY3JlZW47XHJcbiAgICAgICAgdGhpcy5taXNzaW5nTG9naW5JZFNjcmVlbiA9IGVsLmdldEF0dHJpYnV0ZShTY3JlZW5PcHRpb25zX0NPTlNUUy5taXNzaW5nTG9naW5JZFNjcmVlbikgfHwgcGFyZW50Lm1pc3NpbmdMb2dpbklkU2NyZWVuO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Bhc3N3b3JkQ2hhbmdlU2NyZWVuID0gZWwuZ2V0QXR0cmlidXRlKFNjcmVlbk9wdGlvbnNfQ09OU1RTLnBlbmRpbmdQYXNzd29yZENoYW5nZVNjcmVlbikgfHwgcGFyZW50LnBlbmRpbmdQYXNzd29yZENoYW5nZVNjcmVlbjtcclxuICAgICAgICB0aGlzLnBlbmRpbmdSZUF1dGhlbnRpY2F0aW9uU2NyZWVuID0gZWwuZ2V0QXR0cmlidXRlKFNjcmVlbk9wdGlvbnNfQ09OU1RTLnBlbmRpbmdSZUF1dGhlbnRpY2F0aW9uU2NyZWVuKSB8fCBwYXJlbnQucGVuZGluZ1JlQXV0aGVudGljYXRpb25TY3JlZW47XHJcblxyXG4gICAgICAgIHRoaXMud2lkdGggPSBlbC5nZXRBdHRyaWJ1dGUoU2NyZWVuT3B0aW9uc19DT05TVFMud2lkdGgpIHx8IHBhcmVudC53aWR0aDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IGVsLmdldEF0dHJpYnV0ZShTY3JlZW5PcHRpb25zX0NPTlNUUy5oZWlnaHQpIHx8IHBhcmVudC5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5jYXB0aW9uID0gZWwuZ2V0QXR0cmlidXRlKFNjcmVlbk9wdGlvbnNfQ09OU1RTLmNhcHRpb24pIHx8IHBhcmVudC5jYXB0aW9uO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IElTY3JlZW5TZXRQYXJhbXMsIElFeHRyYUV2ZW50RGF0YSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UGx1Z2luJztcclxuaW1wb3J0IHsgSUZvcm1EYXRhIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElPdHBEYXRhIHtcclxuICAgIHZUb2tlbj86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJUHVzaERhdGEge1xyXG4gICAgdlRva2VuPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2NyZWVuU2V0RGF0YSB7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgcGFyYW1zOiBJU2NyZWVuU2V0UGFyYW1zKSB7XHJcbiAgICAgICAgdGhpcy5yZWdUb2tlbiA9IHBhcmFtcy5yZWdUb2tlbjtcclxuICAgICAgICB0aGlzLmZpbmFsaXplUmVnaXN0cmF0aW9uTmVlZGVkID0gcGFyYW1zLmZpbmFsaXplUmVnaXN0cmF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhcGlEYXRhOiBhbnkgPSB7fTsgLy8gRWFjaCBmb3JtIGNhbiBoYXZlIGl0cyBvd24gc2VydmVyIEFQSSBkYXRhXHJcbiAgICBwdWJsaWMgbGFzdFN1Ym1pdHRlZEZvcm1JRDogc3RyaW5nO1xyXG4gICAgcHVibGljIGxhc3RTdWJtaXR0ZWRGb3JtUmVzcG9uc2U6IGFueSA9IHt9O1xyXG4gICAgcHVibGljIGZpbmFsaXplUmVnaXN0cmF0aW9uTmVlZGVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgbmVlZGVkRGF0YTogSUZvcm1EYXRhID0ge307XHJcbiAgICBwdWJsaWMgZXh0cmFFdmVudERhdGE6IElFeHRyYUV2ZW50RGF0YSA9IHt9O1xyXG4gICAgcHVibGljIHJlZ1Rva2VuOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgb3RwRGF0YTogSU90cERhdGEgID0ge307XHJcbiAgICBwdWJsaWMgcHVzaERhdGE6IElQdXNoRGF0YSAgPSB7fTtcclxufVxyXG4iLCJpbXBvcnQge1xyXG4gICAgRGVlcEZyZWV6ZSxcclxuICAgIElNYXAsXHJcbiAgICBJRVRlbXBsYXRlRWxlbWVudFBvbHlmaWxsLFxyXG4gICAgZmlyc3RQYXJ0LFxyXG4gICAgRm9yRWFjaCxcclxuICAgIEZvckVhY2hQcm9wLFxyXG4gICAgU29tZSxcclxuICAgIGdldFVuaXRNZWFzdXJlbWVudFR5cGUsXHJcbiAgICBVbml0TWVhc3VyZW1lbnRUeXBlLFxyXG59IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xyXG5pbXBvcnQge0lQbHVnaW5UZW1wbGF0ZXN9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvaW50ZXJmYWNlcy9JUGx1Z2luVGVtcGxhdGVzJztcclxuaW1wb3J0IHtJUGx1Z2luQ1NTfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL2ludGVyZmFjZXMvSVBsdWdpbkNTUyc7XHJcbmltcG9ydCB7SVBsdWdpblBhcmFtc30gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMuUGx1Z2luL2FwcC9pbnRlcmZhY2VzL0lQbHVnaW5QYXJhbXMnO1xyXG5pbXBvcnQge1NjcmVlblNldERhdGF9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0RGF0YSc7XHJcbmltcG9ydCB7Q2xvc2VSZWFzb25zfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL0Nsb3NlUmVhc29ucyc7XHJcbmltcG9ydCB7U2NyZWVufSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbic7XHJcbmltcG9ydCB7QmFzZUZvcm0sIElGb3JtRGF0YX0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XHJcbmltcG9ydCB7SUVycm9ySW5mbywgSUVycm9yQXR0cmlidXRlSW5mbywgUGVuZGluZ0Vycm9yQXR0cmlidXRlc30gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9FcnJvcnMnO1xyXG5pbXBvcnQge0lUZW1wbGF0ZUVsZW1lbnRQYXJlbnQsIFRlbXBsYXRlRWxlbWVudH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9UZW1wbGF0ZUVsZW1lbnQnO1xyXG5pbXBvcnQge0lFbGVtZW50QWN0dWFsU2l6ZSwgSUVsZW1lbnRTaXplLCBJVmlld3BvcnRTaXplfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvSW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7U2NyZWVuT3B0aW9uc30gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5PcHRpb25zJztcclxuaW1wb3J0IHtJUGx1Z2luQ29uZmlnfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL2ludGVyZmFjZXMvSVBsdWdpbkNvbmZpZyc7XHJcbmltcG9ydCB7RGV2aWNlVHlwZXN9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9CYXNlT2JqZWN0L0lCYXNlT2JqZWN0Q29uZmlnJztcclxuaW1wb3J0IHtQbHVnaW5TdHlsZX0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMuUGx1Z2luL2FwcC9QbHVnaW5TdHlsZXMnO1xyXG5pbXBvcnQge1xyXG4gICAgSUJhc2VGb3JtRXZlbnQsXHJcbiAgICBJQWZ0ZXJTdWJtaXRFdmVudCxcclxuICAgIElIaWRlRXZlbnQsXHJcbiAgICBJQmVmb3JlTG9hZEV2ZW50LFxyXG4gICAgSUFmdGVyTG9hZEV2ZW50XHJcbn0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9FdmVudHMuZCc7XHJcbmltcG9ydCB7TmV3c2xldHRlclNpZ251cEZvcm19IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvTmV3c2xldHRlclNpZ251cEZvcm0nO1xyXG5pbXBvcnQge1NjcmVlbl9DT05TVFN9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuQ29uc3RzJztcclxuaW1wb3J0IHtFZGl0YWJsZVRmYVByb3ZpZGVyc1R5cGVzfSBmcm9tICdzcmMvYWNjb3VudHMvY29uc3RhbnRzJztcclxuaW1wb3J0IHtJSW5qZWN0aW9uSW5mb30gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0FQSS9VaUFwaSc7XHJcbmltcG9ydCB7R1NFcnJvckRldGFpbHMsIEdTRXJyb3JzfSBmcm9tICcuLi8uLi8uLi9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9ycyc7XHJcbmltcG9ydCB7IFRyYW5zbGF0aW9uc0NvbnRhaW5lciB9IGZyb20gXCIuLi8uLi8uLi9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvVXRpbHMvbGFuZ3VhZ2VzL2xhbmd1YWdlXCI7XHJcbmltcG9ydCB7Q29uZmxpY3RIYW5kbGluZ30gZnJvbSBcIi4vTG9naW5Nb2Rlc1wiO1xyXG5pbXBvcnQgeyBJRm9ybUNvbnRleHQgfSBmcm9tIFwiLi9JRm9ybUNvbnRleHRcIjtcclxuXHJcbmV4cG9ydCB0eXBlIFNjcmVlblNldCA9IHtcclxuICAgIGh0bWw6IHN0cmluZztcclxuICAgIGNzczogc3RyaW5nO1xyXG4gICAgamF2YXNjcmlwdDogc3RyaW5nO1xyXG4gICAgdHJhbnNsYXRpb25zOiBUcmFuc2xhdGlvbnNDb250YWluZXJcclxufTtcclxuXHJcbnZhciBTY3JlZW5TZXRQbHVnaW5fQ09OU1RTID0ge1xyXG4gICAgbmFtZXNwYWNlOiAnYWNjb3VudHMnLFxyXG4gICAgcGx1Z2luTmFtZTogJ3NjcmVlblNldCcsXHJcblxyXG4gICAgc2hvd1NjcmVlblNldE5hbWU6ICdzaG93U2NyZWVuU2V0JyxcclxuICAgIHN3aXRjaFNjcmVlbk5hbWU6ICdzd2l0Y2hTY3JlZW4nLFxyXG4gICAgaGlkZVNjcmVlblNldE5hbWU6ICdoaWRlU2NyZWVuU2V0JyxcclxuICAgIHN0YXlPblNjcmVlbjogJ19zdGF5JyxcclxufTtcclxuRGVlcEZyZWV6ZShTY3JlZW5TZXRQbHVnaW5fQ09OU1RTKTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNjcmVlblNldFRlbXBsYXRlcyBleHRlbmRzIElQbHVnaW5UZW1wbGF0ZXMge1xyXG4gICAgY2FwdGNoYTogc3RyaW5nO1xyXG4gICAgaW52aXNpYmxlUmVjYXB0Y2hhOiBzdHJpbmc7XHJcbiAgICBpbmxpbmVkUGFzc3dvcmRTdHJlbmd0aDogc3RyaW5nO1xyXG4gICAgcGFzc3dvcmRTdHJlbmd0aF9taW5pbXVtUmVxdWlyZW1lbnRzOiBzdHJpbmc7XHJcbiAgICBwYXNzd29yZFN0cmVuZ3RoOiBzdHJpbmc7XHJcbiAgICBwYXNzd29yZFN0cmVuZ3RoX3N0cmVuZ3RoTWV0ZXI6IHN0cmluZztcclxuICAgIHBob3RvVXBsb2FkX2Zvcm06IHN0cmluZztcclxuICAgIHBob3RvVXBsb2FkX3VpOiBzdHJpbmc7XHJcbiAgICBzY3JlZW5TZXQ6IHN0cmluZztcclxuICAgIHNjcmVlblNldF9kaWFsb2c6IHN0cmluZztcclxuICAgIGNvbnNlbnQ6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU2NyZWVuU2V0Q1NTIGV4dGVuZHMgSVBsdWdpbkNTUyB7XHJcbiAgICBkZWZhdWx0Q1NTOiBzdHJpbmc7XHJcbiAgICBpZThQYXRjaDogc3RyaW5nO1xyXG4gICAgaWU5UGF0Y2g6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQmFzZVNjcmVlblBhcmFtcyBleHRlbmRzIElQbHVnaW5QYXJhbXMge1xyXG4gICAgc2NyZWVuU2V0OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVN3aXRjaFNjcmVlblBhcmFtcyBleHRlbmRzIElCYXNlU2NyZWVuUGFyYW1zIHtcclxuICAgIHNjcmVlbjogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElIaWRlU2NyZWVuU2V0UGFyYW1zIGV4dGVuZHMgSUJhc2VTY3JlZW5QYXJhbXMge1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTY3JlZW5TZXRQYXJhbXMgZXh0ZW5kcyBJQmFzZVNjcmVlblBhcmFtcyB7XHJcbiAgICBjb250ZXh0PzogYW55O1xyXG4gICAgY2lkPzogc3RyaW5nO1xyXG4gICAgb25CZWZvcmVTdWJtaXQ/OiAoZSkgPT4gdm9pZDtcclxuICAgIG9uQWZ0ZXJTdWJtaXQ/OiAoZSkgPT4gdm9pZDtcclxuICAgIG9uQmVmb3JlU2NyZWVuTG9hZD86IChlKSA9PiB2b2lkO1xyXG4gICAgb25BZnRlclNjcmVlbkxvYWQ/OiAoZSkgPT4gdm9pZDtcclxuICAgIG9uRmllbGRDaGFuZ2VkPzogKGUpID0+IHZvaWQ7XHJcbiAgICBvbkhpZGU/OiAoZSkgPT4gdm9pZDtcclxuICAgIGFwaURvbWFpbj86IHN0cmluZztcclxuICAgIHJlZ1NvdXJjZT86IHN0cmluZztcclxuICAgIHJlZ1Rva2VuPzogc3RyaW5nO1xyXG4gICAgZmluYWxpemVSZWdpc3RyYXRpb24/OiBib29sZWFuO1xyXG4gICAgcGFzc3dvcmRSZXNldFRva2VuPzogc3RyaW5nO1xyXG4gICAgbW9iaWxlU2NyZWVuU2V0Pzogc3RyaW5nO1xyXG4gICAgc3RhcnRTY3JlZW4/OiBzdHJpbmc7XHJcbiAgICBpbml0aWFsUmVzcG9uc2U/OiBJRm9ybVJlc3BvbnNlO1xyXG4gICAgaW5pdGlhbE1ldGhvZD86IHN0cmluZztcclxuICAgIHJlbWVtYmVyPzogYm9vbGVhbjtcclxuICAgIGFsbG93QWNjb3VudHNMaW5raW5nPzogYm9vbGVhbjtcclxuICAgIHJlbWVtYmVyU2Vzc2lvbkV4cGlyYXRpb24/OiBhbnk7IC8vIFRPRE8gZmluZCB0eXBlIC0gcG9zc2libHkgYm9vbGVhblxyXG4gICAgc2Vzc2lvbkV4cGlyYXRpb24/OiBhbnk7IC8vIFRPRE8gZmluZCB0eXBlXHJcbiAgICBpc0NoaWxkPzogYm9vbGVhbjtcclxuICAgIHBhcmVudERhdGE/OiBTY3JlZW5TZXREYXRhO1xyXG4gICAgY3NzUHJlZml4Pzogc3RyaW5nO1xyXG4gICAgaWdub3JlQXBpUXVldWU/OiBib29sZWFuO1xyXG4gICAgY29uZmxpY3RIYW5kbGluZz86IENvbmZsaWN0SGFuZGxpbmc7XHJcbn1cclxuXHJcbkRlZXBGcmVlemUoQ2xvc2VSZWFzb25zKTtcclxuZXhwb3J0IHZhciBFbmRGbG93U2NyZWVuczogSU1hcDxDbG9zZVJlYXNvbnM+ID0ge1xyXG4gICAgX3NraXA6IENsb3NlUmVhc29ucy5za2lwLFxyXG4gICAgX2ZpbmlzaDogQ2xvc2VSZWFzb25zLmZpbmlzaGVkLFxyXG4gICAgX2NhbmNlbDogQ2xvc2VSZWFzb25zLmNhbmNlbCxcclxufTtcclxuRGVlcEZyZWV6ZShFbmRGbG93U2NyZWVucyk7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElGb3JtIHtcclxuICAgIF9zY3JlZW5TZXQ6IFNjcmVlblNldFBsdWdpbjtcclxuICAgIF9zY3JlZW46IFNjcmVlbjtcclxuICAgIElEOiBzdHJpbmc7XHJcbiAgICBiaW5kSUQ6IHN0cmluZztcclxuICAgIGdldEVycm9yRGlzcGxheUZvcm0/OiAoKSA9PiBCYXNlRm9ybTtcclxuICAgIHN1Y2Nlc3NTY3JlZW4/OiBzdHJpbmc7XHJcbiAgICBhdXRvU2tpcFNjcmVlbj86IHN0cmluZztcclxuICAgIHNjcmVlblNldFNraXBwZWRTY3JlZW4/OiBzdHJpbmc7XHJcbiAgICBvblNraXBwZWQ/OiAocmVzcG9uc2U/OiBJRm9ybVJlc3BvbnNlKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElHaWd5YVJlc3BvbnNlIHtcclxuICAgIGVycm9yQ29kZT86IEdTRXJyb3JzO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElGb3JtUmVzcG9uc2UgZXh0ZW5kcyBJR2lneWFSZXNwb25zZSB7XHJcbiAgICByZXNwb25zZT86IElGb3JtUmVzcG9uc2U7XHJcbiAgICByZWdUb2tlbj86IHN0cmluZztcclxuICAgIGV2ZW50PzogYW55O1xyXG4gICAgYXV0b1NraXA/OiBib29sZWFuO1xyXG4gICAgb3BlcmF0aW9uPzogc3RyaW5nO1xyXG4gICAgcHJvZmlsZT86IElGb3JtRGF0YTtcclxuICAgIGRhdGE/OiBJRm9ybURhdGE7XHJcbiAgICBlcnJvckRldGFpbHM/OiBzdHJpbmc7XHJcbiAgICBlcnJvck1lc3NhZ2U/OiBzdHJpbmdbXTtcclxuICAgIGN1c3RvbU1lc3NhZ2U/OiBzdHJpbmc7XHJcbiAgICB1c2VyPzogc3RyaW5nO1xyXG4gICAgc2VjcmV0UXVlc3Rpb24/OiBzdHJpbmc7XHJcbiAgICBlcnJvckRldGFpbHNDb2RlPzogbnVtYmVyO1xyXG4gICAgdmFsaWRhdGlvbkVycm9ycz86IElFcnJvckluZm9bXTtcclxuICAgIGVycm9yRmxhZ3M/OiBzdHJpbmc7XHJcbiAgICBsb2dpbklEPzogc3RyaW5nO1xyXG4gICAgY2hpbGRTY3JlZW5TZXRDbG9zZVJlYXNvbj86IHN0cmluZzsgLy8gb25lIG9mIHRoZSBDbG9zZVJlYXNvbnMgdmFsdWUgbmFtZXNcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJRXh0cmFFdmVudERhdGEge1xyXG4gICAgcmVtZW1iZXJNZT86IGJvb2xlYW47XHJcbiAgICBhbGxvd0FjY291bnRzTGlua2luZz86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTG9hZFRlbXBsYXRlQ2FsbGJhY2sge1xyXG4gICAgKGlzU3VjY2VzczogdHJ1ZSwgdHJhbnNsYXRpb25zPzogeyBbdHJhbnNsYXRpb25LZXk6IHN0cmluZ106IHN0cmluZyB9LCBzZXJ2ZXJQYXJhbXM/OiBhbnkpOiB2b2lkO1xyXG5cclxuICAgIChpc1N1Y2Nlc3M6IGZhbHNlLCBlcnJvclJlc3BvbnNlPzogeyBlcnJvckNvZGU6IG51bWJlciB9KTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IHZhciBTY3JlZW5TZXRfQ09OU1RTID0ge1xyXG4gICAgZ2lneWFDbGFzczogJ2dpZ3lhLXNjcmVlbi1zZXQnLFxyXG4gICAgbW9iaWxlRGlhbG9nQ2xhc3M6ICdnaWd5YS1zY3JlZW4tZGlhbG9nLW1vYmlsZScsXHJcbiAgICB3ZWJEaWFsb2dDbGFzczogJ2dpZ3lhLXNjcmVlbi1kaWFsb2cnLFxyXG4gICAgY29udGVudENsYXNzOiAnZ2lneWEtc2NyZWVuLWRpYWxvZy1jb250ZW50JyxcclxuICAgIHRvcEVsZW1lbnRDbGFzczogJ2dpZ3lhLXNjcmVlbi1kaWFsb2ctdG9wJyxcclxuICAgIGNhbGN1bGF0ZVNpemVDbGFzczogJ2dpZ3lhLWNhbGN1bGF0ZS1zaXplJyxcclxuICAgIGdpZ3lhSGlkZGVuOiAnZ2lneWEtaGlkZGVuJyxcclxuXHJcbiAgICBzdGFydFNjcmVlbjogJ2RhdGEtc3RhcnQtc2NyZWVuJyxcclxuICAgIGlzUmVzcG9uc2l2ZTogJ2RhdGEtcmVzcG9uc2l2ZScsXHJcbiAgICBkaWFsb2dTdHlsZTogJ2RhdGEtZGlhbG9nLXN0eWxlJyxcclxufTtcclxuRGVlcEZyZWV6ZShTY3JlZW5TZXRfQ09OU1RTKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBTY3JlZW5TZXRQbHVnaW4gZXh0ZW5kcyBnaWd5YS5fLnBsdWdpbnMuQmFzZVBsdWdpbjxJU2NyZWVuU2V0UGFyYW1zLCBJU2NyZWVuU2V0VGVtcGxhdGVzLCBJU2NyZWVuU2V0Q1NTPiBpbXBsZW1lbnRzIElUZW1wbGF0ZUVsZW1lbnRQYXJlbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGNhY2hlIHJlZmVyZW5jZSB0byBKYXZhU2NyaXB0IGFuZCB0cmFuc2xhdGlvbnMgZG93bmxvYWRlZCBmb3IgZWFjaCBzY3JlZW4tc2V0LlxyXG4gICAgICpcclxuICAgICAqIFRoZSBvYmplY3QgcmVmZXJlbmNlIGlzIHBsYWNlZCBvbiB0aGUgZ2lneWEgb2JqZWN0IGRpcmVjdGx5IHRvIGF2b2lkIGJlaW5nIGNsZWFyZWQgd2hlbiB0aGlzIGZpbGUgaXMgcmVsb2FkZWQgYnkgYSBzaXRlIHN3aXRjaGluZyBsYW5ndWFnZXMuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IENBQ0hFOiB7XHJcbiAgICAgICAgW3NjcmVlblNldElEOiBzdHJpbmddOiB7XHJcbiAgICAgICAgICAgIGphdmFzY3JpcHQ/OiBzdHJpbmc7XHJcbiAgICAgICAgICAgIHRyYW5zbGF0aW9ucz86IFRyYW5zbGF0aW9uc0NvbnRhaW5lcjtcclxuICAgICAgICB9O1xyXG4gICAgfSA9IChnaWd5YVsnX19zY3JlZW5TZXRQbHVnaW5DYWNoZSddID0gZ2lneWFbJ19fc2NyZWVuU2V0UGx1Z2luQ2FjaGUnXSB8fCB7fSk7XHJcblxyXG4gICAgcHJpdmF0ZSB0ZW1wbGF0ZUVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBfaW5zdGFuY2VJZDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBpc1Jlc3BvbnNpdmU6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIF9hZGRlZENTUyA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfbG9hZGVkU2NyZWVuc2V0Q3NzOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFNjcmVlblNldF9DT05TVFM7XHJcblxyXG4gICAgLy8gU2NyZWVuU2V0IGRhdGFcclxuICAgIHByaXZhdGUgX3N0YXJ0U2NyZWVuOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgX2VsQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIHB1YmxpYyBfZWxDaGlsZENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgICBwdWJsaWMgbGFzdFNjcmVlblNldFNpemU6IElFbGVtZW50QWN0dWFsU2l6ZTtcclxuICAgIHByaXZhdGUgX3NjcmVlbnM6IElNYXA8U2NyZWVuPiA9IHt9O1xyXG4gICAgcHJpdmF0ZSBfY3VycmVudFNjcmVlbjogU2NyZWVuO1xyXG4gICAgcHJpdmF0ZSBfbmV4dFNjcmVlbjogU2NyZWVuOyAvLyBOZWVkZWQgc2luY2Ugc3dpdGNoaW5nIHNjcmVlbnMgY2FuIGNhdXNlIGFzeW5jIGxvYWRpbmcgb2YgZGF0YSBmcm9tIHRoZSBzZXJ2ZXJcclxuXHJcbiAgICBwdWJsaWMgc2NyZWVuT3B0aW9uczogU2NyZWVuT3B0aW9ucztcclxuICAgIHB1YmxpYyBfcmFuZG9tID0gTWF0aC5yYW5kb20oKTtcclxuICAgIHB1YmxpYyBkYXRhOiBTY3JlZW5TZXREYXRhO1xyXG5cclxuICAgIHByaXZhdGUgX2NoaWxkOiBTY3JlZW5TZXRQbHVnaW47XHJcbiAgICBwcml2YXRlIF9pc0NoaWxkOiBib29sZWFuO1xyXG4gICAgcHVibGljIF9JRDogc3RyaW5nO1xyXG4gICAgcHVibGljIF9wbGFjZWhvbGRlckludGVydmFsSUQ6IG51bWJlciA9IC0xO1xyXG4gICAgcHJpdmF0ZSBvblVzZXJTdGF0ZUNoYW5nZSA9IChyZXM6IE9iamVjdCkgPT4gdGhpcy5vbkFjY291bnRJbmZvKHJlcyk7XHJcblxyXG4gICAgcHVibGljIGdldENvbmZpZygpOiBJUGx1Z2luQ29uZmlnPElTY3JlZW5TZXRQYXJhbXM+IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXF1aXJlZFBhcmFtczogWydzY3JlZW5TZXQnXSxcclxuICAgICAgICAgICAgZGVmYXVsdFBhcmFtczoge3NjcmVlblNldDogJyd9LFxyXG4gICAgICAgICAgICBkZWZhdWx0TW9kYWxQYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgIHNjcmVlblNldDogJycsXHJcbiAgICAgICAgICAgICAgICAvLywgZGltRGlhbG9nQmFja2dyb3VuZCA6IHRydWUgLy8gZW5hYmxlIHRoaXMgd2hlbiBzdG9wIHN1cHBvcnRpbmcgbGVnYWN5XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlZmF1bHREZXZpY2VUeXBlOiBEZXZpY2VUeXBlcy5hdXRvLFxyXG4gICAgICAgICAgICBoYXNNb2JpbGVVSTogdHJ1ZSxcclxuICAgICAgICAgICAgYWxsb3dNb2RhbDogdHJ1ZSxcclxuICAgICAgICAgICAgZGlzYWJsZU1vZGFsQ29udGFpbmVySW5pdDogdHJ1ZSxcclxuICAgICAgICAgICAgZGVmYXVsdERpYWxvZ1N0eWxlOiBQbHVnaW5TdHlsZS5sZWdhY3ksXHJcbiAgICAgICAgICAgIHN1cHBvcnRzUmVzcG9uc2l2ZTogdHJ1ZSxcclxuICAgICAgICAgICAgZW5hYmxlU2l6ZVBvbGxpbmc6IHRydWUsXHJcbiAgICAgICAgICAgIGVuYWJsZVZpZXdwb3J0UG9sbGluZzogdHJ1ZSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgaW5qZWN0aW9uSW5mbygpOiBJSW5qZWN0aW9uSW5mbyB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZTogJ3NjcmVlblNldCcsXHJcbiAgICAgICAgICAgIG5hbWVzcGFjZTogJ2FjY291bnRzJyxcclxuICAgICAgICAgICAgbWV0aG9kTmFtZTogJ3Nob3dTY3JlZW5TZXQnLFxyXG4gICAgICAgICAgICBqc05hbWU6ICdnaWd5YS5zZXJ2aWNlcy5hY2NvdW50cy5wbHVnaW5zLnNjcmVlblNldCcsXHJcbiAgICAgICAgICAgIHB1YmxpY01ldGhvZHM6IHtcclxuICAgICAgICAgICAgICAgIGhpZGVTY3JlZW5TZXQ6IHtpbnN0YW5jZU1ldGhvZDogJ2NhbmNlbCcsIGFyZ05hbWVzOiBbXX0sXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2hTY3JlZW46IHtpbnN0YW5jZU1ldGhvZDogJ3N3aXRjaFNjcmVlbicsIGFyZ05hbWVzOiBbJ3NjcmVlbiddfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElUZW1wbGF0ZUVsZW1lbnRQYXJlbnQgaW1wbGVtZW50YXRpb25cclxuICAgIHB1YmxpYyBfc2NyZWVuU2V0ID0gdGhpcztcclxuXHJcbiAgICAvLy8gVE9ETzogc29uIG9iamVjdHMgc2hvdWxkIHVzZSBiZSBpbmplY3RlZCB3aXRoIHRoaXMgc2NyZWVuLXNldCBldmVudCBkaXNwYXRjaGVyIGFuZCB3YXJuIG1ldGhvZCAoYWJvdmUpLlxyXG4gICAgcHVibGljIGRpc3BhdGNoU2NyZWVuU2V0RXZlbnQoZXZlbnROYW1lOiBzdHJpbmcsIG9iajogSUJhc2VGb3JtRXZlbnQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kaXNwYXRjaFBsdWdpbkV2ZW50KGV2ZW50TmFtZSwgb2JqKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gc3RhdGljIG1ldGhvZHNcclxuXHJcbiAgICAvLyBUT0RPOiB3aWxsIGhhdmUgYSBzdXBwb3J0IHN0cnVjdHVyZSBpbiBCYXNlUGx1Z2luIHRoYXQgd2lsbCBmaW5kIHRoZSBpbnN0YW5jZVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgX2NhbGN1bGF0ZUluc3RhbmNlSWQocDogSUJhc2VTY3JlZW5QYXJhbXMpIHtcclxuICAgICAgICB2YXIgY29udGFpbmVySUQgPSBwLmNvbnRhaW5lcklEIHx8ICcnO1xyXG5cclxuICAgICAgICByZXR1cm4gcC5zY3JlZW5TZXQgKyAnXycgKyBjb250YWluZXJJRDtcclxuICAgIH1cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwdWJsaWMgaW5pdChjYWxsYmFjazogKGlzU3VjY2VzczogYm9vbGVhbikgPT4gdm9pZCkge1xyXG4gICAgICAgIHRoaXMubG9hZFRlbXBsYXRlKChzdWNjZXNzLCB0cmFuc2xhdGlvbnM/LCBzZXJ2ZXJQYXJhbXM/KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmVycm9yKCdmYWlsZWQgbG9hZGluZyBzY3JlZW4gc2V0IHRlbXBsYXRlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbygnc2NyZWVuIHNldCB0ZW1wbGF0ZSBsb2FkZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBJRVRlbXBsYXRlRWxlbWVudFBvbHlmaWxsKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBSZS1jcmVhdGUgcGFyYW1ldGVycyB1c2luZyBzZXJ2ZXItbG9hZGVkIHBhcmFtcy5cclxuICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXJQYXJhbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBNZXJnZSB0aGUgZXhwbGljaXQgcGFyYW1zIG9uIHRvcCBvZiB0aGUgc2VydmVyLXByb3ZpZGVkIHBhcmFtcyB0byBjcmVhdGUgYSBuZXcgc2V0IG9mIGV4cGxpY2l0IHBhcmFtcy5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGxpY2l0UGFyYW1zID0gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtzZXJ2ZXJQYXJhbXMsIHRoaXMuZXhwbGljaXRQYXJhbXNdLCBmYWxzZSkgYXMgYW55O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgc2V0IG9mIHBhcmFtcyBieSBtZXJnaW5nIHdpdGggZ2xvYmFsIGNvbmYuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJhbXMgPSBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW3RoaXMucGFyYW1zLCBnaWd5YS50aGlzU2NyaXB0Lmdsb2JhbENvbmYsIHRoaXMuZXhwbGljaXRQYXJhbXNdLCBmYWxzZSkgYXMgYW55O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIE1lcmdlIHRyYW5zbGF0aW9ucyBmcm9tIHBhcmFtZXRlcnMgdG8gc3VwcG9ydCB0cmFuc2xhdGlvbnMgYmVpbmcgb3ZlcnJpZGRlbiBvbiB0aGUgY2xpZW50LXNpZGUuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5jdXN0b21MYW5nID0gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFt0cmFuc2xhdGlvbnMgfHwge30sIHRoaXMucGFyYW1zLmN1c3RvbUxhbmcgfHwge31dKSBhcyBhbnk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTm9ybWFsaXplIGFsbCB0cmFuc2xhdGlvbiBrZXlzIHRvIGxvd2VyY2FzZSBpbiBhZGRpdGlvbiB0byB0aGVpciBvcmlnaW5hbCBjYXNpbmcuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLnBhcmFtcy5jdXN0b21MYW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJhbXMuY3VzdG9tTGFuZ1trZXkudG9Mb3dlckNhc2UoKV0gPSB0aGlzLnBhcmFtcy5jdXN0b21MYW5nW2tleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vICM3MTUwMiB8IHN1cHBvcnQgcmVnVG9rZW4gaW4gcXVlcnkgc3RyaW5nIGZvciBMaXRlQWNjb3VudCB1c2Vyc1xyXG4gICAgICAgICAgICBjb25zdCBnaWdfcmVnVG9rZW4gPSBnaWd5YS51dGlscy5VUkwuZ2V0UGFyYW1zRnJvbVVSTChkb2N1bWVudC5sb2NhdGlvbi5ocmVmKVsnZ2lnX3JlZ1Rva2VuJ107XHJcbiAgICAgICAgICAgIGlmIChnaWdfcmVnVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyYW1zLnJlZ1Rva2VuID0gZ2lnX3JlZ1Rva2VuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMucGFyZW50RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faXNDaGlsZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLnBhcmFtcy5wYXJlbnREYXRhO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucGFyYW1zLnBhcmVudERhdGE7IC8vIHJlbW92ZSB0byBwcmV2ZW50IGNpcmN1bGFyIHJlZnJlbmNlcyBpbnNpZGUgcGFyYW1zXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pc0NoaWxkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXcgU2NyZWVuU2V0RGF0YSh0aGlzLnBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5yZWdUb2tlbiA9IHRoaXMuZGF0YS5yZWdUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5wYXJhbXMuaXNDaGlsZCA9IHRoaXMuX2lzQ2hpbGQ7IC8vIG1ha2UgdGhlIGlzIGNoaWxkIGFjY2Vzc2libGUgdG8gZXZlbnQgbGlzdGVuZXJzXHJcblxyXG4gICAgICAgICAgICAvLyBwYXJlbnQgc2NyZWVuU2V0IHNob3VsZCBsaXN0ZW4gdG8gZ2xvYmFsIGxvZ2luL291dCBldmVudHNcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9pc0NoaWxkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyR2xvYmFsRXZlbnRzKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJhbXMucmVnU291cmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5yZWdTb3VyY2UgPSBmaXJzdFBhcnQoZmlyc3RQYXJ0KGRvY3VtZW50LmxvY2F0aW9uLmhyZWYsICc/JyksICcjJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlSWQgPSBTY3JlZW5TZXRQbHVnaW4uX2NhbGN1bGF0ZUluc3RhbmNlSWQodGhpcy5wYXJhbXMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdENvbnRhaW5lcigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0U2NyZWVucygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEVycm9yRnJvbVJlc3BvbnNlKHRyYW5zbGF0aW9ucyk7IC8vIHNlY29uZCBhcmd1bWVudCBpcyB1c2VkIGFzIGVycm9yIHJlc3BvbnNlIGluIGNhc2Ugb2YgZmFpbHVyZVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuaW5uZXJUZXh0ID0gJ0FuIGVycm9yIGhhcyBvY2N1cnJlZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjYWxsYmFjayhzdWNjZXNzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZXJlIGFyZSB0d28gd2F5cyB0byBwcm92aWRlIGEgc2NyZWVuLXNldCB0ZW1wbGF0ZS5cclxuICAgICAqIDEuIFBsYWNlIHRoZSBzY3JlZW4tc2V0IHRlbXBsYXRlIGVsZW1lbnQgb24gdGhlIHBhZ2Ugd2l0aCB0aGUgc2NyZWVuLXNldCBJRC4gSW4gdGhpcyBjYXNlLCBpdCBpcyBhc3N1bWVkIENTUyBhbmQgSlMgYXJlIHByb3ZpZGVkLlxyXG4gICAgICogMi4gTG9hZCBzY3JlZW4tc2V0IGZyb20gR2lneWEgc2VydmVycywgd2hpY2ggaW5jbHVkZXMgQ1NTIGFuZCBleHRyYSBKUyBwYXJhbWV0ZXJzLiBBZnRlciBsb2FkLCB0aGUgc2NyZWVuLXNldCBpcyBjYWNoZWQgaW4gYSBET00gZWxlbWVudC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBsb2FkVGVtcGxhdGUoY2FsbGJhY2s6IExvYWRUZW1wbGF0ZUNhbGxiYWNrKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHdlJ3ZlIGFscmVhZHkgbG9hZGVkIHRoZSB0ZW1wbGF0ZS5cclxuICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNldCBzY3JlZW4tc2V0IElELlxyXG4gICAgICAgIGNvbnN0IHNjcmVlblNldElEID0gKHRoaXMuX0lEID0gdGhpcy5pc01vYmlsZVVJICYmIHRoaXMucGFyYW1zLm1vYmlsZVNjcmVlblNldCA/IHRoaXMucGFyYW1zLm1vYmlsZVNjcmVlblNldCA6IHRoaXMucGFyYW1zLnNjcmVlblNldCk7XHJcblxyXG4gICAgICAgIC8vIEZpbmQgKGNyZWF0ZSBpZiBuZWVkZWQpIHNjcmVlbi1zZXQgdGVtcGxhdGUgY29udGFpbmVyIG9uIHRoZSBwYWdlLlxyXG4gICAgICAgIGNvbnN0IHNjcmVlblNldFRlbXBsYXRlQ29udGFpbmVySUQgPSBgX19naWd5YVNjcmVlblNldF8ke3NjcmVlblNldElEfWA7XHJcbiAgICAgICAgbGV0IHNjcmVlblNldFRlbXBsYXRlQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2NyZWVuU2V0VGVtcGxhdGVDb250YWluZXJJRCk7XHJcbiAgICAgICAgaWYgKCFzY3JlZW5TZXRUZW1wbGF0ZUNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBmb3Igc2l0ZS1wcm92aWRlZCBzY3JlZW4tc2V0IHRlbXBsYXRlIGVsZW1lbnQgb24gdGhlIHBhZ2UuIFVzZSBpbnN0ZWFkIG9mIGxvYWRpbmcgZnJvbSBHaWd5YSBzZXJ2ZXJzLlxyXG4gICAgICAgICAgICAvLyBObyBKYXZhU2NyaXB0IGlzIGxvYWRlZCBpbiB0aGlzIGNhc2UgYmVjYXVzZSB0aGUgc2NyZWVuLXNldCB3YXMgcHJvdmlkZWQgYnkgdGhlIHNpdGUuXHJcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2NyZWVuU2V0SUQpIGFzIEhUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAgICAgLy8gIzUyNjQxIC0gRW5zdXJlIGxvY2FsIHNjcmVlbi1zZXQgdGVtcGxhdGUgaXMgbm90IGxvYWRlZCBmcm9tIGluc2lkZSBhIEdpZ3lhLWNyZWF0ZWQgc2NyZWVuLXNldCB0ZW1wbGF0ZSBjb250YWluZXIuXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVFbGVtZW50ICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRWxlbWVudC5wYXJlbnRFbGVtZW50ICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRWxlbWVudC5wYXJlbnRFbGVtZW50LmlkICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRWxlbWVudC5wYXJlbnRFbGVtZW50LmlkLmluZGV4T2YoJ19fZ2lneWFTY3JlZW5TZXRfJykgPT09IDBcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRWxlbWVudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzY3JlZW5TZXRUZW1wbGF0ZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBzY3JlZW5TZXRUZW1wbGF0ZUNvbnRhaW5lci5pZCA9IHNjcmVlblNldFRlbXBsYXRlQ29udGFpbmVySUQ7XHJcbiAgICAgICAgICAgIHNjcmVlblNldFRlbXBsYXRlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hcHBlbmRUb0JvZHkoc2NyZWVuU2V0VGVtcGxhdGVDb250YWluZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbGFuZyA9IHRoaXMuZ2V0TGFuZ0ZvclNjcmVlblNldCgpO1xyXG5cclxuICAgICAgICAvLyBMb29rIHdpdGhpbiB0aGUgdGVtcGxhdGUgZm9yIGNhY2hlZCBzY3JlZW4tc2V0IGVsZW1lbnQuXHJcbiAgICAgICAgLy8gSXQgbWF5IGhhdmUgYmVlbiBwb3B1bGF0ZWQgYnkgYSBwcmV2aW91cyBjYWxsLlxyXG4gICAgICAgIGNvbnN0IHNjcmVlblNldEVsID0gc2NyZWVuU2V0VGVtcGxhdGVDb250YWluZXIucXVlcnlTZWxlY3RvcihgZGl2LiR7U2NyZWVuU2V0X0NPTlNUUy5naWd5YUNsYXNzfWApIGFzIEhUTUxEaXZFbGVtZW50IHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIGlmIChzY3JlZW5TZXRFbCkge1xyXG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlRWxlbWVudCA9IHNjcmVlblNldEVsO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFTY3JlZW5TZXRQbHVnaW4uQ0FDSEVbc2NyZWVuU2V0SURdKSB7XHJcbiAgICAgICAgICAgICAgICBTY3JlZW5TZXRQbHVnaW4uQ0FDSEVbc2NyZWVuU2V0SURdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGphdmFzY3JpcHQ6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbnM6IHt9LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgamF2YXNjcmlwdCA9IFNjcmVlblNldFBsdWdpbi5DQUNIRVtzY3JlZW5TZXRJRF0uamF2YXNjcmlwdFxyXG4gICAgICAgICAgICAgICAgPyBnaWd5YS51dGlscy5KU09OLmRlc2VyaWFsaXplKFNjcmVlblNldFBsdWdpbi5DQUNIRVtzY3JlZW5TZXRJRF0uamF2YXNjcmlwdClcclxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAgICAgLy8gRmlyc3QsIGNoZWNrIHRvIHNlZSBpZiB3ZSd2ZSBjYWNoZWQgdHJhbnNsYXRpb25zIGZyb20gdGhlIHNlcnZlciBpbiB0aGUgbGFuZ3VhZ2UgcmVxdWVzdGVkLlxyXG4gICAgICAgICAgICAvLyAoZG9uJ3QgZmFsbGJhY2sgdG8gcm9vdC9kZWZhdWx0IGxhbmcgd2hlbiB0cnlpbmcgdG8gZ2V0IHRyYW5zbGF0aW9ucyBmcm9tIGNhY2hlKVxyXG4gICAgICAgICAgICBjb25zdCBjYWNoZWRUcmFuc2xhdGlvbnMgPSBnaWd5YS5wbHVnaW5VdGlscy5sYW5nLmdldFRyYW5zbGF0aW9uc0Zyb21Db250YWluZXIoU2NyZWVuU2V0UGx1Z2luLkNBQ0hFW3NjcmVlblNldElEXSwgbGFuZywgZmFsc2UpO1xyXG4gICAgICAgICAgICBpZiAoY2FjaGVkVHJhbnNsYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0cnVlLCBjYWNoZWRUcmFuc2xhdGlvbnMsIGphdmFzY3JpcHQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBmZXRjaCB0cmFuc2xhdGlvbnMgZm9yIHRoaXMgbGFuZ3VhZ2UgZnJvbSB0aGUgc2VydmVyLlxyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHJhcmUgY2FzZSB0aGF0J3MgaGl0IG9ubHkgd2hlbiB0aGUgdXNlciBhbHJlYWR5IGxvYWRlZCB0aGUgc2NyZWVuLXNldCBpbiBvbmUgbGFuZ3VhZ2UgYW5kIG5vdyBpdCdzIGJlaW5nIHJlbmRlcmVkIGluIGEgZGlmZmVyZW50IGxhbmd1YWdlLlxyXG4gICAgICAgICAgICAgICAgZ2lneWEuYWNjb3VudHMuZ2V0U2NyZWVuU2V0cyh0aGlzLnBhcmFtcywge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVkZTogJ3RyYW5zbGF0aW9ucycsXHJcbiAgICAgICAgICAgICAgICAgICAgc2NyZWVuU2V0SURzOiBzY3JlZW5TZXRJRCxcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogdGhpcy5wcmVwYXJlQ2FsbGJhY2soKHJlczogeyBlcnJvckNvZGU6IG51bWJlcjsgc2NyZWVuU2V0czogQXJyYXk8U2NyZWVuU2V0PiB9KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZXJyb3JDb2RlICE9IDAgfHwgIXJlcy5zY3JlZW5TZXRzIHx8ICFyZXMuc2NyZWVuU2V0cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGZhbHNlLCByZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWNoZSB0cmFuc2xhdGlvbnMgZnJvbSBzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9TY3JlZW5TZXQgPSByZXMuc2NyZWVuU2V0c1swXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhbnNsYXRpb25zID0gZ2lneWEucGx1Z2luVXRpbHMubGFuZy5nZXRUcmFuc2xhdGlvbnNGcm9tQ29udGFpbmVyKG9TY3JlZW5TZXQsIGxhbmcpIHx8IHt9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2F2aW5nIHRoZSB0cmFuc2xhdGlvbnMgaW4gY2FjaGUgd2l0aCB7e2xhbmd9fSBhcyB0aGUga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBldmVuIGlmIHRoZSB0cmFuc2xhdGlvbnMgYXJlIGZhbGxiYWNrIGZyb20gcm9vdC9kZWZhdWx0IGxhbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gZW5hYmxlIGxvYWRpbmcgdGhlIHNhbWUgc2NyZWVuLXNldCB3aXRoIGEgZGlmZmVyZW50IG1pc3NpbmcgbGFuZy92YXJpYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgU2NyZWVuU2V0UGx1Z2luLkNBQ0hFW3NjcmVlblNldElEXS50cmFuc2xhdGlvbnNbbGFuZ10gPSB0cmFuc2xhdGlvbnM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh0cnVlLCB0cmFuc2xhdGlvbnMsIGphdmFzY3JpcHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBMb2FkIHNjcmVlbi1zZXQgZnJvbSBzZXJ2ZXIuXHJcbiAgICAgICAgICAgIC8vIE5PVEU6IFRoaXMgY2FuIGJlIHRyaWdnZXJlZCB0d2ljZSBpZiAyIHNjcmVlbi1zZXRzIGxvYWQgYXQgdGhlIHNhbWUgdGltZS5cclxuICAgICAgICAgICAgZ2lneWEuYWNjb3VudHMuZ2V0U2NyZWVuU2V0cyh0aGlzLnBhcmFtcywge1xyXG4gICAgICAgICAgICAgICAgbGFuZyxcclxuICAgICAgICAgICAgICAgIGluY2x1ZGU6ICdodG1sLGNzcyxqYXZhc2NyaXB0LHRyYW5zbGF0aW9ucycsXHJcbiAgICAgICAgICAgICAgICBzY3JlZW5TZXRJRHM6IHNjcmVlblNldElELFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IHRoaXMucHJlcGFyZUNhbGxiYWNrKFxyXG4gICAgICAgICAgICAgICAgICAgIChyZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBudW1iZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcmVlblNldHM6IEFycmF5PFNjcmVlblNldD47XHJcbiAgICAgICAgICAgICAgICAgICAgfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmVycm9yQ29kZSAhPSAwIHx8ICFyZXMuc2NyZWVuU2V0cyB8fCAhcmVzLnNjcmVlblNldHMubGVuZ3RoIHx8ICFyZXMuc2NyZWVuU2V0c1swXS5odG1sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhmYWxzZSwgcmVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNlcnZlclBhcmFtcyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb1NjcmVlblNldCA9IHJlcy5zY3JlZW5TZXRzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2xhdGlvbnMgPSBnaWd5YS5wbHVnaW5VdGlscy5sYW5nLmdldFRyYW5zbGF0aW9uc0Zyb21Db250YWluZXIob1NjcmVlblNldCwgbGFuZykgfHwge307XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBTY3JlZW5TZXRQbHVnaW4uQ0FDSEVbc2NyZWVuU2V0SURdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgamF2YXNjcmlwdDogb1NjcmVlblNldC5qYXZhc2NyaXB0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2xhbmddOiB0cmFuc2xhdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgdG8gYmUgc3VyZSB0aGUgc2NyZWVuLXNldCBET00gd2Fzbid0IGFscmVhZHkgY3JlYXRlZCB3aGlsZSB3YWl0aW5nIGZvciByZXNwb25zZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXQgaXMgdml0YWwgd2UgZG9uJ3QgcmUtcmVuZGVyIGl0IG9yIElFMTEgd2lsbCBicmVhay4gU2VlICM0NzE4MS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzY3JlZW5TZXRUZW1wbGF0ZUNvbnRhaW5lci5pbm5lckhUTUwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcmVlblNldFRlbXBsYXRlQ29udGFpbmVyLmlubmVySFRNTCA9IG9TY3JlZW5TZXQuaHRtbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGNvbXBhdGliaWxpdHksIHN0b3JpbmcgdGhpcyBmb3IgaW5qZWN0aW9uIEFGVEVSIG1vZGFsRGlhbG9nJ3MgY3NzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb2FkZWRTY3JlZW5zZXRDc3MgPSBvU2NyZWVuU2V0LmNzcztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0ZW1wbGF0ZSBlbGVtZW50LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRWxlbWVudCA9IHNjcmVlblNldFRlbXBsYXRlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2RpdicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgSmF2YVNjcmlwdCBpcyBwcmVzZW50LCBhbHNvIHN0b3JlIGFzIGFuIGF0dHJpYnV0ZSBvbiB0aGUgdGVtcGxhdGUgY29udGFpbmVyIGZvciBmdXR1cmUgc2NyZWVuLXNldCBjYWxscy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9TY3JlZW5TZXQuamF2YXNjcmlwdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyUGFyYW1zID0gZ2lneWEudXRpbHMuSlNPTi5kZXNlcmlhbGl6ZShvU2NyZWVuU2V0LmphdmFzY3JpcHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh0cnVlLCB0cmFuc2xhdGlvbnMsIHNlcnZlclBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluamVjdFNjcmVlblNldENTUygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2FkZGVkQ1NTKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zdHlsZSAhPSBQbHVnaW5TdHlsZS5ub25lKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3NzID0gZ2lneWEudXRpbHMudGVtcGxhdGVzLmZpbGwodGhpcy5nZXRDc3MoKS5kZWZhdWx0Q1NTLCB7aW1nQmFzZTogdGhpcy5faW1nQmFzZX0pO1xyXG4gICAgICAgICAgICAgICAgZ2lneWEuXy5wbHVnaW5zLnV0aWxzLmNzcy5hZGRDc3MoY3NzLCB0aGlzLnBhcmFtcy5jc3NQcmVmaXgsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2xvYWRlZFNjcmVlbnNldENzcykge1xyXG4gICAgICAgICAgICAgICAgZ2lneWEuXy5wbHVnaW5zLnV0aWxzLmNzcy5hZGRDc3ModGhpcy5fbG9hZGVkU2NyZWVuc2V0Q3NzKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9sb2FkZWRTY3JlZW5zZXRDc3M7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2FkZGVkQ1NTID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8vIE92ZXJyaWRlIGZyb20gQmFzZVBsdWdpbi5cclxuICAgIHByb3RlY3RlZCBpbml0Q29udGFpbmVyKCkge1xyXG4gICAgICAgIC8vIEJhc2VQbHVnaW4ncyBpbml0Q29udGFpbmVyIG1ldGhvZCBpcyBpbnZva2VkIGluIGl0cyBzeW5jIHJ1biBwcm9jZXNzLFxyXG4gICAgICAgIC8vIGJ1dCBoZXJlIHdlIHdhbnQgdG8gaW5pdGlhbGl6ZSB0aGUgY29udGFpbmVyIFtpbiBwYWdlIG9yIG1vZGFsXSBvbmx5IGFmdGVyIHRoZSB0ZW1wbGF0ZSBhc3luYyBsb2FkIGlzIGNvbXBsZXRlZCBbbmVlZGVkIGZvciBnZXRQbHVnaW5TdHlsZSBtZXRob2RdLlxyXG4gICAgICAgIGlmICh0aGlzLnRlbXBsYXRlRWxlbWVudCkge1xyXG4gICAgICAgICAgICB2YXIgaXNNb2RhbExlZ2FjeSA9IHRoaXMuaXNNb2RhbCAmJiB0aGlzLmdldFBsdWdpblN0eWxlKCkgPT0gUGx1Z2luU3R5bGUubGVnYWN5O1xyXG5cclxuICAgICAgICAgICAgLy8gcHJlLWluaXQgY29udGFpbmVyXHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmRlZmF1bHRNb2RhbFBhcmFtcy5kaW1EaWFsb2dCYWNrZ3JvdW5kID0gIWlzTW9kYWxMZWdhY3k7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0Q29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBwb3N0LWluaXQgY29udGFpbmVyXHJcbiAgICAgICAgICAgIGlmIChpc01vZGFsTGVnYWN5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5lbmFibGVWaWV3cG9ydFBvbGxpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21vZGFsRGlhbG9nLmdldE1vZGFsRGlhbG9nQ29udGFpbmVyKCkuc2V0QXR0cmlidXRlKCdnaWdpZCcsIHRoaXMuY29uZmlnLm1ldGhvZE5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEJhc2ljIHN5bmMgaW4tcGFnZSBpbml0aWFsaXppbmcuIC0tbGVnYWN5XHJcbiAgICAgICAgZWxzZSBpZiAoIXRoaXMuaXNNb2RhbCkge1xyXG4gICAgICAgICAgICBnaWd5YS51dGlscy5ET00uc2V0U2l6ZSh0aGlzLmNvbnRhaW5lciwgdGhpcy5wYXJhbXMud2lkdGgsIHRoaXMucGFyYW1zLmhlaWdodCwgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyYW1zLnJlc3BvbnNpdmUpIHRoaXMuY29udGFpbmVyLnN0eWxlLndpZHRoID0gJ2F1dG8nO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fbG9hZGluZ0luZGljYXRvciA9IG5ldyBnaWd5YS5fLnBsdWdpbnMuTG9hZERpbW1lcih0aGlzLmNvbnRhaW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbml0U2NyZWVucygpIHtcclxuICAgICAgICB0aGlzLmlzUmVzcG9uc2l2ZSA9IHRoaXMudGVtcGxhdGVFbGVtZW50LmdldEF0dHJpYnV0ZShTY3JlZW5TZXRfQ09OU1RTLmlzUmVzcG9uc2l2ZSkgPT0gJ3RydWUnO1xyXG4gICAgICAgIHRoaXMuc2NyZWVuT3B0aW9ucyA9IG5ldyBTY3JlZW5PcHRpb25zKHRoaXMudGVtcGxhdGVFbGVtZW50KTtcclxuICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgc2NyZWVuc2V0IHNjcmVlbnM6YCwgdGhpcy5zY3JlZW5PcHRpb25zKTtcclxuICAgICAgICB0aGlzLmluamVjdFNjcmVlblNldENTUygpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuX2lzQ2hpbGQpIHtcclxuICAgICAgICAgICAgLy8gQ2hpbGQgc2NyZWVuU2V0IGRvZXMgbm90IG5lZWQgdG8gbGlzdGVuLCBwYXJlbnQgYWxyZWFkeSBsaXN0ZW5zXHJcbiAgICAgICAgICAgIHRoaXMuYWRkR2xvYmFsRXZlbnRIYW5kbGVyKCdvbkxvZ2luJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhLmZpbmFsaXplUmVnaXN0cmF0aW9uTmVlZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wcmVwYXJlU2NyZWVuU2V0Q29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMucHJlcGFyZVNjcmVlbnMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fc3RhcnRTY3JlZW4gPVxyXG4gICAgICAgICAgICB0aGlzLnBhcmFtcy5zdGFydFNjcmVlbiB8fCAvLyBwYXJhbWV0ZXJzXHJcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVFbGVtZW50LmdldEF0dHJpYnV0ZShTY3JlZW5TZXRQbHVnaW4uQ09OU1RTLnN0YXJ0U2NyZWVuKSB8fCAvLyBzY3JlZW4gc2V0IGRlZmluaXRpb25cclxuICAgICAgICAgICAgdGhpcy5fc3RhcnRTY3JlZW47IC8vIGZpcnN0IHNjcmVlbiB0aGF0IHdhcyBzZXQgd2hlbiBzY3JlZW5zIHdoZXJlIHBhcnNlZFxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc01vYmlsZVVJICYmIHRoaXMuaXNNb2RhbCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wYXJhbXMuaW5pdGlhbFJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJhbXMuaW5pdGlhbFJlc3BvbnNlLm9wZXJhdGlvbiAmJiB0aGlzLnBhcmFtcy5pbml0aWFsTWV0aG9kKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5pbml0aWFsUmVzcG9uc2Uub3BlcmF0aW9uID0gYC8ke3RoaXMucGFyYW1zLmluaXRpYWxNZXRob2R9YDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5vblNjcmVlblJlc3BvbnNlKHRoaXMucGFyYW1zLmluaXRpYWxSZXNwb25zZSwge1xyXG4gICAgICAgICAgICAgICAgSUQ6IHRoaXMuX0lELFxyXG4gICAgICAgICAgICAgICAgYmluZElEOiB0aGlzLl9JRCxcclxuICAgICAgICAgICAgICAgIF9zY3JlZW46IHRoaXMuX3NjcmVlbnNbdGhpcy5fc3RhcnRTY3JlZW5dLFxyXG4gICAgICAgICAgICAgICAgX3NjcmVlblNldDogdGhpcyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zd2l0Y2hTY3JlZW4odGhpcy5fc3RhcnRTY3JlZW4sIHRoaXMucGFyYW1zLmZvcm1Db250ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8vIE92ZXJyaWRpbmcgQmFzZVBsdWdpbidzXHJcbiAgICBwdWJsaWMgZ2V0UGx1Z2luU3R5bGUoKTogUGx1Z2luU3R5bGUge1xyXG4gICAgICAgIC8vLyBwcmlvcml0eTogcGFyYW1zID4gc2NyZWVuc2V0IHRlbXBsYXRlIGF0dHIgPiBjb25maWdcclxuICAgICAgICAvLy8gaWYgdGVtcGxhdGUgaGFzbid0IGxvYWRlZCB5ZXQgLSByZXR1cm4gdW5kZWZpbmVkIHN0eWxlLlxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIFBsdWdpblN0eWxlW3RoaXMucGFyYW1zLmRpYWxvZ1N0eWxlXSB8fFxyXG4gICAgICAgICAgICAodGhpcy50ZW1wbGF0ZUVsZW1lbnQgJiYgKFBsdWdpblN0eWxlW3RoaXMudGVtcGxhdGVFbGVtZW50LmdldEF0dHJpYnV0ZShTY3JlZW5TZXRfQ09OU1RTLmRpYWxvZ1N0eWxlKV0gfHwgdGhpcy5nZXRDb25maWcoKS5kZWZhdWx0RGlhbG9nU3R5bGUpKSB8fFxyXG4gICAgICAgICAgICBQbHVnaW5TdHlsZS5fdW5kZWZpbmVkXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHByZXBhcmVTY3JlZW5TZXRDb250YWluZXIoKSB7XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lcklEID0gdGhpcy5jb250YWluZXJJRDtcclxuXHJcbiAgICAgICAgdmFyIHRlbXBsYXRlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pc01vZGFsKSB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlID0gdGhpcy5nZXRUZW1wbGF0ZXMoKS5zY3JlZW5TZXRfZGlhbG9nO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlID0gdGhpcy5nZXRUZW1wbGF0ZXMoKS5zY3JlZW5TZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaW5uZXJDb250YWluZXJJRCA9IGNvbnRhaW5lcklEICsgJ19jb250ZW50JztcclxuICAgICAgICB2YXIgY2hpbGRDb250YWluZXJJRCA9IGNvbnRhaW5lcklEICsgJ19jaGlsZCc7XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTChcclxuICAgICAgICAgICAgJ2JlZm9yZWVuZCcsXHJcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLnRlbXBsYXRlcy5maWxsKHRlbXBsYXRlLCB7XHJcbiAgICAgICAgICAgICAgICBpbm5lckNvbnRhaW5lcklEOiBpbm5lckNvbnRhaW5lcklELFxyXG4gICAgICAgICAgICAgICAgY2hpbGRDb250YWluZXJJRDogY2hpbGRDb250YWluZXJJRCxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8vIFRPRE86IGZvciBpZTggc3VwcG9ydCwgbmVlZCB0byBiZSBhc3luYyBpbiBvcmRlciB0byBnZXQgZWxlbWVudHMgdGhhdCB3ZXJlIGFkZGVkIGJ5IHRoZSBhYm92ZS5cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLl9jYXB0aW9uRWxlbWVudCkge1xyXG4gICAgICAgICAgICB2YXIgY2FwdGlvbklkO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2hpbGQgc2NyZWVuc2V0IHRha2VzIG92ZXIgcGFyZW50J3MgY2FwdGlvbi5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2lzQ2hpbGQpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlubmVyQ29udGFpbmVySUQgKyAnX2NhcHRpb24nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgY2FwdGlvbklkID0gdGhpcy5jb250YWluZXIucGFyZW50RWxlbWVudC5pZCArICdfY29udGVudF9jYXB0aW9uJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhcHRpb25JZCA9IGlubmVyQ29udGFpbmVySUQgKyAnX2NhcHRpb24nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9jYXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNhcHRpb25JZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9lbENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlubmVyQ29udGFpbmVySUQpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzTW9kYWwgJiYgdGhpcy5fc3R5bGUgPT0gUGx1Z2luU3R5bGUubGVnYWN5KSBnaWd5YS51dGlscy5ET00uYWRkQ2xhc3NUb0VsZW1lbnQodGhpcy5fZWxDb250YWluZXIsIFNjcmVlblNldF9DT05TVFMuY29udGVudENsYXNzKTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGNsYXNzIHdpdGggY3VycmVudCBsb2NhbGUuXHJcbiAgICAgICAgLy8gVGhpcyBpcyB1c2VkIGJ5IENTUyBpbiB0aGUgZGVmYXVsdCBzY3JlZW4tc2V0cyBmb3IgUlRMIGxhbmd1YWdlcy5cclxuICAgICAgICBnaWd5YS51dGlscy5ET00uYWRkQ2xhc3NUb0VsZW1lbnQodGhpcy5fZWxDb250YWluZXIsIGBnaWd5YS1sb2NhbGUtJHtnaWd5YS50aGlzU2NyaXB0LmxhbmcubGFuZ0NvZGV9YCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2VsQ2hpbGRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjaGlsZENvbnRhaW5lcklEKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0QXBpRGF0YSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmFwaURhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFByb2ZpbGUoKSB7XHJcbiAgICAgICAgdmFyIGFwaURhdGEgPSB0aGlzLmdldEFwaURhdGEoKTtcclxuXHJcbiAgICAgICAgdmFyIHByb2ZpbGUgPSBhcGlEYXRhICYmIGFwaURhdGEuZ2V0QWNjb3VudEluZm8gJiYgYXBpRGF0YS5nZXRBY2NvdW50SW5mby5wcm9maWxlO1xyXG5cclxuICAgICAgICByZXR1cm4gcHJvZmlsZSB8fCB7fTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U2NoZW1hRGF0YSgpIHtcclxuICAgICAgICB2YXIgYXBpRGF0YSA9IHRoaXMuZ2V0QXBpRGF0YSgpO1xyXG5cclxuICAgICAgICB2YXIgZGF0YSA9IGFwaURhdGEgJiYgYXBpRGF0YS5nZXRBY2NvdW50SW5mbyAmJiBhcGlEYXRhLmdldEFjY291bnRJbmZvLmRhdGE7XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhIHx8IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRTdWJTY3JpcHRpb25zKCkge1xyXG4gICAgICAgIHZhciBhcGlEYXRhID0gdGhpcy5nZXRBcGlEYXRhKCk7XHJcblxyXG4gICAgICAgIHZhciBzdWJzY3JpcHRpb25zID0gYXBpRGF0YSAmJiBhcGlEYXRhLmdldEFjY291bnRJbmZvICYmIGFwaURhdGEuZ2V0QWNjb3VudEluZm8uc3Vic2NyaXB0aW9ucztcclxuXHJcbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbnMgfHwge307XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFByZWZlcmVuY2VzKCkge1xyXG4gICAgICAgIHZhciBhcGlEYXRhID0gdGhpcy5nZXRBcGlEYXRhKCk7XHJcblxyXG4gICAgICAgIHZhciBwcmVmZXJlbmNlcyA9IGFwaURhdGEgJiYgYXBpRGF0YS5nZXRBY2NvdW50SW5mbyAmJiBhcGlEYXRhLmdldEFjY291bnRJbmZvLnByZWZlcmVuY2VzO1xyXG5cclxuICAgICAgICByZXR1cm4gcHJlZmVyZW5jZXMgfHwge307XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZVJlZ1Rva2VuKCkge1xyXG4gICAgICAgIHRoaXMuZGF0YS5yZWdUb2tlbiA9IHRoaXMucGFyYW1zLnJlZ1Rva2VuID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXN0YWJsaXNoUmVnVG9rZW4ocmVnVG9rZW46IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMucGFyYW1zLnJlZ1Rva2VuID0gdGhpcy5kYXRhLnJlZ1Rva2VuID0gcmVnVG9rZW47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETyBwZXJoYXBzIHRoZSBmb3JtIGNvdWxkIGFsc28gYmUgdGhlIHdpZGdldCB0aGF0IG9yaWdpbmF0ZWQgdGhlIHNjcmVlblNldCByZXF1ZXN0IChsaWtlIGFuY2hvciB3aWRnZXQgb3IgdGhlIFRGQSB3aWRnZXQpXHJcbiAgICBwdWJsaWMgYXN5bmMgb25TY3JlZW5SZXNwb25zZShyZXNwb25zZTogSUZvcm1SZXNwb25zZSwgZm9ybTogSUZvcm0sIGFmdGVyRmluYWxpemVSZWdpc3RyYXRpb24/OiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKCFmb3JtKSBmb3JtID0ge30gYXMgSUZvcm07XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YS5sYXN0U3VibWl0dGVkRm9ybUlEID0gZm9ybS5JRDtcclxuICAgICAgICB0aGlzLmRhdGEubGFzdFN1Ym1pdHRlZEZvcm1SZXNwb25zZSA9IHJlc3BvbnNlO1xyXG5cclxuICAgICAgICBsZXQgbmV4dFNjcmVlbiA9IGZvcm0uc3VjY2Vzc1NjcmVlbjtcclxuXHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLnJlc3BvbnNlKSByZXNwb25zZSA9IHJlc3BvbnNlLnJlc3BvbnNlO1xyXG5cclxuICAgICAgICBpZiAocmVzcG9uc2UuYXV0b1NraXApXHJcbiAgICAgICAgLy8gYXV0b1NraXAgaXMgYmVpbmcgc2V0IG9uIHRoZSBjaGVja0F1dG9Ta2lwIGFuZCBzZW50IGJhY2sgaGVyZSBpbiBhIGR1bW15IHJlc3BvbnNlXHJcbiAgICAgICAgICAgIG5leHRTY3JlZW4gPSBmb3JtLmF1dG9Ta2lwU2NyZWVuO1xyXG4gICAgICAgIGlmIChDbG9zZVJlYXNvbnNbcmVzcG9uc2UuY2hpbGRTY3JlZW5TZXRDbG9zZVJlYXNvbl0gPT09IENsb3NlUmVhc29ucy5za2lwKSBuZXh0U2NyZWVuID0gZm9ybS5zY3JlZW5TZXRTa2lwcGVkU2NyZWVuO1xyXG5cclxuICAgICAgICBpZiAobmV4dFNjcmVlbiA9PT0gJ19maW5pc2gnKSB7XHJcbiAgICAgICAgICAgIC8vIFJlc2V0dGluZyAnbmV4dFNjcmVlbicgdG8gYmUgdW5kZWZpbmVkIGluIG9yZGVyIHRvIHByZXZlbnQgc2lkZSBlZmZlY3RzIHN1Y2ggYXMgJ29uQWZ0ZXJTdWJtaXQnIGV2ZW50IGJlaW5nIGZpcmVkIHR3aWNlICgjNjk4MTkpXHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYmVjYXVzZSBVSS1CdWlsZGVyIGluY29uc2lzdGVudGx5IHNldHMgdGhlIG5leHQtc2NyZWVuIHZhbHVlIHRvICdfZmluaXNoJy91bmRlZmluZWRcclxuICAgICAgICAgICAgbmV4dFNjcmVlbiA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChyZXNwb25zZS5yZWdUb2tlbikge1xyXG4gICAgICAgICAgICB0aGlzLmVzdGFibGlzaFJlZ1Rva2VuKHJlc3BvbnNlLnJlZ1Rva2VuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMub25BY2NvdW50SW5mbyhyZXNwb25zZSk7IC8vd2lsbCB1cGRhdGUgdGhlIHByb2ZpbGUvZGF0YSBjYWNoZSBmcm9tIHRoZSByZXNwb25zZVxyXG5cclxuICAgICAgICBpZiAoYWZ0ZXJGaW5hbGl6ZVJlZ2lzdHJhdGlvbiB8fCAodGhpcy5kYXRhLmxhc3RTdWJtaXR0ZWRGb3JtSUQgJiYgKG5leHRTY3JlZW4gfHwgIXRoaXMuZW5kRmxvd0lzUGVuZGluZygpKSkpIHtcclxuICAgICAgICAgICAgLy9BIGZvcm0gd2FzIHN1Ym1pdHRlZCwgd2UgbmVlZCB0byBpbnZva2UgYWZ0ZXJTdWJtaXQuXHJcbiAgICAgICAgICAgIC8vSWYgdGhlIGZsb3cgaXMgZW5kaW5nIGFuZCBmaW5hbGl6ZVJlZ2lzdHJhdGlvbiBpcyBuZWVkZWQsIHRoZSBmaW5hbGl6ZVJlZ2lzdHJhdGlvbiByZXNwb25zZSB3aWxsIGZpcmUgdGhlIGV2ZW50XHJcblxyXG4gICAgICAgICAgICAvLy8gd2hpbGUgc3VibWl0dGluZyBpcyBhc3luYywgdGhlIHNjcmVlbnNldCdzIGZsb3cgaXMgc3luYyBhbmQgY2FuIGVuZCBiZWZvcmUgcmVzcG9uc2UgaGFzIHJldHVybmVkLlxyXG4gICAgICAgICAgICAvLy8gaW4gdGhpcyBjYXNlLCB0aGUgcGx1Z2luIGRpc3Bvc2VzIHdoaWNoIGNhdXNlcyB1cyB0byBsb3NlIHRoZSBoYW5kbGVyIFtoZW5jZSBzdG9yaW5nIGl0IGhlcmVdLlxyXG4gICAgICAgICAgICAvLy8gVE9ETzogZml4IHRoZSBmbG93LCBzbyBpdCdsbCBjb250aW51ZSBvbmx5IEFGVEVSIHN1Ym1pdC5cclxuICAgICAgICAgICAgdmFyIG9yaWdpbmFsQWZ0ZXJTdWJtaXRIYW5kbGVyID0gdGhpcy5wYXJhbXMub25BZnRlclN1Ym1pdDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGZuT25JbmZvVXBkYXRlZCA9IHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1Ym1pdFJlc3BvbnNlID0gdGhpcy51bndyYXBSZXNwb25zZShyZXNwb25zZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYWZ0ZXJTdWJtaXRFdmVudDogSUFmdGVyU3VibWl0RXZlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnYWZ0ZXJTdWJtaXQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlbjogZm9ybS5fc2NyZWVuLklELFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm06IGZvcm0uYmluZElELFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2ZpbGU6IHRoaXMuZ2V0UHJvZmlsZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuZ2V0U2NoZW1hRGF0YSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHByZWZlcmVuY2VzOiB0aGlzLmdldFByZWZlcmVuY2VzKCksXHJcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uczogdGhpcy5nZXRTdWJTY3JpcHRpb25zKCksXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2U6IHN1Ym1pdFJlc3BvbnNlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGFyYW1zLm9uQWZ0ZXJTdWJtaXQpIHRoaXMucGFyYW1zLm9uQWZ0ZXJTdWJtaXQgPSBvcmlnaW5hbEFmdGVyU3VibWl0SGFuZGxlcjtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoUGx1Z2luRXZlbnQoYWZ0ZXJTdWJtaXRFdmVudC5ldmVudE5hbWUsIGFmdGVyU3VibWl0RXZlbnQpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKGZvcm0gaW5zdGFuY2VvZiBOZXdzbGV0dGVyU2lnbnVwRm9ybSkge1xyXG4gICAgICAgICAgICAgICAgZm5PbkluZm9VcGRhdGVkKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBOZWVkIHRvIGdldCB0aGUgdXBkYXRlZCBpbmZvIHNpbmNlIHNldEFjY291bnRJbmZvIHVwZGF0ZWQgaXQuXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlLm9wZXJhdGlvbiA9PT0gJy9hY2NvdW50cy5zZXRBY2NvdW50SW5mbycgJiYgcmVzcG9uc2UuZXJyb3JDb2RlID09IEdTRXJyb3JzLk9LICYmICghcmVzcG9uc2UucHJvZmlsZSB8fCAhcmVzcG9uc2UuZGF0YSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQWNjb3VudEluZm8oYWNjb3VudEluZm9SZXNwb25zZSA9PiBmbk9uSW5mb1VwZGF0ZWQoYWNjb3VudEluZm9SZXNwb25zZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIElmIG1pc3NpbmcgaW5mb1xyXG4gICAgICAgICAgICBlbHNlIGlmIChcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNBY2NvdW50SW5mb1JlcXVpcmVkKHJlc3BvbnNlLm9wZXJhdGlvbikgJiZcclxuICAgICAgICAgICAgICAgICghdGhpcy5nZXRBcGlEYXRhKCkuZ2V0QWNjb3VudEluZm8gfHwgIXRoaXMuZ2V0QXBpRGF0YSgpLmdldEFjY291bnRJbmZvLnByb2ZpbGUgfHwgIXRoaXMuZ2V0QXBpRGF0YSgpLmdldEFjY291bnRJbmZvLmRhdGEpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBY2NvdW50SW5mbyhhY2NvdW50SW5mb1Jlc3BvbnNlID0+IGZuT25JbmZvVXBkYXRlZChyZXNwb25zZSkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm5PbkluZm9VcGRhdGVkKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSBHU0Vycm9ycy5PSykge1xyXG4gICAgICAgICAgICB2YXIgYXBpRGF0YSA9IHRoaXMuZ2V0QXBpRGF0YSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9wZXJhdGlvbiA9PSAnL2FjY291bnRzLnJlZ2lzdGVyJyAmJiBhcGlEYXRhLmluaXRSZWdpc3RyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIC8vIGEgc3VjY2Vzc2Z1bCBjYWxsIHRvIGFjY291bnRzLnJlZ2lzdGVyIHJldm9rZXMgdGhlIHByZXZpb3VzIGluaXRSZWdpc3RyYXRpb24gcmVzcG9uc2Ugc28gdGhhdCBhIG5ldyByZWdUb2tlbiB3aWxsIGJlIGdlbmVyYXRlZCBmb3Igb3RoZXIgcmVnaXN0ZXIgZm9ybXNcclxuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBjbGVhcmluZyBzY3JlZW5zZXQgaW5pdFJlZ2lzdHJhdGlvbiBjYWNoZSAocmVnVG9rZW4pYCk7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgYXBpRGF0YS5pbml0UmVnaXN0cmF0aW9uO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50U2NyZWVuICYmIHRoaXMuX2N1cnJlbnRTY3JlZW4uaGlkZUVycm9ycygpO1xyXG4gICAgICAgICAgICBpZiAobmV4dFNjcmVlbiAmJiAoIXRoaXMuX2N1cnJlbnRTY3JlZW4gfHwgbmV4dFNjcmVlbiAhPSB0aGlzLl9jdXJyZW50U2NyZWVuLklEKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hTY3JlZW4obmV4dFNjcmVlbiwgcmVzcG9uc2UsIGZvcm0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFuZXh0U2NyZWVuKSB7XHJcbiAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgbm8gbmV4dCBzY3JlZW4gc28uLi5gKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyYW1zLnJlbWVtYmVyID0gdGhpcy5kYXRhLmV4dHJhRXZlbnREYXRhLnJlbWVtYmVyTWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuZEZsb3cocmVzcG9uc2UsIGZvcm0sIENsb3NlUmVhc29ucy5maW5pc2hlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBSZXNwb25zZSBpbmRpY2F0ZSBhbiBlcnJvclxyXG4gICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5oYW5kbGVQZW5kaW5nRXJyb3JzKHJlc3BvbnNlLCBmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyAjNjI4NDQgLSBnZXRCYXNlRm9ybSBpcyBhIG1ldGhvZCB0aGF0IHNjcmVlbiB3aWRnZXRzIGNhbiBpbXBsZW1lbnQgdG8gbG9jYXRlIHRoZSBmb3JtIHRoZXkgc2hvdWxkIGJlIHRpZWQgdG8uXHJcbiAgICAgICAgICAgIC8vIEJlY2F1c2Ugc2NyZWVuIHdpZGdldHMgZG8gbm90IGhhdmUgdG8gYmUgdGllZCB0byBhIGZvcm0sIGl0IG1heSByZXR1cm4gbm8gZm9ybS5cclxuICAgICAgICAgICAgY29uc3QgZXJyb3JGb3JtID0gZm9ybSBpbnN0YW5jZW9mIEJhc2VGb3JtID8gZm9ybSA6IGZvcm0uZ2V0RXJyb3JEaXNwbGF5Rm9ybSA/IGZvcm0uZ2V0RXJyb3JEaXNwbGF5Rm9ybSgpIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBpZiAoZXJyb3JGb3JtKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlTZXJ2ZXJFcnJvcnMocmVzcG9uc2UsIGVycm9yRm9ybSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc0FjY291bnRJbmZvUmVxdWlyZWQobWV0aG9kOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICAvLyBtZXRob2QgdGhhdCBET04nVCByZXF1aXJlIGFjY291bnQgaW5mb1xyXG4gICAgICAgICAgICAgICAgJy9hY2NvdW50cy5yZXNldFBhc3N3b3JkJyxcclxuICAgICAgICAgICAgICAgICcvYWNjb3VudHMucmVzZW5kVmVyaWZpY2F0aW9uQ29kZScsXHJcbiAgICAgICAgICAgICAgICAnL2FjY291bnRzLnRmYS5pbml0VEZBJyxcclxuICAgICAgICAgICAgXS5pbmRleE9mKG1ldGhvZCkgPT0gLTFcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdW53cmFwUmVzcG9uc2UocmVzcG9uc2U6IHsgZXZlbnQ/OiB7IHJlc3BvbnNlPzogT2JqZWN0IH0gfSkge1xyXG4gICAgICAgIGxldCBzdWJtaXRSZXNwb25zZTtcclxuICAgICAgICBpZiAocmVzcG9uc2UuZXZlbnQgJiYgcmVzcG9uc2UuZXZlbnQucmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgLy8gdW53cmFwIHNvY2lhbCBsb2dpbiByZXNwb25zZVxyXG4gICAgICAgICAgICBzdWJtaXRSZXNwb25zZSA9IHJlc3BvbnNlLmV2ZW50LnJlc3BvbnNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN1Ym1pdFJlc3BvbnNlID0gcmVzcG9uc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0LmNsb25lKHN1Ym1pdFJlc3BvbnNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLy8gVE9ETzogbW92ZSB0byBCYXNlUGx1Z2luP1xyXG4gICAgcHJpdmF0ZSBkaXNwbGF5U2VydmVyRXJyb3JzKHJlc3BvbnNlOiBJRm9ybVJlc3BvbnNlLCBmb3JtOiBCYXNlRm9ybSkge1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5zZWNyZXRRdWVzdGlvbikge1xyXG4gICAgICAgICAgICBGb3JFYWNoKGZvcm0uX3NlY3JldFF1ZXN0aW9ucywgc2VjcmV0UXVlc3Rpb25XaWRnZXQgPT4gc2VjcmV0UXVlc3Rpb25XaWRnZXQuc2V0UXVlc3Rpb24ocmVzcG9uc2Uuc2VjcmV0UXVlc3Rpb24pKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUT0RPIHdoeSBlbHNlIC0gY2FuJ3QgYW4gZXJyb3IgYmUgaW5kaWNhdGVkIGFsb25nIHdpdGggdGhlIG5lZWQgZm9yIHNlY3JldCBxdWVzdGlvbj8gKHZhbGlkYXRpb24gZXJyb3IgZm9yIGV4YW1wbGUpXHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yS2V5ID0gZm9ybS5nZXRFcnJvcktleShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcktleSkge1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuZXJyb3JNZXNzYWdlID0gdGhpcy5nZXRUZXh0KGVycm9yS2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZXJyb3JEZXRhaWxzO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuZXJyb3JEZXRhaWxzQ29kZSAvLyBUT0RPIFdoeSB0aGlzIGlzIG5vdCBkZXBlbmRhbnQgb24gYSBzcGVjaWZpYyBtYWluIGVycm9yIGNvZGU/XHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgR1NFcnJvckRldGFpbHMuU2FtZV9wYXNzd29yZDpcclxuICAgICAgICAgICAgICAgICAgICBlcnJvckRldGFpbHMgPSB0aGlzLmdldFRleHQoJ29sZF9wYXNzd29yZF9jYW5ub3RfYmVfdGhlX3NhbWVfYXNfbmV3X3Bhc3N3b3JkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBHU0Vycm9yRGV0YWlscy5JbnZhbGlkX3Bhc3N3b3JkOlxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yRGV0YWlscyA9IHRoaXMuZ2V0VGV4dCgnd3JvbmdfcGFzc3dvcmQnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5lcnJvcihyZXNwb25zZS5lcnJvck1lc3NhZ2UsIHJlc3BvbnNlLmVycm9yQ29kZSwge1xyXG4gICAgICAgICAgICAgICAgc2NyZWVuOiBmb3JtLl9zY3JlZW4uSUQsXHJcbiAgICAgICAgICAgICAgICBmb3JtOiBmb3JtLklELFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2U6IGdpZ3lhLnV0aWxzLm9iamVjdC5jbG9uZSh0aGlzLmRhdGEubGFzdFN1Ym1pdHRlZEZvcm1SZXNwb25zZSksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gZXJyb3Igd2hlbiBubyBzY3JlZW4gaXMgbG9hZGVkIC0gcHJlcmVxdWlzaXRlcyB3aGVyZSBub3QgbWV0XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fY3VycmVudFNjcmVlbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKENsb3NlUmVhc29uc1tDbG9zZVJlYXNvbnMuZXJyb3JdKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYHJlbG9hZGluZyBjYXB0Y2hhc2ApO1xyXG4gICAgICAgICAgICBGb3JFYWNoKHRoaXMuX2N1cnJlbnRTY3JlZW4uX2NhcHRjaGFzLCBjID0+IGMucmVsb2FkKCkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNlcnZlckVycm9yOiBJRXJyb3JJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlOiByZXNwb25zZS5lcnJvckNvZGUsXHJcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHJlc3BvbnNlLmN1c3RvbU1lc3NhZ2UgfHwgZXJyb3JEZXRhaWxzIHx8IHJlc3BvbnNlLmVycm9yTWVzc2FnZSxcclxuICAgICAgICAgICAgICAgIGVycm9yRmxhZ3M6IHJlc3BvbnNlLmVycm9yRmxhZ3MsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2YXIgYXJGb3JtRXJyb3JzID0gbmV3IEFycmF5PElFcnJvckluZm8+KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2UudmFsaWRhdGlvbkVycm9ycykge1xyXG4gICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmdyb3VwKGBzY3JlZW5zZXQgdmFsaWRhdGlvbiBlcnJvcnNgKS5lbmRXaGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBGb3JFYWNoKHJlc3BvbnNlLnZhbGlkYXRpb25FcnJvcnMsIChlcnJvcjogSUVycm9ySW5mbywgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSBmb3JtLmdldEZpZWxkKGVycm9yLmZpZWxkTmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGROYW1lc3BhY2UgPSBmaXJzdFBhcnQoZXJyb3IuZmllbGROYW1lLCAnLicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZE5hbWVzcGFjZSA9PT0gJ3Byb2ZpbGUnKSBmaWVsZCA9IGZvcm0uZ2V0RmllbGQoZXJyb3IuZmllbGROYW1lLnJlcGxhY2UoJ3Byb2ZpbGUuJywgJycpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCAmJiBmaWVsZC5pbnN0YW5jZUVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXJzdCB2YWxpZGF0aW9uIGVycm9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQuaW5zdGFuY2VFbGVtZW50LmZvY3VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbGlkYXRpb25FcnJvciA9IGdpZ3lhLnV0aWxzLm9iamVjdC5jbG9uZShlcnJvcik7IC8vIFRPRE8gcmVtb3ZlIHRoZSBjbG9uZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJGb3JtRXJyb3JzLnB1c2godmFsaWRhdGlvbkVycm9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybS5zaG93RmllbGRFcnJvcihmaWVsZCwgZXJyb3IuZXJyb3JDb2RlLCB0cnVlLCBlcnJvci5jdXN0b21NZXNzYWdlKSkgZXJyb3IuaGFuZGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXJ2ZXIgcmVwb3J0ZWQgZXJyb3Igd2l0aCBubyBtYXRjaGluZyBmaWVsZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLmZpZWxkTmFtZSA9PT0gJ2NhcHRjaGFUZXh0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2FybignQ2FwdGNoYSBpcyByZXF1aXJlZCBidXQgY2FwdGNoYSB3aWRnZXQgaXMgbWlzc2luZyBmcm9tIHRoZSBzdWJtaXR0ZWQgZm9ybScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhcm4oZXJyb3IuZmllbGROYW1lICsgJyBpcyBtYW5kYXRvcnkvaW52YWxpZCBidXQgaXRzIGZpZWxkIGlzIG1pc3NpbmcgZnJvbSB0aGUgc3VibWl0dGVkIGZvcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGFyRm9ybUVycm9ycy5wdXNoKHNlcnZlckVycm9yKTtcclxuICAgICAgICAgICAgZm9ybS5zaG93RXJyb3JzKFtzZXJ2ZXJFcnJvcl0sIHRydWUpO1xyXG4gICAgICAgICAgICBmb3JtLnNob3dFcnJvcnMoYXJGb3JtRXJyb3JzLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGZvcm0ub25BZnRlclZhbGlkYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwcmVwYXJlU2NyZWVucygpIHtcclxuICAgICAgICBjb25zdCBzY3JlZW5FbGVtZW50cyA9IHRoaXMudGVtcGxhdGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke1NjcmVlbl9DT05TVFMuZ2lneWFDbGFzc31gKTtcclxuICAgICAgICBsZXQgZmlyc3RTY3JlZW4gPSB0cnVlO1xyXG5cclxuICAgICAgICBGb3JFYWNoKHNjcmVlbkVsZW1lbnRzLCAoc2NyZWVuRWxlbWVudCwgaSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzY3JlZW4gPSBuZXcgU2NyZWVuKHRoaXMsIHNjcmVlbkVsZW1lbnQgYXMgSFRNTERpdkVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc2NyZWVuc1tzY3JlZW4uSURdID0gc2NyZWVuO1xyXG4gICAgICAgICAgICBpZiAoZmlyc3RTY3JlZW4pIHtcclxuICAgICAgICAgICAgICAgIGZpcnN0U2NyZWVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGFydFNjcmVlbiA9IHNjcmVlbi5JRDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy9jYWxsZWQgd2hlbiBtb2RhbCBkaWFsb2cgaXMgY2xvc2UgdG8gdW5saW5rIHdpZGdldHMgaW4gc2NyZWVuXHJcbiAgICBwdWJsaWMgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5jYW5jZWwoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2FuY2VsKCkge1xyXG4gICAgICAgIHRoaXMuaGlkZShDbG9zZVJlYXNvbnNbQ2xvc2VSZWFzb25zLmNhbmNlbGVkXSwgbnVsbCwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhpZGUocmVhc29uPzogc3RyaW5nLCByZXNwb25zZT86IElGb3JtUmVzcG9uc2UsIGFsd2F5c0NsZWFyQ29udGFpbmVyPzogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMudW5kaW1TY3JlZW5TZXQoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNNb2RhbCAmJiB0aGlzLl9jdXJyZW50U2NyZWVuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRTY3JlZW4udW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRTY3JlZW4gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGFsd2F5c0NsZWFyQ29udGFpbmVyKSB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICAgICAgc3VwZXIuY2xvc2UoXHJcbiAgICAgICAgICAgIHJlYXNvbixcclxuICAgICAgICAgICAgZ2lneWEudXRpbHMub2JqZWN0LnJlbW92ZVVuZGVmaW5lZCh7XHJcbiAgICAgICAgICAgICAgICB1c2VyOiByZXNwb25zZSAmJiByZXNwb25zZS51c2VyLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkaXNwb3NlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc0Rpc3Bvc2VkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9jaGlsZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jaGlsZC5oaWRlKENsb3NlUmVhc29uc1tDbG9zZVJlYXNvbnMuY2FuY2VsZWRCeVBhcmVudF0pO1xyXG4gICAgICAgICAgICB0aGlzLl9jaGlsZC5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoaWxkID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEZvckVhY2hQcm9wKHRoaXMuX3NjcmVlbnMsIHMgPT4gcy51bmxpbmtUZW1wbGF0ZSgpKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLl9jaGlsZCkge1xyXG4gICAgICAgICAgICB0aGlzLnVucmVnaXN0ZXJHbG9iYWxFdmVudHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlZ2lzdGVyR2xvYmFsRXZlbnRzKCkge1xyXG4gICAgICAgIHRoaXMuYWRkR2xvYmFsRXZlbnRIYW5kbGVycyh7XHJcbiAgICAgICAgICAgIG9uTG9naW46IHRoaXMub25Vc2VyU3RhdGVDaGFuZ2UsXHJcbiAgICAgICAgICAgIG9uTG9nb3V0OiB0aGlzLm9uVXNlclN0YXRlQ2hhbmdlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdW5yZWdpc3Rlckdsb2JhbEV2ZW50cygpIHtcclxuICAgICAgICB0aGlzLnJlbW92ZUdsb2JhbEV2ZW50SGFuZGxlcnMoe1xyXG4gICAgICAgICAgICBvbkxvZ2luOiB0aGlzLm9uVXNlclN0YXRlQ2hhbmdlLFxyXG4gICAgICAgICAgICBvbkxvZ291dDogdGhpcy5vblVzZXJTdGF0ZUNoYW5nZSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLy8gVE9ETzogbW92ZSB0byBCYXNlUGx1Z2luP1xyXG4gICAgcHVibGljIGdldEVycm9yTWVzc2FnZShlcnJvckNvZGU6IEdTRXJyb3JzLCBpc0JvdW5kVG9GaWVsZDogYm9vbGVhbiwgZmllbGROYW1lOiBzdHJpbmcsIGZpZWxkRGlzcGxheU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKGVycm9yQ29kZSA9PSBHU0Vycm9ycy5PSykgcmV0dXJuICcnO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKGVycm9yQ29kZSkge1xyXG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLlJFUVVJUkVEX1ZBTFVFX1ZBTElEQVRJT05fRVJST1I6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXF1aXJlZFZhbHVlVmFsaWRhdGlvbkVycm9yTWVzc2FnZShpc0JvdW5kVG9GaWVsZCwgZmllbGREaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuVU5JUVVFX0lERU5USUZJRVJfRVhJU1RTOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VW5pcXVlSWRlbnRpZmllclZhbGlkYXRpb25FcnJvck1lc3NhZ2UoZmllbGROYW1lKTtcclxuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5ORVRXT1JLX0VSUk9SOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGV4dCgnbmV0d29ya19lcnJvcicpO1xyXG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLlZBTElEQVRJT05fRVJST1I6XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRWYWxpZGF0aW9uRXJyb3JNZXNzYWdlKGZpZWxkTmFtZSwgZmllbGREaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0UmVxdWlyZWRWYWx1ZVZhbGlkYXRpb25FcnJvck1lc3NhZ2UoaXNCb3VuZFRvRmllbGQ6IGJvb2xlYW4sIGZpZWxkRGlzcGxheU5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIGlmIChpc0JvdW5kVG9GaWVsZCkge1xyXG4gICAgICAgICAgICAvLyAjNDk5NjggLSBSZXBsYWNlICVmaWVsZG5hbWUgZXZlbiB0aG91Z2ggdGhlIGRlZmF1bHRzIGRvbid0IHVzZSBpdCB0byBzdXBwb3J0ICVmaWVsZG5hbWUgaW4gY3VzdG9tTGFuZy5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGV4dCgndGhpc19maWVsZF9pc19yZXF1aXJlZCcsICclZmllbGRuYW1lJywgZmllbGREaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFRleHQoJ3BsZWFzZV9lbnRlcl9maWVsZG5hbWUnLCAnJWZpZWxkbmFtZScsIGZpZWxkRGlzcGxheU5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0VW5pcXVlSWRlbnRpZmllclZhbGlkYXRpb25FcnJvck1lc3NhZ2UoZmllbGROYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBzd2l0Y2ggKGZpZWxkTmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlICd1c2VybmFtZSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCd1c2VybmFtZV9hbHJlYWR5X2V4aXN0cycpO1xyXG4gICAgICAgICAgICBjYXNlICdlbWFpbCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCdlbWFpbF9hbHJlYWR5X2V4aXN0cycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRWYWxpZGF0aW9uRXJyb3JNZXNzYWdlKGZpZWxkTmFtZTogc3RyaW5nLCBmaWVsZERpc3BsYXlOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBzd2l0Y2ggKGZpZWxkTmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlICdlbWFpbCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCdlbWFpbF9hZGRyZXNzX2lzX2ludmFsaWQnKTtcclxuICAgICAgICAgICAgY2FzZSAncGFzc3dvcmQnOlxyXG4gICAgICAgICAgICBjYXNlICduZXdQYXNzd29yZCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCdwYXNzd29yZF9kb2VzX25vdF9tZWV0X2NvbXBsZXhpdHlfcmVxdWlyZW1lbnRzJyk7XHJcbiAgICAgICAgICAgIGNhc2UgJ3Bhc3N3b3JkUmV0eXBlJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRleHQoJ3Bhc3N3b3Jkc19kb19ub3RfbWF0Y2gnKTtcclxuICAgICAgICAgICAgY2FzZSAnbG9naW5JRCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCdpbnZhbGlkX2xvZ2luX29yX3Bhc3N3b3JkJyk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCdpbnZhbGlkX2ZpZWxkbmFtZScsICclZmllbGRuYW1lJywgZmllbGREaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVBY2NvdW50SW5mbyhmbkNhbGxiYWNrOiAocmVzcG9uc2U6IGFueSkgPT4gdm9pZCkge1xyXG4gICAgICAgIGdpZ3lhLmFjY291bnRzLmdldEFjY291bnRJbmZvKHRoaXMucGFyYW1zLCB7XHJcbiAgICAgICAgICAgIGluY2x1ZGU6ICdwcm9maWxlLGRhdGEnLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogcmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkFjY291bnRJbmZvKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIGZuQ2FsbGJhY2socmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbkFjY291bnRJbmZvKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgdmFyIGFjY291bnRJbmZvID0gcmVzcG9uc2UuYWNjb3VudEluZm8gfHwgcmVzcG9uc2U7XHJcblxyXG4gICAgICAgIHZhciBhcGlEYXRhID0gdGhpcy5nZXRBcGlEYXRhKCk7XHJcbiAgICAgICAgaWYgKCFhcGlEYXRhLmdldEFjY291bnRJbmZvKSB7XHJcbiAgICAgICAgICAgIGFwaURhdGEuZ2V0QWNjb3VudEluZm8gPSB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEZvckVhY2goWydwcm9maWxlJywgJ2RhdGEnLCAnZW1haWxzJywgJ2xvZ2luSURzJ10sIHByb3AgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYWNjb3VudEluZm9bcHJvcF0pIHtcclxuICAgICAgICAgICAgICAgIGFwaURhdGEuZ2V0QWNjb3VudEluZm9bcHJvcF0gPSBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW2FwaURhdGEuZ2V0QWNjb3VudEluZm9bcHJvcF0gfHwge30sIGFjY291bnRJbmZvW3Byb3BdXSk7XHJcbiAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgc2NyZWVuc2V0IGFjY291bnRJbmZvLiR7cHJvcH0gY2FjaGUgdXBkYXRlZDpgLCBhcGlEYXRhLmdldEFjY291bnRJbmZvW3Byb3BdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBFbnN1cmUgYW55IGNvbmRpdGlvbnMgdGhhdCByZWx5IG9uIGFjY291bnQgaW5mbyBhcmUgdXBkYXRlZC5cclxuICAgICAgICBpZiAodGhpcy5fY3VycmVudFNjcmVlbikge1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50U2NyZWVuLmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25BcGlEYXRhKHJlc3BvbnNlLCBmb3JtQ29udGV4dDogSUZvcm1Db250ZXh0KSB7XHJcbiAgICAgICAgZ2lneWEubG9nZ2VyLmRlYnVnKGB1cGRhdGluZyBzY3JlZW5zZXQgY2FjaGUgb2YgJHtyZXNwb25zZS5vcGVyYXRpb259YCk7XHJcbiAgICAgICAgdmFyIGFwaURhdGEgPSB0aGlzLmdldEFwaURhdGEoKTtcclxuICAgICAgICB2YXIgYXBpTWV0aG9kS2V5ID0gdGhpcy5nZXRBcGlNZXRob2RGcm9tRnVsbE5hbWVzcGFjZShyZXNwb25zZS5vcGVyYXRpb24pO1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5vcGVyYXRpb24uaW5kZXhPZignZ2V0UHJvdmlkZXJzJykgPiAtMSkge1xyXG4gICAgICAgICAgICBhcGlEYXRhW2FwaU1ldGhvZEtleV0gPSB7YWN0aXZlUHJvdmlkZXJzOiB0aGlzLmdldEVkaXRhYmxlVGZhUHJvdmlkZXIocmVzcG9uc2UuYWN0aXZlUHJvdmlkZXJzKX07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXBpRGF0YVthcGlNZXRob2RLZXldID0gcmVzcG9uc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVzcG9uc2UucmVnVG9rZW4pIHtcclxuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYHVwZGF0aW5nIHNjcmVlbnNldCByZWdUb2tlbmApO1xyXG4gICAgICAgICAgICB0aGlzLmVzdGFibGlzaFJlZ1Rva2VuKHJlc3BvbnNlLnJlZ1Rva2VuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBnb3RBbGxOZWVkZWREYXRhID0gdHJ1ZTtcclxuICAgICAgICBmb3IgKHZhciBtZXRob2ROYW1lIGluIHRoaXMuZGF0YS5uZWVkZWREYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICghYXBpRGF0YVttZXRob2ROYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgZ290QWxsTmVlZGVkRGF0YSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGdvdEFsbE5lZWRlZERhdGEpIHtcclxuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYGdvdCBhbGwgcmVxdWlyZWQgZGF0YWApO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWROZXh0U2NyZWVuKGZvcm1Db250ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNob29zZU5leHRTY3JlZW4obmV4dFNjcmVlblZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoIW5leHRTY3JlZW5WYWx1ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICB2YXIgcG9zc2libGVTY3JlZW5zID0gbmV4dFNjcmVlblZhbHVlLnNwbGl0KCcsJyk7XHJcblxyXG4gICAgICAgIC8vIFdlaWdodGVkIHNjcmVlbiBwb3NzaWJpbGl0aWVzXHJcbiAgICAgICAgdmFyIHdlaWdodFN1bSA9IDA7XHJcbiAgICAgICAgdmFyIHdlaWdodGVkUGFydHMgPSBbXTtcclxuICAgICAgICBGb3JFYWNoKHBvc3NpYmxlU2NyZWVucywgc2NyZWVuID0+IHtcclxuICAgICAgICAgICAgdmFyIHBhcnRzID0gc2NyZWVuLnNwbGl0KCc6Jyk7XHJcbiAgICAgICAgICAgIHZhciB3ZWlnaHQgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFyc2VJbnQocGFydHNbMV0pIDogMTtcclxuXHJcbiAgICAgICAgICAgIHdlaWdodFN1bSArPSB3ZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICB3ZWlnaHRlZFBhcnRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgc2NyZWVuOiBwYXJ0c1swXSxcclxuICAgICAgICAgICAgICAgIHdlaWdodDogd2VpZ2h0LCAvLyB0b3RhbCB3ZWlnaHQgdXAgdG8gdGhpcyBzY3JlZW5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciByYW5kb20gPSB0aGlzLl9yYW5kb20gKiB3ZWlnaHRTdW07XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkU2NyZWVuOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIFNvbWUod2VpZ2h0ZWRQYXJ0cywgdyA9PiB7XHJcbiAgICAgICAgICAgIHJhbmRvbSAtPSB3LndlaWdodDtcclxuXHJcbiAgICAgICAgICAgIGlmIChyYW5kb20gPiAwKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBzZWxlY3RlZFNjcmVlbiA9IHcuc2NyZWVuO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkU2NyZWVuO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RWRpdGFibGVUZmFQcm92aWRlcihhY3RpdmVQcm92aWRlcnMgPSBbXSk6IHN0cmluZ1tdIHtcclxuICAgICAgICB2YXIgZWRpdGFibGVQcm92aWRlcnMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFjdGl2ZVByb3ZpZGVycy5sZW5ndGggLSAwOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGlzRWRpdGFibGUgPSB0aGlzLmlzVGZhUHJvdmlkZXJFZGl0YWJsZShhY3RpdmVQcm92aWRlcnNbaV0ubmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChpc0VkaXRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBlZGl0YWJsZVByb3ZpZGVycy5wdXNoKGFjdGl2ZVByb3ZpZGVyc1tpXS5uYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZWRpdGFibGVQcm92aWRlcnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc1RmYVByb3ZpZGVyRWRpdGFibGUocHJvdmlkZXJUb0NoZWNrKTogYm9vbGVhbiB7XHJcbiAgICAgICAgLy8gZ28gb3ZlciB0aGUgbGlzdCBvZiBlZGl0YWJsZSBwcm92aWRlcnNcclxuICAgICAgICByZXR1cm4gRWRpdGFibGVUZmFQcm92aWRlcnNUeXBlc1twcm92aWRlclRvQ2hlY2tdICE9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEFwaU1ldGhvZEZyb21GdWxsTmFtZXNwYWNlKG9wZXJhdGlvbikge1xyXG4gICAgICAgIGNvbnN0IGFwaVVybFNlZ21lbnRzID0gb3BlcmF0aW9uLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgcmV0dXJuIGFwaVVybFNlZ21lbnRzW2FwaVVybFNlZ21lbnRzLmxlbmd0aCAtIDFdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3dpdGNoVG9DaGlsZFNjcmVlblNldChzY3JlZW5TZXROYW1lOiBzdHJpbmcsIHNjcmVlbklEOiBzdHJpbmcsIGZvcm06IElGb3JtKTogYm9vbGVhbiB7XHJcbiAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYG9wZW5pbmcgY2hpbGQgc2NyZWVuc2V0OiAke3NjcmVlblNldE5hbWV9LyR7c2NyZWVuSUR9YCk7XHJcblxyXG4gICAgICAgIHZhciBoaWRlQ2hpbGRIYW5kbGVyID0gKGU6IElIaWRlRXZlbnQpID0+IHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucGFyYW1zLnJlZ1Rva2VuID0gdGhpcy5kYXRhLnJlZ1Rva2VuO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChDbG9zZVJlYXNvbnNbZS5yZWFzb25dKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENsb3NlUmVhc29ucy5jYW5jZWxlZEJ5UGFyZW50OlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBDbG9zZVJlYXNvbnMuZXJyb3I6XHJcbiAgICAgICAgICAgICAgICBjYXNlIENsb3NlUmVhc29ucy5jYW5jZWxlZDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGUoZS5yZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBDbG9zZVJlYXNvbnMucGVuZGluZ0Vycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TY3JlZW5SZXNwb25zZSh0aGlzLmRhdGEubGFzdFN1Ym1pdHRlZEZvcm1SZXNwb25zZSwgZm9ybSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBDbG9zZVJlYXNvbnMuZmluaXNoZWQ6XHJcbiAgICAgICAgICAgICAgICBjYXNlIENsb3NlUmVhc29ucy5za2lwOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBDbG9zZVJlYXNvbnMubWlzc2luZzpcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQW55IGFyYml0cmFyeSByZWFzb24gd2lsbCBiZSB0cmVhdGVkIGFzIGZpbmlzaGVkIGZsb3dcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2NyZWVuUmVzcG9uc2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuT0ssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZFNjcmVlblNldENsb3NlUmVhc29uOiBlLnJlYXNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXI6IGUudXNlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBvbkVycm9yID0gZSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtcy5vbkVycm9yKSB0aGlzLnBhcmFtcy5vbkVycm9yKGUpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5oaWRlKENsb3NlUmVhc29uc1tDbG9zZVJlYXNvbnMuZXJyb3JdKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgY2hpbGRQYXJhbXM6IElTY3JlZW5TZXRQYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIHNjcmVlblNldDogc2NyZWVuU2V0TmFtZSxcclxuICAgICAgICAgICAgbGFuZzogdGhpcy5nZXRMYW5nRm9yU2NyZWVuU2V0KCksXHJcbiAgICAgICAgICAgIGN1c3RvbUxhbmc6IHRoaXMucGFyYW1zLmN1c3RvbUxhbmcsXHJcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLnBhcmFtcy53aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLnBhcmFtcy5oZWlnaHQsXHJcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMucGFyYW1zLmNvbnRleHQsXHJcbiAgICAgICAgICAgIGNpZDogdGhpcy5wYXJhbXMuY2lkLFxyXG4gICAgICAgICAgICByZWdTb3VyY2U6IHRoaXMucGFyYW1zLnJlZ1NvdXJjZSxcclxuICAgICAgICAgICAgcmVnVG9rZW46IHRoaXMucGFyYW1zLnJlZ1Rva2VuLFxyXG4gICAgICAgICAgICBvbkVycm9yOiB0aGlzLnBhcmFtcy5vbkVycm9yLFxyXG4gICAgICAgICAgICBvbkJlZm9yZVN1Ym1pdDogdGhpcy5wYXJhbXMub25CZWZvcmVTdWJtaXQsXHJcbiAgICAgICAgICAgIG9uQWZ0ZXJTdWJtaXQ6IHRoaXMucGFyYW1zLm9uQWZ0ZXJTdWJtaXQsXHJcbiAgICAgICAgICAgIG9uQmVmb3JlU2NyZWVuTG9hZDogdGhpcy5wYXJhbXMub25CZWZvcmVTY3JlZW5Mb2FkLFxyXG4gICAgICAgICAgICBvbkFmdGVyU2NyZWVuTG9hZDogdGhpcy5wYXJhbXMub25BZnRlclNjcmVlbkxvYWQsXHJcbiAgICAgICAgICAgIG9uRmllbGRDaGFuZ2VkOiB0aGlzLnBhcmFtcy5vbkZpZWxkQ2hhbmdlZCxcclxuICAgICAgICAgICAgaWdub3JlQXBpUXVldWU6IHRoaXMucGFyYW1zLmlnbm9yZUFwaVF1ZXVlLFxyXG4gICAgICAgICAgICBvbkhpZGU6IGhpZGVDaGlsZEhhbmRsZXIsXHJcbiAgICAgICAgICAgIHBhcmVudERhdGE6IHRoaXMuZGF0YSxcclxuICAgICAgICAgICAgZ2V0SW5zdGFuY2U6IGNoaWxkID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoaWxkID0gY2hpbGQgYXMgYW55O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfYWxsb3dNdWx0aXBsZUluc3RhbmNlczogdHJ1ZSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoc2NyZWVuSUQpIGNoaWxkUGFyYW1zLnN0YXJ0U2NyZWVuID0gc2NyZWVuSUQ7XHJcblxyXG4gICAgICAgIHRoaXMuaGlkZVNjcmVlblNldENvbnRhaW5lcigpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzTW9kYWwpIHtcclxuICAgICAgICAgICAgY2hpbGRQYXJhbXMubmV3TW9kYWwgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNoaWxkUGFyYW1zLmNvbnRhaW5lcklEID0gdGhpcy5fZWxDaGlsZENvbnRhaW5lci5pZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdpZ3lhW1NjcmVlblNldFBsdWdpbl9DT05TVFMubmFtZXNwYWNlXVtTY3JlZW5TZXRQbHVnaW5fQ09OU1RTLnNob3dTY3JlZW5TZXROYW1lXShjaGlsZFBhcmFtcyk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJucyB3aGV0aGVyIHNjcmVlbiB3YXMgc3dpdGNoZWRcclxuICAgIHB1YmxpYyBzd2l0Y2hTY3JlZW4oc2NyZWVuSUQ6IHN0cmluZywgcmVzcG9uc2U/OiBJRm9ybVJlc3BvbnNlLCBvRm9ybT86IElGb3JtKTogYm9vbGVhbiB7XHJcbiAgICAgICAgdmFyIHNjcmVlblBhcnRzID0gc2NyZWVuSUQuc3BsaXQoJy8nKTtcclxuXHJcbiAgICAgICAgdmFyIHNjcmVlblNldE5hbWU7XHJcbiAgICAgICAgaWYgKHNjcmVlblBhcnRzLmxlbmd0aCA+IDEpIHNjcmVlblNldE5hbWUgPSBzY3JlZW5QYXJ0cy5zaGlmdCgpO1xyXG5cclxuICAgICAgICBzY3JlZW5JRCA9IHNjcmVlblBhcnRzLmpvaW4oJy8nKTtcclxuXHJcbiAgICAgICAgLy8gaWYgeW91IHJlcXVlc3QgdGhlIHNhbWUgc2NyZWVuIHNldCAtIGp1c3Qgd29yayB3aXRoaW4gdGhlIGN1cnJlbnQgc2NyZWVuU2V0XHJcbiAgICAgICAgaWYgKHNjcmVlblNldE5hbWUgPT09IHRoaXMucGFyYW1zLnNjcmVlblNldCkge1xyXG4gICAgICAgICAgICBzY3JlZW5TZXROYW1lID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGlmICghc2NyZWVuSUQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2FybignQXR0ZW1wdCB0byBvcGVuIHNjcmVlbi1zZXQgXCInICsgc2NyZWVuU2V0TmFtZSArICdcIiBmcm9tIHdpdGhpbiB0aGUgc2FtZSBzY3JlZW4tc2V0LCB3aXRob3V0IHNwZWNpZmluZyBzY3JlZW4gdG8gbW92ZSB0by4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNjcmVlblNldE5hbWUpIHJldHVybiB0aGlzLnN3aXRjaFRvQ2hpbGRTY3JlZW5TZXQoc2NyZWVuU2V0TmFtZSwgc2NyZWVuSUQsIG9Gb3JtKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3dpdGNoVG9Mb2NhbFNjcmVlbihzY3JlZW5JRCwgcmVzcG9uc2UsIG9Gb3JtKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3dpdGNoVG9Mb2NhbFNjcmVlbihzY3JlZW5JRDogc3RyaW5nLCByZXNwb25zZT86IElGb3JtUmVzcG9uc2UsIG9Gb3JtPzogSUZvcm0pOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgaWYgKEVuZEZsb3dTY3JlZW5zW3NjcmVlbklEXSkge1xyXG4gICAgICAgICAgICB0aGlzLmVuZEZsb3cocmVzcG9uc2UsIG9Gb3JtLCBFbmRGbG93U2NyZWVuc1tzY3JlZW5JRF0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNjcmVlbklEID09PSBTY3JlZW5TZXRQbHVnaW5fQ09OU1RTLnN0YXlPblNjcmVlbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9jdXJyZW50U2NyZWVuICYmIHRoaXMuX2N1cnJlbnRTY3JlZW4uSUQgPT09IHNjcmVlbklEKVxyXG4gICAgICAgIC8vIG5vdGhpbmcgdG8gZG8gYWxyZWFkeSBvbiB0aGUgc2NyZWVuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYHN3aXRjaGluZyB0byBzY3JlZW46ICR7c2NyZWVuSUR9YCk7XHJcblxyXG4gICAgICAgIHRoaXMuX25leHRTY3JlZW4gPSB0aGlzLl9zY3JlZW5zW3NjcmVlbklEXTtcclxuICAgICAgICBpZiAoIXRoaXMuX25leHRTY3JlZW4pIHtcclxuICAgICAgICAgICAgdGhpcy53YXJuKCdNaXNzaW5nIHNjcmVlbiBcIicgKyBzY3JlZW5JRCArICdcIicpO1xyXG4gICAgICAgICAgICB0aGlzLmhpZGUoQ2xvc2VSZWFzb25zW0Nsb3NlUmVhc29ucy5taXNzaW5nXSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5kYXRhLmZpbmFsaXplUmVnaXN0cmF0aW9uTmVlZGVkICYmICF0aGlzLl9uZXh0U2NyZWVuLmhhdmVGb3JtcygpKSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IFdoeSBub3QgYWxsb3cgYSBzY3JlZW4gdGhhdCBjb250YWlucyBvbmx5IGFuIGFkIGFuZCBzY3JlZW4gbGlua3M/XHJcbiAgICAgICAgICAgIHRoaXMuZW5kRmxvdyhyZXNwb25zZSwgb0Zvcm0sIENsb3NlUmVhc29ucy5maW5pc2hlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuX2N1cnJlbnRTY3JlZW4pIHRoaXMuc2V0TmV4dFNjcmVlblNpemUoKTsgLy8gZHJhdyBhbiBlbXB0eSBzY3JlZW4gd2l0aCBhIHByb2dyZXNzXHJcblxyXG4gICAgICAgIGxldCBzaG91bGRXYWl0Rm9yRGF0YSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBsZXQgZXh0cmFQcm9maWxlRmllbGRzID0gdGhpcy5fbmV4dFNjcmVlbi5nZXRFeHRyYVByb2ZpbGVGaWVsZHMoZmFsc2UpLmpvaW4oJywnKTtcclxuXHJcbiAgICAgICAgY29uc3QgZm9ybUNvbnRleHQgPSByZXNwb25zZSBhcyBJRm9ybUNvbnRleHQ7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YS5uZWVkZWREYXRhID0gdGhpcy5fbmV4dFNjcmVlbi5nZXROZWVkZWREYXRhKGZvcm1Db250ZXh0KTtcclxuXHJcbiAgICAgICAgY29uc3QgYXBpRGF0YSA9IHRoaXMuZ2V0QXBpRGF0YSgpO1xyXG5cclxuICAgICAgICBjb25zdCBjYWxsYmFjayA9IHRoaXMucHJlcGFyZUNhbGxiYWNrKHJlcyA9PiB0aGlzLm9uQXBpRGF0YShyZXMsIGZvcm1Db250ZXh0KSk7XHJcblxyXG4gICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGByZXF1aXJlZCBkYXRhIGZvciB0aGUgc2NyZWVuOmAsIHRoaXMuZGF0YS5uZWVkZWREYXRhKTtcclxuICAgICAgICBGb3JFYWNoUHJvcCh0aGlzLmRhdGEubmVlZGVkRGF0YSwgKG1ldGhvZEluZm8sIG1ldGhvZE5hbWUpID0+IHtcclxuICAgICAgICAgICAgdmFyIGRpc2FibGVDYWNoZSA9IGdpZ3lhLnV0aWxzLnZhbGlkYXRpb24uaXNFeHBsaWNpdEZhbHNlKG1ldGhvZEluZm8uY2FjaGUpO1xyXG4gICAgICAgICAgICBpZiAoZGlzYWJsZUNhY2hlICYmIGFwaURhdGEpIGRlbGV0ZSBhcGlEYXRhW21ldGhvZE5hbWVdO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFhcGlEYXRhW21ldGhvZE5hbWVdIHx8IChtZXRob2ROYW1lID09PSAnZ2V0QWNjb3VudEluZm8nICYmIGV4dHJhUHJvZmlsZUZpZWxkcyAhPT0gJycpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXBpRGF0YVttZXRob2ROYW1lXSkgZGVsZXRlIGFwaURhdGFbbWV0aG9kTmFtZV07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kaW1TY3JlZW5TZXQoKTtcclxuICAgICAgICAgICAgICAgIHNob3VsZFdhaXRGb3JEYXRhID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBleHRyYVBhcmFtcyA9IHtjYWxsYmFja307XHJcbiAgICAgICAgICAgICAgICBpZiAobWV0aG9kSW5mby5yZXNwb25zZUhhbmRsZXIpXHJcbiAgICAgICAgICAgICAgICAvLyBJZiBtZXRob2QgaGFzIGEgc3BlY2lmaWMgcmVzcG9uc2UgaGFuZGxlciwgZ28gdGhyb3VnaCBpdCBiZWZvcmUgcGFzc2luZyB0aGUgZGF0YSB0byB0aGUgc2NyZWVuU2V0XHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFQYXJhbXMuY2FsbGJhY2sgPSByZXMgPT4gdGhpcy5vbkFwaURhdGEobWV0aG9kSW5mby5yZXNwb25zZUhhbmRsZXIocmVzKSwgZm9ybUNvbnRleHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtZXRob2ROYW1lID09PSAnZ2V0QWNjb3VudEluZm8nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4dHJhUHJvZmlsZUZpZWxkcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyYVBhcmFtc1snZXh0cmFQcm9maWxlRmllbGRzJ10gPSBleHRyYVByb2ZpbGVGaWVsZHM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGhvZCA9IGdpZ3lhLnV0aWxzLm9iamVjdC5leHByZXNzaW9uSGVscGVyKGdpZ3lhLmFjY291bnRzKS5nZXRGaWVsZChtZXRob2ROYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIHx8IGdpZ3lhLnNvY2lhbGl6ZVttZXRob2ROYW1lXSB8fCBnaWd5YS5hY2NvdW50cy50ZmFbbWV0aG9kTmFtZV0gfHwgZ2lneWEuYWNjb3VudHMuYjJiW21ldGhvZE5hbWVdO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGhvZFBhcmFtcyA9IGdpZ3lhLnV0aWxzLm9iamVjdC5yZW1vdmVVbmRlZmluZWQobWV0aG9kSW5mby5wYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1ldGhvZFBhcmFtcyAmJiBtZXRob2RQYXJhbXNbJ2luY2x1ZGUnXSAmJiB0aGlzLnBhcmFtcykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZFBhcmFtc1snaW5jbHVkZSddID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEudXRpbHMuc3RyaW5nVXRpbHMubWVyZ2VDb21tYVNlcGFyYXRlZFZhbHVlcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZFBhcmFtc1snaW5jbHVkZSddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJhbXNbJ2luY2x1ZGUnXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBtZXRob2QodGhpcy5wYXJhbXMsIG1ldGhvZFBhcmFtcywgZXh0cmFQYXJhbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChzaG91bGRXYWl0Rm9yRGF0YSkge1xyXG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgd2FpdGluZyBmb3IgcmVxdWlyZWQgZGF0YWApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZE5leHRTY3JlZW4oZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHNob3VsZENsb3NlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzTW9kYWw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGxvYWROZXh0U2NyZWVuKGZvcm1Db250ZXh0KSB7XHJcbiAgICAgICAgY29uc3Qgc2NyZWVuSUQgPSB0aGlzLl9uZXh0U2NyZWVuLklEO1xyXG4gICAgICAgIGNvbnN0IGxvZ2dlciA9IGdpZ3lhLmxvZ2dlci5ncm91cChgbG9hZGluZyBzY3JlZW4gJHtzY3JlZW5JRH1gKTtcclxuICAgICAgICBjb25zdCBiZWZvcmVMb2FkRXZlbnQgPSBnaWd5YS51dGlscy5vYmplY3QucmVtb3ZlVW5kZWZpbmVkKHtcclxuICAgICAgICAgICAgZXZlbnROYW1lOiAnYmVmb3JlU2NyZWVuTG9hZCcsXHJcbiAgICAgICAgICAgIGN1cnJlbnRTY3JlZW46IHRoaXMuX2N1cnJlbnRTY3JlZW4gJiYgdGhpcy5fY3VycmVudFNjcmVlbi5JRCxcclxuICAgICAgICAgICAgZm9ybTogdGhpcy5kYXRhLmxhc3RTdWJtaXR0ZWRGb3JtSUQsXHJcbiAgICAgICAgICAgIHJlc3BvbnNlOiBnaWd5YS51dGlscy5vYmplY3QuY2xvbmUodGhpcy5kYXRhLmxhc3RTdWJtaXR0ZWRGb3JtUmVzcG9uc2UpLFxyXG4gICAgICAgICAgICBwcm9maWxlOiB0aGlzLmdldFByb2ZpbGUoKSxcclxuICAgICAgICAgICAgZGF0YTogdGhpcy5nZXRTY2hlbWFEYXRhKCksXHJcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbnM6IHRoaXMuZ2V0U3ViU2NyaXB0aW9ucygpLFxyXG4gICAgICAgICAgICBwcmVmZXJlbmNlczogdGhpcy5nZXRQcmVmZXJlbmNlcygpLFxyXG4gICAgICAgICAgICBuZXh0U2NyZWVuOiBzY3JlZW5JRCxcclxuICAgICAgICAgICAgc2NoZW1hOiB0aGlzLmdldEFwaURhdGEoKS5nZXRTY2hlbWEsXHJcbiAgICAgICAgfSkgYXMgSUJlZm9yZUxvYWRFdmVudDtcclxuICAgICAgICBjb25zdCBldmVudFJlc3VsdCA9IHRoaXMuZGlzcGF0Y2hQbHVnaW5FdmVudChiZWZvcmVMb2FkRXZlbnQuZXZlbnROYW1lLCBiZWZvcmVMb2FkRXZlbnQpO1xyXG5cclxuICAgICAgICB0aGlzLnVuZGltU2NyZWVuU2V0KCk7XHJcblxyXG4gICAgICAgIGlmICghZXZlbnRSZXN1bHQpIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5zZXROZXh0U2NyZWVuU2l6ZSh0aGlzLl9uZXh0U2NyZWVuKTtcclxuICAgICAgICB0aGlzLl9lbENvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRTY3JlZW4pIHtcclxuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmRlYnVnKGB1bmxpbmtpbmcgY3VycmVudCBzY3JlZW46ICR7dGhpcy5fY3VycmVudFNjcmVlbi5JRH1gKTtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFNjcmVlbi51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFNjcmVlbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0ZW1wRWxDb250YWluZXIgPSB0aGlzLnByZXBhcmVOZXh0U2NyZWVuKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX25leHRTY3JlZW4ucGVyZm9ybUF1dG9Ta2lwKGZvcm1Db250ZXh0KS50aGVuKChza2lwcGVkRm9ybTogQmFzZUZvcm0pID0+IHtcclxuICAgICAgICAgICAgaWYgKHNraXBwZWRGb3JtKSB7XHJcbiAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgYXV0byBza2lwcGluZyBzY3JlZW46ICR7dGhpcy5fbmV4dFNjcmVlbi5JRH1gKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX25leHRTY3JlZW4udW5kaW1TY3JlZW4oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX25leHRTY3JlZW4udW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHtlcnJvckNvZGU6IEdTRXJyb3JzLk9LLCBhdXRvU2tpcDogdHJ1ZX07XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQub25TY3JlZW5SZXNwb25zZShyZXNwb25zZSwgc2tpcHBlZEZvcm0pOyAvLyBCZWhhdmVzIGFzIGlmIHRoZSBmaXJzdCBmb3JtIHdhcyBzdWJtaXR0ZWQgKGlmIHRoZXJlIGlzIG9uZSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0ZW1wRWxDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZWxDb250YWluZXIgJiYgdGhpcy5fZWxDb250YWluZXIucGFyZW50Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZWxDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLl9lbENvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGVtcEVsQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgdGhpcy5fZWxDb250YWluZXIgPSB0ZW1wRWxDb250YWluZXI7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50U2NyZWVuID0gdGhpcy5fbmV4dFNjcmVlbjtcclxuICAgICAgICAgICAgdGhpcy5fbmV4dFNjcmVlbiA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50U2NyZWVuLnJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRTY3JlZW4uZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNjcmVlbldpZHRoID0gdGhpcy5fY3VycmVudFNjcmVlbi5pbnN0YW5jZUVsZW1lbnQgPyB0aGlzLl9jdXJyZW50U2NyZWVuLmluc3RhbmNlRWxlbWVudC5vZmZzZXRXaWR0aCArICdweCcgOiAnJztcclxuICAgICAgICAgICAgdGhpcy5zZXRDYXB0aW9uKHRoaXMuX2N1cnJlbnRTY3JlZW4uY2FwdGlvbiwgc2NyZWVuV2lkdGgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zaG93U2NyZWVuU2V0Q29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhZnRlckxvYWRFdmVudCA9IGdpZ3lhLnV0aWxzLm9iamVjdC5yZW1vdmVVbmRlZmluZWQoe1xyXG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnYWZ0ZXJTY3JlZW5Mb2FkJyxcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTY3JlZW46IHNjcmVlbklELFxyXG4gICAgICAgICAgICAgICAgZm9ybTogdGhpcy5kYXRhLmxhc3RTdWJtaXR0ZWRGb3JtSUQsXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZTogZ2lneWEudXRpbHMub2JqZWN0LmNsb25lKHRoaXMuZGF0YS5sYXN0U3VibWl0dGVkRm9ybVJlc3BvbnNlKSxcclxuICAgICAgICAgICAgICAgIHByb2ZpbGU6IHRoaXMuZ2V0UHJvZmlsZSgpLFxyXG4gICAgICAgICAgICAgICAgcHJlZmVyZW5jZXM6IHRoaXMuX3NjcmVlblNldC5nZXRQcmVmZXJlbmNlcygpLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogdGhpcy5nZXRTY2hlbWFEYXRhKCksXHJcbiAgICAgICAgICAgIH0pIGFzIElBZnRlckxvYWRFdmVudDtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaFBsdWdpbkV2ZW50KGFmdGVyTG9hZEV2ZW50LmV2ZW50TmFtZSwgYWZ0ZXJMb2FkRXZlbnQpO1xyXG4gICAgICAgICAgICBsb2dnZXIuZW5kKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwcmVwYXJlTmV4dFNjcmVlbigpOiBIVE1MRGl2RWxlbWVudCB7XHJcbiAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYHByZXBhcmluZyBuZXh0IHNjcmVlbjogJHt0aGlzLl9uZXh0U2NyZWVuLklEfWApO1xyXG4gICAgICAgIGNvbnN0IGVsU2NyZWVuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXHJcbiAgICAgICAgICAgIGVsQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgICAgIEZvckVhY2godGhpcy5fZWxDb250YWluZXIuYXR0cmlidXRlcywgYSA9PiBlbENvbnRhaW5lci5zZXRBdHRyaWJ1dGUoYS5uYW1lLCBhLnZhbHVlKSk7XHJcblxyXG4gICAgICAgIGVsQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsU2NyZWVuKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsQ29udGFpbmVyKTtcclxuICAgICAgICB0aGlzLl9uZXh0U2NyZWVuLnBsYWNlQ29udGVudEluRWxlbWVudChlbFNjcmVlbik7XHJcbiAgICAgICAgVGVtcGxhdGVFbGVtZW50LnByZXBhcmVUZW1wbGF0ZUluc3RhbmNlcyhlbENvbnRhaW5lcik7XHJcbiAgICAgICAgdGhpcy5fbmV4dFNjcmVlbi5saW5rSW5zdGFuY2VFbGVtZW50KGVsQ29udGFpbmVyKTtcclxuICAgICAgICBlbENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIHJldHVybiBlbENvbnRhaW5lcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0Q2FwdGlvbihjYXB0aW9uOiBzdHJpbmcsIHdpZHRoPzogc3RyaW5nKSB7XHJcbiAgICAgICAgLy8gRG8gbm90IGF0dGVtcHQgdG8gc2V0IGNhcHRpb24gaWYgdGhlcmUgaXMgbm8gZWxlbWVudC5cclxuICAgICAgICAvLyBEbyBub3QgYXR0ZW1wdCB0byBzZXQgY2FwdGlvbiBpZiB3ZSBhcmUgbm90IGluIGEgbW9kYWwgYW5kIHRoZXJlIGlzIGEgY2hpbGQgc2NyZWVuLXNldCAoY2hpbGQgd2lsbCBjb250cm9sIGNhcHRpb24pLlxyXG4gICAgICAgIGlmICghdGhpcy5fY2FwdGlvbkVsZW1lbnQgfHwgKCF0aGlzLmlzTW9kYWwgJiYgdGhpcy5fY2hpbGQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghY2FwdGlvbikge1xyXG4gICAgICAgICAgICAvLyBUT0RPIHdoeSB0aGlzIGJlaGF2aW9yPyB3aHkgaWYgaXQgaXMgZW1wdHkgYW5kIG9uIG1vYmlsZSB0byBzZXQgY29udGVudCB3aXRoIGhpZGRlbiBzdHlsZT9cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTW9kYWwpIHRoaXMuX2NhcHRpb25FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQuaW5uZXJIVE1MID0gY2FwdGlvbiB8fCAnJm5ic3A7JztcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmlzTW9kYWwgJiYgIXRoaXMuaXNNb2JpbGVVSSAmJiB3aWR0aCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhcHRpb25FbGVtZW50LnN0eWxlLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0TmV4dFNjcmVlblNpemUobmV4dFNjcmVlbj86IFNjcmVlbikge1xyXG4gICAgICAgIHRoaXMuX2VsQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnJztcclxuXHJcbiAgICAgICAgdmFyIHc7XHJcbiAgICAgICAgdmFyIGg7XHJcblxyXG4gICAgICAgIGlmIChuZXh0U2NyZWVuKSB7XHJcbiAgICAgICAgICAgIHcgPSBuZXh0U2NyZWVuLndpZHRoO1xyXG4gICAgICAgICAgICBoID0gbmV4dFNjcmVlbi5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXcgfHwgIWgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbFRlbXBTY3JlZW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBuZXh0U2NyZWVuLnBsYWNlQ29udGVudEluRWxlbWVudChlbFRlbXBTY3JlZW4pO1xyXG5cclxuICAgICAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudChlbFRlbXBTY3JlZW4sIFNjcmVlblNldF9DT05TVFMuY2FsY3VsYXRlU2l6ZUNsYXNzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBnaWd5YS51dGlscy5ET00uc2V0U2l6ZShlbFRlbXBTY3JlZW4sIHcsIGgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKGVsVGVtcFNjcmVlbik7XHJcbiAgICAgICAgICAgICAgICB2YXIgYm5wID0gZ2lneWEuZ2xvYmFsLmdldEJvcmRlcnNBbmRQYWRkaW5ncyhlbFRlbXBTY3JlZW4pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF3KSB3ID0gU3RyaW5nKGVsVGVtcFNjcmVlbi5vZmZzZXRXaWR0aCArIE1hdGguY2VpbChibnAudykgKyAzMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWgpIGggPSBTdHJpbmcoZWxUZW1wU2NyZWVuLm9mZnNldEhlaWdodCArIDEpO1xyXG4gICAgICAgICAgICAgICAgZWxUZW1wU2NyZWVuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxUZW1wU2NyZWVuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHcpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTW9iaWxlVUkgJiYgKHRoaXMuaXNNb2RhbCB8fCAhdGhpcy5pc1Jlc3BvbnNpdmUpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBkbyBub3Qgc2V0IHdpZHRoIGluICUgdW5pdHMgZm9yIGxlZ2FjeS5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdldFBsdWdpblN0eWxlKCkgIT0gUGx1Z2luU3R5bGUubGVnYWN5IHx8IGdldFVuaXRNZWFzdXJlbWVudFR5cGUodykgIT0gVW5pdE1lYXN1cmVtZW50VHlwZS5wZXJjZW50YWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLnNldFNpemUodGhpcy5fZWxDb250YWluZXIsIHcsIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF4V2lkdGggPSB3ID09ICdhdXRvJyA/ICdub25lJyA6ICcnICsgKCgnJyArIHcpLmluZGV4T2YoJyUnKSA+IDAgPyB3IDogdyArICdweCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2VsQ29udGFpbmVyLnN0eWxlLm1heFdpZHRoID0gbWF4V2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGdpZ3lhLmxvY2FsSW5mby5pc0lFNyB8fCBnaWd5YS5sb2NhbEluZm8uaXNJRTggfHwgKGdpZ3lhLmxvY2FsSW5mby5pc0lFICYmIGdpZ3lhLmxvY2FsSW5mby5xdWlya3NNb2RlKSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbENvbnRhaW5lci5zdHlsZVsnX3dpZHRoJ10gPSBtYXhXaWR0aDsgLy8gRml4IGZvciBvbGQgSUUgdGhhdCBkb2VzIG5vdCByZWNvZ25pemUgbWF4V2lkdGhcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNNb2RhbCAmJiAhdGhpcy5pc01vYmlsZVVJKSB7XHJcbiAgICAgICAgICAgIC8vaWYgKGgpIHtcclxuICAgICAgICAgICAgLy8gICAgdGhpcy5fZWxDb250YWluZXIuc3R5bGUubWluSGVpZ2h0ID0gaCArICdweCc7XHJcbiAgICAgICAgICAgIC8vICAgIGlmIChnaWd5YS5sb2NhbEluZm8uaXNJRTcgfHwgZ2lneWEubG9jYWxJbmZvLmlzSUU4IHx8IChnaWd5YS5sb2NhbEluZm8uaXNJRSAmJiBnaWd5YS5sb2NhbEluZm8ucXVpcmtzTW9kZSkpXHJcbiAgICAgICAgICAgIC8vICAgICAgICB0aGlzLl9lbENvbnRhaW5lci5zdHlsZVsnX2hlaWdodCddID0gaCArICdweCc7IC8vIFdvcmthcm91bmQgZm9yIG9sZCBJRSB0aGF0IGRvZXMgbm90IHN1cHBvcnQgbWluSGVpZ2h0XHJcbiAgICAgICAgICAgIC8vfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBzaG91bGRGaW5hbGl6ZUZsb3cocmVhc29uOiBDbG9zZVJlYXNvbnMpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuX2lzQ2hpbGQgJiYgdGhpcy5lbmRGbG93SXNQZW5kaW5nKCkgJiYgcmVhc29uICE9PSBDbG9zZVJlYXNvbnMuY2FuY2VsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkb2VzU2NyZWVuSGF2ZUZvcm1zKHNjcmVlbklkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gc2NyZWVuSWQgJiYgdGhpcy5fc2NyZWVuc1tzY3JlZW5JZF0gJiYgdGhpcy5fc2NyZWVuc1tzY3JlZW5JZF0uaGF2ZUZvcm1zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRpbVNjcmVlblNldCgpIHtcclxuICAgICAgICB0aGlzLl9sb2FkaW5nSW5kaWNhdG9yICYmIHRoaXMuX2xvYWRpbmdJbmRpY2F0b3Iuc2hvdygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1bmRpbVNjcmVlblNldCgpIHtcclxuICAgICAgICB0aGlzLl9sb2FkaW5nSW5kaWNhdG9yICYmIHRoaXMuX2xvYWRpbmdJbmRpY2F0b3IuaGlkZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBoYW5kbGVQZW5kaW5nRXJyb3JzKHJlc3BvbnNlOiBJRm9ybVJlc3BvbnNlLCBvRm9ybTogSUZvcm0pIHtcclxuICAgICAgICB2YXIgZXJyb3JJbmZvOiBJRXJyb3JBdHRyaWJ1dGVJbmZvID0gUGVuZGluZ0Vycm9yQXR0cmlidXRlc1tyZXNwb25zZS5lcnJvckNvZGVdIHx8IHt9O1xyXG4gICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBzY3JlZW5zZXQgcm91dGluZyBlcnJvciBjb2RlICR7cmVzcG9uc2UuZXJyb3JDb2RlfSAtLT4gJHtlcnJvckluZm8ubmFtZX1gKTtcclxuXHJcbiAgICAgICAgdmFyIG5leHRTY3JlZW47XHJcbiAgICAgICAgaWYgKGVycm9ySW5mby5uZXh0U2NyZWVuKSBuZXh0U2NyZWVuID0gYXdhaXQgZXJyb3JJbmZvLm5leHRTY3JlZW4ob0Zvcm0pO1xyXG5cclxuICAgICAgICBpZiAobmV4dFNjcmVlbikge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3JJbmZvLnJlcXVpcmVzRmluYWxpemUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5maW5hbGl6ZVJlZ2lzdHJhdGlvbk5lZWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3JJbmZvLnJlc2V0RmluYWxpemVOZWVkZWRTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhLmZpbmFsaXplUmVnaXN0cmF0aW9uTmVlZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFRPRE8gYWRkIGEgd2FybmluZyB0aGF0IHRoZSBwZW5kaW5nIHNjcmVlbiBkb2VzIG5vdCBoYXZlIGEgZm9ybSBhbmQgY2FuIG5vdCBkZWFsIHdpdGggdGhlIHBlbmRpbmcgaXNzdWVcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3dpdGNoU2NyZWVuKG5leHRTY3JlZW4sIHJlc3BvbnNlLCBvRm9ybSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2lzQ2hpbGQpXHJcbiAgICAgICAgICAgIC8vIGFsbG93IHBhcmVudCB0byBoYW5kbGUgcGVuZGluZyBlcnJvclxyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKENsb3NlUmVhc29uc1tDbG9zZVJlYXNvbnMucGVuZGluZ0Vycm9yXSwgcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAvLyB0aGlzIGlzIHRoZSBwYXJlbnRcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLndhcm4oYE1pc3NpbmcgU2NyZWVuU2V0IGF0dHJpYnV0ZSAke2Vycm9ySW5mby5uYW1lfSBmb3IgcGVuZGluZyBlcnJvcjogJHtyZXNwb25zZS5lcnJvckNvZGV9YCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbmRGbG93SXNQZW5kaW5nKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuZmluYWxpemVSZWdpc3RyYXRpb25OZWVkZWQgJiYgdGhpcy5kYXRhLnJlZ1Rva2VuO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgZW5kRmxvdyhyZXM/OiBJRm9ybVJlc3BvbnNlLCBvRm9ybT86IElGb3JtLCByZWFzb24/OiBDbG9zZVJlYXNvbnMpIHtcclxuICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgZW5kaW5nIHNjcmVlbnNldCBmbG93YCk7XHJcblxyXG4gICAgICAgIGlmIChyZWFzb24gPT09IENsb3NlUmVhc29ucy5za2lwKSB7XHJcbiAgICAgICAgICAgIGlmIChvRm9ybSAmJiBvRm9ybS5vblNraXBwZWQpIHtcclxuICAgICAgICAgICAgICAgIG9Gb3JtLm9uU2tpcHBlZChyZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zaG91bGRGaW5hbGl6ZUZsb3cocmVhc29uKSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5leHRyYUV2ZW50RGF0YS5hbGxvd0FjY291bnRzTGlua2luZyAhPT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5hbGxvd0FjY291bnRzTGlua2luZyA9IHRoaXMuZGF0YS5leHRyYUV2ZW50RGF0YS5hbGxvd0FjY291bnRzTGlua2luZztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlZ1Rva2VuID0gdGhpcy5kYXRhLnJlZ1Rva2VuIHx8IHRoaXMucGFyYW1zLnJlZ1Rva2VuO1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZVJlZ1Rva2VuKCk7XHJcblxyXG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgc2NyZWVuc2V0IGZpbmFsaXppbmcgcmVnaXN0cmF0aW9uYCk7XHJcbiAgICAgICAgICAgIGdpZ3lhLmFjY291bnRzLmZpbmFsaXplUmVnaXN0cmF0aW9uKHRoaXMucGFyYW1zLCB7XHJcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiBnaWd5YS51dGlscy5zdHJpbmdVdGlscy5tZXJnZUNvbW1hU2VwYXJhdGVkVmFsdWVzKFxyXG4gICAgICAgICAgICAgICAgICAgICdwcm9maWxlLGRhdGEsZW1haWxzLHN1YnNjcmlwdGlvbnMscHJlZmVyZW5jZXMnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5wYXJhbXMuaW5jbHVkZSksXHJcbiAgICAgICAgICAgICAgICBkb250SGFuZGxlU2NyZWVuU2V0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcmVnVG9rZW4sXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKHJlc3BvbnNlOiBJRm9ybVJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGByZWdpc3RyYXRpb24gZmluYWxpemVkIC0gY2xlYXJpbmcgY2FjaGVgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLmZpbmFsaXplUmVnaXN0cmF0aW9uTmVlZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5hcGlEYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYHJlZ2lzdHJhdGlvbiBmYWlsZWQgZmluYWxpemluZyAtIHJlLXVzaW5nIGV4aXN0aW5nIHJlZ1Rva2VuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5yZWdUb2tlbiA9IHRoaXMucGFyYW1zLnJlZ1Rva2VuID0gcmVnVG9rZW47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TY3JlZW5SZXNwb25zZShyZXNwb25zZSwgb0Zvcm0sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlKENsb3NlUmVhc29uc1tyZWFzb25dLCByZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBCYXNlUGx1Z2luIE92ZXJyaWRlXHJcblxyXG4gICAgcHVibGljIHJlc2l6ZU1vZGFsKHNpemU6IElFbGVtZW50U2l6ZSkge1xyXG4gICAgICAgIC8vIFRPRE8gbm90IHN1cmUgd2UgbmVlZCB0aGlzIGF0IGFsbFxyXG4gICAgICAgIGlmICh0aGlzLmdldFBsdWdpblN0eWxlKCkgIT09IFBsdWdpblN0eWxlLmxlZ2FjeSkge1xyXG4gICAgICAgICAgICBpZiAoc2l6ZS5oZWlnaHQpIHRoaXMuX2VsQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IHNpemUuaGVpZ2h0O1xyXG4gICAgICAgICAgICBpZiAoc2l6ZS53aWR0aCkgdGhpcy5fZWxDb250YWluZXIuc3R5bGUud2lkdGggPSBzaXplLndpZHRoO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8qIGxlZ2FjeSBhZGp1c3RtZW50cyAqL1xyXG4gICAgICAgICAgICBpZiAoZ2V0VW5pdE1lYXN1cmVtZW50VHlwZShzaXplLndpZHRoKSA9PSBVbml0TWVhc3VyZW1lbnRUeXBlLnBlcmNlbnRhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBzaXplLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZWxDb250YWluZXIuc3R5bGUud2lkdGggPSAnJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGdldFVuaXRNZWFzdXJlbWVudFR5cGUoc2l6ZS5oZWlnaHQpID09IFVuaXRNZWFzdXJlbWVudFR5cGUucGVyY2VudGFnZSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHNpemUuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZWxDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN1cGVyLnJlc2l6ZU1vZGFsKHNpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCByZXNpemVQbHVnaW4ob2xkPzogSUVsZW1lbnRBY3R1YWxTaXplLCBjdXJyPzogSUVsZW1lbnRBY3R1YWxTaXplKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5vblZpZXdwb3J0U2l6ZUNoYW5nZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgb25WaWV3cG9ydFNpemVDaGFuZ2VkKG9sZFZpZXdwb3J0U2l6ZT86IElWaWV3cG9ydFNpemUsIGN1cnJlbnRWaWV3cG9ydFNpemU/OiBJVmlld3BvcnRTaXplKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRTY3JlZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFNjcmVlbi5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dTY3JlZW5TZXRDb250YWluZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX21vZGFsRGlhbG9nKSB7XHJcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVDbGFzc0Zyb21FbGVtZW50KHRoaXMuX21vZGFsRGlhbG9nLmdldE1vZGFsRGlhbG9nQ29udGFpbmVyKCksIFNjcmVlblNldF9DT05TVFMuZ2lneWFIaWRkZW4pO1xyXG4gICAgICAgICAgICB0aGlzLl9tb2RhbERpYWxvZy5zaG93QWxsKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gaW4gcGxhY2Ugc2NyZWVuLXNldFxyXG4gICAgICAgICAgICBnaWd5YS51dGlscy5ET00ucmVtb3ZlQ2xhc3NGcm9tRWxlbWVudCh0aGlzLl9lbENvbnRhaW5lciwgU2NyZWVuU2V0X0NPTlNUUy5naWd5YUhpZGRlbik7XHJcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudCh0aGlzLl9lbENoaWxkQ29udGFpbmVyLCBTY3JlZW5TZXRfQ09OU1RTLmdpZ3lhSGlkZGVuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoaWRlU2NyZWVuU2V0Q29udGFpbmVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9tb2RhbERpYWxvZykge1xyXG4gICAgICAgICAgICB0aGlzLl9tb2RhbERpYWxvZy5oaWRlQWxsKCk7XHJcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudCh0aGlzLl9tb2RhbERpYWxvZy5nZXRNb2RhbERpYWxvZ0NvbnRhaW5lcigpLCBTY3JlZW5TZXRfQ09OU1RTLmdpZ3lhSGlkZGVuKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBpbiBwbGFjZSBzY3JlZW4tc2V0XHJcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudCh0aGlzLl9lbENvbnRhaW5lciwgU2NyZWVuU2V0X0NPTlNUUy5naWd5YUhpZGRlbik7XHJcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVDbGFzc0Zyb21FbGVtZW50KHRoaXMuX2VsQ2hpbGRDb250YWluZXIsIFNjcmVlblNldF9DT05TVFMuZ2lneWFIaWRkZW4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldExhbmdGb3JTY3JlZW5TZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1zLl9leHBsaWNpdExhbmdcclxuICAgICAgICAgICAgPyB0aGlzLnBhcmFtcy5sYW5nIC8vIHVzZSBleHBsaWNpdCBsYW5nIHBhcmFtIGlmIHN1cHBsaWVkXHJcbiAgICAgICAgICAgIDogZ2lneWEudGhpc1NjcmlwdC5sYW5nLm9yaWdpbmFsTGFuZzsgLy8gb3RoZXJ3aXNlLCB1c2UgdGhlIG9yaWdpbmFsIChmdWxsKSBsYW5nIGZyb20gZ2xvYmFsQ29uZlxyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBwYXNzd29yZFN0cmVuZ3RoID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvcGFzc3dvcmRTdHJlbmd0aC5odG1sJyk7XHJcbmV4cG9ydCBjb25zdCBwYXNzd29yZFN0cmVuZ3RoX3N0cmVuZ3RoTWV0ZXIgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9wYXNzd29yZFN0cmVuZ3RoX3N0cmVuZ3RoTWV0ZXIuaHRtbCcpO1xyXG5leHBvcnQgY29uc3QgcGFzc3dvcmRTdHJlbmd0aF9taW5pbXVtUmVxdWlyZW1lbnRzID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvcGFzc3dvcmRTdHJlbmd0aF9taW5pbXVtUmVxdWlyZW1lbnRzLmh0bWwnKTtcclxuZXhwb3J0IGNvbnN0IHNjcmVlblNldF9kaWFsb2cgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9zY3JlZW5TZXRfZGlhbG9nLmh0bWwnKTtcclxuZXhwb3J0IGNvbnN0IHNjcmVlblNldCA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL3NjcmVlblNldC5odG1sJyk7XHJcbmV4cG9ydCBjb25zdCBwaG90b1VwbG9hZF91aSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL3Bob3RvVXBsb2FkX3VpLmh0bWwnKTtcclxuZXhwb3J0IGNvbnN0IHBob3RvVXBsb2FkX2Zvcm0gPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9waG90b1VwbG9hZF9mb3JtLmh0bWwnKTtcclxuZXhwb3J0IGNvbnN0IGlubGluZWRQYXNzd29yZFN0cmVuZ3RoID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvaW5saW5lZFBhc3N3b3JkU3RyZW5ndGguaHRtbCcpO1xyXG5leHBvcnQgY29uc3QgY29uc2VudCA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL2NvbnNlbnQuaHRtbCcpO1xyXG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XHJcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcclxuaW1wb3J0IHtCYXNlU2NyZWVuV2lkZ2V0fSBmcm9tIFwiLi9CYXNlU2NyZWVuV2lkZ2V0XCI7XHJcbmltcG9ydCB7IEdTRXJyb3JzIH0gZnJvbSBcIi4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzXCI7XHJcbmltcG9ydCB7IElGb3JtQ29udGV4dCB9IGZyb20gXCIuL0lGb3JtQ29udGV4dFwiO1xyXG5cclxuZXhwb3J0IHZhciBTd2l0Y2hTY3JlZW5fQ09OU1RTID0ge1xyXG4gICAgc2VsZWN0b3I6ICdbZGF0YS1zd2l0Y2gtc2NyZWVuXScsXHJcbiAgICBzd2l0Y2hTY3JlZW46ICdkYXRhLXN3aXRjaC1zY3JlZW4nLFxyXG4gICAgc3VjY2Vzc1NjcmVlbjogJ2RhdGEtb24tc3VjY2Vzcy1zY3JlZW4nLFxyXG4gICAgc2NyZWVuU2V0U2tpcHBlZFNjcmVlbjogJ2RhdGEtb24tc2NyZWVuc2V0LXNraXBwZWQtc2NyZWVuJyxcclxufTtcclxuRGVlcEZyZWV6ZShTd2l0Y2hTY3JlZW5fQ09OU1RTKTtcclxuZXhwb3J0IGNsYXNzIFN3aXRjaFNjcmVlbldpZGdldCBleHRlbmRzIEJhc2VTY3JlZW5XaWRnZXQ8SFRNTEFuY2hvckVsZW1lbnQ+IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gU3dpdGNoU2NyZWVuX0NPTlNUUztcclxuICAgIHB1YmxpYyBiaW5kSUQ6IHN0cmluZztcclxuICAgIHB1YmxpYyBzd2l0Y2hTY3JlZW46IHN0cmluZztcclxuICAgIHByaXZhdGUgY2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIF9zY3JlZW46IFNjcmVlbiwgZWw6IEhUTUxBbmNob3JFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIoX3NjcmVlbiwgZWwsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgLy8gTm8gZGVmaW5pdGlvbiBvZiB3aGF0IHNob3VsZCBiZSB0aGUgaWQgaW4gY2FzZSB0aGF0IG5vIElEIGlzIHB1Ymxpc2hlZC5cclxuICAgICAgICB0aGlzLmJpbmRJRCA9IHRoaXMuSUQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KSB7XHJcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUF0dHJpYnV0ZXMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5jbGlja0hhbmRsZXIgPSBldmVudCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLl9zY3JlZW4uZ2V0Rm9ybUJ5RWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZvcm1Db250ZXh0OiBJRm9ybUNvbnRleHQgPSB7XHJcbiAgICAgICAgICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLk9LLFxyXG4gICAgICAgICAgICAgICAgZXhwbGljaXRTd2l0Y2hTY3JlZW46IHRydWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LnN3aXRjaFNjcmVlbih0aGlzLnN3aXRjaFNjcmVlbiwgZm9ybUNvbnRleHQsIGZvcm0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcclxuICAgICAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSB7XHJcbiAgICAgICAgc3VwZXIuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVBdHRyaWJ1dGVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHVwZGF0ZUF0dHJpYnV0ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5zd2l0Y2hTY3JlZW4gPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoU3dpdGNoU2NyZWVuX0NPTlNUUy5zd2l0Y2hTY3JlZW4pO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnNldEF0dHJpYnV0ZSgnaHJlZicsICdqYXZhc2NyaXB0OnZvaWQoMCknKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3RhcmdldCcpO1xyXG4gICAgfVxyXG59XHJcbkJhc2VTY3JlZW5XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KFN3aXRjaFNjcmVlbldpZGdldCk7XHJcbiIsImltcG9ydCB7IERlZXBGcmVlemUsIElNYXAsIExhc3RJbmRleE9mLCBnZXRDb25kaXRpb25hbEF0dHJpYnV0ZUV4cHJlc3Npb25zLCBNYXAsIEZvckVhY2hQcm9wLCBGb3JFYWNoIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XHJcbmltcG9ydCB7IElXYXJuYWJsZSwgd2FybiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRGVidWcnO1xyXG5pbXBvcnQgeyBTY3JlZW5TZXRQbHVnaW4gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlblNldFBsdWdpbic7XHJcbmltcG9ydCB7IElFbGVtZW50QWN0dWFsU2l6ZSwgSVZpZXdwb3J0U2l6ZSB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9JbnRlcmZhY2VzJztcclxuaW1wb3J0IHsgQmFzZUZvcm0gfSBmcm9tICcuL0Jhc2VGb3JtJztcclxuXHJcbmV4cG9ydCBlbnVtIEVsZW1lbnRSb2xlcyB7XHJcbiAgICBfdW5kZWZpbmVkLFxyXG4gICAgdGVtcGxhdGUsXHJcbiAgICBpbnN0YW5jZSxcclxufVxyXG52YXIgZ2VuZXJhdGVkSWROdW1iZXIgPSAwO1xyXG5leHBvcnQgdmFyIFRlbXBsYXRlRWxlbWVudF9DT05TVFMgPSB7XHJcbiAgICBlbGVtZW50SWQ6ICdkYXRhLXNjcmVlbnNldC1lbGVtZW50LWlkJyxcclxuICAgIHB1Ymxpc2hFbGVtZW50SWQ6ICdkYXRhLXNjcmVlbnNldC1lbGVtZW50LWlkLXB1Ymxpc2gnLFxyXG4gICAgdGVtcGxhdGVGb3JBcnJheTogJ3NjcmVlblNldFRlbXBsYXRlRm9yJyxcclxuICAgIGluc3RhbmNlT2ZBcnJheTogJ3NjcmVlblNldEluc3RhbmNlT2YnLFxyXG4gICAgc2NyZWVuU2V0Um9sZXM6ICdkYXRhLXNjcmVlbnNldC1yb2xlcycsXHJcbn07XHJcbkRlZXBGcmVlemUoVGVtcGxhdGVFbGVtZW50X0NPTlNUUyk7XHJcbmV4cG9ydCBpbnRlcmZhY2UgSVRlbXBsYXRlRWxlbWVudFBhcmVudCBleHRlbmRzIElXYXJuYWJsZSB7XHJcbiAgICBfc2NyZWVuU2V0OiBTY3JlZW5TZXRQbHVnaW47XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBJU2NyZWVuU2V0U2l6ZSB7XHJcbiAgICB3aWR0aDogbnVtYmVyO1xyXG4gICAgaGVpZ2h0OiBudW1iZXI7XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBJVGVtcGxhdGVFbGVtZW50IGV4dGVuZHMgSVRlbXBsYXRlRWxlbWVudFBhcmVudCB7XHJcbiAgICBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpO1xyXG4gICAgdW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XHJcbiAgICBfcGFyZW50OiBJVGVtcGxhdGVFbGVtZW50UGFyZW50O1xyXG4gICAgdW5saW5rVGVtcGxhdGUoKTtcclxuICAgIGV2YWx1YXRlRXhwcmVzc2lvbihjb25kaXRpb25hbEV4cHJlc3Npb246IElDb25kaXRpb25hbEV4cHJlc3Npb24pO1xyXG4gICAgZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcclxuICAgIHJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCk7XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBJQ29uZGl0aW9uYWxFeHByZXNzaW9uIHtcclxuICAgIGNvbmRpdGlvbjogc3RyaW5nO1xyXG4gICAgZGVmYXVsdFZhbHVlPzogYW55O1xyXG4gICAgaWdub3JlRXJyb3I/OiBib29sZWFuO1xyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgSUNvbmRpdGlvbmFsQXR0cmlidXRlIGV4dGVuZHMgSUNvbmRpdGlvbmFsRXhwcmVzc2lvbiB7XHJcbiAgICBhdHRyaWJ1dGVOYW1lOiBzdHJpbmc7XHJcbiAgICBsYXN0QXR0cmlidXRlVmFsdWU6IHN0cmluZztcclxuICAgIGlzV2lkZ2V0UGFyYW1UYWc6IGJvb2xlYW47XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBDb25kaXRpb25hbFNjcmVlblNldCBleHRlbmRzIElFbGVtZW50QWN0dWFsU2l6ZSB7XHJcbiAgICB0cmFuc2xhdGlvbnM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XHJcbiAgICBsYW5nOiBzdHJpbmc7XHJcbn1cclxuaW50ZXJmYWNlIENvbmRpdGlvbmFsRnVuY3Rpb24gZXh0ZW5kcyBGdW5jdGlvbiB7XHJcbiAgICAoXHJcbiAgICAgICAgc2NyZWVuc2V0OiBDb25kaXRpb25hbFNjcmVlblNldCxcclxuICAgICAgICB2aWV3cG9ydDogSVZpZXdwb3J0U2l6ZSxcclxuICAgICAgICBmb3JtRGF0YTogYW55LFxyXG4gICAgICAgIHByb2ZpbGU6IGFueSxcclxuICAgICAgICBkYXRhOiBhbnksXHJcbiAgICAgICAgc3Vic2NyaXB0aW9uczogYW55LFxyXG4gICAgICAgIHByZWZlcmVuY2VzOiBhbnksXHJcbiAgICAgICAgYWNjb3VudEluZm86IGFueSxcclxuICAgICAgICB0ZmFQcm92aWRlcnM6IGFueSxcclxuICAgICAgICBhdXRoTWV0aG9kczogYW55LFxyXG4gICAgICAgIGNvbmZsaWN0aW5nQWNjb3VudDogYW55LFxyXG4gICAgICAgIHNjaGVtYTogYW55LFxyXG4gICAgICAgIF9hY2NvdW50OiBhbnksXHJcbiAgICAgICAgdmFsdWU6IHN0cmluZyxcclxuICAgICk6IGFueTtcclxufVxyXG5jb25zdCBjb25kaXRpb25hbEZ1bmN0aW9uID0gbmV3IEZ1bmN0aW9uKFxyXG4gICAgJ3NjcmVlbnNldCcsXHJcbiAgICAndmlld3BvcnQnLFxyXG4gICAgJ2Zvcm1EYXRhJyxcclxuICAgICdwcm9maWxlJyxcclxuICAgICdkYXRhJyxcclxuICAgICdzdWJzY3JpcHRpb25zJyxcclxuICAgICdwcmVmZXJlbmNlcycsXHJcbiAgICAnYWNjb3VudEluZm8nLFxyXG4gICAgJ3RmYVByb3ZpZGVycycsXHJcbiAgICAnYXV0aE1ldGhvZHMnLFxyXG4gICAgJ2NvbmZsaWN0aW5nQWNjb3VudCcsXHJcbiAgICAnc2NoZW1hJyxcclxuICAgICdfYWNjb3VudCcsXHJcbiAgICAndmFsdWUnLFxyXG4gICAgJ3JldHVybiBldmFsKHZhbHVlKTsnLFxyXG4pIGFzIENvbmRpdGlvbmFsRnVuY3Rpb247XHJcbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZUVsZW1lbnQ8VCBleHRlbmRzIEhUTUxFbGVtZW50PiBpbXBsZW1lbnRzIElUZW1wbGF0ZUVsZW1lbnQge1xyXG4gICAgcHJpdmF0ZSBldmVudEhhbmRsZXJzOiBJTWFwPEZ1bmN0aW9uW10+ID0ge307XHJcbiAgICBwdWJsaWMgSUQ6IHN0cmluZztcclxuICAgIHB1YmxpYyBwdWJsaXNoSUQ6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgaW5zdGFuY2VFbGVtZW50OiBUO1xyXG4gICAgcHVibGljIGNvbmRpdGlvbmFsRXhwcmVzc2lvbnMgPSBuZXcgQXJyYXk8SUNvbmRpdGlvbmFsQXR0cmlidXRlPigpO1xyXG4gICAgcHVibGljIGNzc0NsYXNzOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgX3NjcmVlblNldDogU2NyZWVuU2V0UGx1Z2luO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB0ZW1wbGF0ZUVsZW1lbnQ6IFQsIHB1YmxpYyBfcGFyZW50OiBJVGVtcGxhdGVFbGVtZW50UGFyZW50KSB7XHJcbiAgICAgICAgdGhpcy5fc2NyZWVuU2V0ID0gX3BhcmVudC5fc2NyZWVuU2V0O1xyXG5cclxuICAgICAgICBpZiAoVGVtcGxhdGVFbGVtZW50LmlzVGVtcGxhdGVJbnN0YW5jZSh0aGlzLnRlbXBsYXRlRWxlbWVudCkpIHtcclxuICAgICAgICAgICAgLy8gQ3JlYXRpbmcgbXVsdGlwbGUgVGVtcGxhdGVFbGVtZW50IGluc3RhbmNlcyBvbiB0aGUgc2FtZSBlbGVtZW50XHJcbiAgICAgICAgICAgIHRoaXMuSUQgPSB0aGlzLnRlbXBsYXRlRWxlbWVudC5nZXRBdHRyaWJ1dGUoVGVtcGxhdGVFbGVtZW50X0NPTlNUUy5lbGVtZW50SWQpIHx8ICcnO1xyXG4gICAgICAgICAgICB0aGlzLnB1Ymxpc2hJRCA9IHRoaXMudGVtcGxhdGVFbGVtZW50LmdldEF0dHJpYnV0ZShUZW1wbGF0ZUVsZW1lbnRfQ09OU1RTLnB1Ymxpc2hFbGVtZW50SWQpID09PSAndHJ1ZSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gQ3JlYXRpbmcgdGhlIGZpcnN0IFRlbXBsYXRlRWxlbWVudCBpbnN0YW5jZSBmb3IgdGhpcyBlbGVtZW50XHJcbiAgICAgICAgICAgIHRoaXMuSUQgPSB0aGlzLnRlbXBsYXRlRWxlbWVudC5pZCB8fCAnJztcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLklEICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wdWJsaXNoSUQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdpZCcpOyAvLyBlbGltaW5hdGUgdGhlIGlkIGZyb20gdGhlIHRlbXBsYXRlIHRvIG1ha2Ugc3VyZSB0aGF0IGlkIG9ubHkgZXhpc3RzIG9uIHRoZSBydW5uaW5nIGluc3RhbmNlIG9mIHRoZSBlbGVtZW50XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ2VuZXJhdGVkTnVtYmVyID0gKytnZW5lcmF0ZWRJZE51bWJlciArICdfJyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpOyAvLyBtYWtlIHN1cmUgZXZlcnkgSUQgaXMgYXMgdW5pcXVlIGFzIHBvc3NpYmxlXHJcbiAgICAgICAgICAgICAgICB0aGlzLklEID0gJ19fZ2lnX3RlbXBsYXRlX2VsZW1lbnRfJyArIGdlbmVyYXRlZE51bWJlcjtcclxuICAgICAgICAgICAgICAgIHRoaXMucHVibGlzaElEID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVFbGVtZW50LnNldEF0dHJpYnV0ZShUZW1wbGF0ZUVsZW1lbnRfQ09OU1RTLmVsZW1lbnRJZCwgdGhpcy5JRCk7XHJcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVFbGVtZW50LnNldEF0dHJpYnV0ZShUZW1wbGF0ZUVsZW1lbnRfQ09OU1RTLnB1Ymxpc2hFbGVtZW50SWQsIFN0cmluZyh0aGlzLnB1Ymxpc2hJRCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5JRCA9IHRoaXMuSUQudHJpbSgpO1xyXG5cclxuICAgICAgICAvLyBtYXJrIHJvbGUgb24gdGhlIGVsZW1lbnRcclxuICAgICAgICBjb25zdCBjdXJyZW50Um9sZXMgPSBUZW1wbGF0ZUVsZW1lbnQuZ2V0Um9sZXModGhpcy50ZW1wbGF0ZUVsZW1lbnQpO1xyXG4gICAgICAgIGN1cnJlbnRSb2xlcy5wdXNoKEVsZW1lbnRSb2xlcy50ZW1wbGF0ZSk7XHJcbiAgICAgICAgVGVtcGxhdGVFbGVtZW50LnNldFJvbGVzKHRoaXMudGVtcGxhdGVFbGVtZW50LCBjdXJyZW50Um9sZXMpO1xyXG5cclxuICAgICAgICAvLyBsaW5rIEpTIG9iamVjdCB0byB0ZW1wbGF0ZSBlbGVtZW50XHJcbiAgICAgICAgbGV0IHRlbXBsYXRlRm9yOiBUZW1wbGF0ZUVsZW1lbnQ8SFRNTEVsZW1lbnQ+W10gPSB0ZW1wbGF0ZUVsZW1lbnRbVGVtcGxhdGVFbGVtZW50X0NPTlNUUy50ZW1wbGF0ZUZvckFycmF5XTtcclxuICAgICAgICBpZiAoIXRlbXBsYXRlRm9yKSB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlRm9yID0gbmV3IEFycmF5PFRlbXBsYXRlRWxlbWVudDxIVE1MRWxlbWVudD4+KCk7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlRWxlbWVudFtUZW1wbGF0ZUVsZW1lbnRfQ09OU1RTLnRlbXBsYXRlRm9yQXJyYXldID0gdGVtcGxhdGVGb3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbmRpdGlvbmFsRXhwcmVzc2lvbnMgPSB0aGlzLmdldENvbmRpdGlvbmFsRXhwcmVzc2lvbih0aGlzLnRlbXBsYXRlRWxlbWVudCk7XHJcbiAgICAgICAgdGVtcGxhdGVGb3IucHVzaCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdW5saW5rVGVtcGxhdGUoKSB7XHJcbiAgICAgICAgLy8gcmVtb3ZlIGluc3RhbmNlIGxpbmtcclxuICAgICAgICB2YXIgdGVtcGxhdGVGb3I6IFRlbXBsYXRlRWxlbWVudDxIVE1MRWxlbWVudD5bXSA9IHRoaXMudGVtcGxhdGVFbGVtZW50W1RlbXBsYXRlRWxlbWVudF9DT05TVFMudGVtcGxhdGVGb3JBcnJheV07XHJcbiAgICAgICAgaWYgKHRlbXBsYXRlRm9yKSB7XHJcbiAgICAgICAgICAgIHZhciBpID0gTGFzdEluZGV4T2YodGVtcGxhdGVGb3IsIHRoaXMpO1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZUZvci5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyByZW1vdmUgcm9sZVxyXG4gICAgICAgIHZhciBjdXJyZW50Um9sZXMgPSBUZW1wbGF0ZUVsZW1lbnQuZ2V0Um9sZXModGhpcy50ZW1wbGF0ZUVsZW1lbnQpO1xyXG4gICAgICAgIHZhciBsYXN0Um9sZSA9IGN1cnJlbnRSb2xlcy5wb3AoKTtcclxuICAgICAgICBpZiAobGFzdFJvbGUgPT09IEVsZW1lbnRSb2xlcy50ZW1wbGF0ZSkgVGVtcGxhdGVFbGVtZW50LnNldFJvbGVzKHRoaXMudGVtcGxhdGVFbGVtZW50LCBjdXJyZW50Um9sZXMpO1xyXG4gICAgICAgIGVsc2UgdGhpcy53YXJuKCd1bmxpbmtUZW1wbGF0ZSB3aXRob3V0IG1hdGNoaW5nIHJvbGUnKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldENvbmRpdGlvbmFsRXhwcmVzc2lvbihlbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBsZXQgY29uZGl0aW9uYWxFeHByZXNzaW9ucyA9IFtdO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbmRpdGlvbmFsRXhwcmVzc2lvbnMgPSBnZXRDb25kaXRpb25hbEF0dHJpYnV0ZUV4cHJlc3Npb25zKGVsKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2FybignRXJyb3IgcGFyc2luZyBjb25kaXRpb25hbCBleHByZXNzaW9ucy4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbmRpdGlvbmFsRXhwcmVzc2lvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0Um9sZXMoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBFbGVtZW50Um9sZXNbXSB7XHJcbiAgICAgICAgdmFyIHJvbGVOYW1lcyA9IChlbGVtZW50LmdldEF0dHJpYnV0ZShUZW1wbGF0ZUVsZW1lbnRfQ09OU1RTLnNjcmVlblNldFJvbGVzKSB8fCAnJykuc3BsaXQoJywnKTtcclxuXHJcbiAgICAgICAgaWYgKHJvbGVOYW1lc1swXSA9PT0gJycpIHJvbGVOYW1lcy5wb3AoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIE1hcChyb2xlTmFtZXMsIHJvbGVOYW1lID0+IEVsZW1lbnRSb2xlc1tyb2xlTmFtZV0gfHwgRWxlbWVudFJvbGVzLl91bmRlZmluZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIHNldFJvbGVzKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCByb2xlczogRWxlbWVudFJvbGVzW10pIHtcclxuICAgICAgICB2YXIgcm9sZXNOYW1lcyA9IE1hcChyb2xlcywgcm9sZSA9PiBFbGVtZW50Um9sZXNbcm9sZV0pO1xyXG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFRlbXBsYXRlRWxlbWVudF9DT05TVFMuc2NyZWVuU2V0Um9sZXMsIHJvbGVzTmFtZXMuam9pbignLCcpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgd2Fybihtc2c6IHN0cmluZywgaWQ/OiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9wYXJlbnQud2Fybihtc2csIGlkID8gdGhpcy5JRCArICcuJyArIGlkIDogdGhpcy5JRCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQXNzdW1lcyB0aGF0IHByZXBhcmVUZW1wbGF0ZUluc3RhbmNlIHdhcyBjYWxsZWQgb24gdGhlIHRlbXBsYXRlIGluc3RhbmNlIGJlZm9yZSB0aGlzIGNhbGxcclxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgaW5zdGFuY2VFbGVtZW50cyA9IGdpZ3lhLnV0aWxzLkRPTS5nZXRFbGVtZW50c0J5QXR0cmlidXRlKHBhcmVudCwgJyonLCBUZW1wbGF0ZUVsZW1lbnRfQ09OU1RTLmVsZW1lbnRJZCwgdGhpcy5JRCk7XHJcblxyXG4gICAgICAgIGlmICghaW5zdGFuY2VFbGVtZW50cyB8fCAhaW5zdGFuY2VFbGVtZW50cy5sZW5ndGggfHwgIWluc3RhbmNlRWxlbWVudHNbMF0pIHtcclxuICAgICAgICAgICAgdGhpcy53YXJuKCdGYWlsZWQgdG8gZmluZCB0aGUgaW5zdGFuY2UgZWxlbWVudCB0byBsaW5rIHRvJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50ID0gaW5zdGFuY2VFbGVtZW50c1swXSBhcyBUO1xyXG5cclxuICAgICAgICAvLyBtYXJrIHJvbGVzXHJcbiAgICAgICAgdmFyIGN1cnJlbnRSb2xlcyA9IFRlbXBsYXRlRWxlbWVudC5nZXRSb2xlcyh0aGlzLmluc3RhbmNlRWxlbWVudCk7XHJcbiAgICAgICAgY3VycmVudFJvbGVzLnB1c2goRWxlbWVudFJvbGVzLmluc3RhbmNlKTtcclxuICAgICAgICBUZW1wbGF0ZUVsZW1lbnQuc2V0Um9sZXModGhpcy5pbnN0YW5jZUVsZW1lbnQsIGN1cnJlbnRSb2xlcyk7XHJcblxyXG4gICAgICAgIC8vIGxpbmsgSlMgb2JqZWN0IHRvIGluc3RhbmNlIGVsZW1lbnRcclxuICAgICAgICB2YXIgaW5zdGFuY2VPZjogVGVtcGxhdGVFbGVtZW50PEhUTUxFbGVtZW50PltdID0gdGhpcy5pbnN0YW5jZUVsZW1lbnRbVGVtcGxhdGVFbGVtZW50X0NPTlNUUy5pbnN0YW5jZU9mQXJyYXldO1xyXG5cclxuICAgICAgICBpZiAoIWluc3RhbmNlT2YpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2VPZiA9IG5ldyBBcnJheTxUZW1wbGF0ZUVsZW1lbnQ8SFRNTEVsZW1lbnQ+PigpO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudFtUZW1wbGF0ZUVsZW1lbnRfQ09OU1RTLmluc3RhbmNlT2ZBcnJheV0gPSBpbnN0YW5jZU9mO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gcmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICAgICAgRm9yRWFjaFByb3AodGhpcy5ldmVudEhhbmRsZXJzLCAoaGFuZGxlcnMsIGV2ZW50TmFtZSkgPT5cclxuICAgICAgICAgICAgRm9yRWFjaChoYW5kbGVycywgaGFuZGxlciA9PiBnaWd5YS51dGlscy5ET00uYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmluc3RhbmNlRWxlbWVudCwgZXZlbnROYW1lLCBoYW5kbGVyKSksXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaW5zdGFuY2VPZi5wdXNoKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRGcm9tSW5zdGFuY2VFbGVtZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgLy8gdW5yZWdpc3RlciBldmVudCBsaXN0ZW5lcnNcclxuICAgICAgICAgICAgRm9yRWFjaFByb3AodGhpcy5ldmVudEhhbmRsZXJzLCAoaGFuZGxlcnMsIGV2ZW50TmFtZSkgPT5cclxuICAgICAgICAgICAgICAgIEZvckVhY2goaGFuZGxlcnMsIGhhbmRsZXIgPT4gZ2lneWEudXRpbHMuRE9NLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5pbnN0YW5jZUVsZW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcikpLFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgLy8gcmVtb3ZlIHJvbGVcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRSb2xlcyA9IFRlbXBsYXRlRWxlbWVudC5nZXRSb2xlcyh0aGlzLmluc3RhbmNlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIHZhciBsYXN0Um9sZSA9IGN1cnJlbnRSb2xlcy5wb3AoKTtcclxuICAgICAgICAgICAgaWYgKGxhc3RSb2xlID09PSBFbGVtZW50Um9sZXMuaW5zdGFuY2UpIFRlbXBsYXRlRWxlbWVudC5zZXRSb2xlcyh0aGlzLmluc3RhbmNlRWxlbWVudCwgY3VycmVudFJvbGVzKTtcclxuICAgICAgICAgICAgZWxzZSB0aGlzLndhcm4oJ3VubGlua0luc3RhbmNlRWxlbWVudCB3aXRob3V0IG1hdGNoaW5nIHJvbGUnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHJlbW92ZSBsaW5rIHRvIEpTIG9iamVjdCBmcm9tIGluc3RhbmNlIGVsZW1lbnRcclxuICAgICAgICAgICAgdmFyIGluc3RhbmNlT2Y6IFRlbXBsYXRlRWxlbWVudDxIVE1MRWxlbWVudD5bXSA9IHRoaXMuaW5zdGFuY2VFbGVtZW50W1RlbXBsYXRlRWxlbWVudF9DT05TVFMuaW5zdGFuY2VPZkFycmF5XTtcclxuICAgICAgICAgICAgaWYgKGluc3RhbmNlT2YpIGluc3RhbmNlT2Yuc3BsaWNlKGdpZ3lhLnV0aWxzLmFycmF5LmluZGV4T2YoaW5zdGFuY2VPZiwgdGhpcyksIDEpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGlzVGVtcGxhdGVJbnN0YW5jZShlbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlKFRlbXBsYXRlRWxlbWVudF9DT05TVFMuZWxlbWVudElkKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHByZXBhcmVUZW1wbGF0ZUluc3RhbmNlRWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCwgcmVtb3ZlVGVtcGxhdGVSb2xlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdmFyIElEID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoVGVtcGxhdGVFbGVtZW50X0NPTlNUUy5lbGVtZW50SWQpO1xyXG4gICAgICAgIHZhciBwdWJsaXNoSWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShUZW1wbGF0ZUVsZW1lbnRfQ09OU1RTLnB1Ymxpc2hFbGVtZW50SWQpID09PSAndHJ1ZSc7XHJcblxyXG4gICAgICAgIGlmICghSUQpIHtcclxuICAgICAgICAgICAgd2FybignJywgJ0ZhaWxlZCB0byBmaW5kIGVsZW1lbnRJZCcpOyAvLyBUT0RPIHBlcmhhcHMgbWVzc2FnZSBzaG91bGQgaW5jbHVkZSBtb3JlIGluZm9ybWF0aW9uXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwdWJsaXNoSWQpIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsIElEKTtcclxuXHJcbiAgICAgICAgLy8gcmVtb3ZlIHRoZSB0ZW1wbGF0ZSByb2xlXHJcbiAgICAgICAgaWYgKHJlbW92ZVRlbXBsYXRlUm9sZSkge1xyXG4gICAgICAgICAgICB2YXIgcm9sZXMgPSBUZW1wbGF0ZUVsZW1lbnQuZ2V0Um9sZXMoZWxlbWVudCk7XHJcbiAgICAgICAgICAgIGlmIChyb2xlcy5wb3AoKSA9PT0gRWxlbWVudFJvbGVzLnRlbXBsYXRlKSBUZW1wbGF0ZUVsZW1lbnQuc2V0Um9sZXMoZWxlbWVudCwgcm9sZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHByZXBhcmVUZW1wbGF0ZUluc3RhbmNlcyh0ZW1wbGF0ZVJvb3Q6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgZWxzID0gdGVtcGxhdGVSb290LnF1ZXJ5U2VsZWN0b3JBbGwoYCpbJHtUZW1wbGF0ZUVsZW1lbnRfQ09OU1RTLmVsZW1lbnRJZH1dYCk7XHJcbiAgICAgICAgRm9yRWFjaChlbHMsIGUgPT4gVGVtcGxhdGVFbGVtZW50LnByZXBhcmVUZW1wbGF0ZUluc3RhbmNlRWxlbWVudChlIGFzIEhUTUxFbGVtZW50LCB0cnVlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIGV2ZW50c1xyXG5cclxuICAgIHB1YmxpYyBhZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbikge1xyXG4gICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudE5hbWVdO1xyXG4gICAgICAgIGlmICghaGFuZGxlcnMpIHtcclxuICAgICAgICAgICAgaGFuZGxlcnMgPSBuZXcgQXJyYXk8RnVuY3Rpb24+KCk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudE5hbWVdID0gaGFuZGxlcnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGhhbmRsZXJzLnB1c2goaGFuZGxlcik7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkgZ2lneWEudXRpbHMuRE9NLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5pbnN0YW5jZUVsZW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lOiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSBnaWd5YS51dGlscy5ET00ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLmluc3RhbmNlRWxlbWVudCwgZXZlbnROYW1lLCBoYW5kbGVyKTtcclxuXHJcbiAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50TmFtZV07XHJcbiAgICAgICAgaWYgKGhhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgIHZhciBpID0gTGFzdEluZGV4T2YoaGFuZGxlcnMsIGhhbmRsZXIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGkgPiAtMSkgaGFuZGxlcnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0TG9nZ2VyTmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRXZhbHVhdGUgY29uZGl0aW9uYWwgYXR0cmlidXRlXHJcbiAgICBwdWJsaWMgZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5jb25kaXRpb25hbEV4cHJlc3Npb25zID0gdGhpcy5nZXRDb25kaXRpb25hbEV4cHJlc3Npb24odGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xyXG4gICAgICAgIGlmICghdGhpcy5oYXNDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdpZ3lhLmxvZ2dlci5ncm91cChgY29uZGl0aW9uYWwgZXhwcmVzc2lvbnMgZm9yICR7dGhpcy5jb25zdHJ1Y3RvclsnbmFtZSddIHx8IHRoaXMuSUR9ICR7dGhpcy5nZXRMb2dnZXJOYW1lKCl9YC50cmltKCkpLmVuZFdoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbygndGVtcGxhdGUgZWxlbWVudDonLCB0aGlzKTtcclxuICAgICAgICAgICAgRm9yRWFjaCh0aGlzLmNvbmRpdGlvbmFsRXhwcmVzc2lvbnMsIChjb25kaXRpb25hbEF0dDogSUNvbmRpdGlvbmFsQXR0cmlidXRlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBldmFsdWF0aW9uUmVzdWx0ID0gdGhpcy5ldmFsdWF0ZUV4cHJlc3Npb24oY29uZGl0aW9uYWxBdHQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlQ29uZGl0aW9uYWxSZXN1bHQoZXZhbHVhdGlvblJlc3VsdCwgY29uZGl0aW9uYWxBdHQsIHRoaXMuaW5zdGFuY2VFbGVtZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdEZyb21JbnN0YW5jZUVsZW1lbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgaW5pdEZyb21JbnN0YW5jZUVsZW1lbnQoKSB7XHJcbiAgICAgICAgLy8vIFZpcnR1YWwgbWV0aG9kIHRvIGJlIG92ZXJyaWRlbiBieSBkZXJpdmVkIGNsYXNzLlxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBoYXNDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZGl0aW9uYWxFeHByZXNzaW9ucyAmJiB0aGlzLmNvbmRpdGlvbmFsRXhwcmVzc2lvbnMubGVuZ3RoID4gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXZhbHVhdGVFeHByZXNzaW9uKGNvbmRpdGlvbmFsRXhwcmVzc2lvbjogSUNvbmRpdGlvbmFsRXhwcmVzc2lvbikge1xyXG4gICAgICAgIGNvbnN0IGV4cHJlc3Npb25EYXRhID0gdGhpcy5nZXRFeHByZXNzaW9uRGF0YSgpO1xyXG4gICAgICAgIGdpZ3lhLmxvZ2dlci5kZWJ1ZyhgZXZhbHVhdGluZzpgLCB7IGNvbmRpdGlvbmFsRXhwcmVzc2lvbiwgZXhwcmVzc2lvbkRhdGEgfSk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbmRpdGlvbmFsRnVuY3Rpb24oXHJcbiAgICAgICAgICAgICAgICBleHByZXNzaW9uRGF0YS5zY3JlZW5zZXQsXHJcbiAgICAgICAgICAgICAgICBleHByZXNzaW9uRGF0YS52aWV3cG9ydCxcclxuICAgICAgICAgICAgICAgIGV4cHJlc3Npb25EYXRhLmZvcm1EYXRhLFxyXG4gICAgICAgICAgICAgICAgZXhwcmVzc2lvbkRhdGEucHJvZmlsZSxcclxuICAgICAgICAgICAgICAgIGV4cHJlc3Npb25EYXRhLmRhdGEsXHJcbiAgICAgICAgICAgICAgICBleHByZXNzaW9uRGF0YS5zdWJzY3JpcHRpb25zLFxyXG4gICAgICAgICAgICAgICAgZXhwcmVzc2lvbkRhdGEucHJlZmVyZW5jZXMsXHJcbiAgICAgICAgICAgICAgICBleHByZXNzaW9uRGF0YS5hY2NvdW50SW5mbyxcclxuICAgICAgICAgICAgICAgIGV4cHJlc3Npb25EYXRhLnRmYVByb3ZpZGVycyxcclxuICAgICAgICAgICAgICAgIGV4cHJlc3Npb25EYXRhLmF1dGhNZXRob2RzLFxyXG4gICAgICAgICAgICAgICAgZXhwcmVzc2lvbkRhdGEuY29uZmxpY3RpbmdBY2NvdW50LFxyXG4gICAgICAgICAgICAgICAgZXhwcmVzc2lvbkRhdGEuc2NoZW1hLFxyXG4gICAgICAgICAgICAgICAgZ2lneWEudXRpbHMub2JqZWN0LmV4cHJlc3Npb25IZWxwZXIoZXhwcmVzc2lvbkRhdGEpLFxyXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uYWxFeHByZXNzaW9uLmNvbmRpdGlvbixcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGlmICghY29uZGl0aW9uYWxFeHByZXNzaW9uLmlnbm9yZUVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIud2FybihgU2NyZWVuc2V0IGV4Y2VwdGlvbiBpbiBjb25kaXRpb25hbCBleHByZXNzaW9uIWAsIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25kaXRpb246IGNvbmRpdGlvbmFsRXhwcmVzc2lvbi5jb25kaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgZSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjb25kaXRpb25hbEV4cHJlc3Npb24uZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0RXhwcmVzc2lvbkRhdGEoKSB7XHJcbiAgICAgICAgY29uc3QgYXBpRGF0YSA9IHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCk7XHJcbiAgICAgICAgY29uc3Qgdmlld3BvcnRTaXplID0gZ2lneWEudXRpbHMudmlld3BvcnQuZ2V0SW5uZXJTaXplKCk7XHJcblxyXG4gICAgICAgIGxldCBleHByZXNzaW9uRGF0YSA9IHtcclxuICAgICAgICAgICAgLy8gRm9ybSBkYXRhIGNvbnRhaW5zIHNwZWNpYWwgZmllbGQgdmFsdWVzIChsaWtlIGxvZ2luSUQpIGFuZCBsb2NhbCBmaWVsZHMuXHJcbiAgICAgICAgICAgIGZvcm1EYXRhOiB7fSxcclxuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgcmVmbGVjdHMgdGhlIGFjY291bnQgaW5mbyByZXNwb25zZSAoZm9yIGxvZ2dlZCBpbiB1c2VyKSB3aXRoIHRoZSBmb3JtIGRhdGEgbWVyZ2VkIG9uIHRvcCBvZiBpdC5cclxuICAgICAgICAgICAgLy8gVXNlciBpcyBub3QgbG9nZ2VkIGluLCBzdGFydCB3aXRoIGJsYW5rIGFjY291bnQgaW5mby5cclxuICAgICAgICAgICAgcHJvZmlsZToge30sXHJcbiAgICAgICAgICAgIGRhdGE6IHt9LFxyXG4gICAgICAgICAgICBwcmVmZXJlbmNlczoge30sXHJcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbnM6IHt9LFxyXG4gICAgICAgICAgICBhdXRoTWV0aG9kczogW10sXHJcblxyXG4gICAgICAgICAgICAvLyBhcGkgZGF0YVxyXG4gICAgICAgICAgICBzY2hlbWE6IGFwaURhdGEuZ2V0U2NoZW1hIHx8IHt9LFxyXG4gICAgICAgICAgICBhY2NvdW50SW5mbzogYXBpRGF0YS5nZXRBY2NvdW50SW5mbyB8fCB7fSxcclxuICAgICAgICAgICAgdGZhUHJvdmlkZXJzOiBhcGlEYXRhLmdldFByb3ZpZGVycyB8fCB7fSxcclxuICAgICAgICAgICAgY29uZmxpY3RpbmdBY2NvdW50OiBhcGlEYXRhLmdldENvbmZsaWN0aW5nQWNjb3VudCB8fCB7fSxcclxuXHJcbiAgICAgICAgICAgIC8vIFByZXBhcmUgc2NyZWVuc2V0IG9iamVjdC5cclxuICAgICAgICAgICAgLy8gVHJhbnNsYXRpb25zIGFyZSBtYWRlIGF2YWlsYWJsZSBzcGVjaWZpY2FsbHkgZm9yIGF0dHJpYnV0ZXMgdGhhdCBuZWVkIHRvIGJlIGxvY2FsaXplZCwgc3VjaCBhcyB0aGUgcGxhY2Vob2xkZXIgYXR0cmlidXRlLlxyXG4gICAgICAgICAgICBzY3JlZW5zZXQ6IHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLl9zY3JlZW5TZXQuY29udGFpbmVyLm9mZnNldFdpZHRoLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLl9zY3JlZW5TZXQuY29udGFpbmVyLm9mZnNldEhlaWdodCxcclxuICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9uczogdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5jdXN0b21MYW5nIHx8IHt9LFxyXG4gICAgICAgICAgICAgICAgbGFuZzogdGhpcy5fc2NyZWVuU2V0LmxhbmcsXHJcbiAgICAgICAgICAgICAgICBpc01vZGFsOiB0aGlzLl9zY3JlZW5TZXQuaXNNb2RhbCxcclxuICAgICAgICAgICAgICAgIGlzTW9iaWxlOiB0aGlzLl9zY3JlZW5TZXQuaXNNb2JpbGVVSSxcclxuICAgICAgICAgICAgfSBhcyBDb25kaXRpb25hbFNjcmVlblNldCxcclxuXHJcbiAgICAgICAgICAgIHZpZXdwb3J0OiB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogdmlld3BvcnRTaXplLncsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHZpZXdwb3J0U2l6ZS5oLFxyXG4gICAgICAgICAgICAgICAgb3JpZW50YXRpb246IGdpZ3lhLnV0aWxzLnZpZXdwb3J0LmdldE9yaWVudGF0aW9uKCksXHJcbiAgICAgICAgICAgIH0gYXMgSVZpZXdwb3J0U2l6ZSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBGaXJzdCwgYXR0ZW1wdCB0byBnZXQgdGhlIGFjY291bnQgaW5mby4gVGhlIHVzZXIgbWF5IG5vdCBiZSBsb2dnZWQgaW4uXHJcbiAgICAgICAgaWYgKGFwaURhdGEuZ2V0QWNjb3VudEluZm8pIHtcclxuICAgICAgICAgICAgLy8gU2V0IG1lcmdlZCBkYXRhIHRvIGFjY291bnQgaW5mby5cclxuICAgICAgICAgICAgZXhwcmVzc2lvbkRhdGEgPSBnaWd5YS51dGlscy5vYmplY3QuY2xvbmUoXHJcbiAgICAgICAgICAgICAgICBnaWd5YS51dGlscy5vYmplY3QuZXh0cmFjdFByb3BlcnRpZXMoYXBpRGF0YS5nZXRBY2NvdW50SW5mbywgZXhwcmVzc2lvbkRhdGEsICdwcm9maWxlfGRhdGF8cHJlZmVyZW5jZXN8c3Vic2NyaXB0aW9uc3xhdXRoTWV0aG9kcycpLFxyXG4gICAgICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFBvcHVsYXRlIGZvcm0gZGF0YSBpZiBlbGVtZW50IGlzIHdpdGhpbiBmb3JtLiBPdGhlcndpc2UsIHByb2ZpbGUvZGF0YSBmaWVsZHMgYXJlIHBvcHVsYXRlZCBieSBBUEkgZGF0YS5cclxuICAgICAgICAvLyBQYXJlbnQgaXMgdHlwaWNhbGx5IGVpdGhlciBmb3JtIG9yIHNjcmVlbiBlbGVtZW50LlxyXG4gICAgICAgIGlmICgvKnRoaXMuX3BhcmVudCBpbnN0YW5jZW9mIEJhc2VGb3JtICYmICovIHRoaXMuX3BhcmVudFsnaXNQb3B1bGF0ZWQnXSkge1xyXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSBmbGF0IGZvcm0gZGF0YSBpbiB0aGUgc2FtZSB3YXkgaXQncyBnZW5lcmF0ZWQgZm9yIG90aGVyIGV2ZW50cy5cclxuICAgICAgICAgICAgZXhwcmVzc2lvbkRhdGEuZm9ybURhdGEgPSAodGhpcy5fcGFyZW50IGFzIEJhc2VGb3JtKS5nZXRGbGF0Rm9ybURhdGEodHJ1ZSwgZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgLy8gRGVlcCBtZXJnZSBmb3JtIGRhdGEgb24gdG9wIG9mIGFjY291bnQgaW5mbyBBUEkgZGF0YS5cclxuICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSAodGhpcy5fcGFyZW50IGFzIEJhc2VGb3JtKS5nZXRGb3JtRGF0YShmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICBleHByZXNzaW9uRGF0YSA9IGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbZXhwcmVzc2lvbkRhdGEsIGZvcm1EYXRhXSwgdHJ1ZSkgYXMgYW55O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGV4cHJlc3Npb25EYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBleGVjdXRlQ29uZGl0aW9uYWxSZXN1bHQoZXZhbHVhdGlvblJlc3VsdDogc3RyaW5nLCBjb25kaXRpb25hbEF0dDogSUNvbmRpdGlvbmFsQXR0cmlidXRlLCBlbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGV2YWx1YXRpb25SZXN1bHQgPSBnaWd5YS51dGlscy52YWxpZGF0aW9uLmlzRXhwbGljaXRGYWxzZShldmFsdWF0aW9uUmVzdWx0KSA/IGV2YWx1YXRpb25SZXN1bHQgOiBldmFsdWF0aW9uUmVzdWx0IHx8IGNvbmRpdGlvbmFsQXR0LmRlZmF1bHRWYWx1ZTtcclxuXHJcbiAgICAgICAgaWYgKGV2YWx1YXRpb25SZXN1bHQgPT09IGNvbmRpdGlvbmFsQXR0Lmxhc3RBdHRyaWJ1dGVWYWx1ZSkge1xyXG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgYXR0cmlidXRlICcke2NvbmRpdGlvbmFsQXR0LmF0dHJpYnV0ZU5hbWV9JyByZW1haW5lZCB0aGUgc2FtZTogJHtldmFsdWF0aW9uUmVzdWx0fWApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKFxyXG4gICAgICAgICAgICAgICAgYGF0dHJpYnV0ZSAnJHtjb25kaXRpb25hbEF0dC5hdHRyaWJ1dGVOYW1lfScgY2hhbmdlZDogJHtKU09OLnN0cmluZ2lmeShjb25kaXRpb25hbEF0dC5sYXN0QXR0cmlidXRlVmFsdWUpfSA9PiAke0pTT04uc3RyaW5naWZ5KFxyXG4gICAgICAgICAgICAgICAgICAgIGV2YWx1YXRpb25SZXN1bHQsXHJcbiAgICAgICAgICAgICAgICApfWAsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbmRpdGlvbmFsQXR0Lmxhc3RBdHRyaWJ1dGVWYWx1ZSA9IGV2YWx1YXRpb25SZXN1bHQ7XHJcbiAgICAgICAgICAgIGlmIChjb25kaXRpb25hbEF0dC5hdHRyaWJ1dGVOYW1lID09PSAnY2xhc3MnICYmIHRoaXMuY3NzQ2xhc3MpIHtcclxuICAgICAgICAgICAgICAgIGV2YWx1YXRpb25SZXN1bHQgPSBgJHtldmFsdWF0aW9uUmVzdWx0IHx8ICcnfSAke3RoaXMuY3NzQ2xhc3N9YC50cmltKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgIWV2YWx1YXRpb25SZXN1bHQgJiYgLy8gdmFsdWUgaXMgZmFsc3kgYW5kXHJcbiAgICAgICAgICAgICAgICAoIWdpZ3lhLnV0aWxzLnZhbGlkYXRpb24uaXNFeHBsaWNpdEZhbHNlKGV2YWx1YXRpb25SZXN1bHQpIHx8IC8vIGl0J3Mgbm90IGV4cGxpY2l0IGZhbHNlIChpLmUgbnVsbCwgdW5kZWZpbmVkLCAnJylcclxuICAgICAgICAgICAgICAgICAgICBnaWd5YS51dGlscy5ET00uaXNIVE1MQm9vbGVhbkF0dHJpYnV0ZShjb25kaXRpb25hbEF0dC5hdHRyaWJ1dGVOYW1lKSlcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBvciBpdCdzIGFuIGh0bWwgYm9vbGVhbiBhdHRyaWJ1dGUgKGZhbHNlIHZhbHVlIHJlcXVpcmVzIHRvIGZ1bGx5IHJlbW92ZSBpdClcclxuICAgICAgICAgICAgICAgIGdpZ3lhLl8ucGx1Z2lucy51dGlscy5ET00uc2V0QXR0cmlidXRlKGVsZW1lbnQsIGNvbmRpdGlvbmFsQXR0LmF0dHJpYnV0ZU5hbWUsIG51bGwpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXR0clZhbCA9IHR5cGVvZiBldmFsdWF0aW9uUmVzdWx0ID09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkoZXZhbHVhdGlvblJlc3VsdCkgOiBldmFsdWF0aW9uUmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgZ2lneWEuXy5wbHVnaW5zLnV0aWxzLkRPTS5zZXRBdHRyaWJ1dGUoZWxlbWVudCwgY29uZGl0aW9uYWxBdHQuYXR0cmlidXRlTmFtZSwgYXR0clZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBldmFsdWF0aW9uUmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNldExhc3RDb25kaXRpb25hbFZhbHVlcygpIHtcclxuICAgICAgICBGb3JFYWNoKHRoaXMuY29uZGl0aW9uYWxFeHByZXNzaW9ucywgKGNvbmRpdGlvbmFsQXR0OiBJQ29uZGl0aW9uYWxBdHRyaWJ1dGUpID0+IHtcclxuICAgICAgICAgICAgY29uZGl0aW9uYWxBdHQubGFzdEF0dHJpYnV0ZVZhbHVlID0gJyc7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtcclxuICAgIHBhc3N3b3JkU3RyZW5ndGgsXHJcbiAgICBwYXNzd29yZFN0cmVuZ3RoX3N0cmVuZ3RoTWV0ZXIsXHJcbiAgICBwYXNzd29yZFN0cmVuZ3RoX21pbmltdW1SZXF1aXJlbWVudHMsXHJcbiAgICBzY3JlZW5TZXRfZGlhbG9nLFxyXG4gICAgc2NyZWVuU2V0LFxyXG4gICAgcGhvdG9VcGxvYWRfdWksXHJcbiAgICBwaG90b1VwbG9hZF9mb3JtLFxyXG4gICAgaW5saW5lZFBhc3N3b3JkU3RyZW5ndGgsXHJcbiAgICBjb25zZW50LFxyXG59IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UmVzb3VyY2VzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZXNDYWNoZSB7XHJcbiAgICBwcml2YXRlIF9tYXA6IHtcclxuICAgICAgICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XHJcbiAgICB9ID0ge307XHJcblxyXG4gICAgcHVibGljIGdldChrZXkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwW2tleV07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldChrZXk6IHN0cmluZywgdmFsdWU6IGFueSkge1xyXG4gICAgICAgIC8vIFRPRE86IHZhbHVlIG5lZWQgdG8gc3VwcG9ydCBib3RoIHN0cmluZyBhbmQgc3RyaW5nIGFycmF5IHBlcmhhcHMgd2l0aCB0ZW1wbGF0ZXMgdGhpcyBpcyBub3QgbmVlZGVkIGFueW1vcmVcclxuICAgICAgICB0aGlzLl9tYXBba2V5XSA9IHZhbHVlIGluc3RhbmNlb2YgQXJyYXkgPyB2YWx1ZS5qb2luKCcnKSA6IHZhbHVlO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEZWZhdWx0VGVtcGxhdGVzKCkge1xyXG4gICAgdmFyIHRlbXBsYXRlcyA9IG5ldyBUZW1wbGF0ZXNDYWNoZSgpO1xyXG5cclxuICAgIHRlbXBsYXRlcy5zZXQoJ3Bhc3N3b3JkU3RyZW5ndGgnLCBwYXNzd29yZFN0cmVuZ3RoKTtcclxuICAgIHRlbXBsYXRlcy5zZXQoJ3Bhc3N3b3JkU3RyZW5ndGgtc3RyZW5ndGhNZXRlcicsIHBhc3N3b3JkU3RyZW5ndGhfc3RyZW5ndGhNZXRlcik7XHJcbiAgICB0ZW1wbGF0ZXMuc2V0KCdwYXNzd29yZFN0cmVuZ3RoLW1pbmltdW1SZXF1aXJlbWVudHMnLCBwYXNzd29yZFN0cmVuZ3RoX21pbmltdW1SZXF1aXJlbWVudHMpO1xyXG4gICAgdGVtcGxhdGVzLnNldCgnc2NyZWVuU2V0LWRpYWxvZycsIHNjcmVlblNldF9kaWFsb2cpO1xyXG4gICAgdGVtcGxhdGVzLnNldCgnc2NyZWVuU2V0Jywgc2NyZWVuU2V0KTtcclxuICAgIHRlbXBsYXRlcy5zZXQoJ3Bob3RvVXBsb2FkX3VpJywgcGhvdG9VcGxvYWRfdWkpO1xyXG4gICAgdGVtcGxhdGVzLnNldCgncGhvdG9VcGxvYWRfZm9ybScsIHBob3RvVXBsb2FkX2Zvcm0pO1xyXG4gICAgdGVtcGxhdGVzLnNldCgnaW5saW5lZFBhc3N3b3JkU3RyZW5ndGgnLCBpbmxpbmVkUGFzc3dvcmRTdHJlbmd0aCk7XHJcbiAgICB0ZW1wbGF0ZXMuc2V0KCdjb25zZW50JywgY29uc2VudCk7XHJcblxyXG4gICAgcmV0dXJuIHRlbXBsYXRlcztcclxufVxyXG4iLCJpbXBvcnQge0Jhc2VTY3JlZW5XaWRnZXR9IGZyb20gXCIuLi9CYXNlU2NyZWVuV2lkZ2V0XCI7XHJcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcclxuaW1wb3J0IHtCYXNlQXBpSGFuZGxlcn0gZnJvbSBcIi4uL0hhbmRsZXJzL0FwaUhhbmRsZXJcIjtcclxuaW1wb3J0IHtUcmFuc2xhdGVkV2lkZ2V0fSBmcm9tIFwiLi9UcmFuc2xhdGVkV2lkZ2V0XCI7XHJcblxyXG5leHBvcnQgY29uc3QgQXBpTGlua19DT05TVFMgPSB7XHJcbiAgICBzZWxlY3RvcjogJ1tkYXRhLWdpZ3lhLWFwaS1saW5rXScsXHJcbiAgICBhdHRyaWJ1dGVOYW1lOiAnZGF0YS1naWd5YS1hcGktbGluaycsXHJcbiAgICBkaXNhYmxlVGltZW91dEluU2Vjb25kczogJ2RhdGEtZGlzYWJsZS10aW1lb3V0JyxcclxuICAgIGRpc2FibGVkQ2xhc3M6ICdnaWd5YS1kaXNhYmxlZC10ZXh0JyxcclxuICAgIGRlcHM6IFtUcmFuc2xhdGVkV2lkZ2V0XSAvL2RlcHMgZG9lc24ndCBkbyBhbnl0aGluZywgb25seSBtYWtlIHN1cmUgVHJhbnNsYXRlZFdpZGdldCBpcyByZWdpc3RlcmVkIGJlZm9yZSB0aGlzIG9uZSAoYnkgaW1wb3J0aW5nIGl0KVxyXG59O1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQXBpTGlua1dpZGdldENvbmZpZyB7XHJcbiAgICBkZWZhdWx0RGlzYWJsZVRpbWVvdXQ6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFwaUxpbmtXaWRnZXQgZXh0ZW5kcyBCYXNlU2NyZWVuV2lkZ2V0PEhUTUxTcGFuRWxlbWVudD4ge1xyXG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBBcGlMaW5rX0NPTlNUUztcclxuICAgIHByaXZhdGUgX2Rpc2FibGVUaW1lb3V0OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9hcGlIYW5kbGVyOiBCYXNlQXBpSGFuZGxlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihfc2NyZWVuOiBTY3JlZW4sIGVsOiBIVE1MU3BhbkVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICBwcml2YXRlIF9hcGlMaXN0ID0gZ2lneWEuXy5hckFwaUxpc3QsXHJcbiAgICAgICAgICAgICAgICBwcml2YXRlIF9kb21VdGlscyA9IGdpZ3lhLnV0aWxzLkRPTSxcclxuICAgICAgICAgICAgICAgIHByaXZhdGUgX2NvbmZpZzogSUFwaUxpbmtXaWRnZXRDb25maWcgPSB7IGRlZmF1bHREaXNhYmxlVGltZW91dDogMTAgfSkge1xyXG4gICAgICAgIHN1cGVyKF9zY3JlZW4sIGVsLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xyXG4gICAgICAgIHRoaXMuX2FwaUhhbmRsZXIgPSB0aGlzLl9nZXRBcGlIYW5kbGVyKCk7XHJcbiAgICAgICAgaWYodGhpcy5fYXBpSGFuZGxlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXREaXNhYmxlVGltZW91dCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9hZGRDbGlja0hhbmRsZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xyXG4gICAgICAgIHRoaXMuX3JlbW92ZUNsaWNrSGFuZGxlcigpO1xyXG4gICAgICAgIHN1cGVyLnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIF9jbGlja0hhbmRsZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fZGlzYWJsZSgpO1xyXG4gICAgICAgIHRoaXMuX2FwaUhhbmRsZXIuc2VuZCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIF9nZXRBcGlIYW5kbGVyKCk6IEJhc2VBcGlIYW5kbGVyIHtcclxuICAgICAgICBjb25zdCBtZXRob2ROYW1lID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEFwaUxpbmtfQ09OU1RTLmF0dHJpYnV0ZU5hbWUpO1xyXG4gICAgICAgIGlmKCFtZXRob2ROYW1lKSB7XHJcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci53YXJuKGBbJHtBcGlMaW5rX0NPTlNUUy5hdHRyaWJ1dGVOYW1lfV06IG1pc3NpbmcgYXBpIG1ldGhvZCBuYW1lYCk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc2VydmVyQXBpcyA9IDxnaWd5YS5fLlNlcnZlckFwaVtdPnRoaXMuX2FwaUxpc3QuZmlsdGVyKGFwaSA9PiBhcGkgaW5zdGFuY2VvZiBnaWd5YS5fLlNlcnZlckFwaSk7XHJcblxyXG4gICAgICAgIHJldHVybiBCYXNlQXBpSGFuZGxlci5nZXRIYW5kbGVyKG1ldGhvZE5hbWUsIHRoaXMuX3NjcmVlblNldC5kYXRhLCBzZXJ2ZXJBcGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9hZGRDbGlja0hhbmRsZXIoKSB7XHJcbiAgICAgICAgdGhpcy5fZG9tVXRpbHMuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmluc3RhbmNlRWxlbWVudCwgJ2NsaWNrJywgdGhpcy5fY2xpY2tIYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9yZW1vdmVDbGlja0hhbmRsZXIoKSB7XHJcbiAgICAgICAgdGhpcy5fZG9tVXRpbHMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLmluc3RhbmNlRWxlbWVudCwgJ2NsaWNrJywgdGhpcy5fY2xpY2tIYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9zZXREaXNhYmxlVGltZW91dCgpIHtcclxuICAgICAgICBsZXQgZGlzYWJsZVRpbWVvdXQgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoQXBpTGlua19DT05TVFMuZGlzYWJsZVRpbWVvdXRJblNlY29uZHMpO1xyXG4gICAgICAgIGlmKCFkaXNhYmxlVGltZW91dCB8fCBpc05hTihOdW1iZXIoZGlzYWJsZVRpbWVvdXQpKSkge1xyXG4gICAgICAgICAgICBkaXNhYmxlVGltZW91dCA9IFN0cmluZyh0aGlzLl9jb25maWcuZGVmYXVsdERpc2FibGVUaW1lb3V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZGlzYWJsZVRpbWVvdXQgPSBOdW1iZXIoZGlzYWJsZVRpbWVvdXQpICogMTAwMDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9kaXNhYmxlKCkge1xyXG4gICAgICAgIHRoaXMuX3JlbW92ZUNsaWNrSGFuZGxlcigpO1xyXG4gICAgICAgIHRoaXMuX2RvbVV0aWxzLmFkZENsYXNzVG9FbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50LCBBcGlMaW5rX0NPTlNUUy5kaXNhYmxlZENsYXNzKTtcclxuXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VuYWJsZSgpO1xyXG4gICAgICAgIH0sIHRoaXMuX2Rpc2FibGVUaW1lb3V0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9lbmFibGUoKSB7XHJcbiAgICAgICAgdGhpcy5fYWRkQ2xpY2tIYW5kbGVyKCk7XHJcbiAgICAgICAgdGhpcy5fZG9tVXRpbHMucmVtb3ZlQ2xhc3NGcm9tRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCwgQXBpTGlua19DT05TVFMuZGlzYWJsZWRDbGFzcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbkJhc2VTY3JlZW5XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KEFwaUxpbmtXaWRnZXQpO1xyXG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplLCBTb21lLCBGb3JFYWNoIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XHJcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XHJcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcclxuaW1wb3J0IHsgSVNjcmVlbldpZGdldCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZVNjcmVlbldpZGdldCc7XHJcbmltcG9ydCB7IEZvcm1JbnB1dCwgRm9ybUlucHV0X0NPTlNUUyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0Zvcm1JbnB1dCc7XHJcbmltcG9ydCB7IElGb3JtV2lkZ2V0LCBCYXNlRm9ybVdpZGdldCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm1XaWRnZXQnO1xyXG5pbXBvcnQgeyBFcnJvckRpc3BsYXlFbGVtZW50LCBFcnJvckRpc3BsYXlFbGVtZW50X0NPTlNUUyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRXJyb3JEaXNwbGF5RWxlbWVudCc7XHJcblxyXG5leHBvcnQgY29uc3QgQXJyYXlNYW5hZ2VyX0NPTlNUID0ge1xyXG4gICAgc2VsZWN0b3I6ICcuZ2lneWEtY29tcG9zaXRlLWNvbnRyb2wtYXJyYXktd2lkZ2V0JyxcclxuICAgIGNvbnRhaW5lclNlbGVjdG9yOiAnLmdpZ3lhLWFycmF5LW1hbmFnZXInLFxyXG4gICAgZm9ybUVsU2VsZWN0b3I6ICdpbnB1dCxzZWxlY3QsLmdpZ3lhLWFycmF5LW1hbmFnZXInLFxyXG4gICAgYWRkQnV0dG9uU2VsZWN0b3I6ICdidXR0b24uZ2lneWEtYXJyYXktYWRkLWJ0bicsXHJcbiAgICByZW1vdmVCdXR0b25TZWxlY3RvcjogJ2J1dHRvbi5naWd5YS1hcnJheS1yZW1vdmUtYnRuJyxcclxuICAgIGl0ZW1XcmFwcGVyQ2xhc3M6ICdnaWd5YS1hcnJheS10ZW1wbGF0ZScsXHJcbiAgICBpbnB1dHNXcmFwcGVyQ2xhc3M6ICdpbnB1dHMtd3JhcHBlcicsXHJcbiAgICBidXR0b25zV3JhcHBlckNsYXNzOiAnYnV0dG9ucy13cmFwcGVyJyxcclxuICAgIHRlbXBsYXRlSXRlbUF0dHI6ICdkYXRhLWFycmF5LXRlbXBsYXRlLWlkJyxcclxuICAgIGFycmF5TWFuYWdlclJvb3RBdHRyOiAnZGF0YS1hcnJheS1tYW5hZ2VyLXJvb3QnLFxyXG4gICAgZGVsZXRlRGlzYWJsZWRDbGFzczogJ2Rpc2FibGUtZGVsZXRlJyxcclxuICAgIGluZGV4TWF0Y2hlcjogL1xcWyhbMC05XSldL2csXHJcbn07XHJcbkRlZXBGcmVlemUoQXJyYXlNYW5hZ2VyX0NPTlNUKTtcclxubGV0IF9pZEdlbmVyYXRvciA9IDA7XHJcbmV4cG9ydCBjbGFzcyBBcnJheU1hbmFnZXJJdGVtIHtcclxuICAgIHByaXZhdGUgX3VuaXF1ZUl0ZW1JRDtcclxuICAgIHByaXZhdGUgX2NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgcHJpdmF0ZSBfaW5wdXRzV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgcHJpdmF0ZSBfYnV0dG9uc1dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHByaXZhdGUgX2Zvcm06IEJhc2VGb3JtO1xyXG4gICAgcHJpdmF0ZSBfc2NyZWVuOiBTY3JlZW47XHJcblxyXG4gICAgcHVibGljIG9uRGlzcG9zZTogQXJyYXk8KCkgPT4gdm9pZD4gPSBbXTtcclxuICAgIHB1YmxpYyBzY3JlZW5XaWRnZXRzOiBBcnJheTxJU2NyZWVuV2lkZ2V0PiA9IFtdO1xyXG4gICAgcHVibGljIGZvcm1JbnB1dHM6IEFycmF5PEZvcm1JbnB1dD4gPSBbXTtcclxuICAgIHB1YmxpYyBmb3JtV2lkZ2V0czogQXJyYXk8SUZvcm1XaWRnZXQ+ID0gW107XHJcbiAgICBwdWJsaWMgYm91bmRlZEVycm9yczogQXJyYXk8RXJyb3JEaXNwbGF5RWxlbWVudD4gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgYXJyYXlNYW5hZ2VyOiBBcnJheU1hbmFnZXJXaWRnZXQsIHByaXZhdGUgX2luZGV4OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9mb3JtID0gYXJyYXlNYW5hZ2VyLl9mb3JtO1xyXG4gICAgICAgIHRoaXMuX3NjcmVlbiA9IGFycmF5TWFuYWdlci5fc2NyZWVuO1xyXG5cclxuICAgICAgICB0aGlzLl91bmlxdWVJdGVtSUQgPSBgYXJyYXktdGVtcGxhdGUtJHtEYXRlLm5vdygpfS0ke19pbmRleH1gO1xyXG5cclxuICAgICAgICB0aGlzLl9idXR0b25zV3JhcHBlci5pZCA9IGAke3RoaXMuX3VuaXF1ZUl0ZW1JRH1fJHtBcnJheU1hbmFnZXJfQ09OU1QuYnV0dG9uc1dyYXBwZXJDbGFzc31gO1xyXG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudCh0aGlzLl9idXR0b25zV3JhcHBlciwgQXJyYXlNYW5hZ2VyX0NPTlNULmJ1dHRvbnNXcmFwcGVyQ2xhc3MpO1xyXG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudCh0aGlzLl9pbnB1dHNXcmFwcGVyLCBBcnJheU1hbmFnZXJfQ09OU1QuaW5wdXRzV3JhcHBlckNsYXNzKTtcclxuXHJcbiAgICAgICAgdGhpcy5faW5wdXRzV3JhcHBlci5hcHBlbmRDaGlsZChhcnJheU1hbmFnZXIuY3JlYXRlSW5wdXRzV3JhcHBlcigpKTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVtb3ZlQnV0dG9uID0gYXJyYXlNYW5hZ2VyLmF0dGFjaFJlbW92ZUJ1dHRvbih0aGlzKTtcclxuICAgICAgICB0aGlzLl9idXR0b25zV3JhcHBlci5hcHBlbmRDaGlsZChyZW1vdmVCdXR0b24pO1xyXG5cclxuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5faW5wdXRzV3JhcHBlcik7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX2J1dHRvbnNXcmFwcGVyKTtcclxuXHJcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZENsYXNzVG9FbGVtZW50KHRoaXMuX2NvbnRhaW5lciwgQXJyYXlNYW5hZ2VyX0NPTlNULml0ZW1XcmFwcGVyQ2xhc3MpO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoQXJyYXlNYW5hZ2VyX0NPTlNULnRlbXBsYXRlSXRlbUF0dHIsIHRoaXMuX3VuaXF1ZUl0ZW1JRCk7XHJcblxyXG4gICAgICAgIC8vIG1hcCBvbGQgaWRzIHRvIHRoZSBuZXcgaWRzLCB3ZSBoYXZlIHRvIGRvIHRoaXMgc2luY2UgZWFjaCBpZCBtdXN0IGFsd2F5cyBtYXAgdG8gdGhlIHNhbWUgbmV3IGlkXHJcbiAgICAgICAgY29uc3QgaWRzTWFwID0gdGhpcy5fZ2V0QWxsRWxlbWVudHMoKVxyXG4gICAgICAgICAgICAuZmlsdGVyKGVsID0+IEJvb2xlYW4oZWwuaWQpKVxyXG4gICAgICAgICAgICAucmVkdWNlKChvYmosIGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBvYmpbZWwuaWRdID0gYCR7ZWwuaWR9XyR7KytfaWRHZW5lcmF0b3J9YDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgICAgIH0sIHt9KTtcclxuXHJcbiAgICAgICAgLy8gcmVwbGFjZSBhbnkgb2NjdXJyZW5jZSBvZiB0aGUgaWQgd2l0aCB0aGUgbmV3bHkgZ2VuZXJhdGVkIGlkXHJcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLm1hbmlwdWxhdGVBdHRyaWJ1dGVzKHRoaXMuX2dldEFsbEVsZW1lbnRzKCksIG5ldyBSZWdFeHAoT2JqZWN0LmtleXMoaWRzTWFwKS5qb2luKCd8JyksICdnJyksIGlkID0+IGlkc01hcFtpZF0pO1xyXG5cclxuICAgICAgICB0aGlzLl9pbmRleE5hbWVCaW5kaW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRJRCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91bmlxdWVJdGVtSUQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEluZGV4KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRJbmRleChpbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDtcclxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhdHRhY2hBZGRCdXR0b24oYWRkQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbnNXcmFwcGVyLmluc2VydEJlZm9yZShhZGRCdXR0b24sIHRoaXMuX2J1dHRvbnNXcmFwcGVyLmZpcnN0Q2hpbGQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2UoKSB7XHJcbiAgICAgICAgdGhpcy5fbGlua1RvU2NyZWVuKCk7XHJcbiAgICAgICAgdGhpcy5fbGlua1RvRm9ybSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDb250YWluZXIoKTogSFRNTERpdkVsZW1lbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5vbkRpc3Bvc2UuZm9yRWFjaChjYiA9PiBjYigpKTtcclxuICAgICAgICB0aGlzLl91bmxpbmtTY3JlZW4oKTtcclxuICAgICAgICB0aGlzLl91bmxpbmtGb3JtKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NvbnRhaW5lci5wYXJlbnROb2RlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX2NvbnRhaW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5faW5kZXhOYW1lQmluZGluZ3MoKTtcclxuICAgICAgICB0aGlzLl9zY3JlZW4ucmVtb3ZlU3BlY2lmaWNFcnJvckJpbmRzKHRoaXMuYm91bmRlZEVycm9ycyk7XHJcbiAgICAgICAgdGhpcy5ib3VuZGVkRXJyb3JzID0gdGhpcy5fc2NyZWVuLmFkZFNwZWNpZmljRXJyb3JCaW5kcyhnZXRFcnJvckJpbmRpbmdzKHRoaXMuX2lucHV0c1dyYXBwZXIpKTtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlZ2lzdGVyQm91bmRlZEVycm9yRWxlbWVudHMoKTtcclxuICAgICAgICB0aGlzLmZvcm1JbnB1dHMuZm9yRWFjaChpID0+IGkudXBkYXRlKCkpO1xyXG4gICAgICAgIHRoaXMuZm9ybVdpZGdldHMuZm9yRWFjaCh3ID0+IHcudXBkYXRlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2dldEFsbEVsZW1lbnRzKCk6IEVsZW1lbnRbXSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2lucHV0c1dyYXBwZXIucXVlcnlTZWxlY3RvckFsbCgnKicpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9pbmRleE5hbWVCaW5kaW5ncygpIHtcclxuICAgICAgICBjb25zdCBuYW1lc1RvTWFwID0gdGhpcy5hcnJheU1hbmFnZXIuZ2V0RmllbGRzTmFtZXMoKS5jb25jYXQodGhpcy5hcnJheU1hbmFnZXIuZ2V0U3RvcmVBc0FycmF5Um9vdHMoKSk7XHJcbiAgICAgICAgY29uc3Qgcm9vdE5hbWUgPSB0aGlzLmFycmF5TWFuYWdlci5nZXRSb290TmFtZSgpO1xyXG4gICAgICAgIGNvbnN0IGJhc2VSb290TmFtZSA9IHJvb3ROYW1lLnJlcGxhY2UoQXJyYXlNYW5hZ2VyX0NPTlNULmluZGV4TWF0Y2hlciwgJycpO1xyXG5cclxuICAgICAgICAvLyBtYXRjaCBhbnkgb2NjdXJyZW5jZSBvZiBhbnkgYmluZGluZywgd2l0aCBvciB3aXRob3V0IGluZGV4IGNsYXVzZS5cclxuICAgICAgICAvLyBhbiBleGFtcGxlIG9mIHRoZSBvdXRwdXQ6IFwiYW5jZXN0b3JSb290KGluZGV4KT8ucm9vdChpbmRleCk/LmZpZWxkTmFtZTF8YW5jZXN0b3JSb290KGluZGV4KT8ucm9vdChpbmRleCk/LmZpZWxkTmFtZTJcIlxyXG4gICAgICAgIGNvbnN0IGJpbmRpbmdNYXRjaGVyID0gbmFtZXNUb01hcFxyXG4gICAgICAgICAgICAuZmlsdGVyKG5hbWUgPT4gQm9vbGVhbihuYW1lKSlcclxuICAgICAgICAgICAgLm1hcChcclxuICAgICAgICAgICAgICAgIG5hbWUgPT5cclxuICAgICAgICAgICAgICAgICAgICByb290TmFtZS5yZXBsYWNlKEFycmF5TWFuYWdlcl9DT05TVC5pbmRleE1hdGNoZXIsICcoPzpcXFxcW1swLTldXSk/JykgKyAvLyBjb252ZXJ0IGFueSBleGlzdGluZyBpbmRleCBpbiBcInJvb3ROYW1lXCIgdG8gYmUgb3B0aW9uYWwgbWF0Y2hcclxuICAgICAgICAgICAgICAgICAgICAnKD86XFxcXFtbMC05XV0pPycgKyAvLyBvcHRpb25hbCBjdXJyZW50IGluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZS5zdWJzdHIoYmFzZVJvb3ROYW1lLmxlbmd0aCksXHJcbiAgICAgICAgICAgICkgLy8gYWN0dWFsIGZpZWxkIG5hbWVcclxuICAgICAgICAgICAgLmpvaW4oJ3wnKTtcclxuXHJcbiAgICAgICAgLy8gYWRkIGN1cnJlbnQgaW5kZXggdG8gZWFjaCBmaWVsZCBuYW1lXHJcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLm1hbmlwdWxhdGVBdHRyaWJ1dGVzKFxyXG4gICAgICAgICAgICB0aGlzLl9nZXRBbGxFbGVtZW50cygpLFxyXG4gICAgICAgICAgICBuZXcgUmVnRXhwKGJpbmRpbmdNYXRjaGVyLCAnZycpLFxyXG4gICAgICAgICAgICBtYXRjaCA9PiBhZGRJbmRleChtYXRjaCwgcm9vdE5hbWUsIHRoaXMuX2luZGV4KSxcclxuICAgICAgICAgICAgYXR0ciA9PiAvXm5hbWV8XmRhdGEtfF5naWd5YS9pLnRlc3QoYXR0ci5uYW1lKSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2xpbmtUb1NjcmVlbigpIHtcclxuICAgICAgICB0aGlzLnNjcmVlbldpZGdldHMgPSB0aGlzLl9zY3JlZW4uYWRkRHluYW1pY1dpZGdldHModGhpcy5fY29udGFpbmVyKTtcclxuICAgICAgICB0aGlzLmJvdW5kZWRFcnJvcnMgPSB0aGlzLl9zY3JlZW4uYWRkU3BlY2lmaWNFcnJvckJpbmRzKGdldEVycm9yQmluZGluZ3ModGhpcy5faW5wdXRzV3JhcHBlcikpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3VubGlua1NjcmVlbigpIHtcclxuICAgICAgICB0aGlzLl9zY3JlZW4ucmVtb3ZlRHluYW1pY1dpZGdldHModGhpcy5zY3JlZW5XaWRnZXRzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9saW5rVG9Gb3JtKCkge1xyXG4gICAgICAgIHRoaXMuZm9ybUlucHV0cyA9IHRoaXMuX2Zvcm0uYWRkRHluYW1pY0lucHV0cyh0aGlzLl9pbnB1dHNXcmFwcGVyKTtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlZ2lzdGVyQm91bmRlZEVycm9yRWxlbWVudHMoKTtcclxuICAgICAgICB0aGlzLmZvcm1XaWRnZXRzID0gdGhpcy5fZm9ybS5hZGREeW5hbWljV2lkZ2V0cyh0aGlzLl9pbnB1dHNXcmFwcGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF91bmxpbmtGb3JtKCkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVtb3ZlRHluYW1pY1dpZGdldHModGhpcy5mb3JtV2lkZ2V0cyk7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5yZWdpc3RlckJvdW5kZWRFcnJvckVsZW1lbnRzKCk7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5yZW1vdmVEeW5hbWljSW5wdXRzKHRoaXMuZm9ybUlucHV0cyk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGNsYXNzIEFycmF5TWFuYWdlcldpZGdldCBleHRlbmRzIEJhc2VGb3JtV2lkZ2V0PEhUTUxEaXZFbGVtZW50PiB7XHJcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IEFycmF5TWFuYWdlcl9DT05TVDtcclxuICAgIHB1YmxpYyBvbkRpc3Bvc2UgPSBuZXcgQXJyYXk8KCkgPT4gdm9pZD4oKTtcclxuXHJcbiAgICBwcml2YXRlIF9hcnJheVJvb3ROYW1lOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIF9pbnB1dHNUZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICAgIHByaXZhdGUgX2J1dHRvbnNUZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICAgIHByaXZhdGUgX2FycmF5Q29udGFpbmVyOiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgX21pbmltdW1JdGVtczogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfYWRkQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgIHByaXZhdGUgX2l0ZW1zOiBBcnJheTxBcnJheU1hbmFnZXJJdGVtPiA9IFtdO1xyXG4gICAgcHJpdmF0ZSBfZmllbGRzTmFtZXM6IHN0cmluZ1tdO1xyXG4gICAgcHJpdmF0ZSBfc3RvcmVBc0FycmF5Um9vdHM6IHN0cmluZ1tdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9mb3JtOiBCYXNlRm9ybSwgZWw6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIoX2Zvcm0sIGVsLCBmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgdGVtcGxhdGVzID0gdGhpcy50ZW1wbGF0ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgndGVtcGxhdGUnKTtcclxuICAgICAgICB0aGlzLl9pbnB1dHNUZW1wbGF0ZSA9IHRlbXBsYXRlc1swXSBhcyBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbnNUZW1wbGF0ZSA9IHRlbXBsYXRlc1sxXSBhcyBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuX2lucHV0c1RlbXBsYXRlICYmIGNvbnNvbGUgJiYgY29uc29sZS53YXJuKSBjb25zb2xlLndhcm4oJ2dpZ3lhOiBBcnJheSBNYW5hZ2VyIGlzIHByb3ZpZGVkIHdpdGggaW52YWxpZCB0ZW1wbGF0ZScpO1xyXG5cclxuICAgICAgICB0aGlzLl9taW5pbXVtSXRlbXMgPSBOdW1iZXIodGhpcy5wYXJhbXNbJ21pbmltdW0nXSkgfHwgMTtcclxuICAgICAgICB0aGlzLl9maWVsZHNOYW1lcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZVxyXG4gICAgICAgICAgICAuY2FsbCh0aGlzLl9pbnB1dHNUZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoQXJyYXlNYW5hZ2VyX0NPTlNULmZvcm1FbFNlbGVjdG9yKSlcclxuICAgICAgICAgICAgLm1hcChpID0+IHRoaXMuX2Zvcm0uZ2V0Tm9ybWFsaXplZEZpZWxkTmFtZShpLmdldEF0dHJpYnV0ZSgnbmFtZScpKSk7XHJcbiAgICAgICAgdGhpcy5fc3RvcmVBc0FycmF5Um9vdHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2VcclxuICAgICAgICAgICAgLmNhbGwodGhpcy5faW5wdXRzVGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKGBbJHtGb3JtSW5wdXRfQ09OU1RTLmFycmF5Um9vdEF0dHJpYnV0ZX1dYCkpXHJcbiAgICAgICAgICAgIC5tYXAoaSA9PiBpLmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLmFycmF5Um9vdEF0dHJpYnV0ZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjcmVhdGVJbnB1dHNXcmFwcGVyKCk6IERvY3VtZW50RnJhZ21lbnQge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5pbXBvcnROb2RlKHRoaXMuX2lucHV0c1RlbXBsYXRlLmNvbnRlbnQsIHRydWUpIGFzIERvY3VtZW50RnJhZ21lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGF0dGFjaFJlbW92ZUJ1dHRvbihpdGVtOiBBcnJheU1hbmFnZXJJdGVtKTogSFRNTEJ1dHRvbkVsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0IGxpc3RlbmVyID0gKCkgPT4gdGhpcy5yZW1vdmVJdGVtKGl0ZW0uZ2V0SUQoKSksXHJcbiAgICAgICAgICAgIGJ1dHRvbiA9IHRoaXMuX2dldEJ1dHRvbigncmVtb3ZlJywgbGlzdGVuZXIpO1xyXG4gICAgICAgIGl0ZW0ub25EaXNwb3NlLnB1c2goKCkgPT4gYnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbGlzdGVuZXIpKTtcclxuICAgICAgICByZXR1cm4gYnV0dG9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCkge1xyXG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcclxuXHJcbiAgICAgICAgdGhpcy5fYXJyYXlDb250YWluZXIgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5xdWVyeVNlbGVjdG9yKEFycmF5TWFuYWdlcl9DT05TVC5jb250YWluZXJTZWxlY3RvcikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgYWRkTGlzdGVuZXIgPSAoKSA9PiB0aGlzLmFkZEl0ZW0oKTtcclxuICAgICAgICB0aGlzLl9hZGRCdXR0b24gPSB0aGlzLl9nZXRCdXR0b24oJ2FkZCcsIGFkZExpc3RlbmVyKTtcclxuICAgICAgICB0aGlzLm9uRGlzcG9zZS5wdXNoKCgpID0+IHRoaXMuX2FkZEJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZExpc3RlbmVyKSk7XHJcbiAgICAgICAgdGhpcy5fYXJyYXlSb290TmFtZSA9IHRoaXMuX2FycmF5Q29udGFpbmVyLmdldEF0dHJpYnV0ZSgnbmFtZScpO1xyXG5cclxuICAgICAgICAvL0FycmFuZ2UgcHJlLXBvcHVsYXRlIGRhdGEgZmllbGRzXHJcbiAgICAgICAgY29uc3QgcG9wdWxhdGVEYXRhID0gdGhpcy5fZm9ybS5wcmVQb3B1bGF0ZURhdGEoKSxcclxuICAgICAgICAgICAgYXJyYXlSb290ID0gZ2lneWEudXRpbHMub2JqZWN0LmdldFByb3BlcnR5QnlTZXJpYWxpemVkTmFtZShwb3B1bGF0ZURhdGEsIHRoaXMuX2FycmF5Um9vdE5hbWUsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgbGV0IGxlbiA9IHRoaXMuX21pbmltdW1JdGVtcztcclxuICAgICAgICBpZiAoYXJyYXlSb290ICYmIGFycmF5Um9vdCBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgIGxlbiA9IE1hdGgubWF4KHRoaXMuX21pbmltdW1JdGVtcywgYXJyYXlSb290Lmxlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkSXRlbSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NjcmVlbi5yZW1vdmVTcGVjaWZpY0Vycm9yQmluZHMoaXRlbS5ib3VuZGVkRXJyb3JzKTtcclxuICAgICAgICAgICAgdGhpcy5fZm9ybS5yZWdpc3RlckJvdW5kZWRFcnJvckVsZW1lbnRzKCk7XHJcbiAgICAgICAgICAgIGl0ZW0uZGlzcG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zID0gW107XHJcbiAgICAgICAgdGhpcy5vbkRpc3Bvc2UuZm9yRWFjaChjYiA9PiBjYigpKTtcclxuICAgICAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkSXRlbSgpIHtcclxuICAgICAgICBjb25zdCBpdGVtID0gbmV3IEFycmF5TWFuYWdlckl0ZW0odGhpcywgdGhpcy5faXRlbXMubGVuZ3RoKTtcclxuICAgICAgICB0aGlzLl9hcnJheUNvbnRhaW5lci5hcHBlbmRDaGlsZChpdGVtLmdldENvbnRhaW5lcigpKTtcclxuICAgICAgICBpdGVtLmF0dGFjaEFkZEJ1dHRvbih0aGlzLl9hZGRCdXR0b24pO1xyXG4gICAgICAgIGl0ZW0ubGlua0luc3RhbmNlKCk7XHJcbiAgICAgICAgdGhpcy5faXRlbXMucHVzaChpdGVtKTtcclxuXHJcbiAgICAgICAgdGhpcy5fYXBwbHlDdXJyZW50U3RhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlSXRlbShpdGVtSUQ6IHN0cmluZykge1xyXG4gICAgICAgIGxldCByZW1vdmVJbmRleCA9IC0xLFxyXG4gICAgICAgICAgICBpdGVtVG9SZW1vdmUgPSBudWxsO1xyXG4gICAgICAgIFNvbWUodGhpcy5faXRlbXMsIChpdGVtLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLmdldElEKCkgPT09IGl0ZW1JRCkge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlSW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgaXRlbVRvUmVtb3ZlID0gaXRlbTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoIWl0ZW1Ub1JlbW92ZSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuX3NjcmVlbi5yZW1vdmVTcGVjaWZpY0Vycm9yQmluZHMoaXRlbVRvUmVtb3ZlLmJvdW5kZWRFcnJvcnMpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVnaXN0ZXJCb3VuZGVkRXJyb3JFbGVtZW50cygpO1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLnNwbGljZShyZW1vdmVJbmRleCwgMSk7XHJcbiAgICAgICAgdGhpcy5fcmVpbmRleEl0ZW1zKHJlbW92ZUluZGV4KTtcclxuICAgICAgICBpdGVtVG9SZW1vdmUuZGlzcG9zZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLl9pdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2l0ZW1zW3RoaXMuX2l0ZW1zLmxlbmd0aCAtIDFdLmF0dGFjaEFkZEJ1dHRvbih0aGlzLl9hZGRCdXR0b24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9hcHBseUN1cnJlbnRTdGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRGaWVsZHNOYW1lcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmllbGRzTmFtZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFN0b3JlQXNBcnJheVJvb3RzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdG9yZUFzQXJyYXlSb290cztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9yZWluZGV4SXRlbXMoc3RhcnRJbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0SW5kZXg7IGkgPCB0aGlzLl9pdGVtcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICB0aGlzLl9pdGVtc1tpXS5zZXRJbmRleChpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfYXBwbHlDdXJyZW50U3RhdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2l0ZW1zLmxlbmd0aCA8PSB0aGlzLl9taW5pbXVtSXRlbXMpIHtcclxuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZENsYXNzVG9FbGVtZW50KHRoaXMuX2FycmF5Q29udGFpbmVyLCBBcnJheU1hbmFnZXJfQ09OU1QuZGVsZXRlRGlzYWJsZWRDbGFzcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUNsYXNzRnJvbUVsZW1lbnQodGhpcy5fYXJyYXlDb250YWluZXIsIEFycmF5TWFuYWdlcl9DT05TVC5kZWxldGVEaXNhYmxlZENsYXNzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3NjcmVlblNldC5jZW50ZXJNb2RhbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRSb290TmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hcnJheVJvb3ROYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fYXJyYXlSb290TmFtZSA9IHRoaXMuX2FycmF5Q29udGFpbmVyLmdldEF0dHJpYnV0ZSgnbmFtZScpO1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goaXRlbSA9PiBpdGVtLnVwZGF0ZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9nZXRCdXR0b24odHlwZTogJ2FkZCcgfCAncmVtb3ZlJywgbGlzdGVuZXI/OiAoKSA9PiB2b2lkKTogSFRNTEJ1dHRvbkVsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmltcG9ydE5vZGUoXHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbnNUZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoQXJyYXlNYW5hZ2VyX0NPTlNUW2Ake3R5cGV9QnV0dG9uU2VsZWN0b3JgXSlbMF0sXHJcbiAgICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICBpZiAobGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbGlzdGVuZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYnRuO1xyXG4gICAgfVxyXG59XHJcbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShBcnJheU1hbmFnZXJXaWRnZXQpO1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXJyb3JCaW5kaW5ncyhjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogQXJyYXk8SFRNTEVsZW1lbnQ+IHtcclxuICAgIGxldCBib3VuZGVkRWxlbWVudHM6IEFycmF5PEhUTUxFbGVtZW50PiA9IFtdLFxyXG4gICAgICAgIGJpbmRzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlXHJcbiAgICAgICAgICAgIC5jYWxsKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKGBbJHtFcnJvckRpc3BsYXlFbGVtZW50X0NPTlNUUy5ib3VuZGVkVG99XWApKVxyXG4gICAgICAgICAgICAubWFwKGVsID0+IGVsLmdldEF0dHJpYnV0ZShFcnJvckRpc3BsYXlFbGVtZW50X0NPTlNUUy5ib3VuZGVkVG8pKTtcclxuXHJcbiAgICBGb3JFYWNoKEVycm9yRGlzcGxheUVsZW1lbnRfQ09OU1RTLmdpZ3lhQ2xhc3NlcywgZ2lneWFDbGFzcyA9PiB7XHJcbiAgICAgICAgY29uc3QgYmluZGVkU2VsZWN0b3JzID0gW107XHJcblxyXG4gICAgICAgIGJpbmRzLmZvckVhY2goYmluZElEID0+IHtcclxuICAgICAgICAgICAgYmluZGVkU2VsZWN0b3JzLnB1c2goYC4ke2dpZ3lhQ2xhc3N9WyR7RXJyb3JEaXNwbGF5RWxlbWVudF9DT05TVFMuYm91bmRlZFRvfT1cIiR7YmluZElEfVwiXWApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBib3VuZGVkRWxlbWVudHMgPSBib3VuZGVkRWxlbWVudHMuY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKGJpbmRlZFNlbGVjdG9ycy5qb2luKCcsJykpKSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBib3VuZGVkRWxlbWVudHM7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZEluZGV4KG9yaWdpbmFsOiBzdHJpbmcsIGFycmF5Um9vdDogc3RyaW5nLCBpbmRleDogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgIGlmICghb3JpZ2luYWwgfHwgIWFycmF5Um9vdCkgcmV0dXJuICcnO1xyXG4gICAgb3JpZ2luYWwgPSBvcmlnaW5hbC5yZXBsYWNlKEFycmF5TWFuYWdlcl9DT05TVC5pbmRleE1hdGNoZXIsICcnKTtcclxuICAgIGNvbnN0IGJhc2VBcnJheVJvb3QgPSBhcnJheVJvb3QucmVwbGFjZShBcnJheU1hbmFnZXJfQ09OU1QuaW5kZXhNYXRjaGVyLCAnJyk7XHJcblxyXG4gICAgcmV0dXJuIGAke2FycmF5Um9vdH1bJHtpbmRleH1dLiR7b3JpZ2luYWwuc3Vic3RyKGJhc2VBcnJheVJvb3QubGVuZ3RoICsgMSl9YDtcclxufVxyXG4iLCJpbXBvcnQge0RlZXBGcmVlemV9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xyXG5pbXBvcnQgeyBCYXNlU2NyZWVuV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlU2NyZWVuV2lkZ2V0JztcclxuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xyXG5pbXBvcnQgeyBUcmFuc2xhdGVkV2lkZ2V0IH0gZnJvbSAnLi9UcmFuc2xhdGVkV2lkZ2V0JztcclxuXHJcbmV4cG9ydCBjb25zdCBCaW5kaW5nX0NPTlNUUyA9IHtcclxuICAgIHNlbGVjdG9yOiAnKltkYXRhLWJpbmRpbmddJyxcclxuICAgIGRhdGFCaW5kaW5nQXR0cmlidXRlOiAnZGF0YS1iaW5kaW5nJyxcclxufTtcclxuRGVlcEZyZWV6ZShCaW5kaW5nX0NPTlNUUyk7XHJcbmV4cG9ydCBjbGFzcyBCaW5kaW5nV2lkZ2V0IGV4dGVuZHMgQmFzZVNjcmVlbldpZGdldDxIVE1MRGl2RWxlbWVudD4ge1xyXG4gICAgcHVibGljIGRlcHMgPSBbVHJhbnNsYXRlZFdpZGdldF07XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBCaW5kaW5nX0NPTlNUUztcclxuICAgIHByaXZhdGUgc3VwcG9ydEludGVycG9sYXRpb246IGJvb2xlYW47XHJcbiAgICBwcm90ZWN0ZWQgb3JpZ2luYWxTdHJpbmc6IHN0cmluZztcclxuICAgIHByb3RlY3RlZCBsYXN0VmFsdWU6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihfc2NyZWVuOiBTY3JlZW4sIGVsOiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgICAgIC8vIFR1cm4gcmVzZXRDU1Mgb2ZmLlxyXG4gICAgICAgIHN1cGVyKF9zY3JlZW4sIGVsLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcclxuICAgICAgICB0aGlzLnN1cHBvcnRJbnRlcnBvbGF0aW9uID0gdGhpcy50ZW1wbGF0ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEJpbmRpbmdXaWRnZXQuQ09OU1RTLmRhdGFCaW5kaW5nQXR0cmlidXRlKSA9PSAndHJ1ZSc7XHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbFN0cmluZyA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmlubmVySFRNTDtcclxuICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpIHtcclxuICAgICAgICBzdXBlci5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVmFsdWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0QmluZGluZ0tleSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpbmFsU3RyaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IFZhbHVlIGZyb20gYXBpRGF0YVxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgZ2V0VmFsdWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZSh0aGlzLmdldEJpbmRpbmdLZXkoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgYm91bmRlZCB0ZXh0LlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgdXBkYXRlVmFsdWUoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7XHJcbiAgICAgICAgaWYgKHZhbHVlICYmIHRoaXMubGFzdFZhbHVlICE9PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnVubGlua1dpZGdldHMoKTtcclxuICAgICAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCd1bmRlZmluZWQnLCAnJyk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LmlubmVySFRNTCA9IHRoaXMubGFzdFZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmtXaWRnZXRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBldmFsdWF0ZSh0ZXh0ID0gJycpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IGJhc2ljTWF0Y2hlciA9IC97eyguKj8pfX0vZyxcclxuICAgICAgICAgICAgc3BsaXR0ZXIgPSAvKHt7Lio/fX0pL2csXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyID0gLyd7eyguKj8pfX0nL2c7XHJcbiAgICAgICAgaWYgKCF0ZXh0Lm1hdGNoKGJhc2ljTWF0Y2hlcikgfHwgIXRoaXMuc3VwcG9ydEludGVycG9sYXRpb24pIHJldHVybiB0ZXh0O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbih7XHJcbiAgICAgICAgICAgIGlnbm9yZUVycm9yOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25kaXRpb246IHRleHRcclxuICAgICAgICAgICAgICAgIC5zcGxpdChzcGxpdHRlcilcclxuICAgICAgICAgICAgICAgIC5tYXAocCA9PiBgJyR7cH0nYClcclxuICAgICAgICAgICAgICAgIC5qb2luKCcgKyAnKVxyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoLyhcXHJcXG58XFxufFxccikvZ20sICcnKVxyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UocGxhY2Vob2xkZXIsICckMScpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbkJhc2VTY3JlZW5XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KEJpbmRpbmdXaWRnZXQpO1xyXG4iLCJpbXBvcnQgeyBCYXNlRm9ybVdpZGdldCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm1XaWRnZXQnO1xyXG5pbXBvcnQgeyBJQ2FwdGNoYUhhbmRsZXIsIENhcHRjaGFNb2RlLCBDYXB0Y2hhSGFuZGxlcnMgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0hhbmRsZXJzL0NhcHRjaGFIYW5kbGVyL0Jhc2VDYXB0Y2hhSGFuZGxlcic7XHJcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XHJcbmltcG9ydCB7IFJlZ2lzdGVyRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvUmVnaXN0ZXJGb3JtJztcclxuaW1wb3J0IHsgaXNIaWRkZW4gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcclxuXHJcbmV4cG9ydCBjb25zdCBDYXB0Y2hhV2lkZ2V0X0NPTlNUUyA9IHtcclxuICAgIHNlbGVjdG9yOiAnZGl2LmdpZ3lhLWNhcHRjaGEnLFxyXG59O1xyXG5leHBvcnQgY2xhc3MgQ2FwdGNoYVdpZGdldCBleHRlbmRzIEJhc2VGb3JtV2lkZ2V0PEhUTUxEaXZFbGVtZW50PiB7XHJcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IENhcHRjaGFXaWRnZXRfQ09OU1RTO1xyXG5cclxuICAgIHByaXZhdGUgX2NhcHRjaGFIYW5kbGVyOiBJQ2FwdGNoYUhhbmRsZXI7XHJcbiAgICBwcml2YXRlIF9pbmRleDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGZvcm06IEJhc2VGb3JtLCBlbDogSFRNTERpdkVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlcihmb3JtLCBlbCk7XHJcbiAgICAgICAgdGhpcy5faW5kZXggPSBmb3JtLl9zY3JlZW4uX2NhcHRjaGFzLmxlbmd0aDtcclxuICAgICAgICBmb3JtLl9zY3JlZW4uX2NhcHRjaGFzLnB1c2godGhpcyk7XHJcbiAgICAgICAgY29uc3QgaGFuZGxlckNvbmZpZyA9IGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXHJcbiAgICAgICAgICAgIHRoaXMucGFyYW1zLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYW5nOiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zWydsYW5nJ10sXHJcbiAgICAgICAgICAgICAgICBtb2RlOiBmb3JtIGluc3RhbmNlb2YgUmVnaXN0ZXJGb3JtID8gQ2FwdGNoYU1vZGUuSW52aXNpYmxlIDogQ2FwdGNoYU1vZGUuVmlzaWJsZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICBdKTtcclxuICAgICAgICBjb25zdCBhY3RpdmVIYW5kbGVyID0gQ2FwdGNoYUhhbmRsZXJzW2dpZ3lhLnBhcnRuZXJTZXR0aW5ncy5jYXB0Y2hhUHJvdmlkZXJdO1xyXG4gICAgICAgIGlmIChhY3RpdmVIYW5kbGVyICYmIHR5cGVvZiBhY3RpdmVIYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhcHRjaGFIYW5kbGVyID0gbmV3IGFjdGl2ZUhhbmRsZXIoaGFuZGxlckNvbmZpZyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBbR2lneWFdOiB1bnN1cHBvcnRlZCBjYXB0Y2hhIHByb3ZpZGVyYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XHJcbiAgICAgICAgY29uc3QgaW5pdFJlc3BvbnNlID0gYXdhaXQgdGhpcy5fY2FwdGNoYUhhbmRsZXIuaW5pdCh0aGlzLmluc3RhbmNlRWxlbWVudCk7XHJcbiAgICAgICAgaWYgKCFpbml0UmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgdGhpcy51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcclxuICAgICAgICAgICAgdGhpcy5fZm9ybS5fc2NyZWVuLl9jYXB0Y2hhcy5zcGxpY2UodGhpcy5faW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNIaWRkZW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIGlzSGlkZGVuKHRoaXMuaW5zdGFuY2VFbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVsb2FkKCkge1xyXG4gICAgICAgIHRoaXMuX2NhcHRjaGFIYW5kbGVyLnJlc2V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldFRva2VuKCk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcHRjaGFIYW5kbGVyLmdldFRva2VuKCk7XHJcbiAgICB9XHJcbn1cclxuQmFzZUZvcm1XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KENhcHRjaGFXaWRnZXQpO1xyXG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XHJcbmltcG9ydCB7IEJhc2VGb3JtV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybVdpZGdldCc7XHJcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XHJcblxyXG5leHBvcnQgY29uc3QgQ29uc2VudF9DT05TVFMgPSB7XHJcbiAgICBzZWxlY3RvcjogJ2Rpdi5naWd5YS1jb25zZW50JyxcclxufTtcclxuRGVlcEZyZWV6ZShDb25zZW50X0NPTlNUUyk7XHJcbmV4cG9ydCBjbGFzcyBDb25zZW50V2lkZ2V0IGV4dGVuZHMgQmFzZUZvcm1XaWRnZXQ8SFRNTERpdkVsZW1lbnQ+IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gQ29uc2VudF9DT05TVFM7XHJcblxyXG4gICAgY29uc3RydWN0b3IoX2Zvcm06IEJhc2VGb3JtLCBlbDogSFRNTERpdkVsZW1lbnQpIHtcclxuICAgICAgICAvLyBUdXJuIHJlc2V0Q1NTIG9mZi5cclxuICAgICAgICBzdXBlcihfZm9ybSwgZWwsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xyXG4gICAgICAgIHRoaXMubG9hZFdpZGdldCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpIHtcclxuICAgICAgICBzdXBlci5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xyXG4gICAgICAgIHRoaXMubG9hZFdpZGdldCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbG9hZFdpZGdldCgpIHtcclxuICAgICAgICBjb25zdCBhY2NvdW50SW5mbyA9IHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCkuZ2V0QWNjb3VudEluZm87XHJcbiAgICAgICAgY29uc3QgdGVybU5hbWUgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcclxuICAgICAgICBjb25zdCBjb25zZW50ID0gZ2lneWEudXRpbHMub2JqZWN0LmV4cHJlc3Npb25IZWxwZXIoYWNjb3VudEluZm8pLmdldEZpZWxkKHRlcm1OYW1lKTtcclxuICAgICAgICBpZiAoY29uc2VudCAmJiBjb25zZW50LmlzQ29uc2VudEdyYW50ZWQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgY29uc3QgZG9jSWQgPSBjb25zZW50LmRvY0RhdGUgPyB0aGlzLmZvcm1hdFRpbWUoY29uc2VudC5kb2NEYXRlKSA6IGNvbnNlbnQuZG9jVmVyc2lvbjtcclxuICAgICAgICAgICAgY29uc3QgbGFzdENvbnNlbnRNb2RpZmllZCA9IHRoaXMuZm9ybWF0VGltZShjb25zZW50Lmxhc3RDb25zZW50TW9kaWZpZWQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuaW5uZXJIVE1MID0gZ2lneWEudXRpbHMudGVtcGxhdGVzLmZpbGwodGhpcy5fc2NyZWVuU2V0LmdldFRlbXBsYXRlcygpLmNvbnNlbnQsIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbGFiZWwnKSxcclxuICAgICAgICAgICAgICAgIGRvY0lkLFxyXG4gICAgICAgICAgICAgICAgYXBwcm92ZWRPbkxhYmVsOiB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXBwcm92ZWQtb24tbGFiZWwnKSB8fCAnQXBwcm92ZWQgb24nLFxyXG4gICAgICAgICAgICAgICAgYXBwcm92ZWQ6IGxhc3RDb25zZW50TW9kaWZpZWQsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZvcm1hdFRpbWUoZGF0ZVN0cmluZykge1xyXG4gICAgICAgIHZhciBkYXRlID0gRGF0ZS5wYXJzZShkYXRlU3RyaW5nKTsgLy8gcmV0dXJucyBOYU4gaWYgaXQgY2FuJ3QgcGFyc2VcclxuICAgICAgICByZXR1cm4gaXNOYU4oZGF0ZSkgPyAnJyA6IG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG4gICAgfVxyXG59XHJcbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShDb25zZW50V2lkZ2V0KTtcclxuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSwgRXZlcnksIGdldEVsZW1lbnRzQnlIYXZpbmdBdHRyaWJ1dGUsIFNvbWUsIEZvckVhY2hQcm9wLCBGb3JFYWNoIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XHJcbmltcG9ydCB7IEJhc2VGb3JtV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybVdpZGdldCc7XHJcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XHJcbmltcG9ydCB7IEZvcm1JbnB1dF9DT05TVFMgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Gb3JtSW5wdXQnO1xyXG5cclxuaW50ZXJmYWNlIElSZXF1aXJlZEZpZWxkUmVzdWx0cyB7XHJcbiAgICBoYXNSZXF1aXJlZEVtcHR5RmllbGRzOiBib29sZWFuO1xyXG59XHJcbmludGVyZmFjZSBJQ29udGFpbmVyQ29uZGl0aW9uIGV4dGVuZHMgRnVuY3Rpb24ge1xyXG4gICAgKGNvbnRhaW5lcjogQ29udGFpbmVyV2lkZ2V0LCBmaWVsZHM6IElSZXF1aXJlZEZpZWxkUmVzdWx0cyk6IGJvb2xlYW47XHJcbn1cclxuZXhwb3J0IGNvbnN0IENvbnRhaW5lcldpZGdldF9DT05TVFMgPSB7XHJcbiAgICBzZWxlY3RvcjogJ2Rpdi5naWd5YS1jb250YWluZXInLFxyXG4gICAgYWN0aXZlQ2xhc3M6ICdnaWd5YS1jb250YWluZXItZW5hYmxlZCcsXHJcbiAgICBlbXB0eUZpZWxkczogJ2RhdGEtZW1wdHktZmllbGRzJyxcclxuICAgIGRpc3BsYXlDYXA6ICdkYXRhLWRpc3BsYXktY2FwJyxcclxuICAgIGRpc3BsYXlGcmVxOiAnZGF0YS1kaXNwbGF5LWZyZXEnLFxyXG4gICAgbG9naW5JZGVudGl0aWVzOiAnZGF0YS1sb2dpbi1pZGVuaXRpZXMnLFxyXG4gICAgY29uZGl0aW9uQXR0cjogJ2RhdGEtY29uZGl0aW9uJyxcclxuICAgIG9uUmVuZGVyQXR0cjogJ2RhdGEtb24tcmVuZGVyJyxcclxufTtcclxuRGVlcEZyZWV6ZShDb250YWluZXJXaWRnZXRfQ09OU1RTKTtcclxuZXhwb3J0IGNsYXNzIENvbnRhaW5lcldpZGdldCBleHRlbmRzIEJhc2VGb3JtV2lkZ2V0PEhUTUxEaXZFbGVtZW50PiB7XHJcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nO1xyXG4gICAgcHVibGljIHZhbGlkYXRpb25QYXNzZWQ6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIG9yaWdpbmFsUmVuZGVyaW5nU3RhdHVzOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBjb25kaXRpb25TdGF0dXM6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIGVtcHR5RmllbGRzOiBzdHJpbmc7XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJpbmdDb25kaXRpb25zOiBJQ29udGFpbmVyQ29uZGl0aW9uW107XHJcbiAgICBwcml2YXRlIHZhbGlkYXRpb25Db25kaXRpb25zOiBJQ29udGFpbmVyQ29uZGl0aW9uW107XHJcblxyXG4gICAgcHJpdmF0ZSBvbkVsZW1lbnRDaGFuZ2UgPSAoKSA9PiB0aGlzLnJlZnJlc2goKTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IENvbnRhaW5lcldpZGdldF9DT05TVFM7XHJcblxyXG4gICAgY29uc3RydWN0b3IoX2Zvcm06IEJhc2VGb3JtLCBlbDogSFRNTERpdkVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlcihfZm9ybSwgZWwsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgdGhpcy5uYW1lID0gZWwuZ2V0QXR0cmlidXRlKCduYW1lJyk7XHJcbiAgICAgICAgdGhpcy5lbXB0eUZpZWxkcyA9IGVsLmdldEF0dHJpYnV0ZShDb250YWluZXJXaWRnZXRfQ09OU1RTLmVtcHR5RmllbGRzKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZW1wdHlGaWVsZHMpIF9mb3JtLl9hdXRvU2tpcENvbnRhaW5lcnMucHVzaCh0aGlzKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubmFtZSAmJiAoZWwuZ2V0QXR0cmlidXRlKENvbnRhaW5lcldpZGdldF9DT05TVFMuZGlzcGxheUNhcCkgfHwgZWwuZ2V0QXR0cmlidXRlKENvbnRhaW5lcldpZGdldF9DT05TVFMuZGlzcGxheUZyZXEpKSlcclxuICAgICAgICAgICAgX2Zvcm0uX25lZWRDb250YWluZXJIaXN0b3J5ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGUoZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZWw6IEhUTUxEaXZFbGVtZW50ID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLnJlbmRlcmluZ0NvbmRpdGlvbnMgPSByZWdpc3RlcmVkQ29uZGl0aW9ucyhlbCwgY29uZGl0aW9uU2V0cy5yZW5kZXJpbmcpO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGlvbkNvbmRpdGlvbnMgPSByZWdpc3RlcmVkQ29uZGl0aW9ucyhlbCwgY29uZGl0aW9uU2V0cy52YWxpZGF0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2hlY2tBdXRvU2tpcCgpIHtcclxuICAgICAgICByZXR1cm4gIWRhdGFFbXB0eUZpZWxkcyh0aGlzLmVtcHR5RmllbGRzLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxGb3JtRWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcclxuXHJcbiAgICAgICAgdmFyIHNob3VsZERpc3BsYXkgPSB0aGlzLnRlc3RSZW5kZXJpbmcoKTtcclxuICAgICAgICB0aGlzLm9yaWdpbmFsUmVuZGVyaW5nU3RhdHVzID0gdGhpcy5jb25kaXRpb25TdGF0dXMgPSBzaG91bGREaXNwbGF5O1xyXG4gICAgICAgIGlmICh0aGlzLm9yaWdpbmFsUmVuZGVyaW5nU3RhdHVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25FbGVtZW50Q2hhbmdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVmcmVzaCgpIHtcclxuICAgICAgICB2YXIgc2hvdWxkRGlzcGxheSA9ICh0aGlzLnZhbGlkYXRpb25QYXNzZWQgPSB0aGlzLnRlc3RWYWxpZGF0aW9ucygpKTtcclxuICAgICAgICB0aGlzLmNvbmRpdGlvblN0YXR1cyA9IHRoaXMub3JpZ2luYWxSZW5kZXJpbmdTdGF0dXMgJiYgc2hvdWxkRGlzcGxheTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29uZGl0aW9uU3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCwgQ29udGFpbmVyV2lkZ2V0X0NPTlNUUy5hY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUNsYXNzRnJvbUVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsIENvbnRhaW5lcldpZGdldF9DT05TVFMuYWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRlc3RSZW5kZXJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGVzdENvbnRhaW5lcih0aGlzLnJlbmRlcmluZ0NvbmRpdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdGVzdFZhbGlkYXRpb25zKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRlc3RDb250YWluZXIodGhpcy52YWxpZGF0aW9uQ29uZGl0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0ZXN0Q29udGFpbmVyKGNvbmRpdGlvbnM6IElDb250YWluZXJDb25kaXRpb25bXSkge1xyXG4gICAgICAgIC8vIFRlc3RpbmcgaWYgdGhlcmUncyBhbiBlbXB0eSByZXF1aXJlZCBmaWVsZCBpbiB0aGUgY29udGFpbmVyIChzdHJvbmdlciB0aGFuIGFsbCB0ZXN0cyBleGNlcHQgdGhvc2UgdGhhdCBvdmVycmlkZSBpdClcclxuICAgICAgICB2YXIgZmllbGRzOiBJUmVxdWlyZWRGaWVsZFJlc3VsdHMgPSB7XHJcbiAgICAgICAgICAgIGhhc1JlcXVpcmVkRW1wdHlGaWVsZHM6IHRoaXMuY29udGFpbnNFbXB0eVJlcXVpcmVkRmllbGRzKCksXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGZpbHRlclJlc3VsdHMgPSBFdmVyeShjb25kaXRpb25zLCBjb25kID0+IGNvbmQodGhpcywgZmllbGRzKSk7XHJcblxyXG4gICAgICAgIHJldHVybiBmaWVsZHMuaGFzUmVxdWlyZWRFbXB0eUZpZWxkcyB8fCBmaWx0ZXJSZXN1bHRzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29udGFpbnNFbXB0eVJlcXVpcmVkRmllbGRzKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fZm9ybS5pc1BvcHVsYXRlZCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICB2YXIgZmllbGRzID0gZ2V0RWxlbWVudHNCeUhhdmluZ0F0dHJpYnV0ZSh0aGlzLmluc3RhbmNlRWxlbWVudCwgJyonLCBGb3JtSW5wdXRfQ09OU1RTLmZpZWxkTmFtZSk7XHJcblxyXG4gICAgICAgIHZhciBjb250YWluc1JlcXVpcmVkID0gU29tZShmaWVsZHMsIChmaWVsZDogSFRNTElucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgZmllbGROYW1lID0gZmllbGQuZ2V0QXR0cmlidXRlKEZvcm1JbnB1dF9DT05TVFMuZmllbGROYW1lKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmaWVsZE5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpc1JlcXVpcmVkID0gdGhpcy5fZm9ybS5pc1JlcXVpcmVkRmllbGQoZmllbGROYW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNSZXF1aXJlZCAmJiAhZmllbGQudmFsdWUpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250YWluc1JlcXVpcmVkO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRIaXN0b3J5RnJvbVNldHRpbmdzKCkge1xyXG4gICAgICAgIHZhciBhcGlEYXRhID0gdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLm5hbWUpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICBpZiAoIWFwaURhdGEuZ2V0VXNlclNldHRpbmdzIHx8IGFwaURhdGEuZ2V0VXNlclNldHRpbmdzLmVycm9yQ29kZSA+IDApIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICB2YXIgY29udGFpbmVySGlzdG9yaWVzID0gYXBpRGF0YS5nZXRVc2VyU2V0dGluZ3Muc2V0dGluZ3M7XHJcbiAgICAgICAgaWYgKCFjb250YWluZXJIaXN0b3JpZXMpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICB2YXIgaGlzdG9yeSA9IGNvbnRhaW5lckhpc3Rvcmllc1t0aGlzLm5hbWVdIHx8IHt9O1xyXG5cclxuICAgICAgICBpZiAoIWhpc3RvcnkuZGlzcGxheUNvdW50KSBoaXN0b3J5LmRpc3BsYXlDb3VudCA9IDA7XHJcbiAgICAgICAgaWYgKCFoaXN0b3J5Lmxhc3REaXNwbGF5KSBoaXN0b3J5Lmxhc3REaXNwbGF5ID0gLTE7XHJcblxyXG4gICAgICAgIHJldHVybiBoaXN0b3J5O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzYXZlSGlzdG9yeUluU2V0dGluZ3MoaGlzdG9yeTogSUNvbnRhaW5lckhpc3RvcnkpIHtcclxuICAgICAgICB2YXIgYXBpRGF0YSA9IHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCk7XHJcblxyXG4gICAgICAgIGlmICghYXBpRGF0YS5nZXRVc2VyU2V0dGluZ3MgfHwgYXBpRGF0YS5nZXRVc2VyU2V0dGluZ3MuZXJyb3JDb2RlID4gMCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIHZhciBjb250YWluZXJIaXN0b3JpZXMgPSBhcGlEYXRhLmdldFVzZXJTZXR0aW5ncy5zZXR0aW5ncztcclxuICAgICAgICBpZiAoIWNvbnRhaW5lckhpc3RvcmllcykgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lckhpc3Rvcmllc1t0aGlzLm5hbWVdID0gaGlzdG9yeTtcclxuXHJcbiAgICAgICAgdmFyIHNldHRpbmdzID0ge307XHJcbiAgICAgICAgc2V0dGluZ3NbdGhpcy5uYW1lXSA9IHtcclxuICAgICAgICAgICAgZGlzcGxheUNvdW50OiBoaXN0b3J5LmRpc3BsYXlDb3VudCxcclxuICAgICAgICAgICAgbGFzdERpc3BsYXk6IGhpc3RvcnkubGFzdERpc3BsYXksXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZ2lneWEuc29jaWFsaXplLnNldFVzZXJTZXR0aW5ncyh7XHJcbiAgICAgICAgICAgIGdyb3VwOiAnZ2lneWFfY29udGFpbmVyX2hpc3RvcnktJyArIHRoaXMuX2Zvcm0uSUQsIC8vIFRPRE8gZG91YmxlIGNoZWNrIHRoZSBJRFxyXG4gICAgICAgICAgICByZWdUb2tlbjogdGhpcy5fc2NyZWVuU2V0LmRhdGEucmVnVG9rZW4sXHJcbiAgICAgICAgICAgIHNldHRpbmdzOiBzZXR0aW5ncyxcclxuICAgICAgICAgICAgZGlzYWJsZUxvY2FsU2V0dGluZ3M6IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCkge1xyXG4gICAgICAgIHRoaXMudXBkYXRlKHRoaXMuaW5zdGFuY2VFbGVtZW50KTtcclxuICAgICAgICBzdXBlci5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xyXG5cclxuICAgICAgICB0aGlzLmVtcHR5RmllbGRzID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKENvbnRhaW5lcldpZGdldF9DT05TVFMuZW1wdHlGaWVsZHMpO1xyXG4gICAgICAgIGlmICh0aGlzLm9yaWdpbmFsUmVuZGVyaW5nU3RhdHVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25FbGVtZW50Q2hhbmdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBoYXNDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cclxuQmFzZUZvcm1XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KENvbnRhaW5lcldpZGdldCk7XHJcbmZ1bmN0aW9uIHJlZ2lzdGVyZWRDb25kaXRpb25zKGVsOiBIVE1MRGl2RWxlbWVudCwgY29uZGl0aW9uU2V0OiBJQ29uZGl0aW9uU2V0KSB7XHJcbiAgICBmdW5jdGlvbiBiaW5kQ29uZGl0aW9uKHZhbHVlLCBjb25kaXRpb24sIG9uZVRpbWUgPSBmYWxzZSkge1xyXG4gICAgICAgIHJldHVybiAoY29udGFpbmVyOiBDb250YWluZXJXaWRnZXQsIGZpZWxkczogSVJlcXVpcmVkRmllbGRSZXN1bHRzKSA9PiBjb25kaXRpb24odmFsdWUsIGNvbnRhaW5lciwgb25lVGltZSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBiaW5kT3ZlcnJpdGVGaWVsZHNDb25kaXRpb24odmFsdWUsIGNvbmRpdGlvbikge1xyXG4gICAgICAgIHJldHVybiAoY29udGFpbmVyOiBDb250YWluZXJXaWRnZXQsIGZpZWxkczogSVJlcXVpcmVkRmllbGRSZXN1bHRzKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBjb25kaXRpb24odmFsdWUsIGNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkgZmllbGRzLmhhc1JlcXVpcmVkRW1wdHlGaWVsZHMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgc2VsZWN0ZWRDb25kaXRpb25zID0gbmV3IEFycmF5PElDb250YWluZXJDb25kaXRpb24+KCk7XHJcblxyXG4gICAgRm9yRWFjaFByb3AoY29uZGl0aW9uU2V0LCAoY29uZGl0aW9uLCBhdHRyKSA9PiB7XHJcbiAgICAgICAgaWYgKGVsLmdldEF0dHJpYnV0ZShhdHRyKSkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBlbC5nZXRBdHRyaWJ1dGUoYXR0cik7XHJcbiAgICAgICAgICAgIHZhciBvbmVUaW1lQ29uZGl0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiBlbC5nZXRBdHRyaWJ1dGUoQ29udGFpbmVyV2lkZ2V0LkNPTlNUUy5vblJlbmRlckF0dHIpID09ICd0cnVlJykge1xyXG4gICAgICAgICAgICAgICAgb25lVGltZUNvbmRpdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbmRpdGlvblsnb3ZlcndyaXRlRmllbGRzJ10pIHNlbGVjdGVkQ29uZGl0aW9ucy5wdXNoKGJpbmRPdmVycml0ZUZpZWxkc0NvbmRpdGlvbih2YWx1ZSwgY29uZGl0aW9uKSk7XHJcbiAgICAgICAgICAgIGVsc2Ugc2VsZWN0ZWRDb25kaXRpb25zLnB1c2goYmluZENvbmRpdGlvbih2YWx1ZSwgY29uZGl0aW9uLCBvbmVUaW1lQ29uZGl0aW9uKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHNlbGVjdGVkQ29uZGl0aW9ucztcclxufVxyXG5pbnRlcmZhY2UgSUNvbmRpdGlvbkZ1bmN0aW9uIGV4dGVuZHMgRnVuY3Rpb24ge1xyXG4gICAgKHZhbHVlOiBhbnksIGNvbnRhaW5lcjogQ29udGFpbmVyV2lkZ2V0KTogYm9vbGVhbjtcclxufVxyXG5pbnRlcmZhY2UgSUNvbmRpdGlvblNldCB7XHJcbiAgICBbY29uZDogc3RyaW5nXTogSUNvbmRpdGlvbkZ1bmN0aW9uO1xyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgSUNvbnRhaW5lckhpc3Rvcnkge1xyXG4gICAgZGlzcGxheUNvdW50OiBudW1iZXI7XHJcbiAgICBsYXN0RGlzcGxheTogbnVtYmVyO1xyXG4gICAgd2FzVXBkYXRlZD86IGJvb2xlYW47XHJcbn1cclxuZnVuY3Rpb24gZGF0YURvbWFpbnModmFsdWU6IHN0cmluZykge1xyXG4gICAgdmFyIGFsbG93ZWREb21haW5zID0gdmFsdWUuc3BsaXQoJywnKTtcclxuXHJcbiAgICByZXR1cm4gU29tZShhbGxvd2VkRG9tYWlucywgZG9tYWluID0+IGdpZ3lhLnBsdWdpblV0aWxzLmRvbWFpbi5pc0luRG9tYWluKGRvbWFpbikpO1xyXG59XHJcbmZ1bmN0aW9uIGRhdGFBcGlrZXlzKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIHZhciBhcGlrZXlzID0gdmFsdWUuc3BsaXQoJywnKTtcclxuICAgIHJldHVybiBnaWd5YS51dGlscy5hcnJheS5pbmRleE9mKGFwaWtleXMsIGdpZ3lhLnRoaXNTY3JpcHQuQVBJS2V5KSAhPSAtMTtcclxufVxyXG5mdW5jdGlvbiBkYXRhUHJvYih2YWx1ZTogc3RyaW5nLCBjb250YWluZXI6IENvbnRhaW5lcldpZGdldCkge1xyXG4gICAgLy8gU2hvdyBjb250YWluZXIgYmFzZWQgb24gcHJvYmFiaWxpdHlcclxuICAgIHJldHVybiBjb250YWluZXIuX3NjcmVlblNldC5fcmFuZG9tIDw9IHBhcnNlRmxvYXQodmFsdWUpO1xyXG59XHJcbmZ1bmN0aW9uIGRhdGFBZnRlckRhdGUodmFsdWU6IHN0cmluZykge1xyXG4gICAgdmFyIHRpbWVWYWx1ZSA9IGdpZ3lhLmdsb2JhbC5kYXRlLmdldElTT0RhdGUodmFsdWUpIGFzIERhdGU7IC8vIFBhcnRuZXIgcGxhY2UgZGF0ZSBpbiBJU08gZm9ybWF0XHJcbiAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCkgPiB0aW1lVmFsdWUuZ2V0VGltZSgpO1xyXG59XHJcbmZ1bmN0aW9uIGRhdGFCZWZvcmVEYXRlKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIHZhciB0aW1lVmFsdWUgPSBnaWd5YS5nbG9iYWwuZGF0ZS5nZXRJU09EYXRlKHZhbHVlKSBhcyBEYXRlOyAvLyBQYXJ0bmVyIHBsYWNlIGRhdGUgaW4gSVNPIGZvcm1hdFxyXG4gICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpIDw9IHRpbWVWYWx1ZS5nZXRUaW1lKCk7XHJcbn1cclxuZnVuY3Rpb24gZGF0YURpc3BsYXlDYXAodmFsdWU6IG51bWJlciwgY29udGFpbmVyOiBDb250YWluZXJXaWRnZXQpIHtcclxuICAgIHZhciBjb250YWluZXJIaXN0b3J5ID0gY29udGFpbmVyLmdldEhpc3RvcnlGcm9tU2V0dGluZ3MoKTtcclxuXHJcbiAgICBpZiAoIWNvbnRhaW5lckhpc3RvcnkpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICBpZiAodmFsdWUgPD0gY29udGFpbmVySGlzdG9yeS5kaXNwbGF5Q291bnQpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICBpZiAoIWNvbnRhaW5lckhpc3Rvcnkud2FzVXBkYXRlZCkge1xyXG4gICAgICAgIGNvbnRhaW5lckhpc3RvcnkuZGlzcGxheUNvdW50Kys7XHJcbiAgICAgICAgY29udGFpbmVySGlzdG9yeS53YXNVcGRhdGVkID0gdHJ1ZTtcclxuICAgICAgICBjb250YWluZXIuc2F2ZUhpc3RvcnlJblNldHRpbmdzKGNvbnRhaW5lckhpc3RvcnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIGRhdGFEaXNwbGF5RnJlcSh2YWx1ZTogbnVtYmVyLCBjb250YWluZXI6IENvbnRhaW5lcldpZGdldCkge1xyXG4gICAgdmFyIGNvbnRhaW5lckhpc3RvcnkgPSBjb250YWluZXIuZ2V0SGlzdG9yeUZyb21TZXR0aW5ncygpO1xyXG5cclxuICAgIGlmICghY29udGFpbmVySGlzdG9yeSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgIHZhciB0aW1lUGFzc2VkID0gKG5vdyAtIGNvbnRhaW5lckhpc3RvcnkubGFzdERpc3BsYXkpIC8gMTAwMDsgLy8gTWlsaXNlY29uZHMgLT4gc2Vjb25kc1xyXG5cclxuICAgIGlmIChjb250YWluZXJIaXN0b3J5Lmxhc3REaXNwbGF5ICE9PSAtMSAmJiB2YWx1ZSA+PSB0aW1lUGFzc2VkKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgaWYgKCFjb250YWluZXJIaXN0b3J5Lndhc1VwZGF0ZWQpIHtcclxuICAgICAgICBjb250YWluZXJIaXN0b3J5Lmxhc3REaXNwbGF5ID0gbm93O1xyXG4gICAgICAgIGNvbnRhaW5lckhpc3Rvcnkud2FzVXBkYXRlZCA9IHRydWU7XHJcbiAgICAgICAgY29udGFpbmVyLnNhdmVIaXN0b3J5SW5TZXR0aW5ncyhjb250YWluZXJIaXN0b3J5KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBkYXRhRW1wdHlGaWVsZHModmFsdWU6IHN0cmluZywgY29udGFpbmVyOiBDb250YWluZXJXaWRnZXQpIHtcclxuICAgIC8vIFRPRE8gcGVyaGFwcyBnZXQgdGhlIGZpZWxkIGluc3RhbmNlcyBmcm9tIHRoZSBmb3JtXHJcbiAgICB2YXIgY2hlY2tFbXB0eUZpZWxkcyA9IG5ldyBBcnJheTxIVE1MSW5wdXRFbGVtZW50PigpO1xyXG5cclxuICAgIGlmICh2YWx1ZSA9PT0gJyonKSB7XHJcbiAgICAgICAgLy8gYWxsIGZpZWxkc1xyXG4gICAgICAgIHZhciBpbnB1dHMgPSBnZXRFbGVtZW50c0J5SGF2aW5nQXR0cmlidXRlKGNvbnRhaW5lci5pbnN0YW5jZUVsZW1lbnQsICcqJywgRm9ybUlucHV0X0NPTlNUUy5maWVsZE5hbWUpO1xyXG5cclxuICAgICAgICBGb3JFYWNoKGlucHV0cywgKGk6IEhUTUxJbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgdmFyIG5hbWUgPSBpLmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLmZpZWxkTmFtZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAobmFtZSkgY2hlY2tFbXB0eUZpZWxkcy5wdXNoKGkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBuYW1lZCBmaWVsZHNcclxuICAgICAgICBGb3JFYWNoKHZhbHVlLnNwbGl0KCcsJyksIGZpZWxkTmFtZSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBmaWVsZCA9IGdpZ3lhLnV0aWxzLkRPTS5nZXRFbGVtZW50c0J5QXR0cmlidXRlKGNvbnRhaW5lci5pbnN0YW5jZUVsZW1lbnQsICcqJywgRm9ybUlucHV0X0NPTlNUUy5maWVsZE5hbWUsIGZpZWxkTmFtZSlbMF0gYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICAgICAgY2hlY2tFbXB0eUZpZWxkcy5wdXNoKGZpZWxkKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gU29tZShjaGVja0VtcHR5RmllbGRzLCBmaWVsZCA9PiAhZmllbGQudmFsdWUpO1xyXG59XHJcbmV4cG9ydCBlbnVtIFNwZWNpYWxQcm92aWRlcnMge1xyXG4gICAgc29jaWFsLFxyXG4gICAgc2l0ZSxcclxuICAgIHNpdGVPbmx5LFxyXG4gICAgc29jaWFsT25seSxcclxuICAgIHNpdGVBbmRTb2NpYWwsXHJcbiAgICAnc2l0ZS1vbmx5JyA9IHNpdGVPbmx5LFxyXG4gICAgJ3NvY2lhbC1vbmx5JyA9IHNvY2lhbE9ubHksXHJcbiAgICAnc2l0ZS1hbmQtc29jaWFsJyA9IHNpdGVBbmRTb2NpYWwsXHJcbn1cclxuRGVlcEZyZWV6ZShTcGVjaWFsUHJvdmlkZXJzKTtcclxubG9naW5JZGVudGl0aWVzWydvdmVyd3JpdGVGaWVsZHMnXSA9IHRydWU7XHJcbmZ1bmN0aW9uIGxvZ2luSWRlbnRpdGllcyh2YWx1ZTogc3RyaW5nLCBjb250YWluZXI6IENvbnRhaW5lcldpZGdldCkge1xyXG4gICAgdmFyIGFsbG93ZWRQcm92aWRlcnMgPSB2YWx1ZS5zcGxpdCgnLCcpO1xyXG4gICAgdmFyIGxvZ2luUHJvdmlkZXJzTGlzdCA9IGNvbnRhaW5lci5fZm9ybS5nZXRMb2dpblByb3ZpZGVycygpO1xyXG5cclxuICAgIHZhciBzaXRlID0gU29tZShhbGxvd2VkUHJvdmlkZXJzLCBwID0+IHAgPT09IFNwZWNpYWxQcm92aWRlcnNbU3BlY2lhbFByb3ZpZGVycy5zaXRlXSk7XHJcbiAgICB2YXIgYW55U29jaWFsID0gU29tZShhbGxvd2VkUHJvdmlkZXJzLCBwID0+IHAgPT09IFNwZWNpYWxQcm92aWRlcnNbU3BlY2lhbFByb3ZpZGVycy5zb2NpYWxdKTtcclxuICAgIHZhciBzaXRlT25seSA9IFNvbWUoYWxsb3dlZFByb3ZpZGVycywgcCA9PiBwID09PSBTcGVjaWFsUHJvdmlkZXJzW1NwZWNpYWxQcm92aWRlcnMuc2l0ZU9ubHldKTtcclxuICAgIHZhciBzb2NpYWxPbmx5ID0gU29tZShhbGxvd2VkUHJvdmlkZXJzLCBwID0+IHAgPT09IFNwZWNpYWxQcm92aWRlcnNbU3BlY2lhbFByb3ZpZGVycy5zb2NpYWxPbmx5XSk7XHJcbiAgICB2YXIgc2l0ZUFuZFNvY2lhbCA9IFNvbWUoYWxsb3dlZFByb3ZpZGVycywgcCA9PiBwID09PSBTcGVjaWFsUHJvdmlkZXJzW1NwZWNpYWxQcm92aWRlcnMuc2l0ZUFuZFNvY2lhbF0pO1xyXG5cclxuICAgIHZhciBoYXNTb2NpYWw6IGJvb2xlYW47XHJcbiAgICB2YXIgaGFzU2l0ZTogYm9vbGVhbjtcclxuICAgIHZhciBsb2dpblByb3ZpZGVyczogc3RyaW5nW107XHJcblxyXG4gICAgaWYgKHR5cGVvZiBsb2dpblByb3ZpZGVyc0xpc3QgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgLy8gbm8gbGlzdCBldmVyeXRoaW5nIGlzIGFsbG93ZWQsIHNwZWNpZmljIG9wdGlvbnMgd2lsbCBmYWlsXHJcbiAgICAgICAgbG9naW5Qcm92aWRlcnMgPSBbXTtcclxuXHJcbiAgICAgICAgaGFzU29jaWFsID0gaGFzU2l0ZSA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxvZ2luUHJvdmlkZXJzID0gbG9naW5Qcm92aWRlcnNMaXN0LnNwbGl0KCcsJyk7XHJcblxyXG4gICAgICAgIGhhc1NvY2lhbCA9IFNvbWUobG9naW5Qcm92aWRlcnMsIHAgPT4gcCAhPT0gU3BlY2lhbFByb3ZpZGVyc1tTcGVjaWFsUHJvdmlkZXJzLnNpdGVdKTtcclxuICAgICAgICBoYXNTaXRlID0gU29tZShsb2dpblByb3ZpZGVycywgcCA9PiBwID09PSBTcGVjaWFsUHJvdmlkZXJzW1NwZWNpYWxQcm92aWRlcnMuc2l0ZV0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzaXRlT25seSkgcmV0dXJuIGhhc1NpdGUgJiYgIWhhc1NvY2lhbDtcclxuXHJcbiAgICBpZiAoc29jaWFsT25seSkgcmV0dXJuIGhhc1NvY2lhbCAmJiAhaGFzU2l0ZTtcclxuXHJcbiAgICBpZiAoc2l0ZUFuZFNvY2lhbCkgcmV0dXJuIGhhc1NpdGUgJiYgaGFzU29jaWFsO1xyXG5cclxuICAgIGlmIChhbnlTb2NpYWwpIHJldHVybiBoYXNTb2NpYWw7XHJcblxyXG4gICAgaWYgKHNpdGUpIHJldHVybiBoYXNTaXRlO1xyXG5cclxuICAgIHZhciBoYXNNYXRjaGluZ1Byb3ZpZGVyID0gU29tZShhbGxvd2VkUHJvdmlkZXJzLCBhcCA9PiBTb21lKGxvZ2luUHJvdmlkZXJzLCBscCA9PiBscCA9PT0gYXApKTtcclxuICAgIHJldHVybiBoYXNNYXRjaGluZ1Byb3ZpZGVyO1xyXG59XHJcbmZ1bmN0aW9uIGRhdGFDb25kaXRpb24odmFsdWU6IHN0cmluZywgY29udGFpbmVyOiBDb250YWluZXJXaWRnZXQsIG9uZVRpbWUgPSBmYWxzZSkge1xyXG4gICAgaWYgKG9uZVRpbWUgJiYgY29udGFpbmVyLnZhbGlkYXRpb25QYXNzZWQpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBCb29sZWFuKGNvbnRhaW5lci5ldmFsdWF0ZUV4cHJlc3Npb24oeyBjb25kaXRpb246IHZhbHVlIH0pKTtcclxufVxyXG52YXIgY29uZGl0aW9uU2V0cyA9IHtcclxuICAgIHJlbmRlcmluZzoge1xyXG4gICAgICAgICdkYXRhLWRvbWFpbnMnOiBkYXRhRG9tYWlucyxcclxuICAgICAgICAnZGF0YS1hcGlrZXlzJzogZGF0YUFwaWtleXMsXHJcbiAgICAgICAgJ2RhdGEtcHJvYic6IGRhdGFQcm9iLFxyXG4gICAgICAgICdkYXRhLWFmdGVyLWRhdGUnOiBkYXRhQWZ0ZXJEYXRlLFxyXG4gICAgICAgICdkYXRhLWJlZm9yZS1kYXRlJzogZGF0YUJlZm9yZURhdGUsXHJcbiAgICAgICAgJ2RhdGEtZGlzcGxheS1jYXAnOiBkYXRhRGlzcGxheUNhcCxcclxuICAgICAgICAnZGF0YS1kaXNwbGF5LWZyZXEnOiBkYXRhRGlzcGxheUZyZXEsXHJcbiAgICAgICAgJ2RhdGEtZW1wdHktZmllbGRzJzogZGF0YUVtcHR5RmllbGRzLFxyXG4gICAgICAgICdkYXRhLWxvZ2luLWlkZW50aXRpZXMnOiBsb2dpbklkZW50aXRpZXMsXHJcbiAgICB9IGFzIElDb25kaXRpb25TZXQsXHJcbiAgICB2YWxpZGF0aW9uOiB7XHJcbiAgICAgICAgJ2RhdGEtY29uZGl0aW9uJzogZGF0YUNvbmRpdGlvbixcclxuICAgIH0gYXMgSUNvbmRpdGlvblNldCxcclxufTtcclxuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xyXG5pbXBvcnQgeyBCYXNlRm9ybVdpZGdldCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm1XaWRnZXQnO1xyXG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xyXG5pbXBvcnQgeyBTY3JlZW5TZXRfQ09OU1RTIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5TZXRQbHVnaW4nO1xyXG5cclxuZXhwb3J0IGNvbnN0IEltYWdlX0NPTlNUUyA9IHtcclxuICAgIHNlbGVjdG9yOiAnZGl2LmdpZ3lhLWltYWdlJyxcclxuICAgIHNyY0F0dHJpYnV0ZTogJ2RhdGEtc3JjJyxcclxuICAgIHdpZHRoQXR0cmlidXRlOiAnZGF0YS13aWR0aCcsXHJcbiAgICBoZWlnaHRBdHRyaWJ1dGU6ICdkYXRhLWhlaWdodCcsXHJcbiAgICBiYWNrZ3JvdW5kU2l6ZUF0dHJpYnV0ZTogJ2RhdGEtYmFja2dyb3VuZC1zaXplJyxcclxufTtcclxuRGVlcEZyZWV6ZShJbWFnZV9DT05TVFMpO1xyXG5leHBvcnQgY2xhc3MgSW1hZ2VXaWRnZXQgZXh0ZW5kcyBCYXNlRm9ybVdpZGdldDxIVE1MRGl2RWxlbWVudD4ge1xyXG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBJbWFnZV9DT05TVFM7XHJcbiAgICBwcm90ZWN0ZWQgcHJldlNyYzogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9mb3JtOiBCYXNlRm9ybSwgZWw6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgLy8gVHVybiByZXNldENTUyBvZmYuXHJcbiAgICAgICAgc3VwZXIoX2Zvcm0sIGVsLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcclxuICAgICAgICB0aGlzLnNldEJhY2tncm91bmRJbWFnZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpIHtcclxuICAgICAgICBzdXBlci5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xyXG5cclxuICAgICAgICAvLyBIYW5kbGUgY2FzZSB3aGVyZSBhdHRyaWJ1dGVzIGFyZSB1cGRhdGVkIHZpYSBjb25kaXRpb25hbCBhdHRyLlxyXG4gICAgICAgIHRoaXMuc2V0QmFja2dyb3VuZEltYWdlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgYmFja2dyb3VuZCBpbWFnZSBhbmQgaGFuZGxlIEhUVFBTIHByb3h5aW5nLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgc2V0QmFja2dyb3VuZEltYWdlKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGVsID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQ7XHJcblxyXG4gICAgICAgIC8vIEdldCBhdHRyaWJ1dGVzIGZyb20gZWxlbWVudHMuXHJcbiAgICAgICAgbGV0IHNyYyA9IGVsLmdldEF0dHJpYnV0ZShJbWFnZVdpZGdldC5DT05TVFMuc3JjQXR0cmlidXRlKTtcclxuICAgICAgICBjb25zdCB3aWR0aCA9IGVsLmdldEF0dHJpYnV0ZShJbWFnZVdpZGdldC5DT05TVFMud2lkdGhBdHRyaWJ1dGUpO1xyXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IGVsLmdldEF0dHJpYnV0ZShJbWFnZVdpZGdldC5DT05TVFMuaGVpZ2h0QXR0cmlidXRlKTtcclxuICAgICAgICBjb25zdCBiYWNrZ3JvdW5kU2l6ZSA9IGVsLmdldEF0dHJpYnV0ZShJbWFnZVdpZGdldC5DT05TVFMuYmFja2dyb3VuZFNpemVBdHRyaWJ1dGUpO1xyXG5cclxuICAgICAgICAvLyBIaWRlIGVsZW1lbnQgaWYgbm8gc3JjIHByb3ZpZGVkLlxyXG4gICAgICAgIGlmICghc3JjKSB7XHJcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCwgU2NyZWVuU2V0X0NPTlNUUy5naWd5YUhpZGRlbik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUNsYXNzRnJvbUVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsIFNjcmVlblNldF9DT05TVFMuZ2lneWFIaWRkZW4pO1xyXG5cclxuICAgICAgICAvLyBTZXQgd2lkdGggYW5kIGhlaWdodC5cclxuICAgICAgICBpZiAod2lkdGgpIHtcclxuICAgICAgICAgICAgZWwuc3R5bGUud2lkdGggPSB0aGlzLmdldFNpemUod2lkdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIGVsLnN0eWxlLmhlaWdodCA9IHRoaXMuZ2V0U2l6ZShoZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2V0IGRlZmF1bHQgYmFja2dyb3VuZCBzaXplIGlmIG5vbmUgc2V0LlxyXG4gICAgICAgIGlmICghYmFja2dyb3VuZFNpemUpIHtcclxuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKEltYWdlV2lkZ2V0LkNPTlNUUy5iYWNrZ3JvdW5kU2l6ZUF0dHJpYnV0ZSwgJ2ZpdCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2luY2UgdGhpcyBpcyBwcm9jZXNzZWQgb24gZXZlcnkgY29uZGl0aW9uYWwgZXhwcmVzc2lvbiwgd2UgZG9uJ3Qgd2FudCB0byByZS1jYWxjdWxhdGUgc2VjdXJlIHBob3RvIFVSTHMgZXZlcnkgdGltZS5cclxuICAgICAgICAvLyBUaGUgQ0ROIHJvdGF0ZXMgYW5kIHdlJ2xsIGdldCBhIG5ldyBVUkwgZWFjaCB0aW1lLCBsZWFkaW5nIHRvIHRoZSBpbWFnZSBiZWluZyByZWxvYWRlZC5cclxuICAgICAgICBpZiAodGhpcy5wcmV2U3JjICE9PSBzcmMpIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2U3JjID0gc3JjO1xyXG5cclxuICAgICAgICAgICAgLy8gQXZvaWQgYm90aCBIVFRQUyBhbmQgZW1iZWRkZWQgaW1hZ2VzLlxyXG4gICAgICAgICAgICBpZiAoZ2lneWEubG9jYWxJbmZvLnByb3RvY29sID09PSAnaHR0cHMnICYmIHNyYy5pbmRleE9mKCdodHRwOi8vJykgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHNyYyA9IGdpZ3lhLmdsb2JhbC5nZXRQaG90b1VSTChzcmMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgYmFja2dyb3VuZCBpbWFnZS5cclxuICAgICAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybChcIiR7c3JjfVwiKWA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHJhbnNsYXRlIHdpZHRoL2hlaWdodCB0byBDU1MtcmVhZHkgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBnZXRTaXplKHNpemU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3Qgc2l6ZU51bWJlciA9IE51bWJlcihzaXplKTtcclxuICAgICAgICBpZiAoaXNOYU4oc2l6ZU51bWJlcikpIHtcclxuICAgICAgICAgICAgLy8gU2l6ZSBpbmNsdWRlZCBkaW1lbnNpb24gYWxyZWFkeS5cclxuICAgICAgICAgICAgcmV0dXJuIHNpemU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSnVzdCBhIG51bWJlciB3YXMgcGFzc2VkLiBBZGQgXCJweFwiIHRvIGl0LlxyXG4gICAgICAgICAgICByZXR1cm4gc2l6ZSArICdweCc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShJbWFnZVdpZGdldCk7XHJcbiIsImltcG9ydCB7IERlZXBGcmVlemUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcclxuaW1wb3J0IHsgQmFzZUZvcm1XaWRnZXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtV2lkZ2V0JztcclxuaW1wb3J0IHsgSUZvcm1JbnB1dCwgSVZhbGlkaXR5U3RhdGVMaXN0ZW5lciwgVmFsaWRpdHlTdGF0ZXMgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Gb3JtSW5wdXQnO1xyXG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xyXG5cclxuZXhwb3J0IHZhciBMb2dpbkF2YWlsYWJpbGl0eVdpZGdldF9DT05TVFMgPSB7XHJcbiAgICBzZWxlY3RvcjogJ2Rpdi5naWd5YS1sb2dpbklELWF2YWlsYWJpbGl0eScsXHJcbiAgICBib3VuZFRvOiAnZGF0YS1ib3VuZC10bycsXHJcbn07XHJcbkRlZXBGcmVlemUoTG9naW5BdmFpbGFiaWxpdHlXaWRnZXRfQ09OU1RTKTtcclxuZXhwb3J0IGNsYXNzIExvZ2luQXZhaWxhYmlsaXR5V2lkZ2V0IGV4dGVuZHMgQmFzZUZvcm1XaWRnZXQ8SFRNTERpdkVsZW1lbnQ+IHtcclxuICAgIHByaXZhdGUgYm91bmRlZEZpZWxkOiBJRm9ybUlucHV0O1xyXG4gICAgcHJpdmF0ZSBvcmlnaW5hbERpc3BsYXk6IHN0cmluZztcclxuICAgIHByaXZhdGUgbG9naW5JZFN0YXRlTGlzdGVuZXI6IElWYWxpZGl0eVN0YXRlTGlzdGVuZXI7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBMb2dpbkF2YWlsYWJpbGl0eVdpZGdldF9DT05TVFM7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZm9ybTogQmFzZUZvcm0sIGVsOiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyKGZvcm0sIGVsKTtcclxuICAgICAgICB0aGlzLmluaXQoZm9ybSwgZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5pdChmb3JtOiBCYXNlRm9ybSwgZWw6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5sb2dpbklkU3RhdGVMaXN0ZW5lciA9IHN0YXRlID0+IHRoaXMub25Mb2dpbklkU3RhdGVDaGFuZ2Uoc3RhdGUsIHRydWUpO1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWxEaXNwbGF5ID0gZWwuc3R5bGUuZGlzcGxheTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXNldChlbCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZXNldChlbDogSFRNTERpdkVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLmJvdW5kZWRGaWVsZCA9XHJcbiAgICAgICAgICAgIHRoaXMuX2Zvcm0uZ2V0RmllbGQoZWwuZ2V0QXR0cmlidXRlKExvZ2luQXZhaWxhYmlsaXR5V2lkZ2V0LkNPTlNUUy5ib3VuZFRvKSkgfHxcclxuICAgICAgICAgICAgdGhpcy5fZm9ybS5nZXRGaWVsZCgnbG9naW5JRCcpIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2Zvcm0uZ2V0RmllbGQoJ3VzZXJuYW1lJykgfHxcclxuICAgICAgICAgICAgdGhpcy5fZm9ybS5nZXRGaWVsZCgnZW1haWwnKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYm91bmRlZEZpZWxkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYm91bmRlZEZpZWxkWydfc2VydmVyVmFsaWRhdGVBdmFsaWFiaWxpdHknXSA9IHRydWU7IC8vIHRyaWdnZXIgdGhlIHNlcnZlciB2YWxpZGF0aW9uIG9mIHRoZSBsb2dpbklkXHJcbiAgICAgICAgICAgIHRoaXMuYm91bmRlZEZpZWxkLmFkZFZhbGlkaXR5U3RhdGVMaXN0ZW5lcih0aGlzLmxvZ2luSWRTdGF0ZUxpc3RlbmVyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLndhcm4oTG9naW5BdmFpbGFiaWxpdHlXaWRnZXRfQ09OU1RTLnNlbGVjdG9yICsgJyBpcyBtaXNzaW5nIGEgZmllbGQgdG8gYm91bmQgdG8nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYm91bmRlZEZpZWxkKSB0aGlzLm9uTG9naW5JZFN0YXRlQ2hhbmdlKHRoaXMuYm91bmRlZEZpZWxkLmdldFZhbGlkaXR5U3RhdGUoKSwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1bmxpbmtUZW1wbGF0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5ib3VuZGVkRmllbGQpIHRoaXMuYm91bmRlZEZpZWxkLnJlbW92ZVZhbGlkaXR5U3RhdGVMaXN0ZW5lcih0aGlzLmxvZ2luSWRTdGF0ZUxpc3RlbmVyKTtcclxuXHJcbiAgICAgICAgc3VwZXIudW5saW5rVGVtcGxhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uTG9naW5JZFN0YXRlQ2hhbmdlKHN0YXRlOiBWYWxpZGl0eVN0YXRlcywgZnJvbVNlcnZlcjogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICghZnJvbVNlcnZlcilcclxuICAgICAgICAgICAgLy8gdHJlYXQgbG9jYWwgdmFsaWRhdGlvbnMgYXMgbm8gcmVsZXZhbnQgdG8gd2lkZ2V0XHJcbiAgICAgICAgICAgIHN0YXRlID0gVmFsaWRpdHlTdGF0ZXMuX3VuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlRWxlbWVudCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBnaWd5YS51dGlscy5ET00ucmVtb3ZlQ2xhc3NGcm9tRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCwgJ2dpZ3lhLWxvZ2luSUQtYXZhaWxhYmlsaXR5LXByb2dyZXNzJyk7XHJcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUNsYXNzRnJvbUVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsICdnaWd5YS1sb2dpbklELWF2YWlsYWJpbGl0eS1ub3QtYXZhaWxhYmxlJyk7XHJcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUNsYXNzRnJvbUVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsICdnaWd5YS1sb2dpbklELWF2YWlsYWJpbGl0eS1hdmFpbGFibGUnKTtcclxuXHJcbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFZhbGlkaXR5U3RhdGVzLnZhbGlkOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IHRoaXMub3JpZ2luYWxEaXNwbGF5O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5fc2NyZWVuU2V0LmdldFRleHQoJ2F2YWlsYWJsZScpO1xyXG4gICAgICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZENsYXNzVG9FbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50LCAnZ2lneWEtbG9naW5JRC1hdmFpbGFiaWxpdHktYXZhaWxhYmxlJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBWYWxpZGl0eVN0YXRlcy5lcnJvcjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSB0aGlzLm9yaWdpbmFsRGlzcGxheTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LmlubmVySFRNTCA9IHRoaXMuX3NjcmVlblNldC5nZXRUZXh0KCdub3RfYXZhaWxhYmxlJyk7XHJcbiAgICAgICAgICAgICAgICBnaWd5YS51dGlscy5ET00uYWRkQ2xhc3NUb0VsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsICdnaWd5YS1sb2dpbklELWF2YWlsYWJpbGl0eS1ub3QtYXZhaWxhYmxlJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBWYWxpZGl0eVN0YXRlcy5wZW5kaW5nOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IHRoaXMub3JpZ2luYWxEaXNwbGF5O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5fc2NyZWVuU2V0LmdldFRleHQoJ2NoZWNraW5nJyk7XHJcbiAgICAgICAgICAgICAgICBnaWd5YS51dGlscy5ET00uYWRkQ2xhc3NUb0VsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsICdnaWd5YS1sb2dpbklELWF2YWlsYWJpbGl0eS1wcm9ncmVzcycpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCkge1xyXG4gICAgICAgIHN1cGVyLmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XHJcbiAgICAgICAgLy8vIGlmIFtmb3Igc29tZSByZWFzb25dIHRoaXMgd2lkZ2V0IG5lZWQgdG8gc3VwcG9ydCBjb25kaXRpb25hbCBhdHRycy4uLlxyXG4gICAgICAgIC8vIHRoaXMucmVzZXQodGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xyXG4gICAgfVxyXG59XHJcbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShMb2dpbkF2YWlsYWJpbGl0eVdpZGdldCk7XHJcbiIsImltcG9ydCB7IERlZXBGcmVlemUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcclxuaW1wb3J0IHsgQmFzZVNjcmVlbldpZGdldCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZVNjcmVlbldpZGdldCc7XHJcbmltcG9ydCB7IElQbHVnaW5QYXJhbXMgfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL2ludGVyZmFjZXMvSVBsdWdpblBhcmFtcyc7XHJcbmltcG9ydCB7IElQbHVnaW5UZW1wbGF0ZXMgfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL2ludGVyZmFjZXMvSVBsdWdpblRlbXBsYXRlcyc7XHJcbmltcG9ydCB7IElQbHVnaW5DU1MgfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL2ludGVyZmFjZXMvSVBsdWdpbkNTUyc7XHJcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcclxuaW1wb3J0IHsgQmFzZVBsdWdpbiB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvQmFzZVBsdWdpbic7XHJcblxyXG52YXIgbmV4dEdlbmVyYXRlZENvbnRhaW5lcklkID0gMDtcclxuZXhwb3J0IHZhciBNeVBob3RvV2lkZ2V0X0NPTlNUUyA9IHtcclxuICAgIHNlbGVjdG9yOiAnZGl2LmdpZ3lhLW15UGhvdG8nLFxyXG59O1xyXG5EZWVwRnJlZXplKE15UGhvdG9XaWRnZXRfQ09OU1RTKTtcclxuZXhwb3J0IGNsYXNzIE15UGhvdG9XaWRnZXQgZXh0ZW5kcyBCYXNlU2NyZWVuV2lkZ2V0PEhUTUxEaXZFbGVtZW50PiB7XHJcbiAgICBwcml2YXRlIGNvbnRhaW5lcklkOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IE15UGhvdG9XaWRnZXRfQ09OU1RTO1xyXG4gICAgcHJpdmF0ZSBfaW5zdGFuY2U6IEJhc2VQbHVnaW48SVBsdWdpblBhcmFtcywgSVBsdWdpblRlbXBsYXRlcywgSVBsdWdpbkNTUz47XHJcblxyXG4gICAgY29uc3RydWN0b3IoX3NjcmVlbjogU2NyZWVuLCBlbDogSFRNTERpdkVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlcihfc2NyZWVuLCBlbCk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXJJZCA9IHRoaXMuX3NjcmVlblNldC5jb250YWluZXJJRCArICdfbXlQaG90b18nICsgbmV4dEdlbmVyYXRlZENvbnRhaW5lcklkKys7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkgdGhpcy5pbnN0YW5jZUVsZW1lbnQuaW5uZXJIVE1MID0gJzxkaXYgaWQ9XCInICsgdGhpcy5jb250YWluZXJJZCArICdcIj48L2Rpdj4nO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyYW1zWydjb250YWluZXJJRCddKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndpZGdldFBhcmFtcyA9IHRoaXMucGFyYW1zO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJXaWRnZXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkgdGhpcy5pbnN0YW5jZUVsZW1lbnQuaW5uZXJIVE1MID0gJyc7IC8vIFRvIG1ha2Ugc3VyZSBubyBJRCBjb25mbGljdHMgd2lsbCBiZSBnZW5lcmF0ZWRcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2luc3RhbmNlKSB0aGlzLl9pbnN0YW5jZS5kaXNwb3NlKCk7XHJcblxyXG4gICAgICAgIHN1cGVyLnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCByZW5kZXJXaWRnZXQoKTogdm9pZCB7XHJcbiAgICAgICAgLy9yZS1yZW5kZXIgdGhlIHBsdWdpbiB3aXRoIHRoZSBuZXcgbmV3IGNvbmRpdGlvbmFsIHZhbHVlcy5cclxuICAgICAgICBnaWd5YS5hY2NvdW50cy5zaG93TXlQaG90b1VJKHRoaXMud2lkZ2V0UGFyYW1zLCB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lcklEOiB0aGlzLmNvbnRhaW5lcklkLFxyXG4gICAgICAgICAgICBsYW5nOiB0aGlzLl9zY3JlZW5TZXQubGFuZyxcclxuICAgICAgICAgICAgcmVnVG9rZW46IHRoaXMuX3NjcmVlblNldC5wYXJhbXNbJ3JlZ1Rva2VuJ10sXHJcbiAgICAgICAgICAgIGdldEluc3RhbmNlOiBpbnN0YW5jZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IGluc3RhbmNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkxvYWQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5jZW50ZXJNb2RhbCgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucmVuZGVyV2lkZ2V0VUkgPSBmYWxzZTtcclxuICAgIH1cclxufVxyXG5CYXNlU2NyZWVuV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShNeVBob3RvV2lkZ2V0KTtcclxuIiwiaW1wb3J0IHsgSVNjcmVlblNldFRlbXBsYXRlcyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UGx1Z2luJztcclxuaW1wb3J0IHsgSU1hcCwgRGVlcEZyZWV6ZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xyXG5pbXBvcnQgeyBCYXNlRm9ybVdpZGdldCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm1XaWRnZXQnO1xyXG5pbXBvcnQgeyBJRm9ybUlucHV0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvRm9ybUlucHV0JztcclxuaW1wb3J0IHsgQmFzZUZvcm0gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSURpc3BsYXlNb2RlIHtcclxuICAgIGhhc01pbmltdW1SZXF1aXJlbWVudHM6IGJvb2xlYW47XHJcbiAgICBoYXNTdHJlbmd0aE1ldGVyOiBib29sZWFuO1xyXG4gICAgZ2V0VGVtcGxhdGU6ICh0ZW1wbGF0ZXM6IElTY3JlZW5TZXRUZW1wbGF0ZXMpID0+IHN0cmluZztcclxufVxyXG5leHBvcnQgdmFyIERpc3BsYXlNb2RlczogSU1hcDxJRGlzcGxheU1vZGU+ID0ge1xyXG4gICAgcG9saWN5OiB7XHJcbiAgICAgICAgaGFzTWluaW11bVJlcXVpcmVtZW50czogdHJ1ZSxcclxuICAgICAgICBoYXNTdHJlbmd0aE1ldGVyOiBmYWxzZSxcclxuICAgICAgICBnZXRUZW1wbGF0ZTogdGVtcGxhdGVzID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlcy5wYXNzd29yZFN0cmVuZ3RoX21pbmltdW1SZXF1aXJlbWVudHM7XHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBtZXRlcjoge1xyXG4gICAgICAgIGhhc01pbmltdW1SZXF1aXJlbWVudHM6IGZhbHNlLFxyXG4gICAgICAgIGhhc1N0cmVuZ3RoTWV0ZXI6IHRydWUsXHJcbiAgICAgICAgZ2V0VGVtcGxhdGU6IHRlbXBsYXRlcyA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZXMucGFzc3dvcmRTdHJlbmd0aF9zdHJlbmd0aE1ldGVyO1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgY29tYmluZWQ6IHtcclxuICAgICAgICBoYXNNaW5pbXVtUmVxdWlyZW1lbnRzOiB0cnVlLFxyXG4gICAgICAgIGhhc1N0cmVuZ3RoTWV0ZXI6IHRydWUsXHJcbiAgICAgICAgZ2V0VGVtcGxhdGU6IHRlbXBsYXRlcyA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZXMucGFzc3dvcmRTdHJlbmd0aF9zdHJlbmd0aE1ldGVyICsgdGVtcGxhdGVzLnBhc3N3b3JkU3RyZW5ndGhfbWluaW11bVJlcXVpcmVtZW50cztcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxufTtcclxuZXhwb3J0IGVudW0gQnViYmxlT3JpZW50YXRpb25zIHtcclxuICAgIHJpZ2h0LCAvLyBmaXJzdCBpbiBvcmRlciBmb3IgaXQgdG8gYmUgdGhlIGRlZmF1bHQgKHZhbHVlIDApXHJcbiAgICBsZWZ0LFxyXG4gICAgdXAsXHJcbiAgICBkb3duLFxyXG4gICAgbm9uZSxcclxufVxyXG5EZWVwRnJlZXplKEJ1YmJsZU9yaWVudGF0aW9ucyk7XHJcbmV4cG9ydCB2YXIgUGFzc3dvcmRTdHJlbmd0aFdpZGdldF9DT05TVFMgPSB7XHJcbiAgICBzZWxlY3RvcjogJ2Rpdi5naWd5YS1wYXNzd29yZC1zdHJlbmd0aCcsXHJcbiAgICBidWJibGVDbGFzczogJ2dpZ3lhLXBhc3N3b3JkLXN0cmVuZ3RoLWJ1YmJsZScsXHJcbiAgICBtb2JpbGVDbGFzczogJ21vYmlsZS1idWJibGUnLFxyXG4gICAgZGVza3RvcENsYXNzOiAnZGVza3RvcC1idWJibGUnLFxyXG4gICAgZGlzcGxheU1vZGU6ICdkYXRhLWRpc3BsYXktbW9kZScsXHJcbiAgICBidWJibGU6ICdkYXRhLW9uLWZvY3VzLWJ1YmJsZScsXHJcbiAgICBidWJibGVPcmllbnRhdGlvbjogJ2RhdGEtYnViYmxlLW9yaWVudGF0aW9uJyxcclxufTtcclxuRGVlcEZyZWV6ZShQYXNzd29yZFN0cmVuZ3RoV2lkZ2V0X0NPTlNUUyk7XHJcbmV4cG9ydCBjbGFzcyBQYXNzd29yZFN0cmVuZ3RoV2lkZ2V0IGV4dGVuZHMgQmFzZUZvcm1XaWRnZXQ8SFRNTERpdkVsZW1lbnQ+IHtcclxuICAgIHB1YmxpYyBfcGFzc3dvcmRGaWVsZDogSUZvcm1JbnB1dDtcclxuICAgIHByaXZhdGUgb3JpZ2luYWxEaXNwbGF5OiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIGZuS2V5VXA6ICgpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIGdldFRleHQ6ICh0OiBzdHJpbmcpID0+IHN0cmluZztcclxuICAgIHByaXZhdGUgb25CbHVyOiAoKSA9PiB2b2lkO1xyXG4gICAgcHJpdmF0ZSBvbkZvY3VzOiAoKSA9PiB2b2lkO1xyXG4gICAgcHJpdmF0ZSBvblNjcm9sbDogKCkgPT4gdm9pZDtcclxuICAgIHByaXZhdGUgZGlzcGxheU1vZGU6IElEaXNwbGF5TW9kZTtcclxuICAgIHByaXZhdGUgdGVtcGxhdGU6IHN0cmluZztcclxuICAgIHByaXZhdGUgaXNCdWJibGU6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIGJ1YmJsZUlEOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIGJ1YmJsZU9yaWVudGF0aW9uOiBCdWJibGVPcmllbnRhdGlvbnM7XHJcblxyXG4gICAgcHJpdmF0ZSBvcmlnaW5hbENsYXNzOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIG9yaWdpbmFsU3R5bGU6IHN0cmluZztcclxuICAgIHByaXZhdGUgaXNCdWJibGVWaXNpYmxlOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBidWJibGVMYXN0VG9wOiBzdHJpbmcgPSAnJztcclxuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gUGFzc3dvcmRTdHJlbmd0aFdpZGdldF9DT05TVFM7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZm9ybTogQmFzZUZvcm0sIGVsOiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyKGZvcm0sIGVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbENsYXNzID0gZWwuY2xhc3NOYW1lO1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWxTdHlsZSA9IGVsLmdldEF0dHJpYnV0ZSgnc3R5bGUnKTtcclxuXHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbERpc3BsYXkgPSBlbC5zdHlsZS5kaXNwbGF5O1xyXG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblxyXG4gICAgICAgIC8vIEF1dG9tYXRpY2FsbHkgYm91bmQgdG8gdGhlIGZvcm0gcGFzc3dvcmQgZmllbGRcclxuICAgICAgICB0aGlzLl9wYXNzd29yZEZpZWxkID0gZm9ybS5nZXRGaWVsZCgnbmV3UGFzc3dvcmQnKSB8fCBmb3JtLmdldEZpZWxkKCdwYXNzd29yZCcpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuX3Bhc3N3b3JkRmllbGQpIHtcclxuICAgICAgICAgICAgdGhpcy53YXJuKFBhc3N3b3JkU3RyZW5ndGhXaWRnZXRfQ09OU1RTLnNlbGVjdG9yICsgXCIncyBmb3JtIGlzIG1pc3NpbmcgcGFzc3dvcmQgZmllbGQgdG8gYm91bmQgdG9cIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0VGV4dCA9IHQgPT4gdGhpcy5fc2NyZWVuU2V0LmdldFRleHQodCk7XHJcblxyXG4gICAgICAgIHRoaXMuZGlzcGxheU1vZGUgPSBEaXNwbGF5TW9kZXNbZWwuZ2V0QXR0cmlidXRlKFBhc3N3b3JkU3RyZW5ndGhXaWRnZXRfQ09OU1RTLmRpc3BsYXlNb2RlKV0gfHwgRGlzcGxheU1vZGVzWydjb21iaW5lZCddO1xyXG5cclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gZ2lneWEudXRpbHMudGVtcGxhdGVzLmZpbGwodGhpcy5fc2NyZWVuU2V0LmdldFRlbXBsYXRlcygpLnBhc3N3b3JkU3RyZW5ndGgsIHtcclxuICAgICAgICAgICAgY29udGVudDogdGhpcy5kaXNwbGF5TW9kZS5nZXRUZW1wbGF0ZSh0aGlzLl9zY3JlZW5TZXQuZ2V0VGVtcGxhdGVzKCkpLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmlzQnViYmxlID0gQm9vbGVhbihlbC5nZXRBdHRyaWJ1dGUoUGFzc3dvcmRTdHJlbmd0aFdpZGdldF9DT05TVFMuYnViYmxlKSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzQnViYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnViYmxlT3JpZW50YXRpb24gPSBCdWJibGVPcmllbnRhdGlvbnNbZWwuZ2V0QXR0cmlidXRlKFBhc3N3b3JkU3RyZW5ndGhXaWRnZXRfQ09OU1RTLmJ1YmJsZU9yaWVudGF0aW9uKV07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5idWJibGVPcmllbnRhdGlvbiA9PT0gJ3VuZGVmaW5lZCcpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ1YmJsZU9yaWVudGF0aW9uID0gdGhpcy5fc2NyZWVuU2V0LmlzTW9kYWwgPyBCdWJibGVPcmllbnRhdGlvbnMubGVmdCA6IEJ1YmJsZU9yaWVudGF0aW9ucy51cDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYnViYmxlSUQgPSB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmNvbnRhaW5lcklEICsgJ19idWJibGUnO1xyXG4gICAgICAgICAgICB0aGlzLm9uQmx1ciA9ICgpID0+IHRoaXMuaGlkZUJ1YmJsZSgpO1xyXG4gICAgICAgICAgICB0aGlzLm9uRm9jdXMgPSAoKSA9PiB0aGlzLnNob3dCdWJibGUoKTtcclxuICAgICAgICAgICAgdGhpcy5vblNjcm9sbCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBiYWxsb29uRGl2ID0gZ2lneWEuZ2xvYmFsWydkaXZHTUJhbGxvb24nXTtcclxuICAgICAgICAgICAgICAgIGlmIChiYWxsb29uRGl2ICYmIGJhbGxvb25EaXYuc3R5bGUudG9wID09IHRoaXMuYnViYmxlTGFzdFRvcCkgdGhpcy5yZWZyZXNoQnViYmxlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmZuS2V5VXAgPSAoKSA9PiB0aGlzLm9uUGFzc3dvcmRDaGFuZ2UoKTtcclxuXHJcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5fcGFzc3dvcmRGaWVsZCwgJ2tleXVwJywgdGhpcy5mbktleVVwKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNCdWJibGUpIHtcclxuICAgICAgICAgICAgdGhpcy5fcGFzc3dvcmRGaWVsZC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMub25Gb2N1cyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Bhc3N3b3JkRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMub25CbHVyKTtcclxuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZEV2ZW50TGlzdGVuZXIoZG9jdW1lbnQsICdzY3JvbGwnLCB0aGlzLm9uU2Nyb2xsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3NjcmVlblNldC5vblJlZnJlc2hFeHRlcm5hbENvbXBvbmVudHNFdmVudCgpLmFkZCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEJ1YmJsZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1bmxpbmtUZW1wbGF0ZSgpIHtcclxuICAgICAgICBnaWd5YS51dGlscy5ET00ucmVtb3ZlRXZlbnRMaXN0ZW5lcihkb2N1bWVudCwgJ3Njcm9sbCcsIHRoaXMub25TY3JvbGwpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fcGFzc3dvcmRGaWVsZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0J1YmJsZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGFzc3dvcmRGaWVsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5vbkJsdXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGFzc3dvcmRGaWVsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMub25Gb2N1cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5oaWRlQnViYmxlKCk7XHJcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuX3Bhc3N3b3JkRmllbGQsICdrZXl1cCcsIHRoaXMuZm5LZXlVcCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdXBlci51bmxpbmtUZW1wbGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd0J1YmJsZSgpIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgdmFyIGJ1YmJsZVcgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5vZmZzZXRXaWR0aCB8fCAyNTA7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB2YXIgYnViYmxlQ2xhc3NlcyA9XHJcbiAgICAgICAgICAgIFBhc3N3b3JkU3RyZW5ndGhXaWRnZXRfQ09OU1RTLmJ1YmJsZUNsYXNzICtcclxuICAgICAgICAgICAgJyAnICtcclxuICAgICAgICAgICAgKHRoaXMuX3NjcmVlblNldC5pc01vYmlsZVVJID8gUGFzc3dvcmRTdHJlbmd0aFdpZGdldF9DT05TVFMubW9iaWxlQ2xhc3MgOiBQYXNzd29yZFN0cmVuZ3RoV2lkZ2V0X0NPTlNUUy5kZXNrdG9wQ2xhc3MpO1xyXG5cclxuICAgICAgICB2YXIgc3R5bGVDYWxjdWxhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgc3R5bGVDYWxjdWxhdG9yLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3N0eWxlJykpO1xyXG4gICAgICAgIGlmIChzdHlsZUNhbGN1bGF0b3Iuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSBzdHlsZUNhbGN1bGF0b3Iuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG5cclxuICAgICAgICB2YXIgYnViYmxlSFRNTCA9XHJcbiAgICAgICAgICAgICc8ZGl2IGlkPVwiJyArXHJcbiAgICAgICAgICAgIHRoaXMuYnViYmxlSUQgK1xyXG4gICAgICAgICAgICAnX2NvbnRlbnRcIiBjbGFzcz1cIicgK1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5jbGFzc05hbWUgK1xyXG4gICAgICAgICAgICAnXCIgc3R5bGU9XCInICtcclxuICAgICAgICAgICAgc3R5bGVDYWxjdWxhdG9yLmdldEF0dHJpYnV0ZSgnc3R5bGUnKSArXHJcbiAgICAgICAgICAgICdcIj4nICtcclxuICAgICAgICAgICAgdGhpcy5nZXRQYXNzd29yZEJ1YmJsZUNvbnRlbnQoKSArXHJcbiAgICAgICAgICAgICc8L2Rpdj4nO1xyXG5cclxuICAgICAgICBnaWd5YS5nbG9iYWwucHV0R01CYWxsb29uTmV4dFRvKFxyXG4gICAgICAgICAgICB0aGlzLl9wYXNzd29yZEZpZWxkLmluc3RhbmNlRWxlbWVudCxcclxuICAgICAgICAgICAgYnViYmxlSFRNTCxcclxuICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgYnViYmxlVyxcclxuICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgdGhpcy5idWJibGVJRCxcclxuICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgdGhpcy5nZXRCdWJibGVPcmllbnRhdGlvbnMoKSxcclxuICAgICAgICAgICAgYnViYmxlQ2xhc3NlcyxcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB0aGlzLmlzQnViYmxlVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5idWJibGVMYXN0VG9wID0gZ2lneWEuZ2xvYmFsWydkaXZHTUJhbGxvb24nXS5zdHlsZS50b3A7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRCdWJibGVPcmllbnRhdGlvbnMoKSB7XHJcbiAgICAgICAgdmFyIG9yaWVudGF0aW9ucyA9IFtCdWJibGVPcmllbnRhdGlvbnNbdGhpcy5idWJibGVPcmllbnRhdGlvbl1dO1xyXG4gICAgICAgIHZhciBmaXJzdCA9IG9yaWVudGF0aW9uc1swXTtcclxuICAgICAgICB2YXIgdXAgPSBCdWJibGVPcmllbnRhdGlvbnNbQnViYmxlT3JpZW50YXRpb25zLnVwXTtcclxuICAgICAgICB2YXIgZG93biA9IEJ1YmJsZU9yaWVudGF0aW9uc1tCdWJibGVPcmllbnRhdGlvbnMuZG93bl07XHJcblxyXG4gICAgICAgIC8vIGFkZCBvciBzZXQgdXAgb3JpZW50YXRpb25cclxuICAgICAgICBpZiAodHlwZW9mIGZpcnN0ID09PSAndW5kZWZpbmVkJykgZmlyc3QgPSB1cDtcclxuICAgICAgICBlbHNlIGlmIChmaXJzdCAhPT0gdXApIG9yaWVudGF0aW9ucy5wdXNoKHVwKTtcclxuXHJcbiAgICAgICAgLy8gYWRkIGRvd24gb3JpZW50YXRpb25cclxuICAgICAgICBpZiAoZmlyc3QgIT09IGRvd24pIG9yaWVudGF0aW9ucy5wdXNoKGRvd24pO1xyXG5cclxuICAgICAgICByZXR1cm4gb3JpZW50YXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGlkZUJ1YmJsZSgpIHtcclxuICAgICAgICBnaWd5YS5nbG9iYWwucmVtb3ZlR01CYWxsb29uKCk7XHJcbiAgICAgICAgdGhpcy5pc0J1YmJsZVZpc2libGUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFBhc3N3b3JkQnViYmxlQ29udGVudCgpIHtcclxuICAgICAgICB2YXIgaXRlbTogSUl0ZW0gPSB7XHJcbiAgICAgICAgICAgIFRFWFQ6IHRoaXMuZ2V0VGV4dCwgLy8gVE9ETyByZW1vdmUgYWZ0ZXIgYXNraW5nIERvclxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBvUGFzc1N0cmVuZ3RoID0gZ2V0UGFzc3dvcmRTdHJlbmd0aERhdGEoU3RyaW5nKHRoaXMuX3Bhc3N3b3JkRmllbGQuZ2V0VmFsdWUoKSkpO1xyXG4gICAgICAgIHZhciBhcGlEYXRhID0gdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKTtcclxuXHJcbiAgICAgICAgdmFyIG9Db21wbGV4aXR5ID0gYXBpRGF0YS5nZXRQb2xpY2llcyA/IGFwaURhdGEuZ2V0UG9saWNpZXMucGFzc3dvcmRDb21wbGV4aXR5IDogbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKCFvQ29tcGxleGl0eSkgb0NvbXBsZXhpdHkgPSB7fTtcclxuICAgICAgICBvQ29tcGxleGl0eS5taW5MZW5ndGggPSBvQ29tcGxleGl0eS5taW5MZW5ndGggfHwgMDtcclxuICAgICAgICBvQ29tcGxleGl0eS5taW5DaGFyR3JvdXBzID0gb0NvbXBsZXhpdHkubWluQ2hhckdyb3VwcyB8fCAwO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kaXNwbGF5TW9kZS5oYXNTdHJlbmd0aE1ldGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBzY29yZSA9IDA7XHJcbiAgICAgICAgICAgIHZhciBzY29yZVRleHRJRCA9ICd0b29fd2Vhayc7XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNQYXNzd29yZFN0cmVuZ3RoVmFsaWQoU3RyaW5nKHRoaXMuX3Bhc3N3b3JkRmllbGQuZ2V0VmFsdWUoKSksIG9QYXNzU3RyZW5ndGgsIG9Db21wbGV4aXR5KSkge1xyXG4gICAgICAgICAgICAgICAgc2NvcmVUZXh0SUQgPSAnd2Vhayc7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9QYXNzU3RyZW5ndGgubGVuZ3RoID4gNCkgc2NvcmUgKz0gNDA7XHJcbiAgICAgICAgICAgICAgICBpZiAob1Bhc3NTdHJlbmd0aC5sZW5ndGggPiA1KSBzY29yZSArPSAyMTsgLy8gY29tYmluZXMgc2NvcmUgPSA2MVxyXG4gICAgICAgICAgICAgICAgaWYgKG9QYXNzU3RyZW5ndGgubGVuZ3RoID4gNykgc2NvcmUgKz0gMTg7IC8vIGNvbWJpbmVzIHNjb3JlID0gNzlcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob1Bhc3NTdHJlbmd0aC5jaGFyR3JvdXBzID4gMSkgc2NvcmUgKz0gMjE7XHJcbiAgICAgICAgICAgICAgICBpZiAob1Bhc3NTdHJlbmd0aC5jaGFyR3JvdXBzID4gMikgc2NvcmUgKz0gMTc7IC8vIGNvbWJpbmVzIHNjb3JlICs9IDM4XHJcbiAgICAgICAgICAgICAgICBpZiAob1Bhc3NTdHJlbmd0aC5jaGFyR3JvdXBzID4gMykgc2NvcmUgKz0gMjM7IC8vIGNvbWJpbmVzIHNjb3JlICs9IDYxXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNjb3JlID4gNjApIHNjb3JlVGV4dElEID0gJ2ZhaXInO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNjb3JlID4gODApIHNjb3JlVGV4dElEID0gJ3N0cm9uZyc7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2NvcmUgPiAxMDApIHNjb3JlVGV4dElEID0gJ3Zlcnlfc3Ryb25nJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaXRlbS5zY29yZSA9IHNjb3JlO1xyXG4gICAgICAgICAgICBpdGVtLnNjb3JlQ2xhc3MgPSAnZ2lneWEtcGFzc3dvcmRTdHJlbmd0aC0nICsgc2NvcmVUZXh0SUQ7XHJcbiAgICAgICAgICAgIGl0ZW0uc2NvcmVUZXh0ID0gdGhpcy5fc2NyZWVuU2V0LmdldFRleHQoc2NvcmVUZXh0SUQpO1xyXG4gICAgICAgICAgICBpdGVtLmJhckluZGljYXRvckNsYXNzID0gJ2dpZ3lhLXBhc3N3b3JkU3RyZW5ndGgtYmFyLScgKyBzY29yZVRleHRJRDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRpc3BsYXlNb2RlLmhhc01pbmltdW1SZXF1aXJlbWVudHMpIHtcclxuICAgICAgICAgICAgdmFyIGFyUmVxdWlyZW1lbnRzID0gW107XHJcblxyXG4gICAgICAgICAgICBpZiAob0NvbXBsZXhpdHkubWluTGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1pbkxlbmd0aFRleHQgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0VGV4dCgnbnVtX2NoYXJhY3RlcnNfdG90YWwnLCAnJW51bScsIG9Db21wbGV4aXR5Lm1pbkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWluTGVuZ3RoVGV4dCkgYXJSZXF1aXJlbWVudHMucHVzaChtaW5MZW5ndGhUZXh0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG9Db21wbGV4aXR5Lm1pbkNoYXJHcm91cHMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWluQ2hhckdyb3Vwc1RleHQgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0VGV4dCgnbnVtX29mX3RoZV9mb2xsb3dpbmdfZ3JvdXBzJywgJyVudW0nLCBvQ29tcGxleGl0eS5taW5DaGFyR3JvdXBzKTtcclxuICAgICAgICAgICAgICAgIGlmIChtaW5DaGFyR3JvdXBzVGV4dCkgYXJSZXF1aXJlbWVudHMucHVzaChtaW5DaGFyR3JvdXBzVGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGl0ZW0ucmVxdWlyZW1lbnRzID0gJyc7XHJcbiAgICAgICAgICAgIGlmIChhclJlcXVpcmVtZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGFzdFJlcSA9IGFyUmVxdWlyZW1lbnRzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5yZXF1aXJlbWVudHMgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0VGV4dCgncGFzc3dvcmRfbXVzdF9jb250YWluX2F0X2xlYXN0JykgKyAnICc7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGFyUmVxdWlyZW1lbnRzLmxlbmd0aCA+IDApIGl0ZW0ucmVxdWlyZW1lbnRzICs9IGFyUmVxdWlyZW1lbnRzLmpvaW4oJywgJykgKyAnICcgKyB0aGlzLl9zY3JlZW5TZXQuZ2V0VGV4dCgnYW5kJykgKyAnICc7XHJcblxyXG4gICAgICAgICAgICAgICAgaXRlbS5yZXF1aXJlbWVudHMgKz0gbGFzdFJlcTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpdGVtLnJlcXVpcmVtZW50cyA9IGdpZ3lhLnBsdWdpblV0aWxzLnRleHQuZml4VGV4dFdpZG93cyhpdGVtLnJlcXVpcmVtZW50cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMudGVtcGxhdGVzLmZpbGwodGhpcy50ZW1wbGF0ZSwgaXRlbSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblBhc3N3b3JkQ2hhbmdlKCkge1xyXG4gICAgICAgIHZhciBodG1sID0gdGhpcy5nZXRQYXNzd29yZEJ1YmJsZUNvbnRlbnQoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNCdWJibGUpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5idWJibGVJRCArICdfY29udGVudCcpLmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gaW5saW5lIGRpc3BsYXlcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IHRoaXMub3JpZ2luYWxEaXNwbGF5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSB7XHJcbiAgICAgICAgc3VwZXIuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcclxuICAgICAgICBpZiAodGhpcy5pc0J1YmJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmJ1YmJsZU9yaWVudGF0aW9uID0gQnViYmxlT3JpZW50YXRpb25zW3RoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShQYXNzd29yZFN0cmVuZ3RoV2lkZ2V0X0NPTlNUUy5idWJibGVPcmllbnRhdGlvbildO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuYnViYmxlT3JpZW50YXRpb24gPT09ICd1bmRlZmluZWQnKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5idWJibGVPcmllbnRhdGlvbiA9IHRoaXMuX3NjcmVlblNldC5pc01vZGFsID8gQnViYmxlT3JpZW50YXRpb25zLmxlZnQgOiBCdWJibGVPcmllbnRhdGlvbnMudXA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWZyZXNoQnViYmxlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQnViYmxlVmlzaWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dCdWJibGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuQmFzZUZvcm1XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KFBhc3N3b3JkU3RyZW5ndGhXaWRnZXQpO1xyXG5pbnRlcmZhY2UgSUl0ZW0ge1xyXG4gICAgVEVYVDogRnVuY3Rpb247IC8vIFRPRE8gd2h5IGRvIHdlIG5lZWQgdGhpcz9cclxuICAgIHNjb3JlPzogbnVtYmVyO1xyXG4gICAgc2NvcmVDbGFzcz86IHN0cmluZztcclxuICAgIHNjb3JlVGV4dD86IHN0cmluZztcclxuICAgIGJhckluZGljYXRvckNsYXNzPzogc3RyaW5nO1xyXG4gICAgcmVxdWlyZW1lbnRzPzogc3RyaW5nO1xyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgSVBhc3N3b3JkU3RyZW5ndGgge1xyXG4gICAgbG93ZXI6IG51bWJlcjtcclxuICAgIHVwcGVyOiBudW1iZXI7XHJcbiAgICBkaWdpdHM6IG51bWJlcjtcclxuICAgIHNwZWNpYWxDaGFyczogbnVtYmVyO1xyXG4gICAgbGVuZ3RoOiBudW1iZXI7XHJcbiAgICBjaGFyR3JvdXBzOiBudW1iZXI7XHJcbn1cclxuZnVuY3Rpb24gcGFzc3dvcmRTdHJlbmd0aE1hdGNoVG9OdW1iZXIobWF0Y2g6IHN0cmluZ1tdKTogbnVtYmVyIHtcclxuICAgIGlmIChtYXRjaCAmJiBtYXRjaC5sZW5ndGgpIHJldHVybiBtYXRjaC5sZW5ndGg7XHJcblxyXG4gICAgcmV0dXJuIDA7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhc3N3b3JkU3RyZW5ndGhEYXRhKHBhc3M6IHN0cmluZyk6IElQYXNzd29yZFN0cmVuZ3RoIHtcclxuICAgIGlmICghcGFzcykgcGFzcyA9ICcnO1xyXG5cclxuICAgIHZhciBvUmVzdWx0OiBJUGFzc3dvcmRTdHJlbmd0aCA9IHtcclxuICAgICAgICBsb3dlcjogcGFzc3dvcmRTdHJlbmd0aE1hdGNoVG9OdW1iZXIocGFzcy5tYXRjaCgvW2Etel0vZykpLFxyXG4gICAgICAgIHVwcGVyOiBwYXNzd29yZFN0cmVuZ3RoTWF0Y2hUb051bWJlcihwYXNzLm1hdGNoKC9bQS1aXS9nKSksXHJcbiAgICAgICAgZGlnaXRzOiBwYXNzd29yZFN0cmVuZ3RoTWF0Y2hUb051bWJlcihwYXNzLm1hdGNoKC9cXGQvZykpLFxyXG4gICAgICAgIHNwZWNpYWxDaGFyczogcGFzc3dvcmRTdHJlbmd0aE1hdGNoVG9OdW1iZXIocGFzcy5tYXRjaCgvW15cXGRBLVphLXpdL2cpKSxcclxuICAgICAgICBsZW5ndGg6IHBhc3MubGVuZ3RoLFxyXG4gICAgICAgIGNoYXJHcm91cHM6IDAsXHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChvUmVzdWx0Lmxvd2VyKSBvUmVzdWx0LmNoYXJHcm91cHMrKztcclxuICAgIGlmIChvUmVzdWx0LnVwcGVyKSBvUmVzdWx0LmNoYXJHcm91cHMrKztcclxuICAgIGlmIChvUmVzdWx0LmRpZ2l0cykgb1Jlc3VsdC5jaGFyR3JvdXBzKys7XHJcbiAgICBpZiAob1Jlc3VsdC5zcGVjaWFsQ2hhcnMpIG9SZXN1bHQuY2hhckdyb3VwcysrO1xyXG5cclxuICAgIHJldHVybiBvUmVzdWx0O1xyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgSVBhc3N3b3JkU3RyZW5ndGhQb2xpY3kge1xyXG4gICAgcmVnRXhwOiBzdHJpbmc7XHJcbiAgICBtaW5Mb3dlcmNhc2U6IG51bWJlcjtcclxuICAgIG1pblVwcGVyY2FzZTogbnVtYmVyO1xyXG4gICAgbWluRGlnaXQ6IG51bWJlcjtcclxuICAgIG1pblNwZWNpYWxDaGFyczogbnVtYmVyO1xyXG4gICAgbWluQ2hhckdyb3VwczogbnVtYmVyO1xyXG4gICAgbWluTGVuZ3RoOiBudW1iZXI7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGlzUGFzc3dvcmRTdHJlbmd0aFZhbGlkKHBhc3M6IHN0cmluZywgb1Bhc3NTdHJlbmd0aDogSVBhc3N3b3JkU3RyZW5ndGgsIG9Db21wbGV4aXR5UG9saWN5OiBJUGFzc3dvcmRTdHJlbmd0aFBvbGljeSkge1xyXG4gICAgaWYgKCFwYXNzIHx8ICFvUGFzc1N0cmVuZ3RoIHx8ICFvQ29tcGxleGl0eVBvbGljeSkgcmV0dXJuO1xyXG4gICAgaWYgKG9Db21wbGV4aXR5UG9saWN5LnJlZ0V4cCkge1xyXG4gICAgICAgIHZhciByZWdleEZvcm1hdCA9IG5ldyBSZWdFeHAob0NvbXBsZXhpdHlQb2xpY3kucmVnRXhwKTtcclxuICAgICAgICByZXR1cm4gcmVnZXhGb3JtYXQudGVzdChwYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICEoXHJcbiAgICAgICAgICAgIG9QYXNzU3RyZW5ndGgubG93ZXIgPCBvQ29tcGxleGl0eVBvbGljeS5taW5Mb3dlcmNhc2UgfHxcclxuICAgICAgICAgICAgb1Bhc3NTdHJlbmd0aC51cHBlciA8IG9Db21wbGV4aXR5UG9saWN5Lm1pblVwcGVyY2FzZSB8fFxyXG4gICAgICAgICAgICBvUGFzc1N0cmVuZ3RoLmRpZ2l0cyA8IG9Db21wbGV4aXR5UG9saWN5Lm1pbkRpZ2l0IHx8XHJcbiAgICAgICAgICAgIG9QYXNzU3RyZW5ndGguc3BlY2lhbENoYXJzIDwgb0NvbXBsZXhpdHlQb2xpY3kubWluU3BlY2lhbENoYXJzIHx8XHJcbiAgICAgICAgICAgIG9QYXNzU3RyZW5ndGguY2hhckdyb3VwcyA8IG9Db21wbGV4aXR5UG9saWN5Lm1pbkNoYXJHcm91cHMgfHxcclxuICAgICAgICAgICAgb1Bhc3NTdHJlbmd0aC5sZW5ndGggPCBvQ29tcGxleGl0eVBvbGljeS5taW5MZW5ndGhcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERlZXBGcmVlemUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcclxuaW1wb3J0IHsgQmFzZVVwbG9hZFdpZGdldCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZVVwbG9hZFdpZGdldCc7XHJcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XHJcbmltcG9ydCB7IFNlcnZlclN0YXRlcyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZVNlcnZlcldpZGdldCc7XHJcbmltcG9ydCB7IEJhc2VGb3JtV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybVdpZGdldCc7XHJcbmltcG9ydCB7IEdTRXJyb3JzIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMnO1xyXG5cclxubGV0IG5leHREb3dubG9hZENvbnRleHQgPSAwO1xyXG5leHBvcnQgY29uc3QgUGhvdG9VcGxvYWRXaWRnZXRfQ09OU1RTID0ge1xyXG4gICAgc2VsZWN0b3I6ICdkaXYuZ2lneWEtcGhvdG8tdXBsb2FkJyxcclxufTtcclxuRGVlcEZyZWV6ZShQaG90b1VwbG9hZFdpZGdldF9DT05TVFMpO1xyXG5leHBvcnQgY2xhc3MgUGhvdG9VcGxvYWRXaWRnZXQgZXh0ZW5kcyBCYXNlVXBsb2FkV2lkZ2V0PEhUTUxEaXZFbGVtZW50PiB7XHJcbiAgICBwcml2YXRlIHBob3RvRWxlbWVudElEOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHBhdGhDb250YWluZXJJRDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBkZWZhdWx0QkdJbWFnZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSB1aUh0bWw6IHN0cmluZztcclxuICAgIHByaXZhdGUgdWlEaXY6IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBsYXN0UmVzcG9uc2VJZDogc3RyaW5nO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gUGhvdG9VcGxvYWRXaWRnZXRfQ09OU1RTO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9mb3JtOiBCYXNlRm9ybSwgZWw6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIoX2Zvcm0sIGVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5waG90b0VsZW1lbnRJRCA9IHRoaXMuX3VwbG9hZElmcmFtZUlEICsgJ19waG90byc7XHJcbiAgICAgICAgdGhpcy5wYXRoQ29udGFpbmVySUQgPSB0aGlzLl91cGxvYWRJZnJhbWVJRCArICdfcGF0aCc7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0QkdJbWFnZSA9IGdpZ3lhLl8uZ2V0Q2RuUmVzb3VyY2UoKSArICcvZ3MvaS9hY2NvdW50cy9hdmF0YXJfNjQucG5nJzsgLy8gVE9ETyBUaGlzIHNob3VsZCBiZSByZXBsYWNlZCBieSBDU1NcclxuXHJcbiAgICAgICAgdmFyIHRlbXBsYXRlID0gdGhpcy5fc2NyZWVuU2V0LmdldFRlbXBsYXRlcygpLnBob3RvVXBsb2FkX3VpO1xyXG4gICAgICAgIHRoaXMudWlIdG1sID0gZ2lneWEudXRpbHMudGVtcGxhdGVzLmZpbGwodGVtcGxhdGUsIHtcclxuICAgICAgICAgICAgcGF0aENvbnRhaW5lcklEOiB0aGlzLnBhdGhDb250YWluZXJJRCxcclxuICAgICAgICAgICAgcGhvdG9FbGVtZW50SUQ6IHRoaXMucGhvdG9FbGVtZW50SUQsXHJcbiAgICAgICAgICAgIGNob29zZV9maWxlOiB0aGlzLl9zY3JlZW5TZXQuZ2V0VGV4dCgnY2hvb3NlX2ZpbGUnKSxcclxuICAgICAgICAgICAgbm9fZmlsZV9jaG9zZW46IHRoaXMuX3NjcmVlblNldC5nZXRUZXh0KCdub19maWxlX2Nob3NlbicpLFxyXG4gICAgICAgICAgICB0aXA6IHRoaXMuX3NjcmVlblNldC5nZXRUZXh0KCdtYXhpbXVtX3NpemVfb2ZfM21iLicpICsgJyBKUEcsIEdJRiwgUE5HLicsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGVsLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgICBpZiAoZ2lneWEubG9jYWxJbmZvLmlzSUU5IHx8IGdpZ3lhLmxvY2FsSW5mby5pc0lFOCkge1xyXG4gICAgICAgICAgICB0aGlzLl9mb3JtLmZpbHRlcnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJPdXRXaWRnZXRzVG9TZW5kOiBkYXRhVG9GaWx0ZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhVG9GaWx0ZXIucHJvZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZGF0YVRvRmlsdGVyLnByb2ZpbGUuX3Byb2ZpbGVQaG90bztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFUb0ZpbHRlcjtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xyXG5cclxuICAgICAgICAvLyBhZGQgaW5zdGFuY2UgdWlcclxuICAgICAgICB0aGlzLnVpRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy51aURpdi5pbm5lckhUTUwgPSB0aGlzLnVpSHRtbDtcclxuICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnVpRGl2KTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXN0b3JlRGVmYXVsdEJnKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLnVpRGl2KTtcclxuICAgICAgICB0aGlzLnVpRGl2ID0gbnVsbDtcclxuXHJcbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZXN0b3JlRGVmYXVsdEJnKCkge1xyXG4gICAgICAgIHZhciBlbFBob3RvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5waG90b0VsZW1lbnRJRCk7XHJcblxyXG4gICAgICAgIGlmIChlbFBob3RvKSBlbFBob3RvLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKCdcIiArIHRoaXMuZGVmYXVsdEJHSW1hZ2UgKyBcIicpXCI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEZvcm1IdG1sKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLnRlbXBsYXRlcy5maWxsKHRoaXMuX3NjcmVlblNldC5nZXRUZW1wbGF0ZXMoKS5waG90b1VwbG9hZF9mb3JtLCB7XHJcbiAgICAgICAgICAgIGZvcm1UYXJnZXQ6IHRoaXMuX3VwbG9hZElmcmFtZUlELFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRGb3JtRWxlbWVudCgpOiBIVE1MRm9ybUVsZW1lbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtRGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdmb3JtJylbMF07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEZpbGVFbGVtZW50KCk6IEhUTUxJbnB1dEVsZW1lbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91cGxvYWRGb3JtLmVsZW1lbnRzWydfcHJvZmlsZVBob3RvJ107XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN1Ym1pdFVwbG9hZEZvcm0oKSB7XHJcbiAgICAgICAgLy8gc2V0IHVwIG5ldyBhY3Rpb24gJiByZXNwb25zZUlkXHJcbiAgICAgICAgdGhpcy5sYXN0UmVzcG9uc2VJZCA9IHRoaXMuX3VwbG9hZElmcmFtZUlEICsgJ18nICsgdGhpcy5fbGFzdFF1ZXJ5SWQ7XHJcbiAgICAgICAgdmFyIGZvcm1BY3Rpb24gPSBnaWd5YS51dGlscy5zdHJpbmdVdGlscy5mb3JtYXQoXHJcbiAgICAgICAgICAgIGBodHRwczovLyR7Z2lneWEuXy5nZXRBcGlEb21haW4oJ2FjY291bnRzJyl9L2FjY291bnRzLnVwbG9hZFByb2ZpbGVQaG90bz9wdWJsaXNoPXRydWUmY29udGV4dD17MH0mc2F2ZVJlc3BvbnNlSUQ9ezB9JnsxfWAsXHJcbiAgICAgICAgICAgIHRoaXMubGFzdFJlc3BvbnNlSWQsXHJcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLmtleVZhbHVlLnNlcmlhbGl6ZSh0aGlzLmdldFNlcnZlclBhcmFtZXRlcnMoKSksXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdXBsb2FkRm9ybS5hY3Rpb24gPSBmb3JtQWN0aW9uO1xyXG5cclxuICAgICAgICAvLyBwbGFjZSB1cGxvYWQgaW1hZ2VcclxuICAgICAgICB2YXIgcGF0aEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnBhdGhDb250YWluZXJJRCk7XHJcbiAgICAgICAgcGF0aEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoJ1wiICsgZ2lneWEuXy5nZXRDZG5SZXNvdXJjZSgpICsgXCIvZ3MvaS9hY2NvdW50cy9zbWFsbExvYWRlci5naWYnKVwiO1xyXG5cclxuICAgICAgICBzdXBlci5zdWJtaXRVcGxvYWRGb3JtKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlcnZlclF1ZXJ5RG9uZShuZXdTdGF0ZTogU2VydmVyU3RhdGVzKSB7XHJcbiAgICAgICAgdGhpcy5zdG9wVXBsb2FkQ2hlY2soKTtcclxuXHJcbiAgICAgICAgLy8gZ2V0IGxhc3QgZXJyb3IgZnJvbSBzZXJ2ZXIgc2luY2UgaWZyYW1lIGRvZXMgbm90IHJlcG9ydCBlcnJvcnMgYWNyb3NzIGRvbWFpbnNcclxuICAgICAgICB2YXIgcGFyYW1zOiBhbnkgPSBnaWd5YS51dGlscy5vYmplY3QucmVtb3ZlVW5kZWZpbmVkKHRoaXMuZ2V0U2VydmVyUGFyYW1ldGVycygpKTtcclxuICAgICAgICBwYXJhbXMuc2F2ZVJlc3BvbnNlSUQgPSB0aGlzLmxhc3RSZXNwb25zZUlkO1xyXG4gICAgICAgIHBhcmFtcy5ub0F1dGggPSB0cnVlO1xyXG4gICAgICAgIGRlbGV0ZSBwYXJhbXMubG9naW5fdG9rZW47XHJcbiAgICAgICAgZGVsZXRlIHBhcmFtcy5yZWdUb2tlbjtcclxuXHJcbiAgICAgICAgZ2lneWEuXy5hcGlBZGFwdGVyLnNlbmRSZXF1ZXN0KCdzb2NpYWxpemUuZ2V0U2F2ZWRSZXNwb25zZScsIHBhcmFtcywgcmVzID0+IHRoaXMub25VcGxvYWRTYXZlZFJlc3BvbnNlKHJlcyksIHtcclxuICAgICAgICAgICAganNTZGtSZXF1ZXN0SWQ6IHRoaXMubGFzdFJlc3BvbnNlSWQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblVwbG9hZFNhdmVkUmVzcG9uc2UocmVzKSB7XHJcbiAgICAgICAgdmFyIHBhdGhFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5wYXRoQ29udGFpbmVySUQpO1xyXG4gICAgICAgIHBhdGhFbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICcnO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHJlcy5lcnJvckNvZGUpIHtcclxuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5PSzpcclxuICAgICAgICAgICAgICAgIHRoaXMub25VcGxvYWRTdWNjZXNzKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5JTlZBTElEX1BBUkFNRVRFUl9WQUxVRTogLy8gQXNzdW1lIHJlcXVlc3QgZGlkIG5vdCByZWFjaCB0aGUgc2VydmVyIGR1ZSB0byBJSVMgYmxvY2tpbmcgbGFyZ2UgZmlsZXNcclxuICAgICAgICAgICAgICAgIHRoaXMub25TZXJ2ZXJFcnJvcih7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5QUk9GSUxFX1BIT1RPX1RPT19MQVJHRSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHRoaXMuX3NjcmVlblNldC5nZXRUZXh0KCdwcm9maWxlUGhvdG9fZmlsZVNpemVFcnJvcicpLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIC8vIEFueSBvdGhlciBlcnJvclxyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNlcnZlckVycm9yKHJlcyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblVwbG9hZFN1Y2Nlc3MoKSB7XHJcbiAgICAgICAgLy8gR2V0IHRoZSBuZXcgaW1hZ2UgZnJvbSB0aGUgc2VydmVyXHJcbiAgICAgICAgdmFyIGVsUGF0aCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucGF0aENvbnRhaW5lcklEKTtcclxuICAgICAgICBpZiAoZWxQYXRoKSBlbFBhdGguc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJyc7XHJcblxyXG4gICAgICAgIHZhciBnZXRQcm9maWxlUGhvdG9QYXJhbXMgPSB0aGlzLmdldFNlcnZlclBhcmFtZXRlcnMoKTtcclxuICAgICAgICBnZXRQcm9maWxlUGhvdG9QYXJhbXMudHlwZSA9ICd0aHVtYm5haWwnO1xyXG4gICAgICAgIGdldFByb2ZpbGVQaG90b1BhcmFtcy5jb250ZXh0ID0gdGhpcy5fdXBsb2FkSWZyYW1lSUQgKyArK25leHREb3dubG9hZENvbnRleHQ7XHJcblxyXG4gICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICB2YXIgdGh1bWJuYWlsVXJsRG9tYWluID0gZ2lneWEuXy5nZXRBcGlEb21haW4oJ2FjY291bnRzJyk7XHJcbiAgICAgICAgdmFyIHRodW1ibmFpbFVybCA9IGAke1xyXG4gICAgICAgICAgICBnZXRQcm9maWxlUGhvdG9QYXJhbXMubG9naW5fdG9rZW4gfHwgZ2V0UHJvZmlsZVBob3RvUGFyYW1zLnJlZ1Rva2VuID8gJ2h0dHBzJyA6IGdpZ3lhLmxvY2FsSW5mby5wcm90b2NvbFxyXG4gICAgICAgIH06Ly8ke3RodW1ibmFpbFVybERvbWFpbn0vYWNjb3VudHMuZ2V0UHJvZmlsZVBob3RvPyR7Z2lneWEudXRpbHMua2V5VmFsdWUuc2VyaWFsaXplKGdldFByb2ZpbGVQaG90b1BhcmFtcyl9YDtcclxuXHJcbiAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgdmFyIGVsUGhvdG8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnBob3RvRWxlbWVudElEKTtcclxuICAgICAgICAgICAgdmFyIGltYWdlVXJsID0gaW1nLnNyYztcclxuXHJcbiAgICAgICAgICAgIGlmIChlbFBob3RvKSBlbFBob3RvLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKCdcIiArIGltYWdlVXJsICsgXCInKVwiO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fZm9ybS5fc2NyZWVuLnNldFByb2ZpbGVQaG90byhpbWFnZVVybCk7XHJcblxyXG4gICAgICAgICAgICBpbWcgPSBpbWcub25sb2FkID0gaW1nLm9uZXJyb3IgPSBudWxsOyAvLyByZW1vdmUgbWVtb3J5IGxlYWtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpbWcub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vblNlcnZlckVycm9yKHtcclxuICAgICAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuUkVTT1VSQ0VfTk9UX0ZPVU5ELFxyXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiAnUHJvZmlsZSBwaG90byBpbmFjY2VzaWJsZS4nLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2Zvcm0uX3NjcmVlbi5zZXRQcm9maWxlUGhvdG8oJycpO1xyXG5cclxuICAgICAgICAgICAgaW1nID0gaW1nLm9ubG9hZCA9IGltZy5vbmVycm9yID0gbnVsbDsgLy8gcmVtb3ZlIG1lbW9yeSBsZWFrXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaW1nLnNyYyA9IHRodW1ibmFpbFVybDtcclxuXHJcbiAgICAgICAgc3VwZXIuc2VydmVyUXVlcnlEb25lKFNlcnZlclN0YXRlcy5Eb25lKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uU2VydmVyRXJyb3IocmVzcG9uc2UpIHtcclxuICAgICAgICB0aGlzLnJlc3RvcmVEZWZhdWx0QmcoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fZm9ybS5fc2NyZWVuLl9zY3JlZW5TZXQub25TY3JlZW5SZXNwb25zZShyZXNwb25zZSwgdGhpcy5fZm9ybSk7XHJcblxyXG4gICAgICAgIHN1cGVyLnNlcnZlclF1ZXJ5RG9uZShTZXJ2ZXJTdGF0ZXMuRXJyb3IpO1xyXG4gICAgfVxyXG59XHJcbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShQaG90b1VwbG9hZFdpZGdldCk7XHJcbiIsImltcG9ydCB7IERlZXBGcmVlemUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcclxuaW1wb3J0IHsgQmFzZVNjcmVlbldpZGdldCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZVNjcmVlbldpZGdldCc7XHJcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcclxuXHJcbmV4cG9ydCB2YXIgUHJvZmlsZVBob3RvV2lkZ2V0X0NPTlNUUyA9IHtcclxuICAgIHNlbGVjdG9yOiAnZGl2LmdpZ3lhLXByb2ZpbGUtcGhvdG8nLFxyXG59O1xyXG5EZWVwRnJlZXplKFByb2ZpbGVQaG90b1dpZGdldF9DT05TVFMpO1xyXG5leHBvcnQgY2xhc3MgUHJvZmlsZVBob3RvV2lkZ2V0IGV4dGVuZHMgQmFzZVNjcmVlbldpZGdldDxIVE1MRGl2RWxlbWVudD4ge1xyXG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBQcm9maWxlUGhvdG9XaWRnZXRfQ09OU1RTO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9zY3JlZW46IFNjcmVlbiwgZWw6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIoX3NjcmVlbiwgZWwpO1xyXG5cclxuICAgICAgICBfc2NyZWVuLl9wcm9maWxlUGhvdG9zLnB1c2godGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcclxuXHJcbiAgICAgICAgdmFyIHByb2ZpbGUgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0UHJvZmlsZSgpO1xyXG4gICAgICAgIHZhciB0aHVtYm5haWxVUkwgPSBwcm9maWxlLnRodW1ibmFpbFVSTCA/IGdpZ3lhLmdsb2JhbC5nZXRQaG90b1VSTChwcm9maWxlLnRodW1ibmFpbFVSTCkgOiAnJztcclxuXHJcbiAgICAgICAgdGhpcy5zZXRUaHVtYm5haWxVcmwodGh1bWJuYWlsVVJMKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0VGh1bWJuYWlsVXJsKHRodW1ibmFpbFVSTDogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuaW5uZXJIVE1MID0gdGh1bWJuYWlsVVJMID8gJzxpbWcgc3JjPVwiJyArIHRodW1ibmFpbFVSTCArICdcIiAvPicgOiAnJztcclxuICAgIH1cclxufVxyXG5CYXNlU2NyZWVuV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShQcm9maWxlUGhvdG9XaWRnZXQpO1xyXG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XHJcbmltcG9ydCB7IEJhc2VGb3JtV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybVdpZGdldCc7XHJcbmltcG9ydCB7IElGb3JtSW5wdXQsIEZvcm1JbnB1dF9DT05TVFMgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Gb3JtSW5wdXQnO1xyXG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xyXG5pbXBvcnQgeyBTY3JlZW5TZXRfQ09OU1RTIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5TZXRQbHVnaW4nO1xyXG5cclxuZXhwb3J0IGNvbnN0IFJlcXVpcmVkRGlzcGxheVdpZGdldF9DT05TVFMgPSB7XHJcbiAgICBzZWxlY3RvcjogJy5naWd5YS1yZXF1aXJlZC1kaXNwbGF5JyxcclxuICAgIGJvdW5kVG86ICdkYXRhLWJvdW5kLXRvJyxcclxufTtcclxuRGVlcEZyZWV6ZShSZXF1aXJlZERpc3BsYXlXaWRnZXRfQ09OU1RTKTtcclxuZXhwb3J0IGNsYXNzIFJlcXVpcmVkRGlzcGxheVdpZGdldCBleHRlbmRzIEJhc2VGb3JtV2lkZ2V0PEhUTUxEaXZFbGVtZW50PiB7XHJcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFJlcXVpcmVkRGlzcGxheVdpZGdldF9DT05TVFM7XHJcbiAgICBwcml2YXRlIGJvdW5kVG86IHN0cmluZztcclxuICAgIHByaXZhdGUgYm91bmRUb0ZpZWxkOiBJRm9ybUlucHV0O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGZvcm06IEJhc2VGb3JtLCBlbDogSFRNTERpdkVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlcihmb3JtLCBlbCk7XHJcblxyXG4gICAgICAgIC8vIFRoZSBhc3RlcmlzayBtYXkgYmUgaGlkZGVuIGJ5IGRlZmF1bHQuIFdlJ2xsIHJlcGxhY2UgdGhpcyB3aXRoIHRoZSBnaWd5YS1oaWRkZW4gY2xhc3MuXHJcbiAgICAgICAgaWYgKGVsLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykge1xyXG4gICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBXQ0FHOiBEb24ndCByZWFkIHRoZSBhc3RlcmlzayB0byB1c2VyIHdoZW4gdXNpbmcgc2NyZWVuIHJlYWRlci5cclxuICAgICAgICAvLyBUaGUgZm9ybSBlbGVtZW50IGhhcyBhcmlhLXJlcXVpcmVkIHdoaWNoIHdpbGwgY29udmV5IHRvIHRoZSB1c2VyIHRoYXQgdGhlIGZpZWxkIGlzIHJlcXVpcmVkLlxyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVWaXNpYmlsaXR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCkge1xyXG4gICAgICAgIHN1cGVyLmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVWaXNpYmlsaXR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZUJvdW5kZWRGaWVsZChmaWVsZDogSUZvcm1JbnB1dCkge1xyXG4gICAgICAgIHRoaXMuYm91bmRUbyA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShSZXF1aXJlZERpc3BsYXlXaWRnZXRfQ09OU1RTLmJvdW5kVG8pO1xyXG4gICAgICAgIHRoaXMuYm91bmRUb0ZpZWxkID0gZmllbGQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVWaXNpYmlsaXR5KCkge1xyXG4gICAgICAgIGNvbnN0IGVsID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKGVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYm91bmRUbyA9IGVsLmdldEF0dHJpYnV0ZShSZXF1aXJlZERpc3BsYXlXaWRnZXRfQ09OU1RTLmJvdW5kVG8pO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYm91bmRUbykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53YXJuKGAke1JlcXVpcmVkRGlzcGxheVdpZGdldF9DT05TVFMuc2VsZWN0b3J9IGlzIG1pc3NpbmcgJHtSZXF1aXJlZERpc3BsYXlXaWRnZXRfQ09OU1RTLmJvdW5kVG99IGF0dHJpYnV0ZWApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuYm91bmRUb0ZpZWxkID0gdGhpcy5fZm9ybS5nZXRGaWVsZCh0aGlzLmJvdW5kVG8sIHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLmFycmF5S2V5VmFsdWVBdHRyaWJ1dGUpKTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmJvdW5kVG9GaWVsZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53YXJuKGAke1JlcXVpcmVkRGlzcGxheVdpZGdldF9DT05TVFMuc2VsZWN0b3J9J3MgZm9ybSBpcyBtaXNzaW5nIGZpZWxkICR7dGhpcy5ib3VuZFRvfSB0byBib3VuZCB0b2ApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmJvdW5kVG9GaWVsZCAmJiB0aGlzLmJvdW5kVG9GaWVsZC5yZXF1aXJlZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3coKSB7XHJcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUNsYXNzRnJvbUVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsIFNjcmVlblNldF9DT05TVFMuZ2lneWFIaWRkZW4pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGlkZSgpIHtcclxuICAgICAgICBnaWd5YS51dGlscy5ET00uYWRkQ2xhc3NUb0VsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsIFNjcmVlblNldF9DT05TVFMuZ2lneWFIaWRkZW4pO1xyXG4gICAgfVxyXG59XHJcbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShSZXF1aXJlZERpc3BsYXlXaWRnZXQpO1xyXG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplLCBGb3JFYWNoIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XHJcbmltcG9ydCB7IEJhc2VGb3JtV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybVdpZGdldCc7XHJcbmltcG9ydCB7IElGb3JtSW5wdXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Gb3JtSW5wdXQnO1xyXG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xyXG5pbXBvcnQgeyBUZW1wbGF0ZUVsZW1lbnQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1RlbXBsYXRlRWxlbWVudCc7XHJcblxyXG5leHBvcnQgdmFyIFNlY3JldFF1ZXN0aW9uV2lkZ2V0X0NPTlNUUyA9IHtcclxuICAgIHNlbGVjdG9yOiAnZGl2LmdpZ3lhLXNlY3JldC1xdWVzdGlvbicsXHJcbiAgICBhbGxvd0VtcHR5OiAnZGF0YS1hbGxvdy1lbXB0eScsXHJcbn07XHJcbkRlZXBGcmVlemUoU2VjcmV0UXVlc3Rpb25XaWRnZXRfQ09OU1RTKTtcclxuZXhwb3J0IGNsYXNzIFNlY3JldFF1ZXN0aW9uV2lkZ2V0IGV4dGVuZHMgQmFzZUZvcm1XaWRnZXQ8SFRNTERpdkVsZW1lbnQ+IHtcclxuICAgIHByaXZhdGUgcXVlc3Rpb25zID0gbmV3IEFycmF5PFF1ZXN0aW9uRWxlbWVudD4oKTtcclxuICAgIHByaXZhdGUgYW5zd2VyRmllbGQ6IElGb3JtSW5wdXQ7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBTZWNyZXRRdWVzdGlvbldpZGdldF9DT05TVFM7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZm9ybTogQmFzZUZvcm0sIGVsOiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyKGZvcm0sIGVsLCBmYWxzZSk7XHJcblxyXG4gICAgICAgIGZvcm0uX3NlY3JldFF1ZXN0aW9ucy5wdXNoKHRoaXMpO1xyXG5cclxuICAgICAgICBjb25zdCBxdWVzdGlvbkVsZW1lbnRzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnKltuYW1lPVwic2VjcmV0UXVlc3Rpb25cIl0nKTtcclxuICAgICAgICBGb3JFYWNoKHF1ZXN0aW9uRWxlbWVudHMsIChxdWVzdGlvbkVsOiBIVE1MRWxlbWVudCkgPT4gdGhpcy5xdWVzdGlvbnMucHVzaChuZXcgUXVlc3Rpb25FbGVtZW50KHF1ZXN0aW9uRWwsIHRoaXMpKSk7XHJcblxyXG4gICAgICAgIHRoaXMuYW5zd2VyRmllbGQgPSBmb3JtLmdldEZpZWxkKCdzZWNyZXRBbnN3ZXInKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmFuc3dlckZpZWxkKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2FybihTZWNyZXRRdWVzdGlvbldpZGdldF9DT05TVFMuc2VsZWN0b3IgKyBcIidzIGZvcm0gaXMgbWlzc2luZyBzZWNyZXRBbnN3ZXIgZmllbGQgdG8gbGluayB0b1wiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdW5saW5rVGVtcGxhdGUoKSB7XHJcbiAgICAgICAgRm9yRWFjaCh0aGlzLnF1ZXN0aW9ucywgcSA9PiBxLnVubGlua1RlbXBsYXRlKCkpO1xyXG5cclxuICAgICAgICBzdXBlci51bmxpbmtUZW1wbGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hbnN3ZXJGaWVsZCkgdGhpcy5hbnN3ZXJGaWVsZC5pbnN0YW5jZUVsZW1lbnQuc2V0QXR0cmlidXRlKFNlY3JldFF1ZXN0aW9uV2lkZ2V0X0NPTlNUUy5hbGxvd0VtcHR5LCAnMScpOyAvLyBUT0RPIHBlcmhhcHMgdXNlIGEgZGlmZmVyZW50IHZhbHVlXHJcblxyXG4gICAgICAgICAgICBGb3JFYWNoKHRoaXMucXVlc3Rpb25zLCBxID0+IHEubGlua0luc3RhbmNlRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkgRm9yRWFjaCh0aGlzLnF1ZXN0aW9ucywgcSA9PiBxLnVubGlua0luc3RhbmNlRWxlbWVudCgpKTtcclxuXHJcbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFF1ZXN0aW9uKHF1ZXN0aW9uOiBzdHJpbmcpIHtcclxuICAgICAgICBGb3JFYWNoKHRoaXMucXVlc3Rpb25zLCBxID0+IChxLmluc3RhbmNlRWxlbWVudC5pbm5lckhUTUwgPSBxdWVzdGlvbikpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5hbnN3ZXJGaWVsZCkgdGhpcy5hbnN3ZXJGaWVsZC5pbnN0YW5jZUVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFNlY3JldFF1ZXN0aW9uV2lkZ2V0X0NPTlNUUy5hbGxvd0VtcHR5KTtcclxuXHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnOyAvLyBUT0RPIHdoeSB0aGlzIGlzIG5lZWRlZFxyXG4gICAgfVxyXG59XHJcbmNsYXNzIFF1ZXN0aW9uRWxlbWVudCBleHRlbmRzIFRlbXBsYXRlRWxlbWVudDxIVE1MRWxlbWVudD4ge1xyXG4gICAgY29uc3RydWN0b3IoZWw6IEhUTUxFbGVtZW50LCBwYXJlbnQ6IFNlY3JldFF1ZXN0aW9uV2lkZ2V0KSB7XHJcbiAgICAgICAgc3VwZXIoZWwsIHBhcmVudCk7XHJcbiAgICB9XHJcbn1cclxuQmFzZUZvcm1XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KFNlY3JldFF1ZXN0aW9uV2lkZ2V0KTtcclxuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSwgZmlyc3RQYXJ0LCBnZXRVbml0TWVhc3VyZW1lbnRUeXBlLCBVbml0TWVhc3VyZW1lbnRUeXBlIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XHJcbmltcG9ydCB7IEJhc2VTY3JlZW5XaWRnZXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VTY3JlZW5XaWRnZXQnO1xyXG5pbXBvcnQgeyBJRm9ybSwgSVNjcmVlblNldFBhcmFtcyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UGx1Z2luJztcclxuaW1wb3J0IHsgSUxvZ2luTW9kZSwgTG9naW5Nb2RlcyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvTG9naW5Nb2Rlcyc7XHJcbmltcG9ydCB7IElQbHVnaW5QYXJhbXMgfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL2ludGVyZmFjZXMvSVBsdWdpblBhcmFtcyc7XHJcbmltcG9ydCB7IElQbHVnaW5UZW1wbGF0ZXMgfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL2ludGVyZmFjZXMvSVBsdWdpblRlbXBsYXRlcyc7XHJcbmltcG9ydCB7IElQbHVnaW5DU1MgfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL2ludGVyZmFjZXMvSVBsdWdpbkNTUyc7XHJcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcclxuaW1wb3J0IHsgQmFzZUZvcm0sIEZvcm1fQ09OU1RTIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XHJcbmltcG9ydCB7IEJhc2VQbHVnaW4gfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL0Jhc2VQbHVnaW4nO1xyXG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gJy4uLy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcclxuXHJcbmxldCBuZXh0R2VuZXJhdGVkQ29udGFpbmVySWQgPSAwO1xyXG5leHBvcnQgY29uc3QgU29jaWFsTG9naW5XaWRnZXRfQ09OU1RTID0ge1xyXG4gICAgc2VsZWN0b3I6ICdkaXYuZ2lneWEtc29jaWFsLWxvZ2luJyxcclxufTtcclxuRGVlcEZyZWV6ZShTb2NpYWxMb2dpbldpZGdldF9DT05TVFMpO1xyXG5leHBvcnQgY2xhc3MgU29jaWFsTG9naW5XaWRnZXQgZXh0ZW5kcyBCYXNlU2NyZWVuV2lkZ2V0PEhUTUxEaXZFbGVtZW50PiBpbXBsZW1lbnRzIElGb3JtIHtcclxuICAgIHB1YmxpYyBiaW5kSUQ6IHN0cmluZztcclxuICAgIHB1YmxpYyBzdWNjZXNzU2NyZWVuOiBzdHJpbmc7XHJcblxyXG4gICAgcHJpdmF0ZSBjb250YWluZXJJZDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBvbkxvZ2luUmVzcG9uc2U6IChlKSA9PiB2b2lkO1xyXG4gICAgcHJpdmF0ZSBvbkVycm9yUmVzcG9uc2U6IChlKSA9PiB2b2lkO1xyXG4gICAgcHJpdmF0ZSBsb2dpbk1vZGU6IElMb2dpbk1vZGU7XHJcbiAgICBwcml2YXRlIGFwaVBhcmFtczogSVNjcmVlblNldFBhcmFtcztcclxuICAgIHByaXZhdGUgX2luc3RhbmNlOiBCYXNlUGx1Z2luPElQbHVnaW5QYXJhbXMsIElQbHVnaW5UZW1wbGF0ZXMsIElQbHVnaW5DU1M+O1xyXG4gICAgcHJpdmF0ZSBfY29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFNvY2lhbExvZ2luV2lkZ2V0X0NPTlNUUztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihfc2NyZWVuOiBTY3JlZW4sIGVsOiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyKF9zY3JlZW4sIGVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5iaW5kSUQgPSB0aGlzLnB1Ymxpc2hJRCA/IHRoaXMuSUQgOiBTb2NpYWxMb2dpbldpZGdldF9DT05TVFMuc2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5sb2dpbk1vZGUgPSBMb2dpbk1vZGVzW3RoaXMucGFyYW1zWydsb2dpbk1vZGUnXSB8fCAnc3RhbmRhcmQnXTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lcklkID0gdGhpcy5fc2NyZWVuU2V0LmNvbnRhaW5lcklEICsgJ19zb2NpYWxfJyArIG5leHRHZW5lcmF0ZWRDb250YWluZXJJZCsrOyAvLyBUT0RPIENoYW5nZSB1c2UgdGhlIHNhbWUgaWQgZm9yIHRoZSBzYW1lIHNjcmVlblNldCBpbnN0YW5jZSwgcmVnYXJkbGVzcyBvZiBob3cgbWFueSB0aW1lcyBpdCBpcyByZXVzZWQsIHVubGlrZSBleGlzdGluZyBpbXBsZW1lbnRhdGlvbiB0aGF0IHVzZXMgYSBuZXcgaWQgZWFjaCB0aW1lXHJcblxyXG4gICAgICAgIHRoaXMub25FcnJvclJlc3BvbnNlID0gZSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEhvdCBmaXggZm9yIFwibm8gcHJvdmlkZXJzXCIgZXJyb3IgdGhhdCBnb2VzIGludG8gdGhlIGluZmluaXRlIGxvb3AgLSBzZWUgIzQ0Mjg1XHJcbiAgICAgICAgICAgIC8vIEhvdCBmaXggZm9yIFwiaW52YWxpZCBwYXJhbWV0ZXJcIiAtIHNlZSAjNTYxNTNcclxuICAgICAgICAgICAgaWYgKGUuZXJyb3JDb2RlICE9PSBHU0Vycm9ycy5OT19QUk9WSURFUlMgJiYgZS5lcnJvckNvZGUgIT09IEdTRXJyb3JzLklOVkFMSURfUEFSQU1FVEVSX1ZBTFVFKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2NyZWVuU2V0Lm9uU2NyZWVuUmVzcG9uc2UoZSwgdGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMub25Mb2dpblJlc3BvbnNlID0gZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5yZW1vdmVSZWdUb2tlbigpO1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQub25TY3JlZW5SZXNwb25zZSh7IGVycm9yQ29kZTogMCwgZXZlbnQ6IGUgfSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkge1xyXG4gICAgICAgICAgICB3aGlsZSAodGhpcy5pbnN0YW5jZUVsZW1lbnQuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gY2xlYXJpbmcgdGhlIGluc3RhbmNlIGVsZW1lbnQuIE5vdGljZSB0aGlzIGlzIGZhc3RlciB0aGFuIGlubmVySFRNTD0nJy5cclxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuaW5zdGFuY2VFbGVtZW50LmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyLmNsYXNzTmFtZSA9ICdnaWd5YS1zb2NpYWwtbG9naW4tY29udGFpbmVyJztcclxuICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyLmlkID0gdGhpcy5jb250YWluZXJJZDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2NvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUVuYWJsZWRQcm92aWRlcnMoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYXBpUGFyYW1zID0gdGhpcy5sb2dpbk1vZGUuZmlsdGVyUGFyYW1zKGdpZ3lhLnV0aWxzLm9iamVjdC5jbG9uZSh0aGlzLl9zY3JlZW5TZXQucGFyYW1zKSk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJhbXNbJ2NvbnRhaW5lcklEJ10pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2lkZ2V0UGFyYW1zID0gdGhpcy5wYXJhbXM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcldpZGdldCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3VyZmFjZSBlcnJvcnMgaW4gY29udGFpbmluZyBmb3JtLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RXJyb3JEaXNwbGF5Rm9ybSgpOiBCYXNlRm9ybSB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjcmVlbi5nZXRGb3JtQnlFbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvLy8gT3ZlcnJpZGUgZnJvbSBUZW1wbGF0ZUVsZW1lbnRcclxuICAgIHByb3RlY3RlZCBpbml0RnJvbUluc3RhbmNlRWxlbWVudCgpIHtcclxuICAgICAgICB0aGlzLnN1Y2Nlc3NTY3JlZW4gPSB0aGlzLl9zY3JlZW5TZXQuY2hvb3NlTmV4dFNjcmVlbih0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybV9DT05TVFMuc3VjY2Vzc1NjcmVlbikpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2FsY3VsYXRlRW5hYmxlZFByb3ZpZGVycygpIHtcclxuICAgICAgICB2YXIgbG9naW5Qcm92aWRlcnMgPSB0aGlzLmxvZ2luTW9kZS5nZXRMb2dpblByb3ZpZGVycyh0aGlzLl9zY3JlZW5TZXQuZGF0YS5hcGlEYXRhLCB0aGlzLnBhcmFtcywgdGhpcy5fc2NyZWVuU2V0LmRhdGEucmVnVG9rZW4pO1xyXG5cclxuICAgICAgICBpZiAobG9naW5Qcm92aWRlcnMgIT09IG51bGwgJiYgdHlwZW9mIGxvZ2luUHJvdmlkZXJzICE9PSAndW5kZWZpbmVkJykgdGhpcy5wYXJhbXNbJ2VuYWJsZWRQcm92aWRlcnMnXSA9IGxvZ2luUHJvdmlkZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1bmxpbmtJbnN0YW5jZUVsZW1lbnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB0aGlzLmluc3RhbmNlRWxlbWVudC5pbm5lckhUTUwgPSAnJzsgLy8gVG8gbWFrZSBzdXJlIG5vIElEIGNvbmZsaWN0cyB3aWxsIGJlIGdlbmVyYXRlZFxyXG5cclxuICAgICAgICBpZiAodGhpcy5faW5zdGFuY2UpIHRoaXMuX2luc3RhbmNlLmRpc3Bvc2UoKTtcclxuXHJcbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlbmRlcldpZGdldCgpOiB2b2lkIHtcclxuICAgICAgICAvLyBiZWNhdXNlIHJlbmRlcmluZyB0aGUgd2lkZ2V0IGlzIGFzeW5jLCB3ZSBzZXQgdGhlIGNvbnRhaW5lciBzaXplIHRvIHRha2Ugcm9vbSBhY2NvcmRpbmdseSAtIHNvIHRoZSBzY3JlZW5zZXQgd2lsbCBjZW50ZXIgY29ycmVjdGx5LlxyXG4gICAgICAgIHRoaXMuc2V0Q29udGFpbmVyU2l6ZSh0aGlzLndpZGdldFBhcmFtc1snd2lkdGgnXSwgdGhpcy53aWRnZXRQYXJhbXNbJ2hlaWdodCddKTtcclxuXHJcbiAgICAgICAgLy9yZS1yZW5kZXIgcGx1Z2luIGFuZCBjYWxsIHRoZSBwbHVnaW4gQVBJIGFnYWluIHdpdGggdGhlIG5ldyBwYXJhbWV0ZXJzIGFmdGVyIHRoZSBjb25kaXRpb25hbHMuXHJcbiAgICAgICAgZ2lneWEuc29jaWFsaXplLnNob3dMb2dpblVJKHRoaXMuYXBpUGFyYW1zLCB0aGlzLndpZGdldFBhcmFtcywge1xyXG4gICAgICAgICAgICBjb250YWluZXJJRDogdGhpcy5jb250YWluZXJJZCxcclxuICAgICAgICAgICAgYWNjb3VudHNTb2NpYWxMb2dpbjogdHJ1ZSxcclxuICAgICAgICAgICAgb25Mb2dpbjogdGhpcy5vbkxvZ2luUmVzcG9uc2UsXHJcbiAgICAgICAgICAgIG9uRXJyb3I6IHRoaXMub25FcnJvclJlc3BvbnNlLFxyXG4gICAgICAgICAgICBmaW5hbGl6ZVJlZ2lzdHJhdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgZG9udEhhbmRsZVNjcmVlblNldDogdHJ1ZSxcclxuICAgICAgICAgICAgVUlNb2RlOiB0aGlzLmxvZ2luTW9kZSAhPT0gTG9naW5Nb2Rlcy5saW5rID8gJ0xvZ2luJyA6ICdMaW5rQWNjb3VudCcsXHJcbiAgICAgICAgICAgIGluY2x1ZGU6IGdpZ3lhLnV0aWxzLnN0cmluZ1V0aWxzLm1lcmdlQ29tbWFTZXBhcmF0ZWRWYWx1ZXMoXHJcbiAgICAgICAgICAgICAgICAncHJvZmlsZSxkYXRhLGVtYWlscyxzdWJzY3JpcHRpb25zLHByZWZlcmVuY2VzJyxcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5wYXJhbXMuaW5jbHVkZSksXHJcbiAgICAgICAgICAgIHJlZ1NvdXJjZTogdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5yZWdTb3VyY2UgfHwgZmlyc3RQYXJ0KGZpcnN0UGFydChsb2NhdGlvbi5ocmVmLCAnPycpLCAnIycpLCAvLyBUT0RPIGhhdmUgdGhpcyBsb2dpYyBpbiB0aGUgc2NyZWVuIGNyZWF0aW9uXHJcbiAgICAgICAgICAgIGdldEluc3RhbmNlOiBpbnN0YW5jZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBpbnN0YW5jZXM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJXaWRnZXRVSSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Q29udGFpbmVyU2l6ZSh3aWR0aDogc3RyaW5nLCBoZWlnaHQ6IHN0cmluZykge1xyXG4gICAgICAgIGlmICh3aWR0aCkge1xyXG4gICAgICAgICAgICB2YXIgd2lkdGhVbml0cyA9IGdldFVuaXRNZWFzdXJlbWVudFR5cGUod2lkdGgpO1xyXG4gICAgICAgICAgICBpZiAod2lkdGhVbml0cyAhPSBVbml0TWVhc3VyZW1lbnRUeXBlLmF1dG8pIHRoaXMuX2NvbnRhaW5lci5zdHlsZS53aWR0aCA9IHBhcnNlRmxvYXQod2lkdGgpICsgd2lkdGhVbml0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChoZWlnaHQpIHtcclxuICAgICAgICAgICAgdmFyIGhlaWdodFVuaXRzID0gZ2V0VW5pdE1lYXN1cmVtZW50VHlwZShoZWlnaHQpO1xyXG4gICAgICAgICAgICBpZiAoaGVpZ2h0VW5pdHMgIT0gVW5pdE1lYXN1cmVtZW50VHlwZS5hdXRvKSB0aGlzLl9jb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gcGFyc2VGbG9hdChoZWlnaHQpICsgaGVpZ2h0VW5pdHM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbkJhc2VTY3JlZW5XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KFNvY2lhbExvZ2luV2lkZ2V0KTtcclxuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xyXG5pbXBvcnQgeyBCYXNlRm9ybVdpZGdldCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm1XaWRnZXQnO1xyXG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xyXG5pbXBvcnQgeyBQcm9maWxlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvUHJvZmlsZUZvcm0nO1xyXG5cclxuZXhwb3J0IHZhciBTdWJzY3JpcHRpb25XaWRnZXRfQ09OU1RTID0ge1xyXG4gICAgc2VsZWN0b3I6ICdkaXYuZ2lneWEtc3Vic2NyaXB0aW9uJyxcclxuICAgIHN1YnNjcmlwdGlvbk5hbWU6ICduYW1lJyxcclxufTtcclxuRGVlcEZyZWV6ZShTdWJzY3JpcHRpb25XaWRnZXRfQ09OU1RTKTtcclxuZXhwb3J0IGNsYXNzIFN1YnNjcmlwdGlvbldpZGdldCBleHRlbmRzIEJhc2VGb3JtV2lkZ2V0PEhUTUxEaXZFbGVtZW50PiB7XHJcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFN1YnNjcmlwdGlvbldpZGdldF9DT05TVFM7XHJcblxyXG4gICAgcHJpdmF0ZSBfc2hvdWxkUG9wdWxhdGU6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIHN1YnNjcmlwdGlvbk9iajogeyBjaGFubmVsOiBzdHJpbmc7IG5hbWU6IHN0cmluZyB9O1xyXG4gICAgcHJpdmF0ZSBfY29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgX2ludXB0RWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcclxuICAgIHByaXZhdGUgX2xhYmVsRWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIF9zdGF0dXNFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihmb3JtOiBCYXNlRm9ybSwgZWw6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIoZm9ybSwgZWwpO1xyXG4gICAgICAgIHRoaXMuX3Nob3VsZFBvcHVsYXRlID0gZm9ybSBpbnN0YW5jZW9mIFByb2ZpbGVGb3JtO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIC8vIHN1YnNjcmlwdGlvbiBuYW1lOiBzdWJzY3JpcHRpb24uPG5hbWU+LjxjaGFubmVsPlxyXG4gICAgICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25OYW1lID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKFN1YnNjcmlwdGlvbldpZGdldC5DT05TVFMuc3Vic2NyaXB0aW9uTmFtZSkuc3BsaXQoJy4nKTtcclxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uTmFtZS5zaGlmdCgpOyAvLyByZW1vdmUgcHJlY2VkaW5nIHN1YnNjcmlwdGlvbnNcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgY2hhbm5lbDogc3Vic2NyaXB0aW9uTmFtZS5wb3AoKSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IHN1YnNjcmlwdGlvbk5hbWUuam9pbignLicpLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgbGV0IGNoZWNrZWQgPSB0aGlzLnRlbXBsYXRlRWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtY2hlY2tlZCcpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3Nob3VsZFBvcHVsYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25zSW5mbyA9IHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCkuZ2V0QWNjb3VudEluZm87XHJcbiAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uc0luZm8gJiYgc3Vic2NyaXB0aW9uc0luZm8uc3Vic2NyaXB0aW9ucyAmJiBzdWJzY3JpcHRpb25zSW5mby5zdWJzY3JpcHRpb25zLmhhc093blByb3BlcnR5KHRoaXMuc3Vic2NyaXB0aW9uT2JqLm5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gc3Vic2NyaXB0aW9uc0luZm8uc3Vic2NyaXB0aW9uc1t0aGlzLnN1YnNjcmlwdGlvbk9iai5uYW1lXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhbm5lbCA9IHN1YnNjcmlwdGlvblt0aGlzLnN1YnNjcmlwdGlvbk9iai5jaGFubmVsXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5uZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5uZWwuaGFzT3duUHJvcGVydHkoJ2lzU3Vic2NyaWJlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkID0gY2hhbm5lbFsnaXNTdWJzY3JpYmVkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFubmVsLmhhc093blByb3BlcnR5KCdkb3VibGVPcHRJbicpICYmIGNoYW5uZWxbJ2RvdWJsZU9wdEluJ11bJ3N0YXR1cyddLnRvTG93ZXJDYXNlKCkgPT09ICdwZW5kaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzRWxlbWVudC5jbGFzc05hbWUgPSAnc3Vic2NyaXB0aW9uLXN0YXR1cy1sYWJlbCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGF0dXNFbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzE4cHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzRWxlbWVudC5zdHlsZS5jb2xvciA9ICdncmV5JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YXR1c0VsZW1lbnQuc3R5bGUuZm9udFN0eWxlID0gJ2l0YWxpYyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGF0dXNFbGVtZW50LmlubmVyVGV4dCA9IHRoaXMuX3NjcmVlblNldC5nZXRUZXh0KCdzdWJzY3JpcHRpb25fcGVuZGluZ19jb25maXJtYXRpb24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5faW51cHRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICAgICAgdGhpcy5faW51cHRFbGVtZW50LmlkID0gYHN1YnMtY2hlY2tib3gtJHt0aGlzLnN1YnNjcmlwdGlvbk9iai5uYW1lfWA7XHJcbiAgICAgICAgICAgIHRoaXMuX2ludXB0RWxlbWVudC5uYW1lID0gYHN1YnNjcmlwdGlvbnMuJHt0aGlzLnN1YnNjcmlwdGlvbk9iai5uYW1lfS4ke3RoaXMuc3Vic2NyaXB0aW9uT2JqLmNoYW5uZWx9LmlzU3Vic2NyaWJlZGA7XHJcbiAgICAgICAgICAgIHRoaXMuX2ludXB0RWxlbWVudC5jbGFzc05hbWUgPSAnZ2lneWEtaW5wdXQtY2hlY2tib3ggc3Vic2NyaXB0aW9uLWNoZWNrYm94JztcclxuICAgICAgICAgICAgdGhpcy5faW51cHRFbGVtZW50LnR5cGUgPSAnY2hlY2tib3gnO1xyXG4gICAgICAgICAgICB0aGlzLl9pbnVwdEVsZW1lbnQuY2hlY2tlZCA9IGNoZWNrZWQ7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9sYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG4gICAgICAgICAgICB0aGlzLl9sYWJlbEVsZW1lbnQuY2xhc3NOYW1lID0gJ3N1YnNjcmlwdGlvbi1uYW1lLWxhYmVsJztcclxuICAgICAgICAgICAgdGhpcy5fbGFiZWxFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcclxuICAgICAgICAgICAgdGhpcy5fbGFiZWxFbGVtZW50LnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAnbWlkZGxlJztcclxuICAgICAgICAgICAgdGhpcy5fbGFiZWxFbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzVweCc7XHJcbiAgICAgICAgICAgIHRoaXMuX2xhYmVsRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2ZvcicsIHRoaXMuX2ludXB0RWxlbWVudC5pZCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyLmNsYXNzTmFtZSA9ICdzdWJzLXdpZGdldC1jb250YWluZXInO1xyXG4gICAgICAgICAgICAvL2FkZCBjaGVja2JveFxyXG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5faW51cHRFbGVtZW50KTtcclxuICAgICAgICAgICAgLy9hZGQgbGFiZWwgbmVhciBjaGVja2JveFxyXG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fbGFiZWxFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIC8vYWRkICdwZW5kaW5nJyBzdGF0dXMgZWxlbWVudFxyXG4gICAgICAgICAgICBpZiAodGhpcy5fc3RhdHVzRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX3N0YXR1c0VsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9jb250YWluZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcldpZGdldCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVuZGVyV2lkZ2V0KCkge1xyXG4gICAgICAgIHN1cGVyLnJlbmRlcldpZGdldCgpO1xyXG4gICAgICAgIHRoaXMuX2xhYmVsRWxlbWVudC5pbm5lckhUTUwgPSAhdGhpcy5pbnN0YW5jZUVsZW1lbnQgPyAnJyA6IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1sYWJlbCcpO1xyXG4gICAgfVxyXG59XHJcbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShTdWJzY3JpcHRpb25XaWRnZXQpO1xyXG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XHJcbmltcG9ydCB7IEJhc2VTY3JlZW5XaWRnZXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VTY3JlZW5XaWRnZXQnO1xyXG5pbXBvcnQgeyBJRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UGx1Z2luJztcclxuaW1wb3J0IHsgSVBsdWdpblBhcmFtcyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvaW50ZXJmYWNlcy9JUGx1Z2luUGFyYW1zJztcclxuaW1wb3J0IHsgSVBsdWdpblRlbXBsYXRlcyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvaW50ZXJmYWNlcy9JUGx1Z2luVGVtcGxhdGVzJztcclxuaW1wb3J0IHsgSVBsdWdpbkNTUyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvaW50ZXJmYWNlcy9JUGx1Z2luQ1NTJztcclxuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xyXG5pbXBvcnQgeyBCYXNlUGx1Z2luIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMuUGx1Z2luL2FwcC9CYXNlUGx1Z2luJztcclxuXHJcbmxldCBuZXh0VGZhQ29udGFpbmVySWQgPSAwO1xyXG5leHBvcnQgY29uc3QgVGZhV2lkZ2V0X0NPTlNUUyA9IHtcclxuICAgIHNlbGVjdG9yOiAnZGl2LmdpZ3lhLXRmYScsXHJcbn07XHJcbkRlZXBGcmVlemUoVGZhV2lkZ2V0X0NPTlNUUyk7XHJcbmV4cG9ydCBjbGFzcyBUZmFXaWRnZXQgZXh0ZW5kcyBCYXNlU2NyZWVuV2lkZ2V0PEhUTUxEaXZFbGVtZW50PiBpbXBsZW1lbnRzIElGb3JtIHtcclxuICAgIHB1YmxpYyBiaW5kSUQ6IHN0cmluZztcclxuICAgIHByaXZhdGUgdGZhQ29udGFpbmVySWQ6IHN0cmluZztcclxuICAgIHByaXZhdGUgX2luc3RhbmNlOiBCYXNlUGx1Z2luPElQbHVnaW5QYXJhbXMsIElQbHVnaW5UZW1wbGF0ZXMsIElQbHVnaW5DU1M+O1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gVGZhV2lkZ2V0X0NPTlNUUztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihfc2NyZWVuOiBTY3JlZW4sIGVsOiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyKF9zY3JlZW4sIGVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5iaW5kSUQgPSB0aGlzLnB1Ymxpc2hJRCA/IHRoaXMuSUQgOiBUZmFXaWRnZXRfQ09OU1RTLnNlbGVjdG9yO1xyXG4gICAgICAgIF9zY3JlZW4uX2hhc1RmYSA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIFRPRE8gQ2hhbmdlIHVzZSB0aGUgc2FtZSBpZCBmb3IgdGhlIHNhbWUgc2NyZWVuU2V0IGluc3RhbmNlLCByZWdhcmRsZXNzIG9mIGhvdyBtYW55IHRpbWVzIGl0IGlzIHJldXNlZCwgdW5saWtlIGV4aXN0aW5nIGltcGxlbWVudGF0aW9uIHRoYXQgdXNlcyBhIG5ldyBpZCBlYWNoIHRpbWVcclxuICAgICAgICB0aGlzLnRmYUNvbnRhaW5lcklkID0gKHRoaXMuX3NjcmVlblNldC5wYXJhbXMuY29udGFpbmVySUQgfHwgJ3Nob3dTY3JlZW5TZXQnKSArICdfc2hvd1RmYVVJXycgKyBuZXh0VGZhQ29udGFpbmVySWQrKztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuaW5uZXJIVE1MID0gJzxkaXYgaWQ9XCInICsgdGhpcy50ZmFDb250YWluZXJJZCArICdcIj48L2Rpdj4nO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc2NyZWVuLmRpbVNjcmVlbigpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMud2lkZ2V0UGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndpZGdldFBhcmFtcyA9IHRoaXMucGFyYW1zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdpZ3lhLmFjY291bnRzLnNob3dUZmFVSSh0aGlzLnBhcmFtcywgdGhpcy53aWRnZXRQYXJhbXMsIHtcclxuICAgICAgICAgICAgICAgIGRvbnRIYW5kbGVTY3JlZW5TZXQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcmVnVG9rZW46IHRoaXMuX3NjcmVlblNldC5kYXRhLnJlZ1Rva2VuLFxyXG4gICAgICAgICAgICAgICAgbGFuZzogdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5sYW5nLFxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVySUQ6IHRoaXMudGZhQ29udGFpbmVySWQsXHJcbiAgICAgICAgICAgICAgICBjc3NQcmVmaXg6ICdkaXYuZ2lneWEtdGZhJyxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAnYXV0bycsIC8vLyBUT0RPOiB0ZmEgaXMgdGFraW5nIGRlZmF1bHQgd2lkdGggZnJvbSBhcGlMaXN0Li4gdGhpcyBpcyB0byBkaXNhYmxlIGl0LCBidXQgdGhpcyBzaG91bGQgYmUgY29uZGl0aW9uZWQuXHJcbiAgICAgICAgICAgICAgICBzb3VyY2U6IHRoaXMuX3NjcmVlblNldC5pbmplY3Rpb25JbmZvLm1ldGhvZE5hbWUsXHJcbiAgICAgICAgICAgICAgICBvbkRvbmU6IGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlbi5kaW1TY3JlZW4oKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQub25TY3JlZW5SZXNwb25zZShlLnJlc3BvbnNlLCB0aGlzKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbkxvYWQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JlZW4udW5kaW1TY3JlZW4oKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbkFmdGVyU2NyZWVuTG9hZDogZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUgJiYgZS5jYXB0aW9uICYmIGUuY2FwdGlvbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2NyZWVuLm92ZXJyaWRlVGVtcGxhdGVDYXB0aW9uKGUuY2FwdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5zZXRDYXB0aW9uKGUuY2FwdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5jZW50ZXJNb2RhbCgpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGlnbm9yZUFwaVF1ZXVlOiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zWydpZ25vcmVBcGlRdWV1ZSddLCAvLyBib290c3RyYXAgbWF5IG5vdCBoYXZlIGZpbmlzaGVkXHJcbiAgICAgICAgICAgICAgICBjdXN0b21MYW5nOiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmN1c3RvbUxhbmcsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkgdGhpcy5pbnN0YW5jZUVsZW1lbnQuaW5uZXJIVE1MID0gJyc7IC8vIFRvIG1ha2Ugc3VyZSBubyBJRCBjb25mbGljdHMgd2lsbCBiZSBnZW5lcmF0ZWRcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2luc3RhbmNlKSB0aGlzLl9pbnN0YW5jZS5kaXNwb3NlKCk7XHJcblxyXG4gICAgICAgIHN1cGVyLnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCByZW5kZXJXaWRnZXQoKTogdm9pZCB7XHJcbiAgICAgICAgLy9yZS1yZW5kZXIgdGhlIHBsdWdpbiB3aXRoIHRoZSBuZXcgbmV3IGNvbmRpdGlvbmFsIHZhbHVlcy5cclxuICAgICAgICBnaWd5YS5hY2NvdW50cy5zaG93VGZhVUkodGhpcy53aWRnZXRQYXJhbXMsIHtcclxuICAgICAgICAgICAgZG9udEhhbmRsZVNjcmVlblNldDogZmFsc2UsXHJcbiAgICAgICAgICAgIHJlZ1Rva2VuOiB0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbixcclxuICAgICAgICAgICAgY29udGFpbmVySUQ6IHRoaXMudGZhQ29udGFpbmVySWQsXHJcbiAgICAgICAgICAgIGNzc1ByZWZpeDogJ2Rpdi5naWd5YS10ZmEnLFxyXG4gICAgICAgICAgICB3aWR0aDogJ2F1dG8nLCAvLy8gVE9ETzogdGZhIGlzIHRha2luZyBkZWZhdWx0IHdpZHRoIGZyb20gYXBpTGlzdC4uIHRoaXMgaXMgdG8gZGlzYWJsZSBpdCwgYnV0IHRoaXMgc2hvdWxkIGJlIGNvbmRpdGlvbmVkLlxyXG4gICAgICAgICAgICBkZXZpY2VUeXBlOiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmRldmljZVR5cGUsXHJcbiAgICAgICAgICAgIHNvdXJjZTogdGhpcy5fc2NyZWVuU2V0LmluamVjdGlvbkluZm8ubWV0aG9kTmFtZSxcclxuICAgICAgICAgICAgb25Eb25lOiBlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlbi5kaW1TY3JlZW4oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5vblNjcmVlblJlc3BvbnNlKGUucmVzcG9uc2UsIHRoaXMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkxvYWQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlbi51bmRpbVNjcmVlbigpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkFmdGVyU2NyZWVuTG9hZDogZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZSAmJiBlLmNhcHRpb24gJiYgZS5jYXB0aW9uLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlbi5vdmVycmlkZVRlbXBsYXRlQ2FwdGlvbihlLmNhcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5zZXRDYXB0aW9uKGUuY2FwdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuY2VudGVyTW9kYWwoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0SW5zdGFuY2U6IGluc3RhbmNlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IGluc3RhbmNlcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaWdub3JlQXBpUXVldWU6IHRoaXMuX3NjcmVlblNldC5wYXJhbXNbJ2lnbm9yZUFwaVF1ZXVlJ10sIC8vIGJvb3RzdHJhcCBtYXkgbm90IGhhdmUgZmluaXNoZWRcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnJlbmRlcldpZGdldFVJID0gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuQmFzZVNjcmVlbldpZGdldC5hZGRXaWRnZXRUb0xpYnJhcnkoVGZhV2lkZ2V0KTtcclxuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xyXG5pbXBvcnQge0Jhc2VTY3JlZW5XaWRnZXR9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZVNjcmVlbldpZGdldCc7XHJcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcclxuXHJcbmV4cG9ydCBjb25zdCBUcmFuc2xhdGVkX0NPTlNUUyA9IHtcclxuICAgIHNlbGVjdG9yOiAnKltkYXRhLXRyYW5zbGF0aW9uLWtleV0nLFxyXG4gICAgdHJhbnNsYXRpb25LZXlBdHRyaWJ1dGU6ICdkYXRhLXRyYW5zbGF0aW9uLWtleScsXHJcbn07XHJcbkRlZXBGcmVlemUoVHJhbnNsYXRlZF9DT05TVFMpO1xyXG5leHBvcnQgY2xhc3MgVHJhbnNsYXRlZFdpZGdldCBleHRlbmRzIEJhc2VTY3JlZW5XaWRnZXQ8SFRNTERpdkVsZW1lbnQ+IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gVHJhbnNsYXRlZF9DT05TVFM7XHJcbiAgICBwcm90ZWN0ZWQgcmVuZGVyZWRUcmFuc2xhdGlvbktleTogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9zY3JlZW46IFNjcmVlbiwgZWw6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgLy8gVHVybiByZXNldENTUyBvZmYuXHJcbiAgICAgICAgc3VwZXIoX3NjcmVlbiwgZWwsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVHJhbnNsYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xyXG4gICAgICAgIHN1cGVyLnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIGNhc2Ugd2hlcmUgdHJhbnNsYXRpb24ga2V5IGlzIHVwZGF0ZWQgdmlhIGNvbmRpdGlvbmFsIGF0dHIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpIHtcclxuICAgICAgICBzdXBlci5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xyXG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkVHJhbnNsYXRpb25LZXkgIT09IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShUcmFuc2xhdGVkV2lkZ2V0LkNPTlNUUy50cmFuc2xhdGlvbktleUF0dHJpYnV0ZSkudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRyYW5zbGF0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTm9ybWFsaXplIHRyYW5zbGF0aW9uIGtleSBsb3dlcmNhc2UuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBnZXRUcmFuc2xhdGlvbktleSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoVHJhbnNsYXRlZFdpZGdldC5DT05TVFMudHJhbnNsYXRpb25LZXlBdHRyaWJ1dGUpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdHJhbnNsYXRlZCB0ZXh0LlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgdXBkYXRlVHJhbnNsYXRpb24oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlZFRyYW5zbGF0aW9uS2V5ID0gdGhpcy5nZXRUcmFuc2xhdGlvbktleSgpO1xyXG4gICAgICAgIGlmICh0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmN1c3RvbUxhbmcgJiYgdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5jdXN0b21MYW5nW3RoaXMucmVuZGVyZWRUcmFuc2xhdGlvbktleV0pIHtcclxuICAgICAgICAgICAgLy8gVW5saW5rIGFueSB3aWRnZXRzIGJlZm9yZSBIVE1MIGlzIGNsZWFyZWQuXHJcbiAgICAgICAgICAgIHRoaXMudW5saW5rV2lkZ2V0cygpO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVwbGFjZSBpbm5lciBIVE1MLlxyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmN1c3RvbUxhbmdbdGhpcy5yZW5kZXJlZFRyYW5zbGF0aW9uS2V5XTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubGlua1dpZGdldHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuQmFzZVNjcmVlbldpZGdldC5hZGRXaWRnZXRUb0xpYnJhcnkoVHJhbnNsYXRlZFdpZGdldCk7XHJcbiIsImltcG9ydCAqIGFzIEJhc2VGb3JtIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xyXG5pbXBvcnQgKiBhcyBCYXNlRm9ybVdpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtV2lkZ2V0JztcclxuaW1wb3J0ICogYXMgQmFzZVNjcmVlbldpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VTY3JlZW5XaWRnZXQnO1xyXG5pbXBvcnQgKiBhcyBCYXNlU2VydmVyV2lkZ2V0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZVNlcnZlcldpZGdldCc7XHJcbmltcG9ydCAqIGFzIEJhc2VVcGxvYWRXaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlVXBsb2FkV2lkZ2V0JztcclxuaW1wb3J0ICogYXMgQmFzZVdpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VXaWRnZXQnO1xyXG5pbXBvcnQgKiBhcyBDb25zZW50IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQ29uc2VudCc7XHJcbmltcG9ydCAqIGFzIERlYnVnIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRGVidWcnO1xyXG5pbXBvcnQgKiBhcyBFcnJvckRpc3BsYXlFbGVtZW50IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRXJyb3JEaXNwbGF5RWxlbWVudCc7XHJcbmltcG9ydCAqIGFzIEVycm9ycyBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Vycm9ycyc7XHJcbmltcG9ydCAqIGFzIExvZ2luTW9kZXMgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Mb2dpbk1vZGVzJztcclxuaW1wb3J0ICogYXMgU2NyZWVuIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcclxuaW1wb3J0ICogYXMgU2NyZWVuQ29uc3RzIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuQ29uc3RzJztcclxuaW1wb3J0ICogYXMgU2NyZWVuT3B0aW9ucyBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbk9wdGlvbnMnO1xyXG5pbXBvcnQgKiBhcyBTY3JlZW5TZXREYXRhIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0RGF0YSc7XHJcbmltcG9ydCAqIGFzIFNjcmVlblNldFBsdWdpbiBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlblNldFBsdWdpbic7XHJcbmltcG9ydCAqIGFzIFNjcmVlblNldEh0bWxSZXNvdXJjZXMgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5TZXRSZXNvdXJjZXMnO1xyXG5pbXBvcnQgKiBhcyBUZW1wbGF0ZUVsZW1lbnQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9UZW1wbGF0ZUVsZW1lbnQnO1xyXG5pbXBvcnQgKiBhcyBUZW1wbGF0ZXMgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9UZW1wbGF0ZXMnO1xyXG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcclxuaW1wb3J0ICogYXMgTGlua0FjY291bnRzRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL0xpbmtBY2NvdW50c0Zvcm0nO1xyXG5pbXBvcnQgKiBhcyBMb2dpbkZvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9Mb2dpbkZvcm0nO1xyXG5pbXBvcnQgKiBhcyBQYXNzd29yZGxlc3NMb2dpbkZvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9QYXNzd29yZGxlc3NMb2dpbkZvcm0nO1xyXG5pbXBvcnQgKiBhcyBBdXRoTWV0aG9kc0Zvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9BdXRoTWV0aG9kc0Zvcm0nO1xyXG5pbXBvcnQgKiBhcyBQYXNzd29yZEF1dGhNZXRob2RGb3JtIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvUGFzc3dvcmRBdXRoTWV0aG9kRm9ybSc7XHJcbmltcG9ydCAqIGFzIFB1c2hBdXRoTWV0aG9kRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1B1c2hBdXRoTWV0aG9kRm9ybSc7XHJcbmltcG9ydCAqIGFzIE5ld3NsZXR0ZXJTaWdudXBGb3JtIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvTmV3c2xldHRlclNpZ251cEZvcm0nO1xyXG5pbXBvcnQgKiBhcyBQcm9maWxlRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1Byb2ZpbGVGb3JtJztcclxuaW1wb3J0ICogYXMgUmVBdXRoZW50aWNhdGlvbkZvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9SZWF1dGhlbnRpY2F0aW9uRm9ybSc7XHJcbmltcG9ydCAqIGFzIFJlZ2lzdGVyRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1JlZ2lzdGVyRm9ybSc7XHJcbmltcG9ydCAqIGFzIFJlc2VuZFZlcmlmaWNhdGlvbkNvZGVGb3JtIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvUmVzZW5kVmVyaWZpY2F0aW9uQ29kZUZvcm0nO1xyXG5pbXBvcnQgKiBhcyBSZXNldFBhc3N3b3JkRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1Jlc2V0UGFzc3dvcmRGb3JtJztcclxuaW1wb3J0ICogYXMgT3JnUmVnaXN0ZXJGb3JtIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvT3JnYW5pemF0aW9uUmVnaXN0cmF0aW9uRm9ybSc7XHJcbmltcG9ydCAqIGFzIEJ1dHRvbklucHV0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0J1dHRvbklucHV0JztcclxuaW1wb3J0ICogYXMgQ2hlY2tib3hJbnB1dCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9DaGVja2JveElucHV0JztcclxuaW1wb3J0ICogYXMgRW1haWxJbnB1dCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9FbWFpbElucHV0JztcclxuaW1wb3J0ICogYXMgRm9ybUlucHV0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0Zvcm1JbnB1dCc7XHJcbmltcG9ydCAqIGFzIExvZ2luSWRJbnB1dCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Mb2dpbklkSW5wdXQnO1xyXG5pbXBvcnQgKiBhcyBQYXNzd29yZElucHV0cyBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9QYXNzd29yZElucHV0cyc7XHJcbmltcG9ydCAqIGFzIFBob25lTnVtYmVySW5wdXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvUGhvbmVOdW1iZXJJbnB1dCc7XHJcbmltcG9ydCAqIGFzIFJhZGlvSW5wdXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvUmFkaW9JbnB1dCc7XHJcbmltcG9ydCAqIGFzIFJlbWVtYmVySW5wdXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvUmVtZW1lYmVySW5wdXQnO1xyXG5pbXBvcnQgKiBhcyBSZXR5cGVQYXNzd29yZElucHV0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL1JldHlwZVBhc3N3b3JkSW5wdXQnO1xyXG5pbXBvcnQgKiBhcyBBcnJheU1hbmFnZXJXaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0FycmF5TWFuYWdlcldpZGdldCc7XHJcbmltcG9ydCAqIGFzIEJpbmRpbmdXaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0JpbmRpbmdXaWRnZXQnO1xyXG5pbXBvcnQgKiBhcyBDYXB0Y2hhV2lkZ2V0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9DYXB0Y2hhV2lkZ2V0JztcclxuaW1wb3J0ICogYXMgQ29uc2VudFdpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvQ29uc2VudFdpZGdldCc7XHJcbmltcG9ydCAqIGFzIENvbnRhaW5lcldpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvQ29udGFpbmVyV2lkZ2V0JztcclxuaW1wb3J0ICogYXMgSW1hZ2VXaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0ltYWdlV2lkZ2V0JztcclxuaW1wb3J0ICogYXMgTG9nSW5BdmFpbGFiaWxpdHlXaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0xvZ0luQXZhaWxhYmlsaXR5V2lkZ2V0JztcclxuaW1wb3J0ICogYXMgTXlQaG90b1dpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvTXlQaG90b1dpZGdldCc7XHJcbmltcG9ydCAqIGFzIFBhc3N3b3JkU3RyZW5ndGhXaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1Bhc3N3b3JkU3RyZW5ndGhXaWRnZXQnO1xyXG5pbXBvcnQgKiBhcyBQaG90b1VwbG9hZFdpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvUGhvdG9VcGxvYWRXaWRnZXQnO1xyXG5pbXBvcnQgKiBhcyBQcm9maWxlUGhvdG9XaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1Byb2ZpbGVQaG90b1dpZGdldCc7XHJcbmltcG9ydCAqIGFzIFJlcXVpcmVkRGlzcGxheVdpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvUmVxdWlyZWREaXNwbGF5V2lkZ2V0JztcclxuaW1wb3J0ICogYXMgU2VjcmV0UXVlc3Rpb25XaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1NlY3JldFF1ZXN0aW9uV2lkZ2V0JztcclxuaW1wb3J0ICogYXMgU29jaWFsTG9naW5XaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1NvY2lhbExvZ2luV2lkZ2V0JztcclxuaW1wb3J0ICogYXMgU3Vic2NyaXB0aW9uV2lkZ2V0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9TdWJzY3JpcHRpb25XaWRnZXQnO1xyXG5pbXBvcnQgKiBhcyBUZmFXaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1RmYVdpZGdldCc7XHJcbmltcG9ydCAqIGFzIFRyYW5zbGF0ZWRXaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1RyYW5zbGF0ZWRXaWRnZXQnO1xyXG5pbXBvcnQgKiBhcyBTd2l0Y2hTY3JlZW5XaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Td2l0Y2hTY3JlZW5XaWRnZXQnO1xyXG5pbXBvcnQgKiBhcyBCYXNlQ2FwdGNoYUhhbmRsZXIgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9IYW5kbGVycy9DYXB0Y2hhSGFuZGxlci9CYXNlQ2FwdGNoYUhhbmRsZXInO1xyXG5pbXBvcnQgKiBhcyBGdW5DYXB0Y2hhSGFuZGxlciBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0hhbmRsZXJzL0NhcHRjaGFIYW5kbGVyL0Z1bkNhcHRjaGFIYW5kbGVyJztcclxuaW1wb3J0ICogYXMgR29vZ2xlQ2FwdGNoYUhhbmRsZXIgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9IYW5kbGVycy9DYXB0Y2hhSGFuZGxlci9Hb29nbGVDYXB0Y2hhSGFuZGxlcic7XHJcbmltcG9ydCAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9PdHBTZW5kQ29kZUZvcm0nO1xyXG5pbXBvcnQgJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvT3RwVXBkYXRlRm9ybSc7XHJcbmltcG9ydCAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9PdHBMb2dpbkZvcm0nO1xyXG5pbXBvcnQgJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9BcGlMaW5rV2lkZ2V0JztcclxuaW1wb3J0ICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0NhcHRjaGEnO1xyXG5pbXBvcnQgJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSGFuZGxlcnMnO1xyXG5cclxuZGVjbGFyZSBjb25zdCBnaWd5YTogYW55O1xyXG5pZiAoIWdpZ3lhLl8pIHtcclxuICAgIGdpZ3lhLl8gPSB7fTtcclxufVxyXG5pZiAoIWdpZ3lhLl8ucGx1Z2lucykge1xyXG4gICAgZ2lneWEuXy5wbHVnaW5zID0ge307XHJcbn1cclxuaWYgKCFnaWd5YS5fLnBsdWdpbnMuU2NyZWVuU2V0KSB7XHJcbiAgICBnaWd5YS5fLnBsdWdpbnMuU2NyZWVuU2V0ID0ge307XHJcbn1cclxuaWYgKCFnaWd5YS5fLnBsdWdpbnMuU2NyZWVuU2V0LmNvbnNlbnQpIHtcclxuICAgIGdpZ3lhLl8ucGx1Z2lucy5TY3JlZW5TZXQuY29uc2VudCA9IHt9O1xyXG59XHJcbmlmICghZ2lneWEuXy5wbHVnaW5zLnJlc291cmNlcykge1xyXG4gICAgZ2lneWEuXy5wbHVnaW5zLnJlc291cmNlcyA9IHt9O1xyXG59XHJcbmlmICghZ2lneWEuXy5wbHVnaW5zLnJlc291cmNlcy5odG1sKSB7XHJcbiAgICBnaWd5YS5fLnBsdWdpbnMucmVzb3VyY2VzLmh0bWwgPSB7fTtcclxufVxyXG5pZiAoIWdpZ3lhLl8ucGx1Z2lucy5yZXNvdXJjZXMuaHRtbC5zY3JlZW5TZXQpIHtcclxuICAgIGdpZ3lhLl8ucGx1Z2lucy5yZXNvdXJjZXMuaHRtbC5zY3JlZW5TZXQgPSB7fTtcclxufVxyXG5cclxuT2JqZWN0LmFzc2lnbihcclxuICAgIGdpZ3lhLl8ucGx1Z2lucy5TY3JlZW5TZXQsXHJcbiAgICBTd2l0Y2hTY3JlZW5XaWRnZXQsXHJcbiAgICBCYXNlRm9ybSxcclxuICAgIEJhc2VGb3JtV2lkZ2V0LFxyXG4gICAgQmFzZVNjcmVlbldpZGdldCxcclxuICAgIEJhc2VTZXJ2ZXJXaWRnZXQsXHJcbiAgICBCYXNlVXBsb2FkV2lkZ2V0LFxyXG4gICAgQmFzZVdpZGdldCxcclxuICAgIERlYnVnLFxyXG4gICAgRXJyb3JEaXNwbGF5RWxlbWVudCxcclxuICAgIEVycm9ycyxcclxuICAgIExvZ2luTW9kZXMsXHJcbiAgICBTY3JlZW4sXHJcbiAgICBTY3JlZW5Db25zdHMsXHJcbiAgICBTY3JlZW5PcHRpb25zLFxyXG4gICAgU2NyZWVuU2V0RGF0YSxcclxuICAgIFNjcmVlblNldFBsdWdpbixcclxuICAgIFRlbXBsYXRlRWxlbWVudCxcclxuICAgIFRlbXBsYXRlcyxcclxuICAgIHV0aWxzLFxyXG4gICAgTGlua0FjY291bnRzRm9ybSxcclxuICAgIExvZ2luRm9ybSxcclxuICAgIFBhc3N3b3JkbGVzc0xvZ2luRm9ybSxcclxuICAgIEF1dGhNZXRob2RzRm9ybSxcclxuICAgIFBhc3N3b3JkQXV0aE1ldGhvZEZvcm0sXHJcbiAgICBQdXNoQXV0aE1ldGhvZEZvcm0sXHJcbiAgICBOZXdzbGV0dGVyU2lnbnVwRm9ybSxcclxuICAgIFByb2ZpbGVGb3JtLFxyXG4gICAgUmVBdXRoZW50aWNhdGlvbkZvcm0sXHJcbiAgICBSZWdpc3RlckZvcm0sXHJcbiAgICBSZXNlbmRWZXJpZmljYXRpb25Db2RlRm9ybSxcclxuICAgIFJlc2V0UGFzc3dvcmRGb3JtLFxyXG4gICAgT3JnUmVnaXN0ZXJGb3JtLFxyXG4gICAgQnV0dG9uSW5wdXQsXHJcbiAgICBDaGVja2JveElucHV0LFxyXG4gICAgRW1haWxJbnB1dCxcclxuICAgIEZvcm1JbnB1dCxcclxuICAgIExvZ2luSWRJbnB1dCxcclxuICAgIFBhc3N3b3JkSW5wdXRzLFxyXG4gICAgUGhvbmVOdW1iZXJJbnB1dCxcclxuICAgIFJhZGlvSW5wdXQsXHJcbiAgICBSZW1lbWJlcklucHV0LFxyXG4gICAgUmV0eXBlUGFzc3dvcmRJbnB1dCxcclxuICAgIEFycmF5TWFuYWdlcldpZGdldCxcclxuICAgIEJpbmRpbmdXaWRnZXQsXHJcbiAgICBDYXB0Y2hhV2lkZ2V0LFxyXG4gICAgQ29uc2VudFdpZGdldCxcclxuICAgIENvbnRhaW5lcldpZGdldCxcclxuICAgIEltYWdlV2lkZ2V0LFxyXG4gICAgTG9nSW5BdmFpbGFiaWxpdHlXaWRnZXQsXHJcbiAgICBNeVBob3RvV2lkZ2V0LFxyXG4gICAgUGFzc3dvcmRTdHJlbmd0aFdpZGdldCxcclxuICAgIFBob3RvVXBsb2FkV2lkZ2V0LFxyXG4gICAgUHJvZmlsZVBob3RvV2lkZ2V0LFxyXG4gICAgUmVxdWlyZWREaXNwbGF5V2lkZ2V0LFxyXG4gICAgU2VjcmV0UXVlc3Rpb25XaWRnZXQsXHJcbiAgICBTb2NpYWxMb2dpbldpZGdldCxcclxuICAgIFN1YnNjcmlwdGlvbldpZGdldCxcclxuICAgIFRmYVdpZGdldCxcclxuICAgIFRyYW5zbGF0ZWRXaWRnZXQsXHJcbiAgICBCYXNlQ2FwdGNoYUhhbmRsZXIsXHJcbiAgICBGdW5DYXB0Y2hhSGFuZGxlcixcclxuICAgIEdvb2dsZUNhcHRjaGFIYW5kbGVyLFxyXG4pO1xyXG5PYmplY3QuYXNzaWduKGdpZ3lhLl8ucGx1Z2lucy5TY3JlZW5TZXQuY29uc2VudCwgQ29uc2VudCk7XHJcbk9iamVjdC5hc3NpZ24oZ2lneWEuXy5wbHVnaW5zLnJlc291cmNlcy5odG1sLnNjcmVlblNldCwgU2NyZWVuU2V0SHRtbFJlc291cmNlcyk7XHJcbiIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2ICBjbGFzcz1cXFwiY29uc2VudFxcXCI+XFxyXFxuXFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImdpZ3lhLWNvbnNlbnQtdGl0bGVcXFwiPiR7bGFiZWx9PC9kaXY+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImdpZ3lhLWNvbnNlbnQtc3VidGl0bGVcXFwiID4ke2RvY0lkfTwvZGl2PlxcclxcbiAgICA8c3BhbiBjbGFzcz1cXFwiZ2lneWEtY29uc2VudC10ZXh0XFxcIj4ke2FwcHJvdmVkT25MYWJlbH08L3NwYW4+IDxzcGFuIGNsYXNzPVxcXCJnaWd5YS1jb25zZW50LXRleHRcXFwiPiR7YXBwcm92ZWR9PC9zcGFuPlxcclxcblxcclxcbjwvZGl2PlwiOyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJnaWd5YS1wYXNzd29yZC1zdHJlbmd0aFxcXCIgZGF0YS1vbi1mb2N1cy1idWJibGU9XFxcInRydWVcXFwiIGRhdGEtYnViYmxlLW9yaWVudGF0aW9uPVxcXCIke29yaWVudGF0aW9ufVxcXCI+PC9kaXY+XFxyXFxuXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcIiR7c2NvcmVDbGFzc31cXFwiIGFyaWEtYXRvbWljPVxcXCJ0cnVlXFxcIiBhcmlhLWxpdmU9XFxcInBvbGl0ZVxcXCI+JHtjb250ZW50fTwvZGl2PlxcclxcblwiOyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJnaWd5YS1wYXNzd29yZFN0cmVuZ3RoLXRleHQtcmVxdWlyZW1lbnRzXFxcIj4kcmVxdWlyZW1lbnRzPC9kaXY+XFxyXFxuXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcImdpZ3lhLXBhc3N3b3JkU3RyZW5ndGgtdGV4dFxcXCI+XFxyXFxuICAgIDxzcGFuIGNsYXNzPVxcXCJnaWd5YS1wYXNzd29yZFN0cmVuZ3RoLXRleHRcXFwiPiRURVhUKCdwYXNzd29yZF9zdHJlbmd0aF9jb2xvbicpPC9zcGFuPlxcclxcbiAgICA8c3BhbiBjbGFzcz1cXFwiZ2lneWEtcGFzc3dvcmRTdHJlbmd0aC10ZXh0IGdpZ3lhLXBhc3N3b3JkU3RyZW5ndGgtc2NvcmVUZXh0XFxcIj4ke3Njb3JlVGV4dH08L3NwYW4+XFxyXFxuPC9kaXY+XFxyXFxuPGRpdiBjbGFzcz1cXFwiZ2lneWEtcGFzc3dvcmRTdHJlbmd0aC1iYXJcXFwiPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCIke2JhckluZGljYXRvckNsYXNzfVxcXCI+PC9kaXY+XFxyXFxuPC9kaXY+XFxyXFxuXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBcIjxmb3JtIGVuY3R5cGU9XFxcIm11bHRpcGFydC9mb3JtLWRhdGFcXFwiIG1ldGhvZD1cXFwicG9zdFxcXCIgY2xhc3M9XFxcImdpZ3lhLXBob3RvLXVwbG9hZC1mb3JtXFxcIiB0YXJnZXQ9XFxcIiR7Zm9ybVRhcmdldH1cXFwiIGFjdGlvbj1cXFwiXFxcIj5cXHJcXG4gICAgPGlucHV0IHR5cGU9XFxcImZpbGVcXFwiIGFjY2VwdD1cXFwiaW1hZ2UvKlxcXCIgbmFtZT1cXFwiX3Byb2ZpbGVQaG90b1xcXCIgLz5cXHJcXG48L2Zvcm0+XFxyXFxuXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcImdpZ3lhLXBob3RvLXVwbG9hZC1pbWFnZVxcXCIgaWQ9XFxcIiR7cGhvdG9FbGVtZW50SUR9XFxcIj48L2Rpdj5cXHJcXG48ZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJnaWd5YS1waG90by11cGxvYWQtYnV0dG9uXFxcIj4kY2hvb3NlX2ZpbGU8L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiZ2lneWEtcGhvdG8tdXBsb2FkLXBhdGhcXFwiIGlkPVxcXCIke3BhdGhDb250YWluZXJJRH1cXFwiPiRub19maWxlX2Nob3NlbjwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJnaWd5YS1waG90by11cGxvYWQtdGV4dFxcXCI+JHRpcDwvZGl2PlxcclxcbjwvZGl2PlxcclxcblwiOyIsIm1vZHVsZS5leHBvcnRzID0gXCI8aDEgY2xhc3M9XFxcImdpZ3lhLXNjcmVlbi1jYXB0aW9uXFxcIiBpZD1cXFwiJHtpbm5lckNvbnRhaW5lcklEfV9jYXB0aW9uXFxcIj48L2gxPlxcclxcbjxkaXYgaWQ9XFxcIiR7Y2hpbGRDb250YWluZXJJRH1cXFwiIGNsYXNzPVxcXCJnaWd5YS1oaWRkZW5cXFwiPjwvZGl2PlxcclxcbjxkaXYgaWQ9XFxcIiR7aW5uZXJDb250YWluZXJJRH1cXFwiIGNsYXNzPVxcXCJnaWd5YS1zY3JlZW4tY29udGVudFxcXCI+PC9kaXY+XFxyXFxuXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgaWQ9XFxcIiR7aW5uZXJDb250YWluZXJJRH1cXFwiIGNsYXNzPVxcXCJnaWd5YS1zY3JlZW4tY29udGVudFxcXCI+PC9kaXY+XCI7IiwiaW1wb3J0IHsgSUNvbmRpdGlvbmFsQXR0cmlidXRlIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9UZW1wbGF0ZUVsZW1lbnQnO1xyXG5pbXBvcnQgeyBTY3JlZW5fQ09OU1RTIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5Db25zdHMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzSGlkZGVuKGVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgd2hpbGUgKGVsICYmIGVsLnBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIGVsLnN0eWxlLnZpc2liaWxpdHkgPT09ICdoaWRkZW4nIHx8IC8vIGhpZGRlbiBlbGVtZW50XHJcbiAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyB8fCAvLyBoaWRkZW4gZWxlbWVudFxyXG4gICAgICAgICAgICAoZ2lneWEudXRpbHMuRE9NLmlzRWxlbWVudENsYXNzKGVsLCAnZ2lneWEtZXJyb3ItZGlzcGxheScpICYmICFnaWd5YS51dGlscy5ET00uaXNFbGVtZW50Q2xhc3MoZWwsICdnaWd5YS1lcnJvci1kaXNwbGF5LWFjdGl2ZScpKSB8fCAvLyBoaWRkZW4gZXJyb3IgbWVzc2FnZVxyXG4gICAgICAgICAgICBnaWd5YS51dGlscy5ET00uaXNFbGVtZW50Q2xhc3MoZWwsICduZy1oaWRlJylcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgLy8gYW5ndWxhciBoaWRkZW4gZWxlbWVudFxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gaW5JRnJhbWUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cuc2VsZiAhPT0gd2luZG93LnRvcDtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZnVuY3Rpb24gaXNGaWVsZEluSGlkZGVuQ29udGFpbmVyKGVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgdmFyIGN1cnIgPSBlbDtcclxuXHJcbiAgICB3aGlsZSAoY3Vycikge1xyXG4gICAgICAgIGlmIChnaWd5YS51dGlscy5ET00uaXNFbGVtZW50Q2xhc3MoY3VyciwgJ2dpZ3lhLWNvbnRhaW5lcicpICYmICFnaWd5YS51dGlscy5ET00uaXNFbGVtZW50Q2xhc3MoY3VyciwgJ2dpZ3lhLWNvbnRhaW5lci1lbmFibGVkJykpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICBjdXJyID0gY3Vyci5wYXJlbnRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5pbnRlcmZhY2UgSURpbW1lZEhUTUxFbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgZWxEaW06IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgZWxQcm9ncmVzczogSFRNTERpdkVsZW1lbnQ7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGZpcnN0UGFydChzdHI6IHN0cmluZywgc2VwZXJhdG9yOiBzdHJpbmcpIHtcclxuICAgIHZhciBpbmRleCA9IHN0ci5pbmRleE9mKHNlcGVyYXRvcik7XHJcblxyXG4gICAgcmV0dXJuIGluZGV4ID4gLTEgPyBzdHIuc3Vic3RyaW5nKDAsIGluZGV4KSA6IHN0cjtcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIElOdW1lcmljTWFwPFQ+IHtcclxuICAgIFtrZXk6IG51bWJlcl06IFQ7XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBJTWFwPFQ+IHtcclxuICAgIFtrZXk6IHN0cmluZ106IFQ7XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBJRW51bWVyYWJsZTxUPiB7XHJcbiAgICBsZW5ndGg6IG51bWJlcjtcclxuICAgIFtpOiBudW1iZXJdOiBUO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBMYXN0SW5kZXhPZjxUPihhcnI6IElFbnVtZXJhYmxlPFQ+LCB2YWw6IFQsIGZyb21JbmRleCA9IDApOiBudW1iZXIge1xyXG4gICAgZm9yICh2YXIgaSA9IGFyci5sZW5ndGg7IC0taSA+PSBmcm9tSW5kZXg7ICkge1xyXG4gICAgICAgIGlmIChhcnJbaV0gPT09IHZhbCkgcmV0dXJuIGk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIC0xO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBGb3JFYWNoPFQ+KGFycjogSUVudW1lcmFibGU8VD4sIGFjdGlvbjogKGVsZW1lbnQ6IFQsIGluZGV4PzogbnVtYmVyLCBhcnI/OiBJRW51bWVyYWJsZTxUPikgPT4gdm9pZCkge1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBhY3Rpb24oYXJyW2ldLCBpLCBhcnIpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBGb3JFYWNoUHJvcDxUPihvYmo6IElNYXA8VD4sIGFjdGlvbjogKHByb3A6IFQsIG5hbWU6IHN0cmluZywgb2JqOiBJTWFwPFQ+KSA9PiB2b2lkKTtcclxuZXhwb3J0IGZ1bmN0aW9uIEZvckVhY2hQcm9wPFQgZXh0ZW5kcyBPYmplY3Q+KG9iajogVCwgYWN0aW9uOiAocHJvcDogYW55LCBuYW1lOiBzdHJpbmcsIG9iajogVCkgPT4gdm9pZCk7XHJcbmV4cG9ydCBmdW5jdGlvbiBGb3JFYWNoUHJvcChvYmo6IE9iamVjdCwgYWN0aW9uOiAocHJvcDogYW55LCBuYW1lOiBzdHJpbmcsIG9iajogT2JqZWN0KSA9PiB2b2lkKSB7XHJcbiAgICBmb3IgKHZhciBuYW1lIGluIG9iaikge1xyXG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkobmFtZSkpIGFjdGlvbihvYmpbbmFtZV0sIG5hbWUsIG9iaik7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIFNvbWU8VD4oYXJyOiBJRW51bWVyYWJsZTxUPiwgY29uZGl0aW9uOiAoZWxlbWVudDogVCwgaW5kZXg/OiBudW1iZXIsIGFycj86IElFbnVtZXJhYmxlPFQ+KSA9PiBib29sZWFuKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGlmIChjb25kaXRpb24oYXJyW2ldLCBpLCBhcnIpKSByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIEV2ZXJ5PFQ+KGFycjogSUVudW1lcmFibGU8VD4sIGNvbmRpdGlvbjogKGVsZW1lbnQ6IFQsIGluZGV4PzogbnVtYmVyLCBhcnI/OiBJRW51bWVyYWJsZTxUPikgPT4gYm9vbGVhbikge1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBpZiAoIWNvbmRpdGlvbihhcnJbaV0sIGksIGFycikpIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gRXZlcnlQcm9wPFQ+KG9iajogSU1hcDxUPiwgY29uZGl0aW9uOiAocHJvcDogVCwgbmFtZTogc3RyaW5nLCBvYmo6IElNYXA8VD4pID0+IGJvb2xlYW4pO1xyXG5leHBvcnQgZnVuY3Rpb24gRXZlcnlQcm9wPFQ+KG9iajogVCwgY29uZGl0aW9uOiAocHJvcCwgbmFtZTogc3RyaW5nLCBvYmo6IFQpID0+IGJvb2xlYW4pO1xyXG5leHBvcnQgZnVuY3Rpb24gRXZlcnlQcm9wKG9iajogT2JqZWN0LCBjb25kaXRpb246IChwcm9wLCBuYW1lOiBzdHJpbmcsIG9iajogT2JqZWN0KSA9PiBib29sZWFuKSB7XHJcbiAgICBmb3IgKHZhciBuYW1lIGluIG9iaikge1xyXG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkobmFtZSkgJiYgIWNvbmRpdGlvbihvYmpbbmFtZV0sIG5hbWUsIG9iaikpIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gTWFwPFMsIFQ+KGFycjogSUVudW1lcmFibGU8Uz4sIGFjdGlvbjogKGVsZW1lbnQ6IFMsIGluZGV4PzogbnVtYmVyLCBhcnI/OiBJRW51bWVyYWJsZTxTPikgPT4gVCkge1xyXG4gICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheTxUPigpO1xyXG5cclxuICAgIEZvckVhY2goYXJyLCAoaXRlbSwgaWR4LCBhcnIpID0+IHJlc3VsdC5wdXNoKGFjdGlvbihpdGVtLCBpZHgsIGFycikpKTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBEZWVwRnJlZXplKG9iajogT2JqZWN0KSB7XHJcbiAgICAvLyBPbmx5IG9uY2UgSUU5IGlzIHRoZSBtaW5pbXVtIC0gY3VycmVudGx5IElFNyBpcyBzdXBwb3J0ZWRcclxuICAgIC8qXHJcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIE9iamVjdCAmJiAhT2JqZWN0LmlzRnJvemVuKG9ialtrZXldKSkge1xyXG4gICAgICAgICAgICBGb3JFYWNoUHJvcChvYmosIChwcm9wKSA9PiBEZWVwRnJlZXplKHByb3ApKTtcclxuXHJcbiAgICAgICAgICAgIE9iamVjdC5mcmVlemUob2JqKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgKi9cclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudHNCeUhhdmluZ0F0dHJpYnV0ZShwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudCwgdGFnTmFtZTogc3RyaW5nLCBhdHRyaWJ1dGVOYW1lOiBzdHJpbmcpIHtcclxuICAgIHZhciBhckVscyA9IG5ldyBBcnJheTxIVE1MRWxlbWVudD4oKTtcclxuICAgIHZhciBlbHM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+ID0gcGFyZW50RWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWdOYW1lKSBhcyBhbnk7XHJcblxyXG4gICAgRm9yRWFjaChlbHMsIGVsID0+IHtcclxuICAgICAgICBpZiAoZWwuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpKSB7XHJcbiAgICAgICAgICAgIGFyRWxzLnB1c2goZWwpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBhckVscztcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudHNCeUhhdmluZ0F0dHJpYnV0ZVByZWZpeChcclxuICAgIHBhcmVudEVsZW1lbnQ6IEhUTUxFbGVtZW50LFxyXG4gICAgYXR0cmlidXRlUHJlZml4ZXM6IHN0cmluZyB8IEFycmF5PHN0cmluZz4sXHJcbiAgICB0YWdOYW1lc0V4Y2VwdGlvbnM6IEFycmF5PHN0cmluZz4gPSBbXSxcclxuKTogQXJyYXk8SFRNTEVsZW1lbnQ+IHtcclxuICAgIGlmICh0eXBlb2YgYXR0cmlidXRlUHJlZml4ZXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgYXR0cmlidXRlUHJlZml4ZXMgPSBbYXR0cmlidXRlUHJlZml4ZXNdO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZWxlbWVudHM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+ID0gcGFyZW50RWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnKicpIGFzIGFueTtcclxuICAgIGNvbnN0IG1hdGNoaW5nRWxlbWVudHMgPSBuZXcgQXJyYXk8SFRNTEVsZW1lbnQ+KCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBlbGVtZW50cy5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICBjb25zdCBlbCA9IGVsZW1lbnRzLml0ZW0oaSk7XHJcbiAgICAgICAgaWYgKGdpZ3lhLnV0aWxzLmFycmF5LmluZGV4T2YodGFnTmFtZXNFeGNlcHRpb25zLCBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpICE9PSAtMSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGVQcmVmaXggb2YgYXR0cmlidXRlUHJlZml4ZXMpIHtcclxuICAgICAgICAgICAgaWYgKGlzRWxlbWVudENvbnRhaW5BdHRyaWJ1dGVQcmVmaXgoZWxlbWVudHNbaV0sIGF0dHJpYnV0ZVByZWZpeCkpIHtcclxuICAgICAgICAgICAgICAgIG1hdGNoaW5nRWxlbWVudHMucHVzaChlbGVtZW50c1tpXSk7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBtYXRjaGluZ0VsZW1lbnRzO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBpc0VsZW1lbnRDb250YWluQXR0cmlidXRlUHJlZml4KGVsOiBIVE1MRWxlbWVudCwgc3ViU3RyaW5nOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIHZhciBlbGVtZW50QXR0cmlidXRlczogTmFtZWROb2RlTWFwID0gZWwuYXR0cmlidXRlcztcclxuICAgIHZhciBjb250YWluQ29uZGl0aW9uYWxBdHRyaWJ1dGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIGlmIChlbGVtZW50QXR0cmlidXRlcykge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudEF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnRBdHRyaWJ1dGVzW2ldLm5vZGVOYW1lLmluZGV4T2Yoc3ViU3RyaW5nKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5Db25kaXRpb25hbEF0dHJpYnV0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBjb250YWluQ29uZGl0aW9uYWxBdHRyaWJ1dGU7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbmRpdGlvbmFsQXR0cmlidXRlRXhwcmVzc2lvbnMoZWxlbWVudDogSFRNTEVsZW1lbnQsIGlzV2lkZ2V0Q29udGV4dDogYm9vbGVhbiA9IGZhbHNlKTogQXJyYXk8SUNvbmRpdGlvbmFsQXR0cmlidXRlPiB7XHJcbiAgICB2YXIgY29uZGl0aW9uYWxFeHByZXNzaW9ucyA9IG5ldyBBcnJheTxJQ29uZGl0aW9uYWxBdHRyaWJ1dGU+KCk7XHJcbiAgICB2YXIgY29uZGl0aW9uYWxEZWZhdWx0VmFsdWU6IHN0cmluZztcclxuICAgIGxldCBsYXN0QXR0cmlidXRlVmFsdWU6IHN0cmluZztcclxuICAgIHZhciBpc1BhcmFtVGFnOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICB2YXIgYXR0cmlidXRlcyA9IGdldEF0dHJpYnV0ZXNBc0FycmF5KGVsZW1lbnQpO1xyXG5cclxuICAgIEZvckVhY2goYXR0cmlidXRlcywgYXQgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBjb25kaXRpb25hbCBhdHRyaWJ1dGUgcHJlZml4IHdoaWNoIGRldGVybWluZXMgaWYgdGhpcyBhdHRyaWJ1dGUgYmUgZXZhbHVhdGVkLlxyXG4gICAgICAgICAgICBjb25zdCBpc0NvbmRpdGlvbmFsQXR0cmlidXRlID0gYXQubm9kZU5hbWUuaW5kZXhPZihTY3JlZW5fQ09OU1RTLmNvbmRpdGlvbmFsQXR0cmlidXRlUHJlZml4KSAhPT0gLTE7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzRXhwcmVzc2lvbkF0dHJpYnV0ZSA9IGF0Lm5vZGVOYW1lLmluZGV4T2YoU2NyZWVuX0NPTlNUUy5leHByZXNzaW9uQXR0cmlidXRlUHJlZml4KSAhPT0gLTE7XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNDb25kaXRpb25hbEF0dHJpYnV0ZSB8fCBpc0V4cHJlc3Npb25BdHRyaWJ1dGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9uSW5kZXggPSBhdC5ub2RlTmFtZS5pbmRleE9mKCc6Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29sb25JbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0QXR0cmlidXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1dpZGdldENvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uYWxEZWZhdWx0VmFsdWUgPSBnaWd5YS5fLnBsdWdpbnMudXRpbHMuRE9NLmdldEF0dHJpYnV0ZShlbGVtZW50LCAndmFsdWUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QXR0cmlidXRlID0gZ2lneWEuXy5wbHVnaW5zLnV0aWxzLkRPTS5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ25hbWUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNQYXJhbVRhZyA9IGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAncGFyYW0nO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEF0dHJpYnV0ZSA9IGF0Lm5vZGVOYW1lLnN1YnN0cmluZyhjb2xvbkluZGV4ICsgMSwgYXQubm9kZU5hbWUubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEF0dHJpYnV0ZVZhbHVlID0gZ2lneWEuXy5wbHVnaW5zLnV0aWxzLkRPTS5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgdGFyZ2V0QXR0cmlidXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdFZhbHVlQXR0cmlidXRlID0gJ2dpZ3lhLWRlZmF1bHQtJyArIHRhcmdldEF0dHJpYnV0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnaWd5YS5fLnBsdWdpbnMudXRpbHMuRE9NLmdldEF0dHJpYnV0ZShlbGVtZW50LCBkZWZhdWx0VmFsdWVBdHRyaWJ1dGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnaWd5YS5fLnBsdWdpbnMudXRpbHMuRE9NLnNldEF0dHJpYnV0ZShlbGVtZW50LCBkZWZhdWx0VmFsdWVBdHRyaWJ1dGUsIGxhc3RBdHRyaWJ1dGVWYWx1ZSAhPT0gbnVsbCA/IGxhc3RBdHRyaWJ1dGVWYWx1ZSA6ICdudWxsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gZ2lneWEuXy5wbHVnaW5zLnV0aWxzLkRPTS5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgZGVmYXVsdFZhbHVlQXR0cmlidXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uYWxEZWZhdWx0VmFsdWUgPSB2YWwgIT09ICdudWxsJyA/IHZhbCA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBDb25kaXRpb25hbHMgYXJlIGFsd2F5cyB0ZXJuYXJ5IHdpdGggc3BlY2lhbCBlc2NhcGluZyBhbmQgcGFyc2luZyBkb25lLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEluOiBleHByZXNzaW9uID8gdmFsdWUgOiBvdGhlclZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT3V0OiBleHByZXNzaW9uID8gJ3ZhbHVlJyA6ICdvdGhlclZhbHVlJ1xyXG4gICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRXhwcmVzc2lvbnMgYXJlIHBhcnNlZCBhcy1pcyBhbmQgdGhlIHJldHVybmVkIHZhbHVlIGlzIHNldC5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25kaXRpb25hbEV4cHJlc3Npb24gPSAhaXNFeHByZXNzaW9uQXR0cmlidXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0dXBDb25kaXRpb25hbEV4cHJlc3Npb25WYWx1ZShhdC5ub2RlVmFsdWUsIGNvbmRpdGlvbmFsRGVmYXVsdFZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGF0Lm5vZGVWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uYWw6IElDb25kaXRpb25hbEF0dHJpYnV0ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZTogdGFyZ2V0QXR0cmlidXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb246IGNvbmRpdGlvbmFsRXhwcmVzc2lvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBjb25kaXRpb25hbERlZmF1bHRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEF0dHJpYnV0ZVZhbHVlOiBsYXN0QXR0cmlidXRlVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzV2lkZ2V0UGFyYW1UYWc6IGlzUGFyYW1UYWcsXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBjb25kaXRpb25hbEV4cHJlc3Npb25zLnB1c2goY29uZGl0aW9uYWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbmRpdGlvbmFsIGZvcm1hdCBlcnJvcjogJyArIGUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGNvbmRpdGlvbmFsRXhwcmVzc2lvbnM7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwQ29uZGl0aW9uYWxFeHByZXNzaW9uVmFsdWUoY29uZGl0aW9uYWxWYWx1ZTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBleHByZXNzaW9uV2l0aEZhbHNlVmFsdWUgPSBzZXR1cENvbmRpdGlvbmFsRmFsc2VWYWx1ZShjb25kaXRpb25hbFZhbHVlLCBkZWZhdWx0VmFsdWUpO1xyXG4gICAgY29uc3QgZXhwcmVzc2lvbldpdGhFc2NhcGluZyA9IGVzY2FwZUNoYXJhY3RlcnNJbkNvbmRpdGlvbmFsVmFsdWUoZXhwcmVzc2lvbldpdGhGYWxzZVZhbHVlKTtcclxuICAgIGxldCBmaW5hbENvbmRpdGlvbmFsRXhwcmVzc2lvbiA9IHNldFVwTGFzdEZhbHNlVmFsdWUoZXhwcmVzc2lvbldpdGhFc2NhcGluZyk7XHJcbiAgICBpZiAoIWRlZmF1bHRWYWx1ZSkge1xyXG4gICAgICAgIC8vIGZpeCBkZWZhdWx0IHZhbHVlIHRvIGJlIGEgZmFsc3kgdmFsdWUgaW5zdGVhZCBvZiBhIHN0cmluZyBsaXRlcmFsXHJcbiAgICAgICAgY29uc3QgZGVmYXVsdFZhbHVlTG9jYXRpb24gPSBmaW5hbENvbmRpdGlvbmFsRXhwcmVzc2lvbi5sYXN0SW5kZXhPZihgOicke2RlZmF1bHRWYWx1ZX0nYCk7XHJcbiAgICAgICAgaWYgKGRlZmF1bHRWYWx1ZUxvY2F0aW9uID4gLTEpIHtcclxuICAgICAgICAgICAgZmluYWxDb25kaXRpb25hbEV4cHJlc3Npb24gPSBgJHtmaW5hbENvbmRpdGlvbmFsRXhwcmVzc2lvbi5zdWJzdHJpbmcoMCwgZGVmYXVsdFZhbHVlTG9jYXRpb24pfTpudWxsYDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmluYWxDb25kaXRpb25hbEV4cHJlc3Npb247XHJcbn1cclxuZnVuY3Rpb24gc2V0dXBDb25kaXRpb25hbEZhbHNlVmFsdWUoY29uZGl0aW9uYWxWYWx1ZTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgbGFzdCAnZmFsc2UnIHZhbHVlIGhhcyBhICc6JyBzaWduIGFuZCBpZiBpdCBkb2Vzbid0LCBhZGQgaXQgYW5kIGFzc2lnbiB0aGUgZGVmYXVsdCB2YWx1ZSwgaWYgdGhlcmUncyBvbmUuXHJcbiAgICB2YXIgaW5kZXhPZkxhc3RDb25kaXRpb25SZXN1bHRzID0gY29uZGl0aW9uYWxWYWx1ZS5sYXN0SW5kZXhPZignPycpO1xyXG4gICAgdmFyIHN1YlN0cmluZ09mTGFzdENvbmRpdGlvblJlc3VsdHMgPSBjb25kaXRpb25hbFZhbHVlLnN1YnN0cihpbmRleE9mTGFzdENvbmRpdGlvblJlc3VsdHMgKyAxLCBjb25kaXRpb25hbFZhbHVlLmxlbmd0aCk7XHJcblxyXG4gICAgdmFyIGluZGV4T2ZMYXN0Q29uZGl0aW9uUmVzdWx0c0RpdmlkZXIgPSBzdWJTdHJpbmdPZkxhc3RDb25kaXRpb25SZXN1bHRzLmluZGV4T2YoJzonKTtcclxuICAgIGlmIChpbmRleE9mTGFzdENvbmRpdGlvblJlc3VsdHNEaXZpZGVyID09PSAtMSkge1xyXG4gICAgICAgIGNvbmRpdGlvbmFsVmFsdWUgKz0gJzonO1xyXG4gICAgICAgIGlmIChkZWZhdWx0VmFsdWUpIHtcclxuICAgICAgICAgICAgY29uZGl0aW9uYWxWYWx1ZSArPSBkZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBjaGVjayBpZiB0aGVyZSdzIGEgJ2ZhbHNlJyB2YWx1ZSBvciBqdXN0IGFuIGVtcHR5IHN0cmluZ1xyXG4gICAgICAgIHZhciBlbXB0eUZhbHNlVmFsdWUgPSBzdWJTdHJpbmdPZkxhc3RDb25kaXRpb25SZXN1bHRzLnN1YnN0cihpbmRleE9mTGFzdENvbmRpdGlvblJlc3VsdHNEaXZpZGVyICsgMSwgc3ViU3RyaW5nT2ZMYXN0Q29uZGl0aW9uUmVzdWx0cy5sZW5ndGgpO1xyXG4gICAgICAgIGlmIChlbXB0eUZhbHNlVmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIGNvbmRpdGlvbmFsVmFsdWUgPSBjb25kaXRpb25hbFZhbHVlLnN1YnN0cigwLCBjb25kaXRpb25hbFZhbHVlLmxlbmd0aCkgKyBkZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvbmRpdGlvbmFsVmFsdWU7XHJcbn1cclxuZnVuY3Rpb24gZXNjYXBlQ2hhcmFjdGVyc0luQ29uZGl0aW9uYWxWYWx1ZShjb25kaXRpb25hbFZhbHVlKTogc3RyaW5nIHtcclxuICAgIC8vIEVzY2FwZSBhbnkgXCInXCIgc2lnbnMuXHJcbiAgICBjb25kaXRpb25hbFZhbHVlID0gY29uZGl0aW9uYWxWYWx1ZS5yZXBsYWNlKC9cXCcvZywgXCInXCIpO1xyXG4gICAgLy8gRW5jbG9zZSBhbGwgdGhlICd0cnVlJyB2YWx1ZXMgaW4gJydcclxuICAgIGNvbmRpdGlvbmFsVmFsdWUgPSBjb25kaXRpb25hbFZhbHVlLnJlcGxhY2UoL1xcPy9nLCBcIj8nXCIpO1xyXG4gICAgY29uZGl0aW9uYWxWYWx1ZSA9IGNvbmRpdGlvbmFsVmFsdWUucmVwbGFjZSgvOi9nLCBcIic6XCIpO1xyXG4gICAgcmV0dXJuIGNvbmRpdGlvbmFsVmFsdWU7XHJcbn1cclxuZnVuY3Rpb24gc2V0VXBMYXN0RmFsc2VWYWx1ZShjb25kaXRpb25hbFZhbHVlKTogc3RyaW5nIHtcclxuICAgIC8vIFNldCBhbiBhcGhvc3Ryb3BoZSBpbiB0aGUgbGFzdCAnZmFsc2UnIGlmIHRoZXJlIGlzbid0IG9uZVxyXG4gICAgLy8gRmlyc3Q6IHRyaW0gdGhlIGxhc3QgJ2ZhbHNlJyB2YWx1ZSBmb3IgdGhlIGFwaG9zdHJvcGhlIGluc2VydGlvblxyXG4gICAgdmFyIGluZGV4T2ZMYXN0Q29uZGl0aW9uUmVzdWx0cyA9IGNvbmRpdGlvbmFsVmFsdWUubGFzdEluZGV4T2YoJz8nKTtcclxuICAgIHZhciBzdWJTdHJpbmdPZkxhc3RDb25kaXRpb25SZXN1bHRzID0gY29uZGl0aW9uYWxWYWx1ZS5zdWJzdHIoaW5kZXhPZkxhc3RDb25kaXRpb25SZXN1bHRzICsgMSwgY29uZGl0aW9uYWxWYWx1ZS5sZW5ndGgpO1xyXG4gICAgdmFyIGZhbHNlUmVzdWx0U3RhcnRJbmRleCA9IHN1YlN0cmluZ09mTGFzdENvbmRpdGlvblJlc3VsdHMuaW5kZXhPZignOicpICsgMTtcclxuICAgIHZhciBsYXN0RmFsc2VSZXN1bHRWYWx1ZSA9IHN1YlN0cmluZ09mTGFzdENvbmRpdGlvblJlc3VsdHMuc3Vic3RyKGZhbHNlUmVzdWx0U3RhcnRJbmRleCwgc3ViU3RyaW5nT2ZMYXN0Q29uZGl0aW9uUmVzdWx0cy5sZW5ndGgpO1xyXG4gICAgbGFzdEZhbHNlUmVzdWx0VmFsdWUgPSBnaWd5YS51dGlscy5zdHJpbmdVdGlscy50cmltKGxhc3RGYWxzZVJlc3VsdFZhbHVlKTtcclxuICAgIGlmIChsYXN0RmFsc2VSZXN1bHRWYWx1ZVswXSAhPSBcIidcIikge1xyXG4gICAgICAgIGxhc3RGYWxzZVJlc3VsdFZhbHVlID0gXCInXCIgKyBsYXN0RmFsc2VSZXN1bHRWYWx1ZTtcclxuICAgIH1cclxuICAgIGlmIChsYXN0RmFsc2VSZXN1bHRWYWx1ZVtsYXN0RmFsc2VSZXN1bHRWYWx1ZS5sZW5ndGhdICE9IFwiJ1wiKSB7XHJcbiAgICAgICAgbGFzdEZhbHNlUmVzdWx0VmFsdWUgKz0gXCInXCI7XHJcbiAgICB9XHJcbiAgICB2YXIgbGFzdFRydWVSZXN1bHRWYWx1ZSA9IHN1YlN0cmluZ09mTGFzdENvbmRpdGlvblJlc3VsdHMuc3Vic3RyKDAsIGZhbHNlUmVzdWx0U3RhcnRJbmRleCAtIDEpO1xyXG4gICAgY29uZGl0aW9uYWxWYWx1ZSA9IGNvbmRpdGlvbmFsVmFsdWUuc3Vic3RyKDAsIGluZGV4T2ZMYXN0Q29uZGl0aW9uUmVzdWx0cyArIDEpICsgbGFzdFRydWVSZXN1bHRWYWx1ZSArICc6JyArIGxhc3RGYWxzZVJlc3VsdFZhbHVlO1xyXG4gICAgcmV0dXJuIGNvbmRpdGlvbmFsVmFsdWU7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGlzS2V5Q29kZURpc3BsYXlhYmxlKGtleWNvZGU6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgICAoa2V5Y29kZSA+IDQ3ICYmIGtleWNvZGUgPCA1OCkgfHwgLy8gbnVtYmVyIGtleXNcclxuICAgICAgICAoa2V5Y29kZSA9PSAzMiB8fCBrZXljb2RlID09IDEzKSB8fCAvLyBzcGFjZWJhciAmIHJldHVybiBrZXkocylcclxuICAgICAgICAoa2V5Y29kZSA+IDY0ICYmIGtleWNvZGUgPCA5MSkgfHwgLy8gbGV0dGVyIGtleXNcclxuICAgICAgICAoa2V5Y29kZSA+IDk1ICYmIGtleWNvZGUgPCAxMTIpIHx8IC8vIG51bXBhZCBrZXlzXHJcbiAgICAgICAgKGtleWNvZGUgPiAxODUgJiYga2V5Y29kZSA8IDE5MykgfHwgLy8gOz0sLS4vYCAoaW4gb3JkZXIpXHJcbiAgICAgICAgKGtleWNvZGUgPiAyMTggJiYga2V5Y29kZSA8IDIyMylcclxuICAgICk7IC8vIFtcXF0nIChpbiBvcmRlcilcclxufVxyXG5leHBvcnQgdmFyIFVuaXRNZWFzdXJlbWVudFR5cGUgPSB7XHJcbiAgICBwaXhlbDogJ3B4JyxcclxuICAgIHBlcmNlbnRhZ2U6ICclJyxcclxuICAgIGF1dG86ICcnLFxyXG59O1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VW5pdE1lYXN1cmVtZW50VHlwZSh2YWx1ZSA9ICcnKTogc3RyaW5nIHtcclxuICAgIHZhciB1bml0VHlwZTogc3RyaW5nO1xyXG5cclxuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PSAnYXV0bycpIHtcclxuICAgICAgICB1bml0VHlwZSA9IFVuaXRNZWFzdXJlbWVudFR5cGUuYXV0bztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdW5pdFR5cGUgPSB2YWx1ZS5pbmRleE9mKCclJykgIT0gLTEgPyBVbml0TWVhc3VyZW1lbnRUeXBlLnBlcmNlbnRhZ2UgOiBVbml0TWVhc3VyZW1lbnRUeXBlLnBpeGVsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVuaXRUeXBlO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRBdHRyaWJ1dGVzQXNBcnJheShlbDogSFRNTEVsZW1lbnQpOiBBcnJheTxBdHRyPiB7XHJcbiAgICBjb25zdCBhdHRyaWJ1dGVzID0gW107XHJcbiAgICBjb25zdCBlbGVtZW50QXR0cmlidXRlczogTmFtZWROb2RlTWFwID0gZWwuYXR0cmlidXRlcztcclxuXHJcbiAgICAvLyBBIHdvcmthcm91bmQgZm9yIElFOFxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50QXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGF0dHJpYnV0ZXMucHVzaChlbGVtZW50QXR0cmlidXRlc1tpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGF0dHJpYnV0ZXM7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGVuZHNXaXRoKHM6IHN0cmluZywgc3VmZml4OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBzLmluZGV4T2Yoc3VmZml4LCBzLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGgpICE9PSAtMTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gaGFzSW5kZXgoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAvXFxbWzAtOV1dfFxcLlswLTldLy50ZXN0KGtleSk7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVNlcmlhbGl6ZWRLZXlMYXN0RW51bWVyYXRvcihrZXk6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIGtleS5yZXBsYWNlKC9bMC05XVxcLig/PVteLl0qJCkvLCAnJykucmVwbGFjZSgvXFxbWzAtOV1dKD89W15cXFtdKiQpLywgJycpO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVTZXJpYWxpemVkS2V5RWRnZVByb3BlcnR5KGtleTogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4ga2V5LnN1YnN0cigwLCBrZXkubGFzdEluZGV4T2YoJy4nKSk7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIElFVGVtcGxhdGVFbGVtZW50UG9seWZpbGwoZG9jID0gZG9jdW1lbnQpIHtcclxuICAgIHZhciBzdXBwb3J0ID0gJ2NvbnRlbnQnIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XHJcblxyXG4gICAgLy8gU2V0IHRoZSBjb250ZW50IHByb3BlcnR5IGlmIG1pc3NpbmdcclxuICAgIGlmICghc3VwcG9ydCkge1xyXG4gICAgICAgIHZhciAvKipcclxuICAgICAgICAgICAgICogUHJlZmVyIGFuIGFycmF5IHRvIGEgTm9kZUxpc3RcclxuICAgICAgICAgICAgICogT3RoZXJ3aXNlLCB1cGRhdGluZyB0aGUgY29udGVudCBwcm9wZXJ0eSBvZiBhIG5vZGVcclxuICAgICAgICAgICAgICogd2lsbCB1cGRhdGUgdGhlIE5vZGVMaXN0IGFuZCB3ZSdsbCBsb29zZSB0aGUgbmVzdGVkIDx0ZW1wbGF0ZT5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRlbXBsYXRlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0ZW1wbGF0ZScpKSBhcyBhbnksXHJcbiAgICAgICAgICAgIHRlbXBsYXRlLFxyXG4gICAgICAgICAgICBjb250ZW50LFxyXG4gICAgICAgICAgICBmcmFnbWVudCxcclxuICAgICAgICAgICAgbm9kZSxcclxuICAgICAgICAgICAgaSA9IDAsXHJcbiAgICAgICAgICAgIGo7XHJcblxyXG4gICAgICAgIC8vIEZvciBlYWNoIDx0ZW1wbGF0ZT4gZWxlbWVudCBnZXQgaXRzIGNvbnRlbnQgYW5kIHdyYXAgaXQgaW4gYSBkb2N1bWVudCBmcmFnbWVudFxyXG4gICAgICAgIHdoaWxlICgodGVtcGxhdGUgPSB0ZW1wbGF0ZXNbaSsrXSkgJiYgIXRlbXBsYXRlLmNvbnRlbnQpIHtcclxuICAgICAgICAgICAgY29udGVudCA9IHRlbXBsYXRlLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChjb250ZW50WzBdKSB7XHJcbiAgICAgICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChjb250ZW50WzBdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGVtcGxhdGUuY29udGVudCA9IGZyYWdtZW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyAvLyBQcmVwYXJlIGEgY2xvbmUgZnVuY3Rpb24gdG8gYWxsb3cgbmVzdGVkIDx0ZW1wbGF0ZT4gZWxlbWVudHNcclxuICAgIC8vIGZ1bmN0aW9uIGNsb25lKCkge1xyXG4gICAgLy8gICAgIHZhclxyXG4gICAgLy8gICAgICAgICB0ZW1wbGF0ZXMgPSB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0ZW1wbGF0ZVwiKSxcclxuICAgIC8vICAgICAgICAgZnJhZ21lbnRzID0gW10sXHJcbiAgICAvLyAgICAgICAgIHRlbXBsYXRlLFxyXG4gICAgLy8gICAgICAgICBpID0gMDtcclxuICAgIC8vXHJcbiAgICAvLyAgICAgLy8gSWYgdGhlIHN1cHBvcnQgaXMgT0sgc2ltcGx5IGNsb25lIGFuZCByZXR1cm5cclxuICAgIC8vICAgICBpZiAoc3VwcG9ydCkge1xyXG4gICAgLy8gICAgICAgICB0ZW1wbGF0ZSAgPSB0aGlzLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIC8vICAgICAgICAgdGVtcGxhdGVzID0gdGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKFwidGVtcGxhdGVcIik7XHJcbiAgICAvL1xyXG4gICAgLy8gICAgICAgICAvLyBTZXQgdGhlIGNsb25lIG1ldGhvZCBmb3IgZWFjaCBuZXN0ZWQgPHRlbXBsYXRlPiBlbGVtZW50XHJcbiAgICAvLyAgICAgICAgIGZvciAoOyB0ZW1wbGF0ZXNbaV07IGkrKykge1xyXG4gICAgLy8gICAgICAgICAgICAgdGVtcGxhdGVzW2ldLmNsb25lID0gY2xvbmU7XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vXHJcbiAgICAvLyAgICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcclxuICAgIC8vICAgICB9XHJcbiAgICAvL1xyXG4gICAgLy8gICAgIC8vIExvb3AgdGhyb3VnaCBuZXN0ZWQgPHRlbXBsYXRlPiB0byByZXRyaWV2ZSB0aGUgY29udGVudCBwcm9wZXJ0eVxyXG4gICAgLy8gICAgIGZvciAoOyB0ZW1wbGF0ZXNbaV07IGkrKykge1xyXG4gICAgLy8gICAgICAgICBmcmFnbWVudHMucHVzaCh0ZW1wbGF0ZXNbaV0uY29udGVudCk7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy9cclxuICAgIC8vICAgICAvLyBOb3csIGNsb25lIHRoZSBkb2N1bWVudCBmcmFnbWVudFxyXG4gICAgLy8gICAgIHRlbXBsYXRlID0gdGhpcy5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAvL1xyXG4gICAgLy8gICAgIC8vIE1ha2VzIHN1cmUgdGhlIGNsb25lIGhhdmUgYSBcImNvbnRlbnRcIiBhbmQgXCJjbG9uZVwiIHByb3BlcnRpZXNcclxuICAgIC8vICAgICB0ZW1wbGF0ZS5jb250ZW50ID0gdGhpcy5jb250ZW50O1xyXG4gICAgLy8gICAgIHRlbXBsYXRlLmNsb25lICAgPSBjbG9uZTtcclxuICAgIC8vXHJcbiAgICAvLyAgICAgLyoqXHJcbiAgICAvLyAgICAgICogUmV0cmlldmUgdGhlIG5lc3RlZCA8dGVtcGxhdGU+IG9uY2UgYWdhaW5cclxuICAgIC8vICAgICAgKiBTaW5jZSB3ZSBqdXN0IGNsb25lZCB0aGUgZG9jdW1lbnQgZnJhZ21lbnQsXHJcbiAgICAvLyAgICAgICogdGhlIGNvbnRlbnQncyBwcm9wZXJ0eSBvZiB0aGUgbmVzdGVkIDx0ZW1wbGF0ZT4gbWlnaHQgYmUgdW5kZWZpbmVkXHJcbiAgICAvLyAgICAgICogV2UgaGF2ZSB0byByZS1zZXQgaXQgdXNpbmcgdGhlIGZyYWdtZW50IGFycmF5IHdlIHByZXZpb3VzbHkgZ290XHJcbiAgICAvLyAgICAgICovXHJcbiAgICAvLyAgICAgdGVtcGxhdGVzID0gdGVtcGxhdGUucXVlcnlTZWxlY3RvckFsbChcInRlbXBsYXRlXCIpO1xyXG4gICAgLy9cclxuICAgIC8vICAgICAvLyBMb29wIHRvIHNldCB0aGUgY29udGVudCBwcm9wZXJ0eSBvZiBlYWNoIG5lc3RlZCB0ZW1wbGF0ZVxyXG4gICAgLy8gICAgIGZvciAoaSA9IDA7IHRlbXBsYXRlc1tpXTsgaSsrKSB7XHJcbiAgICAvLyAgICAgICAgIHRlbXBsYXRlc1tpXS5jb250ZW50ID0gZnJhZ21lbnRzW2ldO1xyXG4gICAgLy8gICAgICAgICB0ZW1wbGF0ZXNbaV0uY2xvbmUgICA9IGNsb25lOyAvLyBNYWtlcyBzdXJlIHRvIHNldCB0aGUgY2xvbmUgbWV0aG9kIGFzIHdlbGxcclxuICAgIC8vICAgICB9XHJcbiAgICAvL1xyXG4gICAgLy8gICAgIHJldHVybiB0ZW1wbGF0ZTtcclxuICAgIC8vIH1cclxuICAgIC8vXHJcbiAgICAvLyB2YXJcclxuICAgIC8vICAgICB0ZW1wbGF0ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwidGVtcGxhdGVcIikgYXMgYW55LFxyXG4gICAgLy8gICAgIHRlbXBsYXRlLCBpID0gMDtcclxuICAgIC8vXHJcbiAgICAvLyAvLyBQb2xsdXRlIHRoZSBET00gd2l0aCBhIFwiY2xvbmVcIiBtZXRob2Qgb24gZWFjaCA8dGVtcGxhdGU+IGVsZW1lbnRcclxuICAgIC8vIHdoaWxlICgodGVtcGxhdGUgPSB0ZW1wbGF0ZXNbaSsrXSkpIHtcclxuICAgIC8vICAgICB0ZW1wbGF0ZS5jbG9uZSA9IGNsb25lO1xyXG4gICAgLy8gfVxyXG59XHJcbiIsImV4cG9ydCBlbnVtIEVkaXRhYmxlVGZhUHJvdmlkZXJzVHlwZXMge1xyXG4gICAgZ2lneWFQaG9uZSxcclxuICAgIGdpZ3lhVG90cCxcclxuICAgIGdpZ3lhUHVzaCxcclxuICAgIGxpdmVsaW5rLFxyXG59XHJcbmV4cG9ydCBjb25zdCBnaWd5YUFzc2VydGlvbkV4cGlyYXRpb24gPSA2MCAqIDUgKiAxMDAwO1xyXG4iLCJleHBvcnQgZW51bSBDbG9zZVJlYXNvbnMge1xyXG4gICAgcGVuZGluZ0Vycm9yLCAvLyBhbiB1bmhhbmRsZWQgcGVuZGluZyBlcnJvciBmcm9tIHRoZSBzZXJ2ZXIgbm90IGhhbmRsZWQgaW50ZXJuYWxseSBieSB0aGUgc2NyZWVuc2V0XHJcbiAgICBtaXNzaW5nLCAvLyBhdHRlbXB0IHRvIG1vdmUgdG8gYSBzY3JlZW4gc2V0IG5hbWUgdGhhdCBkb2VzIG5vdCBleGlzdHNcclxuICAgIGZpbmlzaGVkLCAvLyBzY3JlZW5TZXQgZmxvdyBmaW5pc2hlZCAobW92ZSB0byBfZmluaXNoIHNjcmVlbiBvciBubyBtb3JlIGZvcm1zKVxyXG4gICAgY2FuY2VsZWQsIC8vIHNjcmVlblNldCBmbG93IGNhbmNlbGVkIChieSB4IGluIHRoZSBkaWFsb2cgb3IgYnkgY2xpZW50IHNjcmlwdClcclxuICAgIGJhY2tCdXR0b24sIC8vIG1vYmlsZSBkaWFsb2cgaXMgY2xvc2VkIGJ5IGJhY2sgaW4gdGhlIGJyb3dzZXJcclxuICAgIGNhbmNlbGVkQnlQYXJlbnQsIC8vIHVzZWQgaW50ZXJuYWxseSB0byBwYXJlbnQgY2hpbGQgdG8gY2xvc2UgaXRzIGNoaWxkXHJcbiAgICBza2lwLCAvLyBzY3JlZW5TZXQgZmxvdyBmaW5pc2hlZCBkdWUgdG8gX3NraXBcclxuICAgIGVycm9yLCAvLyBlcnJvciBmcm9tIHNlcnZlciBiZWZvcmUgd2UgaGF2ZSBhIHNjcmVlbiB0byBzaG93IHRoZW0gb24sXHJcbiAgICBjYW5jZWwsLy8gc2NyZWVuU2V0IGZsb3cgY2FuY2VsZWQoY2xvc2UgdGhlIHNjcmVlbiB3aXRob3V0IGZpbmVsaXppbmcgcGVuZGluZyBwcm9jZXNzZXMpXHJcbn1cclxuIiwiZXhwb3J0IGVudW0gUGx1Z2luU3R5bGUge1xyXG4gICAgX3VuZGVmaW5lZCA9IDAsXHJcbiAgICBub25lLFxyXG4gICAgbGVnYWN5LFxyXG4gICAgbW9kZXJuLFxyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRQbHVnaW5TdHlsZUNsYXNzKHN0eWxlOiBQbHVnaW5TdHlsZSk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gJ2dpZ3lhLXN0eWxlLScgKyBQbHVnaW5TdHlsZVtzdHlsZV07XHJcbn1cclxuIiwiaW1wb3J0IHsgSUJhc2VPYmplY3RQYXJhbSB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9CYXNlT2JqZWN0L0Jhc2VPYmplY3QnO1xyXG5cclxuZXhwb3J0IGVudW0gRGV2aWNlVHlwZXMge1xyXG4gICAgX3VuZGVmaW5lZCxcclxuICAgIGRlc2t0b3AsXHJcbiAgICBtb2JpbGUsXHJcbiAgICBhdXRvLFxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgSUJhc2VPYmplY3RDb25maWc8UCBleHRlbmRzIElCYXNlT2JqZWN0UGFyYW0+IHtcclxuICAgIC8vIE1lcmdlZCBmcm9tIElJbmplY3Rpb25JbmZvXHJcbiAgICBuYW1lPzogc3RyaW5nO1xyXG4gICAgbmFtZXNwYWNlPzogc3RyaW5nO1xyXG4gICAgbWV0aG9kTmFtZT86IHN0cmluZztcclxuICAgIGpzTmFtZT86IHN0cmluZztcclxuICAgIGRlZmF1bHREZXZpY2VUeXBlPzogRGV2aWNlVHlwZXM7XHJcblxyXG4gICAgLy8gRGVmYXVsdCBwYXJhbXMgdGhhdCB3aWxsIGJlIG1lcmdlZCB0byB0aGUgZmluYWwgcGFyYW1zIG9iamVjdFxyXG4gICAgZGVmYXVsdFBhcmFtczogUDtcclxuXHJcbiAgICAvLyBSZXF1aXJlZCBwYXJhbXMuIElmIG9uZSBvZiB0aGVzZSBpc24ndCBwcm92aWRlZCAoYW5kIGlzbid0IGluIHRoZSBkZWZhdWx0UGFyYW1zKSwgYW4gZXJyb3Igd2lsbCBiZSBpbnZva2VkLlxyXG4gICAgcmVxdWlyZWRQYXJhbXM6IEFycmF5PHN0cmluZz47XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGVudW0gR1NFcnJvcnMge1xyXG4gICAgT0sgPSAwLFxyXG4gICAgRGF0YV9QZW5kaW5nID0gMTAwMDAxLCAvLyBEYXRhIGlzIHN0aWxsIGJlaW5nIHByb2Nlc3NlZCwgcXVlcnkgYWdhaW4gZm9yIHRoZSByZXNwb25zZVxyXG4gICAgTkVUV09SS19FUlJPUiA9IDUwMDAyNixcclxuICAgIERBVEFfUEVORElORyA9IDEwMDAwMSwgLy8gRGF0YSBpcyBzdGlsbCBiZWluZyBwcm9jZXNzZWQsIHF1ZXJ5IGFnYWluIGZvciB0aGUgcmVzcG9uc2VcclxuICAgIE9QRVJBVElPTl9DQU5DRUxFRCA9IDIwMDAwMSwgLy8gdXNlciBjYW5jZWxlZCwgaW4gbG9naW4gcHJvY2Vzc1xyXG4gICAgUEVSTUlTU0lPTl9HUkFOVEVEID0gMjAwMDAyLCAvLyBJbm5lciBjb2RlXHJcbiAgICBQRVJNSVNTSU9OX05PVF9HUkFOVEVEID0gMjAwMDAzLCAvLyBJbm5lciBjb2RlXHJcbiAgICBSRURJUkVDVCA9IDIwMDAwNCwgLy8gSW5uZXIgY29kZVxyXG4gICAgTkVXX1VTRVIgPSAyMDAwMDUsIC8vIElubmVyIGNvZGVcclxuICAgIE9QRVJBVElPTl9ET05FID0gMjAwMDA2LCAvLyBJbm5lciBjb2RlXHJcbiAgICBVUERBVEVfVVNFUiA9IDIwMDAwNywgLy8gSW5uZXIgY29kZVxyXG4gICAgT0tfV0lUSF9FUlJPUlMgPSAyMDAwMDgsIC8vIEZvciByZXBvcnRzIC0gd2hlbiB3ZSByZXR1cm4gb2sgdG8gY2xpZW50IGJ1dCBoYWQgYWNjZXB0YWJsZSBlcnJvcnMgKHRoYXQgd2Ugd2FudCB0byBrbm93IGFib3V0KSBvbiB0aGUgd2F5XHJcbiAgICBBQ0NPVU5UU19MSU5LRUQgPSAyMDAwMDksIC8vIEFmdGVyIGxpbmtpZ24gYWNjb3V0bnMgdmlhIGxvZ2luLCByZXR1cm4gdGhpcyBlcnJvciBjb2RlXHJcbiAgICBPS19XSVRIX0VSUk9SX0xPR0lOX0lERU5USUZJRVJfRVhJU1RTID0gMjAwMDEwLCAvLyBGb3Igc2V0QWNjb3VudEluZm8gdXNpbmcgdGhlIGNvbmZsaWN0SGFuZGxpbmcgcGFyYW0gLSBwcm9maWxlIHdhcyBzYXZlZCwgYnV0IHRoZSBlbWFpbCBjb25mbGljdHMgd2l0aCBhbm90aGVyIHVzZXJcclxuICAgIEFDQ09VTlRfUEVORElOR19SRUdJU1RSQVRJT04gPSAyMDYwMDEsIC8vIEZvciBhY2NvdW50cyBBUEksXHJcbiAgICBBQ0NPVU5UX1BFTkRJTkdfVkVSSUZJQ0FUSU9OID0gMjA2MDAyLCAvLyBGb3IgYWNjb3VudHMgQVBJOyBjb25zaWRlciBtb3ZpbmcgdG8gNDAzeHh4IHNlY3Rpb24gaW4gdGhlIGZ1dHVyZS5cclxuICAgIEFDQ09VTlRfTUlTU0lOR19MT0dJTklEID0gMjA2MDAzLCAvLyBGb3IgYWNjb3VudHMgQVBJXHJcbiAgICBJREVOVElUWV9BTFJFQURZX0FTU0lHTkVEID0gMjA2MDA0LCAvLyBGb3IgaW1wb3J0IGFjY291bnRzIEFQSVxyXG4gICAgQUZURVJfRU1BSUxfVkVSSUZJQ0FUSU9OID0gMjA2MDA1LFxyXG4gICAgUEVORElOR19DT0RFX1ZFUklGSUNBVElPTiA9IDIwNjAwNixcclxuICAgIENMSUVOVF9MT0cgPSAzMDAwMDEsIC8vIGludGVybmFsLCBmb3IgcmVwb3J0aW5nIGVyb3JycyBpbiBjbGllbnQgU0RLU1xyXG4gICAgSU5WQUxJRF9EQVRBX0NFTlRFUiA9IDMwMTAwMSwgLy8gXCJJbnZhbGlkIGRhdGEtY2VudGVyXCIuIHdpdGggZXJyb3IgZGV0YWlscyBvZjogXCJUaGlzIEFQSSBrZXkgaXMgc2VydmVkIGJ5IGFub3RoZXIgZGF0YSBjZW50ZXJcIi5cclxuICAgIElOVkFMSURfUkVRVUVTVF9GT1JNQVQgPSA0MDAwMDEsIC8vIGNvdWxkIGJlIGFsbCBraW5kIG9mIGVycm9ycyB3aXRoIHdyb25nIHJlcXVlc3QgKG5vbiBzZWN1cmUgd2hlbiBzaG91bGQgYmUgc2VjdXJlLCB3cm9uZyBhdXRoZW50aWNhdGlvbiBoZWFkZXIpXHJcbiAgICBNSVNTSU5HX1JFUVVJUkVEX1BBUkFNRVRFUiA9IDQwMDAwMixcclxuICAgIFVOSVFVRV9JREVOVElGSUVSX0VYSVNUUyA9IDQwMDAwMyxcclxuICAgIElOVkFMSURfUEFSQU1FVEVSX0ZPUk1BVCA9IDQwMDAwNCxcclxuICAgIElOVkFMSURfUEFSQU1FVEVSX1ZBTFVFID0gNDAwMDA2LFxyXG4gICAgRFVQTElDQVRFX1ZBTFVFID0gNDAwMDA3LFxyXG4gICAgSU5WQUxJRF9BVVRIRU5USUNBVElPTl9IRUFERVIgPSA0MDAwMDgsIC8vIE9BdXRoMlxyXG4gICAgVkFMSURBVElPTl9FUlJPUiA9IDQwMDAwOSwgLy8gSW4gYWNjb3VudHMucmVnaXN0ZXIsIHdoZW5ldmVyIHRoZXJlIGlzIGEgdmFsaWRhdGlvbiBlcnJvclxyXG4gICAgSU5WQUxJRF9SRURJUkVDVF9VUkkgPSA0MDAwMTEsIC8vIE9BdXRoMlxyXG4gICAgSU5WQUxJRF9SRVNQT05TRV9UWVBFID0gNDAwMDEyLCAvLyBPQXV0aDJcclxuICAgIFVOU1VQUE9SVEVEX0dSQU5UX1RZUEUgPSA0MDAwMTMsIC8vIE9BdXRoMlxyXG4gICAgSU5WQUxJRF9HUkFOVCA9IDQwMDAxNCwgLy8gT0F1dGgyXHJcbiAgICBDT0RFX0VYUElSRUQgPSA0MDAwMTUsIC8vIE9BdXRoMlxyXG4gICAgU0NIRU1BX1ZBTElEQVRJT05fRkFJTEVEID0gNDAwMDIwLFxyXG4gICAgQ0FQVENIQV9WRVJJRklDQVRJT05fRkFJTEVEID0gNDAwMDIxLFxyXG4gICAgVU5JUVVFX0lOREVYX1ZBTElEQVRJT05fRVJST1IgPSA0MDAwMjIsXHJcbiAgICBJTlZBTElEX1RZUEVfVkFMSURBVElPTl9FUlJPUiA9IDQwMDAyMyxcclxuICAgIERZTkFNSUNfRklFTERTX1ZBTElEQVRJT05fRVJST1IgPSA0MDAwMjQsXHJcbiAgICBXUklURV9BQ0NFU1NfVkFMSURBVElPTl9FUlJPUiA9IDQwMDAyNSxcclxuICAgIElOVkFMSURfRk9STUFUX1ZBTElEQVRJT05fRVJST1IgPSA0MDAwMjYsXHJcbiAgICBSRVFVSVJFRF9WQUxVRV9WQUxJREFUSU9OX0VSUk9SID0gNDAwMDI3LFxyXG4gICAgRU1BSUxfTk9UX1ZFUklGSUVEID0gNDAwMDI4LFxyXG4gICAgU0NIRU1BX0NPTkZMSUNUX0VSUk9SID0gNDAwMDI5LCAvLyBUbyBoYW5kbGUgVXNlciBzdG9yeSAzNDMzMC4gSW1wcm92ZSBFbGFzdGljU2VhcmNoTWFwcGluZ0V4Y2VwdGlvbiBoYW5kbGluZyBpbiBEUy5JbmRleE9iamVjdFxyXG4gICAgT1BFUkFUSU9OX05PVF9BTExPV0VEID0gNDAwMDMwLCAvLyBVc2VyIHN0b3J5IDM0MzExIC0gSWYgYWRkQ29ubmVjdGlvbiBpcyBjYWxsZWQgcmV0dXJuIGFuIGVycm9yIChcIm9wZXJhdGlvbiBub3QgYWxsb3dlZCBmb3IgdGhpcyBhY2NvdW50XCIsIDQwMFhYWCBlcnJvcikuXHJcbiAgICBTRUNVUklUWV9WRVJJRklDQVRJT05fRkFJTEVEID0gNDAwMDUwLFxyXG4gICAgSU5WQUxJRF9BUElLRVlfUEFSQU1FVEVSID0gNDAwMDkzLFxyXG4gICAgTk9UX1NVUFBPUlRFRCA9IDQwMDA5NiwgLy8gdGhlIGZ1bmN0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgYnkgYW55IG9mIHRoZSBjdXJyZW50bHkgY29ubmVjdGVkIHByb3ZpZGVyc1xyXG4gICAgVU5TVVBQT1JURURfVVNFUl9BR0VOVCA9IDQwMDA5NywgLy9cclxuICAgIE5PX1BST1ZJREVSUyA9IDQwMDEwMCwgLy8gY2xpZW50P1xyXG4gICAgUE9QVVBfQkxPQ0tFRCA9IDQwMDEwMSwgLy8gY2xpZW50XHJcbiAgICBJTlZBTElEX0VWRU5UX0hBTkRMRVIgPSA0MDAxMDIsIC8vIGNsaWVudFxyXG4gICAgSU5WQUxJRF9DT05UQUlORVJJRCA9IDQwMDEwMywgLy8gY2xpZW50XHJcbiAgICBOT1RfQ09OTkVDVEVEID0gNDAwMTA2LCAvLyB1c2VyIGlzIG5vdCBjb25uZWN0ZWQgdG8gdGhlIHJlcXVpcmVkIG5ldHdvcmsgb3IgdG8gYW55IG5ldHdvcmtcclxuICAgIElOVkFMSURfU0lURV9ET01BSU4gPSA0MDAxMjAsIC8vIHRoZSBjdXJyZW50IGRvbWFpbiBkb2VzIG5vdCBtYXRjaCB0aGUgZG9tYWluIGNvbmZpZ3VyZWQgZm9yIHRoZSBhcGkga2V5XHJcbiAgICBQUk9WSURFUl9DT05GSUdVUkFUSU9OX0VSUk9SID0gNDAwMTIyLCAvLyB0aGUgY3VycmVudCBkb21haW4gZG9lcyBub3QgbWF0Y2ggdGhlIGRvbWFpbiBjb25maWd1cmVkIGZvciB0aGUgYXBpIGtleVxyXG4gICAgTElNSVRfUkVBQ0hFRCA9IDQwMDEyNCwgLy8gR2FtZU1lY2hhbmljcyAtIENhcCB3YXMgcmVhY2hlZFxyXG4gICAgRlJFUVVFTkNZX0xJTUlUX1JFQUNIRUQgPSA0MDAxMjUsIC8vIENvbW1lbnRzL0ZlZWQgLSBTcGFtIENhcHMgd2FzIHJlYWNoZWRcclxuICAgIElOVkFMSURfQUNUSU9OID0gNDAwMTI2LCAvLyBHYW1lTWVjaGFuaWNzIC0gSW52YWxpZCBhY3Rpb24uIFRyaWdnZXJlZCBhY3Rpb24gY2FuJ3QgYmUgaW5pdGlhdGVkIGV4dGVybmFsbHlcclxuICAgIElOU1VGRklDSUVOVF9QT0lOVFNfVE9fUkVERUVNID0gNDAwMTI3LCAvLyBHYW1lTWVjaGFuaWNzIC0gSW5zdWZmaWNpZW50X3BvaW50c190b19yZWRlZW1cclxuICAgIFNJR05BVFVSRV9USU1FU1RBTVBfRVhQSVJFRCA9IDQwMDEyOCwgLy8gdGhlIHRpbWVzdGFtcCBpbnNpZGUgdGhlIHNpZ25hdHVyZSBpcyBleHBpcmVkXHJcbiAgICBJTlZBTElEX1BPTElDWV9DT05GSUdVUkFUSU9OID0gNDAxMDAwLCAvLyBQb2xpY3kgY29uZmlndXJhdGlvbiBpcyBpbnZhbGlkIChpLmUuIHByZXZlbnQgcmVnaXRyYXRpb24pXHJcbiAgICBTVVNQRUNURURfU1BBTSA9IDQwMTAxMCwgLy8gU29tZW9uZSBpcyB0cnlpbmcgdG8gdXNlIEdpZ3lhIHRvIHNlbmQgYSBlbWFpbCB3aXRoIGEgVVJMIHRoYXQgZG9lcyBub3QgbWF0Y2ggYW55IG9mIHRoZSBjbGllbnQncyBkb21haW5zOyBzdXNwZWN0ZWQgc3BhbS5cclxuICAgIExPR0lOX0ZBSUxFRF9DQVBUQ0hBX1JFUVVJUkVEID0gNDAxMDIwLCAvLyBhY2NvdW50cy5sb2dpbiAtIGNhcHRjaGEgcmVxdWlyZWRcclxuICAgIExPR0lOX0ZBSUxFRF9XUk9OR19DQVBUQ0hBID0gNDAxMDIxLCAvLyBhY2NvdW50cy5sb2dpbiAtIHdyb25nIGNhcHRjaGEgY29kZVxyXG4gICAgT0xEX1BBU1NXT1JEX1VTRUQgPSA0MDEwMzAsIC8vIFRoZSB1c2VyIHByb3ZpZGVkIGhpcyBwcmV2aW91cyBwYXNzd29yZCwgbm90IHRoZSBjdXJyZW50IG9uZVxyXG4gICAgRk9SQklEREVOID0gNDAzMDAwLFxyXG4gICAgSU5WQUxJRF9TRVNTSU9OX1RPS0VOID0gNDAzMDAxLCAvLyBpbnRlcm5hbFxyXG4gICAgUkVRVUVTVF9IQVNfRVhQSVJFRCA9IDQwMzAwMiwgLy8gdGhlIHRpbWVzdGFtcCBvciBleHBpcmF0aW9uIG9mIHRoZSB0b2tlbiB1c2VkIGV4Y2VlZGVkIHRoZSBhbGxvd2VkIHRpbWUgd2luZG93XHJcbiAgICBJTlZBTElEX1JFUVVFU1RfU0lHTkFUVVJFID0gNDAzMDAzLFxyXG4gICAgRFVQTElDQVRFX05PTkNFID0gNDAzMDA0LFxyXG4gICAgVU5BVVRIT1JJWkVEX1VTRVIgPSA0MDMwMDUsIC8vIHRoZSB1c2VyIGlkIHBhc3NlZCBpcyBub3QgdmFsaWQgZm9yIHRoaXMgc2l0ZVxyXG4gICAgU0VOU0lUSVZFX0RBVEFfU0VOVF9PVkVSX0hUVFAgPSA0MDMwMDYsIC8vIHdoZW4gc2VuZGluZyB0aGUgc2VjcmV0IGtleSBpbiBSRVNUIGl0IGhhcyB0byBiZSBvdmVyIEhUVFBTXHJcbiAgICBQRVJNSVNTSU9OX0RFTklFRCA9IDQwMzAwNywgLy8gQ29tbWVudHMgc2VydmVyIC0gUGVybWlzc2lvbiBkZW5pZWQgKHJlYWRPbmx5LG1vZGVyYXRpb24gc2l0ZSkuXHJcbiAgICBJTlZBTElEX09QRU5JRF9VUkwgPSA0MDMwMDgsIC8vIGNhbm5vdCBmaW5kIGFuIG9wZW5JZCBlbmRwb2ludCBvbiB0aGUgdXJsIG9yIHVzZXJuYW1lIGdpdmVuIGZvciBvcGVuSWQgbG9naW5cclxuICAgIFBST1ZJREVSX1NFU1NJT05fRVhQSVJFRCA9IDQwMzAwOSwgLy8gdGhlIHVzZXIgc2Vzc2lvbiBmb3IgdGhpcyBwcm92aWRlciBpcyBleHBpcmVkXHJcbiAgICBJTlZBTElEX1NFQ1JFVCA9IDQwMzAxMCwgLy8gdGhlIHJlcXVlc3QgaGFzIGFuIGludmFsaWQgc2VjcmV0IGtleVxyXG4gICAgU0VTU0lPTl9IQVNfRVhQSVJFRCA9IDQwMzAxMSwgLy8gdGhlIHNlc3Npb24gZm9yIHRoaXMgdXNlciBoYXMgZXhwaXJlZFxyXG4gICAgTk9fVkFMSURfU0VTU0lPTiA9IDQwMzAxMiwgLy8gcmVxdWVzdGVkIHVzZXIgaGFzIG5vIHZhbGlkIHNlc3Npb25cclxuICAgIFVOVkVSSUZJRURfVVNFUiA9IDQwMzAxMywgLy8gdGhlIHVzZXIgaXMgbm90IHZlcmlmaWVkIGluIFNTTyBzZXNzaW9uXHJcbiAgICBNSVNTSU5HX1JFUVVFU1RfUkVGRVJSRVIgPSA0MDMwMTUsIC8vIHdlIGNhbid0IHZhbGlkYXRlIHRoZSByZXF1ZXN0IGJlY2F1c2UgdGhlIHJlZmVycmVyIGhlYWRlciBpcyBtaXNzaW5nXHJcbiAgICBVTkVYUEVDVEVEX1BST1ZJREVSX1VTRVIgPSA0MDMwMTcsIC8vIHRoZSBsb2dnZWQgaW4gdXNlciBpcyBkaWZmZXJlbnQgZnJvbSB0aGUgb25lIGV4cGVjdGVkXHJcbiAgICBQRVJNSVNTSU9OX05PVF9SRVFVRVNURUQgPSA0MDMwMjIsIC8vIHRoZSBhY3Rpb24gbmVlZHMgYSB1c2VyIHBlcm1pc3Npb24gYW5kIGl0IHdhcyBub3QgcmVxdWVzdGVkXHJcbiAgICBOT19VU0VSX1BFUk1JU1NJT04gPSA0MDMwMjMsIC8vIHRoZSBhY3Rpb24gbmVlZHMgYSB1c2VyIHBlcm1pc3Npb24gYW5kIHdlIGRvbid0IGhhdmUgb25lXHJcbiAgICBQUk9WSURFUl9MSU1JVF9SRUFDSEVEID0gNDAzMDI0LCAvLyB0aGUgcHJvdmlkZXIgbGltaXQgZm9yIHRoaXMgYWN0aW9uIHdhcyBleGNlZWRlZFxyXG4gICAgSU5WQUxJRF9UT0tFTiA9IDQwMzAyNSwgLy8gT0F1dGgyXHJcbiAgICBVTkFVVEhPUklaRURfQUNDRVNTX0VSUk9SID0gNDAzMDI2LCAvLyBDYWxscyB0byBhY2NvdW50cy5pc0F2YWlsYWJsZUxvZ2luSUQgV2hlbiBwcmV2ZW50TG9naW5JREhhcnZlc3RpbmcgPSB0cnVlIHNob3VsZCByZXR1cm4gYW4gYXBwcm9wcmlhdGUgNDAzeHh4IHVuYXV0aG9yaXplZCBhY2Nlc3MgZXJyb3IuXHJcbiAgICBESUZGRVJFTlRfVVNFUl9GT1JfUkVBVVRIID0gNDAzMDI3LCAvLyBEaWZmZXJlbnQgdXNlciB0cmllZCB0byByZS1hdXRob3JpemUuXHJcbiAgICBTRVNTSU9OX0VYUElSRURfUkVUUlkgPSA0MDMwMzAsIC8vIElubmVyIGNvZGUgLSB3aGVuIHRoZSBmYWNlYm9vayBzZXNzaW9uIGlzIGV4cGlyZWQgYW5kIHRoZSBjbGllbnQgd2FpdHMgZm9yIEZCIG9uIHBhZ2UgdG8gbG9hZFxyXG4gICAgQVBQUk9WRURfQllfTU9ERVJBVE9SID0gNDAzMDMxLCAvLyBjb21tZW50cyAtIGNhbnQgZmxhZyBjb21tZW50LCBpdCB3YXMgYXBwcm92ZWQgYnkgdGhlIG1vZGVyYXRvciBhbHJlYWR5LlxyXG4gICAgVE9LRU5fSEFTX1JFTkVXRUQgPSA0MDMwMzIsIC8vIHRoZSB0b2tlbiBpcyBubyBsb25nZXIgdmFsaWQsIGJ1dCB3ZSBoYXZlIG5ldyB0b2tlbiB0byBwcm92aWRlXHJcbiAgICBOT19VU0VSX0NPT0tJRSA9IDQwMzAzNSwgLy8gbm8gdXNlciBjb29raWVcclxuICAgIFVOQVVUSE9SSVpFRF9QQVJUTkVSID0gNDAzMDM2LCAvLyBwYXJ0bmVyIGlzIGRpc2FibGVkXHJcbiAgICBQT1NUX0RFTklFRCA9IDQwMzAzNywgLy8gQ29tbWVudHMgc2VydmVyIC0gUG9zdCBkZW5pZWQgd2hlbiB0aGUgdXNlciB0cmllZCB0byByZXZpZXcgdHdpY2UuXHJcbiAgICBOT19MT0dJTl9USUNLRVQgPSA0MDMwNDAsIC8vIG5vIGxvZ2luIHRpY2tldCBpbiBjYWxsYmFjayB1cmxcclxuICAgIEFDQ09VTlRfRElTQUJMRUQgPSA0MDMwNDEsIC8vIEZvciBhY2NvdW50cyAtIHdoZW4gZ3MuYWNjb3VudHMuSXNBY3RpdmU9ZmFsc2VcclxuICAgIElOVkFMSURfTE9HSU5JRCA9IDQwMzA0MiwgLy8gRm9yIGFjY291bnRzIC0gd2hlbiB0cnlpbmcgdG8gbG9naW4gd2l0aCBhIGxvZ2luSUQgdGhhdCBkbyBub3QgZXhpc3RzXHJcbiAgICBMT0dJTl9JREVOVElGSUVSX0VYSVNUUyA9IDQwMzA0MywgLy8gRm9yIGFjY291bnQ6IElmIHByb3ZpZGVyRW1haWwgaXMgZGVmaW5lZCBhcyBhIGxvZ2luSWRlbnRpZmllciBpbiB0aGUgcG9saWN5LCBhbmQgdGhlIGVtYWlsIGFkZHJlc3MgcmVjZWl2ZWQgZnJvbSB0aGUgcHJvdmlkZXIgZXhpc3RzIGluIHRoZSBncy5sb2dpbklkZW50aWZpZXJzIGNvbGxlY3Rpb24gYnV0IGFzc29jaWF0ZWQgd2l0aCBhIGRpZmZlcmVudCBVVUlEIHRoYW4gdGhlIGN1cnJlbnQgdXNlciwgdGhlbiByZXR1cm4gXCJMb2dpbiBpZGVudGlmaWVyIGV4aXN0c1wiIGVycm9yIGNvZGUgKDQwM3h4eCkuXHJcbiAgICBVTkRFUkFHRV9VU0VSID0gNDAzMDQ0LCAvLyBGb3IgQ09QUEEgY29tcGxpYW5jZSAoQ2hpbGRyZW4ncyBPbmxpbmUgUHJpdmFjeSBQcm90ZWN0aW9uIEFjdClcclxuICAgIElOVkFMSURfU0lURV9DT05GSUdVUkFUSU9OX0VSUk9SID0gNDAzMDQ1LCAvLyBGb3IgYWNjb3VudHMgLSBzaXRlIERTIGlzIGVuYWJsZWQgdGhvdWdoIG5vIERTU2l6ZSB3YXMgY29uZmlndXJlZC5cclxuICAgIExPR0lOSURfRE9FU19OT1RfRVhJU1QgPSA0MDMwNDcsIC8vIEZvciBhY2NvdW50cyAtIHdoZW4gdHJ5aW5nIHRvIHJlc2V0IHBhc3N3b3JkIHdpdGggYSBsb2dpbklEIHRoYXQgZG8gbm90IGV4aXN0c1xyXG4gICAgQVBJX1JBVEVfTElNSVRfRVhDRUVERUQgPSA0MDMwNDgsXHJcbiAgICBQRU5ESU5HX1BBU1NXT1JEX0NIQU5HRSA9IDQwMzEwMCwgLy8gVGhlIHVzZXIncyBwYXNzd29yZCBuZWVkcyB0byBiZSBjaGFuZ2VkXHJcbiAgICBBQ0NPVU5UX1BFTkRJTkdfVEZBX1ZFUklGSUNBVElPTiA9IDQwMzEwMSxcclxuICAgIEFDQ09VTlRfUEVORElOR19URkFfUkVHSVNUUkFUSU9OID0gNDAzMTAyLFxyXG4gICAgQUNDT1VOVF9QRU5ESU5HX1JFQ0VOVF9MT0dJTiA9IDQwMzExMCxcclxuICAgIEFDQ09VTlRfVEVNUE9SQVJJTFlfTE9DS0VEX09VVCA9IDQwMzEyMCwgLy8gVG9vIG1hbnkgbG9naW4gYXR0ZW1wdHM7IGFjY291bnQgbG9ja2VkLW91dFxyXG4gICAgUkVEVU5EQU5UX09QRVJBVElPTiA9IDQwMzIwMCwgLy8gVGhlIGNsaWVudCBwZXJmb3JtZWQgYW4gb3BlcmF0aW9uIHRoYXQgaXMgcmVkdW5kYW50XHJcbiAgICBJTlZBTElEX0FQUExJQ0FUSU9OX0lEID0gNDAzMjAxLCAvLyBUaGUgYXBwIGlkIHByb3ZpZGVkIGlzIGRpZmZlcmVudCB0aGFuIHRoZSBvbmUgY29uZmlndXJlZCBmb3IgdGhlIHNpdGVcclxuICAgIE5PVF9GT1VORCA9IDQwNDAwMCwgLy8gQ29tbWVudHMgc2VydmVyIC0gQ2F0ZWdvcnkgbm90IGZvdW5kLiBBY2NvdW50cyAtIGVtYWlsIHZlcmlmaWNhdGlvbiBmYWlsZWQsIHV1aWQgbm90IGZvdW5kLlxyXG4gICAgRlJJRU5EX05PVF9GT1VORCA9IDQwNDAwMSwgLy8gdGhlIHVzZXIgaWQgcHJvdmlkZWQgYXMgYSB0YXJnZXQgaXMgbm90IGEgZnJpZW5kIGZvciB0aGUgY3VycmVudCB1c2VyXHJcbiAgICBDQVRFR09SWV9OT1RfRk9VTkQgPSA0MDQwMDIsIC8vIENvbW1lbnRzIHNlcnZlciAtIENhdGVnb3J5IG5vdCBmb3VuZC5cclxuICAgIFVJRF9OT1RfRk9VTkQgPSA0MDQwMDMsXHJcbiAgICBSRVNPVVJDRV9OT1RfRk9VTkQgPSA0MDQwMDQsIC8vIENsaWVudCBzaWRlIC0gaW1hZ2Ugbm90IGZvdW5kIGFmdGVyIHVwbG9hZFxyXG4gICAgSU5WQUxJRF9BUElfTUVUSE9EID0gNDA1MDAxLCAvLyBpbnRlcm5hbCBmb3Igb3VyIEpTIEFQSVxyXG4gICAgSURFTlRJVFlfRVhJU1RTID0gNDA5MDAxLCAvLyB3aGVuIHRyeWluZyB0byBjb25uZWN0IHRvIGEgcHJvdmlkZXIgdGhhdCBpcyBhbHJlYWR5IGNvbm5lY3RlZCBvciBsaW5rIHRvIGFuIGFscmVhZHkgbGlua2VkIGFjY291bnRcclxuICAgIEdPTkUgPSA0MTAwMDAsIC8vIFJlc291cmNlIG5vIGxvbmdlciBhdmFpbGFibGUuIERhdGEgS2V5IFNlcnZlciAtIGtleSByZXZva2VkL2V4cGlyZWQuXHJcbiAgICBSRVFVRVNUX0VOVElUWV9UT09fTEFSR0UgPSA0MTMwMDEsIC8vIENvbW1lbnRzIHNlcnZlciAtIFJlcXVlc3QgdG8gbGFyZ2VcclxuICAgIENPTU1FTlRfVEVYVF9UT09fTEFSR0UgPSA0MTMwMDIsIC8vIENvbW1lbnRzIHNlcnZlciAtIENvbW1lbnQgVGV4dCB0byBsYXJnZS5cclxuICAgIE9CSkVDVF9UT09fTEFSR0UgPSA0MTMwMDMsIC8vIERhdGFTdG9yZSBvYmplY3QgaXMgdG9vIGxhcmdlXHJcbiAgICBQUk9GSUxFX1BIT1RPX1RPT19MQVJHRSA9IDQxMzAwNCwgLy8gUHJvZmlsZSBwaG90byBpcyB0b28gbGFyZ2UsIGV4Y2VlZHMgbWF4aW11bSBhbGxvd2VkIGNvbnRlbnQgbGVuZ3RoXHJcbiAgICBSRVFVRVNUX1VSSV9UT09fTE9ORyA9IDQxNDAwMCwgLy9UaGUgVVJJIHByb3ZpZGVkIHdhcyB0b28gbG9uZyBmb3IgdGhlIHNlcnZlciB0byBwcm9jZXNzLlxyXG4gICAgTUlTU0lOR19VU0VSX1BIT1RPID0gNDA5MDEwLCAvLyBFcnJvciAtIG1pc3NpbmcgdXNlciBwaG90b1xyXG4gICAgQ09VTlRFUl9OT1RfUkVHSVNURVJFRCA9IDQwOTAxMSwgLy8gQ291bnRlciBub3QgcmVnaXN0ZXJlZFxyXG4gICAgSU5WQUxJRF9HTUlEX1RJQ0tFVCA9IDQwOTAxMiwgLy8gZ21pZCB0aWNrZXQgaXMgbm90IHZhbGlkXHJcbiAgICBTQU1MX01BUFBFRF9BVFRSSUJVVEVfTk9UX0ZPVU5EID0gNDA5MDEzLCAvLyBVc2VkIHdoZW4gbWFwcGVkIGF0dHJpYnV0ZSB2YWx1ZSBmb3IgcHJvdmlkZXJVSUQgY2Fubm90IGJlIHJldHJlaXZlZFxyXG4gICAgU0FNTF9DRVJUSUZJQ0FURV9OT1RfRk9VTkQgPSA0MDkwMTQsIC8vIFVzZWQgd2hlbiBTQU1MIGNlcnRpZmljYXRlIGNvdWxkIG5vdCBiZSByZXRyZWl2ZWQuXHJcbiAgICBTQU1MX01FU1NBR0VfTk9UX0ZPVU5EID0gNDA5MDE1LCAvLyBVc2VkIHdoZW4gY2FjaGVkIFNBTUwgbWVzc2FnZSBjb3VsZCBub3QgYmUgcmV0cmVpdmVkLlxyXG4gICAgR0VORVJBTF9TRVJWRVJfRVJST1IgPSA1MDAwMDEsXHJcbiAgICBTRVJWRVJfTE9HSU5fRVJST1IgPSA1MDAwMDIsIC8vIGdlbmVyYWwgZXJyb3IgZHVyaW5nIHRoZSBsb2dpbiBwcm9jZXNzXHJcbiAgICBERUZBVUxUX0FQUExJQ0FUSU9OX0NPTkZJR1VSQVRJT05fRVJST1IgPSA1MDAwMDMsIC8vIEZvciBtdWx0aXBsZSBEQyAtIHdoZW4gbm8gZGVmYXVsdCBhcHBsaWNhdGlvbiBjYW4gYmUgZm91bmQgaW4gRGVmYXVsdEFwcGxpY2F0aW9ucy5jb25maWcuIFdpdGggZXJyb3IgZGV0YWlscyBvZjogXCJEZWZhdWx0IGFwcGxpY2F0aW9uIGlzbid0IGNvbmZpZ3VyZWQgZm9yIGRhdGFDZW50ZXJcIlxyXG4gICAgU0VTU0lPTl9NSUdSQVRJT05fRVJST1IgPSA1MDAwMTQsIC8vIGVycm9yIGluIG1pZ3JhdGluZyBvbGQgdG8gbmV3IGZhY2Vib29rIHNlc3Npb25cclxuICAgIFBST1ZJREVSX0VSUk9SID0gNTAwMDIzLCAvLyBnZW5lcmFsIGVycm9yIGZyb20gdGhlIHByb3ZpZGVyXHJcbiAgICBEQVRBQkFTRV9FUlJPUiA9IDUwMDAyOCxcclxuICAgIFVTRVJOQU1FX1JFUVVJUkVEID0gNTAwMDI5LCAvLyBJbm5lciBjb2RlXHJcbiAgICBOT19QUk9WSURFUl9BUFBMSUNBVElPTiA9IDUwMDAzMSwgLy8gdGhlIGFwcGxpY2F0aW9uIGZvciB0aGlzIHByb3ZpZGVyIGlzIG5vdCBkZWZpbmVkIGZvciB0aGlzIHNpdGVcclxuICAgIExPQURfRkFJTEVEID0gNTAwMDMyLCAvLyBjbGllbnQgZXJyb3JcclxuICAgIElOVkFMSURfRU5WSVJPTk1FTlRfQ09ORklHID0gNTAwMDMzLCAvLyBJbiBjYXNlIHRoZXJlIGlzIG5vIHRhcmdldCBlbnZpcm9ubWVudCBpbiB0aGUgY29uZmlnIGZpbGUgd2UnZCByZXR1cm4gd2l0aCAgaW52YWxpZF9lbnZpcm9ubWVudF9jb25maWcgZXJyb3IuXHJcbiAgICBFUlJPUl9EVVJJTkdfQkFDS0VORF9PUEVSQVRJT04gPSA1MDAwMzQsXHJcbiAgICBUSU1FT1VUID0gNTA0MDAxLCAvLyBvdXRnb2luZyByZXF1ZXN0IGhhZCB0aW1lZCBvdXRcclxuICAgIENMSUVOVFRJTUVPVVQgPSA1MDQwMDIsIC8vIEZvciBzZXJ2ZXIgU0RLcyAtIGEgY2xpZW50IHNpZGUgdGltZW91dFxyXG4gICAgSU5WQUxJRF9VUkwgPSA0MDQwMDQsIC8vIGVtYmVkLmx5IDQwNCBlcnJvciBtZXNzYWdlIC0gdXJsIGlzIG5vdCB2YWxpZFxyXG4gICAgTUVESUFfSVRFTVNfTk9UX1NVUFBPUlRFRCA9IDQwMTAwMSwgLy8gTWVkaWEgaXRlbXMgYSBub3QgYWxsb3dlZCBmb3IgdGhpcyBjYXRlZ29yeVxyXG4gICAgTUlTU0lOR19FUlJPUl9DT0RFID0gNTk5OTk5LFxyXG59XHJcbmV4cG9ydCBjb25zdCBlbnVtIEdTRXJyb3JEZXRhaWxzIHtcclxuICAgIE5vbmUgPSAwLFxyXG4gICAgU2FtZV9wYXNzd29yZCA9IDEwMDAwMSwgLy8gUmVzZXQgUGFzc3dvcmQgLSBcIidvbGRQYXNzd29yZCcgY2Fubm90IGJlIHRoZSBzYW1lIGFzICduZXdQYXNzd29yZCdcIlxyXG4gICAgSW52YWxpZF9wYXNzd29yZCA9IDEwMDAwMiwgLy8gUmVzZXQgUGFzc3dvcmQgLSBjdXJyZW50IHBhc3N3b3JkIGlzIHdyb25nL2ludmFsaWRcclxuICAgIEludmFsaWRfY291bnRlcnNfcXVlcnlfd2l0aF9jdXJzb3IgPSAxMDAwMDMsXHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==